/*!
 * 
 *     VERSION: 3.9.15
 *     Git Hash: 0bcc91b00b789cd59996fd99a5b71de5a9298065
 * 
 *     Create At: 2025/4/22 15:36:21
 * 
 */
! function (e, t) {
  "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" ==
    typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports
    .RecordPlayer = t() : e.RecordPlayer = t()
}(window, (function () {
  return function (e) {
    var t = {};

    function n(r) {
      if (t[r]) return t[r].exports;
      var a = t[r] = {
        i: r,
        l: !1,
        exports: {}
      };
      return e[r].call(a.exports, a, a.exports, n), a.l = !0, a.exports
    }
    return n.m = e, n.c = t, n.d = function (e, t, r) {
      n.o(e, t) || Object.defineProperty(e, t, {
        enumerable: !0,
        get: r
      })
    }, n.r = function (e) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol
        .toStringTag, {
          value: "Module"
        }), Object.defineProperty(e, "__esModule", {
        value: !0
      })
    }, n.t = function (e, t) {
      if (1 & t && (e = n(e)), 8 & t) return e;
      if (4 & t && "object" == typeof e && e && e.__esModule) return e;
      var r = Object.create(null);
      if (n.r(r), Object.defineProperty(r, "default", {
          enumerable: !0,
          value: e
        }), 2 & t && "string" != typeof e)
        for (var a in e) n.d(r, a, function (t) {
          return e[t]
        }.bind(null, a));
      return r
    }, n.n = function (e) {
      var t = e && e.__esModule ? function () {
        return e.default
      } : function () {
        return e
      };
      return n.d(t, "a", t), t
    }, n.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "", n(n.s = 506)
  }([function (e, t, n) {
    "use strict";
    t.__esModule = !0, t.default = function (e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r, a = n(125),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.default = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r
            .writable = !0), (0, i.default)(e, r.key, r)
        }
      }
      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t
      }
    }()
  }, function (e, t, n) {
    e.exports = {
      default: n(208),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r, a = n(33),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.default = function (e, t) {
      if (!e) throw new ReferenceError(
        "this hasn't been initialised - super() hasn't been called");
      return !t || "object" !== (void 0 === t ? "undefined" : (0, i.default)(t)) &&
        "function" != typeof t ? e : t
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r = A(n(210)),
      a = A(n(155)),
      i = A(n(33));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.default = function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError(
        "Super expression must either be null or a function, not " + (void 0 === t ?
          "undefined" : (0, i.default)(t)));
      e.prototype = (0, a.default)(t && t.prototype, {
        constructor: {
          value: e,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), t && (r.default ? (0, r.default)(e, t) : e.__proto__ = t)
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(164),
      __esModule: !0
    }
  }, function (e, t, n) {
    ! function () {
      "use strict";

      function t(e, t) {
        var n, r, a, i, A = E;
        for (i = arguments.length; i-- > 2;) T.push(arguments[i]);
        for (t && null != t.children && (T.length || T.push(t.children), delete t
            .children); T.length;)
          if ((r = T.pop()) && void 0 !== r.pop)
            for (i = r.length; i--;) T.push(r[i]);
          else "boolean" == typeof r && (r = null), (a = "function" != typeof e) && (
              null == r ? r = "" : "number" == typeof r ? r += "" : "string" !=
              typeof r && (a = !1)), a && n ? A[A.length - 1] += r : A === E ? A = [r] : A
            .push(r), n = a;
        var o = new b;
        return o.nodeName = e, o.children = A, o.attributes = null == t ? void 0 : t, o
          .key = null == t ? void 0 : t.key, void 0 !== k.vnode && k.vnode(o), o
      }

      function n(e, t) {
        for (var n in t) e[n] = t[n];
        return e
      }

      function r(e, t) {
        e && ("function" == typeof e ? e(t) : e.current = t)
      }

      function a(e) {
        !e.__d && (e.__d = !0) && 1 == P.push(e) && (k.debounceRendering || D)(i)
      }

      function i() {
        for (var e; e = P.pop();) e.__d && M(e)
      }

      function A(e, t, n) {
        return "string" == typeof t || "number" == typeof t ? void 0 !== e.splitText :
          "string" == typeof t.nodeName ? !e._componentConstructor && o(e, t.nodeName) :
          n || e._componentConstructor === t.nodeName
      }

      function o(e, t) {
        return e.__n === t || e.nodeName.toLowerCase() === t.toLowerCase()
      }

      function s(e) {
        var t = n({}, e.attributes);
        t.children = e.children;
        var r = e.nodeName.defaultProps;
        if (void 0 !== r)
          for (var a in r) void 0 === t[a] && (t[a] = r[a]);
        return t
      }

      function u(e) {
        var t = e.parentNode;
        t && t.removeChild(e)
      }

      function l(e, t, n, a, i) {
        if ("className" === t && (t = "class"), "key" === t);
        else if ("ref" === t) r(n, null), r(a, e);
        else if ("class" !== t || i)
          if ("style" === t) {
            if (a && "string" != typeof a && "string" != typeof n || (e.style.cssText =
                a || ""), a && "object" == typeof a) {
              if ("string" != typeof n)
                for (var A in n) A in a || (e.style[A] = "");
              for (var A in a) e.style[A] = "number" == typeof a[A] && !1 === N.test(A) ?
                a[A] + "px" : a[A]
            }
          } else if ("dangerouslySetInnerHTML" === t) a && (e.innerHTML = a.__html || "");
        else if ("o" == t[0] && "n" == t[1]) {
          var o = t !== (t = t.replace(/Capture$/, ""));
          t = t.toLowerCase().substring(2), a ? n || e.addEventListener(t, c, o) : e
            .removeEventListener(t, c, o), (e.__l || (e.__l = {}))[t] = a
        } else if ("list" !== t && "type" !== t && !i && t in e) {
          try {
            e[t] = null == a ? "" : a
          } catch (e) {}
          null != a && !1 !== a || "spellcheck" == t || e.removeAttribute(t)
        } else {
          var s = i && t !== (t = t.replace(/^xlink:?/, ""));
          null == a || !1 === a ? s ? e.removeAttributeNS("http://www.w3.org/1999/xlink",
            t.toLowerCase()) : e.removeAttribute(t) : "function" != typeof a && (s ? e
            .setAttributeNS("http://www.w3.org/1999/xlink", t.toLowerCase(), a) : e
            .setAttribute(t, a))
        } else e.className = a || ""
      }

      function c(e) {
        return this.__l[e.type](k.event && k.event(e) || e)
      }

      function d() {
        for (var e; e = Q.shift();) k.afterMount && k.afterMount(e), e
          .componentDidMount && e.componentDidMount()
      }

      function h(e, t, n, r, a, i) {
        O++ || (_ = null != a && void 0 !== a.ownerSVGElement, S = null != e && !(
          "__preactattr_" in e));
        var A = p(e, t, n, r, i);
        return a && A.parentNode !== a && a.appendChild(A), --O || (S = !1, i || d()), A
      }

      function p(e, t, n, r, a) {
        var i = e,
          A = _;
        if (null != t && "boolean" != typeof t || (t = ""), "string" == typeof t ||
          "number" == typeof t) return e && void 0 !== e.splitText && e.parentNode && (!e
          ._component || a) ? e.nodeValue != t && (e.nodeValue = t) : (i = document
          .createTextNode(t), e && (e.parentNode && e.parentNode.replaceChild(i, e),
            g(e, !0))), i.__preactattr_ = !0, i;
        var s = t.nodeName;
        if ("function" == typeof s) return C(e, t, n, r);
        if (_ = "svg" === s || "foreignObject" !== s && _, s += "", (!e || !o(e, s)) && (
            i = function (e, t) {
              var n = t ? document.createElementNS("http://www.w3.org/2000/svg", e) :
                document.createElement(e);
              return n.__n = e, n
            }(s, _), e)) {
          for (; e.firstChild;) i.appendChild(e.firstChild);
          e.parentNode && e.parentNode.replaceChild(i, e), g(e, !0)
        }
        var u = i.firstChild,
          l = i.__preactattr_,
          c = t.children;
        if (null == l) {
          l = i.__preactattr_ = {};
          for (var d = i.attributes, h = d.length; h--;) l[d[h].name] = d[h].value
        }
        return !S && c && 1 === c.length && "string" == typeof c[0] && null != u &&
          void 0 !== u.splitText && null == u.nextSibling ? u.nodeValue != c[0] && (u
            .nodeValue = c[0]) : (c && c.length || null != u) && f(i, c, n, r, S ||
            null != l.dangerouslySetInnerHTML), v(i, t.attributes, l), _ = A, i
      }

      function f(e, t, n, r, a) {
        var i, o, s, l, c, d = e.childNodes,
          h = [],
          f = {},
          y = 0,
          v = 0,
          m = d.length,
          w = 0,
          B = t ? t.length : 0;
        if (0 !== m)
          for (var M = 0; M < m; M++) {
            var C = d[M],
              I = C.__preactattr_;
            null != (x = B && I ? C._component ? C._component.__k : I.key : null) ? (y++,
                f[x] = C) : (I || (void 0 !== C.splitText ? !a || C.nodeValue.trim() :
              a)) && (h[w++] = C)
          }
        if (0 !== B)
          for (M = 0; M < B; M++) {
            var x;
            if (c = null, null != (x = (l = t[M]).key)) y && void 0 !== f[x] && (c = f[x],
              f[x] = void 0, y--);
            else if (v < w)
              for (i = v; i < w; i++)
                if (void 0 !== h[i] && A(o = h[i], l, a)) {
                  c = o, h[i] = void 0, i === w - 1 && w--, i === v && v++;
                  break
                } c = p(c, l, n, r), s = d[M], c && c !== e && c !== s && (null == s ? e
              .appendChild(c) : c === s.nextSibling ? u(s) : e.insertBefore(c, s))
          }
        if (y)
          for (var M in f) void 0 !== f[M] && g(f[M], !1);
        for (; v <= w;) void 0 !== (c = h[w--]) && g(c, !1)
      }

      function g(e, t) {
        var n = e._component;
        n ? I(n) : (null != e.__preactattr_ && r(e.__preactattr_.ref, null), !1 !== t &&
          null != e.__preactattr_ || u(e), y(e))
      }

      function y(e) {
        for (e = e.lastChild; e;) {
          var t = e.previousSibling;
          g(e, !0), e = t
        }
      }

      function v(e, t, n) {
        var r;
        for (r in n) t && null != t[r] || null == n[r] || l(e, r, n[r], n[r] = void 0, _);
        for (r in t) "children" === r || "innerHTML" === r || r in n && t[r] === (
          "value" === r || "checked" === r ? e[r] : n[r]) || l(e, r, n[r], n[r] = t[r],
          _)
      }

      function m(e, t, n) {
        var r, a = U.length;
        for (e.prototype && e.prototype.render ? (r = new e(t, n), x.call(r, t, n)) : ((
            r = new x(t, n)).constructor = e, r.render = w); a--;)
          if (U[a].constructor === e) return r.__b = U[a].__b, U.splice(a, 1), r;
        return r
      }

      function w(e, t, n) {
        return this.constructor(e, n)
      }

      function B(e, t, n, i, A) {
        e.__x || (e.__x = !0, e.__r = t.ref, e.__k = t.key, delete t.ref, delete t.key,
          void 0 === e.constructor.getDerivedStateFromProps && (!e.base || A ? e
            .componentWillMount && e.componentWillMount() : e
            .componentWillReceiveProps && e.componentWillReceiveProps(t, i)), i && i !==
          e.context && (e.__c || (e.__c = e.context), e.context = i), e.__p || (e.__p =
            e.props), e.props = t, e.__x = !1, 0 !== n && (1 !== n && !1 === k
            .syncComponentUpdates && e.base ? a(e) : M(e, 1, A)), r(e.__r, e))
      }

      function M(e, t, r, a) {
        if (!e.__x) {
          var i, A, o, u = e.props,
            l = e.state,
            c = e.context,
            p = e.__p || u,
            f = e.__s || l,
            y = e.__c || c,
            v = e.base,
            w = e.__b,
            C = v || w,
            x = e._component,
            b = !1,
            T = y;
          if (e.constructor.getDerivedStateFromProps && (l = n(n({}, l), e.constructor
              .getDerivedStateFromProps(u, l)), e.state = l), v && (e.props = p, e.state =
              f, e.context = y, 2 !== t && e.shouldComponentUpdate && !1 === e
              .shouldComponentUpdate(u, l, c) ? b = !0 : e.componentWillUpdate && e
              .componentWillUpdate(u, l, c), e.props = u, e.state = l, e.context = c), e
            .__p = e.__s = e.__c = e.__b = null, e.__d = !1, !b) {
            i = e.render(u, l, c), e.getChildContext && (c = n(n({}, c), e
              .getChildContext())), v && e.getSnapshotBeforeUpdate && (T = e
              .getSnapshotBeforeUpdate(p, f));
            var E, D, N = i && i.nodeName;
            if ("function" == typeof N) {
              var P = s(i);
              (A = x) && A.constructor === N && P.key == A.__k ? B(A, P, 1, c, !1) : (E =
                A, e._component = A = m(N, P, c), A.__b = A.__b || w, A.__u = e, B(A, P,
                  0, c, !1), M(A, 1, r, !0)), D = A.base
            } else o = C, (E = x) && (o = e._component = null), (C || 1 === t) && (o && (o
              ._component = null), D = h(o, i, c, r || !v, C && C.parentNode, !0));
            if (C && D !== C && A !== x) {
              var _ = C.parentNode;
              _ && D !== _ && (_.replaceChild(D, C), E || (C._component = null, g(C, !1)))
            }
            if (E && I(E), e.base = D, D && !a) {
              for (var S = e, U = e; U = U.__u;)(S = U).base = D;
              D._component = S, D._componentConstructor = S.constructor
            }
          }
          for (!v || r ? Q.push(e) : b || (e.componentDidUpdate && e.componentDidUpdate(p,
              f, T), k.afterUpdate && k.afterUpdate(e)); e.__h.length;) e.__h.pop().call(
            e);
          O || a || d()
        }
      }

      function C(e, t, n, r) {
        for (var a = e && e._component, i = a, A = e, o = a && e._componentConstructor ===
            t.nodeName, u = o, l = s(t); a && !u && (a = a.__u);) u = a.constructor === t
          .nodeName;
        return a && u && (!r || a._component) ? (B(a, l, 3, n, r), e = a.base) : (i && !
          o && (I(i), e = A = null), a = m(t.nodeName, l, n), e && !a.__b && (a.__b = e,
            A = null), B(a, l, 1, n, r), e = a.base, A && e !== A && (A._component =
            null, g(A, !1))), e
      }

      function I(e) {
        k.beforeUnmount && k.beforeUnmount(e);
        var t = e.base;
        e.__x = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;
        var n = e._component;
        n ? I(n) : t && (null != t.__preactattr_ && r(t.__preactattr_.ref, null), e.__b =
          t, u(t), U.push(e), y(t)), r(e.__r, null)
      }

      function x(e, t) {
        this.__d = !0, this.context = t, this.props = e, this.state = this.state || {},
          this.__h = []
      }
      var b = function () {},
        k = {},
        T = [],
        E = [],
        D = "function" == typeof Promise ? Promise.resolve().then.bind(Promise
      .resolve()) : setTimeout,
        N = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,
        P = [],
        Q = [],
        O = 0,
        _ = !1,
        S = !1,
        U = [];
      n(x.prototype, {
        setState: function (e, t) {
          this.__s || (this.__s = this.state), this.state = n(n({}, this.state),
              "function" == typeof e ? e(this.state, this.props) : e), t && this.__h
            .push(t), a(this)
        },
        forceUpdate: function (e) {
          e && this.__h.push(e), M(this, 2)
        },
        render: function () {}
      });
      var F = {
        h: t,
        createElement: t,
        cloneElement: function (e, r) {
          return t(e.nodeName, n(n({}, e.attributes), r), arguments.length > 2 ? []
            .slice.call(arguments, 2) : e.children)
        },
        createRef: function () {
          return {}
        },
        Component: x,
        render: function (e, t, n) {
          return h(n, e, {}, !1, t, !1)
        },
        rerender: i,
        options: k
      };
      e.exports = F
    }()
  }, function (e, t, n) {
    e.exports = {
      default: n(192),
      __esModule: !0
    }
  }, function (e, t) {
    var n = e.exports = {
      version: "2.6.12"
    };
    "number" == typeof __e && (__e = n)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(11)),
      a = l(n(5)),
      i = l(n(0)),
      A = l(n(1)),
      o = l(n(33)),
      s = n(46),
      u = n(107);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = void 0,
      d = {
        type: "",
        boardName: "whiteboard",
        pageIndex: "0",
        dependOn: void 0,
        timestamp: 0
      },
      h = !1;

    function p(e, t, n, r) {
      var a = !1;
      return d.pageIndex !== n || d.boardName !== r ? a = !0 : d.inProgress ? (e !== d
        .type || (void 0 === t ? "undefined" : (0, o.default)(t)) !== (0, o.default)(d
          .dependOn) || "string" == typeof t && t !== d.dependOn || Array.isArray(t) &&
        Array.isArray(d.dependOn) && t.join(",") !== d.dependOn.join(",") || h || -1 !==
        ["undo", "redo"].indexOf(e)) && (a = !0) : a = !0, a
    }
    var f = function () {
      function e(t) {
        (0, i.default)(this, e), this.type = "base", this.currentUrlOpid = "", this
          .app = t, this.opsManager = t.opsManager, this.registerHooks()
      }
      return (0, A.default)(e, [{
        key: "registerHooks",
        value: function () {}
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !1,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            },
            activate: {
              value: !1,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          console.warn("DEV--\x3e", "若设置了exec为true，请继承execCommand函数，并作出对应的处理。")
        }
      }, {
        key: "getSnapshot",
        value: function () {
          return {
            type: this.type
          }
        }
      }, {
        key: "opIdForseen",
        value: function (e, t) {
          return p(e, t, this.opsManager.currPage.pageIndex, this.opsManager
              .currPage.boardName) ? this.opsManager.currPage.getNextOpId() :
            this.opsManager.currPage.getOpId()
        }
      }, {
        key: "dispatch",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[
              1],
            n = arguments[2];
          if (e.hasOwnProperty("type")) {
            if (s.globalSnapshotTypes.indexOf(e.type) > -1) return this
              .dispatchGlobalAction(e);
            if ("page" === e.type) return this.dispatchPageAction(e);
            if ("board" === e.type || "transDoc" === e.type) return this
              .dispatchBoardAction(e);
            var r = this.app.room.currBoard,
              i = this.app.room.currBoard.currPage,
              A = Date.now() + this.app.ntpTimeDiff,
              o = void 0;
            if (e.reuseOpType) o = this.app.account + "-" + e.reuseOpType,
              delete e.reuseOpType;
            else if (n) o = n, d = {
              type: e.type,
              dependOn: e.dependOn,
              timestamp: A,
              pageIndex: this.opsManager.currPage.pageIndex,
              boardName: this.opsManager.currPage.boardName,
              inProgress: e.inProgress
            };
            else {
              var u = p(e.type, e.dependOn, this.opsManager.currPage.pageIndex,
                this.opsManager.currPage.boardName);
              h = !1, d = {
                  type: e.type,
                  dependOn: e.dependOn,
                  timestamp: A,
                  pageIndex: this.opsManager.currPage.pageIndex,
                  boardName: this.opsManager.currPage.boardName,
                  inProgress: e.inProgress
                }, u && this.opsManager.currPage.prepareNewOpId(), o = this
                .opsManager.currPage.getOpId()
            }
            var l = {
                category: "inPageOp",
                board: this.app.room.currIndex,
                page: r.currIndex,
                time: A,
                uid: this.app.account,
                opId: o,
                data: e
              },
              c = 200,
              f = Array.isArray(e.dependOn) && e.dependOn.length > c;
            if (e.inProgress && f) i.setLocalOp(l.data.type, l, !0);
            else if (f) {
              i.setLocalOp(l.data.type, void 0, !0);
              for (var g = 0; g < e.dependOn.length; g += c) o = this.opsManager
                .currPage.getNextOpId(!0), this.app.room.dispatch((0, a.default)
                  ((0, a.default)({}, l), {
                    opId: o,
                    data: (0, a.default)((0, a.default)({}, l.data), {
                      dependOn: e.dependOn.slice(g, g + c)
                    })
                  }), !0)
            } else this.app.room.dispatch(l, t);
            return o
          }
          var y = n || this.opsManager.currPage.getOpId(),
            v = {
              opId: y,
              data: e
            };
          return this.app.room.dispatch(v, t), y
        }
      }, {
        key: "getLocalSnapshot",
        value: function (e) {
          return {
            category: "inPageOp",
            board: this.app.room.currIndex,
            page: this.app.room.currBoard.currIndex,
            time: Date.now(),
            uid: this.app.account,
            opId: e.reuseOpType || e.type,
            data: e
          }
        }
      }, {
        key: "dispatchFromPage",
        value: function (e, t) {
          var n = Date.now() + this.app.ntpTimeDiff;
          t.prepareNewOpId();
          var r = {
            category: "inPageOp",
            board: t.boardName,
            page: Number(t.pageIndex),
            time: n,
            uid: this.app.account,
            opId: t.getOpId(),
            data: e
          };
          d = {
            type: e.type,
            dependOn: e.dependOn,
            timestamp: n,
            pageIndex: t.pageIndex,
            boardName: t.boardName,
            inProgress: e.inProgress
          }, this.app.room.dispatch(r)
        }
      }, {
        key: "dispatchPageAction",
        value: function (e) {
          var t = Date.now() + this.app.ntpTimeDiff,
            n = (0, u.v4)(),
            r = {
              category: "pageOp",
              board: this.app.room.currIndex,
              time: t,
              uid: this.app.account,
              opId: n,
              data: e
            };
          return this.app.room.dispatch(r), n
        }
      }, {
        key: "dispatchBoardAction",
        value: function (e) {
          var t = Date.now() + this.app.ntpTimeDiff,
            n = (0, u.v4)(),
            r = {
              category: "boardOp",
              time: t,
              uid: this.app.account,
              opId: n,
              data: e
            };
          return this.app.room.dispatch(r), n
        }
      }, {
        key: "dispatchGlobalAction",
        value: function (e) {
          var t = void 0,
            n = Date.now() + this.app.ntpTimeDiff;
          e.reuseOpType ? (t = this.app.account + "-" + e.reuseOpType, delete e
            .reuseOpType) : (c && !h || (c = (0, u.v4)(), h = !1), t = c);
          var r = {
            category: "globalOp",
            time: n,
            uid: this.app.account,
            opId: t,
            data: e
          };
          return this.app.room.dispatch(r), t
        }
      }, {
        key: "emit",
        value: function (e) {
          for (var t, n = arguments.length, r = Array(n > 1 ? n - 1 : 0), a =
            1; a < n; a++) r[a - 1] = arguments[a];
          (t = this.app.dispatcher).emit.apply(t, [e].concat(r))
        }
      }, {
        key: "draw",
        value: function (e, t, n) {
          console.warn("DEV--\x3e", "请实现" + this.type + "子类中draw函数。")
        }
      }, {
        key: "intepSnap",
        value: function (e) {
          return e
        }
      }, {
        key: "preview",
        value: function (e, t, n) {
          this.draw(e, t, n)
        }
      }, {
        key: "hide",
        value: function (e, t, n) {}
      }, {
        key: "validatePayloads",
        value: function () {}
      }, {
        key: "waitTilReady",
        value: function (e) {
          return r.default.resolve()
        }
      }, {
        key: "mergePartial",
        value: function (e, t) {
          return t.hasOwnProperty("category") ? t.time >= e.time ? t : e : (0, a
            .default)((0, a.default)({}, e), {
            data: (0, a.default)((0, a.default)({}, e.data), t.data)
          })
        }
      }, {
        key: "beginBatch",
        value: function () {
          h = !0
        }
      }, {
        key: "isKeyDown",
        value: function (e) {
          return this.app.container.isKeyDown(e)
        }
      }, {
        key: "getOpTypeByOpId",
        value: function (e) {
          return this.opsManager.drawOpsOfPage.hasOwnProperty(e) ? this
            .opsManager.drawOpsOfPage[e].data.type : void 0
        }
      }, {
        key: "isMouseDown",
        get: function () {
          return this.app.container.isMouseDown
        }
      }, {
        key: "isMouseMoved",
        get: function () {
          return this.app.container.isMouseMoved
        }
      }, {
        key: "logger",
        get: function () {
          return this.app.logger
        }
      }, {
        key: "opsOfPage",
        get: function () {
          return this.opsManager.currPage.opQueue
        }
      }, {
        key: "drawOpsOfPage",
        get: function () {
          return this.opsManager.drawOpsOfPage
        }
      }, {
        key: "localOps",
        get: function () {
          return this.app.room.currBoard.currPage.localDrawQueue
        }
      }]), e
    }();
    t.default = f
  }, function (e, t, n) {
    var r = n(17),
      a = n(8),
      i = n(34),
      A = n(37),
      o = n(43),
      s = function (e, t, n) {
        var u, l, c, d = e & s.F,
          h = e & s.G,
          p = e & s.S,
          f = e & s.P,
          g = e & s.B,
          y = e & s.W,
          v = h ? a : a[t] || (a[t] = {}),
          m = v.prototype,
          w = h ? r : p ? r[t] : (r[t] || {}).prototype;
        for (u in h && (n = t), n)(l = !d && w && void 0 !== w[u]) && o(v, u) || (c = l ?
          w[u] : n[u], v[u] = h && "function" != typeof w[u] ? n[u] : g && l ? i(c, r) :
          y && w[u] == c ? function (e) {
            var t = function (t, n, r) {
              if (this instanceof e) {
                switch (arguments.length) {
                  case 0:
                    return new e;
                  case 1:
                    return new e(t);
                  case 2:
                    return new e(t, n)
                }
                return new e(t, n, r)
              }
              return e.apply(this, arguments)
            };
            return t.prototype = e.prototype, t
          }(c) : f && "function" == typeof c ? i(Function.call, c) : c, f && ((v
            .virtual || (v.virtual = {}))[u] = c, e & s.R && m && !m[u] && A(m, u, c)))
      };
    s.F = 1, s.G = 2, s.S = 4, s.P = 8, s.B = 16, s.W = 32, s.U = 64, s.R = 128, e
      .exports = s
  }, function (e, t, n) {
    e.exports = {
      default: n(181),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    e.exports = function (e) {
      var t = [];
      return t.toString = function () {
        return this.map((function (t) {
          var n = function (e, t) {
            var n = e[1] || "",
              r = e[3];
            if (!r) return n;
            if (t && "function" == typeof btoa) {
              var a = (A = r,
                  "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," +
                  btoa(unescape(encodeURIComponent(JSON.stringify(A)))) +
                  " */"),
                i = r.sources.map((function (e) {
                  return "/*# sourceURL=" + r.sourceRoot + e + " */"
                }));
              return [n].concat(i).concat([a]).join("\n")
            }
            var A;
            return [n].join("\n")
          }(t, e);
          return t[2] ? "@media " + t[2] + "{" + n + "}" : n
        })).join("")
      }, t.i = function (e, n) {
        "string" == typeof e && (e = [
          [null, e, ""]
        ]);
        for (var r = {}, a = 0; a < this.length; a++) {
          var i = this[a][0];
          null != i && (r[i] = !0)
        }
        for (a = 0; a < e.length; a++) {
          var A = e[a];
          null != A[0] && r[A[0]] || (n && !A[2] ? A[2] = n : n && (A[2] = "(" + A[
            2] + ") and (" + n + ")"), t.push(A))
        }
      }, t
    }
  }, function (e, t, n) {
    var r, a, i = {},
      A = (r = function () {
        return window && document && document.all && !window.atob
      }, function () {
        return void 0 === a && (a = r.apply(this, arguments)), a
      }),
      o = function (e, t) {
        return t ? t.querySelector(e) : document.querySelector(e)
      },
      s = function (e) {
        var t = {};
        return function (e, n) {
          if ("function" == typeof e) return e();
          if (void 0 === t[e]) {
            var r = o.call(this, e, n);
            if (window.HTMLIFrameElement && r instanceof window.HTMLIFrameElement) try {
              r = r.contentDocument.head
            } catch (e) {
              r = null
            }
            t[e] = r
          }
          return t[e]
        }
      }(),
      u = null,
      l = 0,
      c = [],
      d = n(222);

    function h(e, t) {
      for (var n = 0; n < e.length; n++) {
        var r = e[n],
          a = i[r.id];
        if (a) {
          a.refs++;
          for (var A = 0; A < a.parts.length; A++) a.parts[A](r.parts[A]);
          for (; A < r.parts.length; A++) a.parts.push(m(r.parts[A], t))
        } else {
          var o = [];
          for (A = 0; A < r.parts.length; A++) o.push(m(r.parts[A], t));
          i[r.id] = {
            id: r.id,
            refs: 1,
            parts: o
          }
        }
      }
    }

    function p(e, t) {
      for (var n = [], r = {}, a = 0; a < e.length; a++) {
        var i = e[a],
          A = t.base ? i[0] + t.base : i[0],
          o = {
            css: i[1],
            media: i[2],
            sourceMap: i[3]
          };
        r[A] ? r[A].parts.push(o) : n.push(r[A] = {
          id: A,
          parts: [o]
        })
      }
      return n
    }

    function f(e, t) {
      var n = s(e.insertInto);
      if (!n) throw new Error(
        "Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid."
        );
      var r = c[c.length - 1];
      if ("top" === e.insertAt) r ? r.nextSibling ? n.insertBefore(t, r.nextSibling) : n
        .appendChild(t) : n.insertBefore(t, n.firstChild), c.push(t);
      else if ("bottom" === e.insertAt) n.appendChild(t);
      else {
        if ("object" != typeof e.insertAt || !e.insertAt.before) throw new Error(
          "[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n"
          );
        var a = s(e.insertAt.before, n);
        n.insertBefore(t, a)
      }
    }

    function g(e) {
      if (null === e.parentNode) return !1;
      e.parentNode.removeChild(e);
      var t = c.indexOf(e);
      t >= 0 && c.splice(t, 1)
    }

    function y(e) {
      var t = document.createElement("style");
      if (void 0 === e.attrs.type && (e.attrs.type = "text/css"), void 0 === e.attrs
        .nonce) {
        var r = function () {
          0;
          return n.nc
        }();
        r && (e.attrs.nonce = r)
      }
      return v(t, e.attrs), f(e, t), t
    }

    function v(e, t) {
      Object.keys(t).forEach((function (n) {
        e.setAttribute(n, t[n])
      }))
    }

    function m(e, t) {
      var n, r, a, i;
      if (t.transform && e.css) {
        if (!(i = "function" == typeof t.transform ? t.transform(e.css) : t.transform
            .default(e.css))) return function () {};
        e.css = i
      }
      if (t.singleton) {
        var A = l++;
        n = u || (u = y(t)), r = M.bind(null, n, A, !1), a = M.bind(null, n, A, !0)
      } else e.sourceMap && "function" == typeof URL && "function" == typeof URL
        .createObjectURL && "function" == typeof URL.revokeObjectURL && "function" ==
        typeof Blob && "function" == typeof btoa ? (n = function (e) {
          var t = document.createElement("link");
          return void 0 === e.attrs.type && (e.attrs.type = "text/css"), e.attrs.rel =
            "stylesheet", v(t, e.attrs), f(e, t), t
        }(t), r = I.bind(null, n, t), a = function () {
          g(n), n.href && URL.revokeObjectURL(n.href)
        }) : (n = y(t), r = C.bind(null, n), a = function () {
          g(n)
        });
      return r(e),
        function (t) {
          if (t) {
            if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap)
              return;
            r(e = t)
          } else a()
        }
    }
    e.exports = function (e, t) {
      if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document)
      throw new Error("The style-loader cannot be used in a non-browser environment");
      (t = t || {}).attrs = "object" == typeof t.attrs ? t.attrs : {}, t.singleton ||
        "boolean" == typeof t.singleton || (t.singleton = A()), t.insertInto || (t
          .insertInto = "head"), t.insertAt || (t.insertAt = "bottom");
      var n = p(e, t);
      return h(n, t),
        function (e) {
          for (var r = [], a = 0; a < n.length; a++) {
            var A = n[a];
            (o = i[A.id]).refs--, r.push(o)
          }
          e && h(p(e, t), t);
          for (a = 0; a < r.length; a++) {
            var o;
            if (0 === (o = r[a]).refs) {
              for (var s = 0; s < o.parts.length; s++) o.parts[s]();
              delete i[o.id]
            }
          }
        }
    };
    var w, B = (w = [], function (e, t) {
      return w[e] = t, w.filter(Boolean).join("\n")
    });

    function M(e, t, n, r) {
      var a = n ? "" : r.css;
      if (e.styleSheet) e.styleSheet.cssText = B(t, a);
      else {
        var i = document.createTextNode(a),
          A = e.childNodes;
        A[t] && e.removeChild(A[t]), A.length ? e.insertBefore(i, A[t]) : e.appendChild(i)
      }
    }

    function C(e, t) {
      var n = t.css,
        r = t.media;
      if (r && e.setAttribute("media", r), e.styleSheet) e.styleSheet.cssText = n;
      else {
        for (; e.firstChild;) e.removeChild(e.firstChild);
        e.appendChild(document.createTextNode(n))
      }
    }

    function I(e, t, n) {
      var r = n.css,
        a = n.sourceMap,
        i = void 0 === t.convertToAbsoluteUrls && a;
      (t.convertToAbsoluteUrls || i) && (r = d(r)), a && (r +=
        "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(
          encodeURIComponent(JSON.stringify(a)))) + " */");
      var A = new Blob([r], {
          type: "text/css"
        }),
        o = e.href;
      e.href = URL.createObjectURL(A), o && URL.revokeObjectURL(o)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = t.isZh = !0,
      a = (t.setLang = function (e) {
        t.isZh = r = "zh" === e
      }, t.getMsg = function (e, t) {
        if (i[e]) {
          var n = i[e];
          if ("string" == typeof n) return r ? n : e;
          var a = r ? n.zh : n.en;
          return "function" == typeof a ? a(t) : a
        }
        return console.error("[wb] 找不到名称为: " + e + "的文案"), e
      }, {
        sync: {
          zh: "同步数据中",
          en: "Synchronizing"
        },
        recnned: {
          zh: "重新连接成功",
          en: "Reconnected"
        },
        recnning: {
          zh: "网络状况不稳定，正在重新连接...",
          en: "Network unstable. Reconnecting"
        },
        disconn: {
          zh: "连接已断开",
          en: "Disconnected"
        },
        syncFail: {
          zh: "无法同步数据，请检查你的网络",
          en: "Sync failed, please check your network connection"
        },
        invalidUrl: {
          zh: "输入的H5页面URL格式非法",
          en: "Invalid H5 page URL"
        },
        onemedia: {
          zh: "只允许同时放置一个音视频或者H5页面插件",
          en: "Each page could insert at most one media file or one H5 page"
        },
        follow: {
          zh: "你当前处于视角跟随状态",
          en: "You are currently in camera follow state"
        },
        imgDownFail: {
          zh: "图片下载失败",
          en: "Image download failed"
        },
        cpyClipFail: {
          zh: "复制元素为图片失败",
          en: "Save elements as image failed"
        },
        cpyClipSucc: {
          zh: "元素已复制至剪切板中",
          en: "Elements are copied to clipboard"
        },
        logThrottle: {
          zh: "正在上传中，请勿重复点击",
          en: "Log is uploading, please wait"
        },
        logUploading: {
          zh: "正在上传中，大概需要5-10s",
          en: "Log is uploading, it takes about 5-10 seconds"
        },
        logUploadFail: {
          zh: function (e) {
            return "日志上传失败: " + e
          },
          en: function (e) {
            return "Log upload failed: " + e
          }
        },
        mediaPreMiss: {
          zh: "转码必需提供模板",
          en: "Preset id is needed to transcode media file"
        },
        sizeLimit: {
          zh: "文件大小不能超过",
          en: "File size should not exceed "
        },
        fileEmpty: {
          zh: "文件不能为空",
          en: "File should not be empty"
        },
        allowedTypes: {
          zh: "当前仅支持以下格式",
          en: "Only these formats are supported"
        },
        transFail: {
          zh: "转码失败",
          en: "Transcode failed"
        },
        transSucc: {
          zh: function (e) {
            return e + "转码成功"
          },
          en: function (e) {
            return e + " transcode succeed"
          }
        },
        delayAdd: {
          zh: "目前网络不稳定，若30s内恢复网络，将自动添加文档",
          en: "If connection restores in 30 secs, it would automatically add your selected file"
        },
        txtExceed: {
          zh: "文本输入超出最大限制",
          en: "Text length exceeds limit"
        },
        iosTxt: {
          zh: "Ios设备暂不支持添加文本",
          en: "Currently add text on ios is not supported"
        },
        pasteWait: {
          zh: "处理中，请稍候...",
          en: "Image is being processed, please wait..."
        },
        uploadPer: {
          zh: "文件上传进度",
          en: "File upload progress: "
        },
        uploadSucc: {
          zh: "上传成功",
          en: "Upload succeed"
        },
        uploadFail: {
          zh: "上传失败",
          en: "Upload failed"
        },
        uploading: {
          zh: "上传文件中...",
          en: "Uploading..."
        },
        imgUploadFail: {
          zh: "图片上传失败",
          en: "Image upload failed"
        },
        recvCancelBroadcast: {
          zh: function (e) {
            return e + "取消了视角同步"
          },
          en: function (e) {
            return e + " stop synchronizing camera"
          }
        },
        sbBroadcast: {
          zh: "其他参会人已开启视角同步",
          en: "Other participants have turned on camera synchronization"
        },
        broadcast: {
          zh: "其他用户将与您保持视角同步",
          en: "Other users will keep their perspective in sync with you"
        },
        sendCancelBroadcast: {
          zh: "其他用户将停止与您保持视角同步",
          en: "Other users will stop syncing their perspective with you"
        },
        recvBroadcast: {
          zh: function (e) {
            return "正在与" + e + "保持视角同步"
          },
          en: function (e) {
            return "Synchronizing perspective with " + e
          }
        },
        recvBroadcasting: {
          zh: "其他用户正与您保持视角同步",
          en: "Other users are syncing their perspective with you"
        },
        toFollower: {
          zh: function (e) {
            return "与" + e + "保持视角同步"
          },
          en: function (e) {
            return "Keep perspective with " + e
          }
        },
        toFreeOb: {
          zh: function (e) {
            return "与" + e + "解除视角同步"
          },
          en: function (e) {
            return "Unsync perspective with " + e
          }
        },
        uidCnameMiss: {
          zh: "uid或者房间名无法找到",
          en: "uid or channel is not found"
        },
        logMsg: {
          zh: function (e) {
            return "日志上传成功\n请告诉开发者你的appkey,uid: " + e + ", 以及上传时间: " + (new Date)
              .toLocaleTimeString()
          },
          en: function (e) {
            return "Log successfully uploaded\nPlease contact YunXin Developers with your appkey, uid: " +
              e + ", and upload time: " + (new Date).toLocaleTimeString()
          }
        },
        exportImgErr: {
          zh: function () {
            return "导出图片失败。请尝试使用其他浏览器重试"
          },
          en: function () {
            return "Error while exporting image. Please retry using another browser"
          }
        },
        image: "图片",
        video: "视频",
        audio: "音频",
        Image: "图片",
        Video: "视频",
        Audio: "音频",
        Mouse: "鼠标",
        Select: "选择",
        Pen: "涂鸦",
        PressurePen: {
          zh: "涂鸦、笔锋",
          en: "Pressure Pen"
        },
        Line: "直线",
        Shapes: "图形",
        Link: "连接",
        penAndLine: {
          zh: "涂鸦、直线",
          en: "Pen, Line"
        },
        shapeSelect: {
          zh: "选择图形",
          en: "Select shape"
        },
        Text: "文本",
        Laser: "激光笔",
        "element-eraser": {
          zh: "橡皮擦",
          en: "Eraser"
        },
        Clear: "清空",
        clearConfirm: {
          zh: "确认要清除所有内容？",
          en: "Are you sure you want to clear all contents?"
        },
        Undo: "撤销",
        Redo: "重做",
        Pan: "整体平移",
        imageUp: {
          zh: "图片上传",
          en: "Upload image"
        },
        uploadCenter: {
          zh: "文档、音视频上传",
          en: "Upload document, video or audio"
        },
        exportImage: {
          zh: "导出图片",
          en: "Export image"
        },
        uploadLog: {
          zh: "上传日志",
          en: "Upload log"
        },
        zoomOut: {
          zh: "缩小",
          en: "Zoom out"
        },
        zoomIn: {
          zh: "放大",
          en: "Zoom in"
        },
        visionControl: {
          zh: "视角同步",
          en: "Synchronize your camera"
        },
        visionLock: {
          zh: "视角模式切换",
          en: "Switch camera mode"
        },
        firstPage: {
          zh: "第一页",
          en: "First page"
        },
        nextPage: {
          zh: "下一页",
          en: "Next page"
        },
        prevPage: {
          zh: "上一页",
          en: "Prev page"
        },
        lastPage: {
          zh: "最后一页",
          en: "Last page"
        },
        Preview: "预览",
        More: "更多",
        fitContent: {
          zh: "适配内容",
          en: "Fit content"
        },
        fitDoc: {
          zh: "适配文档",
          en: "Fit Document"
        },
        Transparent: "透明",
        Opaque: "不透明",
        Thin: "细",
        Thick: "粗",
        Diamond: "菱形",
        roundRect: {
          zh: "圆角矩形",
          en: "Round corner rect"
        },
        Parallelogram: "平行四边形",
        Cloud: "云状",
        Rect: "矩形",
        Triangle: "三角形",
        Ellipse: "椭圆形",
        Star: "星形",
        resourceCenter: {
          zh: "资源库",
          en: "Resource Center"
        },
        static: "静态",
        h5: "动态",
        transcoded: "转码",
        uploadUrl: {
          zh: "添加H5页面",
          en: "add html url"
        },
        uploadStatic: {
          zh: "上传静态文档",
          en: "Upload static document"
        },
        uploadDynamic: {
          zh: "上传动态文档",
          en: "Upload dynamic document"
        },
        uploadMedia: {
          zh: "上传多媒体文件",
          en: "Upload video or audio"
        },
        uploadTransMedia: {
          zh: "上传多媒体文件并转码",
          en: "Upload video or audio and transcode"
        },
        Use: "使用",
        Delete: "删除",
        h5UrlAddInfo: {
          zh: "添加",
          en: "add"
        },
        h5UrlCloseInfo: {
          zh: "关闭",
          en: "close"
        },
        h5UrlInfo: {
          zh: "H5页面",
          en: "H5 url"
        },
        h5UrlInputInfo: {
          zh: "H5页面URL",
          en: "html url"
        },
        h5UrlTitleInputInfo: {
          zh: "H5页面标题",
          en: "html url title"
        },
        uploadInfo: {
          zh: "上传文档说明",
          en: "Instructions for uploading files"
        },
        uploadPrecon: {
          zh: "上传课件需要开通云信文档转码服务",
          en: "To upload courseware, you need to activate the Yunxin document transcoding service"
        },
        uploadStaInfo: {
          zh: "上传静态文件: 选择ppt(x), doc(x)或者pdf, 上传后以图片形式在白板中共享",
          en: "Upload static files: choose ppt(x), doc(x) or pdf, upload and share them on the whiteboard as pictures"
        },
        uploadDynInfo: {
          zh: "上传动态文件: 选择ppt(x), 上传后在白板中共享时保留ppt(x)中的动态效果",
          en: "Upload dynamic file: select ppt(x), after uploading, keep the dynamic effect in ppt(x) when sharing in the whiteboard"
        },
        uploadMediaPre: {
          zh: "上传多媒体文件需要开通云信点播服务",
          en: "To upload multimedia files, you need to activate the Yunxin Cloud-based VOD service."
        },
        uploadMediaInfo: {
          zh: function (e) {
            return "上传多媒体文件：选择音视频文件，上传后以原格式在白板中播放(" + e + ")"
          },
          en: function (e) {
            return "Upload multimedia files: select audio and video files, and play them on the whiteboard in the original format after uploading (" +
              e + ")"
          }
        },
        uploadTransInfo: {
          zh: "上传多媒体文件并转码: 选择音视频文件, 上传后转码为通用的视频格式, 保障多端兼容性",
          en: "Upload multimedia files and transcode: select audio and video files, and transcode them into common video formats after uploading to ensure multi-terminal compatibility"
        },
        pageDelConfirm: {
          zh: "确定要删除页面吗?删除后不可恢复",
          en: "Are you sure you want to delete the page? Unrecoverable after deletion"
        },
        fileDelConfirm: {
          zh: "确定要删除该文件吗?",
          en: "Are you sure you want to delete this file?"
        },
        Confirm: "确定",
        Cancel: "取消",
        addPage: {
          zh: "添加页面",
          en: "Add Page"
        },
        docPrev: {
          zh: "文档预览",
          en: "Doc Preview"
        },
        wbPrev: {
          zh: "白板预览",
          en: "Board Preview"
        },
        bringToFront: {
          zh: "置于顶部",
          en: "Bring to front"
        },
        sendToBack: {
          zh: "置于底部",
          en: "Send to back"
        },
        copyAsImg: {
          zh: "复制为图片",
          en: "Copy as image"
        },
        Copy: "拷贝",
        lineWidth: {
          zh: "线段宽度",
          en: "Line width"
        },
        strokeColor: {
          zh: "线段、边框颜色",
          en: "Stroke color"
        },
        lineProp: {
          zh: "粗细、颜色",
          en: "Line width and stroke color"
        },
        fontSize: {
          zh: "字体大小",
          en: "Font size"
        },
        fontFamily: {
          zh: "字体",
          en: "Font family"
        },
        fontColor: {
          zh: "字体颜色",
          en: "Font color"
        },
        fontFill: {
          zh: "字体背景颜色",
          en: "Font background color"
        },
        shapeFilter: {
          zh: "过滤选择元素",
          en: "Filter selected elements"
        },
        Fill: "填充色",
        textAlign: {
          zh: "文本对齐",
          en: "Text align"
        },
        linkType: {
          zh: "连接类型",
          en: "Link type"
        },
        linkArrow: {
          zh: "箭头类型",
          en: "Arrow type"
        },
        addT: {
          zh: "添加文本",
          en: "Add text"
        },
        Group: "组合元素",
        Ungroup: "解除组合",
        resDownload: {
          zh: "下载图片",
          en: "Download image"
        },
        Crop: "剪裁",
        typeChange: {
          zh: "类型转换",
          en: "Change type"
        },
        Duplicate: "复制",
        moreAction: {
          zh: "更多操作",
          en: "More"
        },
        noColor: {
          zh: "颜色未设置",
          en: "No colors available"
        },
        click2FreeOb: {
          zh: "点击解除视角同步",
          en: "Click to cancel camera sync"
        },
        click2Follow: {
          zh: "点击进入视角同步",
          en: "Click to sync perspective"
        },
        deleteDocInst: {
          zh: function (e) {
            return "是否删除文档: " + e + "? 删除后无法恢复"
          },
          en: function (e) {
            return "Are you sure you want to delete document: " + e +
              "? Can't be recovered after deletion"
          }
        },
        Filter: "筛选",
        Upload: "上传",
        Maximize: "最大化"
      }),
      i = t.LANG = a
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.getVecAngle = t.getAngleByDir = t.getPointAftPad = t.getScaleCursor = t
      .getLineFromPointsY = t.getVerticalLineY = t.getXFromCoefAndOffset = t.getLineCoef =
      t.getArrowPointsByAngle = t.getArrowPoints = void 0;
    var r, a = n(7),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.distSqrt = u, t.dist = l, t.rectCollide = function (e, t) {
      var n = [t.sx, t.sy];
      return !(e.sx > n[0] + t.w || e.sx + e.w < n[0] || e.sy > n[1] + t.h || e.sy + e
        .h < n[1])
    }, t.pointCollideWithPoint = function (e, t, n) {
      return u(e, t) <= n * n
    }, t.pointCollideWithLine = function (e, t, n, r) {
      return l(e, t) + l(e, n) - l(t, n) <= r
    }, t.pointInRect = function (e, t, n) {
      return n[0] > e.sx - t && n[0] < e.sx + e.w + t && n[1] > e.sy - t && n[1] < e
        .sy + e.h + t
    }, t.pointInVertices = c, t.polygonContain = function (e, t) {
      var n = !0,
        r = !1,
        a = void 0;
      try {
        for (var A, o = (0, i.default)(e); !(n = (A = o.next()).done); n = !0) {
          var s = A.value;
          if (!c(t, s)) return !1
        }
      } catch (e) {
        r = !0, a = e
      } finally {
        try {
          !n && o.return && o.return()
        } finally {
          if (r) throw a
        }
      }
      return !0
    }, t.polygonIntersect = function (e, t) {
      var n = [e, t],
        r = void 0,
        a = void 0,
        i = void 0,
        A = void 0,
        o = void 0,
        s = void 0,
        u = void 0,
        l = void 0;
      for (A = 0; A < n.length; A++) {
        var c = n[A];
        for (o = 0; o < c.length; o++) {
          var d = (o + 1) % c.length,
            h = c[o],
            p = c[d],
            f = {
              x: p[1] - h[1],
              y: h[0] - p[0]
            };
          for (r = a = void 0, s = 0; s < e.length; s++) i = f.x * e[s][0] + f.y * e[s][
            1
          ], (void 0 === r || i < r) && (r = i), (void 0 === a || i > a) && (a = i);
          for (u = l = void 0, s = 0; s < t.length; s++) i = f.x * t[s][0] + f.y * t[s][
            1
          ], (void 0 === u || i < u) && (u = i), (void 0 === l || i > l) && (l = i);
          if (a < u || l < r) return !1
        }
      }
      return !0
    }, t.getTransformedBoundary = function (e, t) {
      var n = t.boundary,
        r = t.mat,
        a = t.pad,
        i = void 0 === a ? 0 : a,
        A = (0, o.getTransPoint)([n.sx - i, n.sy - i], r),
        u = (0, o.getTransPoint)([n.sx + n.w + 2 * i, n.sy - i], r),
        l = (0, o.getTransPoint)([n.sx + n.w + 2 * i, n.sy + n.h + 2 * i], r),
        c = (0, o.getTransPoint)([n.sx - i, n.sy + n.h + 2 * i], r),
        d = (0, s.min)(A[0], u[0], l[0], c[0]),
        h = (0, s.min)(A[1], u[1], l[1], c[1]),
        p = (0, s.max)(A[0], u[0], l[0], c[0]),
        f = (0, s.max)(A[1], u[1], l[1], c[1]),
        g = p - d,
        y = f - h;
      n.fixRealWorldHeight && e && (y = n.fixRealWorldHeight / e);
      return {
        sx: d,
        sy: h,
        w: g,
        h: y
      }
    }, t.getTransformedSize = function (e) {
      var t = e.boundary,
        n = e.xFactor,
        r = void 0 === n ? 1 : n,
        a = e.yFactor,
        i = void 0 === a ? 1 : a;
      return {
        w: Math.abs(t.w * r),
        h: Math.abs(t.h * i)
      }
    }, t.getTransformedVertices = function (e) {
      var t = e.boundary,
        n = e.mat,
        r = (0, o.getTransPoint)([t.sx, t.sy], n),
        a = (0, o.getTransPoint)([t.sx + t.w, t.sy], n),
        i = (0, o.getTransPoint)([t.sx + t.w, t.sy + t.h], n),
        A = (0, o.getTransPoint)([t.sx, t.sy + t.h], n);
      return [r, a, i, A]
    }, t.combineBoundary = function (e, t) {
      var n = (0, s.min)(e.sx, t.sx, e.sx + e.w, t.sx + t.w),
        r = (0, s.min)(e.sy, t.sy, e.sy + e.h, t.sy + t.h),
        a = (0, s.max)(e.sx, t.sx, e.sx + e.w, t.sx + t.w),
        i = (0, s.max)(e.sy, t.sy, e.sy + e.h, t.sy + t.h);
      return {
        sx: n,
        sy: r,
        w: a - n,
        h: i - r
      }
    }, t.getPointAftRotate = function (e, t, n) {
      if (!n) return e;
      var r = [e[0] - t[0], e[1] - t[1]],
        a = [Math.cos(n) * r[0] - Math.sin(n) * r[1], Math.sin(n) * r[0] + Math.cos(n) *
          r[1]
        ];
      return [a[0] + t[0], a[1] + t[1]]
    }, t.getBoundaryBoxFromTwoPoints = function (e, t) {
      var n = (0, s.min)(e[0], t[0]),
        r = (0, s.max)(e[0], t[0]),
        a = (0, s.min)(e[1], t[1]),
        i = (0, s.max)(e[1], t[1]);
      return {
        sx: n,
        sy: a,
        w: r - n,
        h: i - a
      }
    };
    var A = n(28),
      o = n(29),
      s = n(133);

    function u(e, t) {
      return (e[0] - t[0]) * (e[0] - t[0]) + (e[1] - t[1]) * (e[1] - t[1])
    }

    function l(e, t) {
      return Math.sqrt(u(e, t))
    }

    function c(e, t) {
      for (var n = !1, r = 0, a = e.length - 1; r < e.length; a = r++) e[r][1] > t[1] !=
        e[a][1] > t[1] && t[0] < (e[a][0] - e[r][0]) * (t[1] - e[r][1]) / (e[a][1] - e[r][
          1
        ]) + e[r][0] && (n = !n);
      return n
    }
    t.getArrowPoints = function (e, t) {
      var n = 5 * e,
        r = 2 * e,
        a = d(t),
        i = t[1][0] - t[0][0] > 0 ? h(t[1], a, n) : 2 * t[1][0] - h(t[1], a, n),
        A = t[1][0] - t[0][0] == 0 ? t[1][1] + (t[1][1] - t[0][1] > 0 ? n : -n) : f(t,
          i),
        o = h(t[1], -1 / a, r),
        s = t[1][1] - t[0][1] == 0 ? t[1][1] - r : p(t[1], a, o),
        u = 2 * t[1][0] - h(t[1], -1 / a, r);
      return [
        [i, A],
        [o, s],
        [u, t[1][1] - t[0][1] == 0 ? t[1][1] + r : p(t[1], a, u)]
      ]
    }, t.getArrowPointsByAngle = function (e, t, n, r) {
      var a = Math.PI / 6 + t + Math.PI,
        i = -Math.PI / 6 + t + Math.PI;
      return [
        [n + Math.cos(t) * e, r + Math.sin(t) * e],
        [n + 5 * Math.cos(a) * e, r + 5 * Math.sin(a) * e],
        [n + 5 * Math.cos(i) * e, r + 5 * Math.sin(i) * e]
      ]
    };
    var d = t.getLineCoef = function (e) {
        return (e[1][1] - e[0][1]) / (e[1][0] - e[0][0]) || 0
      },
      h = t.getXFromCoefAndOffset = function (e, t, n) {
        return Math.sqrt(Math.pow(n, 2) / (Math.pow(t, 2) + 1)) + e[0]
      },
      p = t.getVerticalLineY = function (e, t, n) {
        return (e[0] - n) / t + e[1]
      },
      f = t.getLineFromPointsY = function (e, t) {
        return Math.max(-1e6, (e[1][1] - e[0][1]) / (e[1][0] - e[0][0]) || 0) * (t - e[0][
          0
        ]) + e[0][1]
      };
    t.getScaleCursor = function (e) {
      var t = Math.floor(16 * e / (2 * Math.PI));
      return ["ew-resize", "nwse-resize", "ns-resize", "nesw-resize"][t = Math.floor((
        t + 16 + 1) % 8 / 2)]
    }, t.getPointAftPad = function (e, t, n, r, a, i) {
      return 0 === r ? [e[0] + t * (-Math.cos(n) * a + Math.sin(n) * i), e[1] + t * (-
          Math.sin(n) * a - Math.cos(n) * i)] : 1 === r ? [e[0] + t * (Math.cos(n) * a +
          Math.sin(n) * i), e[1] + t * (Math.sin(n) * a - Math.cos(n) * i)] : 2 === r ?
        [e[0] + t * (Math.cos(n) * a - Math.sin(n) * i), e[1] + t * (Math.sin(n) * a +
          Math.cos(n) * i)] : [e[0] + t * (-Math.cos(n) * a - Math.sin(n) * i), e[1] +
          t * (-Math.sin(n) * a + Math.cos(n) * i)
        ]
    }, t.getAngleByDir = function (e) {
      switch (e) {
        case A.DIRECTION.LEFT:
          return 0;
        case A.DIRECTION.RIGHT:
          return Math.PI;
        case A.DIRECTION.UP:
          return Math.PI / 2;
        case A.DIRECTION.DOWN:
          return -Math.PI / 2
      }
    }, t.getVecAngle = function (e, t) {
      return Math.atan2(t[1] - e[1], t[0] - e[0])
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r, a = n(75),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.default = function (e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];
        return n
      }
      return (0, i.default)(e)
    }
  }, function (e, t) {
    var n = e.exports = "undefined" != typeof window && window.Math == Math ? window :
      "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = n)
  }, function (e, t, n) {
    var r = n(82)("wks"),
      a = n(69),
      i = n(17).Symbol,
      A = "function" == typeof i;
    (e.exports = function (e) {
      return r[e] || (r[e] = A && i[e] || (A ? i : a)("Symbol." + e))
    }).store = r
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.linkSelectOnly = t.padPt = t.extendCameraToSnap = t.convertWinTxtToUnixTxt = t
      .getAuxSensitivity = t.getSortedDrawOpIds = t.getVecAngle = t.updateDocClipPath = t
      .getElementPartOutOfContainer = t.filterNonMediaOpIds = t
      .transformPropertyOverwriteOp = t.drawUserName = t.roundRect = t.arrayDeduce = t
      .idsChanged = t.snapshotSelectable = t.findOpsUnderMouse = t.findOpsUnderRect =
      void 0;
    var r = c(n(20)),
      a = c(n(5)),
      i = c(n(7)),
      A = c(n(36)),
      o = n(15),
      s = n(227),
      u = n(65),
      l = n(46);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.findOpsUnderRect = function (e, t, n, r) {
      if (0 === t.length) return [];
      var a = (0, o.getBoundaryBoxFromTwoPoints)(t[0], t[t.length - 1]),
        i = [];
      for (var A in n) {
        var s = n[A];
        if ("link" === s.data.type)(0, u.isUnderRect)({
          data: s.data,
          rect: a,
          selectMode: r
        }) && i.push(A);
        else if (s.data.boundary && h(s)) {
          var l = (0, o.getTransformedVertices)(s.data);
          ("intersect" === r ? (0, o.polygonIntersect)(l, [
            [a.sx, a.sy],
            [a.sx, a.sy + a.h],
            [a.sx + a.w, a.sy + a.h],
            [a.sx + a.w, a.sy]
          ]) : (0, o.polygonContain)(l, [
            [a.sx, a.sy],
            [a.sx, a.sy + a.h],
            [a.sx + a.w, a.sy + a.h],
            [a.sx + a.w, a.sy]
          ])) && i.push(A)
        }
      }
      return i
    }, t.findOpsUnderMouse = function (e, t, n, r, a) {
      if (0 === n.length) return [];
      for (var i = (0, o.getBoundaryBoxFromTwoPoints)(n[0], n[n.length - 1]), s = (0, A
            .default)(n[n.length - 1], 2), c = s[0], d = s[1], p = g(r), f = p.length -
          1; f >= 0; f--) {
        var y = a.opMap.url;
        if (p[f] == y.currentUrlOpid) break;
        var v = r[p[f]],
          m = a.opMap[v.data.type];
        if ("link" === v.data.type) {
          var w = e.opsManager.linkOp;
          if ((0, u.isUnderPoint)({
              data: v.data,
              p: [c, d],
              op: w
            })) return [p[f]]
        } else if (v.data.boundary && h(v)) {
          var B = void 0;
          if (-1 !== l.nonRotateTypes.indexOf(v.data.type)) {
            var M = (0, o.getTransformedBoundary)(t, v.data);
            B = (0, o.rectCollide)(M, i)
          } else {
            var C = (0, o.getTransformedVertices)(v.data);
            B = (0, o.polygonIntersect)(C, [
              [i.sx, i.sy],
              [i.sx, i.sy + i.h],
              [i.sx + i.w, i.sy + i.h],
              [i.sx + i.w, i.sy]
            ])
          }
          if (B) {
            if (!m || !("ifMouseOnOp" in m)) return [p[f]];
            if (m.ifMouseOnOp(v, c, d)) return [p[f]]
          }
        }
      }
      return []
    };
    var d = ["mouse-pointer", "eraser"],
      h = t.snapshotSelectable = function (e) {
        return !(-1 !== d.indexOf(e.data.type) || e.data.locked)
      },
      p = (t.idsChanged = function (e, t) {
        if (e.length !== t.length) return !0;
        var n = !0,
          r = !1,
          a = void 0;
        try {
          for (var A, o = (0, i.default)(e); !(n = (A = o.next()).done); n = !0) {
            var s = A.value;
            if (-1 === t.indexOf(s)) return !0
          }
        } catch (e) {
          r = !0, a = e
        } finally {
          try {
            !n && o.return && o.return()
          } finally {
            if (r) throw a
          }
        }
        return !1
      }, t.arrayDeduce = function (e, t) {
        var n = [],
          r = !0,
          a = !1,
          A = void 0;
        try {
          for (var o, s = (0, i.default)(e); !(r = (o = s.next()).done); r = !0) {
            var u = o.value; - 1 === t.indexOf(u) && n.push(u)
          }
        } catch (e) {
          a = !0, A = e
        } finally {
          try {
            !r && s.return && s.return()
          } finally {
            if (a) throw A
          }
        }
        return n
      }, t.roundRect = function (e, t, n, r, a, i, A) {
        e.beginPath(), e.moveTo(t + i, n), e.lineTo(t + r - i, n), e.quadraticCurveTo(
            t + r, n, t + r, n + i), e.lineTo(t + r, n + a - i), e.quadraticCurveTo(t +
            r, n + a, t + r - i, n + a), e.lineTo(t + i, n + a), e.quadraticCurveTo(t,
            n + a, t, n + a - i), e.lineTo(t, n + i), e.quadraticCurveTo(t, n, t + i,
          n), e.closePath(), "stroke" === A ? e.stroke() : e.fill()
      }),
      f = (t.drawUserName = function (e) {
        var t = e.ctx,
          n = e.account,
          r = e.scale,
          a = e.px,
          i = e.py,
          A = e.bgColor,
          o = e.fontSize,
          s = void 0 === o ? 24 : o,
          u = e.textPadding,
          l = void 0 === u ? 15 : u,
          c = e.rectMarginBottom,
          d = void 0 === c ? 15 : c,
          h = e.radius,
          f = void 0 === h ? 10 : h,
          g = (s + 12) / r;
        l /= r, d /= r, s /= r, f /= r;
        var y = "white" === A || "rgb(255,255,255)" === A || "#ffffff" === A ||
          "#fff" === A ? "black" : "white";
        t.beginPath(), t.font = s + "px Arial";
        var v = t.measureText(n).width;
        t.fillStyle = A, p(t, a - v / 2 - l, i - d - g, v + 2 * l, g, f, "fill"), t
          .fillStyle = y, t.textAlign = "left", t.textBaseline = "middle", t.fillText(n,
            a - v / 2, i - d - g / 2)
      }, t.transformPropertyOverwriteOp = function (e, t) {
        var n = (0, a.default)({}, e.data);
        for (var r in t) "dependOn" !== r && (n[r] = t[r]);
        return "text" === e.data.type && (n.dx = 0, n.dy = 0, n.scaleX = {
          coordinate: 0,
          factor: 1
        }, n.scaleY = {
          coordinate: 0,
          factor: 1
        }, n.xFactor = 1, n.yFactor = 1, n.mat = void 0), (0, a.default)({}, e, {
          data: n
        })
      }, t.filterNonMediaOpIds = function (e, t) {
        return t.filter((function (t) {
          if (e.drawOpsOfPage.hasOwnProperty(t)) {
            var n = e.drawOpsOfPage[t];
            if ("audio" !== n.data.type && "video" !== n.data.type) return !0
          }
          return !1
        }))
      }, t.getElementPartOutOfContainer = function (e, t) {
        var n = e.sx,
          r = e.sy,
          a = n + e.w,
          i = r + e.h,
          A = t.getContainerWorldRect(),
          o = Math.max(0, A.centerX - A.width / 2 - n),
          s = Math.max(0, a - (A.centerX + A.width / 2)),
          u = Math.max(0, A.centerY - A.height / 2 - r),
          l = Math.max(0, i - (A.centerY + A.height / 2));
        return o > 0 || s > 0 || u > 0 || l > 0 ? {
          left: o,
          right: s,
          top: u,
          bottom: l
        } : null
      }),
      g = (t.updateDocClipPath = function (e, t, n) {
        var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1;
        e = (0, o.getTransformedBoundary)(t.scale, {
          boundary: e
        });
        var a = f(e, t);
        a && n ? n.style.clipPath = "inset(" + a.top / r + "px " + a.right / r + "px " +
          a.bottom / r + "px " + a.left / r + "px)" : n && (n.style.clipPath = "none")
      }, t.getVecAngle = function (e, t, n) {
        var r = [e[0] - n[0], e[1] - n[1]],
          a = [t[0] - n[0], t[1] - n[1]],
          i = Math.sqrt(r[0] * r[0] + r[1] * r[1]),
          A = Math.sqrt(a[0] * a[0] + a[1] * a[1]),
          o = r[0] * a[1] - r[1] * a[0],
          s = Math.acos((r[0] * a[0] + r[1] * a[1]) / i / A);
        return o > 0 ? s : 2 * Math.PI - s
      }, t.getSortedDrawOpIds = function (e) {
        var t = (0, r.default)(e);
        return t = t.sort((function (t, n) {
          var r = "audio" === e[t].data.type || "video" === e[t].data.type,
            a = "audio" === e[n].data.type || "video" === e[n].data.type;
          if (r && e[t].data.layer) return e[t].data.layer > 0 ? 1 : -1;
          if (a && e[n].data.layer) return e[n].data.layer > 0 ? -1 : 1;
          var i = s.LayerOrder[e[t].data.type] || 0,
            A = s.LayerOrder[e[n].data.type] || 0;
          return i !== A ? i - A : (e[t].data.layer || e[t].time) - (e[n].data
            .layer || e[n].time)
        }))
      });
    t.getAuxSensitivity = function (e) {
      return e < 1 ? 1 : 1 + Math.log(e) / 1.38
    }, t.convertWinTxtToUnixTxt = function (e) {
      return (e = e.replace(/\r\n/g, "\n")).replace(/\r/g, "\n")
    }, t.extendCameraToSnap = function (e) {
      var t = e.app,
        n = e.boundary,
        r = e.pad,
        a = void 0 === r ? 20 : r,
        i = t.getCameraBound(),
        A = {
          sx: i.centerX - i.width / 2,
          sy: i.centerY - i.height / 2,
          ex: i.centerX + i.width / 2,
          ey: i.centerY + i.height / 2
        },
        o = !1;
      return n.sx < A.sx && (o = !0, A.sx = n.sx - a), n.sy < A.sy && (o = !0, A.sy = n
          .sy - a), n.sx + n.w > A.ex && (o = !0, A.ex = n.sx + n.w + a), n.sy + n.h > A
        .ey && (o = !0, A.ey = n.sy + n.h + a), {
          needAdjust: o,
          camera: {
            centerX: A.sx / 2 + A.ex / 2,
            centerY: A.sy / 2 + A.ey / 2,
            width: A.ex - A.sx,
            height: A.ey - A.sy
          }
        }
    }, t.padPt = function (e, t) {
      return e
    }, t.linkSelectOnly = function (e, t) {
      var n, r;
      return 1 === e.length && "link" === (null === (r = null === (n = t[e[0]]) ||
        void 0 === n ? void 0 : n.data) || void 0 === r ? void 0 : r.type)
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(190),
      __esModule: !0
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(194),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.DefaultFont = void 0;
    var r = o(n(7)),
      a = o(n(0)),
      i = o(n(1)),
      A = n(28);

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var s = t.DefaultFont = "Helvetica",
      u = new(function () {
        function e() {
          (0, a.default)(this, e), this.pointsPerBatch = 1, this.linkDef = {
            dash: A.IDashType.Solid,
            linkType: A.ILinkType.Segment,
            text: {
              stroke: "black",
              fontSize: 16,
              fontFamily: s
            },
            stroke: "black",
            lineWidth: 1,
            startArrow: A.IArrowType.None,
            endArrow: A.IArrowType.Arrow
          }, this.shapeDef = {
            lineWidth: 1,
            stroke: "rgb(0, 0, 0)",
            fill: void 0,
            text: {
              fontSize: 16,
              fontFamily: s,
              stroke: "rgb(0, 0, 0)",
              fill: void 0,
              textAlign: "center",
              verticalAlign: "middle"
            },
            dash: A.IDashType.Solid,
            cursorImgUrl: void 0
          }, this.penDef = {
            lineWidth: 5,
            stroke: "rgb(0, 0, 0)",
            cursorImgUrl: void 0
          }, this.textDef = {
            fontSize: 16,
            fontFamily: s,
            stroke: "rgb(0, 0, 0)",
            fill: void 0,
            textAlign: "left"
          }
        }
        return (0, i.default)(e, [{
          key: "init",
          value: function () {
            this.linkDef = {
              dash: A.IDashType.Solid,
              linkType: A.ILinkType.Segment,
              text: {
                stroke: "black",
                fontSize: 16,
                fontFamily: s
              },
              stroke: "black",
              lineWidth: 1,
              startArrow: A.IArrowType.None,
              endArrow: A.IArrowType.Arrow
            }, this.shapeDef = {
              lineWidth: 1,
              stroke: "rgb(0, 0, 0)",
              fill: void 0,
              text: {
                fontSize: 16,
                fontFamily: s,
                stroke: "rgb(0, 0, 0)",
                fill: void 0,
                textAlign: "center",
                verticalAlign: "middle"
              },
              dash: A.IDashType.Solid,
              cursorImgUrl: void 0
            }, this.penDef = {
              lineWidth: 5,
              stroke: "rgb(0, 0, 0)",
              cursorImgUrl: void 0
            }, this.textDef = {
              fontSize: 16,
              fontFamily: s,
              stroke: "rgb(0, 0, 0)",
              fill: void 0,
              textAlign: "left"
            }
          }
        }, {
          key: "updateDefAttr",
          value: function (e, t, n) {
            var a = this,
              i = function (e, t) {
                var n, i, A, o = void 0,
                  u = e.data,
                  l = "shape" === u.type || "link" === u.type,
                  c = ["pen", "pen-arrow", "line", "line-arrow"];
                "shape" === e.data.type ? o = {
                  lineWidth: u.lineWidth,
                  stroke: u.stroke,
                  fill: u.fill,
                  dash: u.dash,
                  text: u.text
                } : "text" === e.data.type ? o = {
                  fontSize: u.fontSize,
                  fontFamily: u.fontFamily,
                  stroke: u.stroke,
                  fill: u.fill,
                  textAlign: u.textAlign
                } : -1 !== c.indexOf(e.data.type) ? o = {
                  lineWidth: u.lineWidth,
                  stroke: u.stroke
                } : "link" === e.data.type && (o = {
                  dash: u.dash,
                  linkType: u.linkType,
                  text: {
                    stroke: (null === (n = u.text) || void 0 === n ?
                      void 0 : n.stroke) || "black",
                    fontSize: (null === (i = u.text) || void 0 === i ?
                      void 0 : i.fontSize) || 16,
                    fontFamily: (null === (A = u.text) || void 0 === A ?
                      void 0 : A.fontFamily) || s
                  },
                  stroke: u.stroke,
                  lineWidth: u.lineWidth,
                  startArrow: u.start.aType,
                  endArrow: u.end.aType
                });
                var d = !0,
                  h = !1,
                  p = void 0;
                try {
                  for (var f, g = (0, r.default)(t); !(d = (f = g.next())
                    .done); d = !0) {
                    var y = f.value; - 1 !== ["fontStroke", "fontFill",
                        "textAlign", "verticalAlign", "fontSize", "fontFamily"
                      ].indexOf(y.k) && l ? -1 !== ["fontStroke", "fontFill"]
                      .indexOf(y.k) ? o.text[y.k.slice(4).toLowerCase()] = y.v :
                      o.text[y.k] = y.v : "link" === e.data.type && "start" ===
                      y.k && y.v.hasOwnProperty("aType") ? o.startArrow = y.v
                      .aType : "link" === e.data.type && "end" === y.k && y.v
                      .hasOwnProperty("aType") ? o.endArrow = y.v.aType : -1 !==
                      ["fontStroke", "fontFill"].indexOf(y.k) ? o[y.k.slice(4)
                        .toLowerCase()] = y.v : o[y.k] = y.v
                  }
                } catch (e) {
                  h = !0, p = e
                } finally {
                  try {
                    !d && g.return && g.return()
                  } finally {
                    if (h) throw p
                  }
                }
                "shape" === e.data.type ? a.shapeDef = o : "text" === e.data
                  .type ? a.textDef = o : -1 !== c.indexOf(e.data.type) ? a
                  .penDef = o : "link" === e.data.type && (a.linkDef = o)
              },
              A = !0,
              o = !1,
              u = void 0;
            try {
              for (var l, c = (0, r.default)(t); !(A = (l = c.next())
                .done); A = !0) {
                i(l.value, n)
              }
            } catch (e) {
              o = !0, u = e
            } finally {
              try {
                !A && c.return && c.return()
              } finally {
                if (o) throw u
              }
            }
            this.notify(e)
          }
        }, {
          key: "notify",
          value: function (e) {
            e.emit("event:appState:change", "styleUpdate", this.getDefStyles())
          }
        }, {
          key: "getDefStyles",
          value: function () {
            return {
              pen: this.penDef,
              link: this.linkDef,
              shape: this.shapeDef,
              text: this.textDef
            }
          }
        }, {
          key: "updateFontFamily",
          value: function (e, t) {
            this.textDef.fontFamily = t, this.linkDef.text.fontFamily = t, this
              .shapeDef.text.fontFamily = t, this.notify(e)
          }
        }]), e
      }());
    t.default = u
  }, function (e, t) {
    e.exports = function (e) {
      return "object" == typeof e ? null !== e : "function" == typeof e
    }
  }, function (e, t, n) {
    e.exports = !n(38)((function () {
      return 7 != Object.defineProperty({}, "a", {
        get: function () {
          return 7
        }
      }).a
    }))
  }, function (e, t, n) {
    e.exports = n(273)
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r = i(n(2)),
      a = i(n(295));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.default = function e(t, n, i) {
      null === t && (t = Function.prototype);
      var A = (0, a.default)(t, n);
      if (void 0 === A) {
        var o = (0, r.default)(t);
        return null === o ? void 0 : e(o, n, i)
      }
      if ("value" in A) return A.value;
      var s = A.get;
      return void 0 !== s ? s.call(i) : void 0
    }
  }, function (e, t, n) {
    var r = n(30),
      a = n(109),
      i = n(77),
      A = Object.defineProperty;
    t.f = n(24) ? Object.defineProperty : function (e, t, n) {
      if (r(e), t = i(t, !0), r(n), a) try {
        return A(e, t, n)
      } catch (e) {}
      if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
      return "value" in n && (e[t] = n.value), e
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.exLinkTypes = ["link", "audio"];
    var r = t.ILinkType = void 0;
    ! function (e) {
      e[e.Line = 0] = "Line", e[e.Curve = 1] = "Curve", e[e.Segment = 2] = "Segment"
    }(r || (t.ILinkType = r = {}));
    var a = t.IDashType = void 0;
    ! function (e) {
      e[e.Solid = 0] = "Solid", e[e.Dashed = 1] = "Dashed"
    }(a || (t.IDashType = a = {}));
    var i = t.IConnPointType = void 0;
    ! function (e) {
      e[e.Split = 0] = "Split", e[e.Anchor = 1] = "Anchor"
    }(i || (t.IConnPointType = i = {}));
    var A = t.IArrowType = void 0;
    ! function (e) {
      e[e.None = 0] = "None", e[e.Arrow = 1] = "Arrow"
    }(A || (t.IArrowType = A = {}));
    var o = t.DIRECTION = void 0;
    ! function (e) {
      e[e.RIGHT = 0] = "RIGHT", e[e.DOWN = 1] = "DOWN", e[e.UP = 2] = "UP", e[e.LEFT =
        3] = "LEFT"
    }(o || (t.DIRECTION = o = {}));
    var s = t.IEndPointType = void 0;
    ! function (e) {
      e[e.COORD = 0] = "COORD", e[e.ATTACH = 1] = "ATTACH", e[e.FLEX = 2] = "FLEX"
    }(s || (t.IEndPointType = s = {}))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.rotateMat = function () {
      var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [
          [1, 0, 0],
          [0, 1, 0],
          [0, 0, 1]
        ],
        t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
          angle: 0,
          x: 0,
          y: 0
        },
        n = t.angle,
        i = t.x,
        A = t.y;
      if (0 === n) return e;
      var o = r(e, -i, -A);
      return o = a([
        [Math.cos(n), -Math.sin(n), 0],
        [Math.sin(n), Math.cos(n), 0],
        [0, 0, 1]
      ], o), o = r(o, i, A)
    };
    var r = t.panMat = function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [
            [1, 0, 0],
            [0, 1, 0],
            [0, 0, 1]
          ],
          t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
        return a([
          [1, 0, t],
          [0, 1, n],
          [0, 0, 1]
        ], e)
      },
      a = (t.scaleMat = function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [
            [1, 0, 0],
            [0, 1, 0],
            [0, 0, 1]
          ],
          t = arguments[1],
          n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
            coordinate: 0,
            factor: 1
          },
          i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {
            coordinate: 0,
            factor: 1
          },
          A = e;
        return A = r(A, -n.coordinate, -i.coordinate), t && (A = a([
          [Math.cos(t), Math.sin(t), 0],
          [-Math.sin(t), Math.cos(t), 0],
          [0, 0, 1]
        ], A)), A = a([
          [n.factor, 0, 0],
          [0, i.factor, 0],
          [0, 0, 1]
        ], A), t && (A = a([
          [Math.cos(t), -Math.sin(t), 0],
          [Math.sin(t), Math.cos(t), 0],
          [0, 0, 1]
        ], A)), A = r(A, n.coordinate, i.coordinate)
      }, t.matProd = function (e, t) {
        return [
          [e[0][0] * t[0][0] + e[0][1] * t[1][0] + e[0][2] * t[2][0], e[0][0] * t[0][
              1] + e[0][1] * t[1][1] + e[0][2] * t[2][1], e[0][0] * t[0][2] + e[0][
            1] * t[1][2] + e[0][2] * t[2][2]
          ],
          [e[1][0] * t[0][0] + e[1][1] * t[1][0] + e[1][2] * t[2][0], e[1][0] * t[0][
              1] + e[1][1] * t[1][1] + e[1][2] * t[2][1], e[1][0] * t[0][2] + e[1][
            1] * t[1][2] + e[1][2] * t[2][2]
          ],
          [e[2][0] * t[0][0] + e[2][1] * t[1][0] + e[2][2] * t[2][0], e[2][0] * t[0][
              1] + e[2][1] * t[1][1] + e[2][2] * t[2][1], e[2][0] * t[0][2] + e[2][
            1] * t[1][2] + e[2][2] * t[2][2]
          ]
        ]
      });
    t.getTransPoint = function (e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [
        [1, 0, 0],
        [0, 1, 0],
        [0, 0, 1]
      ];
      return [t[0][0] * e[0] + t[0][1] * e[1] + t[0][2], t[1][0] * e[0] + t[1][1] * e[
        1] + t[1][2]
      ]
    }
  }, function (e, t, n) {
    var r = n(23);
    e.exports = function (e) {
      if (!r(e)) throw TypeError(e + " is not an object!");
      return e
    }
  }, function (module, exports, __webpack_require__) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
        value: !0
      }), exports.removeToastIntercept = exports.interceptShowToast = exports.hideToast =
      exports.showToast = void 0;
    var _typeof2 = __webpack_require__(33),
      _typeof3 = _interopRequireDefault(_typeof2),
      _assign = __webpack_require__(5),
      _assign2 = _interopRequireDefault(_assign),
      _stringify = __webpack_require__(21),
      _stringify2 = _interopRequireDefault(_stringify),
      _classCallCheck2 = __webpack_require__(0),
      _classCallCheck3 = _interopRequireDefault(_classCallCheck2),
      _toastCtrl = __webpack_require__(218),
      _toastCtrl2 = _interopRequireDefault(_toastCtrl);

    function _interopRequireDefault(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var ToastClass = function ToastClass() {
      var _this = this;
      (0, _classCallCheck3.default)(this, ToastClass), this.show = function (e) {
        var t = e.msg,
          n = e.time,
          r = void 0 === n ? 2 : n,
          a = e.type,
          i = void 0 === a ? "info" : a,
          A = e.top,
          o = void 0 === A ? 30 : A,
          s = {
            msgType: e.msgType,
            args: e.args,
            msg: t.constructor === String ? t : (0, _stringify2.default)(t),
            time: r,
            type: i,
            top: o
          };
        if ("function" == typeof _this.interceptShowFn) {
          var u = _this.interceptShowFn((0, _assign2.default)({}, s));
          if (!u) return;
          "object" === (void 0 === u ? "undefined" : (0, _typeof3.default)(u)) && (s =
            u)
        }
        s && _toastCtrl2.default.show(s)
      }, this.hide = function () {
        if ("function" == typeof _this.interceptHideFn && !_this.interceptHideFn())
          return;
        _toastCtrl2.default.hide()
      }, this.interceptShow = function (fn) {
        if ("string" == typeof fn) try {
          fn = eval(fn)
        } catch (e) {
          return console.error(e), void console.error(
            "interceptShowToast如果参数为string，该string需要能够被eval解析: " + fn)
        }
        "function" != typeof fn ? console.error("interceptShowToast的参数必须为函数") : _this
          .interceptShowFn = fn
      }, this.interceptHide = function (e) {
        "function" != typeof e ? console.error("Toast.interceptHide的参数必须为函数") : _this
          .interceptHideFn = e
      }, this.removeIntercept = function () {
        _this.interceptShowFn = void 0, _this.interceptHideFn = void 0
      }
    };
    window.__newb__ = window.__newb__ || {}, window.__newb__.Toast || (window.__newb__
      .Toast = new ToastClass);
    var showToast = exports.showToast = window.__newb__.Toast.show,
      hideToast = exports.hideToast = window.__newb__.Toast.hide,
      interceptShowToast = exports.interceptShowToast = window.__newb__.Toast
      .interceptShow,
      removeToastIntercept = exports.removeToastIntercept = window.__newb__.Toast
      .removeIntercept
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.default = {
      SYNCHRONIZING: "SYNCHRONIZING",
      ON_CONNECTED: "ON_CONNECTED",
      ON_WILL_RECONNECT: "ON_WILL_RECONNECT",
      ON_DISCONNECTED: "ON_DISCONNECTED",
      NETWORK_INSTABLE: "NETWORK_INSTABLE",
      SYNC_FAIL: "SYNC_FAIL",
      DELAY_DISPATCH_WHILE_NETWORK_INSTABLE: "DELAY_DISPATCH_WHILE_NETWORK_INSTABLE",
      START_BROADCAST: "START_BROADCAST",
      STOP_BROADCAST: "STOP_BROADCAST",
      SWITCH_TO_FOLLOWER: "SWITCH_TO_FOLLOWER",
      SWITCH_TO_FREE_OBSERVER: "SWITCH_TO_FREE_OBSERVER",
      NOT_ALLOWED_REPLACE_ACTIVE_BROADCASTER: "NOT_ALLOWED_REPLACE_ACTIVE_BROADCASTER",
      NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER: "NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER",
      RECEIVE_STOP_BROADCAST: "RECEIVE_STOP_BROADCAST",
      RECEIVE_START_BROADCAST: "RECEIVE_START_BROADCAST",
      CURRENT_USER_IS_BROADCASTER: "CURRENT_USER_IS_BROADCASTER",
      CURRENT_USER_IS_FOLLOWER: "CURRENT_USER_IS_FOLLOWER",
      CURRENT_USER_IS_FREE_OBSERVER: "CURRENT_USER_IS_FREE_OBSERVER",
      FILE_IS_EMPTY: "FILE_IS_EMPTY",
      FILE_SIZE_EXCEED_LIMIT: "FILE_SIZE_EXCEED_LIMIT",
      FILE_ACCEPTED_TYPE_LIMIT: "FILE_ACCEPTED_TYPE_LIMIT",
      FILE_UPLOAD_FAIL: "FILE_UPLOAD_FAIL",
      FILE_IS_UPLOADING: "FILE_IS_UPLOADING",
      FILE_TRANSCODE_SUCCEED: "FILE_TRANSCODE_SUCCEED",
      FILE_TRANSCODE_FAIL: "FILE_TRANSCODE_FAIL",
      VIDEO_UPLOAD_FAIL: "VIDEO_UPLOAD_FAIL",
      AUDIO_UPLOAD_FAIL: "AUDIO_UPLOAD_FAIL",
      VIDEO_TYPE_NOT_ALLOWED: "VIDEO_TYPE_NOT_ALLOWED",
      AUDIO_TYPE_NOT_ALLOWED: "AUDIO_TYPE_NOT_ALLOWED",
      PIC_UPLOAD_FAIL: "PIC_UPLOAD_FAIL",
      LOG_FILE_UPLOAD_THROTTLE: "LOG_FILE_UPLOAD_THROTTLE",
      LOG_FILE_IS_UPLOADING: "LOG_FILE_IS_UPLOADING",
      LOG_FILE_UPLOAD_SUCCEED: "LOG_FILE_UPLOAD_SUCCEED",
      LOG_FILE_UPLOAD_FAIL: "LOG_FILE_UPLOAD_FAIL",
      ONE_MEDIA_LIMIT: "ONE_MEDIA_LIMIT",
      IOS_NOT_SUPPORT_TEXT: "IOS_NOT_SUPPORT_TEXT",
      PASTE_IMG_UPLOAD_ERROR: "PASTE_IMG_UPLOAD_ERROR",
      PASTE_IMG_UPLOAD_WAIT: "PASTE_IMG_UPLOAD_WAIT",
      TXT_EXCEED_MAX: "TXT_EXCEED_MAX",
      EXPORT_IMG_ERROR: "EXPORT_IMG_ERROR"
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r = A(n(169)),
      a = A(n(131)),
      i = "function" == typeof a.default && "symbol" == typeof r.default ? function (e) {
        return typeof e
      } : function (e) {
        return e && "function" == typeof a.default && e.constructor === a.default && e !==
          a.default.prototype ? "symbol" : typeof e
      };

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.default = "function" == typeof a.default && "symbol" === i(r.default) ? function (
    e) {
      return void 0 === e ? "undefined" : i(e)
    } : function (e) {
      return e && "function" == typeof a.default && e.constructor === a.default && e !==
        a.default.prototype ? "symbol" : void 0 === e ? "undefined" : i(e)
    }
  }, function (e, t, n) {
    var r = n(54);
    e.exports = function (e, t, n) {
      if (r(e), void 0 === t) return e;
      switch (n) {
        case 1:
          return function (n) {
            return e.call(t, n)
          };
        case 2:
          return function (n, r) {
            return e.call(t, n, r)
          };
        case 3:
          return function (n, r, a) {
            return e.call(t, n, r, a)
          }
      }
      return function () {
        return e.apply(t, arguments)
      }
    }
  }, , function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r = i(n(275)),
      a = i(n(7));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.default = function (e, t) {
      if (Array.isArray(e)) return e;
      if ((0, r.default)(Object(e))) return function (e, t) {
        var n = [],
          r = !0,
          i = !1,
          A = void 0;
        try {
          for (var o, s = (0, a.default)(e); !(r = (o = s.next()).done) && (n.push(o
              .value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, A = e
        } finally {
          try {
            !r && s.return && s.return()
          } finally {
            if (i) throw A
          }
        }
        return n
      }(e, t);
      throw new TypeError("Invalid attempt to destructure non-iterable instance")
    }
  }, function (e, t, n) {
    var r = n(27),
      a = n(55);
    e.exports = n(24) ? function (e, t, n) {
      return r.f(e, t, a(1, n))
    } : function (e, t, n) {
      return e[t] = n, e
    }
  }, function (e, t) {
    e.exports = function (e) {
      try {
        return !!e()
      } catch (e) {
        return !0
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.getShapeDataFromExist = t.mergeIntervals = t.getDistDivideByDir = t
      .isConnAllHV = t.getConnH = t.getDirAftRotate = t.getLinkNewTextPer = t
      .bezierMinMax = t.isCurveSegIntersect = t.getLinkBoundary = t.getCurveLinkBoundary =
      t.getNewShape = t.deepCopySnapBeforeMove = t.getPosAftMove = t.findEndPoint = t
      .findAttachPer = t.projOnSeg = t.pDist = t.getDirInShape = t.getPosInShape = t
      .getInitDir = t.selectShapeForLink = t.moveNonSegConnPoint = t.getControlPoints = t
      .getEndPointInfo = t.isSegInRect = t.isPInsideRect = t.getExtP = t.isPExtentFrom = t
      .pointAtExtendDir = t.getLinkEndPos = void 0;
    var r = v(n(16)),
      a = v(n(33)),
      i = v(n(36)),
      A = v(n(7)),
      o = v(n(5)),
      s = v(n(42)),
      u = n(15),
      l = n(29),
      c = n(136),
      d = v(n(22)),
      h = n(28),
      p = v(n(139)),
      f = n(66),
      g = n(19),
      y = n(72);

    function v(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var m = new s.default,
      w = (t.getLinkEndPos = function (e, t, n, r) {
        if (t.type === h.IEndPointType.COORD) return {
          x: t.x,
          y: t.y,
          dir: t.dir
        };
        var a = n.localOps[t.id] || n.drawOpsOfPage[t.id];
        return !a && r && (a = null == r ? void 0 : r.drawOpQueue[t.id]), a ? (0, o
          .default)((0, o.default)({}, x(e, a.data, t.per)), {
          dir: t.dir
        }) : (m.has(t.id) || (e.logger.error("link attached element id: " + t.id +
          " not found"), m.add(t.id), e.dataReportUtil("v3_run_error", {
          error: {
            code: y.DataReportRunError.Link_Id_Miss,
            message: "link attached element id: " + t.id + " not found"
          }
        })), null)
      }, t.pointAtExtendDir = function (e, t, n, r) {
        var a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
        switch (n) {
          case h.DIRECTION.UP:
            return t.y <= e.y && (!a || Math.abs(e.x - t.x) < f.POINT_EXTEND_THRES / r);
          case h.DIRECTION.DOWN:
            return t.y >= e.y && (!a || Math.abs(e.x - t.x) < f.POINT_EXTEND_THRES / r);
          case h.DIRECTION.RIGHT:
            return t.x >= e.x && (!a || Math.abs(e.y - t.y) < f.POINT_EXTEND_THRES / r);
          case h.DIRECTION.LEFT:
            return t.x <= e.x && (!a || Math.abs(e.y - t.y) < f.POINT_EXTEND_THRES / r)
        }
        return !0
      }, t.isPExtentFrom = function (e, t) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
        return e.dir === h.DIRECTION.RIGHT ? t.x >= e.x - n : e.dir === h.DIRECTION
          .LEFT ? t.x <= e.x + n : e.dir === h.DIRECTION.UP ? t.y <= e.y + n : e.dir ===
          h.DIRECTION.DOWN && t.y >= e.y - n
      }, t.getExtP = function (e, t, n) {
        if (e.dir === h.DIRECTION.RIGHT) return {
          x: Math.max(e.x + t, n.sx + n.w),
          y: e.y,
          dir: e.dir
        };
        if (e.dir === h.DIRECTION.LEFT) return {
          x: Math.min(e.x - t, n.sx),
          y: e.y,
          dir: e.dir
        };
        if (e.dir === h.DIRECTION.UP) return {
          x: e.x,
          y: Math.min(e.y - t, n.sy),
          dir: e.dir
        };
        if (e.dir === h.DIRECTION.DOWN) return {
          x: e.x,
          y: Math.max(e.y + t, n.sy + n.h),
          dir: e.dir
        };
        throw new Error("未知的方向: " + e.dir)
      }, t.isPInsideRect = function (e, t) {
        return !B(e, t)
      }, t.isSegInRect = function (e, t, n) {
        var r = B(e, n),
          a = B(t, n);
        return !r || !a || !(r & a) && (M(e, t, [n.sx, n.sy], [n.sx + n.w, n.sy]) || M(
          e, t, [n.sx + n.w, n.sy], [n.sx + n.w, n.sy + n.h]) || M(e, t, [n.sx, n
          .sy + n.h
        ], [n.sx + n.w, n.sy + n.h]) || M(e, t, [n.sx, n.sy], [n.sx, n.sy + n.h]))
      }),
      B = function (e, t) {
        var n = 0;
        return e[0] < t.sx ? n |= 1 : e[0] > t.sx + t.w && (n |= 2), e[1] > t.sy + t.h ?
          n |= 4 : e[1] < t.sy && (n |= 8), n
      },
      M = function (e, t, n, r) {
        var a = I(e, t, n),
          i = I(e, t, r),
          A = I(n, r, e),
          o = I(n, r, t);
        return a !== i && A !== o || (!(0 !== a || !C(e, n, t)) || (!(0 !== i || !C(e, n,
          r)) || (!(0 !== A || !C(n, e, r)) || !(0 !== o || !C(n, e, r)))))
      },
      C = function (e, t, n) {
        return t[0] <= Math.max(e[0], n[0]) && t[0] >= Math.min(e[0], n[0]) && t[1] <=
          Math.max(e[1], n[1]) && t[1] >= Math.min(e[1], n[1])
      },
      I = function (e, t, n) {
        var r = (t[1] - e[1]) * (n[0] - t[0]) - (t[0] - e[0]) * (n[1] - t[1]);
        return 0 === r ? 0 : r > 0 ? 1 : 2
      },
      x = t.getEndPointInfo = function (e, t, n) {
        n -= Math.floor(n);
        var r = k(e, t.shape, n, (0, u.getTransformedSize)(t)),
          a = t.boundary,
          i = [a.sx + a.w * r[0], a.sy + a.h * r[1]],
          A = (0, l.getTransPoint)(i, t.mat);
        return {
          x: A[0],
          y: A[1]
        }
      },
      b = (t.getControlPoints = function (e, t, n, r, a, i, A) {
        var o = Math.sqrt(Math.pow(n - e, 2) + Math.pow(r - t, 2)),
          s = A * o / (o + Math.sqrt(Math.pow(a - n, 2) + Math.pow(i - r, 2))),
          u = A - s,
          l = n + s * (e - a),
          c = r + s * (t - i),
          d = n - u * (e - a),
          h = r - u * (t - i);
        return isNaN(l) || isNaN(c) || isNaN(d) || isNaN(h) ? [
          [e, t],
          [a, i]
        ] : [
          [l, c],
          [d, h]
        ]
      }, t.moveNonSegConnPoint = function (e) {
        var t = e.startPos,
          n = e.endPos,
          r = e.connPs,
          a = e.index,
          i = e.x,
          A = e.y,
          s = ((r = r.map((function (e) {
            return (0, o.default)({}, e)
          })))[a], r.slice());
        if (r[a].type === h.IConnPointType.Split) {
          s.splice(a, 1);
          var u = r[a - 1] || t,
            l = r[a + 1] || n;
          s.splice(a, 0, {
            type: h.IConnPointType.Split,
            x: i / 2 + u.x / 2,
            y: A / 2 + u.y / 2
          }, {
            type: h.IConnPointType.Anchor,
            x: i,
            y: A
          }, {
            type: h.IConnPointType.Split,
            x: i / 2 + l.x / 2,
            y: A / 2 + l.y / 2
          })
        } else {
          var c = r[a - 2] || t,
            d = r[a + 2] || n;
          s[a - 1] = (0, o.default)((0, o.default)({}, s[a - 1]), {
            x: i / 2 + c.x / 2,
            y: A / 2 + c.y / 2
          }), s[a] = (0, o.default)((0, o.default)({}, s[a]), {
            x: i,
            y: A
          }), s[a + 1] = (0, o.default)((0, o.default)({}, s[a + 1]), {
            x: i / 2 + d.x / 2,
            y: A / 2 + d.y / 2
          })
        }
        return {
          connPs: s,
          start: t,
          end: n
        }
      }, t.selectShapeForLink = function (e) {
        var t = e.linkData,
          n = e.linkId,
          r = e.app,
          a = e.op,
          i = e.where,
          A = "start" === i ? t.start : t.end;
        if (A.type === h.IEndPointType.COORD) {
          var o = r.camera.convertWorldPointInContainer(A.x, A.y);
          r.shapeSelector.showPopup({
            x: o[0],
            y: o[1],
            onSelect: function (e) {
              var A = "start" === i ? t.start : t.end,
                o = b(A.dir),
                s = Q(r, {
                  shapeType: e,
                  link: t,
                  where: i,
                  drawOpQueue: a.drawOpsOfPage,
                  scale: r.scale,
                  per: o
                }),
                u = a.dispatch(s);
              a.dispatch(a.opsManager.modifyOp.getSnapshot([n], [{
                k: i,
                v: {
                  type: h.IEndPointType.ATTACH,
                  id: u,
                  per: o,
                  dir: A.dir,
                  aType: A.aType,
                  reset: !0
                }
              }], !1));
              var l = (0, g.extendCameraToSnap)({
                  app: r,
                  boundary: s.boundary
                }),
                c = l.needAdjust,
                d = l.camera;
              c && r.setCameraBound(d, !0), "text" === e && a.opsManager.textOp
                .enterEdit({
                  snap: {
                    opId: u,
                    data: s
                  }
                })
            }
          })
        }
      }, function (e) {
        switch (e) {
          case h.DIRECTION.LEFT:
            return 7 / 8;
          case h.DIRECTION.RIGHT:
            return 3 / 8;
          case h.DIRECTION.UP:
            return 1 / 8;
          default:
            return 5 / 8
        }
      }),
      k = (t.getInitDir = function (e, t) {
        var n = t.x - e.x,
          r = t.y - e.y;
        if (0 === r) return n >= 0 ? h.DIRECTION.LEFT : h.DIRECTION.RIGHT;
        var a = n / r;
        return Math.abs(a) > 1 ? n >= 0 ? h.DIRECTION.LEFT : h.DIRECTION.RIGHT : r >=
          0 ? h.DIRECTION.UP : h.DIRECTION.DOWN
      }, t.getPosInShape = function (e, t, n, r) {
        var a = e.ShapeDesc[t],
          i = a ? a.path : e.ShapeDesc.rect.path;
        i = "function" == typeof i ? i(r.w, r.h) : i, n -= Math.floor(n);
        var o = !0,
          s = !1,
          u = void 0;
        try {
          for (var l, c = (0, A.default)(i); !(o = (l = c.next()).done); o = !0) {
            var d = l.value,
              h = n <= d.per[1] && n >= d.per[0];
            if (d.per[0] < 0 && (h = h || n >= d.per[0] + 1), h) {
              var p = void 0;
              if (p = n <= d.per[1] ? (n - d.per[0]) / (d.per[1] - d.per[0]) : (n - 1 -
                  d.per[0]) / (d.per[1] - d.per[0]), "l" === d.t) {
                var f = d.pos;
                return [f[0][0] * (1 - p) + f[1][0] * p, f[0][1] * (1 - p) + f[1][1] *
                  p]
              }
              if ("b" === d.t) {
                var g = d.pos;
                if (4 === g.length) return [g[0][0] * (1 - p) * (1 - p) * (1 - p) + 3 *
                  g[1][0] * (1 - p) * (1 - p) * p + 3 * g[2][0] * (1 - p) * p * p +
                  g[3][0] * p * p * p, g[0][1] * (1 - p) * (1 - p) * (1 - p) + 3 *
                  g[1][1] * (1 - p) * (1 - p) * p + 3 * g[2][1] * (1 - p) * p * p +
                  g[3][1] * p * p * p
                ];
                if (3 === g.length) return [g[0][0] * (1 - p) * (1 - p) + 2 * g[1][0] *
                  (1 - p) * p + g[2][0] * p * p, g[0][1] * (1 - p) * (1 - p) + 2 *
                  g[1][1] * (1 - p) * p + g[2][1] * p * p
                ]
              }
            }
          }
        } catch (e) {
          s = !0, u = e
        } finally {
          try {
            !o && c.return && c.return()
          } finally {
            if (s) throw u
          }
        }
        return [0, 0]
      }),
      T = t.getDirInShape = function (e, t, n) {
        var r = e.ShapeDesc[t],
          a = r ? r.dir : e.ShapeDesc.rect.dir;
        n -= Math.floor(n);
        var i = !0,
          o = !1,
          s = void 0;
        try {
          for (var u, l = (0, A.default)(a); !(i = (u = l.next()).done); i = !0) {
            var c = u.value,
              d = n <= c.per[1] && n >= c.per[0];
            if (c.per[0] < 0 && (d = d || n >= c.per[0] + 1), d) return c.angle
          }
        } catch (e) {
          o = !0, s = e
        } finally {
          try {
            !i && l.return && l.return()
          } finally {
            if (o) throw s
          }
        }
        return h.DIRECTION.RIGHT
      },
      E = t.pDist = function (e, t, n) {
        var r, a, A = (0, i.default)(e, 2),
          o = A[0],
          s = A[1],
          u = (0, i.default)(t, 2),
          l = u[0],
          c = u[1],
          d = (0, i.default)(n, 2),
          h = d[0],
          p = d[1],
          f = h - l,
          g = p - c,
          y = f * f + g * g,
          v = -1;
        0 != y && (v = ((o - l) * f + (s - c) * g) / y), v < 0 ? (r = l, a = c) : v > 1 ?
          (r = h, a = p) : (r = l + v * f, a = c + v * g);
        var m = o - r,
          w = s - a;
        return Math.sqrt(m * m + w * w)
      },
      D = t.projOnSeg = function (e, t, n, r) {
        var a = [n[0] - t[0], n[1] - t[1]],
          i = [e[0] - t[0], e[1] - t[1]],
          A = (a[0] * i[0] + a[1] * i[1]) / (a[0] * a[0] + a[1] * a[1]);
        return r ? Math.min(Math.max(A, 0), 1) : A
      },
      N = t.findAttachPer = function (e, t) {
        var n = t.scale,
          r = t.data,
          a = t.mx,
          i = t.my,
          o = e.ShapeDesc[r.shape] || e.ShapeDesc.rect,
          s = (0, u.getTransformedSize)(r),
          c = "function" == typeof o.path ? o.path(s.w, s.h) : o.path,
          d = r.boundary,
          h = f.ATTCH_THRES / n,
          p = -1,
          g = !0,
          y = !1,
          v = void 0;
        try {
          for (var m, w = (0, A.default)(c); !(g = (m = w.next()).done); g = !0) {
            var B = m.value,
              M = void 0,
              C = void 0,
              I = void 0;
            if ("l" === B.t) {
              if (C = (0, l.getTransPoint)([d.sx + d.w * B.pos[0][0], d.sy + d.h * B.pos[
                  0][1]], r.mat), I = (0, l.getTransPoint)([d.sx + d.w * B.pos[1][0], d
                  .sy + d.h * B.pos[1][1]
                ], r.mat), (M = E([a, i], C, I)) < h) {
                h = M;
                var x = D([a, i], C, I, !0);
                (p = B.per[0] + x * (B.per[1] - B.per[0])) < 1 && (p += 1)
              }
            } else {
              var b = B.pos[B.pos.length - 1];
              if (C = (0, l.getTransPoint)([d.sx + d.w * B.pos[0][0], d.sy + d.h * B.pos[
                  0][1]], r.mat), I = (0, l.getTransPoint)([d.sx + d.w * b[0], d.sy + d
                  .h * b[1]
                ], r.mat), (M = E([a, i], C, I)) < 10 * f.ATTCH_THRES / n)
                for (var k = B.pos[0], T = 1; T <= 10; T++) {
                  var N = T / 10,
                    P = [B.pos[0][0] * (1 - N) * (1 - N) * (1 - N) + 3 * B.pos[1][0] * (
                        1 - N) * (1 - N) * N + 3 * B.pos[2][0] * (1 - N) * N * N + b[0] *
                      N * N * N, B.pos[0][1] * (1 - N) * (1 - N) * (1 - N) + 3 * B.pos[1][
                        1
                      ] * (1 - N) * (1 - N) * N + 3 * B.pos[2][1] * (1 - N) * N * N + b[
                      1] * N * N * N
                    ];
                  if (C = (0, l.getTransPoint)([d.sx + d.w * k[0], d.sy + d.h * k[1]], r
                      .mat), I = (0, l.getTransPoint)([d.sx + d.w * P[0], d.sy + d.h * P[
                      1]], r.mat), M = E([a, i], C, I), k = P, M < h) {
                    h = M;
                    var Q = D([a, i], C, I, !0);
                    (p = B.per[0] + (B.per[1] - B.per[0]) * ((T - 1) / 10 + Q / 10)) < 0
                      && (p += 1)
                  }
                }
            }
          }
        } catch (e) {
          y = !0, v = e
        } finally {
          try {
            !g && w.return && w.return()
          } finally {
            if (y) throw v
          }
        }
        return p > 0 ? p : void 0
      },
      P = (t.findEndPoint = function (e, t) {
        var n = t.scale,
          r = t.drawOps,
          a = t.mx,
          i = t.my;
        for (var A in r) {
          var o = r[A],
            s = o.data;
          if (-1 === h.exLinkTypes.indexOf(o.data.type)) {
            var u = N(e, {
              scale: n,
              data: o.data,
              mx: a,
              my: i
            });
            if (void 0 !== u) {
              u = P(u);
              var l = T(e, o.data.shape, u);
              return {
                opId: A,
                per: u,
                dir: S(l, s.rAngle, s.xFactor, s.yFactor)
              }
            }
          }
        }
      }, function (e) {
        var t = (8 * e - 1) / 2;
        return Math.abs(t - Math.round(t)) < .025 ? (2 * Math.round(t) + 1) / 8 : e
      }),
      Q = (t.getPosAftMove = function (e, t) {
        if ("move" === t.type) return [e[0] + t.ep[0] - t.sp[0], e[1] + t.ep[1] - t.sp[
          1]];
        if ("scale" === t.type) {
          var n = t.scaleInfo,
            r = (0, l.scaleMat)(void 0, 0, n.scaleX, n.scaleY);
          return (0, l.getTransPoint)(e, r)
        }
        var a = t.rotate,
          i = (0, l.rotateMat)(void 0, a);
        return (0, l.getTransPoint)(e, i)
      }, t.deepCopySnapBeforeMove = function (e, t) {
        var n = {},
          r = !0,
          a = !1,
          i = void 0;
        try {
          for (var o, s = (0, A.default)(e); !(r = (o = s.next()).done); r = !0) {
            var u = o.value;
            n[u] = (0, p.default)(t[u])
          }
        } catch (e) {
          a = !0, i = e
        } finally {
          try {
            !r && s.return && s.return()
          } finally {
            if (a) throw i
          }
        }
        var l = [];
        for (var c in t)
          if ("link" === t[c].data.type) {
            var d = t[c].data.start.id,
              h = t[c].data.end.id; - 1 === e.indexOf(c) && -1 === e.indexOf(d) && -
              1 === e.indexOf(h) || l.push(c)
          } var f = !0,
          g = !1,
          y = void 0;
        try {
          for (var v, m = (0, A.default)(l); !(f = (v = m.next()).done); f = !0) {
            var w = v.value,
              B = t[w].data,
              M = B.start.id,
              C = B.end.id;
            M && !t[M] || C && !t[C] ? delete n[w] : (n.hasOwnProperty(w) || (n[w] = (0,
              p.default)(t[w])), M && !n.hasOwnProperty(M) && (n[M] = (0, p.default)
              (t[M])), C && !n.hasOwnProperty(C) && (n[C] = (0, p.default)(t[C])))
          }
        } catch (e) {
          g = !0, y = e
        } finally {
          try {
            !f && m.return && m.return()
          } finally {
            if (g) throw y
          }
        }
        return n
      }, t.getNewShape = function (e, t) {
        var n = "start" === t.where ? t.link.start : t.link.end,
          r = "start" === t.where ? t.link.end : t.link.start,
          i = r.id ? t.drawOpQueue[r.id] : void 0,
          A = i && "text" === i.data.type ? i.data : i && "object" === (0, a.default)(i
            .data.text) && null !== (null == i ? void 0 : i.data.text) ? i.data.text :
          void 0,
          o = void 0,
          s = void 0;
        if (i && "text" !== t.shapeType) {
          var l = (0, u.getTransformedSize)(i.data);
          o = l.w, s = l.h
        } else if ("text" === t.shapeType) {
          var h = e.opsManager.textOp.getTextSize({
            text: c.DefaultText,
            fontSize: A ? A.fontSize : d.default.textDef.fontSize,
            fontFamily: A ? A.fontFamily : d.default.textDef.fontFamily
          });
          o = h.w, s = h.h
        } else o = 100, s = 100;
        var p = k(e, t.shapeType, t.per, {
            w: o,
            h: s
          }),
          f = n.x - o * p[0],
          g = n.y - s * p[1];
        return U({
          sx: f,
          sy: g,
          w: o,
          h: s,
          shapeType: t.shapeType,
          another: null == i ? void 0 : i.data
        })
      }),
      O = (t.getCurveLinkBoundary = function (e) {
        var t = e.points,
          n = e.textBoundaries,
          a = [].concat((0, r.default)(e.startArrow || []), (0, r.default)(e.endArrow ||
            [])),
          i = Math.min(t[0][0], t[1][0]),
          o = Math.min(t[0][1], t[1][1]),
          s = Math.max(t[0][0], t[1][0]),
          u = Math.max(t[0][1], t[1][1]),
          l = !0,
          c = !1,
          d = void 0;
        try {
          for (var h, p = (0, A.default)(a); !(l = (h = p.next()).done); l = !0) {
            var f = h.value;
            i = Math.min(i, f[0]), s = Math.max(s, f[0]), o = Math.min(o, f[1]), u =
              Math.max(u, f[1])
          }
        } catch (e) {
          c = !0, d = e
        } finally {
          try {
            !l && p.return && p.return()
          } finally {
            if (c) throw d
          }
        }
        if ((t.length - 1) % 3 == 0)
          for (var g = 0; g < t.length - 3; g += 3) {
            var y = _(t[g], t[g + 1], t[g + 2], t[g + 3]);
            i = Math.min(i, y.min.x), o = Math.min(o, y.min.y), s = Math.max(s, y.max
              .x), u = Math.max(u, y.max.y)
          }
        var v = !0,
          m = !1,
          w = void 0;
        try {
          for (var B, M = (0, A.default)(n); !(v = (B = M.next()).done); v = !0) {
            var C = B.value;
            i = Math.min(i, C.sx), s = Math.max(s, C.sx + C.w), o = Math.min(o, C.sy),
              u = Math.max(u, C.sy + C.h)
          }
        } catch (e) {
          m = !0, w = e
        } finally {
          try {
            !v && M.return && M.return()
          } finally {
            if (m) throw w
          }
        }
        return {
          sx: i,
          sy: o,
          w: Math.max(s - i, 1),
          h: Math.max(u - o, 1)
        }
      }, t.getLinkBoundary = function (e) {
        var t = e.start,
          n = e.end,
          a = e.connPs,
          i = e.textBoundaries,
          o = [].concat((0, r.default)(e.startArrow || []), (0, r.default)(e.endArrow ||
            [])),
          s = t.x,
          u = t.y,
          l = t.x,
          c = t.y,
          d = !0,
          h = !1,
          p = void 0;
        try {
          for (var f, g = (0, A.default)(a); !(d = (f = g.next()).done); d = !0) {
            var y = f.value;
            s = Math.min(s, y.x), l = Math.max(l, y.x), u = Math.min(u, y.y), c = Math
              .max(c, y.y)
          }
        } catch (e) {
          h = !0, p = e
        } finally {
          try {
            !d && g.return && g.return()
          } finally {
            if (h) throw p
          }
        }
        var v = !0,
          m = !1,
          w = void 0;
        try {
          for (var B, M = (0, A.default)(o); !(v = (B = M.next()).done); v = !0) {
            var C = B.value;
            s = Math.min(s, C[0]), l = Math.max(l, C[0]), u = Math.min(u, C[1]), c =
              Math.max(c, C[1])
          }
        } catch (e) {
          m = !0, w = e
        } finally {
          try {
            !v && M.return && M.return()
          } finally {
            if (m) throw w
          }
        }
        var I = !0,
          x = !1,
          b = void 0;
        try {
          for (var k, T = (0, A.default)(i); !(I = (k = T.next()).done); I = !0) {
            var E = k.value;
            s = Math.min(s, E.sx), l = Math.max(l, E.sx + E.w), u = Math.min(u, E.sy),
              c = Math.max(c, E.sy + E.h)
          }
        } catch (e) {
          x = !0, b = e
        } finally {
          try {
            !I && T.return && T.return()
          } finally {
            if (x) throw b
          }
        }
        return s = Math.min(s, n.x), l = Math.max(l, n.x), u = Math.min(u, n.y), c =
          Math.max(c, n.y), {
            sx: s,
            sy: u,
            w: Math.max(l - s, 1),
            h: Math.max(c - u, 1)
          }
      }, t.isCurveSegIntersect = function (e) {
        var t = e.curve,
          n = e.seg,
          a = O.apply(void 0, (0, r.default)(e.curve));
        if (w(n[0], n[1], {
            sx: a.min.x,
            sy: a.min.y,
            w: a.max.x - a.min.x,
            h: a.max.y - a.min.y
          })) {
          for (var i = t[0], A = 1; A <= 20; A++) {
            var o = A / 20,
              s = [t[0][0] * (1 - o) * (1 - o) * (1 - o) + 3 * t[1][0] * o * (1 - o) * (
                  1 - o) + 3 * t[2][0] * o * o * (1 - o) + t[3][0] * o * o * o, t[0][
                1] * (1 - o) * (1 - o) * (1 - o) + 3 * t[1][1] * o * (1 - o) * (1 - o) +
                3 * t[2][1] * o * o * (1 - o) + t[3][1] * o * o * o
              ];
            if (M(i, s, n[0], n[1])) return !0;
            i = s
          }
          return !1
        }
        return !1
      }, function (e, t, n, r) {
        return {
          min: {
            x: Math.min(e[0], t[0], n[0], r[0]),
            y: Math.min(e[1], t[1], n[1], r[1])
          },
          max: {
            x: Math.max(e[0], t[0], n[0], r[0]),
            y: Math.max(e[1], t[1], n[1], r[1])
          }
        }
      }),
      _ = t.bezierMinMax = function (e, t, n, r) {
        for (var a = [], i = [], A = [], o = void 0, s = void 0, u = void 0, l = void 0,
            c = void 0, d = void 0, h = void 0, p = void 0, f = 0; f < 2; ++f)
          if (0 == f ? (s = 6 * e[0] - 12 * t[0] + 6 * n[0], o = -3 * e[0] + 9 * t[0] -
              9 * n[0] + 3 * r[0], u = 3 * t[0] - 3 * e[0]) : (s = 6 * e[1] - 12 * t[1] +
              6 * n[1], o = -3 * e[1] + 9 * t[1] - 9 * n[1] + 3 * r[1], u = 3 * t[1] - 3 *
              e[1]), Math.abs(o) < 1e-12) {
            if (Math.abs(s) < 1e-12) continue;
            0 < (l = -u / s) && l < 1 && a.push(l)
          } else(h = s * s - 4 * u * o) < 0 ? Math.abs(h) < 1e-12 && 0 < (l = -s / (2 *
            o)) && l < 1 && a.push(l) : (0 < (c = (-s + (p = Math.sqrt(h))) / (2 *
            o)) && c < 1 && a.push(c), 0 < (d = (-s - p) / (2 * o)) && d < 1 && a.push(
              d));
        for (var g, y = a.length; y--;) g = 1 - (l = a[y]), i[y] = g * g * g * e[0] + 3 *
          g * g * l * t[0] + 3 * g * l * l * n[0] + l * l * l * r[0], A[y] = g * g * g *
          e[1] + 3 * g * g * l * t[1] + 3 * g * l * l * n[1] + l * l * l * r[1];
        return i.push(e[0], r[0]), A.push(e[1], r[1]), {
          min: {
            x: Math.min.apply(0, i),
            y: Math.min.apply(0, A)
          },
          max: {
            x: Math.max.apply(0, i),
            y: Math.max.apply(0, A)
          }
        }
      },
      S = (t.getLinkNewTextPer = function (e) {
        for (var t = 0, n = 0, r = 1, a = 0, i = e.map((function (e) {
            return e.per
          })).sort(), A = 0; A <= i.length; A++) {
          var o = A < i.length ? i[A] : 1;
          t <= o - a && (t = o - a, n = a, r = o), a = o
        }
        return n / 2 + r / 2
      }, t.getDirAftRotate = function (e, t, n, r) {
        r = void 0 === r ? 1 : r, (n = void 0 === n ? 1 : n) < 0 && (e === h.DIRECTION
          .LEFT || e === h.DIRECTION.RIGHT) && (e = 3 - e), r < 0 && (e === h
          .DIRECTION.UP || e === h.DIRECTION.DOWN) && (e = 3 - e);
        var a = 0;
        switch (t = t || 0, e) {
          case h.DIRECTION.UP:
            a = Math.PI / 2 * 3;
            break;
          case h.DIRECTION.DOWN:
            a = Math.PI / 2;
            break;
          case h.DIRECTION.LEFT:
            a = Math.PI
        }
        return a += t, a /= Math.PI / 2, (a %= 4) >= .5 && a < 1.5 ? h.DIRECTION.DOWN :
          a >= 1.5 && a < 2.5 ? h.DIRECTION.LEFT : a >= 2.5 && a < 3.5 ? h.DIRECTION
          .UP : h.DIRECTION.RIGHT
      }),
      U = (t.getConnH = function (e, t) {
        return ((e === h.DIRECTION.LEFT || e === h.DIRECTION.RIGHT ? 0 : 1) + t) % 2 ==
          0
      }, t.isConnAllHV = function (e, t) {
        if (e.length <= 1) return !1;
        for (var n = 5 / t, r = void 0, a = 0; a < e.length - 1; a++) {
          var i = e[a],
            A = e[a + 1],
            o = Math.abs(i.y - A.y) < n,
            s = Math.abs(i.x - A.x) < n;
          if (o && s) return !1;
          if (!o && !s) return !1;
          if (void 0 === r) r = o ? "h" : "v";
          else {
            if ("h" === r && o) return !1;
            if ("v" === r && s) return !1;
            r = o ? "h" : "v"
          }
        }
        return !0
      }, t.getDistDivideByDir = function (e, t, n) {
        var r = void 0,
          a = void 0;
        return n === h.DIRECTION.LEFT || n === h.DIRECTION.RIGHT ? (r = n === h
          .DIRECTION.LEFT ? t[0] - e[0] : e[0] - t[0], a = e[1] - t[1]) : (r = n === h
          .DIRECTION.UP ? t[1] - e[1] : e[1] - t[1], a = e[0] - t[0]), {
          v1: r,
          v2: a
        }
      }, t.mergeIntervals = function (e) {
        e = e.sort((function (e, t) {
          return e[0] - t[0]
        }));
        for (var t = 0, n = 1; n < e.length; n++) e[t][1] >= e[n][0] ? e[t][1] = Math
          .max(e[t][1], e[n][1]) : e[++t] = e[n];
        return e.slice(0, t + 1)
      }, t.getShapeDataFromExist = function (e) {
        var t = e.sx,
          n = e.sy,
          r = e.w,
          i = e.h,
          A = e.another,
          s = e.shapeType;
        return "text" !== s ? (0, o.default)((0, o.default)({
          type: "shape",
          shape: s,
          boundary: {
            sx: t,
            sy: n,
            w: r,
            h: i
          },
          inProgress: !1
        }, "shape" === (null == A ? void 0 : A.type) ? {
          stroke: A.stroke,
          fill: A.fill,
          lineWidth: A.lineWidth,
          dash: A.dash
        } : {
          stroke: d.default.shapeDef.stroke,
          fill: d.default.shapeDef.fill,
          lineWidth: d.default.shapeDef.lineWidth,
          dash: d.default.shapeDef.dash
        }), {
          text: "object" === (0, a.default)(null == A ? void 0 : A.text) && null !==
            (null == A ? void 0 : A.text) ? (0, o.default)((0, o.default)({}, A
              .text), {
              value: ""
            }) : "text" === (null == A ? void 0 : A.type) ? {
              value: "",
              stroke: A.stroke,
              fill: A.fill,
              textAlign: A.textAlign,
              verticalAlign: d.default.shapeDef.text.verticalAlign,
              fontSize: A.fontSize,
              fontFamily: A.fontFamily
            } : {
              value: "",
              stroke: d.default.shapeDef.text.stroke,
              fill: d.default.shapeDef.text.fill,
              textAlign: d.default.shapeDef.text.textAlign,
              verticalAlign: d.default.shapeDef.text.verticalAlign,
              fontSize: d.default.shapeDef.text.fontSize,
              fontFamily: d.default.shapeDef.text.fontFamily
            }
        }) : (0, o.default)({
          type: "text",
          boundary: {
            sx: t,
            sy: n,
            w: r,
            h: i
          },
          inProgress: !1
        }, "text" === (null == A ? void 0 : A.type) ? {
          fontSize: A.fontSize,
          fontFamily: A.fontFamily,
          stroke: A.stroke,
          fill: A.fill,
          textAlign: A.textAlign
        } : "object" === (0, a.default)(null == A ? void 0 : A.text) && null !== (
          null == A ? void 0 : A.text) ? {
          stroke: A.text.stroke,
          fill: A.text.fill,
          textAlign: A.text.textAlign,
          verticalAlign: A.text.verticalAlign,
          fontSize: A.text.fontSize,
          fontFamily: A.text.fontFamily
        } : {
          fontSize: d.default.textDef.fontSize,
          fontFamily: d.default.textDef.fontFamily,
          stroke: d.default.textDef.stroke,
          fill: d.default.textDef.fill,
          textAlign: d.default.textDef.textAlign
        })
      })
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Item = void 0;
    var r = y(n(20)),
      a = y(n(5)),
      i = y(n(16)),
      A = y(n(2)),
      o = y(n(0)),
      s = y(n(1)),
      u = y(n(3)),
      l = y(n(26)),
      c = y(n(4)),
      d = y(n(42)),
      h = y(n(6)),
      p = n(253),
      f = n(389),
      g = y(n(392));

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(393);
    var v = new d.default;
    window.addEventListener("pointerdown", (function () {
      v.forEach((function (e) {
        e()
      }))
    }), {
      capture: !0
    });
    t.Item = function (e) {
      function t() {
        (0, o.default)(this, t);
        var e = (0, u.default)(this, (t.__proto__ || (0, A.default)(t)).apply(this,
          arguments));
        return e.state = {
          isHover: !1
        }, e.throttleId = null, e.cancelHoverHandler = function () {
          e.isHover = !1
        }, e
      }
      return (0, c.default)(t, e), (0, s.default)(t, [{
        key: "propsFilter",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : [],
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            {};
          e = ["className", "style", "toolName", "value", "text", "icon",
            "hint", "disabled", "children"
          ].concat((0, i.default)(e)), n = (0, a.default)({
            toolName: "NoNameTool",
            value: "NoValue",
            icon: g.default
          }, n), (0, l.default)(t.prototype.__proto__ || (0, A.default)(t
            .prototype), "propsFilter", this).call(this, e, (0, a.default)({
            disabled: !1
          }, n))
        }
      }, {
        key: "componentDidMount",
        value: function () {
          v.add(this.cancelHoverHandler)
        }
      }, {
        key: "componentWillUnmount",
        value: function () {
          v.delete(this.cancelHoverHandler)
        }
      }, {
        key: "isHover",
        set: function (e) {
          this.setState({
            isHover: e
          })
        },
        get: function () {
          var e;
          return null !== (e = this.state.isHover) && void 0 !== e && e
        }
      }, {
        key: "hoverProps",
        get: function () {
          var e = this;
          return this.pickedProps.hint ? {
            onPointerEnter: function (t) {
              var n, r;
              clearTimeout(e.throttleId), null === (r = (n = e.nativeProps)
                  .onPointerEnter) || void 0 === r || r.call(n, t), e
                .throttleId = setTimeout((function () {
                  e.isHover = !0
                }), 100)
            },
            onPointerLeave: function (t) {
              var n, r;
              null === (r = (n = e.nativeProps).onPointerLeave) ||
                void 0 === r || r.call(n, t), clearTimeout(e.throttleId), e
                .throttleId = setTimeout((function () {
                  e.isHover = !1
                }), 100)
            }
          } : {}
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          var e = this.pickedProps.disabled;
          return ["item"].concat((0, i.default)(e ? ["item-disabled"] : []))
        }
      }, {
        key: "className",
        get: function () {
          var e = this.pickedProps.className;
          return [].concat((0, i.default)(this.defaultClassNames), [e]).join(
            " ")
        }
      }, {
        key: "defaultStyle",
        get: function () {
          return {
            position: "relative"
          }
        }
      }, {
        key: "style",
        get: function () {
          var e = this.pickedProps.style;
          return (0, a.default)((0, a.default)({}, e), this.defaultStyle)
        }
      }, {
        key: "isTextFirst",
        get: function () {
          var e = (0, r.default)(this.props);
          return e.indexOf("text") < e.indexOf("icon")
        }
      }, {
        key: "Hint",
        get: function () {
          var e = this.pickedProps.hint;
          return e ? h.default.createElement(f.Hint, {
            isShow: this.isHover,
            hint: e
          }) : null
        }
      }, {
        key: "itemChildren",
        get: function () {
          var e = this.props.children,
            t = null != e ? e : [];
          t = t instanceof Array ? [].concat((0, i.default)(t)) : [t];
          var n = this.pickedProps,
            r = n.text,
            a = n.icon,
            A = r ? h.default.createElement("span", {
              className: "text",
              style: {
                pointerEvents: "none"
              }
            }, r) : null,
            o = a ? "string" == typeof a ? h.default.createElement("i", {
              className: "icon",
              style: {
                maskImage: "url(" + a + ")",
                webkitMaskImage: "url(" + a + ")",
                width: "1em",
                height: "1em",
                pointerEvents: "none"
              }
            }) : a : null;
          return t.length ? [].concat((0, i.default)(t), [this.Hint]) : this
            .isTextFirst ? [this.Hint, A, o] : [this.Hint, o, A]
        }
      }]), t
    }(p.FloatComponent)
  }, function (e, t, n) {
    var r = n(78),
      a = n(79);
    e.exports = function (e) {
      return r(a(e))
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(195),
      __esModule: !0
    }
  }, function (e, t) {
    var n = {}.hasOwnProperty;
    e.exports = function (e, t) {
      return n.call(e, t)
    }
  }, function (e, t, n) {
    var r = n(79);
    e.exports = function (e) {
      return Object(r(e))
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(171)(!0);
    n(85)(String, "String", (function (e) {
      this._t = String(e), this._i = 0
    }), (function () {
      var e, t = this._t,
        n = this._i;
      return n >= t.length ? {
        value: void 0,
        done: !0
      } : (e = r(t, n), this._i += e.length, {
        value: e,
        done: !1
      })
    }))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.snapshotOutOfNormalFlowTypes = ["background", "pan", "zoom", "mouse-pointer",
      "select", "select-hover", "laser", "camera-bound"
    ], t.globalSnapshotTypes = ["camera-bound"], t.cameraSnapshotTypes = ["pan", "zoom",
      "camera-bound", "reset-camera", "fit-to-content", "fit-to-doc", "resize-camera"
    ], t.nonRotateTypes = ["audio", "video", "pagePlugin", "star", "triangle", "link"]
  }, function (e, t, n) {
    "use strict";
    class r {
      constructor(e) {
        Array.isArray(e) || (e = []), this._args = e, this.taps = [], this
          .interceptors = [], this.call = this._call, this.promise = this._promise, this
          .callAsync = this._callAsync, this._x = void 0
      }
      compile(e) {
        throw new Error("Abstract: should be overriden")
      }
      _createCall(e) {
        return this.compile({
          taps: this.taps,
          interceptors: this.interceptors,
          args: this._args,
          type: e
        })
      }
      tap(e, t) {
        if ("string" == typeof e && (e = {
            name: e
          }), "object" != typeof e || null === e) throw new Error(
          "Invalid arguments to tap(options: Object, fn: function)");
        if ("string" != typeof (e = Object.assign({
            type: "sync",
            fn: t
          }, e)).name || "" === e.name) throw new Error("Missing name for tap");
        e = this._runRegisterInterceptors(e), this._insert(e)
      }
      tapAsync(e, t) {
        if ("string" == typeof e && (e = {
            name: e
          }), "object" != typeof e || null === e) throw new Error(
          "Invalid arguments to tapAsync(options: Object, fn: function)");
        if ("string" != typeof (e = Object.assign({
            type: "async",
            fn: t
          }, e)).name || "" === e.name) throw new Error("Missing name for tapAsync");
        e = this._runRegisterInterceptors(e), this._insert(e)
      }
      tapPromise(e, t) {
        if ("string" == typeof e && (e = {
            name: e
          }), "object" != typeof e || null === e) throw new Error(
          "Invalid arguments to tapPromise(options: Object, fn: function)");
        if ("string" != typeof (e = Object.assign({
            type: "promise",
            fn: t
          }, e)).name || "" === e.name) throw new Error("Missing name for tapPromise");
        e = this._runRegisterInterceptors(e), this._insert(e)
      }
      _runRegisterInterceptors(e) {
        for (const t of this.interceptors)
          if (t.register) {
            const n = t.register(e);
            void 0 !== n && (e = n)
          } return e
      }
      withOptions(e) {
        const t = t => Object.assign({}, e, "string" == typeof t ? {
          name: t
        } : t);
        e = Object.assign({}, e, this._withOptions);
        const n = this._withOptionsBase || this,
          r = Object.create(n);
        return r.tapAsync = (e, r) => n.tapAsync(t(e), r), r.tap = (e, r) => n.tap(t(e),
            r), r.tapPromise = (e, r) => n.tapPromise(t(e), r), r._withOptions = e, r
          ._withOptionsBase = n, r
      }
      isUsed() {
        return this.taps.length > 0 || this.interceptors.length > 0
      }
      intercept(e) {
        if (this._resetCompilation(), this.interceptors.push(Object.assign({}, e)), e
          .register)
          for (let t = 0; t < this.taps.length; t++) this.taps[t] = e.register(this
            .taps[t])
      }
      _resetCompilation() {
        this.call = this._call, this.callAsync = this._callAsync, this.promise = this
          ._promise
      }
      _insert(e) {
        let t;
        this._resetCompilation(), "string" == typeof e.before ? t = new Set([e
          .before]) : Array.isArray(e.before) && (t = new Set(e.before));
        let n = 0;
        "number" == typeof e.stage && (n = e.stage);
        let r = this.taps.length;
        for (; r > 0;) {
          r--;
          const e = this.taps[r];
          this.taps[r + 1] = e;
          const a = e.stage || 0;
          if (t) {
            if (t.has(e.name)) {
              t.delete(e.name);
              continue
            }
            if (t.size > 0) continue
          }
          if (!(a > n)) {
            r++;
            break
          }
        }
        this.taps[r] = e
      }
    }

    function a(e, t) {
      return function (...n) {
        return this[e] = this._createCall(t), this[e](...n)
      }
    }
    Object.defineProperties(r.prototype, {
      _call: {
        value: a("call", "sync"),
        configurable: !0,
        writable: !0
      },
      _promise: {
        value: a("promise", "promise"),
        configurable: !0,
        writable: !0
      },
      _callAsync: {
        value: a("callAsync", "async"),
        configurable: !0,
        writable: !0
      }
    }), e.exports = r
  }, function (e, t) {
    ! function (n) {
      "object" == typeof t && void 0 !== e ? e.exports = n() : "function" ==
        typeof define && define.amd ? define([], n) : ("undefined" != typeof window ?
          window : "undefined" != typeof global ? global : "undefined" != typeof self ?
          self : this).EventEmitter3 = n()
    }((function () {
      return function e(t, n, r) {
        function a(A, o) {
          if (!n[A]) {
            if (!t[A]) {
              var s = "function" == typeof require && require;
              if (!o && s) return s(A, !0);
              if (i) return i(A, !0);
              var u = new Error("Cannot find module '" + A + "'");
              throw u.code = "MODULE_NOT_FOUND", u
            }
            var l = n[A] = {
              exports: {}
            };
            t[A][0].call(l.exports, (function (e) {
              return a(t[A][1][e] || e)
            }), l, l.exports, e, t, n, r)
          }
          return n[A].exports
        }
        for (var i = "function" == typeof require && require, A = 0; A < r
          .length; A++) a(r[A]);
        return a
      }({
        1: [function (e, t, n) {
          "use strict";
          var r = Object.prototype.hasOwnProperty,
            a = "~";

          function i() {}

          function A(e, t, n) {
            this.fn = e, this.context = t, this.once = n || !1
          }

          function o(e, t, n, r, i) {
            if ("function" != typeof n) throw new TypeError(
              "The listener must be a function");
            var o = new A(n, r || e, i),
              s = a ? a + t : t;
            return e._events[s] ? e._events[s].fn ? e._events[s] = [e._events[
              s], o] : e._events[s].push(o) : (e._events[s] = o, e
              ._eventsCount++), e
          }

          function s(e, t) {
            0 == --e._eventsCount ? e._events = new i : delete e._events[t]
          }

          function u() {
            this._events = new i, this._eventsCount = 0
          }
          Object.create && (i.prototype = Object.create(null), (new i)
              .__proto__ || (a = !1)), u.prototype.eventNames = function () {
              var e, t, n = [];
              if (0 === this._eventsCount) return n;
              for (t in e = this._events) r.call(e, t) && n.push(a ? t.slice(
                1) : t);
              return Object.getOwnPropertySymbols ? n.concat(Object
                .getOwnPropertySymbols(e)) : n
            }, u.prototype.listeners = function (e) {
              var t = a ? a + e : e,
                n = this._events[t];
              if (!n) return [];
              if (n.fn) return [n.fn];
              for (var r = 0, i = n.length, A = new Array(i); r < i; r++) A[
                r] = n[r].fn;
              return A
            }, u.prototype.listenerCount = function (e) {
              var t = a ? a + e : e,
                n = this._events[t];
              return n ? n.fn ? 1 : n.length : 0
            }, u.prototype.emit = function (e, t, n, r, i, A) {
              var o = a ? a + e : e;
              if (!this._events[o]) return !1;
              var s, u = this._events[o],
                l = arguments.length;
              if (u.fn) {
                switch (u.once && this.removeListener(e, u.fn, void 0, !0),
                l) {
                  case 1:
                    return u.fn.call(u.context), !0;
                  case 2:
                    return u.fn.call(u.context, t), !0;
                  case 3:
                    return u.fn.call(u.context, t, n), !0;
                  case 4:
                    return u.fn.call(u.context, t, n, r), !0;
                  case 5:
                    return u.fn.call(u.context, t, n, r, i), !0;
                  case 6:
                    return u.fn.call(u.context, t, n, r, i, A), !0
                }
                for (h = 1, s = new Array(l - 1); h < l; h++) s[h - 1] =
                  arguments[h];
                u.fn.apply(u.context, s)
              } else
                for (var c, d = u.length, h = 0; h < d; h++) switch (u[h]
                  .once && this.removeListener(e, u[h].fn, void 0, !0), l) {
                  case 1:
                    u[h].fn.call(u[h].context);
                    break;
                  case 2:
                    u[h].fn.call(u[h].context, t);
                    break;
                  case 3:
                    u[h].fn.call(u[h].context, t, n);
                    break;
                  case 4:
                    u[h].fn.call(u[h].context, t, n, r);
                    break;
                  default:
                    if (!s)
                      for (c = 1, s = new Array(l - 1); c < l; c++) s[c -
                        1] = arguments[c];
                    u[h].fn.apply(u[h].context, s)
                }
              return !0
            }, u.prototype.on = function (e, t, n) {
              return o(this, e, t, n, !1)
            }, u.prototype.once = function (e, t, n) {
              return o(this, e, t, n, !0)
            }, u.prototype.removeListener = function (e, t, n, r) {
              var i = a ? a + e : e;
              if (!this._events[i]) return this;
              if (!t) return s(this, i), this;
              var A = this._events[i];
              if (A.fn) A.fn !== t || r && !A.once || n && A.context !== n ||
                s(this, i);
              else {
                for (var o = 0, u = [], l = A.length; o < l; o++)(A[o].fn !==
                    t || r && !A[o].once || n && A[o].context !== n) && u
                  .push(A[o]);
                u.length ? this._events[i] = 1 === u.length ? u[0] : u : s(
                  this, i)
              }
              return this
            }, u.prototype.removeAllListeners = function (e) {
              var t;
              return e ? (t = a ? a + e : e, this._events[t] && s(this, t)) :
                (this._events = new i, this._eventsCount = 0), this
            }, u.prototype.off = u.prototype.removeListener, u.prototype
            .addListener = u.prototype.on, u.prefixed = a, u.EventEmitter = u,
            void 0 !== t && (t.exports = u)
        }, {}]
      }, {}, [1])(1)
    }))
  }, function (e, t, n) {
    var r = n(110),
      a = n(83);
    e.exports = Object.keys || function (e) {
      return r(e, a)
    }
  }, function (e, t) {
    e.exports = {}
  }, function (e, t, n) {
    n(174);
    for (var r = n(17), a = n(37), i = n(50), A = n(18)("toStringTag"), o =
        "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList"
        .split(","), s = 0; s < o.length; s++) {
      var u = o[s],
        l = r[u],
        c = l && l.prototype;
      c && !c[A] && a(c, A, u), i[u] = i.Array
    }
  }, function (e, t, n) {
    "use strict";
    e.exports = class {
      constructor(e) {
        this.config = e, this.options = void 0, this._args = void 0
      }
      create(e) {
        let t;
        switch (this.init(e), this.options.type) {
          case "sync":
            t = new Function(this.args(), '"use strict";\n' + this.header() + this
              .content({
                onError: e => `throw ${e};\n`,
                onResult: e => `return ${e};\n`,
                resultReturns: !0,
                onDone: () => "",
                rethrowIfPossible: !0
              }));
            break;
          case "async":
            t = new Function(this.args({
              after: "_callback"
            }), '"use strict";\n' + this.header() + this.content({
              onError: e => `_callback(${e});\n`,
              onResult: e => `_callback(null, ${e});\n`,
              onDone: () => "_callback();\n"
            }));
            break;
          case "promise":
            let e = !1;
            const n = this.content({
              onError: t => (e = !0, `_error(${t});\n`),
              onResult: e => `_resolve(${e});\n`,
              onDone: () => "_resolve();\n"
            });
            let r = "";
            r += '"use strict";\n', r +=
              "return new Promise((_resolve, _reject) => {\n", e && (r +=
                "var _sync = true;\n", r += "function _error(_err) {\n", r +=
                "if(_sync)\n", r +=
                "_resolve(Promise.resolve().then(() => { throw _err; }));\n", r +=
                "else\n", r += "_reject(_err);\n", r += "};\n"), r += this.header(),
              r += n, e && (r += "_sync = false;\n"), r += "});\n", t = new Function(
                this.args(), r)
        }
        return this.deinit(), t
      }
      setup(e, t) {
        e._x = t.taps.map(e => e.fn)
      }
      init(e) {
        this.options = e, this._args = e.args.slice()
      }
      deinit() {
        this.options = void 0, this._args = void 0
      }
      header() {
        let e = "";
        this.needContext() ? e += "var _context = {};\n" : e += "var _context;\n",
          e += "var _x = this._x;\n", this.options.interceptors.length > 0 && (e +=
            "var _taps = this.taps;\n", e +=
            "var _interceptors = this.interceptors;\n");
        for (let t = 0; t < this.options.interceptors.length; t++) {
          const n = this.options.interceptors[t];
          n.call && (e +=
            `${this.getInterceptor(t)}.call(${this.args({before:n.context?"_context":void 0})});\n`
            )
        }
        return e
      }
      needContext() {
        for (const e of this.options.taps)
          if (e.context) return !0;
        return !1
      }
      callTap(e, {
        onError: t,
        onResult: n,
        onDone: r,
        rethrowIfPossible: a
      }) {
        let i = "",
          A = !1;
        for (let t = 0; t < this.options.interceptors.length; t++) {
          const n = this.options.interceptors[t];
          n.tap && (A || (i += `var _tap${e} = ${this.getTap(e)};\n`, A = !0), i +=
            `${this.getInterceptor(t)}.tap(${n.context?"_context, ":""}_tap${e});\n`
            )
        }
        i += `var _fn${e} = ${this.getTapFn(e)};\n`;
        const o = this.options.taps[e];
        switch (o.type) {
          case "sync":
            a || (i += `var _hasError${e} = false;\n`, i += "try {\n"), i += n ?
              `var _result${e} = _fn${e}(${this.args({before:o.context?"_context":void 0})});\n` :
              `_fn${e}(${this.args({before:o.context?"_context":void 0})});\n`, a || (
                i += "} catch(_err) {\n", i += `_hasError${e} = true;\n`, i += t(
                  "_err"), i += "}\n", i += `if(!_hasError${e}) {\n`), n && (i += n(
                "_result" + e)), r && (i += r()), a || (i += "}\n");
            break;
          case "async":
            let A = "";
            A += n ? `(_err${e}, _result${e}) => {\n` : `_err${e} => {\n`, A +=
              `if(_err${e}) {\n`, A += t("_err" + e), A += "} else {\n", n && (A += n(
                "_result" + e)), r && (A += r()), A += "}\n", A += "}", i +=
              `_fn${e}(${this.args({before:o.context?"_context":void 0,after:A})});\n`;
            break;
          case "promise":
            i += `var _hasResult${e} = false;\n`, i +=
              `var _promise${e} = _fn${e}(${this.args({before:o.context?"_context":void 0})});\n`,
              i += `if (!_promise${e} || !_promise${e}.then)\n`, i +=
              `  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${e} + ')');\n`,
              i += `_promise${e}.then(_result${e} => {\n`, i +=
              `_hasResult${e} = true;\n`, n && (i += n("_result" + e)), r && (i +=
              r()), i += `}, _err${e} => {\n`, i +=
              `if(_hasResult${e}) throw _err${e};\n`, i += t("_err" + e), i += "});\n"
        }
        return i
      }
      callTapsSeries({
        onError: e,
        onResult: t,
        resultReturns: n,
        onDone: r,
        doneReturns: a,
        rethrowIfPossible: i
      }) {
        if (0 === this.options.taps.length) return r();
        const A = this.options.taps.findIndex(e => "sync" !== e.type),
          o = n || a || !1;
        let s = "",
          u = r;
        for (let n = this.options.taps.length - 1; n >= 0; n--) {
          const a = n;
          u !== r && "sync" !== this.options.taps[a].type && (s +=
            `function _next${a}() {\n`, s += u(), s += "}\n", u = () =>
            `${o?"return ":""}_next${a}();\n`);
          const l = u,
            c = e => e ? "" : r(),
            d = this.callTap(a, {
              onError: t => e(a, t, l, c),
              onResult: t && (e => t(a, e, l, c)),
              onDone: !t && l,
              rethrowIfPossible: i && (A < 0 || a < A)
            });
          u = () => d
        }
        return s += u(), s
      }
      callTapsLooping({
        onError: e,
        onDone: t,
        rethrowIfPossible: n
      }) {
        if (0 === this.options.taps.length) return t();
        const r = this.options.taps.every(e => "sync" === e.type);
        let a = "";
        r || (a += "var _looper = () => {\n", a += "var _loopAsync = false;\n"), a +=
          "var _loop;\n", a += "do {\n", a += "_loop = false;\n";
        for (let e = 0; e < this.options.interceptors.length; e++) {
          const t = this.options.interceptors[e];
          t.loop && (a +=
            `${this.getInterceptor(e)}.loop(${this.args({before:t.context?"_context":void 0})});\n`
            )
        }
        return a += this.callTapsSeries({
          onError: e,
          onResult: (e, t, n, a) => {
            let i = "";
            return i += `if(${t} !== undefined) {\n`, i += "_loop = true;\n",
              r || (i += "if(_loopAsync) _looper();\n"), i += a(!0), i +=
              "} else {\n", i += n(), i += "}\n", i
          },
          onDone: t && (() => {
            let e = "";
            return e += "if(!_loop) {\n", e += t(), e += "}\n", e
          }),
          rethrowIfPossible: n && r
        }), a += "} while(_loop);\n", r || (a += "_loopAsync = true;\n", a +=
          "};\n", a += "_looper();\n"), a
      }
      callTapsParallel({
        onError: e,
        onResult: t,
        onDone: n,
        rethrowIfPossible: r,
        onTap: a = ((e, t) => t())
      }) {
        if (this.options.taps.length <= 1) return this.callTapsSeries({
          onError: e,
          onResult: t,
          onDone: n,
          rethrowIfPossible: r
        });
        let i = "";
        i += "do {\n", i += `var _counter = ${this.options.taps.length};\n`, n && (
          i += "var _done = () => {\n", i += n(), i += "};\n");
        for (let A = 0; A < this.options.taps.length; A++) {
          const o = () => n ? "if(--_counter === 0) _done();\n" : "--_counter;",
            s = e => e || !n ? "_counter = 0;\n" : "_counter = 0;\n_done();\n";
          i += "if(_counter <= 0) break;\n", i += a(A, () => this.callTap(A, {
            onError: t => {
              let n = "";
              return n += "if(_counter > 0) {\n", n += e(A, t, o, s), n +=
                "}\n", n
            },
            onResult: t && (e => {
              let n = "";
              return n += "if(_counter > 0) {\n", n += t(A, e, o, s), n +=
                "}\n", n
            }),
            onDone: !t && (() => o()),
            rethrowIfPossible: r
          }), o, s)
        }
        return i += "} while(false);\n", i
      }
      args({
        before: e,
        after: t
      } = {}) {
        let n = this._args;
        return e && (n = [e].concat(n)), t && (n = n.concat(t)), 0 === n.length ? "" :
          n.join(", ")
      }
      getTapFn(e) {
        return `_x[${e}]`
      }
      getTap(e) {
        return `_taps[${e}]`
      }
      getInterceptor(e) {
        return `_interceptors[${e}]`
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.isIosDevice = function () {
        return /iPad|iPhone|iPod/.test(navigator.platform) || "MacIntel" === navigator
          .platform && navigator.maxTouchPoints > 1
      }, t.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent), t
      .deviceOS = function () {
        var e = navigator.userAgent,
          t = !1,
          n = !1,
          r = !1;
        return /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e) ? n = !0 :
          /Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/
          .test(e) ? t = !0 : r = !0, {
            isMobile: t,
            isTablet: n,
            isDesktop: r
          }
      }
  }, function (e, t) {
    e.exports = function (e) {
      if ("function" != typeof e) throw TypeError(e + " is not a function!");
      return e
    }
  }, function (e, t) {
    e.exports = function (e, t) {
      return {
        enumerable: !(1 & e),
        configurable: !(2 & e),
        writable: !(4 & e),
        value: t
      }
    }
  }, function (e, t) {
    var n = {}.toString;
    e.exports = function (e) {
      return n.call(e).slice(8, -1)
    }
  }, function (e, t) {
    e.exports = !0
  }, function (e, t, n) {
    var r = n(27).f,
      a = n(43),
      i = n(18)("toStringTag");
    e.exports = function (e, t, n) {
      e && !a(e = n ? e : e.prototype, i) && r(e, i, {
        configurable: !0,
        value: t
      })
    }
  }, function (e, t, n) {
    var r = n(34),
      a = n(117),
      i = n(118),
      A = n(30),
      o = n(68),
      s = n(90),
      u = {},
      l = {};
    (t = e.exports = function (e, t, n, c, d) {
      var h, p, f, g, y = d ? function () {
          return e
        } : s(e),
        v = r(n, c, t ? 2 : 1),
        m = 0;
      if ("function" != typeof y) throw TypeError(e + " is not iterable!");
      if (i(y)) {
        for (h = o(e.length); h > m; m++)
          if ((g = t ? v(A(p = e[m])[0], p[1]) : v(e[m])) === u || g === l) return g
      } else
        for (f = y.call(e); !(p = f.next()).done;)
          if ((g = a(f, v, p.value, t)) === u || g === l) return g
    }).BREAK = u, t.RETURN = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.SELECT_PAD = void 0;
    var r = w(n(36)),
      a = w(n(5)),
      i = w(n(75)),
      A = w(n(2)),
      o = w(n(0)),
      s = w(n(1)),
      u = w(n(3)),
      l = w(n(4)),
      c = n(46),
      d = n(15),
      h = w(n(229)),
      p = w(n(22)),
      f = n(19),
      g = n(230),
      y = n(29),
      v = n(28),
      m = n(66);

    function w(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var B = t.SELECT_PAD = 0,
      M = "rgba(53, 128, 250)",
      C = function (e) {
        function t() {
          (0, o.default)(this, t);
          var e = (0, u.default)(this, (t.__proto__ || (0, A.default)(t)).apply(this,
            arguments));
          return e.type = "select", e.activate = !1, e.selectedOpIds = [], e.description =
            "选择工具", e
        }
        return (0, l.default)(t, e), (0, s.default)(t, [{
          key: "getSelectedIds",
          value: function () {
            return this.selectedOpIds.slice()
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              activate: {
                value: !0,
                information: {
                  args: "",
                  message: "设置工具栏状态为：" + this.type
                }
              },
              "select:filterType": {
                value: this.filterEles.bind(this),
                information: {
                  args: "types: Array<string>",
                  message: ""
                }
              }
            }
          }
        }, {
          key: "filterEles",
          value: function (e) {
            var t = this;
            console.log("filterEles() types: ", e);
            var n = this.selectedOpIds.filter((function (n) {
              var r = t.drawOpsOfPage[n];
              if (r && -1 !== e.indexOf(r.data.type)) return !0
            }));
            console.log("filterEles() this.selectedOpIds: ", this.selectedOpIds),
              this.dispatch(this.getSnapshot(n))
          }
        }, {
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.opChange.tap("OpChange", this.handleOpChange
                .bind(this)), this.opsManager.hooks.pageChange.tap("pageChange",
                this.handlePageChange.bind(this)), this.opsManager.hooks.keydown
              .tap("KeydownPlugin", this.handleKeyDown.bind(this))
          }
        }, {
          key: "handleKeyDown",
          value: function (e) {
            if ("a" === e.key.toLocaleLowerCase() && this.app.container
              .isCtrlPressed()) {
              e.preventDefault();
              var t = [];
              for (var n in this.drawOpsOfPage) this.drawOpsOfPage[n].data
                .hidden || this.drawOpsOfPage[n].data.deleted || t.push(n);
              t.length > 0 && (this.dispatch(this.getSnapshot(t)), this.opsManager
                .setCurrOp("select"))
            }
          }
        }, {
          key: "handlePageChange",
          value: function (e) {
            e.uid === this.app.account && this.selectedOpIds.length > 0 && this
              .dispatch(this.getSnapshot([]))
          }
        }, {
          key: "handleOpChange",
          value: function (e) {
            var t;
            "select" !== e && "select" === (null === (t = this.opsManager
              .currOp) || void 0 === t ? void 0 : t.type) && this.dispatch(this
              .getSnapshot([]))
          }
        }, {
          key: "postMouseUp",
          value: function (e) {
            this.dispatch(this.getSnapshot(e))
          }
        }, {
          key: "postClick",
          value: function (e) {
            if (0 === e.length && Date.now() - this.opsManager.opMap.text.blurAt <
              100) return;
            (0, f.idsChanged)(e, this.selectedOpIds) && this.dispatch(this
              .getSnapshot(e))
          }
        }, {
          key: "getSnapshot",
          value: function (e) {
            var t = this.opsManager.opMap.url;
            return e = e.filter((function (e) {
              return e !== t.currentUrlOpid
            })), {
              type: "select",
              sp: this.sp,
              ep: this.ep,
              inProgress: !1,
              selectedOpIds: e.slice(),
              reuseOpType: "select",
              skipUndo: !0,
              color: p.default.penDef.stroke,
              nickname: this.app.nickname
            }
          }
        }, {
          key: "preview",
          value: function (e, t, n) {
            e.page.toString() === n.page.pageIndex && this.draw(e, t)
          }
        }, {
          key: "draw",
          value: function (e, t) {
            var n, r, A = this,
              o = e.data,
              s = o.selectedOpIds.filter((function (e) {
                return A.drawOpsOfPage[e]
              })),
              u = this.opsManager.opMap.text;
            if (e.uid === this.app.account && -1 === e.opId.indexOf(
                "select-hover") && (this.selectInfo = void 0), e.uid === this.app
              .account && 1 === s.length) {
              var l = this.drawOpsOfPage[s[0]];
              if (u.isTextBeingEdit(s[0]) || !0 === (null === (r = null === (n =
                    null == l ? void 0 : l.data) || void 0 === n ? void 0 : n
                  .crop) || void 0 === r ? void 0 : r.inProgress)) {
                var d = this.opsManager.drawOpsOfPage[s[0]],
                  h = d.data.boundary,
                  p = (0, y.getTransPoint)([h.sx, h.sy], d.data.mat),
                  f = (0, y.getTransPoint)([h.sx + h.w, h.sy], d.data.mat),
                  g = (0, y.getTransPoint)([h.sx + h.w, h.sy + h.h], d.data.mat),
                  v = (0, y.getTransPoint)([h.sx, h.sy + h.h], d.data.mat),
                  w = m.HINT_BORDER_PAD / this.app.scale / Math.abs(d.data
                    .xFactor || 1),
                  M = m.HINT_BORDER_PAD / this.app.scale / Math.abs(d.data
                    .yFactor || 1),
                  C = (0, y.getTransPoint)([h.sx + h.w / 2, h.sy - M], d.data
                  .mat),
                  I = (0, y.getTransPoint)([h.sx + h.w + w, h.sy + h.h / 2], d
                    .data.mat),
                  x = (0, y.getTransPoint)([h.sx + h.w / 2, h.sy + h.h + M], d
                    .data.mat),
                  b = (0, y.getTransPoint)([h.sx - w, h.sy + h.h / 2], d.data
                  .mat),
                  k = (0, y.getTransPoint)([h.sx + h.w / 2, h.sy], d.data.mat),
                  T = (0, y.getTransPoint)([h.sx + h.w, h.sy + h.h / 2], d.data
                    .mat),
                  E = (0, y.getTransPoint)([h.sx + h.w / 2, h.sy + h.h], d.data
                    .mat),
                  D = (0, y.getTransPoint)([h.sx, h.sy + h.h / 2], d.data.mat),
                  N = void 0;
                return o.inProgress || (N = this.drawRotateIcon(o, t)), void(this
                  .selectInfo = {
                    pad: B,
                    boundary: {
                      isCombined: !1,
                      p1: p,
                      p2: f,
                      p3: g,
                      p4: v
                    },
                    rotateIcon: N,
                    hintPos: {
                      id: d.opId,
                      p1: C,
                      p2: I,
                      p3: x,
                      p4: b,
                      sp1: k,
                      sp2: T,
                      sp3: E,
                      sp4: D,
                      hidden: !0
                    }
                  })
              }
              var P = this.opsManager.currPage.idToGroup.get(s[0]);
              if (P) {
                var Q = this.opsManager.currPage.groups.get(P);
                if (Q && Q.size > 1 && !o.inProgress) {
                  var O = this.getCombineBox((0, i.default)(Q)),
                    _ = 4 / this.app.scale;
                  O && (O = {
                    sx: O.sx - _,
                    sy: O.sy - _,
                    w: O.w + 2 * _,
                    h: O.h + 2 * _
                  }, this.drawCombineBox(O, t, !1))
                }
              }
            }
            if (e.uid === this.app.account || 1 !== s.length || !u
              .isTextBeingEdit(s[0])) {
              o.inProgress && e.uid === this.app.account && o.sp && o.ep && o.sp[
                0] !== o.ep[0] && o.sp[1] !== o.ep[1] && this.drawMask(o, t);
              var S = void 0,
                U = void 0;
              o.inProgress || (S = this.getCombineBox(o.selectedOpIds), s.length >
                1 && !o.inProgress && S && this.drawCombineBox(S, t, e.uid ===
                  this.app.account)), (o.inProgress || 1 === s.length) && (U =
                this.drawIndiBox(o, t, e.uid === this.app.account));
              var F = void 0;
              1 === s.length && e.uid === this.app.account && (F = this
                .drawLinkDot(o, t));
              var L = void 0;
              if (!o.inProgress && 1 === s.length && e.uid === this.app.account) {
                var j = this.drawOpsOfPage[s[0]]; - 1 === c.nonRotateTypes
                  .indexOf(j.data.type) && (L = this.drawRotateIcon(o, t))
              }
              o.inProgress || e.uid !== this.app.account || -1 !== e.opId.indexOf(
                "select-hover") || (1 === s.length && Array.isArray(U) && U
                .length > 0 ? this.selectInfo = {
                  pad: B,
                  boundary: {
                    isCombined: !1,
                    p1: U[0][0],
                    p2: U[0][1],
                    p3: U[0][2],
                    p4: U[0][3]
                  },
                  rotateIcon: L,
                  hintPos: F
                } : s.length > 1 && S && (this.selectInfo = {
                  pad: B,
                  boundary: (0, a.default)({
                    isCombined: !0
                  }, S),
                  rotateIcon: void 0,
                  hintPos: void 0
                })), this.drawUserName(e, t, S)
            }
          }
        }, {
          key: "getCombineBox",
          value: function (e) {
            var t = this;
            if (0 !== (e = e.filter((function (e) {
                return t.drawOpsOfPage[e]
              }))).length) {
              var n = e.map((function (e) {
                var n = t.drawOpsOfPage[e];
                return (0, d.getTransformedBoundary)(t.app.camera.scale, n
                  .data)
              })).filter((function (e) {
                return !(isNaN(e.w) || isNaN(e.h) || isNaN(e.sx) || isNaN(e
                  .sy))
              }));
              return 0 === n.length ? {
                sx: 0,
                sy: 0,
                w: 0,
                h: 0
              } : 1 === n.length ? n[0] : n.reduce((function (e, t) {
                return (0, d.combineBoundary)(e, t)
              }))
            }
          }
        }, {
          key: "drawUserName",
          value: function (e, t, n) {
            if (!e.data.inProgress && e.uid !== this.app.account && n) {
              var r = n.sx + n.w / 2,
                a = n.sy;
              if (!this.app.appConfig.showSelectNickname) return;
              (0, f.drawUserName)({
                ctx: t,
                account: e.data.nickname ? e.data.nickname : e.uid,
                scale: this.app.scale,
                px: r,
                py: a,
                bgColor: e.data.color ? e.data.color : "rgb(0,0,0)",
                fontSize: 16,
                textPadding: 8,
                radius: 6
              })
            }
          }
        }, {
          key: "drawMask",
          value: function (e, t) {
            var n = void 0,
              r = void 0;
            if (Array.isArray(e.points) && e.points.length >= 2 ? (n = e.points[
                0], r = e.points[e.points.length - 1]) : e.sp && e.ep && (e.sp[
                0] === e.ep[0] && e.sp[1] === e.ep[1] || (n = e.sp, r = e.ep)),
              n && r) {
              var a = (0, d.getBoundaryBoxFromTwoPoints)(n, r),
                i = a.sx,
                A = a.sy,
                o = a.w,
                s = a.h;
              t.beginPath(), t.fillStyle = "rgba(132, 176, 245, .4)", t.fillRect(
                i, A, o, s), t.strokeStyle = M, t.strokeRect(i, A, o, s)
            }
          }
        }, {
          key: "drawCombineBox",
          value: function (e, t) {
            var n = !(arguments.length > 2 && void 0 !== arguments[2]) ||
              arguments[2];
            t.lineWidth = 1 / this.app.scale;
            var r = 5 / this.app.scale,
              a = B;
            return t.beginPath(), t.strokeStyle = M, t.strokeRect(e.sx - a, e.sy -
              a, e.w + 2 * a, e.h + 2 * a), n && this.drawCornerDot({
              ctx: t,
              dotSize: r,
              p1: [e.sx - a, e.sy - a],
              p2: [e.sx + e.w + a, e.sy - a],
              p3: [e.sx + e.w + a, e.sy + e.h + a],
              p4: [e.sx - a, e.sy + e.h + a]
            }), [e]
          }
        }, {
          key: "drawRotateIcon",
          value: function (e, t) {
            var n = e.selectedOpIds,
              a = this.opsManager.drawOpsOfPage[n[0]];
            t.save(), t.beginPath();
            var i = (0, g.getTransIconPos)(a, B, this.app.scale),
              A = (0, r.default)(i, 2),
              o = A[0],
              s = A[1],
              u = g.ROTATE_TEST_RADIUS / this.app.scale;
            return t.arc(o, s, u, .5 * -Math.PI, Math.PI), t.lineWidth = 1 / this
              .app.scale, t.strokeStyle = "rgba(0,0,0,.8)", t.stroke(), t
              .beginPath(), t.moveTo(o - 1.3 * u, s), t.lineTo(o - .7 * u, s), t
              .lineTo(o - u, s - .3 * u), t.closePath(), t.fillStyle =
              "rgba(0,0,0,.8)", t.fill(), t.restore(), {
                x: o,
                y: s,
                angle: a.data.rAngle || 0
              }
          }
        }, {
          key: "drawLinkDot",
          value: function (e, t) {
            var n = this,
              r = e.selectedOpIds.filter((function (e) {
                return n.drawOpsOfPage[e]
              })),
              a = this.opsManager.drawOpsOfPage[r[0]];
            if (-1 === v.exLinkTypes.indexOf(a.data.type)) {
              var i = m.HINT_BORDER_PAD / this.app.scale / Math.abs(a.data
                  .xFactor || 1),
                A = m.HINT_BORDER_PAD / this.app.scale / Math.abs(a.data
                  .yFactor || 1),
                o = m.HINT_RADIUS / this.app.scale,
                s = a.data.boundary,
                u = (0, y.getTransPoint)([s.sx + s.w / 2, s.sy - A], a.data.mat),
                l = (0, y.getTransPoint)([s.sx + s.w + i, s.sy + s.h / 2], a.data
                  .mat),
                c = (0, y.getTransPoint)([s.sx + s.w / 2, s.sy + s.h + A], a.data
                  .mat),
                d = (0, y.getTransPoint)([s.sx - i, s.sy + s.h / 2], a.data.mat),
                h = (0, y.getTransPoint)([s.sx + s.w / 2, s.sy], a.data.mat),
                p = (0, y.getTransPoint)([s.sx + s.w, s.sy + s.h / 2], a.data
                .mat),
                f = (0, y.getTransPoint)([s.sx + s.w / 2, s.sy + s.h], a.data
                .mat),
                g = (0, y.getTransPoint)([s.sx, s.sy + s.h / 2], a.data.mat);
              return t.fillStyle = "rgba(53, 128, 250, .6)", t.beginPath(), t
                .moveTo(u[0] + o, u[1]), t.arc(u[0], u[1], o, 0, 2 * Math.PI), t
                .moveTo(l[0] + o, l[1]), t.arc(l[0], l[1], o, 0, 2 * Math.PI), t
                .moveTo(c[0] + o, c[1]), t.arc(c[0], c[1], o, 0, 2 * Math.PI), t
                .moveTo(d[0] + o, d[1]), t.arc(d[0], d[1], o, 0, 2 * Math.PI), t
                .fill(), {
                  p1: u,
                  p2: l,
                  p3: c,
                  p4: d,
                  id: r[0],
                  sp1: h,
                  sp2: p,
                  sp3: f,
                  sp4: g
                }
            }
          }
        }, {
          key: "drawIndiBox",
          value: function (e, n, r) {
            for (var a = this, i = e.selectedOpIds.filter((function (e) {
                return a.drawOpsOfPage[e]
              })), A = 5 / this.app.scale, o = B, s = [], u = 0; u < i
              .length; u++) {
              var l = this.opsManager.drawOpsOfPage[i[u]];
              if ("link" !== l.data.type) {
                var c = l.data.boundary,
                  h = l.data.rAngle || 0,
                  p = ("number" == typeof l.data.xFactor && l.data.xFactor) < 0 ?
                  -1 : 1,
                  f = ("number" == typeof l.data.yFactor && l.data.yFactor) < 0 ?
                  -1 : 1,
                  g = void 0,
                  v = void 0,
                  m = void 0,
                  w = void 0;
                if (l.data.boundary.fixRealWorldHeight) {
                  var C = (0, d.getTransformedBoundary)(this.app.scale, l.data);
                  g = [C.sx, C.sy], v = [C.sx + C.w, C.sy], m = [C.sx + C.w, C
                    .sy + C.h
                  ], w = [C.sx, C.sy + C.h]
                } else g = (0, y.getTransPoint)([c.sx, c.sy], l.data.mat), v = (0,
                  y.getTransPoint)([c.sx + c.w, c.sy], l.data.mat), m = (0, y
                  .getTransPoint)([c.sx + c.w, c.sy + c.h], l.data.mat), w = (0,
                  y.getTransPoint)([c.sx, c.sy + c.h], l.data.mat);
                if (s.push([g, v, m, w]), g = (0, d.getPointAftPad)(g, o, h, 0, p,
                    f), v = (0, d.getPointAftPad)(v, o, h, 1, p, f), m = (0, d
                    .getPointAftPad)(m, o, h, 2, p, f), w = (0, d.getPointAftPad)(
                    w, o, h, 3, p, f), n.beginPath(), n.moveTo(g[0], g[1]), n
                  .lineTo(v[0], v[1]), n.lineTo(m[0], m[1]), n.lineTo(w[0], w[1]),
                  n.closePath(), n.lineWidth = 1 / this.app.scale, n.strokeStyle =
                  M, n.stroke(), !e.inProgress && this.opsManager
                  .currOp instanceof t && r && this.drawCornerDot({
                    ctx: n,
                    dotSize: A,
                    p1: g,
                    p2: v,
                    p3: m,
                    p4: w
                  }), 1 === i.length && "shape" === l.data.type)
                  if (!this.opsManager.opMap.shape.isTxtContained(l)) {
                    n.beginPath();
                    var I = void 0,
                      x = void 0,
                      b = void 0,
                      k = void 0,
                      T = void 0,
                      E = A / Math.abs(l.data.yFactor || 1),
                      D = A / Math.abs(l.data.xFactor || 1);
                    l.data.yFactor < 0 ? (I = g, x = v, b = (0, y.getTransPoint)([
                        c.sx + c.w / 2 - D, c.sy + .5 * E
                      ], l.data.mat), k = (0, y.getTransPoint)([c.sx + c.w / 2,
                        c.sy - .8 * E
                      ], l.data.mat), T = (0, y.getTransPoint)([c.sx + c.w / 2 +
                        D, c.sy + .5 * E
                      ], l.data.mat)) : (I = m, x = w, b = (0, y.getTransPoint)([c
                        .sx + c.w / 2 - D, c.sy - .5 * E + c.h
                      ], l.data.mat), k = (0, y.getTransPoint)([c.sx + c.w / 2,
                        c.sy + .9 * E + c.h
                      ], l.data.mat), T = (0, y.getTransPoint)([c.sx + c.w / 2 +
                        D, c.sy - .5 * E + c.h
                      ], l.data.mat)), n.arc(I[0] / 2 + x[0] / 2, I[1] / 2 + x[
                        1] / 2, 3 * A, 0, 2 * Math.PI), n.fillStyle = "white", n
                      .fill(), n.beginPath(), n.moveTo(b[0], b[1]), n.lineTo(k[0],
                        k[1]), n.lineTo(T[0], T[1]), n.strokeStyle = "black", n
                      .lineWidth = 2, n.stroke()
                  }
              } else {
                this.opsManager.linkOp.drawSelectedLink(n, l);
                var N = l.data.boundary;
                N && s.push([
                  [N.sx, N.sy],
                  [N.sx + N.w, N.sy],
                  [N.sx + N.w, N.sy + N.h],
                  [N.sx, N.sy + N.h]
                ])
              }
            }
            return s
          }
        }, {
          key: "drawCornerDot",
          value: function (e) {
            var t = e.ctx,
              n = e.p1,
              r = e.p2,
              a = e.p3,
              i = e.p4,
              A = e.dotSize;
            t.fillStyle = "rgb(255, 255, 255)", t.strokeStyle =
              "rgb(100, 100, 100)", t.beginPath(), t.moveTo(n[0] + A, n[1]), t
              .arc(n[0], n[1], A, 0, 2 * Math.PI), t.moveTo(r[0] + A, r[1]), t
              .arc(r[0], r[1], A, 0, 2 * Math.PI), t.moveTo(a[0] + A, a[1]), t
              .arc(a[0], a[1], A, 0, 2 * Math.PI), t.moveTo(i[0] + A, i[1]), t
              .arc(i[0], i[1], A, 0, 2 * Math.PI), t.fill(), t.stroke(), t
              .closePath()
          }
        }, {
          key: "setSelectedOpIds",
          value: function (e) {
            var t = this.opsManager.opMap.url;
            e = e.filter((function (e) {
              return e !== t.currentUrlOpid
            })), this.selectedOpIds.join(",") !== e.join(",") && (this.emit(
                "event:appState:change", "selectChange", this.selectedOpIds
                .slice(), e.slice(), (0, f.filterNonMediaOpIds)(this, e)), this
              .opsManager.hooks.selectChange.call(this.selectedOpIds.slice(), e
                .slice()), this.selectedOpIds = e, this.dispatch(this
                .getSnapshot(e.slice())))
          }
        }]), t
      }(h.default);
    t.default = C
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.ClickItem = void 0;
    var r = d(n(5)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(26)),
      u = d(n(4)),
      l = d(n(6)),
      c = n(40);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(395);
    t.ClickItem = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.clickHandler = function (t) {
          var n = e.pickedProps,
            r = n.onClick,
            a = n.toolName,
            i = n.value;
          null == r || r({
            type: t.type,
            target: t.target,
            toolName: a,
            value: i
          }), e.isHover = !1
        }, e
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onClick"])
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          return (0, s.default)(t.prototype.__proto__ || (0, a.default)(t
            .prototype), "defaultClassNames", this).concat("click-item")
        }
      }, {
        key: "children",
        get: function () {
          var e = this.pickedProps,
            t = e.value,
            n = e.disabled;
          return l.default.createElement("button", (0, r.default)({
            className: this.className,
            style: this.style,
            value: t,
            disabled: n
          }, this.nativeProps, this.hoverProps, {
            onClick: this.clickHandler
          }), this.itemChildren)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.SubsPanel = void 0;
    var r = c(n(5)),
      a = c(n(2)),
      i = c(n(0)),
      A = c(n(1)),
      o = c(n(3)),
      s = c(n(4)),
      u = c(n(106)),
      l = c(n(6));

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e, t) {
      var n = {};
      for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 &&
        (n[r] = e[r]);
      if (null != e && "function" == typeof u.default) {
        var a = 0;
        for (r = (0, u.default)(e); a < r.length; a++) t.indexOf(r[a]) < 0 && Object
          .prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]])
      }
      return n
    };
    t.SubsPanel = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.left = 0, e.top = 0, e.ref = l.default.createRef(), e
          ._componentDidUpdate = function () {
            var t = e.props,
              n = t.isShow,
              a = t.offset,
              i = t.tbAlign;
            if (n) {
              var A = e.ref.current;
              if (A) {
                var o = A.parentElement;
                if (o) {
                  var s = (0, r.default)({
                      x: 0,
                      y: 0
                    }, a),
                    u = s.x,
                    l = s.y,
                    c = o.getBoundingClientRect(),
                    d = A.getBoundingClientRect(),
                    h = window.innerWidth,
                    p = window.innerHeight,
                    f = c.bottom,
                    g = c.left + .5 * (c.width - d.width),
                    y = !1;
                  if ("down" === i && f + d.height + l <= p ? f += l : "down" === i && c
                    .top - l - d.height > 0 || c.top - l - d.height > 0 ? f = c.top -
                    l - d.height : f + d.height + l <= p ? f += l : (y = !0, f = p < d
                      .height ? 0 : d.height > p - c.top + l ? p - d.height : c.top - l
                      ), y)
                    if (c.right + u + d.width < h) g = c.right + u;
                    else if (c.left - u - d.width > 0) g = c.left - u - d.width;
                  else {
                    g = c.left + .5 * c.width < .5 * h ? h - d.width : 0
                  } else h < d.width || g < 0 ? g = 0 : g + d.width > h && (g = h - d
                    .width);
                  e.ref.current.style.top = f + "px", e.ref.current.style.left = g +
                    "px"
                }
              }
            }
          }, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "componentDidUpdate",
        value: function (e) {
          clearTimeout(this.timer), e.isShow ? this.timer = setTimeout(this
            ._componentDidUpdate, 0) : this._componentDidUpdate()
        }
      }, {
        key: "render",
        value: function () {
          var e = this.props,
            t = e.isShow,
            n = e.style,
            a = e.children,
            i = (e.offset, d(e, ["isShow", "style", "children", "offset"]));
          return t ? l.default.createElement("div", (0, r.default)({}, i, {
            style: (0, r.default)((0, r.default)({}, n), {
              position: "fixed"
            }),
            ref: this.ref
          }), a) : null
        }
      }]), t
    }(l.default.Component)
  }, function (e, t) {
    t.f = {}.propertyIsEnumerable
  }, function (e, t, n) {
    "use strict";
    e.exports = function (e, t) {
      return "string" != typeof e ? e : (/^['"].*['"]$/.test(e) && (e = e.slice(1, -1)),
        /["'() \t\n]/.test(e) || t ? '"' + e.replace(/"/g, '\\"').replace(/\n/g,
          "\\n") + '"' : e)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.getLinkTextPos = t.getArrowPts = t.graphFromAnchors = t.tidyGraph = t
      .getNearestLinkInfo = t.getLinkPosByPer = t.graphAftEndM = t.graphAftConnM = t
      .graphAftConnD = t.graphAftTypeM = t.drawLink = t.patchLink = t.isUnderPoint = t
      .isUnderRect = t.graphInit = t.getEndAngle = void 0;
    var r = l(n(7)),
      a = n(28),
      i = l(n(228)),
      A = l(n(140)),
      o = l(n(135)),
      s = n(39),
      u = n(15);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e, t, n) {
        switch (e) {
          case a.ILinkType.Line:
            return i.default[t](n);
          case a.ILinkType.Curve:
            return A.default[t](n);
          case a.ILinkType.Segment:
            return o.default[t](n)
        }
      },
      d = t.getEndAngle = function (e) {
        return c(e.data.linkType, "getEndAngle", e)
      },
      h = (t.graphInit = function (e) {
        return c(e.linkType, "graphInit", e)
      }, t.isUnderRect = function (e) {
        return c(e.data.linkType, "isUnderRect", e)
      }, t.isUnderPoint = function (e) {
        return c(e.data.linkType, "isUnderPoint", e)
      }, t.patchLink = function (e) {
        return c(e.data.linkType, "patchLink", e)
      }, t.drawLink = function (e) {
        return c(e.data.linkType, "drawLink", e)
      }, t.graphAftTypeM = function (e) {
        var t = e.data,
          n = e.type,
          r = e.op;
        if (t.linkType !== n) {
          if (0 === t.connPs.filter((function (e) {
              return e.type === a.IConnPointType.Anchor
            })).length) {
            var i = (0, s.getLinkEndPos)(r.app, t.start, r),
              A = (0, s.getLinkEndPos)(r.app, t.end, r);
            return c(n, "graphInit", {
              start: i,
              end: A,
              op: r,
              linkType: n
            })
          }
          return c(e.data.linkType, "graphAftTypeM", e)
        }
      }, t.graphAftConnD = function (e) {
        return c(e.data.linkType, "graphAftConnD", e)
      }, t.graphAftConnM = function (e) {
        return c(e.linkType, "graphAftConnM", e)
      }, t.graphAftEndM = function (e) {
        return c(e.linkType, "graphAftEndM", e)
      }, t.getLinkPosByPer = function (e) {
        return c(e.data.linkType, "getLinkPosByPer", e)
      });
    t.getNearestLinkInfo = function (e) {
      return c(e.data.linkType, "getNearestLinkInfo", e)
    }, t.tidyGraph = function (e) {
      return c(e.linkType, "tidyGraph", e)
    }, t.graphFromAnchors = function (e) {
      return c(e.linkType, "graphFromAnchors", e)
    }, t.getArrowPts = function (e) {
      var t = e.data,
        n = e.op,
        r = e.startPos,
        a = e.endPos,
        i = d({
          data: t,
          op: n
        }),
        A = Number(t.lineWidth);
      return A = isNaN(A) ? 1 : A, A = Math.max(A, 3), {
        start: (0, u.getArrowPointsByAngle)(A, i[0], r.x, r.y),
        end: (0, u.getArrowPointsByAngle)(A, i[1], a.x, a.y)
      }
    }, t.getLinkTextPos = function (e) {
      var t = e.data,
        n = e.op,
        a = e.page,
        i = e.data.text || [],
        A = [],
        o = !0,
        s = !1,
        u = void 0;
      try {
        for (var l, c = (0, r.default)(i.arr); !(o = (l = c.next()).done); o = !0) {
          var d = l.value,
            p = h({
              per: d.per,
              data: t,
              op: n,
              page: a
            });
          A.push({
            sx: p[0] - d.w / 2,
            sy: p[1] - d.h / 2,
            w: d.w,
            h: d.h
          })
        }
      } catch (e) {
        s = !0, u = e
      } finally {
        try {
          !o && c.return && c.return()
        } finally {
          if (s) throw u
        }
      }
      return A
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.MAX_LINK_TXT_LEN = t.MAX_TXT_LEN = t.MAX_SHAPE_TXT_LEN = t.SUGGEST_SHAPE_GAP =
      t.SUGGEST_SHAPE_DIST = t.ATTCH_THRES = t.POINT_EXTEND_THRES = t
      .SEG_UNDER_POINT_THRES = t.SEG_MERGE_THRES = t.CONN_DISP_THRES = t
      .TEXT_REMOVE_THRES = t.CONN_TEST_RADIUS = t.END_POINT_TEST_RADIUS = t
      .HINT_TEST_RADIUS = t.HINT_RADIUS = t.HINT_BORDER_PAD = void 0;
    var r = (0, n(53).deviceOS)(),
      a = r.isMobile || r.isTablet;
    t.HINT_BORDER_PAD = 20, t.HINT_RADIUS = 3, t.HINT_TEST_RADIUS = a ? 12 : 5, t
      .END_POINT_TEST_RADIUS = a ? 35 : 15, t.CONN_TEST_RADIUS = a ? 35 : 15, t
      .TEXT_REMOVE_THRES = 50, t.CONN_DISP_THRES = 10, t.SEG_MERGE_THRES = 1, t
      .SEG_UNDER_POINT_THRES = 5, t.POINT_EXTEND_THRES = 3, t.ATTCH_THRES = a ? 30 : 20, t
      .SUGGEST_SHAPE_DIST = 240, t.SUGGEST_SHAPE_GAP = 10, t.MAX_SHAPE_TXT_LEN = 1200, t
      .MAX_TXT_LEN = 1200, t.MAX_LINK_TXT_LEN = 80
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.convertToCameraBoundSnapshot = void 0;
    var r = h(n(2)),
      a = h(n(0)),
      i = h(n(1)),
      A = h(n(3)),
      o = h(n(26)),
      s = h(n(4)),
      u = h(n(21)),
      l = n(236),
      c = h(n(9)),
      d = n(19);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.convertToCameraBoundSnapshot = function (e, t) {
      var n = e.getNextCameraBound(t);
      return (n.width > 1e5 || n.height > 1e5) && (n.width > n.height ? (n.height =
          1e5 * n.height / n.width, n.width = 1e5) : (n.width = 1e5 * n.width / n
          .height, n.height = 1e5)), !n.width || !n.height || n.width < 0 || n.height <
        0 ? (e.app.logger.warn("[wb] boundary计算结果不可用，这次camera bound转换返回原值", (0, u
          .default)(n)), e.app.logger.warn("[wb] container宽高为", e.app.container.width,
          e.app.container.height), e.app.logger.warn("[wb] 快照类型", t.type), {
          type: "camera-bound",
          boundary: {
            centerX: e.centerX,
            centerY: e.centerY,
            width: e.width,
            height: e.height
          },
          skipUndo: !0,
          animate: !1,
          reuseOpType: "camera-bound"
        }) : {
          type: "camera-bound",
          boundary: n,
          skipUndo: !0,
          animate: t.animate,
          reuseOpType: "camera-bound"
        }
    };
    var p = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "camera-bound", e.description = "视角位置", e
      }
      return (0, s.default)(t, e), (0, i.default)(t, [{
        key: "registerHooks",
        value: function () {
          (0, o.default)(t.prototype.__proto__ || (0, r.default)(t.prototype),
            "registerHooks", this).call(this), this.opsManager.hooks.opAdd.tap(
            "OpAdd", this.onOpAdded.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "camera-bound:send": {
              value: this.sendCameraBound.bind(this),
              information: {
                args: "boundary: {centerX: number, centerY: number, width: number, width: number}, animate: boolean",
                message: "发送当前用户的camera-bound，常用于主播同步自己的camera-bound"
              }
            }
          }
        }
      }, {
        key: "onOpAdded",
        value: function (e) {
          var t = e.data;
          if (("video" === t.type || "audio" === t.type || "url" === t.type) &&
            !1 === t.skipUndo && t.boundary && "follower" !== this.app.vision
            .mode) {
            var n = "video" === t.type ? this.app.appConfig.videoFitStrategy :
              this.app.appConfig.audioFitStrategy;
            if (n && n.type === l.MediaFitStrategy.Contain || e.uid === this.app
              .account && !this.app.isRecordPlayer) {
              var r = (0, d.extendCameraToSnap)({
                app: this.app,
                boundary: t.boundary,
                pad: 0
              });
              r.needAdjust && this.sendCameraBound(r.camera, !0)
            } else if (n && n.type === l.MediaFitStrategy.FitPercentange) {
              var a = t.boundary.w,
                i = t.boundary.h;
              a / i > this.app.container.width / this.app.container.height ? i =
                a / this.app.container.width * this.app.container.height : a =
                i / this.app.container.height * this.app.container.width, this
                .sendCameraBound({
                  centerX: t.boundary.sx + t.boundary.w / 2,
                  centerY: t.boundary.sy + t.boundary.h / 2,
                  width: a / n.value,
                  height: i / n.value
                }, !0)
            }
          }
        }
      }, {
        key: "sendCameraBound",
        value: function (e, t) {
          console.warn("sendCameraBound boundary: ", e, t), this.dispatch({
            type: "camera-bound",
            boundary: e,
            skipUndo: !0,
            animate: t,
            reuseOpType: "camera-bound"
          })
        }
      }]), t
    }(c.default);
    t.default = p
  }, function (e, t, n) {
    var r = n(80),
      a = Math.min;
    e.exports = function (e) {
      return e > 0 ? a(r(e), 9007199254740991) : 0
    }
  }, function (e, t) {
    var n = 0,
      r = Math.random();
    e.exports = function (e) {
      return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++n + r).toString(36))
    }
  }, function (e, t, n) {
    var r = n(30),
      a = n(173),
      i = n(83),
      A = n(81)("IE_PROTO"),
      o = function () {},
      s = function () {
        var e, t = n(76)("iframe"),
          r = i.length;
        for (t.style.display = "none", n(112).appendChild(t), t.src = "javascript:", (e =
            t.contentWindow.document).open(), e.write(
            "<script>document.F=Object<\/script>"), e.close(), s = e.F; r--;) delete s
          .prototype[i[r]];
        return s()
      };
    e.exports = Object.create || function (e, t) {
      var n;
      return null !== e ? (o.prototype = r(e), n = new o, o.prototype = null, n[A] =
        e) : n = s(), void 0 === t ? n : a(n, t)
    }
  }, function (e, t) {}, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.DataReportConnError = t.DataReportRunError = void 0;
    var r = A(n(94)),
      a = A(n(5)),
      i = A(n(21));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.DataReportRunError = {
      Board_Lost: 3,
      Page_Lost: 4,
      Link_Id_Miss: 5,
      Pen_Intens_Len_Inconsistent: 6
    }, t.DataReportConnError = {
      Get_Channel_Error: 1,
      IM_Join_Channel_Error: 2,
      IM_Create_Channel_Error: 3,
      Socket_Conn_Closed: 4,
      HeartBeat_Timeout: 5,
      Socket_Closed: 6,
      Sync_Timeout: 7,
      Resend_Count_Exceed_Max: 8
    };
    t.default = function (e, t, n, A) {
      fetch(e, {
        method: "post",
        headers: {
          "content-type": "application/json"
        },
        body: (0, i.default)({
          common: {
            device_id: "",
            session_id: n,
            sdk_type: "whiteboard",
            ver: "2.0"
          },
          event: (0, r.default)({}, t, (0, a.default)((0, a.default)({}, A), {
            sdkVersion: "3.9.15",
            userAgent: navigator.userAgent
          }))
        })
      })
    }
  }, function (e, t, n) {
    var r = n(56),
      a = n(18)("toStringTag"),
      i = "Arguments" == r(function () {
        return arguments
      }());
    e.exports = function (e) {
      var t, n, A;
      return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n =
          function (e, t) {
            try {
              return e[t]
            } catch (e) {}
          }(t = Object(e), a)) ? n : i ? r(t) : "Object" == (A = r(t)) && "function" ==
        typeof t.callee ? "Arguments" : A
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(7)),
      a = g(n(2)),
      i = g(n(0)),
      A = g(n(1)),
      o = g(n(3)),
      s = g(n(4)),
      u = n(133),
      l = g(n(9)),
      c = n(134),
      d = g(c),
      h = g(n(22)),
      p = n(28),
      f = n(223);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = function (e) {
      function t(e) {
        var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        (0, i.default)(this, t);
        var r = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
        return r.type = "", r.shouldSaniteEp = !1, r.points = [], r.sampleSeq = 0, r
          .inProgressId = "", r.penIntens = new f.PenIntens(e, n), r
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.pageChange.tap("PageChange", this
            .handlePageChange.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "handlePageChange",
        value: function () {
          this.beginBatch(), this.sampleSeq = 0, this.points = [], this
            .penIntens.changeIntens(this.points)
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, r) {
          var a;
          if (this.isMouseDown || this.app.container.isTargetOnContainer(e
              .target)) {
            var i = null === (a = this.opsManager.currOp) || void 0 === a ?
              void 0 : a.type;
            h.default[i + "Def"].cursorImgUrl ? document.body.style.cursor =
              "url(" + h.default[i + "Def"].cursorImgUrl + ") 0 17, auto" :
              document.body.style.cursor = "url(" + n(225) + ") 0 17, auto"
          } else document.body.style.cursor = "auto";
          if (this.isMouseDown) {
            t = Number(t.toFixed(1)), r = Number(r.toFixed(1)), this.points
              .push([t, r]), this.penIntens.changeIntens(this.points);
            try {
              this.inProgressId ? this.dispatch(this.getSnapshot(!0), !1, this
                .inProgressId) : this.inProgressId = this.dispatch(this
                .getSnapshot(!0))
            } catch (e) {
              this.logger.warn("[wb] MouseMoveDrawOp MouseMove Error: " + e)
            }
            this.sampleSeq += 1
          }
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n, r, a) {
          this.beginBatch(), t = Number(t.toFixed(1)), n = Number(n.toFixed(1)),
            this.points = [
              [t, n]
            ], this.penIntens.changeIntens(this.points), this.sampleSeq = 0,
            this.inProgressId = ""
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n, r, a) {
          var i = arguments.length > 5 && void 0 !== arguments[5] && arguments[
            5];
          if (i || this.isMouseDown && this.isMouseMoved) {
            t = Number(t.toFixed(1)), n = Number(n.toFixed(1)), this.points
              .push([t, n]), this.penIntens.changeIntens(this.points);
            try {
              this.inProgressId ? this.dispatch(this.getSnapshot(!1), !1, this
                  .inProgressId) : this.dispatch(this.getSnapshot(!1)), this
                .inProgressId = ""
            } catch (e) {
              this.logger.warn("[wb] MouseMoveDrawOp MouseUp Error: " + e)
            }
            this.points = [], this.penIntens.changeIntens(this.points)
          } else i || !this.isMouseDown || this.isMouseMoved || this
            .dispatchClickSnap(e, t, n)
        }
      }, {
        key: "handleClick",
        value: function (e, t, n, r, a) {
          !this.dispatchClickSnap(e, t, n) && this.opsManager.selectOp
            .selectedOpIds.length > 0 && this.dispatch(this.opsManager.selectOp
              .getSnapshot([]))
        }
      }, {
        key: "handlePointerDown",
        value: function (e) {
          this.penIntens.down(e)
        }
      }, {
        key: "handlePointerMove",
        value: function (e) {
          this.penIntens.move(e)
        }
      }, {
        key: "handlePointerUp",
        value: function (e) {
          this.penIntens.up(e)
        }
      }, {
        key: "dispatchClickSnap",
        value: function (e, t, n) {
          return !1
        }
      }, {
        key: "getTwoPointShapeCommonProperty",
        value: function (e) {
          return {
            type: this.type,
            boundary: this.getBoundaryRectOfLine(),
            sp: this.sp,
            ep: this.ep,
            lineWidth: h.default.penDef.lineWidth,
            stroke: h.default.penDef.stroke,
            inProgress: e.inProgress
          }
        }
      }, {
        key: "getFreeDrawCommonProperty",
        value: function (e) {
          return {
            type: this.type,
            boundary: this.getBoundaryRectOfFreeDraw(),
            lineWidth: h.default.penDef.lineWidth,
            stroke: h.default.penDef.stroke,
            inProgress: e.inProgress
          }
        }
      }, {
        key: "getBoundaryRectOfFreeDraw",
        value: function () {
          var e = this.points.filter((function (e) {
            return e
          }));
          if (0 === e.length) throw this.logger.warn("[wb] 涂鸦没有记录任何数据"),
            new Error("涂鸦没有记录任何数据");
          var t = e[0][0],
            n = e[0][1],
            a = t,
            i = n,
            A = !0,
            o = !1,
            s = void 0;
          try {
            for (var l, c = (0, r.default)(e); !(A = (l = c.next()).done); A = !
              0) {
              var d = l.value;
              t = (0, u.min)(d[0], t), n = (0, u.min)(d[1], n), a = (0, u.max)(
                d[0], a), i = (0, u.max)(d[1], i)
            }
          } catch (e) {
            o = !0, s = e
          } finally {
            try {
              !A && c.return && c.return()
            } finally {
              if (o) throw s
            }
          }
          return {
            sx: t,
            sy: n,
            w: Number((a - t).toFixed(2)),
            h: Number((i - n).toFixed(2))
          }
        }
      }, {
        key: "getBoundaryRectOfLine",
        value: function () {
          var e = (0, u.min)(this.sp[0], this.ep[0]),
            t = (0, u.min)(this.sp[1], this.ep[1]),
            n = (0, u.max)(this.sp[0], this.ep[0]),
            r = (0, u.max)(this.sp[1], this.ep[1]);
          return {
            sx: e,
            sy: t,
            w: Number((n - e).toFixed(2)),
            h: Number((r - t).toFixed(2))
          }
        }
      }, {
        key: "strokeOrFill",
        value: function (e, t) {
          if (e.save(), t.dash === p.IDashType.Dashed) {
            var n = 2 / this.app.scale;
            e.lineCap = "butt", e.lineWidth = 1 / this.app.scale, e.setLineDash(
              [n, 2 * n])
          } else e.lineWidth = t.lineWidth;
          if ("number" == typeof t.opacity && (e.globalAlpha = Number(t
              .opacity)), t.isShape && t.dash !== p.IDashType.Dashed) {
            var r = Number(e.lineWidth);
            e.lineWidth = 0, e.clip(), e.lineWidth = 2 * r
          }
          t.fill && (e.fillStyle = t.fill, e.fill()), t.stroke && (t.fill && -
            1 !== t.stroke.indexOf("rgba") && (e.strokeStyle = this.app
              .appConfig.canvasBgColor, e.stroke()), e.strokeStyle = t.stroke,
            e.stroke()), e.restore()
        }
      }, {
        key: "sanityEp",
        value: function (e) {
          return e[0] - this.sp[0] >= 0 && e[0] - this.sp[0] < 1 && (e[0] = this
            .sp[0] + 1), e[1] - this.sp[1] >= 0 && e[1] - this.sp[1] < 1 && (
            e[1] = this.sp[1] + 1), e
        }
      }, {
        key: "intepSnap",
        value: function (e) {
          return "pen" === this.type ? d.default.getSmootherSnapshot({
            app: this.app,
            snapshot: e,
            now: Date.now() + this.app.ntpTimeDiff,
            interpolateFn: c.pointsIntepFn
          }) : e
        }
      }, {
        key: "sp",
        get: function () {
          return this.points[0]
        }
      }, {
        key: "ep",
        get: function () {
          var e = this.points[this.points.length - 1];
          return this.shouldSaniteEp && (e = this.sanityEp(e)), e
        }
      }, {
        key: "enableIntens",
        get: function () {
          return this.penIntens.enable
        },
        set: function (e) {
          this.penIntens.enable = e
        }
      }]), t
    }(l.default);
    t.default = y
  }, function (e, t, n) {
    e.exports = {
      default: n(204),
      __esModule: !0
    }
  }, function (e, t, n) {
    var r = n(23),
      a = n(17).document,
      i = r(a) && r(a.createElement);
    e.exports = function (e) {
      return i ? a.createElement(e) : {}
    }
  }, function (e, t, n) {
    var r = n(23);
    e.exports = function (e, t) {
      if (!r(e)) return e;
      var n, a;
      if (t && "function" == typeof (n = e.toString) && !r(a = n.call(e))) return a;
      if ("function" == typeof (n = e.valueOf) && !r(a = n.call(e))) return a;
      if (!t && "function" == typeof (n = e.toString) && !r(a = n.call(e))) return a;
      throw TypeError("Can't convert object to primitive value")
    }
  }, function (e, t, n) {
    var r = n(56);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) {
      return "String" == r(e) ? e.split("") : Object(e)
    }
  }, function (e, t) {
    e.exports = function (e) {
      if (null == e) throw TypeError("Can't call method on  " + e);
      return e
    }
  }, function (e, t) {
    var n = Math.ceil,
      r = Math.floor;
    e.exports = function (e) {
      return isNaN(e = +e) ? 0 : (e > 0 ? r : n)(e)
    }
  }, function (e, t, n) {
    var r = n(82)("keys"),
      a = n(69);
    e.exports = function (e) {
      return r[e] || (r[e] = a(e))
    }
  }, function (e, t, n) {
    var r = n(8),
      a = n(17),
      i = a["__core-js_shared__"] || (a["__core-js_shared__"] = {});
    (e.exports = function (e, t) {
      return i[e] || (i[e] = void 0 !== t ? t : {})
    })("versions", []).push({
      version: r.version,
      mode: n(57) ? "pure" : "global",
      copyright: "© 2020 Denis Pushkarev (zloirock.ru)"
    })
  }, function (e, t) {
    e.exports =
      "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf"
      .split(",")
  }, function (e, t) {
    t.f = Object.getOwnPropertySymbols
  }, function (e, t, n) {
    "use strict";
    var r = n(57),
      a = n(10),
      i = n(111),
      A = n(37),
      o = n(50),
      s = n(172),
      u = n(58),
      l = n(113),
      c = n(18)("iterator"),
      d = !([].keys && "next" in [].keys()),
      h = function () {
        return this
      };
    e.exports = function (e, t, n, p, f, g, y) {
      s(n, t, p);
      var v, m, w, B = function (e) {
          if (!d && e in x) return x[e];
          switch (e) {
            case "keys":
            case "values":
              return function () {
                return new n(this, e)
              }
          }
          return function () {
            return new n(this, e)
          }
        },
        M = t + " Iterator",
        C = "values" == f,
        I = !1,
        x = e.prototype,
        b = x[c] || x["@@iterator"] || f && x[f],
        k = b || B(f),
        T = f ? C ? B("entries") : k : void 0,
        E = "Array" == t && x.entries || b;
      if (E && (w = l(E.call(new e))) !== Object.prototype && w.next && (u(w, M, !0),
          r || "function" == typeof w[c] || A(w, c, h)), C && b && "values" !== b
        .name && (I = !0, k = function () {
          return b.call(this)
        }), r && !y || !d && !I && x[c] || A(x, c, k), o[t] = k, o[M] = h, f)
        if (v = {
            values: C ? k : B("values"),
            keys: g ? k : B("keys"),
            entries: T
          }, y)
          for (m in v) m in x || i(x, m, v[m]);
        else a(a.P + a.F * (d || I), t, v);
      return v
    }
  }, function (e, t, n) {
    t.f = n(18)
  }, function (e, t, n) {
    var r = n(69)("meta"),
      a = n(23),
      i = n(43),
      A = n(27).f,
      o = 0,
      s = Object.isExtensible || function () {
        return !0
      },
      u = !n(38)((function () {
        return s(Object.preventExtensions({}))
      })),
      l = function (e) {
        A(e, r, {
          value: {
            i: "O" + ++o,
            w: {}
          }
        })
      },
      c = e.exports = {
        KEY: r,
        NEED: !1,
        fastKey: function (e, t) {
          if (!a(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" :
            "P") + e;
          if (!i(e, r)) {
            if (!s(e)) return "F";
            if (!t) return "E";
            l(e)
          }
          return e[r].i
        },
        getWeak: function (e, t) {
          if (!i(e, r)) {
            if (!s(e)) return !0;
            if (!t) return !1;
            l(e)
          }
          return e[r].w
        },
        onFreeze: function (e) {
          return u && c.NEED && s(e) && !i(e, r) && l(e), e
        }
      }
  }, function (e, t, n) {
    var r = n(17),
      a = n(8),
      i = n(57),
      A = n(86),
      o = n(27).f;
    e.exports = function (e) {
      var t = a.Symbol || (a.Symbol = i ? {} : r.Symbol || {});
      "_" == e.charAt(0) || e in t || o(t, e, {
        value: A.f(e)
      })
    }
  }, function (e, t) {
    e.exports = function (e, t, n, r) {
      if (!(e instanceof t) || void 0 !== r && r in e) throw TypeError(n +
        ": incorrect invocation!");
      return e
    }
  }, function (e, t, n) {
    var r = n(73),
      a = n(18)("iterator"),
      i = n(50);
    e.exports = n(8).getIteratorMethod = function (e) {
      if (null != e) return e[a] || e["@@iterator"] || i[r(e)]
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(54);

    function a(e) {
      var t, n;
      this.promise = new e((function (e, r) {
        if (void 0 !== t || void 0 !== n) throw TypeError(
        "Bad Promise constructor");
        t = e, n = r
      })), this.resolve = r(t), this.reject = r(n)
    }
    e.exports.f = function (e) {
      return new a(e)
    }
  }, function (e, t, n) {
    var r = n(37);
    e.exports = function (e, t, n) {
      for (var a in t) n && e[a] ? e[a] = t[a] : r(e, a, t[a]);
      return e
    }
  }, function (e, t, n) {
    var r = n(23);
    e.exports = function (e, t) {
      if (!r(e) || e._t !== t) throw TypeError("Incompatible receiver, " + t +
        " required!");
      return e
    }
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0;
    var r, a = n(125),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.default = function (e, t, n) {
      return t in e ? (0, i.default)(e, t, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : e[t] = n, e
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.transformOp = function (e, t, n) {
      var r = e.opsManager.opMap[n.data.type];
      if (!r) return t;
      try {
        return r && "transformOp" in r ? r.transformOp(t, n.data) : t
      } catch (n) {
        return e.logger.warn("transform op error"), e.logger.warn(t), e.logger.warn(n),
          t
      }
    }, t.patchOp = function (e, t) {
      var n = e.opsManager.opMap[t.data.type];
      try {
        n && "patchOp" in n && !t.data.hidden && n.patchOp(t)
      } catch (n) {
        e.logger.warn("patch op error"), e.logger.warn(t), e.logger.warn(n)
      }
    }, t.opNeedRefresh = function (e, t) {
      return (!(-1 !== ["select", "laser", "text"].indexOf(t.data.type) || -1 !== e
          .opsManager.drawOpTypes.indexOf(t.data.type)) || !t.data.inProgress) &&
        "mouse-pointer" !== t.data.type
    }, t.getSelectedOpIds = function (e) {
      var t = [],
        n = e.lastSelectOfUser[e.app.account];
      return n && (t = n.data.selectedOpIds.slice()), t = t.filter((function (t) {
        return e.drawOpQueue.hasOwnProperty(t) && !e.drawOpQueue[t].data.locked
      }))
    }, t.clearCtx = function (e) {
      e.clearRect(0, 0, e.canvas.width, e.canvas.height)
    }, t.fillCtx = function (e) {
      e.fillRect(0, 0, e.canvas.width, e.canvas.height)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.PlatformArray = ["android", "ios", "pc", "mac", "pad", "web"], t
      .TouchPlatformArray = ["android", "ios", "pad"], t.overwritableTypes = ["select",
        "select-hover", "camera-bound", "mouse-pointer", "laser"
      ];
    var r = t.PluginType = void 0;
    ! function (e) {
      e[e.OneMotion = 0] = "OneMotion"
    }(r || (t.PluginType = r = {}))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.setTextRange = t.inputHandler = t.beforeInputHandler = t.htmlToText = t
      .preventOverLen = void 0;
    var r = u(n(7));
    t.setEditorTxt = p, t.getEditorPos = function (e, t) {
      var n = t.xFactor,
        r = void 0 === n ? 1 : n,
        a = t.yFactor,
        A = void 0 === a ? 1 : a,
        o = t.boundary,
        s = t.mat,
        u = t.rAngle,
        l = t.shape,
        c = [
          [0, 0],
          [1, 1]
        ];
      l && e.ShapeDesc[l] && (c = e.ShapeDesc[l].textB);
      var d = (0, i.getTransPoint)([o.sx + o.w * c[0][0] + 0, o.sy + o.h * c[0][1] + 0],
          s),
        h = (0, i.getTransPoint)([o.sx + o.w * c[1][0] - 0, o.sy + o.h * c[0][1] + 0],
          s),
        p = (0, i.getTransPoint)([o.sx + o.w * c[1][0] - 0, o.sy + o.h * c[1][1] - 0],
          s),
        f = (0, i.getTransPoint)([o.sx + o.w * c[0][0] + 0, o.sy + o.h * c[1][1] - 0],
          s),
        g = (o.w * (c[1][0] - c[0][0]) - 0) * Math.abs(r || 1),
        y = (o.h * (c[1][1] - c[0][1]) - 0) * Math.abs(A || 1),
        v = d[0],
        m = d[1];
      r < 0 && A < 0 ? (v = p[0], m = p[1]) : r < 0 ? (v = h[0], m = h[1]) : A < 0 && (
        v = f[0], m = f[1]);
      return {
        sx: v,
        sy: m,
        w: g,
        h: y,
        angle: u || 0
      }
    };
    var a = n(31),
      i = n(29),
      A = n(19),
      o = u(n(32)),
      s = n(14);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.preventOverLen = function (e, t) {
      var n = t;
      if ("paste" === e.type) {
        var r = (e.clipboardData || window.clipboardData).getData("Text") || "";
        r = (0, A.convertWinTxtToUnixTxt)(r);
        var i = l(e.target);
        e.preventDefault(), e.stopPropagation(), r.length + i.length > n ? (0, a
          .showToast)({
          msg: (0, s.getMsg)("txtExceed"),
          time: 1,
          type: "warn",
          msgTypes: o.default.TXT_EXCEED_MAX
        }) : (document.execCommand("insertText", !1, r), (0, a.hideToast)())
      } else {
        if (e.ctrlKey || e.metaKey) return (0, a.hideToast)();
        if ("Tab" === e.key) return e.preventDefault(), e.returnValue = !1, !1;
        if (-1 !== ["F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11",
            "F12", "ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown", "Backspace",
            "Delete", "Tab", "Escape", "ContextMenu", "Control", "Shift", "Alt", "Meta",
            "Home", "End", "PageUp", "PageDown", "Clear", "Help", "NumLock", "Insert"
          ].indexOf(e.key)) return (0, a.hideToast)();
        var u = l(e.target),
          c = window.getSelection ? window.getSelection().toString().length : 0;
        u.length >= n + c ? ((0, a.showToast)({
          msg: (0, s.getMsg)("txtExceed"),
          time: 1,
          type: "warn",
          msgTypes: o.default.TXT_EXCEED_MAX
        }), e.preventDefault()) : (0, a.hideToast)()
      }
    };
    var l = t.htmlToText = function e(t) {
        var n = "",
          a = t.childNodes;
        if (0 === a.length) return t.tagName && "br" === t.tagName.toLowerCase() ? "\n" :
          t.textContent;
        var i = !0,
          A = !1,
          o = void 0;
        try {
          for (var s, u = (0, r.default)(a); !(i = (s = u.next()).done); i = !0) {
            var l = s.value;
            l.tagName && "div" === l.tagName.toLowerCase() && !n.endsWith("\n") && (n +=
              "\n"), n += e(l, !1)
          }
        } catch (e) {
          A = !0, o = e
        } finally {
          try {
            !i && u.return && u.return()
          } finally {
            if (A) throw o
          }
        }
        return n
      },
      c = {};
    t.beforeInputHandler = function (e) {
      var t = e.target.dataset.editorId;
      c[t] = e.target.innerHTML
    }, t.inputHandler = function (e, t, n) {
      var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
        i = l(e.target);
      r && (i = "\n" === i ? "" : i);
      var A = e.target.dataset.editorId,
        u = n;
      i.length > u ? ((0, a.showToast)({
        msg: (0, s.getMsg)("txtExceed"),
        time: 1,
        type: "warn",
        msgTypes: o.default.TXT_EXCEED_MAX
      }), p(e.target, c[A], !1), delete c[A], t(l(e.target, !0))) : (t(i, !0),
        delete c[A])
    };

    function d(e, t, n, r) {
      if (r.done) return r;
      var a = null;
      if (0 == e.childNodes.length) r.pos += e.textContent.length;
      else
        for (var i = 0; i < e.childNodes.length && !r.done; i++) {
          if ((a = e.childNodes[i]) === t) return r.pos += n, r.done = !0, r;
          d(a, t, n, r)
        }
      return r
    }

    function h(e, t, n) {
      if (n.done) return t;
      if (0 == e.childNodes.length) e.textContent.length >= n.pos ? (t.setStart(e, n.pos),
        n.done = !0) : n.pos = n.pos - e.textContent.length;
      else
        for (var r = 0; r < e.childNodes.length && !n.done; r++) h(e.childNodes[r], t, n);
      return n.done ? t : null
    }
    t.setTextRange = function (e, t) {
      var n = void 0,
        r = void 0;
      window.getSelection && document.createRange && ((r = document.createRange())
        .selectNodeContents(e), "start" === t ? r.collapse(!0) : ("end" === t || 0 ===
          r.toString().length) && r.collapse(!1), (n = window.getSelection())
        .removeAllRanges(), n.addRange(r))
    };

    function p(e, t) {
      var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
      if (l(e) !== t) {
        var r = window.getSelection(),
          a = void 0;
        if (r) {
          var i = r.focusNode,
            A = r.focusOffset;
          a = d(e, i, A, {
            pos: 0,
            done: !1
          })
        }
        if (n ? e.innerText = t : e.innerHTML = t, r && a) {
          r.removeAllRanges();
          var o = h(e, document.createRange(), {
            pos: a.pos,
            done: !1
          });
          o || (o = document.createRange()).selectNodeContents(e), o.collapse(!1), r
            .addRange(o)
        }
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.shouldDispatch = function (e) {
      var t = e.vision.mode;
      return !("broadcaster" !== t && "freeObserver" !== t && !e.isRecordPlayer)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.RadioItem = void 0;
    var r = h(n(5)),
      a = h(n(16)),
      i = h(n(2)),
      A = h(n(0)),
      o = h(n(1)),
      s = h(n(3)),
      u = h(n(26)),
      l = h(n(4)),
      c = h(n(6)),
      d = n(40);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(405);
    t.RadioItem = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.changeHandler = function (t) {
          var n = e.pickedProps,
            r = n.onChange,
            a = n.toolName,
            i = n.value;
          null == r || r({
            type: t.type,
            target: t.target,
            toolName: a,
            value: i,
            checked: t.target.checked
          }), e.forceUpdate()
        }, e
      }
      return (0, l.default)(t, e), (0, o.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, u.default)(t.prototype.__proto__ || (0, i.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "checked"])
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          var e, n = this.pickedProps.checked;
          return (e = (0, u.default)(t.prototype.__proto__ || (0, i.default)(t
            .prototype), "defaultClassNames", this)).concat.apply(e, (0, a
            .default)(n ? ["radio-item", "radio-item-checked"] : [
            "radio-item"
          ]))
        }
      }, {
        key: "defaultStyle",
        get: function () {
          return (0, r.default)((0, r.default)({}, (0, u.default)(t.prototype
            .__proto__ || (0, i.default)(t.prototype), "defaultStyle",
            this)), {
            pointerEvents: "none"
          })
        }
      }, {
        key: "inputStyle",
        get: function () {
          return {
            position: "absolute",
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            width: "100%",
            height: "100%",
            appearance: "none",
            pointerEvents: "all"
          }
        }
      }, {
        key: "children",
        get: function () {
          var e = this.pickedProps,
            t = e.value,
            n = e.checked,
            a = e.disabled;
          return c.default.createElement("label", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), c.default.createElement("input", (0, r
            .default)({
            type: "radio",
            value: t,
            style: this.inputStyle
          }, void 0 !== n ? {
            checked: n
          } : {}, {
            disabled: a
          }, this.nativeProps, {
            onChange: this.changeHandler
          })), this.itemChildren)
        }
      }]), t
    }(d.Item)
  }, function (e, t, n) {
    var r = n(63),
      a = n(55),
      i = n(41),
      A = n(77),
      o = n(43),
      s = n(109),
      u = Object.getOwnPropertyDescriptor;
    t.f = n(24) ? u : function (e, t) {
      if (e = i(e), t = A(t, !0), s) try {
        return u(e, t)
      } catch (e) {}
      if (o(e, t)) return a(!r.f.call(e, t), e[t])
    }
  }, function (e, t, n) {
    var r = n(10),
      a = n(8),
      i = n(38);
    e.exports = function (e, t) {
      var n = (a.Object || {})[e] || Object[e],
        A = {};
      A[e] = t(n), r(r.S + r.F * i((function () {
        n(1)
      })), "Object", A)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = void 0,
      a = void 0;
    void 0 !== document.hidden ? (r = "hidden", a = "visibilitychange") : void 0 !==
      document.msHidden ? (r = "msHidden", a = "msvisibilitychange") : void 0 !== document
      .webkitHidden && (r = "webkitHidden", a = "webkitvisibilitychange");
    t.registerVisibleChangeHandler = function (e, t) {
      function n() {
        document[r] ? t() : e()
      }
      return document.addEventListener(a, n, !1),
        function () {
          document.removeEventListener(a, n)
        }
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(243),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r, a = n(268),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    var A = {
      mouse: (0, i.default)("mouse"),
      h5: (0, i.default)("h5"),
      package: (0, i.default)("package"),
      shape: (0, i.default)("shape"),
      user: (0, i.default)("user"),
      command: (0, i.default)("command"),
      image: function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
          n = new Image;
        n.onload = function () {
          var r = ["font-size: 14px;", "padding: " + n.height / 2 + "px " + n
            .width / 2 + "px;", "background: url(" + e + ") no-repeat;",
            "background-size: contain;"
          ].join(" ");
          console.log(t + "%c ", r)
        }, n.src = e
      },
      m: {
        adapter: (0, i.default)("adapter"),
        worker: (0, i.default)("worker"),
        containermanager: (0, i.default)("containermanager"),
        shapemanager: (0, i.default)("shapemanager"),
        usermanager: (0, i.default)("usermanager"),
        syncmanager: (0, i.default)("syncmanager")
      },
      log: console.log.bind(console),
      warn: console.warn.bind(console),
      error: console.error.bind(console)
    };
    t.default = A
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.DPI = void 0;
    var r = d(n(5)),
      a = d(n(108)),
      i = d(n(36)),
      A = d(n(16)),
      o = d(n(7)),
      s = d(n(0)),
      u = d(n(1)),
      l = n(153),
      c = n(278);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = t.DPI = window.devicePixelRatio || 1,
      p = 0,
      f = void 0,
      g = function () {
        function e(n) {
          var u = this;
          (0, s.default)(this, e), this.elInitW = 1920, this.elInitH = 1080, this
            .mounted = !1, this.interactionEnabled = !0, this.streamFixedWidth = 0, this
            .isLandscape = !1, this.elesToResize = [], this.top = 0, this.left = 0, this
            .isTouching = !1, this.focus = !1, this.keyPressed = {}, this.maybeClick = !1,
            this.mouseEventCache = [], this.isMouseDown = !1, this.isMouseMoved = !1, this
            .sx = 0, this.sy = 0, this.scx = 0, this.scy = 0, this.lastMx = 0, this
            .lastMy = 0, this.lastClientX = 0, this.lastClientY = 0, this.mouseSpeed = 0,
            this.lastMouseT = 0, this.lastTPos = [], this.lastSingleTPos = [], this
            .histScaleP = .5, this.currTC = 0, this.inPan = !1, this.lastClickAt = {
              x: 0,
              y: 0,
              t: 0
            }, this.onDPIChange = function () {
              t.DPI = h = window.devicePixelRatio, u.app.room.refresh()
            }, this._delayedResize = function () {
              f || (clearTimeout(f), f = setTimeout((function () {
                u._resize(!0), f = null
              }), 30))
            }, this._resize = function (e) {
              var t;
              if (u.el) {
                var n = u.el.getBoundingClientRect();
                u.containerRect = n, u.app.ifDeviceSupportOrientation && (u.isLandscape =
                  n.width > n.height);
                var r = !0,
                  a = !1,
                  i = void 0;
                try {
                  for (var A, s = (0, o.default)(u.elesToResize); !(r = (A = s.next())
                      .done); r = !0) {
                    var l = A.value;
                    if (l.style.width = (0, c.evenify)(n.width) + "px", l.style.height = (
                        0, c.evenify)(n.height) + "px", u.streamFixedWidth > 0 && l === u
                      .streamCanvas) {
                      var d = (0, c.evenify)(u.streamFixedWidth),
                        p = (0, c.evenify)(d * n.height / n.width);
                      l.width === d && l.height === p || (l.width = (0, c.evenify)(u
                        .streamFixedWidth), l.height = (0, c.evenify)(l.width * n
                        .height / n.width))
                    } else if (l instanceof HTMLCanvasElement)
                      if (l !== u.streamCanvas || u.keepStreamDPI) {
                        var f = (0, c.evenify)(n.width * h),
                          g = (0, c.evenify)(n.height * h);
                        l.width === f && l.height === g || (l.width = (0, c.evenify)(n
                          .width * h), l.height = (0, c.evenify)(n.height * h))
                      } else {
                        var y = (0, c.evenify)(n.width),
                          v = (0, c.evenify)(n.height);
                        l.width === y && l.height === v || (l.width = (0, c.evenify)(n
                          .width), l.height = (0, c.evenify)(n.height))
                      }
                  }
                } catch (e) {
                  a = !0, i = e
                } finally {
                  try {
                    !r && s.return && s.return()
                  } finally {
                    if (a) throw i
                  }
                }
                u.top = n.top, u.left = n.left, u.setElePosition(u.h5El, "fixed"), u
                  .setElePosition(u.domEl, "fixed"), u.ctx.lineCap = "round", u.ctx
                  .lineJoin = "round", u.frontCtx.lineCap = "round", u.frontCtx.lineJoin =
                  "round", u.localCtx.lineCap = "round", u.localCtx.lineJoin = "round", u
                  .laserCtx.lineCap = "round", u.laserCtx.lineJoin = "round", u
                  .streamCtx && (u.streamCtx.lineCap = "round", u.streamCtx.lineJoin =
                    "round"), e && (null === (t = u.opsManager) || void 0 === t || t
                    .resize(e, n.width, n.height)), u.streamCanvas && u.dispatcher.emit(
                    "event:appState:change", "streamSize", {
                      width: u.streamCanvas.width,
                      height: u.streamCanvas.height
                    }), u.dispatcher.emit("container:resize"), u.app.room.refresh()
              }
            }, this.unbindEvents = function () {
              var e;
              window.ResizeObserver && (null === (e = u._ro) || void 0 === e || e
                  .disconnect()), window.removeEventListener("resize", u._delayedResize),
                window.removeEventListener("orientationchange", u._delayedResize), window
                .removeEventListener("mousewheel", u._mousewheel, {
                  capture: !1
                }), window.removeEventListener("wheel", u._mousewheel, {
                  capture: !1
                }), document.removeEventListener("gesturestart", u._zoom), document
                .removeEventListener("gesturechange", u._zoom), document
                .removeEventListener("gestureend", u._zoom), (0, l.off)(u.el, "mousedown",
                  u.mousedown), (0, l.off)(u.el, "mouseleave", u._mouseleave), (0, l.off)(
                  u.el, "focus", u.elFocus), (0, l.off)(u.el, "blur", u.elBlur), (0, l
                  .off)(window.document, "mousemove", u.mousemove), (0, l.off)(window
                  .document, "mouseup", u.mouseup, !0), (0, l.off)(u.el, "touchstart", u
                  ._touchdown), (0, l.off)(u.el, "touchmove", u._touchmove), (0, l.off)(u
                  .el, "touchend", u._touchup), (0, l.off)(window.document, "keyup", u
                  ._keyup), (0, l.off)(window.document, "keydown", u._keydown), (0, l.off)
                (u.el, "contextmenu", u._contextmenu), (0, l.off)(u.el, "pointerdown", u
                  .pointerdown), (0, l.off)(u.el, "pointermove", u.pointermove), (0, l
                  .off)(u.el, "pointerup", u.pointerup), window.removeEventListener(
                  "copy", u._copy), window.removeEventListener("paste", u._paste)
            }, this.getEventTarget = function (e) {
              return e.touches && e.touches.length > 0 ? e.touches[0].target : e.target
            }, this.getEventClientPos = function (e) {
              var t = void 0,
                n = void 0;
              return e.touches && e.touches.length > 0 ? (t = e.touches[0].clientX, n = e
                  .touches[0].clientY) : (t = e.clientX, n = e.clientY), t -= u.left, n -=
                u.top, [].concat((0, A.default)(u.app.camera.convertToPointInWorld(t, n)),
                  [t, n])
            }, this.getTouchEventClientPos = function (e) {
              for (var t = [], n = 0; n < e.touches.length; n++) t.push(e.touches[n]
                .clientX), t.push(e.touches[n].clientY);
              return t
            }, this._copy = function (e) {
              u.focus && u.app.opsManager.dupOp.copy(e)
            }, this._paste = function (e) {
              u.focus && u.app.opsManager.dupOp.paste({
                event: e,
                fromWb: !1,
                mx: u.lastMx,
                my: u.lastMy
              })
            }, this._contextmenu = function (e) {
              e.preventDefault()
            }, this._touchdown = function (e) {
              clearTimeout(u.untouchT), u.isTouching = !0, u.mouseEmitTimer =
                clearTimeout(u.mouseEmitTimer), u.mouseEventCache = [];
              var t = e.touches.length;
              u.inPan = !1, u.currTC = t, u.lastAction = void 0, u.histScaleP = .5, 1 ===
                t ? u.mousedown(e, !1, !0) : (u.mouseup(e), 2 === t && (u.lastTPos = u
                  .getTouchEventClientPos(e)))
            }, this.elFocus = function () {
              u.focus = !0, u.keyPressed = {}
            }, this.elBlur = function () {
              u.focus = !1, u.keyPressed = {}
            }, this._touchmove = function (e) {
              var t, n, r, a, i;
              e.preventDefault();
              var A = e.touches.length;
              if (1 === A && u.inPan) {
                var o = u.getTouchEventClientPos(e);
                u.lastSingleTPos.length > 0 && (null === (t = u.opsManager) || void 0 ===
                    t || t.pan(e, o[0] - u.lastSingleTPos[0], o[1] - u.lastSingleTPos[1])
                    ), u.lastSingleTPos = o
              } else if (1 === A) u.mousemove(e);
              else if (2 === A) {
                var s = u.getTouchEventClientPos(e),
                  l = (0, c.deltaXY)(u.lastTPos, s),
                  d = (0, c.pinchScale)(u.lastTPos, s),
                  h = (0, c.fingerDiff)(u.lastTPos, s);
                u.lastTPos = s;
                var p = Math.abs(l[0]) / 2 + Math.abs(l[1]) / 2,
                  f = Math.abs(1 - d),
                  g = (0, c.scaleProb)(h, p, f);
                g + u.histScaleP < .75 && p > .5 ? (null === (n = u.opsManager) ||
                    void 0 === n || n.pan(e, l[0], l[1]), u.lastAction = "pan") : g + u
                  .histScaleP >= 1.25 && f > .007 ? (d = Math.max(Math.min(d, 1.2), .8),
                    null === (r = u.opsManager) || void 0 === r || r.scale(e, d, s[0] /
                      2 + s[2] / 2, s[1] / 2 + s[3] / 2), u.lastAction = "scale") :
                  "pan" === u.lastAction ? null === (a = u.opsManager) || void 0 === a ||
                  a.pan(e, l[0], l[1]) : "move" === u.lastAction && (null === (i = u
                    .opsManager) || void 0 === i || i.scale(e, d, s[0] / 2 + s[2] / 2,
                    s[1] / 2 + s[3] / 2)), u.histScaleP = .8 * u.histScaleP + .2 * g
              }
            }, this._touchup = function (e) {
              u.untouchT = setTimeout((function () {
                u.isTouching = !1
              }), 500);
              var t = e.touches.length;
              u.lastSingleTPos = [], 0 === t ? (u.mouseup(e, !1, !0), u.inPan = !1) :
                1 === t && u.currTC > 1 ? u.inPan = !0 : u.inPan = !1, u.currTC = t
            }, this.mousedown = function (e) {
              var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
              if ((!u.isTouching || n) && (u.interactionEnabled || t) && !u.isMouseDown) {
                u.isMouseMoved = !1, u.app.emit("event:mousedown", n, u.getEventTarget(
                e));
                var r = u.getEventClientPos(e),
                  a = (0, i.default)(r, 4),
                  A = a[0],
                  o = a[1],
                  s = a[2],
                  l = a[3];
                u.lastMx = A, u.lastMy = o, u.lastClientX = s, u.lastClientY = l, u
                  .isMouseDown = !0, u.maybeClick = !0, u.sx = A, u.sy = o, u.scx = s, u
                  .scy = l, u.mouseEventCache.push({
                    type: "mousedown",
                    args: [e, u.sx, u.sy, s, l]
                  }), u.mouseEmitTimer = setTimeout((function () {
                    u.maybeClick = !1, u._emitMouseEvents()
                  }), 150)
              }
            }, this.mousemove = function (e) {
              var t, n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
              if (u.interactionEnabled || n) {
                var r = u.getEventClientPos(e),
                  a = (0, i.default)(r, 4),
                  A = a[0],
                  o = a[1],
                  s = a[2],
                  l = a[3];
                if (u.lastMx = A, u.lastMy = o, u.lastClientX > 0) {
                  var c = Date.now(),
                    d = c - u.lastMouseT,
                    h = u.lastClientX - s,
                    p = u.lastClientY - l,
                    f = Math.abs(Math.round(h / d * 100)),
                    g = Math.abs(Math.round(p / d * 100));
                  u.lastMouseT = c, u.mouseSpeed = f + g
                }
                u.lastClientX = s, u.lastClientY = l, u.isMouseMoved = !0, u
                  .maybeClick = !1, u.mouseEmitTimer && (u.mouseEmitTimer = clearTimeout(u
                    .mouseEmitTimer), u._emitMouseEvents()), null === (t = u
                  .opsManager) || void 0 === t || t.mousemove(e, A, o, s, l)
              }
            }, this.mouseup = function (e) {
              var t, n, r, a = arguments.length > 1 && void 0 !== arguments[1] &&
                arguments[1],
                i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
              if ((!u.isTouching || i) && (u.interactionEnabled || a) && u.isMouseDown) {
                u.app.emit("event:mouseup");
                var A = [u.lastMx, u.lastMy, u.lastClientX, u.lastClientY],
                  o = A[0],
                  s = A[1],
                  l = A[2],
                  c = A[3];
                if (u.maybeClick) {
                  u.mouseEmitTimer = clearTimeout(u.mouseEmitTimer), u
                    .mouseEventCache = [], u.maybeClick = !1, null === (n = u
                    .opsManager) || void 0 === n || n.click(e, o, s, l, c);
                  var d = Date.now(),
                    h = !1;
                  (i && Math.abs(l - u.lastClickAt.x) < 50 && Math.abs(c - u.lastClickAt
                      .y) < 50 && d - u.lastClickAt.t < 250 || !i && Math.abs(l - u
                      .lastClickAt.x) < 2 && Math.abs(c - u.lastClickAt.y) < 2 && d - u
                    .lastClickAt.t < 250) && (h = !0), h ? (null === (r = u.opsManager) ||
                    void 0 === r || r.dblClick(e, o, s, l, c), u.app.emit(
                      "event:dblClick"), u.lastClickAt.t = 0) : (u.lastClickAt.x = l, u
                    .lastClickAt.y = c, u.lastClickAt.t = d)
                } else u.mouseEmitTimer && (u.mouseEmitTimer = clearTimeout(u
                    .mouseEmitTimer), u._emitMouseEvents()), u.mouseEventCache = [],
                  null === (t = u.opsManager) || void 0 === t || t.mouseup(e, o, s, l, c);
                u.isMouseDown = !1
              }
            }, this._mouseleave = function (e) {
              var t, n = u.getEventClientPos(e),
                r = (0, i.default)(n, 4),
                a = r[0],
                A = r[1],
                o = r[2],
                s = r[3];
              null === (t = u.opsManager) || void 0 === t || t.mouseleave(e, a, A, o, s)
            }, this._zoom = function (e) {
              var t;
              if (u.isTargetOnContainer(e.target)) {
                var n = u.getEventClientPos(e),
                  r = (0, i.default)(n, 4),
                  a = r[0],
                  A = r[1],
                  o = r[2],
                  s = r[3];
                return null === (t = u.opsManager) || void 0 === t || t.mousewheel(e, a,
                  A, o, s), e.preventDefault()
              }
            }, this._mousewheel = function (e) {
              var t, n;
              if (u.isTargetOnContainer(e.target)) {
                var r = navigator.platform.toUpperCase().indexOf("MAC") >= 0,
                  A = navigator.userAgent.toUpperCase().indexOf("FIREFOX") >= 0;
                if (r && !A && (0, a.default)(e.deltaX) && (0, a.default)(e.deltaY)) {
                  if ((p += 1) > 2) {
                    var o = Math.max(Math.abs(e.deltaX), Math.abs(e.deltaY)) / 50,
                      s = 1.5 * e.deltaX,
                      l = 1.5 * e.deltaY;
                    o > 1 && (s /= o, l /= o), null === (t = u.opsManager) || void 0 ===
                      t || t.pan(e, -s, -l)
                  }
                } else {
                  var c = u.getEventClientPos(e),
                    d = (0, i.default)(c, 4),
                    h = d[0],
                    f = d[1],
                    g = d[2],
                    y = d[3];
                  null === (n = u.opsManager) || void 0 === n || n.mousewheel(e, h, f, g,
                    y), p = 0
                }
                e.preventDefault()
              }
            }, this.pointerdown = function (e) {
              var t;
              null === (t = u.opsManager) || void 0 === t || t.pointerdown(e)
            }, this.pointermove = function (e) {
              var t;
              null === (t = u.opsManager) || void 0 === t || t.pointermove(e)
            }, this.pointerup = function (e) {
              var t;
              null === (t = u.opsManager) || void 0 === t || t.pointerup(e)
            }, this._keyup = function (e) {
              var t;
              if (e && e.key && u.focus) {
                var n = e.key.toLocaleLowerCase();
                null === (t = u.opsManager) || void 0 === t || t.keyup(e), u.keyPressed[
                  n] = !1
              }
            }, this._keydown = function (e) {
              var t;
              if (e && e.key && u.focus) {
                var n = e.key.toLocaleLowerCase();
                u.keyPressed[n] = !0, null === (t = u.opsManager) || void 0 === t || t
                  .keydown(e)
              }
            }, this.isCtrlPressed = function () {
              return u.isKeyDown("control") || u.isKeyDown("meta")
            }, this.app = n, this.dispatcher = n.dispatcher, this.el = document
            .createElement("div"), (0, r.default)(this.el.style, {
              userSelect: "none",
              webkitUserSelect: "none",
              position: "relative",
              width: "100%",
              height: "100%",
              outline: "none"
            }), this.el.id = "yunxin-whiteboard", this.el.tabIndex = 0, this
            .setBackgroundColor();
          var d = this.setupCanvasElement("bg-canvas");
          if (this.bgCanvas = d.canvas, this.bgCtx = d.ctx, this.h5El = this
            .setupDivElement("h5-el", !1), this.bottomEl = this.setupDivElement(
              "bottom-el"), d = this.setupCanvasElement("anchor-canvas"), this.canvas = d
            .canvas, this.canvas.style["-webkit-font-smoothing"] = "antialiased", this
            .ctx = d.ctx, d = this.setupCanvasElement("inc-canvas"), this.frontCanvas = d
            .canvas, this.frontCtx = d.ctx, d = this.setupCanvasElement("local-canvas"),
            this.localCanvas = d.canvas, this.localCtx = d.ctx, this.domEl = this
            .setupDivElement("dom-el"), this.topEl = this.setupDivElement("top-el"), d =
            this.setupCanvasElement("laser-canvas"), this.laserCanvas = d.canvas, this
            .laserCtx = d.ctx, "function" == typeof matchMedia) {
            var g = matchMedia("(resolution: " + window.devicePixelRatio + "dppx)");
            "function" == typeof g.addEventListener ? g.addEventListener("change", this
              .onDPIChange, {
                once: !0
              }) : "function" == typeof g.addListener && g.addListener(this.onDPIChange)
          }
        }
        return (0, u.default)(e, [{
          key: "disableInteraction",
          value: function () {
            this.interactionEnabled = !1
          }
        }, {
          key: "enableInteraction",
          value: function () {
            this.interactionEnabled = !0
          }
        }, {
          key: "setBackgroundColor",
          value: function () {
            this.el.style.backgroundColor = this.app.appConfig.canvasBgColor
          }
        }, {
          key: "getStream",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {},
              t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[
                1],
              n = this.el.getBoundingClientRect(),
              r = e.frameRate;
            this.streamFixedWidth = e.width ? e.width : 0;
            var a = !e.hasOwnProperty("keepDPI") || e.keepDPI;
            this.keepStreamDPI = a;
            var i = e.width ? e.width : a ? n.width * h : n.width,
              A = i * n.height / n.width;
            if (i = (0, c.evenify)(i), A = (0, c.evenify)(A), !this
              .streamCanvas) {
              var o = this.setupCanvasElement("stream-canvas");
              this.streamCanvas = o.canvas, this.streamCanvas.style.visibility =
                "hidden", this.streamCtx = o.ctx
            }
            return this.streamCanvas.width = i, this.streamCanvas.height = A, this
              .streamCanvas.style.width = n.width + "px", this.streamCanvas.style
              .height = n.height + "px", this.streamCtx && (this.streamCtx
                .lineCap = "round", this.streamCtx.lineJoin = "round"), this
              .streamCanvas && this.dispatcher.emit("event:appState:change",
                "streamSize", {
                  width: this.streamCanvas.width,
                  height: this.streamCanvas.height
                }), t || !this.stream ? (this.stopStream(), this.stream = this
                .streamCanvas.captureStream(r), this.stream) : this.stream
          }
        }, {
          key: "stopStream",
          value: function () {
            if (this.stream) {
              var e = this.stream.getTracks(),
                t = !0,
                n = !1,
                r = void 0;
              try {
                for (var a, i = (0, o.default)(e); !(t = (a = i.next())
                  .done); t = !0) {
                  a.value.stop()
                }
              } catch (e) {
                n = !0, r = e
              } finally {
                try {
                  !t && i.return && i.return()
                } finally {
                  if (n) throw r
                }
              }
              this.stream = void 0
            }
          }
        }, {
          key: "appendTo",
          value: function (e) {
            this.mounted = !0, e.style.overflow = "hidden", e.appendChild(this
              .el), this._resize(), this._bindEvents(e)
          }
        }, {
          key: "addOpsManager",
          value: function (e) {
            this.opsManager = e
          }
        }, {
          key: "isKeyDown",
          value: function (e) {
            return this.keyPressed.hasOwnProperty(e) && this.keyPressed[e]
          }
        }, {
          key: "resize",
          value: function () {
            this._resize()
          }
        }, {
          key: "isTargetOnContainer",
          value: function (e) {
            for (; e;) {
              if (e === this.el) return !0;
              e = e.parentNode
            }
            return !1
          }
        }, {
          key: "setupDivElement",
          value: function (e) {
            var t = !(arguments.length > 1 && void 0 !== arguments[1]) ||
              arguments[1],
              n = document.createElement("div");
            return t && (n.style.pointerEvents = "none"), n.style
              .transformOrigin = "left top", n.className = e, this.el.appendChild(
                n), n
          }
        }, {
          key: "setupCanvasElement",
          value: function (e) {
            var t = document.createElement("canvas");
            this.setElePosition(t), t.className = e, t.style.imageRendering =
              "pixelated", t.style.pointerEvents = "none";
            var n = t.getContext("2d");
            return this.el.appendChild(t), this.elesToResize.push(t), {
              canvas: t,
              ctx: n
            }
          }
        }, {
          key: "_bindEvents",
          value: function (e) {
            var t, n = this;
            this.unbindEvents(), window.ResizeObserver && (this._ro = new window
                .ResizeObserver((function (e, t) {
                  n._delayedResize()
                })), null === (t = this._ro) || void 0 === t || t.observe(e)),
              window.addEventListener("resize", this._delayedResize), window
              .addEventListener("orientationchange", this._delayedResize), (0, l
                .on)(this.el, "mousedown", this.mousedown), (0, l.on)(this.el,
                "mouseleave", this._mouseleave), (0, l.on)(this.el, "focus", this
                .elFocus), (0, l.on)(this.el, "blur", this.elBlur), (0, l.on)(
                window.document, "mousemove", this.mousemove), (0, l.on)(window
                .document, "mouseup", this.mouseup, !0), window.addEventListener(
                "wheel", this._mousewheel, {
                  passive: !1,
                  capture: !1
                }), window.addEventListener("mousewheel", this._mousewheel, {
                passive: !1,
                capture: !1
              }), document.addEventListener("gesturestart", this._zoom), document
              .addEventListener("gesturechange", this._zoom), document
              .addEventListener("gestureend", this._zoom), (0, l.on)(this.el,
                "touchstart", this._touchdown), (0, l.on)(this.el, "touchmove",
                this._touchmove), (0, l.on)(this.el, "touchend", this._touchup), (
                0, l.on)(window.document, "keyup", this._keyup), (0, l.on)(window
                .document, "keydown", this._keydown), (0, l.on)(this.el,
                "contextmenu", this._contextmenu), (0, l.on)(this.el,
                "pointerdown", this.pointerdown), (0, l.on)(this.el,
                "pointermove", this.pointermove), (0, l.on)(this.el, "pointerup",
                this.pointerup), window.addEventListener("copy", this._copy),
              window.addEventListener("paste", this._paste)
          }
        }, {
          key: "destroy",
          value: function () {
            this.unbindEvents(), this.stopStream(), this.el && (this.el
              .innerHTML = "")
          }
        }, {
          key: "setElePosition",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : "absolute";
            "absolute" === t ? (e.style.position = t, e.style.left = "0px", e
                .style.right = "0px", e.style.top = "0px", e.style.bottom = "0px"
                ) : (e.style.position = "fixed", e.style.left = this.left + "px",
                e.style.width = this.width + "px", e.style.top = this.top + "px",
                e.style.height = this.height + "px")
          }
        }, {
          key: "_emitMouseEvents",
          value: function () {
            var e = !0,
              t = !1,
              n = void 0;
            try {
              for (var r, a = (0, o.default)(this.mouseEventCache); !(e = (r = a
                  .next()).done); e = !0) {
                var i, s = r.value;
                (i = this.opsManager)[s.type].apply(i, (0, A.default)(s.args))
              }
            } catch (e) {
              t = !0, n = e
            } finally {
              try {
                !e && a.return && a.return()
              } finally {
                if (t) throw n
              }
            }
            this.mouseEventCache = []
          }
        }, {
          key: "width",
          get: function () {
            var e = this.canvas.width;
            return this.containerRect && (e = this.containerRect.width), e
          }
        }, {
          key: "height",
          get: function () {
            var e = this.canvas.height;
            return this.containerRect && (e = this.containerRect.height), e
          }
        }]), e
      }();
    t.default = g
  }, function (e, t, n) {
    e.exports = {
      default: n(383),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    var r;
    n.r(t), n.d(t, "v1", (function () {
      return f
    })), n.d(t, "v3", (function () {
      return x
    })), n.d(t, "v4", (function () {
      return b
    })), n.d(t, "v5", (function () {
      return E
    })), n.d(t, "NIL", (function () {
      return D
    })), n.d(t, "version", (function () {
      return N
    })), n.d(t, "validate", (function () {
      return o
    })), n.d(t, "stringify", (function () {
      return d
    })), n.d(t, "parse", (function () {
      return g
    }));
    var a = new Uint8Array(16);

    function i() {
      if (!r && !(r = "undefined" != typeof crypto && crypto.getRandomValues && crypto
          .getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" ==
          typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto)))
        throw new Error(
          "crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported"
          );
      return r(a)
    }
    var A =
      /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
    for (var o = function (e) {
        return "string" == typeof e && A.test(e)
      }, s = [], u = 0; u < 256; ++u) s.push((u + 256).toString(16).substr(1));
    var l, c, d = function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          n = (s[e[t + 0]] + s[e[t + 1]] + s[e[t + 2]] + s[e[t + 3]] + "-" + s[e[t + 4]] +
            s[e[t + 5]] + "-" + s[e[t + 6]] + s[e[t + 7]] + "-" + s[e[t + 8]] + s[e[t +
              9]] + "-" + s[e[t + 10]] + s[e[t + 11]] + s[e[t + 12]] + s[e[t + 13]] + s[e[
              t + 14]] + s[e[t + 15]]).toLowerCase();
        if (!o(n)) throw TypeError("Stringified UUID is invalid");
        return n
      },
      h = 0,
      p = 0;
    var f = function (e, t, n) {
      var r = t && n || 0,
        a = t || new Array(16),
        A = (e = e || {}).node || l,
        o = void 0 !== e.clockseq ? e.clockseq : c;
      if (null == A || null == o) {
        var s = e.random || (e.rng || i)();
        null == A && (A = l = [1 | s[0], s[1], s[2], s[3], s[4], s[5]]), null == o && (
          o = c = 16383 & (s[6] << 8 | s[7]))
      }
      var u = void 0 !== e.msecs ? e.msecs : Date.now(),
        f = void 0 !== e.nsecs ? e.nsecs : p + 1,
        g = u - h + (f - p) / 1e4;
      if (g < 0 && void 0 === e.clockseq && (o = o + 1 & 16383), (g < 0 || u > h) &&
        void 0 === e.nsecs && (f = 0), f >= 1e4) throw new Error(
        "uuid.v1(): Can't create more than 10M uuids/sec");
      h = u, p = f, c = o;
      var y = (1e4 * (268435455 & (u += 122192928e5)) + f) % 4294967296;
      a[r++] = y >>> 24 & 255, a[r++] = y >>> 16 & 255, a[r++] = y >>> 8 & 255, a[r++] =
        255 & y;
      var v = u / 4294967296 * 1e4 & 268435455;
      a[r++] = v >>> 8 & 255, a[r++] = 255 & v, a[r++] = v >>> 24 & 15 | 16, a[r++] =
        v >>> 16 & 255, a[r++] = o >>> 8 | 128, a[r++] = 255 & o;
      for (var m = 0; m < 6; ++m) a[r + m] = A[m];
      return t || d(a)
    };
    var g = function (e) {
      if (!o(e)) throw TypeError("Invalid UUID");
      var t, n = new Uint8Array(16);
      return n[0] = (t = parseInt(e.slice(0, 8), 16)) >>> 24, n[1] = t >>> 16 & 255, n[
          2] = t >>> 8 & 255, n[3] = 255 & t, n[4] = (t = parseInt(e.slice(9, 13),
        16)) >>> 8, n[5] = 255 & t, n[6] = (t = parseInt(e.slice(14, 18), 16)) >>> 8, n[
          7] = 255 & t, n[8] = (t = parseInt(e.slice(19, 23), 16)) >>> 8, n[9] = 255 &
        t, n[10] = (t = parseInt(e.slice(24, 36), 16)) / 1099511627776 & 255, n[11] =
        t / 4294967296 & 255, n[12] = t >>> 24 & 255, n[13] = t >>> 16 & 255, n[14] =
        t >>> 8 & 255, n[15] = 255 & t, n
    };
    var y = function (e, t, n) {
      function r(e, r, a, i) {
        if ("string" == typeof e && (e = function (e) {
            e = unescape(encodeURIComponent(e));
            for (var t = [], n = 0; n < e.length; ++n) t.push(e.charCodeAt(n));
            return t
          }(e)), "string" == typeof r && (r = g(r)), 16 !== r.length) throw TypeError(
          "Namespace must be array-like (16 iterable integer values, 0-255)");
        var A = new Uint8Array(16 + e.length);
        if (A.set(r), A.set(e, r.length), (A = n(A))[6] = 15 & A[6] | t, A[8] = 63 & A[
            8] | 128, a) {
          i = i || 0;
          for (var o = 0; o < 16; ++o) a[i + o] = A[o];
          return a
        }
        return d(A)
      }
      try {
        r.name = e
      } catch (e) {}
      return r.DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8", r.URL =
        "6ba7b811-9dad-11d1-80b4-00c04fd430c8", r
    };

    function v(e) {
      return 14 + (e + 64 >>> 9 << 4) + 1
    }

    function m(e, t) {
      var n = (65535 & e) + (65535 & t);
      return (e >> 16) + (t >> 16) + (n >> 16) << 16 | 65535 & n
    }

    function w(e, t, n, r, a, i) {
      return m((A = m(m(t, e), m(r, i))) << (o = a) | A >>> 32 - o, n);
      var A, o
    }

    function B(e, t, n, r, a, i, A) {
      return w(t & n | ~t & r, e, t, a, i, A)
    }

    function M(e, t, n, r, a, i, A) {
      return w(t & r | n & ~r, e, t, a, i, A)
    }

    function C(e, t, n, r, a, i, A) {
      return w(t ^ n ^ r, e, t, a, i, A)
    }

    function I(e, t, n, r, a, i, A) {
      return w(n ^ (t | ~r), e, t, a, i, A)
    }
    var x = y("v3", 48, (function (e) {
      if ("string" == typeof e) {
        var t = unescape(encodeURIComponent(e));
        e = new Uint8Array(t.length);
        for (var n = 0; n < t.length; ++n) e[n] = t.charCodeAt(n)
      }
      return function (e) {
        for (var t = [], n = 32 * e.length, r = 0; r < n; r += 8) {
          var a = e[r >> 5] >>> r % 32 & 255,
            i = parseInt("0123456789abcdef".charAt(a >>> 4 & 15) +
              "0123456789abcdef".charAt(15 & a), 16);
          t.push(i)
        }
        return t
      }(function (e, t) {
        e[t >> 5] |= 128 << t % 32, e[v(t) - 1] = t;
        for (var n = 1732584193, r = -271733879, a = -1732584194, i = 271733878,
            A = 0; A < e.length; A += 16) {
          var o = n,
            s = r,
            u = a,
            l = i;
          n = B(n, r, a, i, e[A], 7, -680876936), i = B(i, n, r, a, e[A + 1],
              12, -389564586), a = B(a, i, n, r, e[A + 2], 17, 606105819), r =
            B(r, a, i, n, e[A + 3], 22, -1044525330), n = B(n, r, a, i, e[A +
              4], 7, -176418897), i = B(i, n, r, a, e[A + 5], 12, 1200080426),
            a = B(a, i, n, r, e[A + 6], 17, -1473231341), r = B(r, a, i, n, e[
              A + 7], 22, -45705983), n = B(n, r, a, i, e[A + 8], 7,
            1770035416), i = B(i, n, r, a, e[A + 9], 12, -1958414417), a = B(a,
              i, n, r, e[A + 10], 17, -42063), r = B(r, a, i, n, e[A + 11], 22,
              -1990404162), n = B(n, r, a, i, e[A + 12], 7, 1804603682), i = B(
              i, n, r, a, e[A + 13], 12, -40341101), a = B(a, i, n, r, e[A +
              14], 17, -1502002290), r = B(r, a, i, n, e[A + 15], 22,
              1236535329), n = M(n, r, a, i, e[A + 1], 5, -165796510), i = M(i,
              n, r, a, e[A + 6], 9, -1069501632), a = M(a, i, n, r, e[A + 11],
              14, 643717713), r = M(r, a, i, n, e[A], 20, -373897302), n = M(n,
              r, a, i, e[A + 5], 5, -701558691), i = M(i, n, r, a, e[A + 10], 9,
              38016083), a = M(a, i, n, r, e[A + 15], 14, -660478335), r = M(r,
              a, i, n, e[A + 4], 20, -405537848), n = M(n, r, a, i, e[A + 9], 5,
              568446438), i = M(i, n, r, a, e[A + 14], 9, -1019803690), a = M(a,
              i, n, r, e[A + 3], 14, -187363961), r = M(r, a, i, n, e[A + 8],
              20, 1163531501), n = M(n, r, a, i, e[A + 13], 5, -1444681467), i =
            M(i, n, r, a, e[A + 2], 9, -51403784), a = M(a, i, n, r, e[A + 7],
              14, 1735328473), r = M(r, a, i, n, e[A + 12], 20, -1926607734),
            n = C(n, r, a, i, e[A + 5], 4, -378558), i = C(i, n, r, a, e[A + 8],
              11, -2022574463), a = C(a, i, n, r, e[A + 11], 16, 1839030562),
            r = C(r, a, i, n, e[A + 14], 23, -35309556), n = C(n, r, a, i, e[A +
              1], 4, -1530992060), i = C(i, n, r, a, e[A + 4], 11, 1272893353),
            a = C(a, i, n, r, e[A + 7], 16, -155497632), r = C(r, a, i, n, e[A +
              10], 23, -1094730640), n = C(n, r, a, i, e[A + 13], 4, 681279174),
            i = C(i, n, r, a, e[A], 11, -358537222), a = C(a, i, n, r, e[A + 3],
              16, -722521979), r = C(r, a, i, n, e[A + 6], 23, 76029189), n = C(
              n, r, a, i, e[A + 9], 4, -640364487), i = C(i, n, r, a, e[A + 12],
              11, -421815835), a = C(a, i, n, r, e[A + 15], 16, 530742520), r =
            C(r, a, i, n, e[A + 2], 23, -995338651), n = I(n, r, a, i, e[A], 6,
              -198630844), i = I(i, n, r, a, e[A + 7], 10, 1126891415), a = I(a,
              i, n, r, e[A + 14], 15, -1416354905), r = I(r, a, i, n, e[A + 5],
              21, -57434055), n = I(n, r, a, i, e[A + 12], 6, 1700485571), i =
            I(i, n, r, a, e[A + 3], 10, -1894986606), a = I(a, i, n, r, e[A +
              10], 15, -1051523), r = I(r, a, i, n, e[A + 1], 21, -2054922799),
            n = I(n, r, a, i, e[A + 8], 6, 1873313359), i = I(i, n, r, a, e[A +
              15], 10, -30611744), a = I(a, i, n, r, e[A + 6], 15, -1560198380),
            r = I(r, a, i, n, e[A + 13], 21, 1309151649), n = I(n, r, a, i, e[
              A + 4], 6, -145523070), i = I(i, n, r, a, e[A + 11], 10, -
              1120210379), a = I(a, i, n, r, e[A + 2], 15, 718787259), r = I(r,
              a, i, n, e[A + 9], 21, -343485551), n = m(n, o), r = m(r, s), a =
            m(a, u), i = m(i, l)
        }
        return [n, r, a, i]
      }(function (e) {
        if (0 === e.length) return [];
        for (var t = 8 * e.length, n = new Uint32Array(v(t)), r = 0; r <
          t; r += 8) n[r >> 5] |= (255 & e[r / 8]) << r % 32;
        return n
      }(e), 8 * e.length))
    }));
    var b = function (e, t, n) {
      var r = (e = e || {}).random || (e.rng || i)();
      if (r[6] = 15 & r[6] | 64, r[8] = 63 & r[8] | 128, t) {
        n = n || 0;
        for (var a = 0; a < 16; ++a) t[n + a] = r[a];
        return t
      }
      return d(r)
    };

    function k(e, t, n, r) {
      switch (e) {
        case 0:
          return t & n ^ ~t & r;
        case 1:
          return t ^ n ^ r;
        case 2:
          return t & n ^ t & r ^ n & r;
        case 3:
          return t ^ n ^ r
      }
    }

    function T(e, t) {
      return e << t | e >>> 32 - t
    }
    var E = y("v5", 80, (function (e) {
        var t = [1518500249, 1859775393, 2400959708, 3395469782],
          n = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
        if ("string" == typeof e) {
          var r = unescape(encodeURIComponent(e));
          e = [];
          for (var a = 0; a < r.length; ++a) e.push(r.charCodeAt(a))
        } else Array.isArray(e) || (e = Array.prototype.slice.call(e));
        e.push(128);
        for (var i = e.length / 4 + 2, A = Math.ceil(i / 16), o = new Array(A), s =
          0; s < A; ++s) {
          for (var u = new Uint32Array(16), l = 0; l < 16; ++l) u[l] = e[64 * s + 4 *
            l] << 24 | e[64 * s + 4 * l + 1] << 16 | e[64 * s + 4 * l + 2] << 8 | e[
            64 * s + 4 * l + 3];
          o[s] = u
        }
        o[A - 1][14] = 8 * (e.length - 1) / Math.pow(2, 32), o[A - 1][14] = Math
          .floor(o[A - 1][14]), o[A - 1][15] = 8 * (e.length - 1) & 4294967295;
        for (var c = 0; c < A; ++c) {
          for (var d = new Uint32Array(80), h = 0; h < 16; ++h) d[h] = o[c][h];
          for (var p = 16; p < 80; ++p) d[p] = T(d[p - 3] ^ d[p - 8] ^ d[p - 14] ^ d[
            p - 16], 1);
          for (var f = n[0], g = n[1], y = n[2], v = n[3], m = n[4], w = 0; w < 80; ++
            w) {
            var B = Math.floor(w / 20),
              M = T(f, 5) + k(B, g, y, v) + m + t[B] + d[w] >>> 0;
            m = v, v = y, y = T(g, 30) >>> 0, g = f, f = M
          }
          n[0] = n[0] + f >>> 0, n[1] = n[1] + g >>> 0, n[2] = n[2] + y >>> 0, n[3] =
            n[3] + v >>> 0, n[4] = n[4] + m >>> 0
        }
        return [n[0] >> 24 & 255, n[0] >> 16 & 255, n[0] >> 8 & 255, 255 & n[0], n[
          1] >> 24 & 255, n[1] >> 16 & 255, n[1] >> 8 & 255, 255 & n[1], n[2] >>
          24 & 255, n[2] >> 16 & 255, n[2] >> 8 & 255, 255 & n[2], n[3] >> 24 & 255,
          n[3] >> 16 & 255, n[3] >> 8 & 255, 255 & n[3], n[4] >> 24 & 255, n[4] >>
          16 & 255, n[4] >> 8 & 255, 255 & n[4]
        ]
      })),
      D = "00000000-0000-0000-0000-000000000000";
    var N = function (e) {
      if (!o(e)) throw TypeError("Invalid UUID");
      return parseInt(e.substr(14, 1), 16)
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(161),
      __esModule: !0
    }
  }, function (e, t, n) {
    e.exports = !n(24) && !n(38)((function () {
      return 7 != Object.defineProperty(n(76)("div"), "a", {
        get: function () {
          return 7
        }
      }).a
    }))
  }, function (e, t, n) {
    var r = n(43),
      a = n(41),
      i = n(167)(!1),
      A = n(81)("IE_PROTO");
    e.exports = function (e, t) {
      var n, o = a(e),
        s = 0,
        u = [];
      for (n in o) n != A && r(o, n) && u.push(n);
      for (; t.length > s;) r(o, n = t[s++]) && (~i(u, n) || u.push(n));
      return u
    }
  }, function (e, t, n) {
    e.exports = n(37)
  }, function (e, t, n) {
    var r = n(17).document;
    e.exports = r && r.documentElement
  }, function (e, t, n) {
    var r = n(43),
      a = n(44),
      i = n(81)("IE_PROTO"),
      A = Object.prototype;
    e.exports = Object.getPrototypeOf || function (e) {
      return e = a(e), r(e, i) ? e[i] : "function" == typeof e.constructor &&
        e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? A :
        null
    }
  }, function (e, t) {
    e.exports = function (e, t) {
      return {
        value: t,
        done: !!e
      }
    }
  }, function (e, t, n) {
    var r = n(56);
    e.exports = Array.isArray || function (e) {
      return "Array" == r(e)
    }
  }, function (e, t, n) {
    var r = n(110),
      a = n(83).concat("length", "prototype");
    t.f = Object.getOwnPropertyNames || function (e) {
      return r(e, a)
    }
  }, function (e, t, n) {
    var r = n(30);
    e.exports = function (e, t, n, a) {
      try {
        return a ? t(r(n)[0], n[1]) : t(n)
      } catch (t) {
        var i = e.return;
        throw void 0 !== i && r(i.call(e)), t
      }
    }
  }, function (e, t, n) {
    var r = n(50),
      a = n(18)("iterator"),
      i = Array.prototype;
    e.exports = function (e) {
      return void 0 !== e && (r.Array === e || i[a] === e)
    }
  }, function (e, t, n) {
    var r = n(30),
      a = n(54),
      i = n(18)("species");
    e.exports = function (e, t) {
      var n, A = r(e).constructor;
      return void 0 === A || null == (n = r(A)[i]) ? t : a(n)
    }
  }, function (e, t, n) {
    var r, a, i, A = n(34),
      o = n(183),
      s = n(112),
      u = n(76),
      l = n(17),
      c = l.process,
      d = l.setImmediate,
      h = l.clearImmediate,
      p = l.MessageChannel,
      f = l.Dispatch,
      g = 0,
      y = {},
      v = function () {
        var e = +this;
        if (y.hasOwnProperty(e)) {
          var t = y[e];
          delete y[e], t()
        }
      },
      m = function (e) {
        v.call(e.data)
      };
    d && h || (d = function (e) {
        for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
        return y[++g] = function () {
          o("function" == typeof e ? e : Function(e), t)
        }, r(g), g
      }, h = function (e) {
        delete y[e]
      }, "process" == n(56)(c) ? r = function (e) {
        c.nextTick(A(v, e, 1))
      } : f && f.now ? r = function (e) {
        f.now(A(v, e, 1))
      } : p ? (i = (a = new p).port2, a.port1.onmessage = m, r = A(i.postMessage, i,
      1)) : l.addEventListener && "function" == typeof postMessage && !l.importScripts ?
      (r = function (e) {
        l.postMessage(e + "", "*")
      }, l.addEventListener("message", m, !1)) : r = "onreadystatechange" in u(
      "script") ? function (e) {
        s.appendChild(u("script")).onreadystatechange = function () {
          s.removeChild(this), v.call(e)
        }
      } : function (e) {
        setTimeout(A(v, e, 1), 0)
      }), e.exports = {
      set: d,
      clear: h
    }
  }, function (e, t) {
    e.exports = function (e) {
      try {
        return {
          e: !1,
          v: e()
        }
      } catch (e) {
        return {
          e: !0,
          v: e
        }
      }
    }
  }, function (e, t, n) {
    var r = n(30),
      a = n(23),
      i = n(91);
    e.exports = function (e, t) {
      if (r(e), a(t) && t.constructor === e) return t;
      var n = i.f(e);
      return (0, n.resolve)(t), n.promise
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(17),
      a = n(8),
      i = n(27),
      A = n(24),
      o = n(18)("species");
    e.exports = function (e) {
      var t = "function" == typeof a[e] ? a[e] : r[e];
      A && t && !t[o] && i.f(t, o, {
        configurable: !0,
        get: function () {
          return this
        }
      })
    }
  }, function (e, t, n) {
    var r = n(18)("iterator"),
      a = !1;
    try {
      var i = [7][r]();
      i.return = function () {
        a = !0
      }, Array.from(i, (function () {
        throw 2
      }))
    } catch (e) {}
    e.exports = function (e, t) {
      if (!t && !a) return !1;
      var n = !1;
      try {
        var i = [7],
          A = i[r]();
        A.next = function () {
          return {
            done: n = !0
          }
        }, i[r] = function () {
          return A
        }, e(i)
      } catch (e) {}
      return n
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(188),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(27).f,
      a = n(70),
      i = n(92),
      A = n(34),
      o = n(89),
      s = n(59),
      u = n(85),
      l = n(114),
      c = n(123),
      d = n(24),
      h = n(87).fastKey,
      p = n(93),
      f = d ? "_s" : "size",
      g = function (e, t) {
        var n, r = h(t);
        if ("F" !== r) return e._i[r];
        for (n = e._f; n; n = n.n)
          if (n.k == t) return n
      };
    e.exports = {
      getConstructor: function (e, t, n, u) {
        var l = e((function (e, r) {
          o(e, l, t, "_i"), e._t = t, e._i = a(null), e._f = void 0, e._l =
            void 0, e[f] = 0, null != r && s(r, n, e[u], e)
        }));
        return i(l.prototype, {
          clear: function () {
            for (var e = p(this, t), n = e._i, r = e._f; r; r = r.n) r.r = !0, r
              .p && (r.p = r.p.n = void 0), delete n[r.i];
            e._f = e._l = void 0, e[f] = 0
          },
          delete: function (e) {
            var n = p(this, t),
              r = g(n, e);
            if (r) {
              var a = r.n,
                i = r.p;
              delete n._i[r.i], r.r = !0, i && (i.n = a), a && (a.p = i), n
                ._f == r && (n._f = a), n._l == r && (n._l = i), n[f]--
            }
            return !!r
          },
          forEach: function (e) {
            p(this, t);
            for (var n, r = A(e, arguments.length > 1 ? arguments[1] : void 0,
                3); n = n ? n.n : this._f;)
              for (r(n.v, n.k, this); n && n.r;) n = n.p
          },
          has: function (e) {
            return !!g(p(this, t), e)
          }
        }), d && r(l.prototype, "size", {
          get: function () {
            return p(this, t)[f]
          }
        }), l
      },
      def: function (e, t, n) {
        var r, a, i = g(e, t);
        return i ? i.v = n : (e._l = i = {
            i: a = h(t, !0),
            k: t,
            v: n,
            p: r = e._l,
            n: void 0,
            r: !1
          }, e._f || (e._f = i), r && (r.n = i), e[f]++, "F" !== a && (e._i[a] = i)),
          e
      },
      getEntry: g,
      setStrong: function (e, t, n) {
        u(e, t, (function (e, n) {
          this._t = p(e, t), this._k = n, this._l = void 0
        }), (function () {
          for (var e = this._k, t = this._l; t && t.r;) t = t.p;
          return this._t && (this._l = t = t ? t.n : this._t._f) ? l(0,
            "keys" == e ? t.k : "values" == e ? t.v : [t.k, t.v]) : (this._t =
            void 0, l(1))
        }), n ? "entries" : "values", !n, !0), c(t)
      }
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(17),
      a = n(10),
      i = n(87),
      A = n(38),
      o = n(37),
      s = n(92),
      u = n(59),
      l = n(89),
      c = n(23),
      d = n(58),
      h = n(27).f,
      p = n(197)(0),
      f = n(24);
    e.exports = function (e, t, n, g, y, v) {
      var m = r[e],
        w = m,
        B = y ? "set" : "add",
        M = w && w.prototype,
        C = {};
      return f && "function" == typeof w && (v || M.forEach && !A((function () {
        (new w).entries().next()
      }))) ? (w = t((function (t, n) {
        l(t, w, e, "_c"), t._c = new m, null != n && u(n, y, t[B], t)
      })), p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON"
        .split(","), (function (e) {
          var t = "add" == e || "set" == e;
          !(e in M) || v && "clear" == e || o(w.prototype, e, (function (n, r) {
            if (l(this, w, e), !t && v && !c(n)) return "get" == e &&
            void 0;
            var a = this._c[e](0 === n ? 0 : n, r);
            return t ? this : a
          }))
        })), v || h(w.prototype, "size", {
        get: function () {
          return this._c.size
        }
      })) : (w = g.getConstructor(t, e, y, B), s(w.prototype, n), i.NEED = !0), d(w,
        e), C[e] = w, a(a.G + a.W + a.F, C), v || g.setStrong(w, e, y), w
    }
  }, function (e, t, n) {
    var r = n(73),
      a = n(201);
    e.exports = function (e) {
      return function () {
        if (r(this) != e) throw TypeError(e + "#toJSON isn't generic");
        return a(this)
      }
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(10);
    e.exports = function (e) {
      r(r.S, e, {
        of: function () {
          for (var e = arguments.length, t = new Array(e); e--;) t[e] = arguments[
            e];
          return new this(t)
        }
      })
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(10),
      a = n(54),
      i = n(34),
      A = n(59);
    e.exports = function (e) {
      r(r.S, e, {
        from: function (e) {
          var t, n, r, o, s = arguments[1];
          return a(this), (t = void 0 !== s) && a(s), null == e ? new this : (
            n = [], t ? (r = 0, o = i(s, arguments[2], 2), A(e, !1, (function (
              e) {
              n.push(o(e, r++))
            }))) : A(e, !1, n.push, n), new this(n))
        }
      })
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(176),
      __esModule: !0
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(17),
      a = n(43),
      i = n(24),
      A = n(10),
      o = n(111),
      s = n(87).KEY,
      u = n(38),
      l = n(82),
      c = n(58),
      d = n(69),
      h = n(18),
      p = n(86),
      f = n(88),
      g = n(177),
      y = n(115),
      v = n(30),
      m = n(23),
      w = n(44),
      B = n(41),
      M = n(77),
      C = n(55),
      I = n(70),
      x = n(178),
      b = n(100),
      k = n(84),
      T = n(27),
      E = n(49),
      D = b.f,
      N = T.f,
      P = x.f,
      Q = r.Symbol,
      O = r.JSON,
      _ = O && O.stringify,
      S = h("_hidden"),
      U = h("toPrimitive"),
      F = {}.propertyIsEnumerable,
      L = l("symbol-registry"),
      j = l("symbols"),
      z = l("op-symbols"),
      R = Object.prototype,
      H = "function" == typeof Q && !!k.f,
      Y = r.QObject,
      W = !Y || !Y.prototype || !Y.prototype.findChild,
      K = i && u((function () {
        return 7 != I(N({}, "a", {
          get: function () {
            return N(this, "a", {
              value: 7
            }).a
          }
        })).a
      })) ? function (e, t, n) {
        var r = D(R, t);
        r && delete R[t], N(e, t, n), r && e !== R && N(R, t, r)
      } : N,
      G = function (e) {
        var t = j[e] = I(Q.prototype);
        return t._k = e, t
      },
      V = H && "symbol" == typeof Q.iterator ? function (e) {
        return "symbol" == typeof e
      } : function (e) {
        return e instanceof Q
      },
      Z = function (e, t, n) {
        return e === R && Z(z, t, n), v(e), t = M(t, !0), v(n), a(j, t) ? (n.enumerable ?
          (a(e, S) && e[S][t] && (e[S][t] = !1), n = I(n, {
            enumerable: C(0, !1)
          })) : (a(e, S) || N(e, S, C(1, {})), e[S][t] = !0), K(e, t, n)) : N(e, t, n)
      },
      X = function (e, t) {
        v(e);
        for (var n, r = g(t = B(t)), a = 0, i = r.length; i > a;) Z(e, n = r[a++], t[n]);
        return e
      },
      J = function (e) {
        var t = F.call(this, e = M(e, !0));
        return !(this === R && a(j, e) && !a(z, e)) && (!(t || !a(this, e) || !a(j, e) ||
          a(this, S) && this[S][e]) || t)
      },
      q = function (e, t) {
        if (e = B(e), t = M(t, !0), e !== R || !a(j, t) || a(z, t)) {
          var n = D(e, t);
          return !n || !a(j, t) || a(e, S) && e[S][t] || (n.enumerable = !0), n
        }
      },
      $ = function (e) {
        for (var t, n = P(B(e)), r = [], i = 0; n.length > i;) a(j, t = n[i++]) || t ==
          S || t == s || r.push(t);
        return r
      },
      ee = function (e) {
        for (var t, n = e === R, r = P(n ? z : B(e)), i = [], A = 0; r.length > A;) !a(j,
          t = r[A++]) || n && !a(R, t) || i.push(j[t]);
        return i
      };
    H || (o((Q = function () {
        if (this instanceof Q) throw TypeError("Symbol is not a constructor!");
        var e = d(arguments.length > 0 ? arguments[0] : void 0),
          t = function (n) {
            this === R && t.call(z, n), a(this, S) && a(this[S], e) && (this[S][
              e] = !1), K(this, e, C(1, n))
          };
        return i && W && K(R, e, {
          configurable: !0,
          set: t
        }), G(e)
      }).prototype, "toString", (function () {
        return this._k
      })), b.f = q, T.f = Z, n(116).f = x.f = $, n(63).f = J, k.f = ee, i && !n(57) &&
      o(R, "propertyIsEnumerable", J, !0), p.f = function (e) {
        return G(h(e))
      }), A(A.G + A.W + A.F * !H, {
      Symbol: Q
    });
    for (var te =
        "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables"
        .split(","), ne = 0; te.length > ne;) h(te[ne++]);
    for (var re = E(h.store), ae = 0; re.length > ae;) f(re[ae++]);
    A(A.S + A.F * !H, "Symbol", {
      for: function (e) {
        return a(L, e += "") ? L[e] : L[e] = Q(e)
      },
      keyFor: function (e) {
        if (!V(e)) throw TypeError(e + " is not a symbol!");
        for (var t in L)
          if (L[t] === e) return t
      },
      useSetter: function () {
        W = !0
      },
      useSimple: function () {
        W = !1
      }
    }), A(A.S + A.F * !H, "Object", {
      create: function (e, t) {
        return void 0 === t ? I(e) : X(I(e), t)
      },
      defineProperty: Z,
      defineProperties: X,
      getOwnPropertyDescriptor: q,
      getOwnPropertyNames: $,
      getOwnPropertySymbols: ee
    });
    var ie = u((function () {
      k.f(1)
    }));
    A(A.S + A.F * ie, "Object", {
      getOwnPropertySymbols: function (e) {
        return k.f(w(e))
      }
    }), O && A(A.S + A.F * (!H || u((function () {
      var e = Q();
      return "[null]" != _([e]) || "{}" != _({
        a: e
      }) || "{}" != _(Object(e))
    }))), "JSON", {
      stringify: function (e) {
        for (var t, n, r = [e], a = 1; arguments.length > a;) r.push(arguments[
        a++]);
        if (n = t = r[1], (m(t) || void 0 !== e) && !V(e)) return y(t) || (t =
          function (e, t) {
            if ("function" == typeof n && (t = n.call(this, e, t)), !V(t))
              return t
          }), r[1] = t, _.apply(O, r)
      }
    }), Q.prototype[U] || n(37)(Q.prototype, U, Q.prototype.valueOf), c(Q, "Symbol"), c(
      Math, "Math", !0), c(r.JSON, "JSON", !0)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.min = function () {
      for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[
        n];
      return t.reduce((function (e, t) {
        return Math.min(e, t)
      }))
    }, t.max = function () {
      for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[
        n];
      return t.reduce((function (e, t) {
        return Math.max(e, t)
      }))
    }, t.copyImgToClipBoard = function (e, t) {
      try {
        var n = function (e, t) {
            e = e.replace(/^data:image\/png;base64,/, "");
            for (var n = window.atob(e), r = new ArrayBuffer(n.length), a =
                new Uint8Array(r), i = 0; i < n.length; i++) a[i] = n.charCodeAt(i);
            return new Blob([r], {
              type: t
            })
          }(e, "image/png"),
          r = new ClipboardItem({
            "image/png": n
          });
        navigator.clipboard.write([r]), t(!0)
      } catch (e) {
        console.error("拷贝图片至剪切板失败", e), t(!1)
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.pointInterpFn = t.pointsIntepFn = void 0;
    var r = s(n(94)),
      a = s(n(5)),
      i = s(n(0)),
      A = s(n(1)),
      o = n(217);

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function () {
        function e() {
          (0, i.default)(this, e), this.info = {}
        }
        return (0, A.default)(e, [{
          key: "getSmootherSnapshot",
          value: function (e) {
            var t = e.snapshot,
              n = e.now,
              r = e.maxDiff,
              a = void 0 === r ? 300 : r,
              i = e.interpolateFn,
              A = e.app;
            if (A.isRecordPlayer) return t;
            var s = o.MINIMUM_BROADCAST_GAP_PER_DATATYPE >= 25 ? o
              .MINIMUM_BROADCAST_GAP_PER_DATATYPE : 70,
              u = n - t.time;
            if (t.uid === A.account) return t;
            var l = t.opId;
            if (!t.data.inProgress) return delete this.info[l], t;
            if (!this.info.hasOwnProperty(l)) {
              if (u > a) return t;
              this.info[l] = {
                p: {
                  t: n - s,
                  d: void 0
                },
                c: {
                  t: n,
                  d: t
                },
                lastP: 0
              }
            }
            var c = this.info[l];
            c.c.d !== t && (c.p = {
              t: c.c.t,
              d: i(c.p.d, c.c.d, c.lastP)
            }, c.c = {
              t: n,
              d: t
            }), c.p.t = Math.max(c.p.t, c.c.t - a);
            var d = n - c.c.t,
              h = c.c.t - c.p.t;
            d > h && (c.p = c.c, c.lastP = 1);
            var p = Math.min(1, Math.max(0, d / h));
            return c.lastP = p, 1 === p ? t : (A.room.pageToIncRefresh = A.room
              .currBoard.currPage, i(c.p.d, c.c.d, p))
          }
        }]), e
      }(),
      l = (t.pointsIntepFn = function (e, t, n) {
        var r = e ? e.data.points.length : 0,
          i = t.data.points.length;
        if (i <= r) return t;
        var A = Math.floor(i * n + r * (1 - n));
        return (0, a.default)((0, a.default)({}, t), {
          data: (0, a.default)((0, a.default)({}, t.data), {
            points: t.data.points.slice(0, A)
          })
        })
      }, t.pointInterpFn = function (e, t) {
        return function (n, i, A) {
          return n || t ? !n && t ? (0, a.default)((0, a.default)({}, i), {
            data: (0, a.default)((0, a.default)({}, i.data), (0, r.default)({}, e,
              [i.data[e][0] * A + i.data[t][0] * (1 - A), i.data[e][1] * A + i
                .data[t][1] * (1 - A)
              ]))
          }) : (0, a.default)((0, a.default)({}, i), {
            data: (0, a.default)((0, a.default)({}, i.data), (0, r.default)({}, e,
              [i.data[e][0] * A + n.data[e][0] * (1 - A), i.data[e][1] * A + n
                .data[e][1] * (1 - A)
              ]))
          }) : i
        }
      }, new u);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = h(n(5)),
      a = h(n(16)),
      i = h(n(7)),
      A = n(28),
      o = n(39),
      s = h(n(140)),
      u = n(15),
      l = n(66),
      c = n(65),
      d = n(19);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = {
      graphInit: function (e) {
        var t = e.start,
          n = e.end,
          r = e.op,
          a = e.data,
          i = t.dir,
          s = n.dir,
          c = {
            sx: t.x,
            sy: t.y,
            w: 1,
            h: 1
          },
          d = {
            sx: n.x,
            sy: n.y,
            w: 1,
            h: 1
          },
          h = {
            sx: t.x,
            sy: t.y,
            w: 1,
            h: 1
          },
          p = {
            sx: n.x,
            sy: n.y,
            w: 1,
            h: 1
          };
        if (a && a.start.type !== A.IEndPointType.COORD) {
          var f = r.drawOpsOfPage[a.start.id];
          f && (c = (0, u.getTransformedBoundary)(r.app.scale, {
              mat: f.data.mat,
              boundary: f.data.boundary,
              pad: 12
            }), h = (0, u.getTransformedBoundary)(r.app.scale, {
              mat: f.data.mat,
              boundary: f.data.boundary,
              pad: 0
            }), i = (0, o.getDirInShape)(r.app, f.data.shape, a.start.per || 0), i =
            (0, o.getDirAftRotate)(i, f.data.rAngle, f.data.xFactor, f.data.yFactor)
            )
        }
        if (a && a.end.type !== A.IEndPointType.COORD) {
          var g = r.drawOpsOfPage[a.end.id];
          g && (d = (0, u.getTransformedBoundary)(r.app.scale, {
            mat: g.data.mat,
            boundary: g.data.boundary,
            pad: 12
          }), p = (0, u.getTransformedBoundary)(r.app.scale, {
            mat: g.data.mat,
            boundary: g.data.boundary,
            pad: 0
          }), s = (0, o.getDirInShape)(r.app, g.data.shape, a.end.per || 0), s = (
            0, o.getDirAftRotate)(s, g.data.rAngle, g.data.xFactor, g.data
            .yFactor))
        }
        t.dir = i, n.dir = s;
        var y = (0, o.getExtP)(t, 25, c),
          v = (0, o.getExtP)(n, 25, d),
          m = (0, o.isPExtentFrom)(y, v),
          w = (0, o.isPExtentFrom)(v, y),
          B = (0, o.isPExtentFrom)(t, n),
          M = t.dir === A.DIRECTION.LEFT || t.dir === A.DIRECTION.RIGHT,
          C = n.dir === A.DIRECTION.LEFT || n.dir === A.DIRECTION.RIGHT,
          I = Math.max(c.sx + c.w, d.sx + d.w) + 6,
          x = Math.max(c.sy + c.h, d.sy + d.h) + 6,
          b = Math.min(c.sx, d.sx) - 6,
          k = Math.min(c.sy, d.sy) - 6,
          T = (0, u.dist)([y.x, y.y], [v.x, v.y]) < 30,
          E = (0, o.isPInsideRect)([y.x, y.y], p),
          D = (0, o.isPInsideRect)([v.x, v.y], h);
        if (M === C && t.dir !== n.dir) {
          if (B || E || D) {
            var N = {
              x: t.x / 2 + n.x / 2,
              y: t.y / 2 + n.y / 2,
              type: A.IConnPointType.Split
            };
            return (M ? Math.abs(n.y - t.y) : Math.abs(t.x - n.x)) < l
              .SEG_MERGE_THRES / r.app.scale ? {
                start: t,
                end: n,
                connPs: [N]
              } : {
                start: t,
                end: n,
                connPs: [{
                  x: M ? t.x / 2 + N.x / 2 : t.x,
                  y: M ? t.y : t.y / 2 + N.y / 2,
                  type: A.IConnPointType.Split
                }, N, {
                  x: M ? n.x / 2 + N.x / 2 : n.x,
                  y: M ? n.y : n.y / 2 + N.y / 2,
                  type: A.IConnPointType.Split
                }]
              }
          }
          if (M) {
            var P = void 0;
            return c.sy > d.sy + d.h + 12 ? P = (d.sy + d.h) / 2 + c.sy / 2 : c.sy + c
              .h + 12 < d.sy ? P = (c.sy + c.h) / 2 + d.sy / 2 : (P = t.y > n.y ? x :
                k, (0, o.isSegInRect)([v.x, v.y], [v.x, P], c) && (v.x = n.dir === A
                  .DIRECTION.RIGHT ? I : b)), {
                start: t,
                end: n,
                connPs: [{
                  x: t.x / 2 + y.x / 2,
                  y: t.y,
                  type: A.IConnPointType.Split
                }, {
                  x: y.x,
                  y: y.y / 2 + P / 2,
                  type: A.IConnPointType.Split
                }, {
                  x: y.x / 2 + v.x / 2,
                  y: P,
                  type: A.IConnPointType.Split
                }, {
                  x: v.x,
                  y: v.y / 2 + P / 2,
                  type: A.IConnPointType.Split
                }, {
                  x: n.x / 2 + v.x / 2,
                  y: n.y,
                  type: A.IConnPointType.Split
                }]
              }
          }
          var Q = void 0;
          return c.sx > d.sx + d.w + 12 ? Q = (d.sx + d.w) / 2 + c.sx / 2 : c.sx + c
            .w + 12 < d.sx ? Q = (c.sx + c.w) / 2 + d.sx / 2 : (Q = t.x > n.x ? I : b,
              (0, o.isSegInRect)([v.x, v.y], [Q, v.y], c) && (v.y = n.dir === A
                .DIRECTION.DOWN ? x : k)), {
              start: t,
              end: n,
              connPs: [{
                x: t.x,
                y: t.y / 2 + y.y / 2,
                type: A.IConnPointType.Split
              }, {
                x: y.x / 2 + Q / 2,
                y: y.y,
                type: A.IConnPointType.Split
              }, {
                x: Q,
                y: y.y / 2 + v.y / 2,
                type: A.IConnPointType.Split
              }, {
                x: v.x / 2 + Q / 2,
                y: v.y,
                type: A.IConnPointType.Split
              }, {
                x: n.x,
                y: n.y / 2 + v.y / 2,
                type: A.IConnPointType.Split
              }]
            }
        }
        if (M === C) {
          var O = t.dir === A.DIRECTION.LEFT && n.x > t.x || t.dir === A.DIRECTION
            .RIGHT && n.x < t.x || t.dir === A.DIRECTION.UP && n.y > t.y || t.dir ===
            A.DIRECTION.DOWN && n.y < t.y,
            _ = M ? O ? {
              x: y.x,
              y: v.y
            } : {
              x: v.x,
              y: y.y
            } : O ? {
              x: v.x,
              y: y.y
            } : {
              x: y.x,
              y: v.y
            },
            S = O ? v : y,
            U = O ? h : p,
            F = O ? c : d;
          return E || D || !(0, o.isSegInRect)([_.x, _.y], [S.x, S.y], U) ? M ? {
            start: t,
            end: n,
            connPs: [{
              x: t.x / 2 + _.x / 2,
              y: t.y,
              type: A.IConnPointType.Split
            }, {
              x: _.x,
              y: t.y / 2 + n.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: n.x / 2 + _.x / 2,
              y: n.y,
              type: A.IConnPointType.Split
            }]
          } : {
            start: t,
            end: n,
            connPs: [{
              x: t.x,
              y: t.y / 2 + _.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: t.x / 2 + n.x / 2,
              y: _.y,
              type: A.IConnPointType.Split
            }, {
              x: n.x,
              y: n.y / 2 + _.y / 2,
              type: A.IConnPointType.Split
            }]
          } : M ? (_.y = F.sy + F.h + 12, {
            start: t,
            end: n,
            connPs: [{
              x: t.x / 2 + y.x / 2,
              y: t.y,
              type: A.IConnPointType.Split
            }, {
              x: y.x,
              y: y.y / 2 + _.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: y.x / 2 + v.x / 2,
              y: _.y,
              type: A.IConnPointType.Split
            }, {
              x: v.x,
              y: v.y / 2 + _.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: n.x / 2 + v.x / 2,
              y: n.y,
              type: A.IConnPointType.Split
            }]
          }) : (_.x = F.sx + F.w + 12, {
            start: t,
            end: n,
            connPs: [{
              x: t.x,
              y: t.y / 2 + y.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: y.x / 2 + _.x / 2,
              y: y.y,
              type: A.IConnPointType.Split
            }, {
              x: _.x,
              y: y.y / 2 + v.y / 2,
              type: A.IConnPointType.Split
            }, {
              x: v.x / 2 + _.x / 2,
              y: v.y,
              type: A.IConnPointType.Split
            }, {
              x: n.x,
              y: n.y / 2 + v.y / 2,
              type: A.IConnPointType.Split
            }]
          })
        }
        if (m && w || T || E || D) return {
          start: t,
          end: n,
          connPs: [{
            x: M ? t.x / 2 + n.x / 2 : t.x,
            y: M ? t.y : t.y / 2 + n.y / 2,
            type: A.IConnPointType.Split
          }, {
            x: M ? n.x : t.x / 2 + n.x / 2,
            y: M ? n.y / 2 + t.y / 2 : n.y,
            type: A.IConnPointType.Split
          }]
        };
        var L = M ? {
          x: y.x,
          y: v.y
        } : {
          x: v.x,
          y: y.y
        };
        return (0, o.isSegInRect)([y.x, y.y], [L.x, L.y], p) ? (0, o.isPInsideRect)([L
          .x, L.y
        ], p) || (t.dir === A.DIRECTION.RIGHT ? L.x = I : t.dir === A.DIRECTION
          .LEFT ? L.x = b : t.dir === A.DIRECTION.UP ? L.y = k : t.dir === A
          .DIRECTION.DOWN && (L.y = x)) : (0, o.isSegInRect)([v.x, v.y], [L.x, L.y],
          h) && ((0, o.isPInsideRect)([L.x, L.y], h) || (n.dir === A.DIRECTION
          .RIGHT ? L.x = I : n.dir === A.DIRECTION.LEFT ? L.x = b : n.dir === A
          .DIRECTION.UP ? L.y = k : n.dir === A.DIRECTION.DOWN && (L.y = x))), {
          start: t,
          end: n,
          connPs: [{
            x: M ? t.x / 2 + L.x / 2 : t.x,
            y: M ? t.y : t.y / 2 + L.y / 2,
            type: A.IConnPointType.Split
          }, {
            x: M ? L.x : t.x / 2 + L.x / 2,
            y: M ? L.y / 2 + t.y / 2 : L.y,
            type: A.IConnPointType.Split
          }, {
            x: M ? L.x / 2 + n.x / 2 : L.x,
            y: M ? L.y : L.y / 2 + n.y / 2,
            type: A.IConnPointType.Split
          }, {
            x: M ? n.x : n.x / 2 + L.x / 2,
            y: M ? n.y / 2 + L.y / 2 : n.y,
            type: A.IConnPointType.Split
          }]
        }
      },
      graphFromAnchors: function (e) {
        var t = e.start,
          n = e.end,
          r = e.anchors,
          i = e.op;
        if (0 === r.length) return p.graphInit(e);
        var o = t.dir === A.DIRECTION.LEFT || t.dir === A.DIRECTION.RIGHT,
          s = {
            x: o ? t.x / 2 + r[0].x / 2 : t.x,
            y: o ? t.y : t.y / 2 + r[0].y / 2,
            type: A.IConnPointType.Split
          },
          u = r.length % 2 == 1 ? o : !o,
          l = {
            x: u ? n.x / 2 + r[r.length - 1].x / 2 : n.x,
            y: u ? n.y : n.y / 2 + r[r.length - 1].y / 2,
            type: A.IConnPointType.Split
          };
        return p.tidyGraph({
          start: t,
          end: n,
          op: i,
          connPs: [s].concat((0, a.default)(r), [l])
        })
      },
      getEndAngle: function (e) {
        var t = e.data,
          n = (e.op, t._points || []);
        return n.length < 2 ? [(0, u.getAngleByDir)(t.start.dir), (0, u.getAngleByDir)
          (t.end.dir)
        ] : [(0, u.getVecAngle)(n[1], n[0]), (0, u.getVecAngle)(n[n.length - 2], n[n
          .length - 1])]
      },
      isUnderRect: function (e) {
        var t = e.data,
          n = e.rect,
          r = e.selectMode,
          a = t._points,
          i = void 0 === a ? [] : a;
        if ("intersect" === r) {
          for (var A = 1; A < i.length; A++)
            if ((0, o.isSegInRect)(i[A - 1], i[A], n)) return !0;
          return !1
        }
        for (var s = 1; s < i.length; s++)
          if (!(0, u.polygonContain)([i[s - 1], i[s]], [
              [n.sx, n.sy],
              [n.sx + n.w, n.sy],
              [n.sx + n.w, n.sy + n.h],
              [n.sx, n.sy + n.h]
            ])) return !1;
        return !0
      },
      isUnderPoint: function (e) {
        for (var t = e.data, n = e.p, r = e.op, a = t._points, i = void 0 === a ? [] :
            a, A = 1; A < i.length; A++)
          if ((0, o.pDist)(n, i[A - 1], i[A]) < l.SEG_UNDER_POINT_THRES / r.app.scale)
            return !0;
        return !1
      },
      patchLink: function (e) {
        var t = e.data,
          n = e.page,
          a = e.op,
          s = t.start,
          u = t.end,
          l = t.connPs,
          d = (0, o.getLinkEndPos)(a.app, s, e.op, n),
          h = (0, o.getLinkEndPos)(a.app, u, e.op, n);
        if (d && h) {
          t._points = function (e) {
            var t = e.start,
              n = e.end,
              r = e.connPs,
              a = [];
            a.push([t.x, t.y]);
            var o = t.dir === A.DIRECTION.LEFT || t.dir === A.DIRECTION.RIGHT ? 0 :
              1,
              s = t,
              u = !0,
              l = !1,
              c = void 0;
            try {
              for (var d, h = (0, i.default)(r.slice(1)); !(u = (d = h.next())
                .done); u = !0) {
                var p = d.value;
                o % 2 == 0 ? a.push([p.x, s.y]) : a.push([s.x, p.y]), o++, s = p
              }
            } catch (e) {
              l = !0, c = e
            } finally {
              try {
                !u && h.return && h.return()
              } finally {
                if (l) throw c
              }
            }
            return a.push([n.x, n.y]), a
          }({
            connPs: l,
            start: d,
            end: h
          });
          var p = (0, c.getArrowPts)({
              data: t,
              op: a,
              startPos: d,
              endPos: h
            }),
            f = (0, c.getLinkTextPos)({
              data: t,
              op: a,
              page: n
            });
          t.boundary = (0, o.getLinkBoundary)((0, r.default)((0, r.default)((0, r
            .default)({
            start: d,
            end: h,
            connPs: l
          }, t.start.aType === A.IArrowType.Arrow ? {
            startArrow: p.start
          } : {}), t.end.aType === A.IArrowType.Arrow ? {
            endArrow: p.end
          } : {}), {
            textBoundaries: f
          }))
        }
      },
      drawLink: function (e) {
        var t = e.data,
          n = e.ctx,
          r = e.op.app.scale,
          a = (t._points || []).map((function (e) {
            return (0, d.padPt)(e, r)
          }));
        if (n.beginPath(), a.length >= 2) {
          n.moveTo(a[0][0], a[0][1]);
          for (var i = 1; i < a.length; i++) n.lineTo(a[i][0], a[i][1])
        }
        n.stroke()
      },
      graphAftTypeM: function (e) {
        var t = e.data,
          n = e.type,
          r = e.op,
          a = (0, o.getLinkEndPos)(r.app, t.start, r),
          i = (0, o.getLinkEndPos)(r.app, t.end, r);
        if (a && i && n !== A.ILinkType.Segment && (n === A.ILinkType.Curve || n === A
            .ILinkType.Line)) {
          var u = t.connPs.filter((function (e) {
            return e.type === A.IConnPointType.Anchor
          }));
          if (n === A.ILinkType.Curve && 0 === u.length) return s.default.graphInit({
            start: a,
            end: i,
            op: r
          });
          for (var l = [], c = t._points || [], d = 1; d < c.length; d++) l.push({
            x: c[d][0] / 2 + c[d - 1][0] / 2,
            y: c[d][1] / 2 + c[d - 1][1] / 2,
            type: A.IConnPointType.Split
          }), d !== c.length - 1 && l.push({
            x: c[d][0],
            y: c[d][1],
            type: A.IConnPointType.Anchor
          });
          return n === A.ILinkType.Curve ? s.default.tidyGraph({
            connPs: l,
            start: a,
            end: i,
            op: r
          }) : {
            connPs: l,
            start: a,
            end: i
          }
        }
      },
      graphAftConnD: function (e) {
        var t = e.start,
          n = e.end,
          a = e.data,
          i = e.index,
          s = e.op,
          u = a.connPs;
        if (0 === i || i === u.length - 1) return {
          start: t,
          end: n,
          connPs: u
        };
        var l = u.slice(),
          c = l[i],
          d = (0, o.getConnH)(t.dir, i);
        if (u.length <= 3) l[i] = (0, r.default)((0, r.default)({}, l[i]), {
          type: A.IConnPointType.Split,
          x: d ? (u[i - 1].x + u[i + 1].x) / 2 : c.x,
          y: d ? c.y : (u[i - 1].y + u[i + 1].y) / 2
        });
        else if (1 === i) {
          var h = u[i + 2] || n;
          l[i - 1] = {
            x: d ? t.x : t.x / 2 + h.x / 2,
            y: d ? t.y / 2 + +h.y / 2 : t.y,
            type: A.IConnPointType.Split
          };
          var f = u[i + 3] || n;
          l[i + 2] = (0, r.default)((0, r.default)({}, u[i + 2]), {
            x: d ? (t.x + f.x) / 2 : h.x,
            y: d ? h.y : (t.y + f.y) / 2
          }), l.splice(i, 2)
        } else if (i === u.length - 2) {
          var g = u[i - 2] || t,
            y = u[i - 3] || t;
          l[i + 1] = {
            x: d ? n.x : n.x / 2 + g.x / 2,
            y: d ? n.y / 2 + g.y / 2 : n.y,
            type: A.IConnPointType.Split
          }, l[i - 2] = (0, r.default)((0, r.default)({}, u[i - 2]), {
            x: d ? (n.x + y.x) / 2 : g.x,
            y: d ? g.y : (n.y + y.y) / 2
          }), l.splice(i - 1, 2)
        } else {
          if (Math.abs(d ? u[i - 2].y - u[i].y : u[i - 2].x - u[i].x) < Math.abs(d ?
              u[i + 2].y - u[i].y : u[i + 2].x - u[i].x)) {
            var v = u[i - 3] || t,
              m = u[i + 2] || n;
            l[i - 2] = (0, r.default)((0, r.default)({}, l[i - 2]), {
              x: d ? (v.x + u[i + 1].x) / 2 : l[i - 2].x,
              y: d ? l[i - 2].y : (v.y + u[i + 1].y) / 2
            }), l[i + 1] = (0, r.default)((0, r.default)({}, l[i + 1]), {
              x: d ? l[i + 1].x : (m.x + u[i - 2].x) / 2,
              y: d ? (m.y + u[i - 2].y) / 2 : l[i + 1].y
            }), l.splice(i - 1, 2)
          } else {
            var w = u[i - 2] || t,
              B = u[i + 3] || n;
            l[i + 2] = (0, r.default)((0, r.default)({}, l[i + 2]), {
              x: d ? (B.x + u[i - 1].x) / 2 : l[i + 2].x,
              y: d ? l[i + 2].y : (B.y + u[i - 1].y) / 2
            }), l[i - 1] = (0, r.default)((0, r.default)({}, l[i - 1]), {
              x: d ? l[i - 1].x : (w.x + u[i + 2].x) / 2,
              y: d ? (w.y + u[i + 2].y) / 2 : l[i - 1].y
            }), l.splice(i, 2)
          }
        }
        return p.tidyGraph({
          start: t,
          end: n,
          connPs: l,
          op: s,
          data: a
        })
      },
      isConnValid: function (e) {
        var t = e.start,
          n = e.end,
          r = e.connPs,
          a = e.op;
        if (0 === r.length) return !0;
        var i = r[0],
          A = r[r.length - 1];
        return (0, o.pointAtExtendDir)({
          x: t.x,
          y: t.y
        }, {
          x: i.x,
          y: i.y
        }, t.dir, a.app.scale, !0) && (0, o.pointAtExtendDir)({
          x: n.x,
          y: n.y
        }, {
          x: A.x,
          y: A.y
        }, n.dir, a.app.scale, !0)
      },
      graphAftConnM: function (e) {
        var t = e.startPos,
          n = e.endPos,
          a = e.connPs,
          i = e.index,
          s = e.x,
          u = e.y,
          l = e.op,
          c = (a = a.map((function (e) {
            return (0, r.default)({}, e)
          })))[i],
          d = a.slice(),
          h = (0, o.getConnH)(t.dir, i);
        if (t = (0, r.default)({}, t), 0 === i && (t.dir === A.DIRECTION.LEFT || t
            .dir === A.DIRECTION.RIGHT ? t.dir = u > t.y ? A.DIRECTION.DOWN : A
            .DIRECTION.UP : t.dir = s > t.x ? A.DIRECTION.RIGHT : A.DIRECTION.LEFT),
          0 === i && i === d.length - 1) d.unshift({
          x: h ? t.x : t.x / 2 + s / 2,
          y: h ? u / 2 + t.y / 2 : t.y,
          type: A.IConnPointType.Split
        }), d.push({
          x: h ? n.x : n.x / 2 + s / 2,
          y: h ? u / 2 + n.y / 2 : n.y,
          type: A.IConnPointType.Split
        }), c.x = h ? t.x / 2 + n.x / 2 : s, c.y = h ? u : t.y / 2 + n.y / 2;
        else if (0 === i) {
          d.unshift({
            x: h ? t.x : t.x / 2 + s / 2,
            y: h ? u / 2 + t.y / 2 : t.y,
            type: A.IConnPointType.Split
          });
          var f = a[i + 1],
            g = a[i + 2] || n;
          c.x = h ? t.x / 2 + f.x / 2 : s, c.y = h ? u : t.y / 2 + f.y / 2, f.x = h ?
            f.x : s / 2 + g.x / 2, f.y = h ? u / 2 + g.y / 2 : f.y
        } else if (i === d.length - 1) {
          d.push({
            x: h ? n.x : n.x / 2 + s / 2,
            y: h ? u / 2 + n.y / 2 : n.y,
            type: A.IConnPointType.Split
          });
          var y = a[i - 1],
            v = a[i - 2] || t;
          c.x = h ? n.x / 2 + y.x / 2 : s, c.y = h ? u : n.y / 2 + y.y / 2, y.x = h ?
            y.x : s / 2 + v.x / 2, y.y = h ? u / 2 + v.y / 2 : y.y
        } else {
          var m = a[i - 2] || t,
            w = a[i + 2] || n;
          d[i] = (0, r.default)((0, r.default)({}, d[i]), {
            x: h ? d[i].x : s,
            y: h ? u : d[i].y
          }), d[i - 1] = (0, r.default)((0, r.default)({}, d[i - 1]), {
            x: h ? d[i - 1].x : s / 2 + m.x / 2,
            y: h ? u / 2 + m.y / 2 : d[i - 1].y
          }), d[i + 1] = (0, r.default)((0, r.default)({}, d[i + 1]), {
            x: h ? d[i + 1].x : s / 2 + w.x / 2,
            y: h ? u / 2 + w.y / 2 : d[i + 1].y
          })
        }
        for (var B = 1; B < d.length - 1; B++) d[B].type = A.IConnPointType.Anchor;
        return p.tidyGraph({
          start: t,
          end: n,
          connPs: d,
          op: l
        })
      },
      tidyGraph: function (e) {
        var t = e.start,
          n = e.end,
          r = e.connPs,
          a = e.op.app.scale;
        if (0 === r.filter((function (e) {
            return e.type === A.IConnPointType.Anchor
          })).length) return this.graphInit(e);
        if (1 === r.length) return {
          start: t,
          connPs: r,
          end: n
        };
        for (var i = {
            x: t.x,
            y: t.y
          }, s = [], u = 0; u < r.length; u++) {
          for (var c = (0, o.getConnH)(t.dir, u), d = {
              prevX: i.x,
              prevY: i.y,
              x: r[u].x,
              y: r[u].y,
              h: c
            }, h = u + 2; h <= r.length;) {
            var p = h === r.length ? n : r[h];
            if (d.h && Math.abs(r[u].y - p.y) < l.SEG_MERGE_THRES / a) h += 2;
            else {
              if (d.h || !(Math.abs(r[u].x - p.x) < l.SEG_MERGE_THRES / a)) break;
              h += 2
            }
          }
          var f = h - 2,
            g = r[f + 1] || n,
            y = 0 === u ? t : r[f] || n;
          s.push({
            type: A.IConnPointType.Anchor,
            x: d.h ? d.prevX / 2 + g.x / 2 : h > u + 2 ? y.x : d.x,
            y: d.h ? h > u + 2 ? y.y : d.y : d.prevY / 2 + g.y / 2
          }), h > u + 2 && (u = f), i = r[u]
        }
        return s[0].type = A.IConnPointType.Split, s[s.length - 1].type = A
          .IConnPointType.Split, {
            connPs: s,
            end: n,
            start: t
          }
      },
      graphAftEndM: function (e) {
        var t = e.sTo,
          n = e.eTo,
          a = e.connPs,
          i = e.op,
          s = e.data;
        if (a.filter((function (e) {
            return e.type === A.IConnPointType.Anchor
          })).length <= 0) return p.graphInit({
          data: s,
          start: t,
          end: n,
          op: i
        });
        var u = a.slice(),
          l = (0, o.getConnH)(t.dir, 0);
        u[0] = (0, r.default)((0, r.default)({}, u[0]), {
          x: l ? (t.x + a[1].x) / 2 : t.x,
          y: l ? t.y : (t.y + a[1].y) / 2
        });
        var c = u[2] || n;
        u[1] = (0, r.default)((0, r.default)({}, u[1]), {
          x: l ? a[1].x : (u[0].x + c.x) / 2,
          y: l ? (u[0].y + c.y) / 2 : a[1].y
        }), l = (0, o.getConnH)(t.dir, u.length - 1), u[a.length - 1] = (0, r
          .default)((0, r.default)({}, u[a.length - 1]), {
          x: l ? (u[a.length - 2].x + n.x) / 2 : n.x,
          y: l ? n.y : (u[a.length - 2].y + n.y) / 2
        });
        var d = u[a.length - 3] || t;
        return u[a.length - 2] = (0, r.default)((0, r.default)({}, u[a.length - 2]), {
          x: l ? u[a.length - 2].x : (u[a.length - 1].x + d.x) / 2,
          y: l ? (u[a.length - 1].y + d.y) / 2 : u[a.length - 2].y
        }), p.tidyGraph({
          start: t,
          end: n,
          connPs: u,
          op: i
        })
      },
      getLinkPosByPer: function (e) {
        for (var t = e.per, n = e.data, r = e.op, a = e.page, i = (0, o.getLinkEndPos)
            (r.app, n.start, r, a), A = (0, o.getLinkEndPos)(r.app, n.end, r, a), s =
            n._points || [
              [i.x, i.y],
              [A.x, A.y]
            ], l = 0, c = [0], d = 1; d < s.length; d++) {
          l += (0, u.dist)([s[d - 1][0], s[d - 1][1]], [s[d][0], s[d][1]]), c.push(l)
        }
        for (var h = 1; h < c.length; h++)
          if (c[h] / l >= t) {
            var p = (t - c[h - 1] / l) / (c[h] / l - c[h - 1] / l);
            return [s[h - 1][0] * (1 - p) + s[h][0] * p, s[h - 1][1] * (1 - p) + s[h][
              1
            ] * p]
          } return [s[s.length - 1][0], s[s.length - 1][1]]
      },
      getNearestLinkInfo: function (e) {
        for (var t = e.mx, n = e.my, r = e.data._points || [], a = 0, i = [0], A =
            Number.MAX_VALUE, s = 0, l = 0, c = 1; c < r.length; c++) {
          var d = (0, u.dist)([r[c - 1][0], r[c - 1][1]], [r[c][0], r[c][1]]);
          if (a += d, i.push(a), !(d < .1)) {
            var h = (0, o.pDist)([t, n], [r[c - 1][0], r[c - 1][1]], [r[c][0], r[c][
              1]]);
            h < A && (A = h, s = c, l = (0, o.projOnSeg)([t, n], [r[c - 1][0], r[c -
              1][1]], [r[c][0], r[c][1]], !0))
          }
        }
        return {
          per: i[s - 1] / a + l * (i[s] - i[s - 1]) / a,
          dist: A
        }
      }
    };
    t.default = p
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.DefaultText = void 0;
    var r = b(n(16)),
      a = b(n(5)),
      i = b(n(2)),
      A = b(n(0)),
      o = b(n(1)),
      s = b(n(3)),
      u = b(n(4)),
      l = b(n(9)),
      c = n(15),
      d = b(n(60)),
      h = n(19),
      p = n(53),
      f = n(31),
      g = b(n(32)),
      y = n(231),
      v = n(138),
      m = n(22),
      w = b(m),
      B = n(66),
      M = n(39),
      C = n(97),
      I = n(137),
      x = n(14);

    function b(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var k = t.DefaultText = "Type Here",
      T = function (e) {
        function t() {
          (0, A.default)(this, t);
          var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
            arguments));
          return e.type = "text", e.isEditNew = !1, e.currText = "", e.currOpId = void 0,
            e.blurAt = 0, e.activateOpId = "", e.snapsBeenChanged = {}, e.enterEdit =
            function (t) {
              if ("snap" in t) {
                var n = t.snap;
                e.isEditNew = !1, e.currOpId = n.opId, e.activateOpId = e.opsManager
                  .currPage.getNextOpId(!0), e.snapsBeenChanged = (0, M
                    .deepCopySnapBeforeMove)([n.opId], e.drawOpsOfPage), e.currText = n
                  .data.text;
                var r = (0, C.getEditorPos)(e.app, n.data);
                e.currEditor = (0, y.setupTextEditor)(e.app, (0, a.default)((0, a.default)
                  ({}, n.data), {
                    maxTxtLen: B.MAX_TXT_LEN
                  }), (0, a.default)((0, a.default)({}, r), n.data.fixW ? {
                  fixW: n.data.fixW
                } : {}), {
                  onchange: function (t) {
                    return e.handleTextChange(t, !0)
                  },
                  onblur: e.handleTextBlur.bind(e),
                  container: e.app.container.domEl
                }), e.dispatch(e.opsManager.selectOp.getSnapshot([n.opId]))
              } else e.beginBatch(), e.isEditNew = !0, e.currOpId = "", e.activateOpId =
                "", e.currText = "", e.currEditor = (0, y.setupTextEditor)(e.app, {
                  text: "",
                  stroke: w.default.textDef.stroke,
                  fill: w.default.textDef.fill,
                  fontSize: w.default.textDef.fontSize,
                  fontFamily: w.default.textDef.fontFamily,
                  textAlign: w.default.textDef.textAlign,
                  maxTxtLen: B.MAX_TXT_LEN
                }, {
                  sx: t.mx,
                  sy: t.my,
                  angle: 0
                }, {
                  onchange: function (t) {
                    return e.handleTextChange(t, !0)
                  },
                  onblur: e.handleTextBlur.bind(e),
                  container: e.app.container.domEl
                }), e.handleTextChange("", !0), e.opsManager.setCurrOp("select")
            }, e.handleTextChange = function (t, n) {
              e.currText = t;
              var r = e.opsManager.modifyOp;
              if (e.isEditNew) {
                var i = 0 === t.length,
                  A = e.getSnapshot(n, n || i);
                e.currOpId ? e.dispatch(A, !1, e.currOpId) : e.currOpId = e.dispatch(A)
              } else if ("string" == typeof e.currOpId) {
                var o = e.snapsBeenChanged[e.currOpId],
                  s = e.getUpdatedTxtBoundary((0, a.default)((0, a.default)({}, o.data), {
                    text: e.currText
                  }), {});
                e.opsManager.graphOp.handleElePosChange(e.snapsBeenChanged, r.getSnapshot(
                  [e.currOpId], [{
                    k: "text",
                    v: e.currText
                  }, {
                    k: "boundary",
                    v: s
                  }], n), e.activateOpId, e.activateOpId + "_text")
              }
            }, e.handleTextBlur = function (t, n) {
              (n || e.isEditNew) && e.handleTextChange(t, !1), e.currEditor = null, e
                .currText = "", e.isEditNew = !1, e.blurAt = Date.now(), e.opsManager
                .setCurrOp("select");
              var r = e.currOpId;
              e.currOpId = "", e.activateOpId = "", r && e.opsManager.selectOp.dispatch(e
                .opsManager.selectOp.getSnapshot([r]))
            }, e
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.click.tap("ClickPlugin", this.handleClickHook
              .bind(this))
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              activate: {
                value: !0,
                information: {
                  args: "",
                  message: ""
                }
              }
            }
          }
        }, {
          key: "isTextBeingEdit",
          value: function (e) {
            return this.currOpId === e
          }
        }, {
          key: "handleClickHook",
          value: function (e, t, n) {
            if ((0, p.isIosDevice)()) return !1;
            if (this.opsManager.currOp instanceof d.default && 1 === this
              .opsManager.selectedOpIds.length) {
              var r = this.detectIfClickOnText(t, n);
              if ((null == r ? void 0 : r.opId) === this.opsManager.selectedOpIds[
                  0]) return this.enterEdit({
                snap: r
              }), !0
            }
          }
        }, {
          key: "handleMouseUp",
          value: function (e, t, n) {
            this.isMouseDown && this.handleClick(e, t, n)
          }
        }, {
          key: "handleMouseMove",
          value: function (e) {
            this.currEditor ? document.body.style.cursor = "auto" : this.app
              .container.isTargetOnContainer(e.target) ? document.body.style
              .cursor = "text" : document.body.style.cursor = "auto"
          }
        }, {
          key: "handleClick",
          value: function (e, t, n) {
            if ((0, p.isIosDevice)()) return (0, f.showToast)({
              msg: (0, x.getMsg)("iosTxt"),
              time: 3,
              type: "warn",
              msgType: g.default.IOS_NOT_SUPPORT_TEXT
            });
            this.currOpId || this.enterEdit({
              mx: t,
              my: n
            })
          }
        }, {
          key: "getSnapshot",
          value: function (e, t) {
            return {
              type: this.type,
              boundary: this.getBoundaryRect({
                text: this.currText || k,
                fontSize: w.default.textDef.fontSize,
                fontFamily: w.default.textDef.fontFamily
              }),
              stroke: w.default.textDef.stroke,
              textAlign: w.default.textDef.textAlign,
              fill: w.default.textDef.fill,
              text: this.currText,
              fontSize: w.default.textDef.fontSize,
              fontFamily: w.default.textDef.fontFamily || m.DefaultFont,
              inProgress: e,
              skipUndo: t
            }
          }
        }, {
          key: "getBoundaryRect",
          value: function (e) {
            var t = e.text,
              n = e.fontSize,
              r = e.fontFamily,
              a = this.currEditor.container.getBoundingClientRect(),
              i = a.x - this.app.container.left,
              A = a.y - this.app.container.top,
              o = this.app.camera.convertToPointInWorld(i, A),
              s = this.getTextSize({
                text: t,
                fontSize: n,
                fontFamily: r
              });
            return {
              sx: o[0],
              sy: o[1],
              w: s.w,
              h: s.h
            }
          }
        }, {
          key: "hide",
          value: function (e) {
            this.currOpId === e.opId && this.currEditor && ((0, y.removeEditor)(
                this.currEditor), this.currEditor = null, this.currText = "",
              this.currOpId = "")
          }
        }, {
          key: "draw",
          value: function (e, t) {
            if (this.isTextBeingEdit(e.opId)) {
              var n = (0, C.getEditorPos)(this.app, e.data);
              (0, y.updateEditor)((0, a.default)({
                sx: n.sx,
                sy: n.sy,
                angle: n.angle
              }, e.data.fixW ? {
                width: n.w
              } : {}), this.currEditor, e.data, k)
            } else this.preview(e, t)
          }
        }, {
          key: "preview",
          value: function (e, t) {
            var n = e.data,
              a = (0, C.getEditorPos)(this.app, n),
              i = a.sx,
              A = a.sy,
              o = a.w,
              s = a.h,
              u = a.angle,
              l = !!n.fixW;
            t.save(), t.translate(i, A), t.rotate(u);
            var c = n.fill,
              d = n.stroke || "rgb(0, 0, 0)";
            (null == n ? void 0 : n.text) || (t.globalAlpha = .3, c = "", d =
              "rgb(0, 0, 0)");
            var h = (0, v.getTextLines)({
              ctx: t,
              txt: n.text || k,
              fontSize: n.fontSize || 32,
              w: o,
              wrap: l,
              fontFamily: n.fontFamily
            });
            if (h.length > 0 && !n.fixW) {
              var p = Math.max.apply(Math, (0, r.default)(h.map((function (e) {
                return e.w
              })))) / Math.abs(n.xFactor || 1);
              e.data.xFactor < 0 && (e.data.boundary.sx = e.data.boundary.sx - p +
                e.data.boundary.w), e.data.boundary.w = p
            }(0, v.drawText)({
              ctx: t,
              textArr: h,
              fontSize: n.fontSize || 32,
              fontFamily: n.fontFamily,
              lineHeightF: 1.25,
              w: o,
              h: s,
              fill: c,
              stroke: d,
              clip: !1,
              align: n.textAlign || "left",
              vAlign: "top"
            }), t.restore()
          }
        }, {
          key: "detectIfClickOnText",
          value: function (e, t) {
            for (var n in this.drawOpsOfPage)
              if ("text" === this.drawOpsOfPage[n].data.type) {
                var r = this.drawOpsOfPage[n].data,
                  a = (0, c.getTransformedVertices)(r);
                if ((0, c.pointInVertices)(a, [e, t])) return this.drawOpsOfPage[
                  n]
              }
          }
        }, {
          key: "transformOp",
          value: function (e, t) {
            return (0, h.transformPropertyOverwriteOp)(e, t)
          }
        }, {
          key: "getUpdatedTxtBoundary",
          value: function (e, t) {
            var n = e.boundary,
              r = (0, c.getTransformedSize)(e),
              i = this.opsManager.textOp.getTextSize((0, a.default)({
                text: e.text || k,
                fontSize: t.fontSize || e.fontSize,
                fontFamily: t.fontFamily || e.fontFamily
              }, e.fixW ? {
                width: r.w
              } : {})),
              A = i.h / Math.abs(e.yFactor || 1),
              o = i.w / Math.abs(e.xFactor || 1);
            return {
              sx: n.sx,
              sy: n.sy,
              w: o,
              h: A
            }
          }
        }, {
          key: "getTextSize",
          value: function (e) {
            var t = e.text,
              n = e.fontSize,
              a = e.fontFamily,
              i = e.width,
              A = (0, v.getTextLines)({
                ctx: this.app.container.ctx,
                txt: t,
                fontSize: n,
                w: i,
                wrap: "number" == typeof i,
                fontFamily: a
              }),
              o = A.length > 0 ? Math.max.apply(Math, (0, r.default)(A.map((
                function (e) {
                  return e.w
                })))) : I.MIN_TXT_W;
            return i && (o = i), {
              w: o,
              h: A.length * n * 1.25
            }
          }
        }, {
          key: "getTextActualBound",
          value: function (e) {
            var t = e.boundary;
            if (e.fixW) {
              var n = e.text ? e.text.trim() : e.text;
              n = n || k;
              var r = this.getTextSize({
                  text: n,
                  fontSize: e.fontSize / Math.abs(e.xFactor || 1),
                  fontFamily: e.fontFamily
                }),
                a = Math.min(r.w, t.w);
              return {
                sx: "left" === e.textAlign ? t.sx : "center" === e.textAlign ? t
                  .sx + t.w / 2 - a / 2 : t.sx + t.w - a,
                sy: t.sy,
                w: a,
                h: t.h
              }
            }
            return t
          }
        }]), t
      }(l.default);
    t.default = T
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.MIN_TXT_W = 15
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.drawTextOnCanvas = t.getTextWidth = t.getTextLines = t.drawText = void 0;
    var r = A(n(94)),
      a = A(n(7)),
      i = n(97);

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = t.drawText = function (e) {
        var t = e.textArr,
          n = e.ctx,
          r = e.align,
          i = e.vAlign,
          A = e.fontSize,
          o = e.fontFamily,
          u = e.lineHeightF,
          l = e.w,
          c = e.h,
          d = e.clip,
          p = e.stroke,
          f = e.fill;
        n.save(), h(n, A, o), n.textAlign = "left", n.textBaseline = "top", d && (n
          .beginPath(), n.rect(0, 0, l, c), n.clip());
        var g = A * u,
          y = s(t.length, c, g, i) + (g - A) / 2,
          v = void 0;
        if (f) {
          v = y, n.fillStyle = f;
          var m = !0,
            w = !1,
            B = void 0;
          try {
            for (var M, C = (0, a.default)(t); !(m = (M = C.next()).done); m = !0) {
              var I = M.value,
                x = 0;
              "center" === r ? x = (l - I.w) / 2 : "right" === r && (x = l - I.w), n
                .fillRect(x, v - (g - A) / 2, I.w, g), v += g
            }
          } catch (e) {
            w = !0, B = e
          } finally {
            try {
              !m && C.return && C.return()
            } finally {
              if (w) throw B
            }
          }
        }
        v = y, n.fillStyle = p;
        var b = !0,
          k = !1,
          T = void 0;
        try {
          for (var E, D = (0, a.default)(t); !(b = (E = D.next()).done); b = !0) {
            var N = E.value,
              P = 0;
            "center" === r ? P = (l - N.w) / 2 : "right" === r && (P = l - N.w), n
              .fillText(N.txt, P, v), v += g
          }
        } catch (e) {
          k = !0, T = e
        } finally {
          try {
            !b && D.return && D.return()
          } finally {
            if (k) throw T
          }
        }
        n.restore()
      },
      s = function (e, t, n, r) {
        if ("top" === r) return 0;
        var a = e * n;
        return "middle" === r ? (t - a) / 2 : "bottom" === r ? t - a : 0
      },
      u = function (e) {
        return -1 !== [" ", "\n"].indexOf(e)
      },
      l = t.getTextLines = function (e) {
        var t = [],
          n = e.ctx,
          r = e.txt,
          i = e.w,
          A = e.fontSize,
          o = e.wrap,
          s = void 0 === o || o,
          l = e.fontFamily;
        h(n, 50, l);
        var c = A / 50;
        i = i ? i / c : i;
        var p = "",
          f = 0,
          g = "",
          y = 0,
          v = "",
          m = 0;

        function w(e) {
          if (v) t.push({
            txt: v,
            w: m * c
          }), v = "", m = 0, p = g, f = y;
          else {
            var n = e,
              r = p[p.length - 1];
            e = u(r) ? 0 : e, r = u(r) ? "" : r;
            var a = p.slice(0, p.length - 1);
            t.push({
              txt: a,
              w: (f - n) * c
            }), v = "", m = 0, p = r, g = r, y = e, f = e
          }
        }
        var B = !0,
          M = !1,
          C = void 0;
        try {
          for (var I, x = (0, a.default)(r); !(B = (I = x.next()).done); B = !0) {
            var b = I.value,
              k = d(n, b, l);
            p += b, f += k, g += b, y += k, "\n" !== b ? i && f - i > 1e-4 && s ? w(k) :
              " " === b && (v += g, m += y, g = "", y = 0) : (v += g, m += y, g = "", y =
                0, w(0))
          }
        } catch (e) {
          M = !0, C = e
        } finally {
          try {
            !B && x.return && x.return()
          } finally {
            if (M) throw C
          }
        }
        return p && t.push({
          txt: p,
          w: f * c
        }), t
      },
      c = {
        default: {}
      },
      d = function (e, t, n) {
        if ("\n" === t) return 0;
        if (c[n] && !c[n][t]) c[n][t] = e.measureText(t).width;
        else if (!c[n]) {
          var a = e.measureText(t).width,
            i = void 0;
          if (c.default[t] ? i = c.default[t] : (h(e, 50, "NULL"), i = e.measureText(t)
              .width, h(e, 50, n)), a === i) return c.default[t] = i, c.default[t];
          c[n] = (0, r.default)({}, t, a)
        }
        return c[n][t]
      },
      h = (t.getTextWidth = function (e, t, n, r) {
        h(e, 50, r);
        var i = 0;
        return t.forEach((function (t) {
          var A = 0,
            o = !0,
            s = !1,
            u = void 0;
          try {
            for (var l, c = (0, a.default)(t); !(o = (l = c.next()).done); o = !
              0) {
              var h = l.value;
              A += d(e, h, r) * n / 50
            }
          } catch (e) {
            s = !0, u = e
          } finally {
            try {
              !o && c.return && c.return()
            } finally {
              if (s) throw u
            }
          }
          i = Math.max(i, A)
        })), i
      }, function (e, t, n) {
        e.font = t + "px " + n
      });
    t.drawTextOnCanvas = function (e, t, n, r) {
      var a, A = n.text;
      if (A) {
        var s = (0, i.getEditorPos)(e, n),
          u = s.sx,
          c = s.sy,
          d = s.w,
          h = s.h,
          p = s.angle;
        t.save(), t.translate(u, c), t.rotate(p);
        var f = l({
          ctx: t,
          txt: (null === (a = n.text) || void 0 === a ? void 0 : a.value) || "",
          fontSize: A.fontSize || 32,
          w: d,
          fontFamily: A.fontFamily
        });
        o({
          ctx: t,
          textArr: f,
          fontSize: A.fontSize || 32,
          fontFamily: A.fontFamily,
          lineHeightF: 1.25,
          w: d,
          h: h,
          fill: A.fill,
          stroke: A.stroke || "rgb(0,0,0)",
          clip: !0,
          align: A.textAlign || "left",
          vAlign: A.verticalAlign || "top"
        }), t.restore()
      }
    }
  }, function (e, t, n) {
    (function (e, n) {
      var r = "[object Arguments]",
        a = "[object Function]",
        i = "[object GeneratorFunction]",
        A = "[object Map]",
        o = "[object Set]",
        s = /\w*$/,
        u = /^\[object .+?Constructor\]$/,
        l = /^(?:0|[1-9]\d*)$/,
        c = {};
      c[r] = c["[object Array]"] = c["[object ArrayBuffer]"] = c["[object DataView]"] =
        c["[object Boolean]"] = c["[object Date]"] = c["[object Float32Array]"] = c[
          "[object Float64Array]"] = c["[object Int8Array]"] = c[
        "[object Int16Array]"] = c["[object Int32Array]"] = c[A] = c[
        "[object Number]"] = c["[object Object]"] = c["[object RegExp]"] = c[o] = c[
          "[object String]"] = c["[object Symbol]"] = c["[object Uint8Array]"] = c[
          "[object Uint8ClampedArray]"] = c["[object Uint16Array]"] = c[
          "[object Uint32Array]"] = !0, c["[object Error]"] = c[a] = c[
          "[object WeakMap]"] = !1;
      var d = "object" == typeof e && e && e.Object === Object && e,
        h = "object" == typeof self && self && self.Object === Object && self,
        p = d || h || Function("return this")(),
        f = t && !t.nodeType && t,
        g = f && "object" == typeof n && n && !n.nodeType && n,
        y = g && g.exports === f;

      function v(e, t) {
        return e.set(t[0], t[1]), e
      }

      function m(e, t) {
        return e.add(t), e
      }

      function w(e, t, n, r) {
        var a = -1,
          i = e ? e.length : 0;
        for (r && i && (n = e[++a]); ++a < i;) n = t(n, e[a], a, e);
        return n
      }

      function B(e) {
        var t = !1;
        if (null != e && "function" != typeof e.toString) try {
          t = !!(e + "")
        } catch (e) {}
        return t
      }

      function M(e) {
        var t = -1,
          n = Array(e.size);
        return e.forEach((function (e, r) {
          n[++t] = [r, e]
        })), n
      }

      function C(e, t) {
        return function (n) {
          return e(t(n))
        }
      }

      function I(e) {
        var t = -1,
          n = Array(e.size);
        return e.forEach((function (e) {
          n[++t] = e
        })), n
      }
      var x, b = Array.prototype,
        k = Function.prototype,
        T = Object.prototype,
        E = p["__core-js_shared__"],
        D = (x = /[^.]+$/.exec(E && E.keys && E.keys.IE_PROTO || "")) ?
        "Symbol(src)_1." + x : "",
        N = k.toString,
        P = T.hasOwnProperty,
        Q = T.toString,
        O = RegExp("^" + N.call(P).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(
          /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
        _ = y ? p.Buffer : void 0,
        S = p.Symbol,
        U = p.Uint8Array,
        F = C(Object.getPrototypeOf, Object),
        L = Object.create,
        j = T.propertyIsEnumerable,
        z = b.splice,
        R = Object.getOwnPropertySymbols,
        H = _ ? _.isBuffer : void 0,
        Y = C(Object.keys, Object),
        W = ge(p, "DataView"),
        K = ge(p, "Map"),
        G = ge(p, "Promise"),
        V = ge(p, "Set"),
        Z = ge(p, "WeakMap"),
        X = ge(Object, "create"),
        J = Be(W),
        q = Be(K),
        $ = Be(G),
        ee = Be(V),
        te = Be(Z),
        ne = S ? S.prototype : void 0,
        re = ne ? ne.valueOf : void 0;

      function ae(e) {
        var t = -1,
          n = e ? e.length : 0;
        for (this.clear(); ++t < n;) {
          var r = e[t];
          this.set(r[0], r[1])
        }
      }

      function ie(e) {
        var t = -1,
          n = e ? e.length : 0;
        for (this.clear(); ++t < n;) {
          var r = e[t];
          this.set(r[0], r[1])
        }
      }

      function Ae(e) {
        var t = -1,
          n = e ? e.length : 0;
        for (this.clear(); ++t < n;) {
          var r = e[t];
          this.set(r[0], r[1])
        }
      }

      function oe(e) {
        this.__data__ = new ie(e)
      }

      function se(e, t) {
        var n = Ce(e) || function (e) {
            return function (e) {
              return function (e) {
                return !!e && "object" == typeof e
              }(e) && Ie(e)
            }(e) && P.call(e, "callee") && (!j.call(e, "callee") || Q.call(e) == r)
          }(e) ? function (e, t) {
            for (var n = -1, r = Array(e); ++n < e;) r[n] = t(n);
            return r
          }(e.length, String) : [],
          a = n.length,
          i = !!a;
        for (var A in e) !t && !P.call(e, A) || i && ("length" == A || me(A, a)) || n
          .push(A);
        return n
      }

      function ue(e, t, n) {
        var r = e[t];
        P.call(e, t) && Me(r, n) && (void 0 !== n || t in e) || (e[t] = n)
      }

      function le(e, t) {
        for (var n = e.length; n--;)
          if (Me(e[n][0], t)) return n;
        return -1
      }

      function ce(e, t, n, u, l, d, h) {
        var p;
        if (u && (p = d ? u(e, l, d, h) : u(e)), void 0 !== p) return p;
        if (!ke(e)) return e;
        var f = Ce(e);
        if (f) {
          if (p = function (e) {
              var t = e.length,
                n = e.constructor(t);
              t && "string" == typeof e[0] && P.call(e, "index") && (n.index = e.index,
                n.input = e.input);
              return n
            }(e), !t) return function (e, t) {
            var n = -1,
              r = e.length;
            t || (t = Array(r));
            for (; ++n < r;) t[n] = e[n];
            return t
          }(e, p)
        } else {
          var g = ve(e),
            y = g == a || g == i;
          if (xe(e)) return function (e, t) {
            if (t) return e.slice();
            var n = new e.constructor(e.length);
            return e.copy(n), n
          }(e, t);
          if ("[object Object]" == g || g == r || y && !d) {
            if (B(e)) return d ? e : {};
            if (p = function (e) {
                return "function" != typeof e.constructor || we(e) ? {} : (t = F(e), ke(
                  t) ? L(t) : {});
                var t
              }(y ? {} : e), !t) return function (e, t) {
              return pe(e, ye(e), t)
            }(e, function (e, t) {
              return e && pe(t, Te(t), e)
            }(p, e))
          } else {
            if (!c[g]) return d ? e : {};
            p = function (e, t, n, r) {
              var a = e.constructor;
              switch (t) {
                case "[object ArrayBuffer]":
                  return he(e);
                case "[object Boolean]":
                case "[object Date]":
                  return new a(+e);
                case "[object DataView]":
                  return function (e, t) {
                    var n = t ? he(e.buffer) : e.buffer;
                    return new e.constructor(n, e.byteOffset, e.byteLength)
                  }(e, r);
                case "[object Float32Array]":
                case "[object Float64Array]":
                case "[object Int8Array]":
                case "[object Int16Array]":
                case "[object Int32Array]":
                case "[object Uint8Array]":
                case "[object Uint8ClampedArray]":
                case "[object Uint16Array]":
                case "[object Uint32Array]":
                  return function (e, t) {
                    var n = t ? he(e.buffer) : e.buffer;
                    return new e.constructor(n, e.byteOffset, e.length)
                  }(e, r);
                case A:
                  return function (e, t, n) {
                    return w(t ? n(M(e), !0) : M(e), v, new e.constructor)
                  }(e, r, n);
                case "[object Number]":
                case "[object String]":
                  return new a(e);
                case "[object RegExp]":
                  return function (e) {
                    var t = new e.constructor(e.source, s.exec(e));
                    return t.lastIndex = e.lastIndex, t
                  }(e);
                case o:
                  return function (e, t, n) {
                    return w(t ? n(I(e), !0) : I(e), m, new e.constructor)
                  }(e, r, n);
                case "[object Symbol]":
                  return i = e, re ? Object(re.call(i)) : {}
              }
              var i
            }(e, g, ce, t)
          }
        }
        h || (h = new oe);
        var C = h.get(e);
        if (C) return C;
        if (h.set(e, p), !f) var x = n ? function (e) {
          return function (e, t, n) {
            var r = t(e);
            return Ce(e) ? r : function (e, t) {
              for (var n = -1, r = t.length, a = e.length; ++n < r;) e[a + n] =
                t[n];
              return e
            }(r, n(e))
          }(e, Te, ye)
        }(e) : Te(e);
        return function (e, t) {
          for (var n = -1, r = e ? e.length : 0; ++n < r && !1 !== t(e[n], n, e););
        }(x || e, (function (r, a) {
          x && (r = e[a = r]), ue(p, a, ce(r, t, n, u, a, e, h))
        })), p
      }

      function de(e) {
        return !(!ke(e) || (t = e, D && D in t)) && (be(e) || B(e) ? O : u).test(Be(e));
        var t
      }

      function he(e) {
        var t = new e.constructor(e.byteLength);
        return new U(t).set(new U(e)), t
      }

      function pe(e, t, n, r) {
        n || (n = {});
        for (var a = -1, i = t.length; ++a < i;) {
          var A = t[a],
            o = r ? r(n[A], e[A], A, n, e) : void 0;
          ue(n, A, void 0 === o ? e[A] : o)
        }
        return n
      }

      function fe(e, t) {
        var n, r, a = e.__data__;
        return ("string" == (r = typeof (n = t)) || "number" == r || "symbol" == r ||
          "boolean" == r ? "__proto__" !== n : null === n) ? a["string" == typeof t ?
          "string" : "hash"] : a.map
      }

      function ge(e, t) {
        var n = function (e, t) {
          return null == e ? void 0 : e[t]
        }(e, t);
        return de(n) ? n : void 0
      }
      ae.prototype.clear = function () {
        this.__data__ = X ? X(null) : {}
      }, ae.prototype.delete = function (e) {
        return this.has(e) && delete this.__data__[e]
      }, ae.prototype.get = function (e) {
        var t = this.__data__;
        if (X) {
          var n = t[e];
          return "__lodash_hash_undefined__" === n ? void 0 : n
        }
        return P.call(t, e) ? t[e] : void 0
      }, ae.prototype.has = function (e) {
        var t = this.__data__;
        return X ? void 0 !== t[e] : P.call(t, e)
      }, ae.prototype.set = function (e, t) {
        return this.__data__[e] = X && void 0 === t ? "__lodash_hash_undefined__" : t,
          this
      }, ie.prototype.clear = function () {
        this.__data__ = []
      }, ie.prototype.delete = function (e) {
        var t = this.__data__,
          n = le(t, e);
        return !(n < 0) && (n == t.length - 1 ? t.pop() : z.call(t, n, 1), !0)
      }, ie.prototype.get = function (e) {
        var t = this.__data__,
          n = le(t, e);
        return n < 0 ? void 0 : t[n][1]
      }, ie.prototype.has = function (e) {
        return le(this.__data__, e) > -1
      }, ie.prototype.set = function (e, t) {
        var n = this.__data__,
          r = le(n, e);
        return r < 0 ? n.push([e, t]) : n[r][1] = t, this
      }, Ae.prototype.clear = function () {
        this.__data__ = {
          hash: new ae,
          map: new(K || ie),
          string: new ae
        }
      }, Ae.prototype.delete = function (e) {
        return fe(this, e).delete(e)
      }, Ae.prototype.get = function (e) {
        return fe(this, e).get(e)
      }, Ae.prototype.has = function (e) {
        return fe(this, e).has(e)
      }, Ae.prototype.set = function (e, t) {
        return fe(this, e).set(e, t), this
      }, oe.prototype.clear = function () {
        this.__data__ = new ie
      }, oe.prototype.delete = function (e) {
        return this.__data__.delete(e)
      }, oe.prototype.get = function (e) {
        return this.__data__.get(e)
      }, oe.prototype.has = function (e) {
        return this.__data__.has(e)
      }, oe.prototype.set = function (e, t) {
        var n = this.__data__;
        if (n instanceof ie) {
          var r = n.__data__;
          if (!K || r.length < 199) return r.push([e, t]), this;
          n = this.__data__ = new Ae(r)
        }
        return n.set(e, t), this
      };
      var ye = R ? C(R, Object) : function () {
          return []
        },
        ve = function (e) {
          return Q.call(e)
        };

      function me(e, t) {
        return !!(t = null == t ? 9007199254740991 : t) && ("number" == typeof e || l
          .test(e)) && e > -1 && e % 1 == 0 && e < t
      }

      function we(e) {
        var t = e && e.constructor;
        return e === ("function" == typeof t && t.prototype || T)
      }

      function Be(e) {
        if (null != e) {
          try {
            return N.call(e)
          } catch (e) {}
          try {
            return e + ""
          } catch (e) {}
        }
        return ""
      }

      function Me(e, t) {
        return e === t || e != e && t != t
      }(W && "[object DataView]" != ve(new W(new ArrayBuffer(1))) || K && ve(new K) !=
        A || G && "[object Promise]" != ve(G.resolve()) || V && ve(new V) != o || Z &&
        "[object WeakMap]" != ve(new Z)) && (ve = function (e) {
        var t = Q.call(e),
          n = "[object Object]" == t ? e.constructor : void 0,
          r = n ? Be(n) : void 0;
        if (r) switch (r) {
          case J:
            return "[object DataView]";
          case q:
            return A;
          case $:
            return "[object Promise]";
          case ee:
            return o;
          case te:
            return "[object WeakMap]"
        }
        return t
      });
      var Ce = Array.isArray;

      function Ie(e) {
        return null != e && function (e) {
          return "number" == typeof e && e > -1 && e % 1 == 0 && e <= 9007199254740991
        }(e.length) && !be(e)
      }
      var xe = H || function () {
        return !1
      };

      function be(e) {
        var t = ke(e) ? Q.call(e) : "";
        return t == a || t == i
      }

      function ke(e) {
        var t = typeof e;
        return !!e && ("object" == t || "function" == t)
      }

      function Te(e) {
        return Ie(e) ? se(e) : function (e) {
          if (!we(e)) return Y(e);
          var t = [];
          for (var n in Object(e)) P.call(e, n) && "constructor" != n && t.push(n);
          return t
        }(e)
      }
      n.exports = function (e) {
        return ce(e, !0, !0)
      }
    }).call(this, n(232), n(266)(e))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(5)),
      a = d(n(16)),
      i = n(28),
      A = d(n(135)),
      o = d(n(228)),
      s = n(39),
      u = n(15),
      l = n(65),
      c = n(19);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = {
        graphInit: function (e) {
          var t = e.start,
            n = e.end;
          if (t.dir + n.dir === 3) return o.default.graphInit(e);
          if (t.dir === n.dir) return o.default.graphInit(e);
          var r = n.x - t.x,
            a = n.y - t.y,
            A = t.dir === i.DIRECTION.LEFT || t.dir === i.DIRECTION.RIGHT,
            s = .75,
            u = [t.x + (A ? r * s : 0), t.y + (A ? 0 : a * s)],
            l = [n.x - (A ? 0 : r * s), n.y - (A ? a * s : 0)],
            c = [.125 * (t.x + n.x) + .375 * (u[0] + l[0]), .125 * (t.y + n.y) + .375 *
              (u[1] + l[1])
            ];
          return {
            start: t,
            end: n,
            connPs: [{
              x: c[0],
              y: c[1],
              type: i.IConnPointType.Split
            }]
          }
        },
        isUnderRect: function (e) {
          var t = e.data,
            n = e.rect,
            r = e.selectMode,
            a = t.boundary;
          if ((0, u.polygonIntersect)([
              [n.sx, n.sy],
              [n.sx + n.w, n.sy],
              [n.sx + n.w, n.sy + n.h],
              [n.sx, n.sy + n.h],
              [n.sx, n.sy]
            ], [
              [a.sx, a.sy],
              [a.sx + a.w, a.sy],
              [a.sx + a.w, a.sy + a.h],
              [a.sx, a.sy + a.h],
              [a.sx, a.sy]
            ])) {
            var i = t._points || [];
            if ("intersect" === r) {
              if (2 === i.length) return (0, s.isSegInRect)(i[0], i[1], n);
              for (var A = 0; A < i.length - 3; A += 3) {
                if ((0, s.isPInsideRect)(i[A], n) || (0, s.isPInsideRect)(i[A + 3],
                  n) || (0, s.isCurveSegIntersect)({
                    curve: [i[A], i[A + 1], i[A + 2], i[A + 3]],
                    seg: [
                      [n.sx, n.sy],
                      [n.sx + n.w, n.sy]
                    ]
                  }) || (0, s.isCurveSegIntersect)({
                    curve: [i[A], i[A + 1], i[A + 2], i[A + 3]],
                    seg: [
                      [n.sx + n.w, n.sy],
                      [n.sx + n.w, n.sy + n.h]
                    ]
                  }) || (0, s.isCurveSegIntersect)({
                    curve: [i[A], i[A + 1], i[A + 2], i[A + 3]],
                    seg: [
                      [n.sx + n.w, n.sy + n.h],
                      [n.sx, n.sy + n.h]
                    ]
                  }) || (0, s.isCurveSegIntersect)({
                    curve: [i[A], i[A + 1], i[A + 2], i[A + 3]],
                    seg: [
                      [n.sx, n.sy + n.h],
                      [n.sx, n.sy]
                    ]
                  })) return !0
              }
              return !1
            }
            var o = [
              [n.sx, n.sy],
              [n.sx + n.w, n.sy],
              [n.sx + n.w, n.sy + n.h],
              [n.sx, n.sy + n.h]
            ];
            if (2 === i.length) return (0, u.polygonContain)(i, o);
            for (var l = 0; l < i.length - 3; l += 3) {
              if (!((0, s.isPInsideRect)(i[l], n) && (0, s.isPInsideRect)(i[l + 3],
                  n) && (0, s.isPInsideRect)([.125 * i[l][0] + .375 * i[l + 1][0] +
                    .375 * i[l + 2][0] + .125 * i[l + 3][0], .125 * i[l][1] + .375 *
                    i[l + 1][1] + .375 * i[l + 2][1] + .125 * i[l + 3][1]
                  ], n))) return !1
            }
            return !0
          }
          return !1
        },
        isUnderPoint: function (e) {
          var t = e.data,
            n = e.p,
            r = e.op,
            a = {
              sx: n[0] - 5 / r.app.scale,
              sy: n[1] - 5 / r.app.scale,
              w: 10 / r.app.scale,
              h: 10 / r.app.scale
            };
          return this.isUnderRect({
            data: t,
            rect: a,
            selectMode: "intersect"
          })
        },
        patchLink: function (e) {
          var t = e.data,
            n = e.page,
            A = e.op,
            o = t.start,
            u = t.end,
            c = t.connPs,
            d = (0, s.getLinkEndPos)(A.app, o, e.op, n),
            h = (0, s.getLinkEndPos)(A.app, u, e.op, n);
          if (d && h) {
            var g = [d].concat((0, a.default)(p(t.connPs)), [h]),
              y = f({
                start: d,
                end: h,
                connPs: c
              });
            if (y.length > 0) {
              var v = [];
              v.push([g[0].x, g[0].y]);
              for (var m = 1; m < g.length; m++) v.push(y[2 * m - 2]), v.push(y[2 * m -
                1]), v.push([g[m].x, g[m].y]);
              t._points = v
            } else t._points = [
              [d.x, d.y],
              [h.x, h.y]
            ];
            var w = (0, l.getArrowPts)({
                data: t,
                op: A,
                startPos: d,
                endPos: h
              }),
              B = (0, l.getLinkTextPos)({
                data: t,
                op: A
              });
            t.boundary = (0, s.getCurveLinkBoundary)((0, r.default)((0, r.default)((0, r
              .default)({
              points: t._points
            }, t.start.aType === i.IArrowType.Arrow ? {
              startArrow: w.start
            } : {}), t.end.aType === i.IArrowType.Arrow ? {
              endArrow: w.end
            } : {}), {
              textBoundaries: B
            }))
          }
        },
        drawLink: function (e) {
          var t = e.data,
            n = e.ctx,
            r = e.op.app.scale,
            a = (t._points || []).map((function (e) {
              return (0, c.padPt)(e, r)
            }));
          if (2 === a.length) n.beginPath(), n.moveTo(a[0][0], a[0][1]), n.lineTo(a[1][
            0], a[1][1]), n.stroke();
          else if ((a.length - 1) % 3 == 0)
            for (var i = 0; i < a.length - 3; i += 3) n.beginPath(), n.moveTo(a[i][0],
              a[i][1]), n.bezierCurveTo(a[i + 1][0], a[i + 1][1], a[i + 2][0], a[i +
              2][1], a[i + 3][0], a[i + 3][1]), n.stroke()
        },
        graphAftTypeM: function (e) {
          var t = e.type,
            n = e.data,
            a = e.op,
            A = (0, s.getLinkEndPos)(a.app, n.start, a),
            u = (0, s.getLinkEndPos)(a.app, n.end, a);
          if (A && u) {
            if (t === i.ILinkType.Segment) {
              var l = o.default.tidyGraph({
                start: A,
                end: u,
                connPs: n.connPs,
                op: a
              }).connPs;
              return o.default.graphAftTypeM((0, r.default)((0, r.default)({}, e), {
                data: (0, r.default)((0, r.default)({}, n), {
                  connPs: l
                })
              }))
            }
            return t === i.ILinkType.Line ? o.default.tidyGraph({
              start: A,
              end: u,
              connPs: n.connPs,
              op: a
            }) : void 0
          }
        },
        graphAftConnD: function (e) {
          var t = e.data,
            n = e.index,
            a = e.op;
          if (1 === t.connPs.filter((function (e) {
              return e.type === i.IConnPointType.Anchor
            })).length && t.connPs[n].type === i.IConnPointType.Anchor) return h
            .tidyGraph((0, r.default)((0, r.default)({}, h.graphInit(e)), {
              op: a
            }));
          var A = o.default.graphAftConnD(e);
          return h.tidyGraph((0, r.default)((0, r.default)({}, A), {
            op: e.op
          }))
        },
        isConnValid: function (e) {
          return !0
        },
        graphAftConnM: function (e) {
          var t = (0, s.moveNonSegConnPoint)(e);
          return h.tidyGraph({
            start: e.startPos,
            end: e.endPos,
            connPs: t.connPs,
            op: e.op
          })
        },
        tidyGraph: function (e) {
          var t = e.start,
            n = e.end,
            A = e.connPs;
          if (1 === A.length && A[0].type === i.IConnPointType.Split) return e;
          var o = f({
            start: t,
            end: n,
            connPs: A
          });
          if (o.length > 0) {
            for (var s = [t].concat((0, a.default)(p(A)), [n]), u = [], l = 0; l < s
              .length - 1; l++) u.push({
              x: .125 * s[l].x + .375 * o[2 * l][0] + .375 * o[2 * l + 1][0] +
                .125 * s[l + 1].x,
              y: .125 * s[l].y + .375 * o[2 * l][1] + .375 * o[2 * l + 1][1] +
                .125 * s[l + 1].y,
              type: i.IConnPointType.Split
            }), l < s.length - 2 && u.push({
              x: s[l + 1].x,
              y: s[l + 1].y,
              type: i.IConnPointType.Anchor
            });
            return (0, r.default)((0, r.default)({}, e), {
              connPs: u
            })
          }
          var c = A.slice();
          return 0 === A.length && c.push({
            x: t.x / 2 + n.x / 2,
            y: t.y / 2 + n.y / 2,
            type: i.IConnPointType.Split
          }), (0, r.default)((0, r.default)({}, e), {
            connPs: c
          })
        },
        graphAftEndM: function (e) {
          var t = e.sTo,
            n = e.eTo,
            a = e.connPs,
            A = e.op;
          if (a.filter((function (e) {
              return e.type === i.IConnPointType.Anchor
            })).length <= 0) return h.graphInit({
            start: t,
            end: n,
            op: A
          });
          var o = a.slice(),
            s = a.length > 1 ? a[1] : n,
            u = a.length > 1 ? a[a.length - 2] : t;
          return o[0] = (0, r.default)((0, r.default)({}, o[0]), {
            x: t.x / 2 + s.x / 2,
            y: t.y / 2 + s.y / 2
          }), o[o.length - 1] = (0, r.default)((0, r.default)({}, o[o.length - 1]), {
            x: u.x / 2 + n.x / 2,
            y: u.y / 2 + n.y / 2
          }), h.tidyGraph({
            start: t,
            end: n,
            connPs: o,
            op: A
          })
        },
        getLinkPosByPer: function (e) {
          var t = e.per,
            n = e.data._points || [];
          if (2 === n.length) return [n[0][0] + (n[1][0] - n[0][0]) * t, n[0][1] + (n[1]
            [1] - n[0][1]) * t];
          if ((n.length - 1) % 3 == 0) {
            for (var r = (n.length - 1) / 3, a = 0, i = [0], A = 0; A < r; A++) {
              var o = n[3 * A],
                s = n[3 * A + 2];
              a += (0, u.dist)(o, s), i.push(a)
            }
            for (var l = 1; l < i.length; l++)
              if (i[l] / a >= t) {
                var c = (t - i[l - 1] / a) / (i[l] / a - i[l - 1] / a),
                  d = n[3 * l - 3],
                  h = n[3 * l - 2],
                  p = n[3 * l - 1],
                  f = n[3 * l];
                return [d[0] * (1 - c) * (1 - c) * (1 - c) + 3 * h[0] * c * (1 - c) * (
                    1 - c) + 3 * p[0] * c * c * (1 - c) + f[0] * c * c * c, d[1] * (
                    1 - c) * (1 - c) * (1 - c) + 3 * h[1] * c * (1 - c) * (1 - c) +
                  3 * p[1] * c * c * (1 - c) + f[1] * c * c * c
                ]
              }
          }
          return n[n.length - 1]
        },
        getNearestLinkInfo: function (e) {
          return A.default.getNearestLinkInfo(e)
        },
        getEndAngle: function (e) {
          var t = e.data,
            n = (e.op, t._points || []);
          if (n.length <= 2) return A.default.getEndAngle(e);
          var r = .1,
            a = [.9 * n[0][0] * .9 * .9 + 3 * n[1][0] * r * .9 * .9 + 3 * n[2][0] * r *
              r * .9 + n[3][0] * r * r * r, .9 * n[0][1] * .9 * .9 + 3 * n[1][1] * r *
              .9 * .9 + 3 * n[2][1] * r * r * .9 + n[3][1] * r * r * r
            ],
            i = [.9 * n[n.length - 1][0] * .9 * .9 + 3 * n[n.length - 2][0] * r * .9 *
              .9 + 3 * n[n.length - 3][0] * r * r * .9 + n[n.length - 4][0] * r * r * r,
              .9 * n[n.length - 1][1] * .9 * .9 + 3 * n[n.length - 2][1] * r * .9 * .9 +
              3 * n[n.length - 3][1] * r * r * .9 + n[n.length - 4][1] * r * r * r
            ];
          return [(0, u.getVecAngle)(a, n[0]), (0, u.getVecAngle)(i, n[n.length - 1])]
        },
        graphFromAnchors: function (e) {
          return 0 === e.anchors.length ? h.tidyGraph((0, r.default)((0, r.default)({},
            h.graphInit(e)), {
            op: e.op
          })) : h.tidyGraph((0, r.default)((0, r.default)({}, o.default
            .graphFromAnchors(e)), {
            op: e.op
          }))
        }
      },
      p = function (e) {
        return 1 === e.length ? e.slice() : e.filter((function (e) {
          return e.type === i.IConnPointType.Anchor
        }))
      },
      f = function (e) {
        var t = e.connPs,
          n = e.start,
          r = e.end,
          i = p(t);
        if (i.length > 0) {
          for (var A = [], o = [g(n, i[0]), n].concat((0, a.default)(i), [r, g(r, i[i
              .length - 1])]), u = o.length - 3, l = (0, s.getControlPoints)(o[u].x, o[
              u].y, o[u + 1].x, o[u + 1].y, o[u + 2].x, o[u + 2].y, .5), c = 0; c < o
            .length - 3; c++) {
            var d = void 0;
            d = 0 === c ? (0, s.getControlPoints)(o[c].x, o[c].y, o[c + 1].x, o[c + 1].y,
                o[c + 2].x, o[c + 2].y, .5) : c === o.length - 4 ? (0, s.getControlPoints)
              (A[2 * (c - 1)][0], A[2 * (c - 1)][1], o[c + 1].x, o[c + 1].y, l[0][0], l[0]
                [1], .5) : (0, s.getControlPoints)(A[2 * (c - 1)][0], A[2 * (c - 1)][1],
                o[c + 1].x, o[c + 1].y, o[c + 2].x, o[c + 2].y, .5), c > 0 && A.push(d[
              0]), A.push(d[1])
          }
          return A.push(l[0]), A
        }
        return []
      },
      g = function (e, t) {
        var n = 2 * (t.x - e.x),
          r = 2 * (t.y - e.y);
        switch (e.dir) {
          case i.DIRECTION.RIGHT:
          case i.DIRECTION.LEFT:
            return {
              x: e.x - n, y: t.y
            };
          case i.DIRECTION.UP:
          case i.DIRECTION.DOWN:
            return {
              x: t.x, y: e.y - r
            };
          default:
            return {
              x: e.x, y: e.y
            }
        }
      };
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.updateAuxLock = t.getMoveInAuxiliaryLine = void 0;
    var r = n(19);
    t.getMoveInAuxiliaryLine = function (e, t, n, a, i, A, o) {
      Math.abs(a - A.lastCx), Math.abs(i - A.lastCy);
      A.lastMoves[2] = A.lastMoves[1], A.lastMoves[1] = A.lastMoves[0], A.lastMoves[0][
          0] = Math.abs(a - A.lastCx), A.lastMoves[0][1] = Math.abs(i - A.lastCy), A
        .lastCx = a, A.lastCy = i;
      var s = .5 * A.lastMoves[0][0] + .35 * A.lastMoves[1][0] + .15 * A.lastMoves[2][
        0],
        u = .5 * A.lastMoves[0][1] + .35 * A.lastMoves[1][1] + .15 * A.lastMoves[2][1],
        l = e.scale,
        c = (0, r.getAuxSensitivity)(l),
        d = Math.abs(t + A.shiftX - A.pos[0]) / e.scale,
        h = Math.abs(n + A.shiftY - A.pos[1]) / e.scale,
        p = !A.lockX || d > A.lockX * c,
        f = !A.lockY || h > A.lockY * c,
        g = A.lockX > 0 && (h <= 1 && d >= 8 || h <= .1 && d >= 1) || d >= 2 && h >= 2,
        y = A.lockY > 0 && (d <= 1 && h >= 8 || d <= .1 && h >= 1) || d >= 2 && h >= 2,
        v = !1,
        m = !1;
      if (p ? v = !0 : g ? (A.unlockXCount += Math.ceil(d / 3), v = A.unlockXCount >=
        4) : (A.unlockXCount -= 1, A.unlockXCount = Math.max(0, A.unlockXCount)), f ?
        m = !0 : y ? (A.unlockYCount += Math.ceil(h / 3), m = A.unlockYCount >= 4) : (A
          .unlockYCount -= 1, A.unlockYCount = Math.max(0, A.unlockYCount)), m = m &&
        h > 0 || u > 1.3, !(v = v && d > 0 || s > 1.3) && !m) return null;
      if ("move" === o) {
        if (s > 1.3);
        else if (v)
          if (A.lockX > 0) {
            var w = t + A.shiftX > A.pos[0] ? 1 / e.scale : -1 / e.scale;
            A.shiftX = A.pos[0] + w - t, t = A.pos[0] + w
          } else {
            var B = t,
              M = B + A.shiftX - A.pos[0];
            Math.abs(A.shiftX) > 1 && (M *= M * A.shiftX > 0 ? .5 : 2), t = A.pos[0] +
              M, A.shiftX = t - B
          }
        else t = A.pos[0];
        if (u > 1.3);
        else if (m)
          if (A.lockY > 0) {
            var C = n + A.shiftY > A.pos[1] ? 1 / e.scale : -1 / e.scale;
            A.shiftY = A.pos[1] + C - n, n = A.pos[1] + C
          } else {
            var I = n,
              x = I + A.shiftY - A.pos[1];
            Math.abs(A.shiftY) > 1 && (x *= x * A.shiftY > 0 ? .5 : 2), n = A.pos[1] +
              x, A.shiftY = n - I
          }
        else n = A.pos[1]
      }
      return {
        mx: t,
        my: n
      }
    }, t.updateAuxLock = function (e, t, n, r) {
      e.lockX = r.lockX, e.lockY = r.lockY, e.pos = [t, n], e.unlockXCount = 0, e
        .unlockYCount = 0
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.addImage = function (e, t, n, a) {
      var i = t.app.room.currBoard,
        A = t.opsManager.currPage,
        o = !!(null == a ? void 0 : a.inProgress);
      if (a && void 0 !== a.boardName && void 0 !== a.pageName) {
        var s = t.app.room.getPage(a.boardName, a.pageName);
        s && (A = s)
      } else if (a && void 0 !== a.pageName) {
        var u = t.app.room.getPage(i.boardName, a.pageName);
        u && (A = u)
      }
      if (e.resourceCache.resourceLoaded(n)) {
        var l = e.resourceCache.getResource(n),
          c = r(l, a),
          d = c.width,
          h = c.height;
        t.dispatchImage(n, d, h, {
          antiLeechProp: a.antiLeechProp,
          inProgress: o,
          page: A,
          pos: null == a ? void 0 : a.pos
        })
      } else A.addWaitingResource(n), e.resourceCache.fetchResource({
        urlArr: n,
        antiLeechProp: a.antiLeechProp,
        cb: function (e) {
          var i = r(e = e, a),
            s = i.width,
            u = i.height;
          t.dispatchImage(n, s, u, {
            antiLeechProp: a.antiLeechProp,
            inProgress: o,
            page: A,
            pos: null == a ? void 0 : a.pos
          }), A.removeWaitingResource(n)
        }
      })
    };
    var r = function (e, t) {
        var n = (null == t ? void 0 : t.width) ? t.width : e.width || 300,
          r = (null == t ? void 0 : t.height) ? t.height : e.height || 300;
        return e.width && e.height && ((null == t ? void 0 : t.width) && (null == t ?
            void 0 : t.height) ? n / r < e.width / e.height ? n = r / e.height * e
          .width : r = n / e.width * e.height : (null == t ? void 0 : t.width) ? r = n /
          e.width * e.height : (null == t ? void 0 : t.height) && (n = r / e.height * e
            .width)), {
          width: n,
          height: r
        }
      },
      a = function (e, t) {
        var n = t.cropping,
          r = t.img,
          a = t.boundary,
          i = t.baseBoundary;
        if (n && i && (e.globalAlpha = .3, e.drawImage(r, i.sx, i.sy, i.w, i.h)), e
          .globalAlpha = 1, console.log("绘制图片: ", i), console.log("绘制图片 img: ", r), i) {
          var A = i.w / r.width,
            o = i.h / r.height;
          e.drawImage(r, (a.sx - i.sx) / A, (a.sy - i.sy) / o, a.w / A, a.h / o, a.sx, a
            .sy, a.w, a.h)
        } else e.drawImage(r, 0, 0, r.width, r.height, a.sx, a.sy, a.w, a.h)
      };
    t.draw = function (e, t, n, r, i) {
      var A = i.page,
        o = i.supportToDataUrl,
        s = i.baseBoundary,
        u = i.cropping,
        l = void 0 !== u && u;
      if (o && e.resourceCache.resourceLoaded(n, !0) ? a(t, {
          cropping: l,
          img: e.resourceCache.getResource(n, !0),
          boundary: r,
          baseBoundary: s
        }) : !o && e.resourceCache.resourceLoaded(n) ? a(t, {
          cropping: l,
          img: e.resourceCache.getResource(n, !1),
          boundary: r,
          baseBoundary: s
        }) : e.resourceCache.resourceLoaded("imageLoading") && a(t, {
          cropping: l,
          img: e.resourceCache.getResource("imageLoading"),
          boundary: r,
          baseBoundary: s
        }), !e.resourceCache.resourceLoaded(n)) {
        A.addWaitingResource(n);
        var c = [n].concat(i.backupUrls || []);
        e.resourceCache.fetchResource({
          urlArr: c,
          antiLeechProp: i.antiLeechProp,
          cb: function () {
            A.removeWaitingResource(n)
          }
        })
      }
    }, t.getImageProperPosition = function (e, t, n) {
      return {
        sx: e.app.camera.centerX - t / 2,
        sy: e.app.camera.centerY - n / 2
      }
    }, t.getUrlProperPosition = function (e, t, n) {
      console.log("getUrlProperPosition width, height:  ", t, n), console.log(
        "getUrlProperPosition centerX, centerY:  ", e.app.camera.centerX, e.app.camera
        .centerY);
      var r = t,
        a = n;
      n / t > 9 / 16 ? a = t / 16 * 9 : r = n / 9 * 16;
      var i = (t - r) / 2,
        A = (n - a) / 2;
      return console.log("getUrlProperPosition sx, sy, swidth, sheight:  ", i, A, r,
      a), {
        sx: i,
        sy: A,
        swidth: r,
        sheight: a
      }
    }, t.getBackgroundImagePorperPosition = function (e, t, n) {
      return {
        sx: -t / 2,
        sy: -n / 2,
        width: t,
        height: n
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.uploadMedia = void 0;
    var r = o(n(21)),
      a = o(n(11)),
      i = o(n(5)),
      A = o(n(156));

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    A.default.setExpireTime(864e5);
    t.uploadMedia = function (e, t) {
      if ("function" == typeof e.getAuthInfo) s(e, t);
      else {
        if (e.nim && "function" == typeof e.nim.previewFile) return e.nim.previewFile(
        t);
        e.logger.error("[wb] uploadMedia: cannot upload file")
      }
    };
    var s = function (e, t) {
        var n, r, a, o = (null === (n = e.serviceConf) || void 0 === n ? void 0 : n
            .mediaUploadAddr) ? e.serviceConf.mediaUploadAddr : "https://vcloud.163.com",
          s = (null === (r = e.serviceConf) || void 0 === r ? void 0 : r.directNosAddr) ?
          null === (a = e.serviceConf) || void 0 === a ? void 0 : a.directNosAddr :
          "https://wanproxy-web.127.net";
        e.getAuthInfo().then((function (n) {
          var r = A.default.createConfig({
              directUploadAddr: s,
              onError: function (e) {
                t.done(e)
              },
              onProgress: function (e) {
                t.uploadprogress({
                  percentageText: (100 * e).toFixed(2) + "%"
                })
              },
              onComplete: function (r) {
                u(e, n, r).then((function (e) {
                  t.done(void 0, (0, i.default)((0, i.default)({}, e), {
                    bucket: r.bucketName,
                    object: r.objectName
                  }))
                })).catch((function (e) {
                  t.done(e)
                }))
              }
            }),
            a = l(t);
          return d((0, i.default)((0, i.default)({}, n), {
            appkey: e.appkey,
            url: o + "/app/vod/upload/init"
          }), {
            originFileName: a.name
          }).then((function (e) {
            A.default.createTask(a, {
              bucketName: e.ret.bucket,
              objectName: e.ret.object,
              token: e.ret.xNosToken,
              payload: {
                mediaType: t.mediaType
              }
            }, r)
          })).catch((function (e) {
            t.done(e)
          }))
        }))
      },
      u = function (e, t, n) {
        var A, o = n && n.payload && n.payload.mediaType;
        if (!o) return a.default.reject("mediaType无法解析: " + o);
        var s = (null === (A = e.serviceConf) || void 0 === A ? void 0 : A
          .mediaUploadAddr) ? e.serviceConf.mediaUploadAddr : "https://vcloud.163.com";
        return d((0, i.default)((0, i.default)({
          url: s + "/app/vod/video/query"
        }, t), {
          appkey: e.appkey
        }), {
          objectNames: [n.objectName]
        }).then((function (e) {
          if (e.ret && Array.isArray(e.ret.list) && e.ret.list.length > 0)
          return "image" === o && e.ret.list[0].imgId ? e.ret.list[0].imgId : e
            .ret.list[0].vid ? e.ret.list[0].vid : a.default.reject("无法获取" + o +
              " id: " + (0, r.default)(e))
        })).then((function (n) {
          var r = "image" === o ? {
            imageId: n
          } : {
            vid: n
          };
          return d((0, i.default)((0, i.default)({
            url: "image" === o ? s + "/app/vod/image/get" : s +
              "/app/vod/video/get"
          }, t), {
            appkey: e.appkey
          }), r)
        })).then((function (e) {
          var t = void 0;
          "image" === o && e.ret && e.ret.url ? t = e.ret.url : e.ret && e.ret
            .origUrl && (t = e.ret.origUrl);
          var n = null == e ? void 0 : e.ret.width,
            i = null == e ? void 0 : e.ret.height;
          return "string" == typeof t && t.startsWith("http://") && (t =
            "https://" + t.slice(7)), "string" == typeof t ? {
            url: t,
            width: n,
            height: i
          } : a.default.reject("找不到" + o + "的url地址: " + (0, r.default)(e))
        }))
      },
      l = function (e) {
        var t = e.dataURL,
          n = e.fileInput,
          r = e.blob,
          a = e.fileName ? e.fileName : Date.now().toString();
        if (n && n.files && n.files.length > 0) return n.files[0];
        if (r) return new File([r], a, {
          type: "text/plain"
        });
        if (t) return c(t, a);
        throw new Error("previewFile参数中缺少数据")
      },
      c = function (e, t) {
        for (var n = e.split(","), r = n[0].match(/:(.*?);/)[1], a = atob(n[1]), i = a
            .length, A = new Uint8Array(i); i--;) A[i] = a.charCodeAt(i);
        return new File([A], t, {
          type: r
        })
      },
      d = function (e, t) {
        return fetch(e.url, {
          method: "post",
          headers: {
            "content-type": "application/json",
            AppKey: e.appkey,
            Nonce: e.nonce,
            CurTime: e.curTime.toString(),
            CheckSum: e.checksum
          },
          body: (0, r.default)(t)
        }).then((function (e) {
          return e.ok ? e.json() : a.default.reject(e)
        })).then((function (e) {
          return 200 !== e.code ? a.default.reject(e) : e
        }))
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = y(n(36)),
      a = y(n(5)),
      i = y(n(2)),
      A = y(n(0)),
      o = y(n(1)),
      s = y(n(3)),
      u = y(n(4)),
      l = y(n(9)),
      c = n(15),
      d = n(142),
      h = n(19),
      p = y(n(331)),
      f = y(n(332)),
      g = y(n(343));

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var v = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.mediaPlugins = {}, e.currentUrlOpid = "", e.description = "多媒体文件类操作", e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.app.on("event:deletePage", this.handleDeletePage.bind(this))
        }
      }, {
        key: "handleDeletePage",
        value: function (e) {
          if (e)
            for (var t in e.drawOpQueue) this.mediaPlugins.hasOwnProperty(t) &&
              (this.mediaPlugins[t].destroy(), delete this.mediaPlugins[t])
        }
      }, {
        key: "destroy",
        value: function () {
          for (var e in this.logger.log("[wb] MeidaOP destroy() type: ", this
              .type), this.mediaPlugins) this.mediaPlugins[e].destroy(),
            delete this.mediaPlugins[e]
        }
      }, {
        key: "getMediaPluginByType",
        value: function (e) {
          return "video" === e ? f.default : g.default
        }
      }, {
        key: "addUrl",
        value: function (e, t) {
          this.logger.log("[wb] MeidaOP addUrl() urm页面: ", e), this.app
            .setSelfAsBroadcaster(), this.app.enableCameraTransform(!1), this
            .opsManager.setCurrOp("mouse");
          var n = this.app.room.currBoard,
            r = this.opsManager.currPage;
          if (t && void 0 !== t.boardName && void 0 !== t.pageName) {
            var a = this.app.room.getPage(t.boardName, t.pageName);
            a && (r = a)
          } else if (t && void 0 !== t.pageName) {
            var i = this.app.room.getPage(n.boardName, t.pageName);
            i && (r = i)
          }
          var A = this.app.container.canvas.clientWidth,
            o = this.app.container.canvas.clientHeight,
            s = (0, d.getUrlProperPosition)(this, A, o),
            u = s.sx,
            l = s.sy,
            c = s.swidth,
            h = s.sheight;
          this.dispatchFromPage({
            type: this.type,
            url: e,
            skipUndo: !1,
            title: t.title || e || "",
            sourceType: this.type,
            boundary: {
              w: c,
              h: h,
              sx: u,
              sy: l
            }
          }, r)
        }
      }, {
        key: "addMedia",
        value: function (e, t) {
          var n = this,
            r = this.app.room.currBoard,
            a = this.opsManager.currPage;
          if (t && void 0 !== t.boardName && void 0 !== t.pageName) {
            var i = this.app.room.getPage(t.boardName, t.pageName);
            i && (a = i)
          } else if (t && void 0 !== t.pageName) {
            var A = this.app.room.getPage(r.boardName, t.pageName);
            A && (a = A)
          }
          if (this.app.resourceCache.mediaResourceLoaded(e, this.type)) {
            var o = this.app.resourceCache.getMediaResource(e),
              s = this.getMediaPluginByType(this.type).getElementWidth(o),
              u = this.getMediaPluginByType(this.type).getElementHeight(o);
            this.dispatchMedia({
              url: e,
              title: t.title,
              width: s,
              height: u,
              page: a,
              sourceType: t.sourceType,
              antiLeechProp: t.antiLeechProp
            })
          } else a.addWaitingResource(e), this.app.resourceCache
            .fetchMediaResource({
              antiLeechProp: t.antiLeechProp,
              url: e,
              sourceType: t.sourceType,
              type: this.type,
              cb: function (r) {
                r = r;
                var i = n.getMediaPluginByType(n.type).getElementWidth(r),
                  A = n.getMediaPluginByType(n.type).getElementHeight(r);
                n.dispatchMedia({
                  url: e,
                  title: t.title,
                  width: i,
                  height: A,
                  page: a,
                  sourceType: t.sourceType,
                  antiLeechProp: t.antiLeechProp
                }), a.removeWaitingResource(e)
              }
            })
        }
      }, {
        key: "dispatchMedia",
        value: function (e) {
          var t = e.width,
            n = e.height,
            r = (0, d.getImageProperPosition)(this, t, n),
            i = r.sx,
            A = r.sy,
            o = {};
          "audio" === this.type && (o.fixRealWorldHeight = g.default
            .getElementHeight()), e.page ? this.dispatchFromPage({
            type: this.type,
            url: e.url,
            skipUndo: !1,
            title: e.title ? e.title : "",
            sourceType: e.sourceType,
            antiLeechProp: e.antiLeechProp,
            boundary: (0, a.default)({
              w: t,
              h: n,
              sx: i,
              sy: A
            }, o)
          }, e.page) : this.dispatch({
            type: this.type,
            url: e.url,
            skipUndo: !1,
            title: e.title ? e.title : "",
            sourceType: e.sourceType,
            antiLeechProp: e.antiLeechProp,
            boundary: (0, a.default)({
              w: t,
              h: n,
              sx: i,
              sy: A
            }, o)
          })
        }
      }, {
        key: "preview",
        value: function (e, t, n) {}
      }, {
        key: "draw",
        value: function (e, t, n) {
          if ("url" !== e.data.type) {
            if (!this.mediaPlugins[e.opId]) {
              var a = this.getMediaPluginByType(e.data.type);
              this.mediaPlugins[e.opId] = new a(e, this.app, this)
            }
            var i = this.mediaPlugins[e.opId],
              A = e.data,
              o = (0, c.getTransformedBoundary)(this.app.scale, A),
              s = this.app.container.el,
              u = A.url;
            if (this.app.resourceCache.mediaResourceLoaded(u, this.type) && s) {
              var l = "number" == typeof e.data.layer ? e.data.layer > 0 :
                "video" !== e.data.type,
                d = s.querySelector("[id='" + e.opId + "']");
              d ? d.parentNode === this.app.container.bottomEl && l ? (this.app
                  .container.bottomEl.removeChild(d), this.app.container.topEl
                  .appendChild(d)) : d.parentNode !== this.app.container
                .topEl || l || (this.app.container.topEl.removeChild(d), this
                  .app.container.bottomEl.appendChild(d)) : ((d = document
                    .createElement("div")).style.position = "fixed", d.id = "" +
                  e.opId, d.className = "video-plugin-container", l ? this.app
                  .container.topEl.appendChild(d) : this.app.container.bottomEl
                  .appendChild(d), i.mountElement(d, u));
              var p = this.app.camera.convertWorldPointInContainer(o.sx, o.sy),
                f = (0, r.default)(p, 2),
                g = f[0],
                y = f[1],
                v = this.app.camera.convertWorldPointInContainer(o.sx + o.w, o
                  .sy + o.h),
                m = (0, r.default)(v, 2),
                w = m[0],
                B = m[1];
              d.style.width = w - g + "px", d.style.height = B - y + "px", d
                .style.left = g + this.app.container.left + "px", d.style.top =
                y + this.app.container.top + "px", (0, h.updateDocClipPath)(o,
                  this.app.camera, d, 1 / this.app.scale), i
                .onReceiveAttributes(e), i.onSizeChange({
                  width: w - g,
                  height: B - y
                })
            }
            var M = e.data.sourceType;
            this.app.resourceCache.mediaResourceLoaded(u, this.type) || (n.page
              .addWaitingResource(u), this.app.resourceCache
              .fetchMediaResource({
                antiLeechProp: e.data.antiLeechProp,
                url: u,
                sourceType: M,
                type: this.type,
                cb: function () {
                  n.page.removeWaitingResource(u)
                }
              }))
          } else this.drawUrl(e, t, n)
        }
      }, {
        key: "drawUrl",
        value: function (e, t, n) {
          this.logger.log("[wb] meidaOP drawUrl 渲染url, snapshot: ", e), this
            .mediaPlugins[e.opId] || (this.mediaPlugins[e.opId] = new p.default(
              e, this.app, this));
          var r = this.mediaPlugins[e.opId];
          this.currentUrlOpid = e.opId;
          var a = e.data,
            i = (0, c.getTransformedBoundary)(this.app.scale, a),
            A = this.app.container.el,
            o = a.url;
          if (this.app.resourceCache.mediaResourceLoaded(o, this.type) || (this
              .app.resourceCache.mediaResourceCache[o] = document.createElement(
                "iframe"), this.app.resourceCache.mediaResourceCache[o].src = o,
              this.app.emit("event:resource:onload", {
                type: this.type,
                url: o,
                loaded: !1,
                width: 0,
                height: 0,
                duration: 0
              })), this.app.resourceCache.mediaResourceLoaded(o, this.type) &&
            A) {
            var s = A.querySelector("[id='" + e.opId + "']");
            s ? s.parentNode === this.app.container.topEl && (this.app.container
                .topEl.removeChild(s), this.app.container.bottomEl.appendChild(
                  s)) : ((s = document.createElement("div")).id = "" + e.opId, s
                .className = "neteaseyunxin-wb-url-container", s.style
                .position = "relative", s.style.width = "100%", s.style.height =
                this.app.container.canvas.clientHeight + "px", this.app
                .container.bottomEl.appendChild(s), r.mountElement(s, o)), this
              .logger.log("[wb] meidaOP drawUrl boundary: ", i);
            var u = this.app.container.canvas.clientWidth,
              l = this.app.container.canvas.clientHeight,
              h = (0, d.getUrlProperPosition)(this, u, l),
              f = h.sx,
              g = h.sy,
              y = h.swidth,
              v = h.sheight;
            this.logger.log("[wb] meidaOP drawUrl sx, sy: ", f, g), this.logger
              .log("[wb] meidaOP drawUrl swidth, swidth: ", y, v), this.logger
              .log("[wb] meidaOP drawUrl left, top: ", this.app.container.left,
                this.app.container.top);
            var m = s.firstChild;
            m && (s.style.height = l + "px", m.style.position = "absolute", m
              .style.width = y + "px", m.style.height = v + "px", m.style
              .left = "50%", m.style.top = "50%", m.style.transform =
              "translate(-50%, -50%)"), r.refreshElementStyle({
              containerWidth: y,
              containerHeight: v,
              boundaryWidth: i.w,
              boundaryHeight: i.h
            }), r.onReceiveAttributes(e), r.onSizeChange({
              width: y,
              height: v
            })
          }
        }
      }, {
        key: "hide",
        value: function (e, t, n) {
          var r = this.mediaPlugins[e.opId];
          r && (r.destroy(), delete this.mediaPlugins[e.opId])
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          return (0, h.transformPropertyOverwriteOp)(e, t)
        }
      }]), t
    }(l.default);
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.replaceUrlHost = function (e, t) {
      var n = void 0,
        r = void 0;
      if (e.startsWith("https://")) n = e.slice(8), r = "https://";
      else {
        if (!e.startsWith("http://")) return e;
        n = e.slice(7), r = "http://"
      }
      var a = n.indexOf("/");
      return -1 !== a ? r + t + n.slice(a) : e
    }, t.getUrlWithoutQueryParams = function (e) {
      var t = e.indexOf("?");
      return -1 === t ? e : e.slice(0, t)
    }, t.getObjectNameFromUrl = function (e) {
      e.endsWith("/") && (e = e.slice(0, e.length - 1));
      var t = e.lastIndexOf("/");
      return -1 === t ? e : e.slice(t + 1)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        return (0, a.default)(this, t), (0, A.default)(this, (t.__proto__ || (0, r
          .default)(t)).apply(this, arguments))
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "subMany",
        value: function (e) {
          for (var t in e) this.on(t, e[t])
        }
      }, {
        key: "destroy",
        value: function () {
          var e = this;
          this.eventNames().forEach((function (t) {
            e.removeAllListeners(t)
          }))
        }
      }]), t
    }(s(n(48)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(25)),
      a = p(n(7)),
      i = p(n(103)),
      A = p(n(0)),
      o = p(n(1)),
      s = p(n(11)),
      u = n(107),
      l = n(227),
      c = n(248),
      d = n(95),
      h = n(364);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e, t, n, r) {
        return new(n || (n = s.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      g = function () {
        function e(t, n, r) {
          (0, A.default)(this, e), this.localDrawQueue = {}, this.localEditQueue = {},
            this.drawOpQueue = {}, this.hiddenOpQueue = {}, this.deletedOpQueue = {}, this
            .lastSelectOfUser = {}, this.lastInProgressSelectOfUser = {}, this
            .lastInProgressSnapshotOfUser = {}, this.lastLaserOfUser = {}, this
            .opQueueMap = {}, this.lastMousePointerOfUser = {}, this.groups = new i
            .default, this.idToGroup = new i.default, this.blockedResourceList = [], this
            ._currOpId = (0, u.v4)(), this._nextOpId = (0, u.v4)(), this.app = t, this
            .opsManager = t.opsManager, this.boardName = n, this.pageIndex = r, window
            .page = this
        }
        return (0, o.default)(e, [{
          key: "getBoard",
          value: function () {
            return this.app.room.boards[this.boardName]
          }
        }, {
          key: "prepareNewOpId",
          value: function () {
            this._currOpId = this._nextOpId, this._nextOpId = (0, u.v4)()
          }
        }, {
          key: "getOpId",
          value: function () {
            return this.app.account + "-" + this._currOpId
          }
        }, {
          key: "getNextOpId",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[
              0];
            return e ? (this.prepareNewOpId(), this.getOpId()) : this.app
              .account + "-" + this._nextOpId
          }
        }, {
          key: "setBackgroundSnapshot",
          value: function (e) {
            this.backgroundSnapshot = e, this.getBoard().hasDoc = !0
          }
        }, {
          key: "hasMedia",
          value: function (e) {
            for (var t in this.drawOpQueue)
              if (this.drawOpQueue[t].data.type === e) return !0;
            for (var n in this.hiddenOpQueue)
              if (this.hiddenOpQueue[n].data.type === e) return !0;
            return !1
          }
        }, {
          key: "getAnimPageIndex",
          value: function () {
            return this.payload && this.payload.hasOwnProperty("animPageIndex") ?
              this.payload.animPageIndex : null
          }
        }, {
          key: "setPayload",
          value: function (e) {
            this.payload = e
          }
        }, {
          key: "addWaitingResource",
          value: function (e) {
            -1 !== this.blockedResourceList.indexOf(e) || this.app.resourceCache
              .resourceLoaded(e) || this.blockedResourceList.push(e)
          }
        }, {
          key: "removeWaitingResource",
          value: function (e) {
            var t = this.blockedResourceList.indexOf(e);
            t > -1 && (this.blockedResourceList.splice(t, 1), this.blocked || (
              this.app.opsManager.hooks.pageReady.call(this.boardName, this
                .pageIndex), this.isCurrPage && (this.app.room.pageToRefresh =
                this)))
          }
        }, {
          key: "addOpInPage",
          value: function (e) {
            var t = !(arguments.length > 1 && void 0 !== arguments[1]) ||
              arguments[1];
            return "none" === e.opId ? (this.logger.warn("[wb]",
              "snapshot no opid", e), !1) : (this.lastInProgressSnapshotOfUser
              .hasOwnProperty(e.uid) && -1 === ["mouse-pointer"].indexOf(e.data
                .type) && (e.data.inProgress && e.opId === this
                .lastInProgressSnapshotOfUser[e.uid].snapshot.opId ||
                delete this.lastInProgressSnapshotOfUser[e.uid]),
              "background" === e.data.type && (this.setBackgroundSnapshot(e),
                this.cleanNonCanvasElements(!0)), (0, d.opNeedRefresh)(this,
              e) && !this.app.room.isReceivingBatchSnapshots && this
              .calcDrawOpQueue(e), -1 !== ["undo", "redo", "clear"].indexOf(e
                .data.type) && this.cleanNonCanvasElements(!1), this.app.room
              .isReceivingBatchSnapshots || ((0, d.opNeedRefresh)(this, e) ?
                t && this.boardName === this.app.room.currIndex && this
                .pageIndex === this.app.room.currBoard.currIndex.toString() && (
                  this.app.room.pageToRefresh = this) : (0, h
                  .addIncrementSnapshot)(this, e)), this.opsManager.hooks.opAdd
              .call(e), (0, d.opNeedRefresh)(this, e))
          }
        }, {
          key: "calcDrawOpQueue",
          value: function (e) {
            e && e.data.inProgress ? (0, c.processInProgressSnap)(this, e) : (0, c
              .calcDrawOpQueue)(this, this.app.room.isReceivingBatchSnapshots)
          }
        }, {
          key: "cleanNonCanvasElements",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0];
            (0, l.cleanNonCanvasElements)(this, e)
          }
        }, {
          key: "refresh",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {};
            (0, l.refresh)(this, e)
          }
        }, {
          key: "incRefresh",
          value: function () {
            (0, l.drawInProgressSnapshots)(this)
          }
        }, {
          key: "refreshOnStreamCanvas",
          value: function () {
            (0, l.refreshOnStreamCanvas)(this)
          }
        }, {
          key: "setLocalOp",
          value: function (e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[
              2];
            if (t)(0, d.patchOp)(this, t), n ? this.localEditQueue[e] = t : this
              .localDrawQueue[e] = t;
            else if (Array.isArray(e)) {
              var r = !0,
                i = !1,
                A = void 0;
              try {
                for (var o, s = (0, a.default)(e); !(r = (o = s.next())
                  .done); r = !0) {
                  var u = o.value;
                  delete this.localDrawQueue[u], delete this.localEditQueue[u]
                }
              } catch (e) {
                i = !0, A = e
              } finally {
                try {
                  !r && s.return && s.return()
                } finally {
                  if (i) throw A
                }
              }
            } else delete this.localDrawQueue[e], delete this.localEditQueue[e];
            n ? (this.calcDrawOpQueue(t), this.app.room.refresh()) : (0, l
              .drawLocalSnapshots)(this)
          }
        }, {
          key: "waitTilReady",
          value: function () {
            return f(this, void 0, void 0, r.default.mark((function e() {
              var t, n, a, i;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    for (a in t = this.drawOpQueue, n = [], t) i =
                      t[a], n.push(this.opsManager.waitTilReady(
                        i));
                    return this.backgroundSnapshot && n.push(this
                      .opsManager.waitTilReady(this
                        .backgroundSnapshot)), e.abrupt(
                      "return", s.default.all(n));
                  case 5:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "logger",
          get: function () {
            return this.app.logger
          }
        }, {
          key: "opQueue",
          get: function () {
            var e = this.app.room;
            try {
              return e.boardOps[this.boardName].pages[this.pageIndex]
                .inPageSnapshotIds.map((function (t) {
                  return e.opIdSnapshotMap[t].snapshot
                }))
            } catch (e) {
              return []
            }
          }
        }, {
          key: "isCurrPage",
          get: function () {
            return this.app.room.currBoard.currPage === this
          }
        }, {
          key: "bgCtx",
          get: function () {
            return this.app.container.bgCtx
          }
        }, {
          key: "ctx",
          get: function () {
            return this.app.container.ctx
          }
        }, {
          key: "frontCtx",
          get: function () {
            return this.app.container.frontCtx
          }
        }, {
          key: "localCtx",
          get: function () {
            return this.app.container.localCtx
          }
        }, {
          key: "laserCtx",
          get: function () {
            return this.app.container.laserCtx
          }
        }, {
          key: "width",
          get: function () {
            return this.app.container.width
          }
        }, {
          key: "height",
          get: function () {
            return this.app.container.height
          }
        }, {
          key: "blocked",
          get: function () {
            return this.blockedResourceList.length > 0
          }
        }]), e
      }();
    t.default = g
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = void 0,
      a = (t.transitionToCameraBound = function (e, t, n) {
        var r = t,
          i = e.centerX,
          A = e.centerY,
          o = e.width,
          s = e.height,
          u = e.app.isRecordPlayer ? 1 : 15;
        a({
          total: u,
          worker: function (t) {
            var n = (t + 1) / u;
            e.setCameraBound({
              centerX: r.centerX * n + i * (1 - n),
              centerY: r.centerY * n + A * (1 - n),
              width: r.width * n + o * (1 - n),
              height: r.height * n + s * (1 - n)
            })
          },
          callback: n
        })
      }, t.animate = function (e) {
        cancelAnimationFrame(r), i(0, e)
      }),
      i = (t.stopTransitionToCameraBound = function () {
        cancelAnimationFrame(r)
      }, function e(t, n) {
        t >= n.total ? "function" == typeof n.callback && n.callback() : r =
          requestAnimationFrame((function () {
            n.worker(t), e(t + 1, n)
          }))
      })
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEzIDE2VjEzSDI3VjE2IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0yMCAxM1YyNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTE4IDI3SDIyIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSIwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuNiIvPgo8L3N2Zz4K"
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = t.WActions = void 0;
    ! function (e) {
      e[e.VERSION = 0] = "VERSION", e[e.START = 1] = "START", e[e.MOVE = 2] = "MOVE", e[e
          .END = 3] = "END", e[e.REVOKE = 4] = "REVOKE", e[e.SERIAL = 5] = "SERIAL", e[e
          .CLEAR = 6] = "CLEAR", e[e.CLEAR_ACK = 7] = "CLEAR_ACK", e[e.SYNC_REQUEST = 8] =
        "SYNC_REQUEST", e[e.SYNC = 9] = "SYNC", e[e.SYNC_PREPARE = 10] = "SYNC_PREPARE",
        e[e.SYNC_PREPARE_ACK = 11] = "SYNC_PREPARE_ACK", e[e.LASER_PEN = 12] =
        "LASER_PEN", e[e.LASER_PEN_END = 13] = "LASER_PEN_END", e[e.FILE = 14] = "FILE",
        e[e.REDO = 15] = "REDO", e[e.CALIBRATE = 16] = "CALIBRATE", e[e.TEXT = 17] =
        "TEXT"
    }(r || (t.WActions = r = {}));
    t.StateRelatedActions = [r.CALIBRATE, r.FILE];
    var a = t.WB_MODE = void 0;
    ! function (e) {
      e[e.readonly = -1] = "readonly", e[e.draw = 1] = "draw"
    }(a || (t.WB_MODE = a = {}));
    var i = t.WB_TOOL = void 0;
    ! function (e) {
      e[e.flag = -1] = "flag", e[e.free = 1] = "free", e[e.line = 2] = "line", e[e.rect =
          3] = "rect", e[e.solidRect = 4] = "solidRect", e[e.roundRect = 5] = "roundRect",
        e[e.solidRoundRect = 6] = "solidRoundRect", e[e.circle = 7] = "circle", e[e
          .solidCircle = 8] = "solidCircle", e[e.ellipse = 9] = "ellipse", e[e
          .solidEllipse = 10] = "solidEllipse", e[e.fill = 11] = "fill", e[e.text = 12] =
        "text", e[e.erase = 13] = "erase"
    }(i || (t.WB_TOOL = i = {}))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.VersionAction = t.TextAction = t.CalibrateAction = t.RedoAction = t
      .FileAction = t.LaserPenEndAction = t.LaserPenAction = t.SyncPrepareAckAction = t
      .SyncPrepareAction = t.SyncAction = t.SyncRequestAction = t.ClearAckAction = t
      .ClearAction = t.SerialAction = t.RevokeAction = t.EndAction = t.MoveAction = t
      .StartAction = void 0;
    var r = d(n(16)),
      a = d(n(5)),
      i = d(n(2)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(4)),
      u = d(n(0)),
      l = d(n(21)),
      c = n(151);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
        return 0 === e || e < 0 ? "0" : 1 === e || e > 1 ? "1" : e.toFixed(4).slice(2)
      },
      p = function (e) {
        return "0" === e ? 0 : "1" === e ? 1 : parseFloat("0." + e)
      },
      f = function (e, t) {
        return "string" == typeof e ? e : (0, l.default)(e, t).replace(/;/gm, "；")
          .replace(/,/gm, "，").replace(/:/gm, "¦")
      },
      g = function (e) {
        var t = e.replace(/；/gm, ";").replace(/，/gm, ",").replace(/¦/gm, ":");
        return JSON.parse(t)
      },
      y = function e() {
        (0, u.default)(this, e)
      },
      v = t.StartAction = function (e) {
        function t(e, n) {
          (0, u.default)(this, t);
          var r = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
          return r.x = e, r.y = n, r.TYPE = c.WActions.START, r
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "toString",
          value: function () {
            var e = h(this.x),
              t = h(this.y);
            return this.TYPE + ":" + e + "," + t
          }
        }], [{
          key: "fromString",
          value: function (e) {
            var n = e.split(",");
            return new t(p(n[0]), p(n[1]))
          }
        }]), t
      }(y);
    t.MoveAction = function (e) {
      function t(e, n) {
        (0, u.default)(this, t);
        var r = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e,
          n));
        return r.x = e, r.y = n, r.TYPE = c.WActions.MOVE, r
      }
      return (0, s.default)(t, e), (0, A.default)(t, null, [{
        key: "fromString",
        value: function (e) {
          var n = e.split(",");
          return new t(p(n[0]), p(n[1]))
        }
      }]), t
    }(v), t.EndAction = function (e) {
      function t(e, n) {
        (0, u.default)(this, t);
        var r = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e,
          n));
        return r.x = e, r.y = n, r.TYPE = c.WActions.END, r
      }
      return (0, s.default)(t, e), (0, A.default)(t, null, [{
        key: "fromString",
        value: function (e) {
          var n = e.split(",");
          return new t(p(n[0]), p(n[1]))
        }
      }]), t
    }(v), t.RevokeAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.REVOKE, e.TYPE = c.WActions.REVOKE, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return "" + this.TYPE
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.SerialAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.SERIAL, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return "" + this.TYPE
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.ClearAction = function (e) {
      function t(e) {
        (0, u.default)(this, t);
        var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return n.TYPE = c.WActions.CLEAR, Array.isArray(e) ? n.accounts = e : n
          .accounts = e ? [e] : [], n
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = f(this.accounts);
          return this.TYPE + ":" + e
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t(g(e))
        }
      }]), t
    }(y), t.ClearAckAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.CLEAR_ACK, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return this.TYPE + ":"
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.SyncRequestAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.SYNC_REQUEST, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return "" + this.TYPE
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.SyncAction = function (e) {
      function t(e) {
        (0, u.default)(this, t);
        var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return n.sync = e, n.TYPE = c.WActions.SYNC, n
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = this.sync,
            t = f(e);
          return this.TYPE + ":" + t
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t(g(e))
        }
      }]), t
    }(y), t.SyncPrepareAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.SYNC_PREPARE, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = f(this, [""]);
          return this.TYPE + ":" + e
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.SyncPrepareAckAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.SYNC_PREPARE_ACK, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return this.TYPE + ":"
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y), t.LaserPenAction = function (e) {
      function t(e, n) {
        (0, u.default)(this, t);
        var r = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e,
          n));
        return r.x = e, r.y = n, r.TYPE = c.WActions.LASER_PEN, r
      }
      return (0, s.default)(t, e), (0, A.default)(t, null, [{
        key: "fromString",
        value: function (e) {
          var n = e.split(",");
          return new t(+n[0], +n[1])
        }
      }]), t
    }(v), t.LaserPenEndAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.LASER_PEN_END, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return this.TYPE + ":"
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y);
    (t.FileAction = function (e) {
      function t(e) {
        (0, u.default)(this, t);
        var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return n.file = e, n.TYPE = c.WActions.FILE, n
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = this.file,
            t = void 0;
          return t = "img" === e.type ? "0" : "h5" === e.type ? "1" : "-1", this
            .TYPE + ":" + (e.docId || "") + "," + (e.currentPage || "") + "," +
            (e.pageCount || "") + "," + t + "," + (e.url || "") + "," + (e
              .urlStr || "") + "," + (e.h5Cmd || "")
        }
      }], [{
        key: "fromString",
        value: function (e) {
          var n = e.split(","),
            r = void 0;
          return r = "0" === n[3] ? "img" : "1" === n[3] ? "h5" : "clear",
            new t({
              docId: n[0] || "",
              currentPage: parseInt(n[1] || "1"),
              pageCount: parseInt(n[2] || "1"),
              type: r || "img",
              url: n[4] || "",
              urlStr: n[5] || "",
              h5Cmd: n[6] || ""
            })
        }
      }, {
        key: "immuteUpdate",
        value: function (e, n) {
          var r = {},
            a = {};
          return t.PROPS.forEach((function (t) {
            var i = e[t],
              A = n[t];
            void 0 === A || "" === A ? r[t] = i : A !== i ? (a[t] = A, r[
              t] = A) : r[t] = i
          })), [r, a]
        }
      }]), t
    }(y)).PROPS = ["docId", "currentPage", "pageCount", "type", "url", "urlStr", "h5Cmd"];
    t.RedoAction = function (e) {
      function t() {
        (0, u.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return e.TYPE = c.WActions.REDO, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          return "" + this.TYPE
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t
        }
      }]), t
    }(y);
    var m = t.CalibrateAction = function (e) {
      function t(e) {
        (0, u.default)(this, t);
        var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return n.TYPE = c.WActions.CALIBRATE, (0, a.default)(n, e), n
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = f(this, t.PROPS);
          return this.TYPE + ":" + e
        }
      }], [{
        key: "fromString",
        value: function (e) {
          return new t(g(e))
        }
      }]), t
    }(y);
    m.USER_PROPS = ["mode", "tool", "size", "color", "fontsize", "isMouseDown", "keyDown",
      "flagPos"
    ], m.PROPS = [].concat((0, r.default)(m.USER_PROPS), ["altKey", "shiftKey", "which",
      "ctrlKey"
    ], ["ownerCanvasHeight", "ownerCanvasWidth"]), (t.TextAction = function (e) {
      function t(e, n, r) {
        (0, u.default)(this, t);
        var a = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return a.x = e, a.y = n, a.text = r, a.TYPE = c.WActions.TEXT, a
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = f(this, t.PROPS);
          return this.TYPE + ":" + e
        }
      }], [{
        key: "fromString",
        value: function (e) {
          var n = g(e);
          return new t(n.x, n.y, n.text)
        }
      }]), t
    }(y)).PROPS = ["x", "y", "text"], (t.VersionAction = function (e) {
      function t(e) {
        var n = e.ver,
          r = e.account,
          a = e.gzip;
        (0, u.default)(this, t);
        var A = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return A.TYPE = c.WActions.VERSION, A.ver = n, A.account = r, A.gzip = a, A
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "toString",
        value: function () {
          var e = f(this, t.PROPS);
          return this.TYPE + ":" + e
        }
      }], [{
        key: "fromString",
        value: function (e) {
          var n = g(e);
          return new t({
            ver: n.ver,
            account: n.account,
            gzip: n.gzip
          })
        }
      }]), t
    }(y)).PROPS = ["ver", "account", "gzip"]
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.on = function (e, t, n, r) {
      e.addEventListener(t, n, r)
    }, t.off = function (e, t, n, r) {
      e.removeEventListener(t, n, r)
    }
  }, function (e, t) {
    var n, r, a = e.exports = {};

    function i() {
      throw new Error("setTimeout has not been defined")
    }

    function A() {
      throw new Error("clearTimeout has not been defined")
    }

    function o(e) {
      if (n === setTimeout) return setTimeout(e, 0);
      if ((n === i || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0);
      try {
        return n(e, 0)
      } catch (t) {
        try {
          return n.call(null, e, 0)
        } catch (t) {
          return n.call(this, e, 0)
        }
      }
    }! function () {
      try {
        n = "function" == typeof setTimeout ? setTimeout : i
      } catch (e) {
        n = i
      }
      try {
        r = "function" == typeof clearTimeout ? clearTimeout : A
      } catch (e) {
        r = A
      }
    }();
    var s, u = [],
      l = !1,
      c = -1;

    function d() {
      l && s && (l = !1, s.length ? u = s.concat(u) : c = -1, u.length && h())
    }

    function h() {
      if (!l) {
        var e = o(d);
        l = !0;
        for (var t = u.length; t;) {
          for (s = u, u = []; ++c < t;) s && s[c].run();
          c = -1, t = u.length
        }
        s = null, l = !1,
          function (e) {
            if (r === clearTimeout) return clearTimeout(e);
            if ((r === A || !r) && clearTimeout) return r = clearTimeout, clearTimeout(e);
            try {
              r(e)
            } catch (t) {
              try {
                return r.call(null, e)
              } catch (t) {
                return r.call(this, e)
              }
            }
          }(e)
      }
    }

    function p(e, t) {
      this.fun = e, this.array = t
    }

    function f() {}
    a.nextTick = function (e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1)
          for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
        u.push(new p(e, t)), 1 !== u.length || l || o(h)
      }, p.prototype.run = function () {
        this.fun.apply(null, this.array)
      }, a.title = "browser", a.browser = !0, a.env = {}, a.argv = [], a.version = "", a
      .versions = {}, a.on = f, a.addListener = f, a.once = f, a.off = f, a
      .removeListener = f, a.removeAllListeners = f, a.emit = f, a.prependListener = f, a
      .prependOnceListener = f, a.listeners = function (e) {
        return []
      }, a.binding = function (e) {
        throw new Error("process.binding is not supported")
      }, a.cwd = function () {
        return "/"
      }, a.chdir = function (e) {
        throw new Error("process.chdir is not supported")
      }, a.umask = function () {
        return 0
      }
  }, function (e, t, n) {
    e.exports = {
      default: n(214),
      __esModule: !0
    }
  }, function (e, t, n) {
    self,
    e.exports = function () {
      "use strict";
      var e = {
          d: function (t, n) {
            for (var r in n) e.o(n, r) && !e.o(t, r) && Object.defineProperty(t, r, {
              enumerable: !0,
              get: n[r]
            })
          },
          o: function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
          }
        },
        t = {};
      e.d(t, {
        default: function () {
          return v
        }
      });
      var n = function e(t) {
        for (var n in function (e, t) {
              if (!(e instanceof t)) throw new TypeError(
                "Cannot call a class as a function")
            }(this, e), this.directUploadAddr = "https://wanproxy-web.127.net", this
            .retryCount = 4, this.trunkSize = 4194304, this.trunkUploadTimeout = 5e4,
            this.getOffsetTimeout = 1e4, this.version = "1.0", this.enableCache = !0,
            this.logger = console, this.onError = function (e) {}, this.onProgress =
            function (e) {}, this.onUploadProgress = function (e) {}, this.onComplete =
            function (e) {}, t) this[n] = t[n]
      };

      function r(e, t) {
        var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
        if (!n) {
          if (Array.isArray(e) || (n = function (e, t) {
              if (e) {
                if ("string" == typeof e) return a(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                return "Object" === n && e.constructor && (n = e.constructor.name),
                  "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n ||
                  /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? a(e, t) : void 0
              }
            }(e)) || t && e && "number" == typeof e.length) {
            n && (e = n);
            var r = 0,
              i = function () {};
            return {
              s: i,
              n: function () {
                return r >= e.length ? {
                  done: !0
                } : {
                  done: !1,
                  value: e[r++]
                }
              },
              e: function (e) {
                throw e
              },
              f: i
            }
          }
          throw new TypeError(
            "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            )
        }
        var A, o = !0,
          s = !1;
        return {
          s: function () {
            n = n.call(e)
          },
          n: function () {
            var e = n.next();
            return o = e.done, e
          },
          e: function (e) {
            s = !0, A = e
          },
          f: function () {
            try {
              o || null == n.return || n.return()
            } finally {
              if (s) throw A
            }
          }
        }
      }

      function a(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
        return r
      }
      var i = window.localStorage;
      window.localStorage && "function" == typeof window.localStorage.getItem &&
        "function" == typeof window.localStorage.setItem && "function" == typeof window
        .localStorage.removeItem || (i = {
          privateObj: {},
          setItem: function (e, t) {
            i.privateObj[e] = t
          },
          getItem: function (e) {
            return i.privateObj[e]
          },
          removeItem: function (e) {
            delete i.privateObj[e]
          },
          getKeys: function () {
            return Object.keys(i.privateObj)
          }
        });
      var A = {
          getFileKey: function (e) {
            var t = e.size.toString(),
              n = e.lastModified.toString();
            return "_NosUploader_" + e.name + t.slice(t.length - 5) + n.slice(n.length -
              5)
          },
          getFileInfo: function (e) {
            var t = i.getItem(e);
            if (!t) return null;
            try {
              return JSON.parse(t)
            } catch (e) {
              return null
            }
          },
          initFile: function (e, t, n) {
            A.clearExpiredInfo();
            var r = this.getFileKey(t),
              a = {
                ctx: void 0 !== e.ctx ? e.ctx : "",
                bucket: e.bucketName,
                obj: e.objectName,
                token: e.token,
                modifyAt: Date.now(),
                end: !1
              };
            return e.payload && (a.payload = e.payload), n && i.setItem(r, JSON
              .stringify(a)), r
          },
          setUploadContext: function (e, t, n) {
            var r = this.getFileInfo(e);
            r && (r.ctx = t, n && i.setItem(e, JSON.stringify(r)))
          },
          setComplete: function (e, t) {
            var n = this.getFileInfo(e);
            n && (n.modifyAt = Date.now(), n.end = !0, t && i.setItem(e, JSON.stringify(
              n)))
          },
          getUploadContext: function (e) {
            var t = this.getFileInfo(e);
            return t ? t.ctx : ""
          },
          removeFileInfo: function (e) {
            0 === e.indexOf("_NosUploader_") && i.removeItem(e)
          },
          clearExpiredInfo: function () {
            var e, t = "function" == typeof i.getKeys ? i.getKeys() : Object.keys(i),
              n = Date.now(),
              a = [],
              o = r(t);
            try {
              for (o.s(); !(e = o.n()).done;) {
                var s = e.value;
                if (0 === s.indexOf("_NosUploader_")) {
                  var u = A.getFileInfo(s);
                  null === u || n - u.modifyAt > v.expireTime ? i.removeItem(s) : a
                    .push({
                      fileInfo: u,
                      key: s
                    })
                }
              }
            } catch (e) {
              o.e(e)
            } finally {
              o.f()
            }
            if (a.length > v.maxFileCache) {
              var l, c = r(a.sort((function (e, t) {
                return t.fileInfo.modifyAt - e.fileInfo.modifyAt
              })).slice(v.maxFileCache));
              try {
                for (c.s(); !(l = c.n()).done;) {
                  var d = l.value;
                  0 === d.key.indexOf("_NosUploader_") && i.removeItem(d.key)
                }
              } catch (e) {
                c.e(e)
              } finally {
                c.f()
              }
            }
          }
        },
        o = A;

      function s(e) {
        return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ?
          function (e) {
            return typeof e
          } : function (e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !==
              Symbol.prototype ? "symbol" : typeof e
          })(e)
      }

      function u(e, t) {
        return !t || "object" !== s(t) && "function" != typeof t ? function (e) {
          if (void 0 === e) throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called");
          return e
        }(e) : t
      }

      function l(e) {
        var t = "function" == typeof Map ? new Map : void 0;
        return (l = function (e) {
          if (null === e || (n = e, -1 === Function.toString.call(n).indexOf(
              "[native code]"))) return e;
          var n;
          if ("function" != typeof e) throw new TypeError(
            "Super expression must either be null or a function");
          if (void 0 !== t) {
            if (t.has(e)) return t.get(e);
            t.set(e, r)
          }

          function r() {
            return c(e, arguments, p(this).constructor)
          }
          return r.prototype = Object.create(e.prototype, {
            constructor: {
              value: r,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          }), h(r, e)
        })(e)
      }

      function c(e, t, n) {
        return (c = d() ? Reflect.construct : function (e, t, n) {
          var r = [null];
          r.push.apply(r, t);
          var a = new(Function.bind.apply(e, r));
          return n && h(a, n.prototype), a
        }).apply(null, arguments)
      }

      function d() {
        if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
        if (Reflect.construct.sham) return !1;
        if ("function" == typeof Proxy) return !0;
        try {
          return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (
          function () {}))), !0
        } catch (e) {
          return !1
        }
      }

      function h(e, t) {
        return (h = Object.setPrototypeOf || function (e, t) {
          return e.__proto__ = t, e
        })(e, t)
      }

      function p(e) {
        return (p = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
          return e.__proto__ || Object.getPrototypeOf(e)
        })(e)
      }
      var f = function (e) {
          ! function (e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError(
              "Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                writable: !0,
                configurable: !0
              }
            }), t && h(e, t)
          }(a, e);
          var t, n, r = (t = a, n = d(), function () {
            var e, r = p(t);
            if (n) {
              var a = p(this).constructor;
              e = Reflect.construct(r, arguments, a)
            } else e = r.apply(this, arguments);
            return u(this, e)
          });

          function a(e, t) {
            var n;
            return function (e, t) {
                if (!(e instanceof t)) throw new TypeError(
                  "Cannot call a class as a function")
              }(this, a), (n = r.call(this, "NosUploadError:" + e)).errCode = t, n
              .errMsg = e, n
          }
          return a
        }(l(Error)),
        g = function () {
          function e(t, n, r) {
            ! function (e, t) {
              if (!(e instanceof t)) throw new TypeError(
                "Cannot call a class as a function")
            }(this, e), this.uploadState = "paused", this.config = r, this.file = t, this
              .param = n, this.fileKey = o.initFile(n, t, this.config.enableCache), this
              .resume()
          }
          var t;
          return (t = [{
            key: "resume",
            value: function () {
              var e = this;
              if ("uploading" !== this.uploadState) {
                this.setUploadState("uploading");
                var t = this.config;
                ! function e(t, n, r) {
                  if ("uploading" === t.uploadState) {
                    var a = t.config,
                      i = t.param,
                      A = o.getUploadContext(t.fileKey);
                    if (!A) return r(0);
                    var s = new XMLHttpRequest,
                      u = a.directUploadAddr + "/".concat(i.bucketName) + "/"
                      .concat(encodeURIComponent(i.objectName)) +
                      "?uploadContext" + "&context=".concat(A) + "&version="
                      .concat(a.version);
                    s.onreadystatechange = function () {
                      var i;
                      if ("abort" !== t.uploadState && 4 === s.readyState) {
                        var A;
                        try {
                          A = JSON.parse(s.responseText)
                        } catch (e) {
                          A = {
                            errMsg: "JsonParseError in getOffset",
                            errCode: 500
                          }
                        }
                        200 === s.status ? A.errCode ? t.config.onError(new f(A
                            .errMsg, A.errCode)) : r(A.offset) : s.status
                          .toString().match(/^5/) ? e(t, n - 1, r) : n > 0 ? (
                            "function" == typeof (null === (i = a.logger) ||
                              void 0 === i ? void 0 : i.error) && a.logger
                            .error("getOffset(".concat(u,
                              ") error. retry after 3 seconds. ").concat((
                              new Date).toTimeString())), setTimeout((
                            function () {
                              e(t, n - 1, r)
                            }), 3500)) : (o.removeFileInfo(t.fileKey), s
                            .status ? a.onError(new f("getOffset(".concat(u,
                              ") error: ").concat(s.status, " ").concat(s
                              .statusText))) : a.onError(new f("getOffset("
                              .concat(u, ") error. no Error Code"))))
                      }
                    }, s.open("get", u), s.setRequestHeader("x-nos-token", i
                      .token), s.timeout = a.getOffsetTimeout, s.send()
                  }
                }(this, t.retryCount, (function (n) {
                  ! function e(t, n, r, a) {
                    if ("uploading" === t.uploadState) {
                      var i = t.param,
                        A = t.config,
                        s = File.prototype.slice,
                        u = void 0 !== i.ctx ? i.ctx : "",
                        l = n + A.trunkSize > t.file.size,
                        c = l ? t.file.size : n + A.trunkSize,
                        d = new XMLHttpRequest,
                        h = A.directUploadAddr + "/".concat(i.bucketName) +
                        "/".concat(encodeURIComponent(i.objectName));
                      if (d.upload.onprogress = function (e) {
                          if ("abort" !== t.uploadState) {
                            var r = 0;
                            e.lengthComputable ? (r = (n + e.loaded) / t.file
                              .size, A.onProgress(r), A.onUploadProgress({
                                loaded: e.loaded,
                                total: t.file.size,
                                percentage: r,
                                percentageText: (100 * r).toFixed(2) + "%"
                              })) : A.onError(new f(
                              "browser does not support query upload progress"
                              ))
                          }
                        }, d.onreadystatechange = function () {
                          var i, s;
                          if ("abort" !== t.uploadState && 4 === d
                            .readyState) {
                            var u;
                            try {
                              u = JSON.parse(d.responseText)
                            } catch (e) {
                              "function" == typeof (null === (i = A.logger) ||
                                void 0 === i ? void 0 : i.error) && A.logger
                                .error("JsonParseError in uploadTrunk", e),
                                u = {
                                  errMsg: "JsonParseError in uploadTrunk"
                                }
                            }
                            200 === d.status ? (t.setContext(u.context), l ? (
                              a(), t.setComplete()) : e(t, u.offset, A
                              .retryCount, a)) : d.status.toString().match(
                              /^5/) ? r > 0 ? e(t, n, r - 1, a) : (o
                              .removeFileInfo(t.fileKey), A.onError(new f(u
                                .errMsg, u.errCode))) : r > 0 ? (
                              "function" == typeof (null === (s = A
                                .logger) || void 0 === s ? void 0 : s.error
                                ) && A.logger.error("uploadTrunk(".concat(h,
                                  ") error. retry after 3 seconds. ")
                                .concat((new Date).toTimeString())),
                              setTimeout((function () {
                                e(t, n, r - 1, a)
                              }), 3500)) : (o.removeFileInfo(t.fileKey), d
                              .status ? A.onError(new f("uploadTrunk("
                                .concat(h, ") error: ").concat(d.status,
                                  " ").concat(d.statusText))) : A.onError(
                                new f("uploadTrunk(".concat(h,
                                  ") error. no Error Code. Please check your network"
                                  ))))
                          }
                        }, d.open("post", h + "?offset=".concat(n) +
                          "&complete=".concat(l) + "&context=".concat(u) +
                          "&version=".concat(A.version)), d.setRequestHeader(
                          "x-nos-token", i.token), t.file.type && d
                        .setRequestHeader("content-type", t.file.type), d
                        .timeout = A.trunkUploadTimeout, "undefined" !=
                        typeof FileReader) {
                        var p = new FileReader;
                        p.addEventListener("load", (function (e) {
                          var t;
                          (null === (t = null == e ? void 0 : e
                            .target) || void 0 === t ? void 0 : t.result
                            ) ? d.send(e.target.result): A.onError(
                            new f("Read ArrayBuffer failed"))
                        })), p.addEventListener("error", (function (e) {
                          var t = e.target.error;
                          A.onError(new f("Read ArrayBuffer error. "
                            .concat(t.toString()), t.code))
                        })), p.readAsArrayBuffer(s.call(t.file, n, c))
                      } else d.send(s.call(t.file, n, c))
                    }
                  }(e, n, t.retryCount, (function () {
                    e.setUploadState("ended"), "function" == typeof t
                      .onComplete && t.onComplete(e.param)
                  }))
                }))
              }
            }
          }, {
            key: "pause",
            value: function () {
              this.setUploadState("paused")
            }
          }, {
            key: "abort",
            value: function () {
              this.setUploadState("abort"), o.removeFileInfo(this.fileKey), this
                .config.onError(new f("Upload Aborted", 10499))
            }
          }, {
            key: "setUploadState",
            value: function (e) {
              e !== this.uploadState && (this.uploadState = e)
            }
          }, {
            key: "setContext",
            value: function (e) {
              o.setUploadContext(this.fileKey, e, this.config.enableCache), this
                .param.ctx = e
            }
          }, {
            key: "setComplete",
            value: function () {
              o.setComplete(this.fileKey, this.config.enableCache), this
                .setUploadState("ended")
            }
          }]) && function (e, t) {
            for (var n = 0; n < t.length; n++) {
              var r = t[n];
              r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r
                .writable = !0), Object.defineProperty(e, r.key, r)
            }
          }(e.prototype, t), e
        }(),
        y = {
          maxFileCache: 6,
          expireTime: 864e5,
          getFileUploadInformation: function (e) {
            var t = o.getFileKey(e),
              n = o.getFileInfo(t);
            return null === n ? null : Date.now() - n.modifyAt > y.expireTime ? (o
              .removeFileInfo(t), null) : {
              uploadInfo: Object.assign({
                bucketName: n.bucket,
                objectName: n.obj,
                token: n.token,
                ctx: n.ctx
              }, n.payload ? {
                payload: n.payload
              } : {}),
              complete: n.end
            }
          },
          setMaxFileCache: function (e) {
            y.maxFileCache = e
          },
          setExpireTime: function (e) {
            y.expireTime = e
          },
          printCaches: function () {
            for (var e = 0, t = Object.keys(localStorage); e < t.length; e++) {
              var n = t[e],
                r = o.getFileInfo(n);
              r && console.log(r, "modifiedAt", new Date(r.modifyAt).toTimeString())
            }
          },
          createConfig: function (e) {
            return new n(e)
          },
          createTask: function (e, t, n) {
            return new g(e, t, n)
          }
        },
        v = y;
      return t.default
    }()
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.JSONStringify = void 0;
    var r = A(n(20)),
      a = A(n(21)),
      i = A(n(33));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }

    function o(e) {
      return "[object Number]" == Object.prototype.toString.call(e)
    }

    function s(e) {
      return "[object String]" == Object.prototype.toString.call(e)
    }

    function u(e) {
      return "[object Array]" == Object.prototype.toString.call(e)
    }

    function l(e) {
      return "[object Boolean]" == Object.prototype.toString.call(e)
    }

    function c(e) {
      return void 0 === e
    }

    function d(e) {
      return null === e
    }

    function h(e) {
      return "[object Symbol]" == Object.prototype.toString.call(e)
    }

    function p(e) {
      return !("[object Object]" != Object.prototype.toString.call(e) && (o(e) || s(e) ||
        l(e) || u(e) || d(e) || f(e) || c(e) || h(e)))
    }

    function f(e) {
      return "[object Function]" == Object.prototype.toString.call(e)
    }

    function g(e) {
      return "object" === ("undefined" == typeof HTMLElement ? "undefined" : (0, i
          .default)(HTMLElement)) ? e instanceof HTMLElement : e && "object" === (
          void 0 === e ? "undefined" : (0, i.default)(e)) && null !== e && 1 === e
        .nodeType && "string" == typeof e.nodeName
    }

    function y(e) {
      var t = Object.prototype.toString.call(e);
      return "[object global]" == t || "[object Window]" == t || "[object DOMWindow]" == t
    }
    t.getDate = function (e) {
        var t = e > 0 ? new Date(e) : new Date,
          n = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(),
          r = t.getMonth() < 9 ? "0" + (t.getMonth() + 1) : t.getMonth() + 1,
          a = t.getFullYear(),
          i = t.getHours() < 10 ? "0" + t.getHours() : t.getHours(),
          A = t.getMinutes() < 10 ? "0" + t.getMinutes() : t.getMinutes(),
          o = t.getSeconds() < 10 ? "0" + t.getSeconds() : t.getSeconds(),
          s = t.getMilliseconds() < 10 ? "0" + t.getMilliseconds() : t.getMilliseconds();
        s < 100 && (s = "0" + s);
        return {
          time: +t,
          year: a,
          month: r,
          day: n,
          hour: i,
          minute: A,
          second: o,
          millisecond: s
        }
      }, t.isNumber = o, t.isString = s, t.isArray = u, t.isBoolean = l, t.isUndefined =
      c, t.isNull = d, t.isSymbol = h, t.isObject = p, t.isFunction = f, t.isElement = g,
      t.isWindow = y, t.isPlainObject = function (e) {
        var t = Object.prototype.hasOwnProperty;
        if (!e || "object" !== (void 0 === e ? "undefined" : (0, i.default)(e)) || e
          .nodeType || y(e)) return !1;
        try {
          if (e.constructor && !t.call(e, "constructor") && !t.call(e.constructor
              .prototype, "isPrototypeOf")) return !1
        } catch (e) {
          return !1
        }
        var n = void 0;
        for (n in e);
        return void 0 === n || t.call(e, n)
      }, t.getObjAllKeys = function (e) {
        if (!p(e) && !u(e)) return [];
        var t = [];
        for (var n in e) t.push(n);
        return t.sort()
      }, t.getObjName = function (e) {
        return Object.prototype.toString.call(e).replace("[object ", "").replace("]", "")
      }, t.setStorage = function (e, t) {
        if (!window.localStorage) return;
        e = "vConsole_" + e, localStorage.setItem(e, t)
      }, t.getStorage = function (e) {
        if (!window.localStorage) return;
        return e = "vConsole_" + e, localStorage.getItem(e)
      };
    t.JSONStringify = function e(t) {
      var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 3;
      if ("function" == typeof t) return "[Function]";
      if (p(t) || Array.isArray(t)) {
        if (g(t)) return "[HTML Element]";
        if (v(t)) return "[NIM Object]"
      } else try {
        return (0, a.default)(t)
      } catch (e) {
        return ""
      }
      var A = "{",
        o = "}";
      if (Array.isArray(t) && (A = "[", o = "]"), n < 1) return "typeof [" + (void 0 ===
        t ? "undefined" : (0, i.default)(t)) + "]";
      var s = (0, r.default)(t);
      return A + s.map((function (r) {
        return r + ": " + e(t[r], n - 1)
      })).join(",") + o
    };

    function v(e) {
      return e && ("im" === e.subType || e.__isNimWhiteboard__)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.delay = void 0;
    var r, a = n(11),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.delay = function (e) {
      return new i.default((function (t) {
        setTimeout((function () {
          t()
        }), e)
      }))
    }
  }, function (e, t) {
    ! function (n) {
      "object" == typeof t && void 0 !== e ? e.exports = n() : "function" ==
        typeof define && define.amd ? define([], n) : ("undefined" != typeof window ?
          window : "undefined" != typeof global ? global : "undefined" != typeof self ?
          self : this).pako = n()
    }((function () {
      return function e(t, n, r) {
        function a(A, o) {
          if (!n[A]) {
            if (!t[A]) {
              var s = "function" == typeof require && require;
              if (!o && s) return s(A, !0);
              if (i) return i(A, !0);
              var u = new Error("Cannot find module '" + A + "'");
              throw u.code = "MODULE_NOT_FOUND", u
            }
            var l = n[A] = {
              exports: {}
            };
            t[A][0].call(l.exports, (function (e) {
              return a(t[A][1][e] || e)
            }), l, l.exports, e, t, n, r)
          }
          return n[A].exports
        }
        for (var i = "function" == typeof require && require, A = 0; A < r
          .length; A++) a(r[A]);
        return a
      }({
        1: [function (e, t, n) {
          "use strict";
          var r = e("./zlib/deflate"),
            a = e("./utils/common"),
            i = e("./utils/strings"),
            A = e("./zlib/messages"),
            o = e("./zlib/zstream"),
            s = Object.prototype.toString;

          function u(e) {
            if (!(this instanceof u)) return new u(e);
            this.options = a.assign({
              level: -1,
              method: 8,
              chunkSize: 16384,
              windowBits: 15,
              memLevel: 8,
              strategy: 0,
              to: ""
            }, e || {});
            var t = this.options;
            t.raw && 0 < t.windowBits ? t.windowBits = -t.windowBits : t
              .gzip && 0 < t.windowBits && t.windowBits < 16 && (t
                .windowBits += 16), this.err = 0, this.msg = "", this
              .ended = !1, this.chunks = [], this.strm = new o, this.strm
              .avail_out = 0;
            var n = r.deflateInit2(this.strm, t.level, t.method, t.windowBits,
              t.memLevel, t.strategy);
            if (0 !== n) throw new Error(A[n]);
            if (t.header && r.deflateSetHeader(this.strm, t.header), t
              .dictionary) {
              var l;
              if (l = "string" == typeof t.dictionary ? i.string2buf(t
                  .dictionary) : "[object ArrayBuffer]" === s.call(t
                  .dictionary) ? new Uint8Array(t.dictionary) : t.dictionary,
                0 !== (n = r.deflateSetDictionary(this.strm, l)))
              throw new Error(A[n]);
              this._dict_set = !0
            }
          }

          function l(e, t) {
            var n = new u(t);
            if (n.push(e, !0), n.err) throw n.msg || A[n.err];
            return n.result
          }
          u.prototype.push = function (e, t) {
            var n, A, o = this.strm,
              u = this.options.chunkSize;
            if (this.ended) return !1;
            A = t === ~~t ? t : !0 === t ? 4 : 0, "string" == typeof e ? o
              .input = i.string2buf(e) : "[object ArrayBuffer]" === s.call(
                e) ? o.input = new Uint8Array(e) : o.input = e, o.next_in =
              0, o.avail_in = o.input.length;
            do {
              if (0 === o.avail_out && (o.output = new a.Buf8(u), o
                  .next_out = 0, o.avail_out = u), 1 !== (n = r.deflate(o,
                  A)) && 0 !== n) return this.onEnd(n), !(this.ended = !0);
              0 !== o.avail_out && (0 !== o.avail_in || 4 !== A && 2 !==
                A) || ("string" === this.options.to ? this.onData(i
                    .buf2binstring(a.shrinkBuf(o.output, o.next_out))) :
                  this.onData(a.shrinkBuf(o.output, o.next_out)))
            } while ((0 < o.avail_in || 0 === o.avail_out) && 1 !== n);
            return 4 === A ? (n = r.deflateEnd(this.strm), this.onEnd(n),
              this.ended = !0, 0 === n) : 2 !== A || (this.onEnd(0), !(o
              .avail_out = 0))
          }, u.prototype.onData = function (e) {
            this.chunks.push(e)
          }, u.prototype.onEnd = function (e) {
            0 === e && ("string" === this.options.to ? this.result = this
                .chunks.join("") : this.result = a.flattenChunks(this
                  .chunks)), this.chunks = [], this.err = e, this.msg = this
              .strm.msg
          }, n.Deflate = u, n.deflate = l, n.deflateRaw = function (e, t) {
            return (t = t || {}).raw = !0, l(e, t)
          }, n.gzip = function (e, t) {
            return (t = t || {}).gzip = !0, l(e, t)
          }
        }, {
          "./utils/common": 3,
          "./utils/strings": 4,
          "./zlib/deflate": 8,
          "./zlib/messages": 13,
          "./zlib/zstream": 15
        }],
        2: [function (e, t, n) {
          "use strict";
          var r = e("./zlib/inflate"),
            a = e("./utils/common"),
            i = e("./utils/strings"),
            A = e("./zlib/constants"),
            o = e("./zlib/messages"),
            s = e("./zlib/zstream"),
            u = e("./zlib/gzheader"),
            l = Object.prototype.toString;

          function c(e) {
            if (!(this instanceof c)) return new c(e);
            this.options = a.assign({
              chunkSize: 16384,
              windowBits: 0,
              to: ""
            }, e || {});
            var t = this.options;
            t.raw && 0 <= t.windowBits && t.windowBits < 16 && (t
                .windowBits = -t.windowBits, 0 === t.windowBits && (t
                  .windowBits = -15)), !(0 <= t.windowBits && t.windowBits <
                16) || e && e.windowBits || (t.windowBits += 32), 15 < t
              .windowBits && t.windowBits < 48 && 0 == (15 & t.windowBits) &&
              (t.windowBits |= 15), this.err = 0, this.msg = "", this
              .ended = !1, this.chunks = [], this.strm = new s, this.strm
              .avail_out = 0;
            var n = r.inflateInit2(this.strm, t.windowBits);
            if (n !== A.Z_OK) throw new Error(o[n]);
            if (this.header = new u, r.inflateGetHeader(this.strm, this
                .header), t.dictionary && ("string" == typeof t.dictionary ? t
                .dictionary = i.string2buf(t.dictionary) :
                "[object ArrayBuffer]" === l.call(t.dictionary) && (t
                  .dictionary = new Uint8Array(t.dictionary)), t.raw && (n = r
                  .inflateSetDictionary(this.strm, t.dictionary)) !== A.Z_OK))
              throw new Error(o[n])
          }

          function d(e, t) {
            var n = new c(t);
            if (n.push(e, !0), n.err) throw n.msg || o[n.err];
            return n.result
          }
          c.prototype.push = function (e, t) {
            var n, o, s, u, c, d = this.strm,
              h = this.options.chunkSize,
              p = this.options.dictionary,
              f = !1;
            if (this.ended) return !1;
            o = t === ~~t ? t : !0 === t ? A.Z_FINISH : A.Z_NO_FLUSH,
              "string" == typeof e ? d.input = i.binstring2buf(e) :
              "[object ArrayBuffer]" === l.call(e) ? d.input =
              new Uint8Array(e) : d.input = e, d.next_in = 0, d.avail_in = d
              .input.length;
            do {
              if (0 === d.avail_out && (d.output = new a.Buf8(h), d
                  .next_out = 0, d.avail_out = h), (n = r.inflate(d, A
                  .Z_NO_FLUSH)) === A.Z_NEED_DICT && p && (n = r
                  .inflateSetDictionary(this.strm, p)), n === A
                .Z_BUF_ERROR && !0 === f && (n = A.Z_OK, f = !1), n !== A
                .Z_STREAM_END && n !== A.Z_OK) return this.onEnd(n), !(this
                .ended = !0);
              d.next_out && (0 !== d.avail_out && n !== A.Z_STREAM_END && (
                  0 !== d.avail_in || o !== A.Z_FINISH && o !== A
                  .Z_SYNC_FLUSH) || ("string" === this.options.to ? (s = i
                  .utf8border(d.output, d.next_out), u = d.next_out - s,
                  c = i.buf2string(d.output, s), d.next_out = u, d
                  .avail_out = h - u, u && a.arraySet(d.output, d
                    .output, s, u, 0), this.onData(c)) : this.onData(a
                  .shrinkBuf(d.output, d.next_out)))), 0 === d.avail_in &&
                0 === d.avail_out && (f = !0)
            } while ((0 < d.avail_in || 0 === d.avail_out) && n !== A
              .Z_STREAM_END);
            return n === A.Z_STREAM_END && (o = A.Z_FINISH), o === A
              .Z_FINISH ? (n = r.inflateEnd(this.strm), this.onEnd(n), this
                .ended = !0, n === A.Z_OK) : o !== A.Z_SYNC_FLUSH || (this
                .onEnd(A.Z_OK), !(d.avail_out = 0))
          }, c.prototype.onData = function (e) {
            this.chunks.push(e)
          }, c.prototype.onEnd = function (e) {
            e === A.Z_OK && ("string" === this.options.to ? this.result =
                this.chunks.join("") : this.result = a.flattenChunks(this
                  .chunks)), this.chunks = [], this.err = e, this.msg = this
              .strm.msg
          }, n.Inflate = c, n.inflate = d, n.inflateRaw = function (e, t) {
            return (t = t || {}).raw = !0, d(e, t)
          }, n.ungzip = d
        }, {
          "./utils/common": 3,
          "./utils/strings": 4,
          "./zlib/constants": 6,
          "./zlib/gzheader": 9,
          "./zlib/inflate": 11,
          "./zlib/messages": 13,
          "./zlib/zstream": 15
        }],
        3: [function (e, t, n) {
          "use strict";
          var r = "undefined" != typeof Uint8Array && "undefined" !=
            typeof Uint16Array && "undefined" != typeof Int32Array;
          n.assign = function (e) {
            for (var t, n, r = Array.prototype.slice.call(arguments, 1); r
              .length;) {
              var a = r.shift();
              if (a) {
                if ("object" != typeof a) throw new TypeError(a +
                  "must be non-object");
                for (var i in a) t = a, n = i, Object.prototype
                  .hasOwnProperty.call(t, n) && (e[i] = a[i])
              }
            }
            return e
          }, n.shrinkBuf = function (e, t) {
            return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e
              .length = t, e)
          };
          var a = {
              arraySet: function (e, t, n, r, a) {
                if (t.subarray && e.subarray) e.set(t.subarray(n, n + r),
                a);
                else
                  for (var i = 0; i < r; i++) e[a + i] = t[n + i]
              },
              flattenChunks: function (e) {
                var t, n, r, a, i, A;
                for (t = r = 0, n = e.length; t < n; t++) r += e[t].length;
                for (A = new Uint8Array(r), t = a = 0, n = e.length; t <
                  n; t++) i = e[t], A.set(i, a), a += i.length;
                return A
              }
            },
            i = {
              arraySet: function (e, t, n, r, a) {
                for (var i = 0; i < r; i++) e[a + i] = t[n + i]
              },
              flattenChunks: function (e) {
                return [].concat.apply([], e)
              }
            };
          n.setTyped = function (e) {
            e ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 =
              Int32Array, n.assign(n, a)) : (n.Buf8 = Array, n.Buf16 =
              Array, n.Buf32 = Array, n.assign(n, i))
          }, n.setTyped(r)
        }, {}],
        4: [function (e, t, n) {
          "use strict";
          var r = e("./common"),
            a = !0,
            i = !0;
          try {
            String.fromCharCode.apply(null, [0])
          } catch (e) {
            a = !1
          }
          try {
            String.fromCharCode.apply(null, new Uint8Array(1))
          } catch (e) {
            i = !1
          }
          for (var A = new r.Buf8(256), o = 0; o < 256; o++) A[o] = 252 <= o ?
            6 : 248 <= o ? 5 : 240 <= o ? 4 : 224 <= o ? 3 : 192 <= o ? 2 : 1;

          function s(e, t) {
            if (t < 65534 && (e.subarray && i || !e.subarray && a))
            return String.fromCharCode.apply(null, r.shrinkBuf(e, t));
            for (var n = "", A = 0; A < t; A++) n += String.fromCharCode(e[
            A]);
            return n
          }
          A[254] = A[254] = 1, n.string2buf = function (e) {
            var t, n, a, i, A, o = e.length,
              s = 0;
            for (i = 0; i < o; i++) 55296 == (64512 & (n = e.charCodeAt(
              i))) && i + 1 < o && 56320 == (64512 & (a = e.charCodeAt(i +
                1))) && (n = 65536 + (n - 55296 << 10) + (a - 56320), i++),
              s += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
            for (t = new r.Buf8(s), i = A = 0; A < s; i++) 55296 == (64512 &
              (n = e.charCodeAt(i))) && i + 1 < o && 56320 == (64512 & (
              a = e.charCodeAt(i + 1))) && (n = 65536 + (n - 55296 <<
              10) + (a - 56320), i++), n < 128 ? t[A++] = n : (n < 2048 ?
              t[A++] = 192 | n >>> 6 : (n < 65536 ? t[A++] = 224 | n >>>
                12 : (t[A++] = 240 | n >>> 18, t[A++] = 128 | n >>> 12 &
                  63), t[A++] = 128 | n >>> 6 & 63), t[A++] = 128 | 63 & n
              );
            return t
          }, n.buf2binstring = function (e) {
            return s(e, e.length)
          }, n.binstring2buf = function (e) {
            for (var t = new r.Buf8(e.length), n = 0, a = t.length; n <
              a; n++) t[n] = e.charCodeAt(n);
            return t
          }, n.buf2string = function (e, t) {
            var n, r, a, i, o = t || e.length,
              u = new Array(2 * o);
            for (n = r = 0; n < o;)
              if ((a = e[n++]) < 128) u[r++] = a;
              else if (4 < (i = A[a])) u[r++] = 65533, n += i - 1;
            else {
              for (a &= 2 === i ? 31 : 3 === i ? 15 : 7; 1 < i && n < o;)
                a = a << 6 | 63 & e[n++], i--;
              1 < i ? u[r++] = 65533 : a < 65536 ? u[r++] = a : (a -= 65536,
                u[r++] = 55296 | a >> 10 & 1023, u[r++] = 56320 | 1023 & a
                )
            }
            return s(u, r)
          }, n.utf8border = function (e, t) {
            var n;
            for ((t = t || e.length) > e.length && (t = e.length), n = t -
              1; 0 <= n && 128 == (192 & e[n]);) n--;
            return n < 0 || 0 === n ? t : n + A[e[n]] > t ? n : t
          }
        }, {
          "./common": 3
        }],
        5: [function (e, t, n) {
          "use strict";
          t.exports = function (e, t, n, r) {
            for (var a = 65535 & e | 0, i = e >>> 16 & 65535 | 0, A =
              0; 0 !== n;) {
              for (n -= A = 2e3 < n ? 2e3 : n; i = i + (a = a + t[r++] |
                0) | 0, --A;);
              a %= 65521, i %= 65521
            }
            return a | i << 16 | 0
          }
        }, {}],
        6: [function (e, t, n) {
          "use strict";
          t.exports = {
            Z_NO_FLUSH: 0,
            Z_PARTIAL_FLUSH: 1,
            Z_SYNC_FLUSH: 2,
            Z_FULL_FLUSH: 3,
            Z_FINISH: 4,
            Z_BLOCK: 5,
            Z_TREES: 6,
            Z_OK: 0,
            Z_STREAM_END: 1,
            Z_NEED_DICT: 2,
            Z_ERRNO: -1,
            Z_STREAM_ERROR: -2,
            Z_DATA_ERROR: -3,
            Z_BUF_ERROR: -5,
            Z_NO_COMPRESSION: 0,
            Z_BEST_SPEED: 1,
            Z_BEST_COMPRESSION: 9,
            Z_DEFAULT_COMPRESSION: -1,
            Z_FILTERED: 1,
            Z_HUFFMAN_ONLY: 2,
            Z_RLE: 3,
            Z_FIXED: 4,
            Z_DEFAULT_STRATEGY: 0,
            Z_BINARY: 0,
            Z_TEXT: 1,
            Z_UNKNOWN: 2,
            Z_DEFLATED: 8
          }
        }, {}],
        7: [function (e, t, n) {
          "use strict";
          var r = function () {
            for (var e, t = [], n = 0; n < 256; n++) {
              e = n;
              for (var r = 0; r < 8; r++) e = 1 & e ? 3988292384 ^ e >>> 1 :
                e >>> 1;
              t[n] = e
            }
            return t
          }();
          t.exports = function (e, t, n, a) {
            var i = r,
              A = a + n;
            e ^= -1;
            for (var o = a; o < A; o++) e = e >>> 8 ^ i[255 & (e ^ t[o])];
            return -1 ^ e
          }
        }, {}],
        8: [function (e, t, n) {
          "use strict";
          var r, a = e("../utils/common"),
            i = e("./trees"),
            A = e("./adler32"),
            o = e("./crc32"),
            s = e("./messages"),
            u = -2,
            l = 258,
            c = 262,
            d = 113;

          function h(e, t) {
            return e.msg = s[t], t
          }

          function p(e) {
            return (e << 1) - (4 < e ? 9 : 0)
          }

          function f(e) {
            for (var t = e.length; 0 <= --t;) e[t] = 0
          }

          function g(e) {
            var t = e.state,
              n = t.pending;
            n > e.avail_out && (n = e.avail_out), 0 !== n && (a.arraySet(e
                .output, t.pending_buf, t.pending_out, n, e.next_out), e
              .next_out += n, t.pending_out += n, e.total_out += n, e
              .avail_out -= n, t.pending -= n, 0 === t.pending && (t
                .pending_out = 0))
          }

          function y(e, t) {
            i._tr_flush_block(e, 0 <= e.block_start ? e.block_start : -1, e
              .strstart - e.block_start, t), e.block_start = e.strstart, g(e
              .strm)
          }

          function v(e, t) {
            e.pending_buf[e.pending++] = t
          }

          function m(e, t) {
            e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e
              .pending++] = 255 & t
          }

          function w(e, t) {
            var n, r, a = e.max_chain_length,
              i = e.strstart,
              A = e.prev_length,
              o = e.nice_match,
              s = e.strstart > e.w_size - c ? e.strstart - (e.w_size - c) : 0,
              u = e.window,
              d = e.w_mask,
              h = e.prev,
              p = e.strstart + l,
              f = u[i + A - 1],
              g = u[i + A];
            e.prev_length >= e.good_match && (a >>= 2), o > e.lookahead && (
              o = e.lookahead);
            do {
              if (u[(n = t) + A] === g && u[n + A - 1] === f && u[n] === u[
                i] && u[++n] === u[i + 1]) {
                i += 2, n++;
                do {} while (u[++i] === u[++n] && u[++i] === u[++n] && u[++
                  i] === u[++n] && u[++i] === u[++n] && u[++i] === u[++n] &&
                  u[++i] === u[++n] && u[++i] === u[++n] && u[++i] === u[++
                  n] && i < p);
                if (r = l - (p - i), i = p - l, A < r) {
                  if (e.match_start = t, o <= (A = r)) break;
                  f = u[i + A - 1], g = u[i + A]
                }
              }
            } while ((t = h[t & d]) > s && 0 != --a);
            return A <= e.lookahead ? A : e.lookahead
          }

          function B(e) {
            var t, n, r, i, s, u, l, d, h, p, f = e.w_size;
            do {
              if (i = e.window_size - e.lookahead - e.strstart, e.strstart >=
                f + (f - c)) {
                for (a.arraySet(e.window, e.window, f, f, 0), e.match_start -=
                  f, e.strstart -= f, e.block_start -= f, t = n = e
                  .hash_size; r = e.head[--t], e.head[t] = f <= r ? r - f : 0,
                  --n;);
                for (t = n = f; r = e.prev[--t], e.prev[t] = f <= r ? r - f :
                  0, --n;);
                i += f
              }
              if (0 === e.strm.avail_in) break;
              if (u = e.strm, l = e.window, d = e.strstart + e.lookahead, p =
                void 0, (h = i) < (p = u.avail_in) && (p = h), n = 0 === p ?
                0 : (u.avail_in -= p, a.arraySet(l, u.input, u.next_in, p, d),
                  1 === u.state.wrap ? u.adler = A(u.adler, l, p, d) : 2 === u
                  .state.wrap && (u.adler = o(u.adler, l, p, d)), u.next_in +=
                  p, u.total_in += p, p), e.lookahead += n, e.lookahead + e
                .insert >= 3)
                for (s = e.strstart - e.insert, e.ins_h = e.window[s], e
                  .ins_h = (e.ins_h << e.hash_shift ^ e.window[s + 1]) & e
                  .hash_mask; e.insert && (e.ins_h = (e.ins_h << e
                      .hash_shift ^ e.window[s + 3 - 1]) & e.hash_mask, e
                    .prev[s & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] =
                    s, s++, e.insert--, !(e.lookahead + e.insert < 3)););
            } while (e.lookahead < c && 0 !== e.strm.avail_in)
          }

          function M(e, t) {
            for (var n, r;;) {
              if (e.lookahead < c) {
                if (B(e), e.lookahead < c && 0 === t) return 1;
                if (0 === e.lookahead) break
              }
              if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e
                    .hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
                  n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[
                    e.ins_h] = e.strstart), 0 !== n && e.strstart - n <= e
                .w_size - c && (e.match_length = w(e, n)), e.match_length >= 3
                )
                if (r = i._tr_tally(e, e.strstart - e.match_start, e
                    .match_length - 3), e.lookahead -= e.match_length, e
                  .match_length <= e.max_lazy_match && e.lookahead >= 3) {
                  for (e.match_length--; e.strstart++, e.ins_h = (e.ins_h << e
                      .hash_shift ^ e.window[e.strstart + 3 - 1]) & e
                    .hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e
                      .ins_h], e.head[e.ins_h] = e.strstart, 0 != --e
                    .match_length;);
                  e.strstart++
                } else e.strstart += e.match_length, e.match_length = 0, e
                  .ins_h = e.window[e.strstart], e.ins_h = (e.ins_h << e
                    .hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
              else r = i._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--,
                e.strstart++;
              if (r && (y(e, !1), 0 === e.strm.avail_out)) return 1
            }
            return e.insert = e.strstart < 2 ? e.strstart : 2, 4 === t ? (y(e,
              !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (y(e, !
              1), 0 === e.strm.avail_out) ? 1 : 2
          }

          function C(e, t) {
            for (var n, r, a;;) {
              if (e.lookahead < c) {
                if (B(e), e.lookahead < c && 0 === t) return 1;
                if (0 === e.lookahead) break
              }
              if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e
                    .hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
                  n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[
                    e.ins_h] = e.strstart), e.prev_length = e.match_length, e
                .prev_match = e.match_start, e.match_length = 2, 0 !== n && e
                .prev_length < e.max_lazy_match && e.strstart - n <= e
                .w_size - c && (e.match_length = w(e, n), e.match_length <=
                  5 && (1 === e.strategy || 3 === e.match_length && 4096 < e
                    .strstart - e.match_start) && (e.match_length = 2)), e
                .prev_length >= 3 && e.match_length <= e.prev_length) {
                for (a = e.strstart + e.lookahead - 3, r = i._tr_tally(e, e
                    .strstart - 1 - e.prev_match, e.prev_length - 3), e
                  .lookahead -= e.prev_length - 1, e.prev_length -= 2; ++e
                  .strstart <= a && (e.ins_h = (e.ins_h << e.hash_shift ^ e
                      .window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e
                      .strstart & e.w_mask] = e.head[e.ins_h], e.head[e
                    .ins_h] = e.strstart), 0 != --e.prev_length;);
                if (e.match_available = 0, e.match_length = 2, e.strstart++,
                  r && (y(e, !1), 0 === e.strm.avail_out)) return 1
              } else if (e.match_available) {
                if ((r = i._tr_tally(e, 0, e.window[e.strstart - 1])) && y(e,
                    !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out)
                  return 1
              } else e.match_available = 1, e.strstart++, e.lookahead--
            }
            return e.match_available && (r = i._tr_tally(e, 0, e.window[e
                .strstart - 1]), e.match_available = 0), e.insert = e
              .strstart < 2 ? e.strstart : 2, 4 === t ? (y(e, !0), 0 === e
                .strm.avail_out ? 3 : 4) : e.last_lit && (y(e, !1), 0 === e
                .strm.avail_out) ? 1 : 2
          }

          function I(e, t, n, r, a) {
            this.good_length = e, this.max_lazy = t, this.nice_length = n,
              this.max_chain = r, this.func = a
          }

          function x() {
            this.strm = null, this.status = 0, this.pending_buf = null, this
              .pending_buf_size = 0, this.pending_out = 0, this.pending = 0,
              this.wrap = 0, this.gzhead = null, this.gzindex = 0, this
              .method = 8, this.last_flush = -1, this.w_size = 0, this
              .w_bits = 0, this.w_mask = 0, this.window = null, this
              .window_size = 0, this.prev = null, this.head = null, this
              .ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this
              .hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this
              .match_length = 0, this.prev_match = 0, this.match_available =
              0, this.strstart = 0, this.match_start = 0, this.lookahead = 0,
              this.prev_length = 0, this.max_chain_length = 0, this
              .max_lazy_match = 0, this.level = 0, this.strategy = 0, this
              .good_match = 0, this.nice_match = 0, this.dyn_ltree = new a
              .Buf16(1146), this.dyn_dtree = new a.Buf16(122), this.bl_tree =
              new a.Buf16(78), f(this.dyn_ltree), f(this.dyn_dtree), f(this
                .bl_tree), this.l_desc = null, this.d_desc = null, this
              .bl_desc = null, this.bl_count = new a.Buf16(16), this.heap =
              new a.Buf16(573), f(this.heap), this.heap_len = 0, this
              .heap_max = 0, this.depth = new a.Buf16(573), f(this.depth),
              this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this
              .d_buf = 0, this.opt_len = 0, this.static_len = 0, this
              .matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid =
              0
          }

          function b(e) {
            var t;
            return e && e.state ? (e.total_in = e.total_out = 0, e.data_type =
              2, (t = e.state).pending = 0, t.pending_out = 0, t.wrap < 0 &&
              (t.wrap = -t.wrap), t.status = t.wrap ? 42 : d, e.adler =
              2 === t.wrap ? 0 : 1, t.last_flush = 0, i._tr_init(t), 0) : h(
              e, u)
          }

          function k(e) {
            var t, n = b(e);
            return 0 === n && ((t = e.state).window_size = 2 * t.w_size, f(t
                .head), t.max_lazy_match = r[t.level].max_lazy, t
              .good_match = r[t.level].good_length, t.nice_match = r[t
                .level].nice_length, t.max_chain_length = r[t.level]
              .max_chain, t.strstart = 0, t.block_start = 0, t.lookahead =
              0, t.insert = 0, t.match_length = t.prev_length = 2, t
              .match_available = 0, t.ins_h = 0), n
          }

          function T(e, t, n, r, i, A) {
            if (!e) return u;
            var o = 1;
            if (-1 === t && (t = 6), r < 0 ? (o = 0, r = -r) : 15 < r && (o =
                2, r -= 16), i < 1 || 9 < i || 8 !== n || r < 8 || 15 < r ||
              t < 0 || 9 < t || A < 0 || 4 < A) return h(e, u);
            8 === r && (r = 9);
            var s = new x;
            return (e.state = s).strm = e, s.wrap = o, s.gzhead = null, s
              .w_bits = r, s.w_size = 1 << s.w_bits, s.w_mask = s.w_size - 1,
              s.hash_bits = i + 7, s.hash_size = 1 << s.hash_bits, s
              .hash_mask = s.hash_size - 1, s.hash_shift = ~~((s.hash_bits +
                3 - 1) / 3), s.window = new a.Buf8(2 * s.w_size), s.head =
              new a.Buf16(s.hash_size), s.prev = new a.Buf16(s.w_size), s
              .lit_bufsize = 1 << i + 6, s.pending_buf_size = 4 * s
              .lit_bufsize, s.pending_buf = new a.Buf8(s.pending_buf_size), s
              .d_buf = 1 * s.lit_bufsize, s.l_buf = 3 * s.lit_bufsize, s
              .level = t, s.strategy = A, s.method = n, k(e)
          }
          r = [new I(0, 0, 0, 0, (function (e, t) {
                var n = 65535;
                for (n > e.pending_buf_size - 5 && (n = e
                    .pending_buf_size - 5);;) {
                  if (e.lookahead <= 1) {
                    if (B(e), 0 === e.lookahead && 0 === t) return 1;
                    if (0 === e.lookahead) break
                  }
                  e.strstart += e.lookahead, e.lookahead = 0;
                  var r = e.block_start + n;
                  if ((0 === e.strstart || e.strstart >= r) && (e
                      .lookahead = e.strstart - r, e.strstart = r, y(e, !
                        1), 0 === e.strm.avail_out)) return 1;
                  if (e.strstart - e.block_start >= e.w_size - c && (y(e,
                      !1), 0 === e.strm.avail_out)) return 1
                }
                return e.insert = 0, 4 === t ? (y(e, !0), 0 === e.strm
                  .avail_out ? 3 : 4) : (e.strstart > e.block_start && (
                  y(e, !1), e.strm.avail_out), 1)
              })), new I(4, 4, 8, 4, M), new I(4, 5, 16, 8, M), new I(4, 6,
                32, 32, M), new I(4, 4, 16, 16, C), new I(8, 16, 32, 32, C),
              new I(8, 16, 128, 128, C), new I(8, 32, 128, 256, C), new I(32,
                128, 258, 1024, C), new I(32, 258, 258, 4096, C)
            ], n.deflateInit = function (e, t) {
              return T(e, t, 8, 15, 8, 0)
            }, n.deflateInit2 = T, n.deflateReset = k, n.deflateResetKeep = b,
            n.deflateSetHeader = function (e, t) {
              return e && e.state ? 2 !== e.state.wrap ? u : (e.state.gzhead =
                t, 0) : u
            }, n.deflate = function (e, t) {
              var n, a, A, s;
              if (!e || !e.state || 5 < t || t < 0) return e ? h(e, u) : u;
              if (a = e.state, !e.output || !e.input && 0 !== e.avail_in ||
                666 === a.status && 4 !== t) return h(e, 0 === e.avail_out ? -
                5 : u);
              if (a.strm = e, n = a.last_flush, a.last_flush = t, 42 === a
                .status)
                if (2 === a.wrap) e.adler = 0, v(a, 31), v(a, 139), v(a, 8), a
                  .gzhead ? (v(a, (a.gzhead.text ? 1 : 0) + (a.gzhead.hcrc ?
                      2 : 0) + (a.gzhead.extra ? 4 : 0) + (a.gzhead.name ?
                      8 : 0) + (a.gzhead.comment ? 16 : 0)), v(a, 255 & a
                      .gzhead.time), v(a, a.gzhead.time >> 8 & 255), v(a, a
                      .gzhead.time >> 16 & 255), v(a, a.gzhead.time >> 24 &
                      255), v(a, 9 === a.level ? 2 : 2 <= a.strategy || a
                      .level < 2 ? 4 : 0), v(a, 255 & a.gzhead.os), a.gzhead
                    .extra && a.gzhead.extra.length && (v(a, 255 & a.gzhead
                        .extra.length), v(a, a.gzhead.extra.length >> 8 &
                      255)), a.gzhead.hcrc && (e.adler = o(e.adler, a
                      .pending_buf, a.pending, 0)), a.gzindex = 0, a.status =
                    69) : (v(a, 0), v(a, 0), v(a, 0), v(a, 0), v(a, 0), v(a,
                    9 === a.level ? 2 : 2 <= a.strategy || a.level < 2 ? 4 :
                    0), v(a, 3), a.status = d);
                else {
                  var c = 8 + (a.w_bits - 8 << 4) << 8;
                  c |= (2 <= a.strategy || a.level < 2 ? 0 : a.level < 6 ? 1 :
                      6 === a.level ? 2 : 3) << 6, 0 !== a.strstart && (c |=
                      32), c += 31 - c % 31, a.status = d, m(a, c), 0 !== a
                    .strstart && (m(a, e.adler >>> 16), m(a, 65535 & e
                    .adler)), e.adler = 1
                } if (69 === a.status)
                if (a.gzhead.extra) {
                  for (A = a.pending; a.gzindex < (65535 & a.gzhead.extra
                      .length) && (a.pending !== a.pending_buf_size || (a
                      .gzhead.hcrc && a.pending > A && (e.adler = o(e.adler,
                        a.pending_buf, a.pending - A, A)), g(e), A = a
                      .pending, a.pending !== a.pending_buf_size));) v(a,
                    255 & a.gzhead.extra[a.gzindex]), a.gzindex++;
                  a.gzhead.hcrc && a.pending > A && (e.adler = o(e.adler, a
                      .pending_buf, a.pending - A, A)), a.gzindex === a.gzhead
                    .extra.length && (a.gzindex = 0, a.status = 73)
                } else a.status = 73;
              if (73 === a.status)
                if (a.gzhead.name) {
                  A = a.pending;
                  do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc &&
                        a.pending > A && (e.adler = o(e.adler, a.pending_buf,
                          a.pending - A, A)), g(e), A = a.pending, a
                        .pending === a.pending_buf_size)) {
                      s = 1;
                      break
                    }
                    v(a, s = a.gzindex < a.gzhead.name.length ? 255 & a.gzhead
                      .name.charCodeAt(a.gzindex++) : 0)
                  } while (0 !== s);
                  a.gzhead.hcrc && a.pending > A && (e.adler = o(e.adler, a
                    .pending_buf, a.pending - A, A)), 0 === s && (a
                    .gzindex = 0, a.status = 91)
                } else a.status = 91;
              if (91 === a.status)
                if (a.gzhead.comment) {
                  A = a.pending;
                  do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc &&
                        a.pending > A && (e.adler = o(e.adler, a.pending_buf,
                          a.pending - A, A)), g(e), A = a.pending, a
                        .pending === a.pending_buf_size)) {
                      s = 1;
                      break
                    }
                    v(a, s = a.gzindex < a.gzhead.comment.length ? 255 & a
                      .gzhead.comment.charCodeAt(a.gzindex++) : 0)
                  } while (0 !== s);
                  a.gzhead.hcrc && a.pending > A && (e.adler = o(e.adler, a
                    .pending_buf, a.pending - A, A)), 0 === s && (a.status =
                    103)
                } else a.status = 103;
              if (103 === a.status && (a.gzhead.hcrc ? (a.pending + 2 > a
                  .pending_buf_size && g(e), a.pending + 2 <= a
                  .pending_buf_size && (v(a, 255 & e.adler), v(a, e.adler >>
                    8 & 255), e.adler = 0, a.status = d)) : a.status = d),
                0 !== a.pending) {
                if (g(e), 0 === e.avail_out) return a.last_flush = -1, 0
              } else if (0 === e.avail_in && p(t) <= p(n) && 4 !== t)
              return h(e, -5);
              if (666 === a.status && 0 !== e.avail_in) return h(e, -5);
              if (0 !== e.avail_in || 0 !== a.lookahead || 0 !== t && 666 !==
                a.status) {
                var w = 2 === a.strategy ? function (e, t) {
                  for (var n;;) {
                    if (0 === e.lookahead && (B(e), 0 === e.lookahead)) {
                      if (0 === t) return 1;
                      break
                    }
                    if (e.match_length = 0, n = i._tr_tally(e, 0, e.window[e
                        .strstart]), e.lookahead--, e.strstart++, n && (y(e,
                        !1), 0 === e.strm.avail_out)) return 1
                  }
                  return e.insert = 0, 4 === t ? (y(e, !0), 0 === e.strm
                    .avail_out ? 3 : 4) : e.last_lit && (y(e, !1), 0 === e
                    .strm.avail_out) ? 1 : 2
                }(a, t) : 3 === a.strategy ? function (e, t) {
                  for (var n, r, a, A, o = e.window;;) {
                    if (e.lookahead <= l) {
                      if (B(e), e.lookahead <= l && 0 === t) return 1;
                      if (0 === e.lookahead) break
                    }
                    if (e.match_length = 0, e.lookahead >= 3 && 0 < e
                      .strstart && (r = o[a = e.strstart - 1]) === o[++a] &&
                      r === o[++a] && r === o[++a]) {
                      A = e.strstart + l;
                      do {} while (r === o[++a] && r === o[++a] && r === o[
                          ++a] && r === o[++a] && r === o[++a] && r === o[++
                          a] && r === o[++a] && r === o[++a] && a < A);
                      e.match_length = l - (A - a), e.match_length > e
                        .lookahead && (e.match_length = e.lookahead)
                    }
                    if (e.match_length >= 3 ? (n = i._tr_tally(e, 1, e
                          .match_length - 3), e.lookahead -= e.match_length,
                        e.strstart += e.match_length, e.match_length = 0) :
                      (n = i._tr_tally(e, 0, e.window[e.strstart]), e
                        .lookahead--, e.strstart++), n && (y(e, !1), 0 === e
                        .strm.avail_out)) return 1
                  }
                  return e.insert = 0, 4 === t ? (y(e, !0), 0 === e.strm
                    .avail_out ? 3 : 4) : e.last_lit && (y(e, !1), 0 === e
                    .strm.avail_out) ? 1 : 2
                }(a, t) : r[a.level].func(a, t);
                if (3 !== w && 4 !== w || (a.status = 666), 1 === w || 3 ===
                  w) return 0 === e.avail_out && (a.last_flush = -1), 0;
                if (2 === w && (1 === t ? i._tr_align(a) : 5 !== t && (i
                    ._tr_stored_block(a, 0, 0, !1), 3 === t && (f(a.head),
                      0 === a.lookahead && (a.strstart = 0, a.block_start =
                        0, a.insert = 0))), g(e), 0 === e.avail_out)) return a
                  .last_flush = -1, 0
              }
              return 4 !== t ? 0 : a.wrap <= 0 ? 1 : (2 === a.wrap ? (v(a,
                  255 & e.adler), v(a, e.adler >> 8 & 255), v(a, e
                  .adler >> 16 & 255), v(a, e.adler >> 24 & 255), v(a,
                  255 & e.total_in), v(a, e.total_in >> 8 & 255), v(a, e
                  .total_in >> 16 & 255), v(a, e.total_in >> 24 & 255)) : (
                  m(a, e.adler >>> 16), m(a, 65535 & e.adler)), g(e), 0 < a
                .wrap && (a.wrap = -a.wrap), 0 !== a.pending ? 0 : 1)
            }, n.deflateEnd = function (e) {
              var t;
              return e && e.state ? 42 !== (t = e.state.status) && 69 !== t &&
                73 !== t && 91 !== t && 103 !== t && t !== d && 666 !== t ? h(
                  e, u) : (e.state = null, t === d ? h(e, -3) : 0) : u
            }, n.deflateSetDictionary = function (e, t) {
              var n, r, i, o, s, l, c, d, h = t.length;
              if (!e || !e.state) return u;
              if (2 === (o = (n = e.state).wrap) || 1 === o && 42 !== n
                .status || n.lookahead) return u;
              for (1 === o && (e.adler = A(e.adler, t, h, 0)), n.wrap = 0,
                h >= n.w_size && (0 === o && (f(n.head), n.strstart = 0, n
                    .block_start = 0, n.insert = 0), d = new a.Buf8(n.w_size),
                  a.arraySet(d, t, h - n.w_size, n.w_size, 0), t = d, h = n
                  .w_size), s = e.avail_in, l = e.next_in, c = e.input, e
                .avail_in = h, e.next_in = 0, e.input = t, B(n); n
                .lookahead >= 3;) {
                for (r = n.strstart, i = n.lookahead - 2; n.ins_h = (n
                    .ins_h << n.hash_shift ^ n.window[r + 3 - 1]) & n
                  .hash_mask, n.prev[r & n.w_mask] = n.head[n.ins_h], n.head[n
                    .ins_h] = r, r++, --i;);
                n.strstart = r, n.lookahead = 2, B(n)
              }
              return n.strstart += n.lookahead, n.block_start = n.strstart, n
                .insert = n.lookahead, n.lookahead = 0, n.match_length = n
                .prev_length = 2, n.match_available = 0, e.next_in = l, e
                .input = c, e.avail_in = s, n.wrap = o, 0
            }, n.deflateInfo = "pako deflate (from Nodeca project)"
        }, {
          "../utils/common": 3,
          "./adler32": 5,
          "./crc32": 7,
          "./messages": 13,
          "./trees": 14
        }],
        9: [function (e, t, n) {
          "use strict";
          t.exports = function () {
            this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this
              .extra = null, this.extra_len = 0, this.name = "", this
              .comment = "", this.hcrc = 0, this.done = !1
          }
        }, {}],
        10: [function (e, t, n) {
          "use strict";
          t.exports = function (e, t) {
            var n, r, a, i, A, o, s, u, l, c, d, h, p, f, g, y, v, m, w, B,
              M, C, I, x, b;
            n = e.state, r = e.next_in, x = e.input, a = r + (e.avail_in -
                5), i = e.next_out, b = e.output, A = i - (t - e.avail_out),
              o = i + (e.avail_out - 257), s = n.dmax, u = n.wsize, l = n
              .whave, c = n.wnext, d = n.window, h = n.hold, p = n.bits, f =
              n.lencode, g = n.distcode, y = (1 << n.lenbits) - 1, v = (1 <<
                n.distbits) - 1;
            e: do {
              p < 15 && (h += x[r++] << p, p += 8, h += x[r++] << p, p +=
                8), m = f[h & y];
              t: for (;;) {
                if (h >>>= w = m >>> 24, p -= w, 0 == (w = m >>> 16 &
                    255)) b[i++] = 65535 & m;
                else {
                  if (!(16 & w)) {
                    if (0 == (64 & w)) {
                      m = f[(65535 & m) + (h & (1 << w) - 1)];
                      continue t
                    }
                    if (32 & w) {
                      n.mode = 12;
                      break e
                    }
                    e.msg = "invalid literal/length code", n.mode = 30;
                    break e
                  }
                  B = 65535 & m, (w &= 15) && (p < w && (h += x[r++] <<
                      p, p += 8), B += h & (1 << w) - 1, h >>>= w,
                    p -= w), p < 15 && (h += x[r++] << p, p += 8, h +=
                    x[r++] << p, p += 8), m = g[h & v];
                  n: for (;;) {
                    if (h >>>= w = m >>> 24, p -= w, !(16 & (w = m >>>
                        16 & 255))) {
                      if (0 == (64 & w)) {
                        m = g[(65535 & m) + (h & (1 << w) - 1)];
                        continue n
                      }
                      e.msg = "invalid distance code", n.mode = 30;
                      break e
                    }
                    if (M = 65535 & m, p < (w &= 15) && (h += x[
                        r++] << p, (p += 8) < w && (h += x[r++] << p,
                          p += 8)), s < (M += h & (1 << w) - 1)) {
                      e.msg = "invalid distance too far back", n
                        .mode = 30;
                      break e
                    }
                    if (h >>>= w, p -= w, (w = i - A) < M) {
                      if (l < (w = M - w) && n.sane) {
                        e.msg = "invalid distance too far back", n
                          .mode = 30;
                        break e
                      }
                      if (I = d, (C = 0) === c) {
                        if (C += u - w, w < B) {
                          for (B -= w; b[i++] = d[C++], --w;);
                          C = i - M, I = b
                        }
                      } else if (c < w) {
                        if (C += u + c - w, (w -= c) < B) {
                          for (B -= w; b[i++] = d[C++], --w;);
                          if (C = 0, c < B) {
                            for (B -= w = c; b[i++] = d[C++], --w;);
                            C = i - M, I = b
                          }
                        }
                      } else if (C += c - w, w < B) {
                        for (B -= w; b[i++] = d[C++], --w;);
                        C = i - M, I = b
                      }
                      for (; 2 < B;) b[i++] = I[C++], b[i++] = I[C++],
                        b[i++] = I[C++], B -= 3;
                      B && (b[i++] = I[C++], 1 < B && (b[i++] = I[
                        C++]))
                    } else {
                      for (C = i - M; b[i++] = b[C++], b[i++] = b[
                        C++], b[i++] = b[C++], 2 < (B -= 3););
                      B && (b[i++] = b[C++], 1 < B && (b[i++] = b[
                        C++]))
                    }
                    break
                  }
                }
                break
              }
            } while (r < a && i < o);
            r -= B = p >> 3, h &= (1 << (p -= B << 3)) - 1, e.next_in = r, e
              .next_out = i, e.avail_in = r < a ? a - r + 5 : 5 - (r - a), e
              .avail_out = i < o ? o - i + 257 : 257 - (i - o), n.hold = h,
              n.bits = p
          }
        }, {}],
        11: [function (e, t, n) {
          "use strict";
          var r = e("../utils/common"),
            a = e("./adler32"),
            i = e("./crc32"),
            A = e("./inffast"),
            o = e("./inftrees"),
            s = -2;

          function u(e) {
            return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) +
              ((255 & e) << 24)
          }

          function l() {
            this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1,
              this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0,
              this.head = null, this.wbits = 0, this.wsize = 0, this.whave =
              0, this.wnext = 0, this.window = null, this.hold = 0, this
              .bits = 0, this.length = 0, this.offset = 0, this.extra = 0,
              this.lencode = null, this.distcode = null, this.lenbits = 0,
              this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist =
              0, this.have = 0, this.next = null, this.lens = new r.Buf16(
              320), this.work = new r.Buf16(288), this.lendyn = null, this
              .distdyn = null, this.sane = 0, this.back = 0, this.was = 0
          }

          function c(e) {
            var t;
            return e && e.state ? (t = e.state, e.total_in = e.total_out = t
              .total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t
              .mode = 1, t.last = 0, t.havedict = 0, t.dmax = 32768, t
              .head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn =
              new r.Buf32(852), t.distcode = t.distdyn = new r.Buf32(592), t
              .sane = 1, t.back = -1, 0) : s
          }

          function d(e) {
            var t;
            return e && e.state ? ((t = e.state).wsize = 0, t.whave = 0, t
              .wnext = 0, c(e)) : s
          }

          function h(e, t) {
            var n, r;
            return e && e.state ? (r = e.state, t < 0 ? (n = 0, t = -t) : (n =
                1 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || 15 < t) ?
              s : (null !== r.window && r.wbits !== t && (r.window = null),
                r.wrap = n, r.wbits = t, d(e))) : s
          }

          function p(e, t) {
            var n, r;
            return e ? (r = new l, (e.state = r).window = null, 0 !== (n = h(
              e, t)) && (e.state = null), n) : s
          }
          var f, g, y = !0;

          function v(e) {
            if (y) {
              var t;
              for (f = new r.Buf32(512), g = new r.Buf32(32), t = 0; t < 144;)
                e.lens[t++] = 8;
              for (; t < 256;) e.lens[t++] = 9;
              for (; t < 280;) e.lens[t++] = 7;
              for (; t < 288;) e.lens[t++] = 8;
              for (o(1, e.lens, 0, 288, f, 0, e.work, {
                  bits: 9
                }), t = 0; t < 32;) e.lens[t++] = 5;
              o(2, e.lens, 0, 32, g, 0, e.work, {
                bits: 5
              }), y = !1
            }
            e.lencode = f, e.lenbits = 9, e.distcode = g, e.distbits = 5
          }

          function m(e, t, n, a) {
            var i, A = e.state;
            return null === A.window && (A.wsize = 1 << A.wbits, A.wnext = 0,
              A.whave = 0, A.window = new r.Buf8(A.wsize)), a >= A.wsize ? (
              r.arraySet(A.window, t, n - A.wsize, A.wsize, 0), A.wnext = 0,
              A.whave = A.wsize) : (a < (i = A.wsize - A.wnext) && (i = a),
              r.arraySet(A.window, t, n - a, i, A.wnext), (a -= i) ? (r
                .arraySet(A.window, t, n - a, a, 0), A.wnext = a, A.whave =
                A.wsize) : (A.wnext += i, A.wnext === A.wsize && (A.wnext =
                0), A.whave < A.wsize && (A.whave += i))), 0
          }
          n.inflateReset = d, n.inflateReset2 = h, n.inflateResetKeep = c, n
            .inflateInit = function (e) {
              return p(e, 15)
            }, n.inflateInit2 = p, n.inflate = function (e, t) {
              var n, l, c, d, h, p, f, g, y, w, B, M, C, I, x, b, k, T, E, D,
                N, P, Q, O, _ = 0,
                S = new r.Buf8(4),
                U = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2,
                  14, 1, 15
                ];
              if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in)
                return s;
              12 === (n = e.state).mode && (n.mode = 13), h = e.next_out, c =
                e.output, f = e.avail_out, d = e.next_in, l = e.input, p = e
                .avail_in, g = n.hold, y = n.bits, w = p, B = f, P = 0;
              e: for (;;) switch (n.mode) {
                case 1:
                  if (0 === n.wrap) {
                    n.mode = 13;
                    break
                  }
                  for (; y < 16;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if (2 & n.wrap && 35615 === g) {
                    S[n.check = 0] = 255 & g, S[1] = g >>> 8 & 255, n
                      .check = i(n.check, S, 2, 0), y = g = 0, n.mode = 2;
                    break
                  }
                  if (n.flags = 0, n.head && (n.head.done = !1), !(1 & n
                      .wrap) || (((255 & g) << 8) + (g >> 8)) % 31) {
                    e.msg = "incorrect header check", n.mode = 30;
                    break
                  }
                  if (8 != (15 & g)) {
                    e.msg = "unknown compression method", n.mode = 30;
                    break
                  }
                  if (y -= 4, N = 8 + (15 & (g >>>= 4)), 0 === n.wbits) n
                    .wbits = N;
                  else if (N > n.wbits) {
                    e.msg = "invalid window size", n.mode = 30;
                    break
                  }
                  n.dmax = 1 << N, e.adler = n.check = 1, n.mode = 512 &
                    g ? 10 : 12, y = g = 0;
                  break;
                case 2:
                  for (; y < 16;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if (n.flags = g, 8 != (255 & n.flags)) {
                    e.msg = "unknown compression method", n.mode = 30;
                    break
                  }
                  if (57344 & n.flags) {
                    e.msg = "unknown header flags set", n.mode = 30;
                    break
                  }
                  n.head && (n.head.text = g >> 8 & 1), 512 & n.flags && (
                    S[0] = 255 & g, S[1] = g >>> 8 & 255, n.check = i(n
                      .check, S, 2, 0)), y = g = 0, n.mode = 3;
                case 3:
                  for (; y < 32;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  n.head && (n.head.time = g), 512 & n.flags && (S[0] =
                    255 & g, S[1] = g >>> 8 & 255, S[2] = g >>> 16 &
                    255, S[3] = g >>> 24 & 255, n.check = i(n.check, S,
                      4, 0)), y = g = 0, n.mode = 4;
                case 4:
                  for (; y < 16;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  n.head && (n.head.xflags = 255 & g, n.head.os = g >> 8),
                    512 & n.flags && (S[0] = 255 & g, S[1] = g >>> 8 &
                      255, n.check = i(n.check, S, 2, 0)), y = g = 0, n
                    .mode = 5;
                case 5:
                  if (1024 & n.flags) {
                    for (; y < 16;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    n.length = g, n.head && (n.head.extra_len = g), 512 &
                      n.flags && (S[0] = 255 & g, S[1] = g >>> 8 & 255, n
                        .check = i(n.check, S, 2, 0)), y = g = 0
                  } else n.head && (n.head.extra = null);
                  n.mode = 6;
                case 6:
                  if (1024 & n.flags && (p < (M = n.length) && (M = p),
                      M && (n.head && (N = n.head.extra_len - n.length, n
                        .head.extra || (n.head.extra = new Array(n.head
                          .extra_len)), r.arraySet(n.head.extra, l, d,
                          M, N)), 512 & n.flags && (n.check = i(n.check,
                        l, M, d)), p -= M, d += M, n.length -= M), n
                      .length)) break e;
                  n.length = 0, n.mode = 7;
                case 7:
                  if (2048 & n.flags) {
                    if (0 === p) break e;
                    for (M = 0; N = l[d + M++], n.head && N && n.length <
                      65536 && (n.head.name += String.fromCharCode(N)),
                      N && M < p;);
                    if (512 & n.flags && (n.check = i(n.check, l, M, d)),
                      p -= M, d += M, N) break e
                  } else n.head && (n.head.name = null);
                  n.length = 0, n.mode = 8;
                case 8:
                  if (4096 & n.flags) {
                    if (0 === p) break e;
                    for (M = 0; N = l[d + M++], n.head && N && n.length <
                      65536 && (n.head.comment += String.fromCharCode(N)),
                      N && M < p;);
                    if (512 & n.flags && (n.check = i(n.check, l, M, d)),
                      p -= M, d += M, N) break e
                  } else n.head && (n.head.comment = null);
                  n.mode = 9;
                case 9:
                  if (512 & n.flags) {
                    for (; y < 16;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    if (g !== (65535 & n.check)) {
                      e.msg = "header crc mismatch", n.mode = 30;
                      break
                    }
                    y = g = 0
                  }
                  n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head
                    .done = !0), e.adler = n.check = 0, n.mode = 12;
                  break;
                case 10:
                  for (; y < 32;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  e.adler = n.check = u(g), y = g = 0, n.mode = 11;
                case 11:
                  if (0 === n.havedict) return e.next_out = h, e
                    .avail_out = f, e.next_in = d, e.avail_in = p, n
                    .hold = g, n.bits = y, 2;
                  e.adler = n.check = 1, n.mode = 12;
                case 12:
                  if (5 === t || 6 === t) break e;
                case 13:
                  if (n.last) {
                    g >>>= 7 & y, y -= 7 & y, n.mode = 27;
                    break
                  }
                  for (; y < 3;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  switch (n.last = 1 & g, y -= 1, 3 & (g >>>= 1)) {
                    case 0:
                      n.mode = 14;
                      break;
                    case 1:
                      if (v(n), n.mode = 20, 6 !== t) break;
                      g >>>= 2, y -= 2;
                      break e;
                    case 2:
                      n.mode = 17;
                      break;
                    case 3:
                      e.msg = "invalid block type", n.mode = 30
                  }
                  g >>>= 2, y -= 2;
                  break;
                case 14:
                  for (g >>>= 7 & y, y -= 7 & y; y < 32;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if ((65535 & g) != (g >>> 16 ^ 65535)) {
                    e.msg = "invalid stored block lengths", n.mode = 30;
                    break
                  }
                  if (n.length = 65535 & g, y = g = 0, n.mode = 15, 6 ===
                    t) break e;
                case 15:
                  n.mode = 16;
                case 16:
                  if (M = n.length) {
                    if (p < M && (M = p), f < M && (M = f), 0 === M)
                    break e;
                    r.arraySet(c, l, d, M, h), p -= M, d += M, f -= M,
                      h += M, n.length -= M;
                    break
                  }
                  n.mode = 12;
                  break;
                case 17:
                  for (; y < 14;) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if (n.nlen = 257 + (31 & g), g >>>= 5, y -= 5, n.ndist =
                    1 + (31 & g), g >>>= 5, y -= 5, n.ncode = 4 + (15 &
                    g), g >>>= 4, y -= 4, 286 < n.nlen || 30 < n.ndist) {
                    e.msg = "too many length or distance symbols", n
                      .mode = 30;
                    break
                  }
                  n.have = 0, n.mode = 18;
                case 18:
                  for (; n.have < n.ncode;) {
                    for (; y < 3;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    n.lens[U[n.have++]] = 7 & g, g >>>= 3, y -= 3
                  }
                  for (; n.have < 19;) n.lens[U[n.have++]] = 0;
                  if (n.lencode = n.lendyn, n.lenbits = 7, Q = {
                      bits: n.lenbits
                    }, P = o(0, n.lens, 0, 19, n.lencode, 0, n.work, Q), n
                    .lenbits = Q.bits, P) {
                    e.msg = "invalid code lengths set", n.mode = 30;
                    break
                  }
                  n.have = 0, n.mode = 19;
                case 19:
                  for (; n.have < n.nlen + n.ndist;) {
                    for (; b = (_ = n.lencode[g & (1 << n.lenbits) -
                      1]) >>> 16 & 255, k = 65535 & _, !((x = _ >>> 24) <=
                        y);) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    if (k < 16) g >>>= x, y -= x, n.lens[n.have++] = k;
                    else {
                      if (16 === k) {
                        for (O = x + 2; y < O;) {
                          if (0 === p) break e;
                          p--, g += l[d++] << y, y += 8
                        }
                        if (g >>>= x, y -= x, 0 === n.have) {
                          e.msg = "invalid bit length repeat", n.mode =
                          30;
                          break
                        }
                        N = n.lens[n.have - 1], M = 3 + (3 & g), g >>>= 2,
                          y -= 2
                      } else if (17 === k) {
                        for (O = x + 3; y < O;) {
                          if (0 === p) break e;
                          p--, g += l[d++] << y, y += 8
                        }
                        y -= x, N = 0, M = 3 + (7 & (g >>>= x)), g >>>= 3,
                          y -= 3
                      } else {
                        for (O = x + 7; y < O;) {
                          if (0 === p) break e;
                          p--, g += l[d++] << y, y += 8
                        }
                        y -= x, N = 0, M = 11 + (127 & (g >>>= x)), g >>>=
                          7, y -= 7
                      }
                      if (n.have + M > n.nlen + n.ndist) {
                        e.msg = "invalid bit length repeat", n.mode = 30;
                        break
                      }
                      for (; M--;) n.lens[n.have++] = N
                    }
                  }
                  if (30 === n.mode) break;
                  if (0 === n.lens[256]) {
                    e.msg = "invalid code -- missing end-of-block", n
                      .mode = 30;
                    break
                  }
                  if (n.lenbits = 9, Q = {
                      bits: n.lenbits
                    }, P = o(1, n.lens, 0, n.nlen, n.lencode, 0, n.work,
                      Q), n.lenbits = Q.bits, P) {
                    e.msg = "invalid literal/lengths set", n.mode = 30;
                    break
                  }
                  if (n.distbits = 6, n.distcode = n.distdyn, Q = {
                      bits: n.distbits
                    }, P = o(2, n.lens, n.nlen, n.ndist, n.distcode, 0, n
                      .work, Q), n.distbits = Q.bits, P) {
                    e.msg = "invalid distances set", n.mode = 30;
                    break
                  }
                  if (n.mode = 20, 6 === t) break e;
                case 20:
                  n.mode = 21;
                case 21:
                  if (6 <= p && 258 <= f) {
                    e.next_out = h, e.avail_out = f, e.next_in = d, e
                      .avail_in = p, n.hold = g, n.bits = y, A(e, B), h =
                      e.next_out, c = e.output, f = e.avail_out, d = e
                      .next_in, l = e.input, p = e.avail_in, g = n.hold,
                      y = n.bits, 12 === n.mode && (n.back = -1);
                    break
                  }
                  for (n.back = 0; b = (_ = n.lencode[g & (1 << n
                      .lenbits) - 1]) >>> 16 & 255, k = 65535 & _, !((x =
                      _ >>> 24) <= y);) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if (b && 0 == (240 & b)) {
                    for (T = x, E = b, D = k; b = (_ = n.lencode[D + ((g &
                        (1 << T + E) - 1) >> T)]) >>> 16 & 255, k =
                      65535 & _, !(T + (x = _ >>> 24) <= y);) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    g >>>= T, y -= T, n.back += T
                  }
                  if (g >>>= x, y -= x, n.back += x, n.length = k, 0 ===
                    b) {
                    n.mode = 26;
                    break
                  }
                  if (32 & b) {
                    n.back = -1, n.mode = 12;
                    break
                  }
                  if (64 & b) {
                    e.msg = "invalid literal/length code", n.mode = 30;
                    break
                  }
                  n.extra = 15 & b, n.mode = 22;
                case 22:
                  if (n.extra) {
                    for (O = n.extra; y < O;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    n.length += g & (1 << n.extra) - 1, g >>>= n.extra,
                      y -= n.extra, n.back += n.extra
                  }
                  n.was = n.length, n.mode = 23;
                case 23:
                  for (; b = (_ = n.distcode[g & (1 << n.distbits) -
                    1]) >>> 16 & 255, k = 65535 & _, !((x = _ >>> 24) <=
                      y);) {
                    if (0 === p) break e;
                    p--, g += l[d++] << y, y += 8
                  }
                  if (0 == (240 & b)) {
                    for (T = x, E = b, D = k; b = (_ = n.distcode[D + ((
                        g & (1 << T + E) - 1) >> T)]) >>> 16 & 255, k =
                      65535 & _, !(T + (x = _ >>> 24) <= y);) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    g >>>= T, y -= T, n.back += T
                  }
                  if (g >>>= x, y -= x, n.back += x, 64 & b) {
                    e.msg = "invalid distance code", n.mode = 30;
                    break
                  }
                  n.offset = k, n.extra = 15 & b, n.mode = 24;
                case 24:
                  if (n.extra) {
                    for (O = n.extra; y < O;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    n.offset += g & (1 << n.extra) - 1, g >>>= n.extra,
                      y -= n.extra, n.back += n.extra
                  }
                  if (n.offset > n.dmax) {
                    e.msg = "invalid distance too far back", n.mode = 30;
                    break
                  }
                  n.mode = 25;
                case 25:
                  if (0 === f) break e;
                  if (M = B - f, n.offset > M) {
                    if ((M = n.offset - M) > n.whave && n.sane) {
                      e.msg = "invalid distance too far back", n.mode =
                      30;
                      break
                    }
                    M > n.wnext ? (M -= n.wnext, C = n.wsize - M) : C = n
                      .wnext - M, M > n.length && (M = n.length), I = n
                      .window
                  } else I = c, C = h - n.offset, M = n.length;
                  for (f < M && (M = f), f -= M, n.length -= M; c[h++] =
                    I[C++], --M;);
                  0 === n.length && (n.mode = 21);
                  break;
                case 26:
                  if (0 === f) break e;
                  c[h++] = n.length, f--, n.mode = 21;
                  break;
                case 27:
                  if (n.wrap) {
                    for (; y < 32;) {
                      if (0 === p) break e;
                      p--, g |= l[d++] << y, y += 8
                    }
                    if (B -= f, e.total_out += B, n.total += B, B && (e
                        .adler = n.check = n.flags ? i(n.check, c, B, h -
                          B) : a(n.check, c, B, h - B)), B = f, (n.flags ?
                        g : u(g)) !== n.check) {
                      e.msg = "incorrect data check", n.mode = 30;
                      break
                    }
                    y = g = 0
                  }
                  n.mode = 28;
                case 28:
                  if (n.wrap && n.flags) {
                    for (; y < 32;) {
                      if (0 === p) break e;
                      p--, g += l[d++] << y, y += 8
                    }
                    if (g !== (4294967295 & n.total)) {
                      e.msg = "incorrect length check", n.mode = 30;
                      break
                    }
                    y = g = 0
                  }
                  n.mode = 29;
                case 29:
                  P = 1;
                  break e;
                case 30:
                  P = -3;
                  break e;
                case 31:
                  return -4;
                case 32:
                default:
                  return s
              }
              return e.next_out = h, e.avail_out = f, e.next_in = d, e
                .avail_in = p, n.hold = g, n.bits = y, (n.wsize || B !== e
                  .avail_out && n.mode < 30 && (n.mode < 27 || 4 !== t)) && m(
                  e, e.output, e.next_out, B - e.avail_out) ? (n.mode = 31, -
                  4) : (w -= e.avail_in, B -= e.avail_out, e.total_in += w, e
                  .total_out += B, n.total += B, n.wrap && B && (e.adler = n
                    .check = n.flags ? i(n.check, c, B, e.next_out - B) : a(n
                      .check, c, B, e.next_out - B)), e.data_type = n.bits + (
                    n.last ? 64 : 0) + (12 === n.mode ? 128 : 0) + (20 === n
                    .mode || 15 === n.mode ? 256 : 0), (0 === w && 0 === B ||
                    4 === t) && 0 === P && (P = -5), P)
            }, n.inflateEnd = function (e) {
              if (!e || !e.state) return s;
              var t = e.state;
              return t.window && (t.window = null), e.state = null, 0
            }, n.inflateGetHeader = function (e, t) {
              var n;
              return e && e.state ? 0 == (2 & (n = e.state).wrap) ? s : ((n
                .head = t).done = !1, 0) : s
            }, n.inflateSetDictionary = function (e, t) {
              var n, r = t.length;
              return e && e.state ? 0 !== (n = e.state).wrap && 11 !== n
                .mode ? s : 11 === n.mode && a(1, t, r, 0) !== n.check ? -3 :
                m(e, t, r, r) ? (n.mode = 31, -4) : (n.havedict = 1, 0) : s
            }, n.inflateInfo = "pako inflate (from Nodeca project)"
        }, {
          "../utils/common": 3,
          "./adler32": 5,
          "./crc32": 7,
          "./inffast": 10,
          "./inftrees": 12
        }],
        12: [function (e, t, n) {
          "use strict";
          var r = e("../utils/common"),
            a = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35,
              43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
            ],
            i = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18,
              18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78
            ],
            A = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
              257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193,
              12289, 16385, 24577, 0, 0
            ],
            o = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22,
              22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64,
              64
            ];
          t.exports = function (e, t, n, s, u, l, c, d) {
            var h, p, f, g, y, v, m, w, B, M = d.bits,
              C = 0,
              I = 0,
              x = 0,
              b = 0,
              k = 0,
              T = 0,
              E = 0,
              D = 0,
              N = 0,
              P = 0,
              Q = null,
              O = 0,
              _ = new r.Buf16(16),
              S = new r.Buf16(16),
              U = null,
              F = 0;
            for (C = 0; C <= 15; C++) _[C] = 0;
            for (I = 0; I < s; I++) _[t[n + I]]++;
            for (k = M, b = 15; 1 <= b && 0 === _[b]; b--);
            if (b < k && (k = b), 0 === b) return u[l++] = 20971520, u[
              l++] = 20971520, d.bits = 1, 0;
            for (x = 1; x < b && 0 === _[x]; x++);
            for (k < x && (k = x), C = D = 1; C <= 15; C++)
              if (D <<= 1, (D -= _[C]) < 0) return -1;
            if (0 < D && (0 === e || 1 !== b)) return -1;
            for (S[1] = 0, C = 1; C < 15; C++) S[C + 1] = S[C] + _[C];
            for (I = 0; I < s; I++) 0 !== t[n + I] && (c[S[t[n + I]]++] =
            I);
            if (0 === e ? (Q = U = c, v = 19) : 1 === e ? (Q = a, O -= 257,
                U = i, F -= 257, v = 256) : (Q = A, U = o, v = -1), C = x,
              y = l, E = I = P = 0, f = -1, g = (N = 1 << (T = k)) - 1,
              1 === e && 852 < N || 2 === e && 592 < N) return 1;
            for (;;) {
              for (m = C - E, c[I] < v ? (w = 0, B = c[I]) : c[I] > v ? (w =
                  U[F + c[I]], B = Q[O + c[I]]) : (w = 96, B = 0), h = 1 <<
                C - E, x = p = 1 << T; u[y + (P >> E) + (p -= h)] = m <<
                24 | w << 16 | B | 0, 0 !== p;);
              for (h = 1 << C - 1; P & h;) h >>= 1;
              if (0 !== h ? (P &= h - 1, P += h) : P = 0, I++, 0 == --_[
                C]) {
                if (C === b) break;
                C = t[n + c[I]]
              }
              if (k < C && (P & g) !== f) {
                for (0 === E && (E = k), y += x, D = 1 << (T = C - E); T +
                  E < b && !((D -= _[T + E]) <= 0);) T++, D <<= 1;
                if (N += 1 << T, 1 === e && 852 < N || 2 === e && 592 < N)
                  return 1;
                u[f = P & g] = k << 24 | T << 16 | y - l | 0
              }
            }
            return 0 !== P && (u[y + P] = C - E << 24 | 64 << 16 | 0), d
              .bits = k, 0
          }
        }, {
          "../utils/common": 3
        }],
        13: [function (e, t, n) {
          "use strict";
          t.exports = {
            2: "need dictionary",
            1: "stream end",
            0: "",
            "-1": "file error",
            "-2": "stream error",
            "-3": "data error",
            "-4": "insufficient memory",
            "-5": "buffer error",
            "-6": "incompatible version"
          }
        }, {}],
        14: [function (e, t, n) {
          "use strict";
          var r = e("../utils/common");

          function a(e) {
            for (var t = e.length; 0 <= --t;) e[t] = 0
          }
          var i = 256,
            A = 286,
            o = 30,
            s = 15,
            u = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3,
              4, 4, 4, 4, 5, 5, 5, 5, 0
            ],
            l = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8,
              9, 9, 10, 10, 11, 11, 12, 12, 13, 13
            ],
            c = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
            d = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1,
              15
            ],
            h = new Array(576);
          a(h);
          var p = new Array(60);
          a(p);
          var f = new Array(512);
          a(f);
          var g = new Array(256);
          a(g);
          var y = new Array(29);
          a(y);
          var v, m, w, B = new Array(o);

          function M(e, t, n, r, a) {
            this.static_tree = e, this.extra_bits = t, this.extra_base = n,
              this.elems = r, this.max_length = a, this.has_stree = e && e
              .length
          }

          function C(e, t) {
            this.dyn_tree = e, this.max_code = 0, this.stat_desc = t
          }

          function I(e) {
            return e < 256 ? f[e] : f[256 + (e >>> 7)]
          }

          function x(e, t) {
            e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] =
              t >>> 8 & 255
          }

          function b(e, t, n) {
            e.bi_valid > 16 - n ? (e.bi_buf |= t << e.bi_valid & 65535, x(e, e
                .bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += n -
              16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n)
          }

          function k(e, t, n) {
            b(e, n[2 * t], n[2 * t + 1])
          }

          function T(e, t) {
            for (var n = 0; n |= 1 & e, e >>>= 1, n <<= 1, 0 < --t;);
            return n >>> 1
          }

          function E(e, t, n) {
            var r, a, i = new Array(16),
              A = 0;
            for (r = 1; r <= s; r++) i[r] = A = A + n[r - 1] << 1;
            for (a = 0; a <= t; a++) {
              var o = e[2 * a + 1];
              0 !== o && (e[2 * a] = T(i[o]++, o))
            }
          }

          function D(e) {
            var t;
            for (t = 0; t < A; t++) e.dyn_ltree[2 * t] = 0;
            for (t = 0; t < o; t++) e.dyn_dtree[2 * t] = 0;
            for (t = 0; t < 19; t++) e.bl_tree[2 * t] = 0;
            e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.last_lit = e
              .matches = 0
          }

          function N(e) {
            8 < e.bi_valid ? x(e, e.bi_buf) : 0 < e.bi_valid && (e
                .pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e
              .bi_valid = 0
          }

          function P(e, t, n, r) {
            var a = 2 * t,
              i = 2 * n;
            return e[a] < e[i] || e[a] === e[i] && r[t] <= r[n]
          }

          function Q(e, t, n) {
            for (var r = e.heap[n], a = n << 1; a <= e.heap_len && (a < e
                .heap_len && P(t, e.heap[a + 1], e.heap[a], e.depth) && a++, !
                P(t, r, e.heap[a], e.depth));) e.heap[n] = e.heap[a], n = a,
              a <<= 1;
            e.heap[n] = r
          }

          function O(e, t, n) {
            var r, a, A, o, s = 0;
            if (0 !== e.last_lit)
              for (; r = e.pending_buf[e.d_buf + 2 * s] << 8 | e.pending_buf[e
                  .d_buf + 2 * s + 1], a = e.pending_buf[e.l_buf + s], s++,
                0 === r ? k(e, a, t) : (k(e, (A = g[a]) + i + 1, t), 0 !== (
                    o = u[A]) && b(e, a -= y[A], o), k(e, A = I(--r), n),
                  0 !== (o = l[A]) && b(e, r -= B[A], o)), s < e.last_lit;);
            k(e, 256, t)
          }

          function _(e, t) {
            var n, r, a, i = t.dyn_tree,
              A = t.stat_desc.static_tree,
              o = t.stat_desc.has_stree,
              u = t.stat_desc.elems,
              l = -1;
            for (e.heap_len = 0, e.heap_max = 573, n = 0; n < u; n++) 0 !== i[
              2 * n] ? (e.heap[++e.heap_len] = l = n, e.depth[n] = 0) : i[
              2 * n + 1] = 0;
            for (; e.heap_len < 2;) i[2 * (a = e.heap[++e.heap_len] = l < 2 ?
              ++l : 0)] = 1, e.depth[a] = 0, e.opt_len--, o && (e
              .static_len -= A[2 * a + 1]);
            for (t.max_code = l, n = e.heap_len >> 1; 1 <= n; n--) Q(e, i, n);
            for (a = u; n = e.heap[1], e.heap[1] = e.heap[e.heap_len--], Q(e,
                i, 1), r = e.heap[1], e.heap[--e.heap_max] = n, e.heap[--e
                .heap_max] = r, i[2 * a] = i[2 * n] + i[2 * r], e.depth[a] = (
                e.depth[n] >= e.depth[r] ? e.depth[n] : e.depth[r]) + 1, i[2 *
                n + 1] = i[2 * r + 1] = a, e.heap[1] = a++, Q(e, i, 1), 2 <= e
              .heap_len;);
            e.heap[--e.heap_max] = e.heap[1],
              function (e, t) {
                var n, r, a, i, A, o, u = t.dyn_tree,
                  l = t.max_code,
                  c = t.stat_desc.static_tree,
                  d = t.stat_desc.has_stree,
                  h = t.stat_desc.extra_bits,
                  p = t.stat_desc.extra_base,
                  f = t.stat_desc.max_length,
                  g = 0;
                for (i = 0; i <= s; i++) e.bl_count[i] = 0;
                for (u[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max +
                  1; n < 573; n++) f < (i = u[2 * u[2 * (r = e.heap[n]) + 1] +
                  1] + 1) && (i = f, g++), u[2 * r + 1] = i, l < r || (e
                  .bl_count[i]++, A = 0, p <= r && (A = h[r - p]), o = u[2 *
                    r], e.opt_len += o * (i + A), d && (e.static_len += o *
                    (c[2 * r + 1] + A)));
                if (0 !== g) {
                  do {
                    for (i = f - 1; 0 === e.bl_count[i];) i--;
                    e.bl_count[i]--, e.bl_count[i + 1] += 2, e.bl_count[f]--,
                      g -= 2
                  } while (0 < g);
                  for (i = f; 0 !== i; i--)
                    for (r = e.bl_count[i]; 0 !== r;) l < (a = e.heap[--n]) ||
                      (u[2 * a + 1] !== i && (e.opt_len += (i - u[2 * a +
                        1]) * u[2 * a], u[2 * a + 1] = i), r--)
                }
              }(e, t), E(i, l, e.bl_count)
          }

          function S(e, t, n) {
            var r, a, i = -1,
              A = t[1],
              o = 0,
              s = 7,
              u = 4;
            for (0 === A && (s = 138, u = 3), t[2 * (n + 1) + 1] = 65535, r =
              0; r <= n; r++) a = A, A = t[2 * (r + 1) + 1], ++o < s && a ===
              A || (o < u ? e.bl_tree[2 * a] += o : 0 !== a ? (a !== i && e
                .bl_tree[2 * a]++, e.bl_tree[32]++) : o <= 10 ? e.bl_tree[
                34]++ : e.bl_tree[36]++, i = a, (o = 0) === A ? (s = 138,
                u = 3) : a === A ? (s = 6, u = 3) : (s = 7, u = 4))
          }

          function U(e, t, n) {
            var r, a, i = -1,
              A = t[1],
              o = 0,
              s = 7,
              u = 4;
            for (0 === A && (s = 138, u = 3), r = 0; r <= n; r++)
              if (a = A, A = t[2 * (r + 1) + 1], !(++o < s && a === A)) {
                if (o < u)
                  for (; k(e, a, e.bl_tree), 0 != --o;);
                else 0 !== a ? (a !== i && (k(e, a, e.bl_tree), o--), k(e, 16,
                  e.bl_tree), b(e, o - 3, 2)) : o <= 10 ? (k(e, 17, e
                  .bl_tree), b(e, o - 3, 3)) : (k(e, 18, e.bl_tree), b(e,
                  o - 11, 7));
                i = a, (o = 0) === A ? (s = 138, u = 3) : a === A ? (s = 6,
                  u = 3) : (s = 7, u = 4)
              }
          }
          a(B);
          var F = !1;

          function L(e, t, n, a) {
            var i, A, o;
            b(e, 0 + (a ? 1 : 0), 3), A = t, o = n, N(i = e), x(i, o), x(i, ~
                o), r.arraySet(i.pending_buf, i.window, A, o, i.pending), i
              .pending += o
          }
          n._tr_init = function (e) {
            F || (function () {
                var e, t, n, r, a, i = new Array(16);
                for (r = n = 0; r < 28; r++)
                  for (y[r] = n, e = 0; e < 1 << u[r]; e++) g[n++] = r;
                for (g[n - 1] = r, r = a = 0; r < 16; r++)
                  for (B[r] = a, e = 0; e < 1 << l[r]; e++) f[a++] = r;
                for (a >>= 7; r < o; r++)
                  for (B[r] = a << 7, e = 0; e < 1 << l[r] - 7; e++) f[
                    256 + a++] = r;
                for (t = 0; t <= s; t++) i[t] = 0;
                for (e = 0; e <= 143;) h[2 * e + 1] = 8, e++, i[8]++;
                for (; e <= 255;) h[2 * e + 1] = 9, e++, i[9]++;
                for (; e <= 279;) h[2 * e + 1] = 7, e++, i[7]++;
                for (; e <= 287;) h[2 * e + 1] = 8, e++, i[8]++;
                for (E(h, 287, i), e = 0; e < o; e++) p[2 * e + 1] = 5, p[
                  2 * e] = T(e, 5);
                v = new M(h, u, 257, A, s), m = new M(p, l, 0, o, s), w =
                  new M(new Array(0), c, 0, 19, 7)
              }(), F = !0), e.l_desc = new C(e.dyn_ltree, v), e.d_desc =
              new C(e.dyn_dtree, m), e.bl_desc = new C(e.bl_tree, w), e
              .bi_buf = 0, e.bi_valid = 0, D(e)
          }, n._tr_stored_block = L, n._tr_flush_block = function (e, t, n,
            r) {
            var a, A, o = 0;
            0 < e.level ? (2 === e.strm.data_type && (e.strm.data_type =
                function (e) {
                  var t, n = 4093624447;
                  for (t = 0; t <= 31; t++, n >>>= 1)
                    if (1 & n && 0 !== e.dyn_ltree[2 * t]) return 0;
                  if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] ||
                    0 !== e.dyn_ltree[26]) return 1;
                  for (t = 32; t < i; t++)
                    if (0 !== e.dyn_ltree[2 * t]) return 1;
                  return 0
                }(e)), _(e, e.l_desc), _(e, e.d_desc), o = function (e) {
                var t;
                for (S(e, e.dyn_ltree, e.l_desc.max_code), S(e, e
                    .dyn_dtree, e.d_desc.max_code), _(e, e.bl_desc), t =
                  18; 3 <= t && 0 === e.bl_tree[2 * d[t] + 1]; t--);
                return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t
              }(e), a = e.opt_len + 3 + 7 >>> 3, (A = e.static_len + 3 +
                7 >>> 3) <= a && (a = A)) : a = A = n + 5, n + 4 <= a && -
              1 !== t ? L(e, t, n, r) : 4 === e.strategy || A === a ? (b(e,
                2 + (r ? 1 : 0), 3), O(e, h, p)) : (b(e, 4 + (r ? 1 : 0),
                3),
                function (e, t, n, r) {
                  var a;
                  for (b(e, t - 257, 5), b(e, n - 1, 5), b(e, r - 4, 4), a =
                    0; a < r; a++) b(e, e.bl_tree[2 * d[a] + 1], 3);
                  U(e, e.dyn_ltree, t - 1), U(e, e.dyn_dtree, n - 1)
                }(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, o + 1),
                O(e, e.dyn_ltree, e.dyn_dtree)), D(e), r && N(e)
          }, n._tr_tally = function (e, t, n) {
            return e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255,
              e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t, e
              .pending_buf[e.l_buf + e.last_lit] = 255 & n, e.last_lit++,
              0 === t ? e.dyn_ltree[2 * n]++ : (e.matches++, t--, e
                .dyn_ltree[2 * (g[n] + i + 1)]++, e.dyn_dtree[2 * I(t)]++),
              e.last_lit === e.lit_bufsize - 1
          }, n._tr_align = function (e) {
            var t;
            b(e, 2, 3), k(e, 256, h), 16 === (t = e).bi_valid ? (x(t, t
                .bi_buf), t.bi_buf = 0, t.bi_valid = 0) : 8 <= t.bi_valid &&
              (t.pending_buf[t.pending++] = 255 & t.bi_buf, t.bi_buf >>= 8,
                t.bi_valid -= 8)
          }
        }, {
          "../utils/common": 3
        }],
        15: [function (e, t, n) {
          "use strict";
          t.exports = function () {
            this.input = null, this.next_in = 0, this.avail_in = 0, this
              .total_in = 0, this.output = null, this.next_out = 0, this
              .avail_out = 0, this.total_out = 0, this.msg = "", this
              .state = null, this.data_type = 2, this.adler = 0
          }
        }, {}],
        "/": [function (e, t, n) {
          "use strict";
          var r = {};
          (0, e("./lib/utils/common").assign)(r, e("./lib/deflate"), e(
            "./lib/inflate"), e("./lib/zlib/constants")), t.exports = r
        }, {
          "./lib/deflate": 1,
          "./lib/inflate": 2,
          "./lib/utils/common": 3,
          "./lib/zlib/constants": 6
        }]
      }, {}, [])("/")
    }))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.sleep = t.pako = void 0;
    var r = i(n(11)),
      a = n(159);

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }

    function A(e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 16;
      if (!e) return A.INVALID;
      var n = void 0;
      if (16 === t) {
        var r = +e;
        return r < 0 ? (n = o(r), console.log("hex2rgb", r, n), n) : ((n = r.toString(16))
          .length < 3 && (n = ("000" + n).slice(-3)), n.length > 3 && n.length < 6 && (
            n = ("000" + n).slice(-6)), n = "#" + n)
      }
      return 10 === t ? (n = e.replace(/#/gi, ""), n = parseInt("0x" + n), isNaN(n) ? A
        .INVALID : "" + n) : A.INVALID
    }

    function o(e) {
      var t = e >> 8 & 255,
        n = 255 & e,
        r = (e >> 16 & 255).toString(16),
        a = t.toString(16),
        i = n.toString(16);
      return console.log("rgb", r, a, i), "#" + ("0" + r).slice(-2) + ("0" + a).slice(-
        2) + ("0" + i).slice(-2)
    }
    Object.defineProperty(t, "pako", {
      enumerable: !0,
      get: function () {
        return i(a).default
      }
    }), t.formatColor = A, t.hex2rgb = o, t.getKiloBytes = function (e) {
      if ("number" == typeof e) return 2 * e / 1024;
      if ("string" == typeof e) return 2 * e.length / 1024;
      return 0
    }, t.sign = function (e) {
      return e ? e < 0 ? -1 : 1 : 0
    }, A.INVALID = "++bad-color++";
    t.sleep = function () {
      var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 100;
      return new r.default((function (t) {
        setTimeout(t, e)
      }))
    }
  }, function (e, t, n) {
    n(162), e.exports = n(8).Number.isInteger
  }, function (e, t, n) {
    var r = n(10);
    r(r.S, "Number", {
      isInteger: n(163)
    })
  }, function (e, t, n) {
    var r = n(23),
      a = Math.floor;
    e.exports = function (e) {
      return !r(e) && isFinite(e) && a(e) === e
    }
  }, function (e, t, n) {
    n(165), e.exports = n(8).Object.assign
  }, function (e, t, n) {
    var r = n(10);
    r(r.S + r.F, "Object", {
      assign: n(166)
    })
  }, function (e, t, n) {
    "use strict";
    var r = n(24),
      a = n(49),
      i = n(84),
      A = n(63),
      o = n(44),
      s = n(78),
      u = Object.assign;
    e.exports = !u || n(38)((function () {
      var e = {},
        t = {},
        n = Symbol(),
        r = "abcdefghijklmnopqrst";
      return e[n] = 7, r.split("").forEach((function (e) {
        t[e] = e
      })), 7 != u({}, e)[n] || Object.keys(u({}, t)).join("") != r
    })) ? function (e, t) {
      for (var n = o(e), u = arguments.length, l = 1, c = i.f, d = A.f; u > l;)
        for (var h, p = s(arguments[l++]), f = c ? a(p).concat(c(p)) : a(p), g = f
            .length, y = 0; g > y;) h = f[y++], r && !d.call(p, h) || (n[h] = p[h]);
      return n
    } : u
  }, function (e, t, n) {
    var r = n(41),
      a = n(68),
      i = n(168);
    e.exports = function (e) {
      return function (t, n, A) {
        var o, s = r(t),
          u = a(s.length),
          l = i(A, u);
        if (e && n != n) {
          for (; u > l;)
            if ((o = s[l++]) != o) return !0
        } else
          for (; u > l; l++)
            if ((e || l in s) && s[l] === n) return e || l || 0;
        return !e && -1
      }
    }
  }, function (e, t, n) {
    var r = n(80),
      a = Math.max,
      i = Math.min;
    e.exports = function (e, t) {
      return (e = r(e)) < 0 ? a(e + t, 0) : i(e, t)
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(170),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(45), n(51), e.exports = n(86).f("iterator")
  }, function (e, t, n) {
    var r = n(80),
      a = n(79);
    e.exports = function (e) {
      return function (t, n) {
        var i, A, o = String(a(t)),
          s = r(n),
          u = o.length;
        return s < 0 || s >= u ? e ? "" : void 0 : (i = o.charCodeAt(s)) < 55296 ||
          i > 56319 || s + 1 === u || (A = o.charCodeAt(s + 1)) < 56320 || A > 57343 ?
          e ? o.charAt(s) : i : e ? o.slice(s, s + 2) : A - 56320 + (i - 55296 <<
          10) + 65536
      }
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(70),
      a = n(55),
      i = n(58),
      A = {};
    n(37)(A, n(18)("iterator"), (function () {
      return this
    })), e.exports = function (e, t, n) {
      e.prototype = r(A, {
        next: a(1, n)
      }), i(e, t + " Iterator")
    }
  }, function (e, t, n) {
    var r = n(27),
      a = n(30),
      i = n(49);
    e.exports = n(24) ? Object.defineProperties : function (e, t) {
      a(e);
      for (var n, A = i(t), o = A.length, s = 0; o > s;) r.f(e, n = A[s++], t[n]);
      return e
    }
  }, function (e, t, n) {
    "use strict";
    var r = n(175),
      a = n(114),
      i = n(50),
      A = n(41);
    e.exports = n(85)(Array, "Array", (function (e, t) {
      this._t = A(e), this._i = 0, this._k = t
    }), (function () {
      var e = this._t,
        t = this._k,
        n = this._i++;
      return !e || n >= e.length ? (this._t = void 0, a(1)) : a(0, "keys" == t ? n :
        "values" == t ? e[n] : [n, e[n]])
    }), "values"), i.Arguments = i.Array, r("keys"), r("values"), r("entries")
  }, function (e, t) {
    e.exports = function () {}
  }, function (e, t, n) {
    n(132), n(71), n(179), n(180), e.exports = n(8).Symbol
  }, function (e, t, n) {
    var r = n(49),
      a = n(84),
      i = n(63);
    e.exports = function (e) {
      var t = r(e),
        n = a.f;
      if (n)
        for (var A, o = n(e), s = i.f, u = 0; o.length > u;) s.call(e, A = o[u++]) && t
          .push(A);
      return t
    }
  }, function (e, t, n) {
    var r = n(41),
      a = n(116).f,
      i = {}.toString,
      A = "object" == typeof window && window && Object.getOwnPropertyNames ? Object
      .getOwnPropertyNames(window) : [];
    e.exports.f = function (e) {
      return A && "[object Window]" == i.call(e) ? function (e) {
        try {
          return a(e)
        } catch (e) {
          return A.slice()
        }
      }(e) : a(r(e))
    }
  }, function (e, t, n) {
    n(88)("asyncIterator")
  }, function (e, t, n) {
    n(88)("observable")
  }, function (e, t, n) {
    n(71), n(45), n(51), n(182), n(186), n(187), e.exports = n(8).Promise
  }, function (e, t, n) {
    "use strict";
    var r, a, i, A, o = n(57),
      s = n(17),
      u = n(34),
      l = n(73),
      c = n(10),
      d = n(23),
      h = n(54),
      p = n(89),
      f = n(59),
      g = n(119),
      y = n(120).set,
      v = n(184)(),
      m = n(91),
      w = n(121),
      B = n(185),
      M = n(122),
      C = s.TypeError,
      I = s.process,
      x = I && I.versions,
      b = x && x.v8 || "",
      k = s.Promise,
      T = "process" == l(I),
      E = function () {},
      D = a = m.f,
      N = !! function () {
        try {
          var e = k.resolve(1),
            t = (e.constructor = {})[n(18)("species")] = function (e) {
              e(E, E)
            };
          return (T || "function" == typeof PromiseRejectionEvent) && e.then(
            E) instanceof t && 0 !== b.indexOf("6.6") && -1 === B.indexOf("Chrome/66")
        } catch (e) {}
      }(),
      P = function (e) {
        var t;
        return !(!d(e) || "function" != typeof (t = e.then)) && t
      },
      Q = function (e, t) {
        if (!e._n) {
          e._n = !0;
          var n = e._c;
          v((function () {
            for (var r = e._v, a = 1 == e._s, i = 0, A = function (t) {
                var n, i, A, o = a ? t.ok : t.fail,
                  s = t.resolve,
                  u = t.reject,
                  l = t.domain;
                try {
                  o ? (a || (2 == e._h && S(e), e._h = 1), !0 === o ? n = r : (
                      l && l.enter(), n = o(r), l && (l.exit(), A = !0)), n ===
                    t.promise ? u(C("Promise-chain cycle")) : (i = P(n)) ? i
                    .call(n, s, u) : s(n)) : u(r)
                } catch (e) {
                  l && !A && l.exit(), u(e)
                }
              }; n.length > i;) A(n[i++]);
            e._c = [], e._n = !1, t && !e._h && O(e)
          }))
        }
      },
      O = function (e) {
        y.call(s, (function () {
          var t, n, r, a = e._v,
            i = _(e);
          if (i && (t = w((function () {
              T ? I.emit("unhandledRejection", a, e) : (n = s
                .onunhandledrejection) ? n({
                promise: e,
                reason: a
              }) : (r = s.console) && r.error && r.error(
                "Unhandled promise rejection", a)
            })), e._h = T || _(e) ? 2 : 1), e._a = void 0, i && t.e) throw t.v
        }))
      },
      _ = function (e) {
        return 1 !== e._h && 0 === (e._a || e._c).length
      },
      S = function (e) {
        y.call(s, (function () {
          var t;
          T ? I.emit("rejectionHandled", e) : (t = s.onrejectionhandled) && t({
            promise: e,
            reason: e._v
          })
        }))
      },
      U = function (e) {
        var t = this;
        t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c
        .slice()), Q(t, !0))
      },
      F = function (e) {
        var t, n = this;
        if (!n._d) {
          n._d = !0, n = n._w || n;
          try {
            if (n === e) throw C("Promise can't be resolved itself");
            (t = P(e)) ? v((function () {
              var r = {
                _w: n,
                _d: !1
              };
              try {
                t.call(e, u(F, r, 1), u(U, r, 1))
              } catch (e) {
                U.call(r, e)
              }
            })): (n._v = e, n._s = 1, Q(n, !1))
          } catch (e) {
            U.call({
              _w: n,
              _d: !1
            }, e)
          }
        }
      };
    N || (k = function (e) {
      p(this, k, "Promise", "_h"), h(e), r.call(this);
      try {
        e(u(F, this, 1), u(U, this, 1))
      } catch (e) {
        U.call(this, e)
      }
    }, (r = function (e) {
      this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0,
        this._h = 0, this._n = !1
    }).prototype = n(92)(k.prototype, {
      then: function (e, t) {
        var n = D(g(this, k));
        return n.ok = "function" != typeof e || e, n.fail = "function" ==
          typeof t && t, n.domain = T ? I.domain : void 0, this._c.push(n), this
          ._a && this._a.push(n), this._s && Q(this, !1), n.promise
      },
      catch: function (e) {
        return this.then(void 0, e)
      }
    }), i = function () {
      var e = new r;
      this.promise = e, this.resolve = u(F, e, 1), this.reject = u(U, e, 1)
    }, m.f = D = function (e) {
      return e === k || e === A ? new i(e) : a(e)
    }), c(c.G + c.W + c.F * !N, {
      Promise: k
    }), n(58)(k, "Promise"), n(123)("Promise"), A = n(8).Promise, c(c.S + c.F * !N,
      "Promise", {
        reject: function (e) {
          var t = D(this);
          return (0, t.reject)(e), t.promise
        }
      }), c(c.S + c.F * (o || !N), "Promise", {
      resolve: function (e) {
        return M(o && this === A ? k : this, e)
      }
    }), c(c.S + c.F * !(N && n(124)((function (e) {
      k.all(e).catch(E)
    }))), "Promise", {
      all: function (e) {
        var t = this,
          n = D(t),
          r = n.resolve,
          a = n.reject,
          i = w((function () {
            var n = [],
              i = 0,
              A = 1;
            f(e, !1, (function (e) {
              var o = i++,
                s = !1;
              n.push(void 0), A++, t.resolve(e).then((function (e) {
                s || (s = !0, n[o] = e, --A || r(n))
              }), a)
            })), --A || r(n)
          }));
        return i.e && a(i.v), n.promise
      },
      race: function (e) {
        var t = this,
          n = D(t),
          r = n.reject,
          a = w((function () {
            f(e, !1, (function (e) {
              t.resolve(e).then(n.resolve, r)
            }))
          }));
        return a.e && r(a.v), n.promise
      }
    })
  }, function (e, t) {
    e.exports = function (e, t, n) {
      var r = void 0 === n;
      switch (t.length) {
        case 0:
          return r ? e() : e.call(n);
        case 1:
          return r ? e(t[0]) : e.call(n, t[0]);
        case 2:
          return r ? e(t[0], t[1]) : e.call(n, t[0], t[1]);
        case 3:
          return r ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);
        case 4:
          return r ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3])
      }
      return e.apply(n, t)
    }
  }, function (e, t, n) {
    var r = n(17),
      a = n(120).set,
      i = r.MutationObserver || r.WebKitMutationObserver,
      A = r.process,
      o = r.Promise,
      s = "process" == n(56)(A);
    e.exports = function () {
      var e, t, n, u = function () {
        var r, a;
        for (s && (r = A.domain) && r.exit(); e;) {
          a = e.fn, e = e.next;
          try {
            a()
          } catch (r) {
            throw e ? n() : t = void 0, r
          }
        }
        t = void 0, r && r.enter()
      };
      if (s) n = function () {
        A.nextTick(u)
      };
      else if (!i || r.navigator && r.navigator.standalone)
        if (o && o.resolve) {
          var l = o.resolve(void 0);
          n = function () {
            l.then(u)
          }
        } else n = function () {
          a.call(r, u)
        };
      else {
        var c = !0,
          d = document.createTextNode("");
        new i(u).observe(d, {
          characterData: !0
        }), n = function () {
          d.data = c = !c
        }
      }
      return function (r) {
        var a = {
          fn: r,
          next: void 0
        };
        t && (t.next = a), e || (e = a, n()), t = a
      }
    }
  }, function (e, t, n) {
    var r = n(17).navigator;
    e.exports = r && r.userAgent || ""
  }, function (e, t, n) {
    "use strict";
    var r = n(10),
      a = n(8),
      i = n(17),
      A = n(119),
      o = n(122);
    r(r.P + r.R, "Promise", {
      finally: function (e) {
        var t = A(this, a.Promise || i.Promise),
          n = "function" == typeof e;
        return this.then(n ? function (n) {
          return o(t, e()).then((function () {
            return n
          }))
        } : e, n ? function (n) {
          return o(t, e()).then((function () {
            throw n
          }))
        } : e)
      }
    })
  }, function (e, t, n) {
    "use strict";
    var r = n(10),
      a = n(91),
      i = n(121);
    r(r.S, "Promise", {
      try: function (e) {
        var t = a.f(this),
          n = i(e);
        return (n.e ? t.reject : t.resolve)(n.v), t.promise
      }
    })
  }, function (e, t, n) {
    n(189);
    var r = n(8).Object;
    e.exports = function (e, t, n) {
      return r.defineProperty(e, t, n)
    }
  }, function (e, t, n) {
    var r = n(10);
    r(r.S + r.F * !n(24), "Object", {
      defineProperty: n(27).f
    })
  }, function (e, t, n) {
    n(191), e.exports = n(8).Object.keys
  }, function (e, t, n) {
    var r = n(44),
      a = n(49);
    n(101)("keys", (function () {
      return function (e) {
        return a(r(e))
      }
    }))
  }, function (e, t, n) {
    n(51), n(45), e.exports = n(193)
  }, function (e, t, n) {
    var r = n(30),
      a = n(90);
    e.exports = n(8).getIterator = function (e) {
      var t = a(e);
      if ("function" != typeof t) throw TypeError(e + " is not iterable!");
      return r(t.call(e))
    }
  }, function (e, t, n) {
    var r = n(8),
      a = r.JSON || (r.JSON = {
        stringify: JSON.stringify
      });
    e.exports = function (e) {
      return a.stringify.apply(a, arguments)
    }
  }, function (e, t, n) {
    n(71), n(45), n(51), n(196), n(200), n(202), n(203), e.exports = n(8).Set
  }, function (e, t, n) {
    "use strict";
    var r = n(126),
      a = n(93);
    e.exports = n(127)("Set", (function (e) {
      return function () {
        return e(this, arguments.length > 0 ? arguments[0] : void 0)
      }
    }), {
      add: function (e) {
        return r.def(a(this, "Set"), e = 0 === e ? 0 : e, e)
      }
    }, r)
  }, function (e, t, n) {
    var r = n(34),
      a = n(78),
      i = n(44),
      A = n(68),
      o = n(198);
    e.exports = function (e, t) {
      var n = 1 == e,
        s = 2 == e,
        u = 3 == e,
        l = 4 == e,
        c = 6 == e,
        d = 5 == e || c,
        h = t || o;
      return function (t, o, p) {
        for (var f, g, y = i(t), v = a(y), m = r(o, p, 3), w = A(v.length), B = 0, M =
            n ? h(t, w) : s ? h(t, 0) : void 0; w > B; B++)
          if ((d || B in v) && (g = m(f = v[B], B, y), e))
            if (n) M[B] = g;
            else if (g) switch (e) {
          case 3:
            return !0;
          case 5:
            return f;
          case 6:
            return B;
          case 2:
            M.push(f)
        } else if (l) return !1;
        return c ? -1 : u || l ? l : M
      }
    }
  }, function (e, t, n) {
    var r = n(199);
    e.exports = function (e, t) {
      return new(r(e))(t)
    }
  }, function (e, t, n) {
    var r = n(23),
      a = n(115),
      i = n(18)("species");
    e.exports = function (e) {
      var t;
      return a(e) && ("function" != typeof (t = e.constructor) || t !== Array && !a(t
          .prototype) || (t = void 0), r(t) && null === (t = t[i]) && (t = void 0)),
        void 0 === t ? Array : t
    }
  }, function (e, t, n) {
    var r = n(10);
    r(r.P + r.R, "Set", {
      toJSON: n(128)("Set")
    })
  }, function (e, t, n) {
    var r = n(59);
    e.exports = function (e, t) {
      var n = [];
      return r(e, !1, n.push, n, t), n
    }
  }, function (e, t, n) {
    n(129)("Set")
  }, function (e, t, n) {
    n(130)("Set")
  }, function (e, t, n) {
    n(45), n(205), e.exports = n(8).Array.from
  }, function (e, t, n) {
    "use strict";
    var r = n(34),
      a = n(10),
      i = n(44),
      A = n(117),
      o = n(118),
      s = n(68),
      u = n(206),
      l = n(90);
    a(a.S + a.F * !n(124)((function (e) {
      Array.from(e)
    })), "Array", {
      from: function (e) {
        var t, n, a, c, d = i(e),
          h = "function" == typeof this ? this : Array,
          p = arguments.length,
          f = p > 1 ? arguments[1] : void 0,
          g = void 0 !== f,
          y = 0,
          v = l(d);
        if (g && (f = r(f, p > 2 ? arguments[2] : void 0, 2)), null == v || h ==
          Array && o(v))
          for (n = new h(t = s(d.length)); t > y; y++) u(n, y, g ? f(d[y], y) : d[
            y]);
        else
          for (c = v.call(d), n = new h; !(a = c.next()).done; y++) u(n, y, g ? A(c,
            f, [a.value, y], !0) : a.value);
        return n.length = y, n
      }
    })
  }, function (e, t, n) {
    "use strict";
    var r = n(27),
      a = n(55);
    e.exports = function (e, t, n) {
      t in e ? r.f(e, t, a(0, n)) : e[t] = n
    }
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onResult: t,
        resultReturns: n,
        onDone: r,
        rethrowIfPossible: a
      }) {
        return this.callTapsSeries({
          onError: (t, n) => e(n),
          onResult: (e, n, r) =>
            `if(${n} !== undefined) {\n${t(n)};\n} else {\n${r()}}\n`,
          resultReturns: n,
          onDone: r,
          rethrowIfPossible: a
        })
      }
    };
    e.exports = class extends r {
      tapAsync() {
        throw new Error("tapAsync is not supported on a SyncBailHook")
      }
      tapPromise() {
        throw new Error("tapPromise is not supported on a SyncBailHook")
      }
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
  }, function (e, t, n) {
    n(209), e.exports = n(8).Object.getPrototypeOf
  }, function (e, t, n) {
    var r = n(44),
      a = n(113);
    n(101)("getPrototypeOf", (function () {
      return function (e) {
        return a(r(e))
      }
    }))
  }, function (e, t, n) {
    e.exports = {
      default: n(211),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(212), e.exports = n(8).Object.setPrototypeOf
  }, function (e, t, n) {
    var r = n(10);
    r(r.S, "Object", {
      setPrototypeOf: n(213).set
    })
  }, function (e, t, n) {
    var r = n(23),
      a = n(30),
      i = function (e, t) {
        if (a(e), !r(t) && null !== t) throw TypeError(t + ": can't set as prototype!")
      };
    e.exports = {
      set: Object.setPrototypeOf || ("__proto__" in {} ? function (e, t, r) {
        try {
          (r = n(34)(Function.call, n(100).f(Object.prototype, "__proto__").set, 2))
          (e, []), t = !(e instanceof Array)
        } catch (e) {
          t = !0
        }
        return function (e, n) {
          return i(e, n), t ? e.__proto__ = n : r(e, n), e
        }
      }({}, !1) : void 0),
      check: i
    }
  }, function (e, t, n) {
    n(215);
    var r = n(8).Object;
    e.exports = function (e, t) {
      return r.create(e, t)
    }
  }, function (e, t, n) {
    var r = n(10);
    r(r.S, "Object", {
      create: n(70)
    })
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(16)),
      a = g(n(36)),
      i = g(n(5)),
      A = g(n(2)),
      o = g(n(0)),
      s = g(n(1)),
      u = g(n(3)),
      l = g(n(26)),
      c = g(n(4)),
      d = g(n(74)),
      h = g(n(22)),
      p = n(302),
      f = n(223);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = 0,
      v = function (e) {
        function t() {
          (0, o.default)(this, t);
          var e = (0, u.default)(this, (t.__proto__ || (0, A.default)(t)).apply(this,
            arguments));
          return e.type = "pen", e.penIntensSet = {}, e.description =
            "涂鸦操作工具。\n首先使用op:pen:activate设置画布为涂鸦模式。通过op:pen:lineWidth, op:pen:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：",
            e
        }
        return (0, c.default)(t, e), (0, s.default)(t, [{
          key: "eventsToListen",
          value: function () {
            return {
              activate: {
                value: !0,
                information: {
                  args: "",
                  message: "设置工具栏状态为：" + this.type
                }
              }
            }
          }
        }, {
          key: "handleMouseDown",
          value: function (e, n, r, a, i) {
            var o, s, u, c, d = !1;
            if (this.mUpInfo) {
              var h = Date.now() - this.mUpInfo.t < this.app.appConfig
                .drawMergeInterval,
                p = Math.abs(i - this.mUpInfo.cy) + Math.abs(a - this.mUpInfo
                .cx) < this.app.appConfig.drawMergeDist;
              this.app.appConfig.drawMergeDebug && (console.log("time diff", Date
                  .now() - this.mUpInfo.t), console.log("dist diff", Math.abs(
                  i - this.mUpInfo.cy) + Math.abs(a - this.mUpInfo.cx))), d = h &&
                p
            }
            clearTimeout(this.mUpTimer), d ? (this.points.push(void 0), (0, l
              .default)(t.prototype.__proto__ || (0, A.default)(t.prototype),
              "handleMouseMove", this).call(this, e, n, r)) : (this.mUpInfo && (
              (0, l.default)(t.prototype.__proto__ || (0, A.default)(t
                .prototype), "handleMouseUp", this).call(this, e, null === (
                  o = this.mUpInfo) || void 0 === o ? void 0 : o.mx, null ===
                (s = this.mUpInfo) || void 0 === s ? void 0 : s.my, null === (
                  u = this.mUpInfo) || void 0 === u ? void 0 : u.cx, null ===
                (c = this.mUpInfo) || void 0 === c ? void 0 : c.cy), this
              .mUpInfo = void 0), (0, l.default)(t.prototype.__proto__ || (0,
              A.default)(t.prototype), "handleMouseDown", this).call(this, e,
              n, r, a, i))
          }
        }, {
          key: "handleMouseUp",
          value: function (e, n, r, a, i) {
            var o = this;
            this.app.appConfig.drawMergeInterval > 0 ? ((0, l.default)(t.prototype
              .__proto__ || (0, A.default)(t.prototype), "handleMouseMove",
              this).call(this, e, n, r), this.mUpInfo = {
              t: Date.now(),
              mx: n,
              my: r,
              cx: a,
              cy: i
            }, this.mUpTimer = setTimeout((function () {
              (0, l.default)(t.prototype.__proto__ || (0, A.default)(t
                .prototype), "handleMouseUp", o).call(o, e, n, r, a, i, !
                0), o.mUpInfo = void 0
            }), this.app.appConfig.drawMergeInterval)) : (0, l.default)(t
              .prototype.__proto__ || (0, A.default)(t.prototype),
              "handleMouseUp", this).call(this, e, n, r, a, i)
          }
        }, {
          key: "getSnapshot",
          value: function (e) {
            var t = this.points;
            this.penIntens.trimIntensLength(t.length);
            var n = this.opsManager.currPage.getOpId(),
              r = this.app.room.opIdSnapshotMap[n];
            if (!r || !r.snapshot.hasOwnProperty("category")) return (0, i
              .default)((0, i.default)((0, i.default)({
              points: t.slice()
            }, this.penIntens.snapshotInfo()), {
              total: t.length
            }), this.getFreeDrawCommonProperty({
              inProgress: e
            }));
            var a = h.default.pointsPerBatch,
              A = {
                boundary: this.getBoundaryRectOfFreeDraw()
              };
            return this.sampleSeq > 0 && e ? (0, i.default)((0, i.default)((0, i
              .default)((0, i.default)({}, A), {
              points: t.slice(t.length - h.default.pointsPerBatch)
            }), this.penIntens.snapshotInfo(this.penIntens.intens.length -
              a)), {
              total: t.length
            }) : this.sampleSeq > 0 ? (0, i.default)((0, i.default)((0, i
              .default)((0, i.default)({}, A), {
              points: t.slice(t.length - h.default.pointsPerBatch)
            }), this.penIntens.snapshotInfo(this.penIntens.intens.length -
              a)), {
              total: t.length,
              inProgress: e
            }) : (0, i.default)((0, i.default)((0, i.default)({
              points: t.slice()
            }, this.penIntens.snapshotInfo()), {
              total: t.length
            }), this.getFreeDrawCommonProperty({
              inProgress: e
            }))
          }
        }, {
          key: "_draw",
          value: function (e, t) {
            var n = e.data,
              r = e.opId,
              a = n.points,
              i = n.intens,
              A = n.total,
              o = n.lineWidth;
            this.penIntensSet[r] || (this.penIntensSet[r] = new f.PenIntens);
            var s = this.penIntensSet[r],
              u = !!i && i.length === A,
              l = s.refine(a, i),
              c = s.smooth(l, n.mat);
            return (0, p.drawCurve)(this.app, t, c, this.app.scale, u ? o :
              void 0), c.map((function (e) {
              return e.value
            }))
          }
        }, {
          key: "draw",
          value: function (e, t) {
            var n = e.data,
              r = n.intens,
              a = n.total,
              i = n.lineWidth,
              A = n.stroke,
              o = n.color,
              s = n.opacity;
            this._draw(e, t), !!r && r.length === a ? this.strokeOrFill(t, {
              fill: A || o,
              lineWidth: 0,
              opacity: s,
              isShape: !1
            }) : this.strokeOrFill(t, {
              stroke: A || o,
              lineWidth: i,
              opacity: s,
              isShape: !1
            })
          }
        }, {
          key: "ifMouseOnOp",
          value: function (e, t, n) {
            var r = this.app.container.ctx;
            return this._draw(e, r), r.lineWidth = e.data.lineWidth + 20, r
              .strokeStyle = "rgba(0,0,0,0)", r.stroke(), r.isPointInStroke(t, n)
          }
        }, {
          key: "patchOp",
          value: function (e) {
            var t = Number(e.data.lineWidth),
              n = Math.abs(e.data.xFactor || 1),
              r = Math.abs(e.data.yFactor || 1),
              i = (e.data.points || []).reduce((function (e, t) {
                return [Math.min(t[0], e[0]), Math.min(t[1], e[1]), Math.max(
                  t[0], e[2]), Math.max(t[1], e[3])]
              }), [e.data.points[0][0], e.data.points[0][1], e.data.points[0][
                0], e.data.points[0][1]
              ]),
              A = (0, a.default)(i, 4),
              o = A[0],
              s = A[1],
              u = A[2],
              l = A[3];
            e.data.boundary = {
              sx: o - t / 2 / n,
              sy: s - t / 2 / r,
              w: Math.abs(u - o) + t / n,
              h: Math.abs(l - s) + t / r
            }
          }
        }, {
          key: "mergePartial",
          value: function (e, t) {
            var n = this._mergePartial(e, t);
            return n.data.points.length !== n.data.total && this.logger.warn(
              "merge ........", e, t), n
          }
        }, {
          key: "_mergePartial",
          value: function (e, t) {
            try {
              var n = t.data.total - e.data.total,
                a = !1 === e.data.inProgress || !1 === t.data.inProgress ? {
                  inProgress: !1
                } : {};
              if (0 === n) return (0, i.default)((0, i.default)({}, e), {
                data: (0, i.default)((0, i.default)((0, i.default)((0, i
                  .default)((0, i.default)({}, e.data), t.data), a), {
                  points: e.data.points
                }), e.data.intens ? {
                  intens: e.data.intens
                } : {})
              });
              if (n < 0) {
                var A = t.data.total - t.data.points.length,
                  o = t.data.total;
                return (0, i.default)((0, i.default)({}, e), {
                  data: (0, i.default)((0, i.default)((0, i.default)((0, i
                    .default)((0, i.default)({}, e.data), t.data), a), {
                    total: e.data.total,
                    boundary: e.data.boundary,
                    points: [].concat((0, r.default)(e.data.points
                        .slice(0, A)), (0, r.default)(t.data.points),
                      (0, r.default)(e.data.points.slice(o)))
                  }), e.data.intens && t.data.intens ? {
                    intens: [].concat((0, r.default)(e.data.intens.slice(
                      0, A)), (0, r.default)(t.data.intens), (0, r
                      .default)(e.data.intens.slice(o)))
                  } : {})
                })
              }
              if (n <= t.data.points.length) {
                var s = t.data.points.length - n;
                return (0, i.default)((0, i.default)({}, e), {
                  data: (0, i.default)((0, i.default)((0, i.default)((0, i
                    .default)((0, i.default)({}, e.data), t.data), a), {
                    points: e.data.points.concat(t.data.points.slice(s))
                  }), e.data.intens && t.data.intens ? {
                    intens: e.data.intens.concat(t.data.intens.slice(s))
                  } : {})
                })
              }
              var u = n - t.data.points.length;
              return (0, i.default)((0, i.default)({}, e), {
                data: (0, i.default)((0, i.default)((0, i.default)((0, i
                  .default)((0, i.default)({}, e.data), t.data), a), {
                  points: [].concat((0, r.default)(e.data.points), (0, r
                    .default)(new Array(u)), (0, r.default)(t.data
                    .points))
                }), e.data.intens && t.data.intens ? {
                  intens: [].concat((0, r.default)(e.data.intens), (0, r
                    .default)(new Array(u)), (0, r.default)(t.data
                    .intens))
                } : {})
              })
            } catch (n) {
              return y < 100 && (y++, this.logger.warn("[wb] mergePartial error",
                e, t)), e
            }
          }
        }]), t
      }(d.default);
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.MINIMUM_BROADCAST_GAP_PER_DATATYPE = void 0;
    var r = g(n(7)),
      a = g(n(33)),
      i = g(n(5)),
      A = g(n(20)),
      o = g(n(21)),
      s = g(n(0)),
      u = g(n(1)),
      l = n(31),
      c = g(n(32)),
      d = n(298),
      h = n(72),
      p = n(102),
      f = n(14);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = t.MINIMUM_BROADCAST_GAP_PER_DATATYPE = 25,
      v = function () {
        function e(t, n) {
          var r = this;
          (0, s.default)(this, e), this.incId = 0, this.debounceData = {}, this
            .noAckData = {}, this.dataInResendQueue = {}, this.lastContinueServerPkgId = -
            1, this.serverPkgSinceLast = [], this.lastPkgIdToSync = -2, this
            .dataOfSync = {}, this.syncStartToLog = -1, this.syncEndToLog = -1, this
            .pkgInside = 0, this.appliedPkgs = {}, this.isSynchronizing = !1, this
            .isFirstSync = !0, this.timerTrigger = requestAnimationFrame.bind(window),
            this._scheduleNextBroadcast = function (e, t) {
              return r.timerTrigger((function () {
                (new Date).valueOf() - e.time < y ? e.timer = r
                  ._scheduleNextBroadcast(e, t) : r._doBroadcastData(e, t)
              }))
            }, this._doBroadcastData = function (e, t) {
              var n, a, i = e.dataType,
                A = r.app.room.mergeDebouncedData(e.dataQueue, i),
                s = 2;
              if ("snapshot" === i) {
                var u = null === (a = null === (n = A.value) || void 0 === n ? void 0 : n
                  .data) || void 0 === a ? void 0 : a.type; - 1 !== ["mouse-pointer",
                  "select", "select-hover", "laser", "camera-bound"
                ].indexOf(u) ? i = u : s = 1
              }
              var l = {
                strategy: s,
                data: (0, o.default)(A),
                client_pkg_id: e.client_pkg_id
              };
              2 === s && (l.dataType = i), r.app.isConnected && r.handler.broadcastData(
                l), r._shouldDataBeResendIfLost(A) && r._pushDataToResendQueue(l), r
                .noAckData[l.client_pkg_id] = {
                  data: A,
                  fakePkgId: e.fakePkgId
                }, r.debounceData[t] = {
                  timer: null,
                  client_pkg_id: -1,
                  time: 0,
                  dataQueue: [],
                  fakePkgId: -1,
                  dataType: ""
                }
            }, this._checkResendQueue = function () {
              if (0 === (0, A.default)(r.dataInResendQueue).length) r.resendTimer = null;
              else {
                var e = Date.now();
                for (var t in r.dataInResendQueue) {
                  if (r.dataInResendQueue[t].resendCount >= 3) return r.logger.error(
                      "[wb] dataHub/resend: resend exceeds3 times，stop resending this package",
                      (0, o.default)(r.dataInResendQueue[t].data)), r.app
                    .dataReportUtil("v3_conn_error", {
                      error: {
                        code: h.DataReportConnError.Resend_Count_Exceed_Max,
                        message: (0, o.default)(r.dataInResendQueue[t].data)
                      }
                    }), r.resendTimer = null, r._handleResendFail();
                  e - r.dataInResendQueue[t].sendAt > 2e3 && r.app.isConnected && (r
                    .handler.broadcastData(r.dataInResendQueue[t].data), r
                    .dataInResendQueue[t] = (0, i.default)((0, i.default)({}, r
                      .dataInResendQueue[t]), {
                      sendAt: Date.now(),
                      resendCount: r.dataInResendQueue[t].resendCount + 1
                    }))
                }
                r.resendTimer = setTimeout(r._checkResendQueue, 2e3)
              }
            }, this._handleResendFail = function () {
              r.dataInResendQueue = {};
              var e = r.room.getCachedTil(r.lastContinueServerPkgId),
                t = r.room.pkgIdOpIdMap,
                n = r.room.opIdSnapshotMap;
              r.app.resetState(), r.app.room.execCachedSnapshots({
                lastConfirmId: e,
                pkgIdOpIdMap: t,
                opIdSnapshotMap: n
              }), r.lastContinueServerPkgId = e, (0, l.showToast)({
                msg: (0, f.getMsg)("sync"),
                time: 1e3,
                type: "info",
                msgType: c.default.SYNCHRONIZING
              }), r.app.readyToSyncData()
            }, this._setupResendSyncRequestTimer = function () {
              var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
              clearTimeout(r.resendSyncRequestTimer), r.resendSyncRequestTimer =
                setTimeout((function () {
                  e <= 8 ? (r.logger.error(
                    "[wb] dataHub/sync: timeout，this is Retry No." + (e + 1) +
                    ", " + r.lastContinueServerPkgId), r.handler.sendSyncRequest(r
                    .lastContinueServerPkgId), r._setupResendSyncRequestTimer(e +
                    1)) : ((0, l.showToast)({
                    type: "error",
                    msg: (0, f.getMsg)("syncFail"),
                    time: 1e3,
                    msgType: c.default.SYNC_FAIL
                  }), r.app.dataReportUtil("v3_conn_error", {
                    error: {
                      code: h.DataReportConnError.Sync_Timeout,
                      message: (0, o.default)({
                        lastContinueServerPkgId: r.lastContinueServerPkgId,
                        lastPkgIdToSync: r.lastPkgIdToSync
                      })
                    }
                  }), r.logger.error("[wb] dataHub/sync: multiple sync timeout"))
                }), 1e4)
            }, this._setCameraAftRdy = function () {
              r.app.container.width && r.app.container.height && r.app.container.mounted ?
                (r.app.defaultCameraBound ? r.app.setCameraBound(r.app.defaultCameraBound,
                  !1) : r.app.hasBackground() || r.app.hasTransDoc() ? r.app.fitToDoc(!
                  1) : r.app.zoomTo1AfterJoin ? (r.app.fitToContent(!1), r.app.zoomTo(1,
                  !1)) : r.app.setCameraBound({
                  centerX: 0,
                  centerY: 0,
                  width: 1920,
                  height: 1080
                }, !1), r.app.cameraReady = !0, r.app.emit("event:appState:change",
                  "cameraReady")) : r.app.once("container:resize", r._setCameraAftRdy)
            }, this.app = t, this.handler = n, this.randomSeed = (0, d.getRandomIntByStr)(
              9), this.incId = 0, this.bindEvents()
        }
        return (0, u.default)(e, [{
          key: "destroy",
          value: function () {
            clearTimeout(this.resendSyncRequestTimer), clearTimeout(this
              .resendTimer), this.isSynchronizing = !1, void 0 === (0, a
              .default)(this.visHandlerUnregist) && (this.visHandlerUnregist(),
              this.visHandlerUnregist = void 0)
          }
        }, {
          key: "reset",
          value: function () {
            for (var e in this.debounceData) this.debounceData[e].timer &&
              cancelAnimationFrame(this.debounceData[e].timer);
            this.debounceData = {}, this.lastContinueServerPkgId = -1, this
              .serverPkgSinceLast = [], this.lastPkgIdToSync = -2, this
              .dataOfSync = {}, this.appliedPkgs = {}, this.isSynchronizing = !1,
              this.randomSeed = (0, d.getRandomIntByStr)(9), this.incId = 0,
              clearTimeout(this.resendSyncRequestTimer)
          }
        }, {
          key: "bindEvents",
          value: function () {
            var e = this;
            this.handler.on("data", this.onData.bind(this)), this.handler.on(
                "broadcastAck", this.onBroadcastAck.bind(this)), this.handler.on(
                "syncRequestAck", this.onSendRequestAck.bind(this)), this.handler
              .on("syncRequestResponse", this.onSendRequestResponse.bind(this)),
              this.visHandlerUnregist = (0, p.registerVisibleChangeHandler)((
                function () {
                  e.timerTrigger = requestAnimationFrame.bind(window)
                }), (function () {
                e.timerTrigger = setTimeout.bind(window)
              }))
          }
        }, {
          key: "hasPkgBeenApplied",
          value: function (e, t) {
            if (!t || !e) return !1;
            var n = this.getAppliedPkgKey(e, t);
            return this.appliedPkgs.hasOwnProperty(n)
          }
        }, {
          key: "setPkgBeenApplied",
          value: function (e, t, n) {
            if (t && e) {
              var r = this.getAppliedPkgKey(e, t);
              (!this.appliedPkgs.hasOwnProperty(r) || this.appliedPkgs[r] > n) &&
              (this.appliedPkgs[r] = n)
            }
          }
        }, {
          key: "getAppliedPkgKey",
          value: function (e, t) {
            return t.toString() + "_" + e.toString()
          }
        }, {
          key: "onData",
          value: function (e) {
            var t, n = e.data,
              r = e.server_pkg_id,
              a = e.client_pkg_id,
              i = e.source_uid;
            if (this._updateServerPkgInfo(r, r), this.isSynchronizing) this
              .dataOfSync[r] = {
                data: n,
                client_pkg_id: a,
                source_uid: i
              };
            else {
              if (this.hasPkgBeenApplied(a, i)) return;
              this.setPkgBeenApplied(a, i, r);
              var A = n.type,
                o = n.value;
              "snapshot" === A ? this.room.execSnapshot({
                  snapshot: o,
                  pkgId: r
                }) : "broadcaster" === A ? this.app.vision.receiveBroadcaster(o) :
                "alive" === A ? null === (t = this.app.aliveManager) || void 0 ===
                t || t.receiveAlive(o) : "snapshotArr" === A && this.room
                .execBatchSnapshots(o.map((function (e) {
                  return {
                    snapshot: e,
                    pkgId: r
                  }
                })), "data")
            }
          }
        }, {
          key: "sendSyncRequest",
          value: function () {
            this.logger.log("[wb]请求同步数据, 是否正在同步数据", this.isSynchronizing,
                "当前最后一个数据id", this.lastContinueServerPkgId), this
              .isSynchronizing || (this.isSynchronizing = !0, this.handler
                .sendSyncRequest(this.lastContinueServerPkgId), this
                .lastPkgIdToSync = -2, this.dataOfSync = {}, this
                ._setupResendSyncRequestTimer())
          }
        }, {
          key: "stopSyncRequest",
          value: function () {
            this.logger.log("白板--\x3e 终止同步数据, 是否正在同步数据", this.isSynchronizing),
              this.isSynchronizing = !1, clearTimeout(this.resendSyncRequestTimer)
          }
        }, {
          key: "onSendRequestAck",
          value: function (e) {
            this.lastPkgIdToSync = e.last_server_pkg_id, this.logger.log(
                "[wb]收到同步响应，需求同步到序列号: " + this.lastPkgIdToSync), this
              ._updateAppAfterSync()
          }
        }, {
          key: "onSendRequestResponse",
          value: function (e) {
            var t = this;
            if (this.isSynchronizing) {
              var n = e.start_server_pkg_id,
                a = e.end_server_pkg_id,
                i = e.packages;
              Array.isArray(i) || (i = []), clearTimeout(this.syncLogTimer), -
                1 !== this.syncEndToLog && n !== this.syncEndToLog + 1 ? (this
                  .logger.warn("[wb]收到同步数据不重叠。\n            \n之前同步数据为: " + this
                    .syncStartToLog + "-" + this.syncEndToLog + ", 共有" + this
                    .pkgInside + "数据包\n            \n当前同步数据为: " + n + "-" + a +
                    ", 共有" + i.length + "数据包"), this.syncStartToLog = -1, this
                  .syncEndToLog = -1, this.pkgInside = 0) : (this
                  .syncStartToLog = -1 === this.syncStartToLog ? n : this
                  .syncStartToLog, this.syncEndToLog = a, this.pkgInside = this
                  .pkgInside + i.length, this.syncLogTimer = setTimeout((
                    function () {
                      t.logger.log("[wb]收到同步数据: " + t.syncStartToLog + "-" + t
                          .syncEndToLog + "。实际包括" + t.pkgInside + "个数据包"), t
                        .syncStartToLog = -1, t.syncEndToLog = -1, t.pkgInside =
                        0
                    }), 2e3));
              var A = !0,
                o = !1,
                s = void 0;
              try {
                for (var u, l = (0, r.default)(i); !(A = (u = l.next())
                  .done); A = !0) {
                  var c = u.value;
                  this.dataOfSync[c.server_pkg_id] = {
                    data: c.data,
                    client_pkg_id: c.client_pkg_id,
                    source_uid: c.source_uid
                  }
                }
              } catch (e) {
                o = !0, s = e
              } finally {
                try {
                  !A && l.return && l.return()
                } finally {
                  if (o) throw s
                }
              }
              this._updateServerPkgInfo(n, a), this._updateAppAfterSync()
            }
          }
        }, {
          key: "onBroadcastAck",
          value: function (e) {
            var t = this,
              n = e.server_pkg_id,
              r = e.client_pkg_id;
            if (delete this.dataInResendQueue[r], this._updateServerPkgInfo(n, n),
              !this.noAckData[r]) return this.logger.warn(
              "[wb]broadcastAck, clientSeqId:" + r + "的数据不存在");
            var a = this.noAckData[r].data,
              i = this.noAckData[r].fakePkgId;
            if (delete this.noAckData[r], !a) return this.logger.warn(
              "[wb]broadcastAck, clientSeqId:" + r + "的数据不存在");
            a && "snapshot" === a.type ? this.app.room.cacheOrExecAckPkg({
              pkgId: n,
              snapshot: a.value
            }, i) : a && "snapshotArr" === a.type && a.value.forEach((function (
              e) {
              t.app.room.cacheOrExecAckPkg({
                pkgId: n,
                snapshot: e
              }, i)
            }))
          }
        }, {
          key: "sendSnapshot",
          value: function (e, t) {
            return this.broadcastData({
              data: {
                type: "snapshot",
                value: e
              }
            }, e.opId, "snapshot", t)
          }
        }, {
          key: "broadcastRoomState",
          value: function (e, t) {
            return this.broadcastData({
              data: {
                type: t,
                value: e
              }
            }, t, t, !0)
          }
        }, {
          key: "broadcastData",
          value: function (e, t, n, r) {
            if (!this.debounceData.hasOwnProperty(t) || !this.debounceData[t]
              .timer) {
              var a = this.nextLocalFakeId,
                i = this.getNextClientPkgId();
              this.debounceData[t] = {
                timer: null,
                time: (new Date).valueOf(),
                client_pkg_id: i,
                dataQueue: [],
                dataType: n,
                fakePkgId: a
              }, this.noAckData[i] = {
                data: void 0,
                fakePkgId: a
              }
            }
            var A = this.debounceData[t];
            return A.dataQueue.push(e.data), r ? this._doBroadcastData(A, t) : A
              .timer || (A.timer = this._scheduleNextBroadcast(A, t)), A.fakePkgId
          }
        }, {
          key: "getNextClientPkgId",
          value: function () {
            return this.incId += 1, Number(this.randomSeed.toString() + this.incId
              .toString())
          }
        }, {
          key: "_shouldDataBeResendIfLost",
          value: function (e) {
            if ("snapshot" === e.type) {
              var t = e.value && e.value.data && e.value.data.type,
                n = e.value && e.value.data && e.value.data.inProgress;
              return (!t || -1 === ["select", "select-hover", "camera-bound",
                "laser", "mouse-pointer"
              ].indexOf(t)) && ("pen" === t || !n)
            }
            return !0
          }
        }, {
          key: "_pushDataToResendQueue",
          value: function (e) {
            this.dataInResendQueue[e.client_pkg_id] = {
              data: e,
              sendAt: Date.now(),
              resendCount: 0
            }, this.resendTimer || (clearTimeout(this.resendTimer), this
              .resendTimer = setTimeout(this._checkResendQueue, 2e3))
          }
        }, {
          key: "_updateAppAfterSync",
          value: function () {
            var e = this;
            if (-2 !== this.lastPkgIdToSync) {
              this.lastContinueServerPkgId >= this.lastPkgIdToSync &&
                clearTimeout(this.resendSyncRequestTimer);
              try {
                if (this.lastContinueServerPkgId >= this.lastPkgIdToSync && this
                  .isSynchronizing) {
                  console.log("[wb]同步数据接收完毕: " + this.lastContinueServerPkgId +
                      "--" + this.lastPkgIdToSync), this.isSynchronizing = !1,
                    this.app.emit("event:editable:change", this.app.editable);
                  var t = this._getDataToSync();
                  this.dataOfSync = {};
                  for (var n = void 0, a = [], i = t.length - 1; i >= 0; i--)
                    if ("broadcaster" === t[i].data.type) {
                      n = t[i].data.value;
                      break
                    } for (var A = 0; A < t.length; A++) "broadcaster" === t[A]
                    .data.type ? n = t[A].data.value : "alive" === t[A].data
                    .type && a.push(t[A].data.value);
                  var o = [],
                    s = !0,
                    u = !1,
                    l = void 0;
                  try {
                    for (var c, d = (0, r.default)(t); !(s = (c = d.next())
                      .done); s = !0) {
                      var h = c.value;
                      if (this.dataInResendQueue.hasOwnProperty(h
                        .client_pkg_id) && delete this.dataInResendQueue[h
                          .client_pkg_id], !this.hasPkgBeenApplied(h
                          .client_pkg_id, h.source_uid))
                        if (this.setPkgBeenApplied(h.client_pkg_id, h.source_uid,
                            h.pkgId), "snapshot" === h.data.type) o.push({
                          pkgId: h.pkgId,
                          snapshot: h.data.value
                        });
                        else if ("snapshotArr" === h.data.type) {
                        var p = !0,
                          f = !1,
                          g = void 0;
                        try {
                          for (var y, v = (0, r.default)(h.data.value); !(p = (y =
                              v.next()).done); p = !0) {
                            var m = y.value;
                            o.push({
                              pkgId: h.pkgId,
                              snapshot: m
                            })
                          }
                        } catch (e) {
                          f = !0, g = e
                        } finally {
                          try {
                            !p && v.return && v.return()
                          } finally {
                            if (f) throw g
                          }
                        }
                      }
                    }
                  } catch (e) {
                    u = !0, l = e
                  } finally {
                    try {
                      !s && d.return && d.return()
                    } finally {
                      if (u) throw l
                    }
                  }
                  this.app.aliveManager.receiveSyncData(a), n && this.app.vision
                    .receiveBroadcasterAfterSync(n), setTimeout((function () {
                      e.app.dispatcher.emit("event:sync_finished")
                    }), 0), this.app.room.execBatchSnapshots(o, "sync", (
                      function () {
                        if (e.isFirstSync) {
                          e.isFirstSync = !1;
                          var t = e.app.vision.mode;
                          if ("follower" === t || "broadcaster" === t) return;
                          e._setCameraAftRdy()
                        } else e.app.room.executeDelayedSnaps()
                      }))
                }
              } catch (e) {
                console.error("错误: ", e)
              }
            }
          }
        }, {
          key: "_getDataToSync",
          value: function () {
            var e = this;
            return (0, A.default)(this.dataOfSync).sort((function (e, t) {
              return Number(e) - Number(t)
            })).map((function (t) {
              try {
                var n = e.dataOfSync[t].data;
                return {
                  data: n = "object" === (void 0 === n ? "undefined" : (0, a
                    .default)(n)) ? n : JSON.parse(n),
                  client_pkg_id: e.dataOfSync[t].client_pkg_id,
                  source_uid: e.dataOfSync[t].source_uid,
                  pkgId: Number(t)
                }
              } catch (e) {
                return
              }
            })).filter((function (e) {
              return e
            }))
          }
        }, {
          key: "_updateServerPkgInfo",
          value: function (e, t) {
            for (var n = 0, r = e; n <= this.serverPkgSinceLast.length && !(r >
              t);)
              if (r <= this.lastContinueServerPkgId) r++;
              else if (n === this.serverPkgSinceLast.length) {
              for (var a, i = []; r <= t;) i.push(r), r += 1;
              (a = this.serverPkgSinceLast).splice.apply(a, [n, 0].concat(i))
            } else this.serverPkgSinceLast[n] < r ? n++ : this.serverPkgSinceLast[
              n] === r ? (r++, n++) : (this.serverPkgSinceLast.splice(n, 0, r),
              r++, n++);
            for (n = 0; n < this.serverPkgSinceLast.length && this
              .serverPkgSinceLast[n] === this.lastContinueServerPkgId + n + 1; n++
              );
            this.lastContinueServerPkgId += n, this.serverPkgSinceLast.splice(0,
              n)
          }
        }, {
          key: "room",
          get: function () {
            return this.app.room
          }
        }, {
          key: "logger",
          get: function () {
            return this.app.logger
          }
        }, {
          key: "lastServerPkgId",
          get: function () {
            return this.serverPkgSinceLast.length > 0 ? this.serverPkgSinceLast[
              this.serverPkgSinceLast.length - 1] : this.lastContinueServerPkgId
          }
        }, {
          key: "nextLocalFakeId",
          get: function () {
            var e = this,
              t = this.lastServerPkgId,
              n = (0, A.default)(this.noAckData).map((function (t) {
                return Number(e.noAckData[t].fakePkgId)
              })).sort((function (e, t) {
                return e - t
              }));
            return 0 === n.length || t >= n[n.length - 1] ? t + 1 : n[n.length -
              1] + 1
          }
        }]), e
      }();
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(0)),
      a = A(n(1)),
      i = A(n(219));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = void 0,
      s = function () {
        function e() {
          (0, r.default)(this, e)
        }
        return (0, a.default)(e, null, [{
          key: "createInstance",
          value: function () {
            return this._instance = this._instance || new i.default, this
              ._instance
          }
        }, {
          key: "show",
          value: function (e) {
            var t = this,
              n = e.time,
              r = void 0 === n ? 3 : n;
            this._instance || this.createInstance(), this._instance.show(e), o &&
              clearTimeout(o), r && (o = setTimeout((function () {
                t.hide()
              }), 1e3 * r))
          }
        }, {
          key: "hide",
          value: function () {
            o && clearTimeout(o), this._instance && this._instance.hide()
          }
        }, {
          key: "destory",
          value: function () {
            this._instance && (this._instance.destroy(), this._instance = null)
          }
        }]), e
      }();
    t.default = s, s._instance = null
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(108)),
      a = A(n(0)),
      i = A(n(1));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(220);
    var o = function () {
      function e() {
        (0, a.default)(this, e), this.toastDiv = document.createElement("div"), this
          .toastDiv.className = "whiteboard-toast", this.toastDiv.onclick = this.hide
          .bind(this), document.body.appendChild(this.toastDiv)
      }
      return (0, i.default)(e, [{
        key: "show",
        value: function (e) {
          var t = this.toastDiv;
          t.style.display = "block", "warn" === e.type ? (t.style.color =
              "#8a6d3b", t.style.backgroundColor = "#fcf8e3", t.style
              .borderColor = "#faebcc") : "info" === e.type ? (t.style.color =
              "#31708f", t.style.backgroundColor = "#d9edf7", t.style
              .borderColor = "#bce8f1") : "error" === e.type ? (t.style.color =
              "#a94442", t.style.backgroundColor = "#f2dede", t.style
              .borderColor = "#ebccd1") : (t.style.color = "#3c763d", t.style
              .backgroundColor = "#dff0d8", t.style.borderColor = "#d6e9c6"), (
              0, r.default)(e.top) && (t.style.top = e.top + "px"), t
            .innerHTML = e.msg
        }
      }, {
        key: "hide",
        value: function () {
          this.toastDiv && (this.toastDiv.style.display = "none")
        }
      }, {
        key: "destroy",
        value: function () {
          this.toastDiv && (document.body.removeChild(this.toastDiv), this
            .toastDiv = null)
        }
      }]), e
    }();
    t.default = o
  }, function (e, t, n) {
    var r = n(221);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".whiteboard-toast {\n    display: none;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%);\n    top: 200px;\n    padding: 8px 15px;\n    margin-bottom: 20px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    color: #3c763d;\n    background-color: #dff0d8;\n    border-color: #d6e9c6;\n    z-index: 100;\n}",
      ""
    ])
  }, function (e, t) {
    e.exports = function (e) {
      var t = "undefined" != typeof window && window.location;
      if (!t) throw new Error("fixUrls requires window.location");
      if (!e || "string" != typeof e) return e;
      var n = t.protocol + "//" + t.host,
        r = n + t.pathname.replace(/\/[^\/]*$/, "/");
      return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, (
        function (e, t) {
          var a, i = t.trim().replace(/^"(.*)"$/, (function (e, t) {
            return t
          })).replace(/^'(.*)'$/, (function (e, t) {
            return t
          }));
          return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? e : (
            a = 0 === i.indexOf("//") ? i : 0 === i.indexOf("/") ? n + i : r + i
            .replace(/^\.\//, ""), "url(" + JSON.stringify(a) + ")")
        }))
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.PenIntens = void 0;
    var r = u(n(16)),
      a = u(n(0)),
      i = u(n(1)),
      A = n(224),
      o = n(29),
      s = n(72);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.PenIntens = function () {
      function e(t) {
        var n = this,
          r = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
        (0, a.default)(this, e), this.lenErrLogged = !1, this.simuIntens = .1, this
          .pressure = 0, this.intens = [], this.rOPath = [], this.rPath = [], this
          .rDis = 0, this.disIdx = 0, this.lDis = 0, this.rIndex = 0, this.down =
          function (e) {
            if (n.enable) {
              n.simuIntens = .1, n.startTime = performance.now(), n.timeUpdate();
              var t = e.pointerType,
                r = e.pressure;
              "pen" === t && (n.pressure = r)
            }
          }, this.move = function (e) {
            if (n.enable) {
              var t = e.pointerType,
                r = e.pressure;
              "pen" === t && (n.pressure = r)
            }
          }, this.up = function (e) {
            if (n.enable) {
              var t = e.pointerType,
                r = e.pressure;
              "pen" === t && (n.pressure = r), null !== n.rafID && (
                cancelAnimationFrame(n.rafID), n.rafID = null)
            }
          }, this.rafID = null, this.startTime = performance.now(), this.lLen = 0, this
          .ltPoints = [], this.lsPoints = [], this.lMat = [
            [0, 0, 0],
            [0, 0, 0],
            [0, 0, 0]
          ], this._enable = r, this.app = t
      }
      return (0, i.default)(e, [{
        key: "timeUpdate",
        value: function () {
          var e = this,
            t = this.startTime;
          this.startTime = performance.now();
          var n = this.startTime - t;
          this.simuIntens = Math.min(1, Math.max(.1, n / 1e3 * this
            .intensReducer * 1.5 * (1.1 - Math.pow(this.simuIntens, 2)) +
            this.simuIntens)), this.rafID = requestAnimationFrame((
        function () {
            e.timeUpdate()
          }))
        }
      }, {
        key: "changeIntens",
        value: function (e) {
          if (this.enable) {
            var t = e.length;
            if (0 === t) return this.intens = [], this.rOPath = [], this
              .rPath = [], this.rDis = 0, this.disIdx = 0, this.lDis = 0,
              void(this.rIndex = 0);
            if (t > 1) {
              var n = A.Vector2.dis(new(Function.prototype.bind.apply(A.Vector2,
                [null].concat((0, r.default)(e[t - 2])))), new(Function
                .prototype.bind.apply(A.Vector2, [null].concat((0, r
                  .default)(e[t - 1])))));
              this.simuIntens = Math.min(1, Math.max(.1, this.simuIntens - n *
                this.scale / this.intensReducer * Math.pow(this.simuIntens,
                  2)))
            }
            this.intens.push(Number(this.intensity.toFixed(2)))
          }
        }
      }, {
        key: "trimIntensLength",
        value: function (e) {
          var t, n;
          if (this.enable) {
            var a = this.intens.length;
            if (0 !== a && e !== a) {
              if (a > e) this.intens.splice(e);
              else {
                var i, A = Array(e - a).fill(this.intens[a - 1]);
                (i = this.intens).push.apply(i, (0, r.default)(A))
              }
              if (!this.lenErrLogged) {
                this.lenErrLogged = !0;
                var o = "PenIntens.changeIntens: 'points.length: " + e +
                  "' and 'intens.length: " + a + "' are not equal.";
                null === (t = this.app) || void 0 === t || t.logger.error(o),
                  null === (n = this.app) || void 0 === n || n.dataReportUtil(
                    "v3_run_error", {
                      error: {
                        code: s.DataReportRunError.Pen_Intens_Len_Inconsistent,
                        message: o
                      }
                    })
              }
            }
          }
        }
      }, {
        key: "snapshotInfo",
        value: function (e, t) {
          return this.intens.length ? "number" == typeof e || "number" ==
            typeof t ? {
              intens: this.intens.slice(e, t)
            } : {
              intens: [].concat((0, r.default)(this.intens))
            } : {}
        }
      }, {
        key: "rAddPoint",
        value: function (e) {
          var t = this.rOPath;
          if (t.push(e), t.length > 2) {
            var n = [.5, .5],
              r = t.length - 2,
              a = t[r - 1],
              i = t[r],
              o = e,
              s = A.Vector2.normalize(A.Vector2.sub(i, a)),
              u = A.Vector2.normalize(A.Vector2.sub(o, i));
            if (s && u) {
              var l = A.Vector2.dot(s, u),
                c = A.Vector2.disPow2(a, i),
                d = !1;
              if (c < Math.pow(4, 2)) d = !0;
              else if (l >= 0) {
                d = c < Math.pow(8 + 8 * l, 2)
              }
              d && (t.splice(r, 1), o.intensity = o.intensity * n[0] + i
                .intensity * n[1])
            } else t.splice(r, 1), o.intensity = o.intensity * n[0] + i
              .intensity * n[1]
          }
          for (var h = this.rPath, p = t.length, f = Math.max(0, h.length -
            1); f < p; f++) {
            var g = t[f];
            h[f] = new A.Vector2(g.x, g.y, g.intensity)
          }
          if (t.length > 2) {
            var y = t[p - 3],
              v = t[p - 2],
              m = t[p - 1],
              w = A.Vector2.normalize(A.Vector2.sub(y, v)),
              B = A.Vector2.normalize(A.Vector2.sub(m, v));
            if (w && B) {
              var M = A.Vector2.dot(w, B);
              M = M >= 0 ? .1 * (1 - M) : .1 + .4 * Math.abs(M);
              var C = A.Vector2.lerp(v, A.Vector2.center(y, m), M);
              h[p - 2].value = C.value
            }
          }
        }
      }, {
        key: "refine",
        value: function (e, t) {
          for (var n = !1, a = this.rIndex; a < e.length; a++) this.rAddPoint(
              new(Function.prototype.bind.apply(A.Vector2, [null].concat((0, r
                .default)(e[a]), [(null != t ? t : [])[a]])))), this.rIndex +=
            1, n = !0;
          if (n) {
            var i = this.rOPath;
            this.disIdx = this.disIdx ? this.disIdx - 1 : 0, this.rDis -= this
              .lDis;
            for (var o = this.disIdx; o < i.length - 1; o++) {
              var s = i[o],
                u = i[o + 1];
              this.lDis = A.Vector2.dis(s, u), this.rDis += this.lDis, this
                .disIdx += 1
            }
          }
          return [].concat((0, r.default)(this.rPath))
        }
      }, {
        key: "smooth",
        value: function (e, t) {
          var n = this,
            a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            4,
            i = function () {
              if (n.lMat && t) {
                for (var e = 0; e < t.length; e++)
                  for (var r = n.lMat[e], a = t[e], i = 0; i < 3; i++)
                    if (r[i].toFixed(6) !== a[i].toFixed(6)) return !1;
                return !0
              }
              return n.lMat === t
            },
            s = this.ltPoints[this.ltPoints.length - 1],
            u = e[e.length - 1],
            l = this.lLen !== e.length,
            c = !(!s || !u) && (s.x.toFixed(2) !== u.x.toFixed(2) || s.y
              .toFixed(2) !== u.y.toFixed(2)),
            d = !i();
          if (!l && !c && !d) return [].concat((0, r.default)(this.lsPoints));
          var h = [];
          if (e.length > 1) {
            if (l || d) t && e.forEach((function (n, a) {
              e[a] = new(Function.prototype.bind.apply(A.Vector2, [null]
                .concat((0, r.default)((0, o.getTransPoint)(n.value,
                  t)), [n.intensity])))
            })), this.lMat = t, this.lLen = e.length, this.ltPoints = e;
            else {
              if (!c) return [].concat((0, r.default)(this.lsPoints));
              t && (this.ltPoints[this.ltPoints.length - 1] = new(Function
                .prototype.bind.apply(A.Vector2, [null].concat((0, r
                  .default)((0, o.getTransPoint)(u.value, t)), [u
                  .intensity
                ]))), e = this.ltPoints)
            }
            for (var p = 0; p < this.rDis; p += a) {
              var f = Math.min(p / this.rDis, 1),
                g = e.length,
                y = (g - 1) * f,
                v = Math.floor(y),
                m = y - v;
              0 === m && v === g - 1 && (v = g - 2, m = 1);
              var w = void 0,
                B = void 0;
              w = v > 0 ? e[(v - 1) % g] : A.Vector2.add(e[0], A.Vector2.sub(e[
                0], e[1]));
              var M = e[v % g],
                C = e[(v + 1) % g];
              B = v + 2 < g ? e[(v + 2) % g] : A.Vector2.add(e[g - 1], A.Vector2
                .sub(e[g - 1], e[g - 2]));
              var I = .25,
                x = Math.pow(A.Vector2.disPow2(w, M), I),
                b = Math.pow(A.Vector2.disPow2(M, C), I),
                k = Math.pow(A.Vector2.disPow2(C, B), I);
              b < 1e-4 && (b = 1), x < 1e-4 && (x = b), k < 1e-4 && (k = b);
              var T = .33 * (w.intensity + M.intensity + C.intensity),
                E = .33 * (M.intensity + C.intensity + B.intensity);
              h.push(new A.Vector2(A.CubicPoly.nonUniformCatmullRom(w.x, M.x, C
                .x, B.x, x, b, k, m), A.CubicPoly.nonUniformCatmullRom(w
                .y, M.y, C.y, B.y, x, b, k, m), T + (E - T) * m))
            }
          }
          return this.lsPoints = h, h
        }
      }, {
        key: "enable",
        get: function () {
          return this._enable
        },
        set: function (e) {
          this._enable !== e && (e || this.changeIntens([]), this._enable = e)
        }
      }, {
        key: "scale",
        get: function () {
          return this.app ? this.app.scale : 1
        }
      }, {
        key: "intensReducer",
        get: function () {
          return 32
        }
      }, {
        key: "intensity",
        get: function () {
          return this.pressure ? this.pressure : this.simuIntens
        }
      }]), e
    }()
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.CubicPoly = t.Vector2 = void 0;
    var r = A(n(16)),
      a = A(n(0)),
      i = A(n(1));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
      function e(t, n) {
        var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;
        (0, a.default)(this, e), this.value = [0, 0], this.value = [t, n], this.intens =
          r
      }
      return (0, i.default)(e, [{
        key: "x",
        get: function () {
          return this.value[0]
        },
        set: function (e) {
          this.value[0] = e
        }
      }, {
        key: "y",
        get: function () {
          return this.value[1]
        },
        set: function (e) {
          this.value[1] = e
        }
      }, {
        key: "intensity",
        get: function () {
          return this.intens
        },
        set: function (e) {
          this.intens = e
        }
      }, {
        key: "lengthPow2",
        get: function () {
          return Math.pow(this.x, 2) + Math.pow(this.y, 2)
        }
      }, {
        key: "length",
        get: function () {
          return Math.sqrt(this.lengthPow2)
        }
      }], [{
        key: "normalize",
        value: function (t) {
          if (0 === t.x && 0 === t.y) return null;
          var n = Math.sqrt(t.value[0] * t.value[0] + t.value[1] * t.value[1]);
          return new e(t.value[0] / n, t.value[1] / n)
        }
      }, {
        key: "add",
        value: function (t, n) {
          return new e(t.value[0] + n.value[0], t.value[1] + n.value[1])
        }
      }, {
        key: "sub",
        value: function (t, n) {
          return new e(t.value[0] - n.value[0], t.value[1] - n.value[1])
        }
      }, {
        key: "scale",
        value: function (t, n) {
          return new e(t.value[0] * n, t.value[1] * n)
        }
      }, {
        key: "scaleByAxis",
        value: function (t, n, r) {
          return new e(t.x * n, t.y * r)
        }
      }, {
        key: "disPow2",
        value: function (e, t) {
          var n = e.value,
            r = t.value,
            a = n[0] - r[0],
            i = n[1] - r[1];
          return a * a + i * i
        }
      }, {
        key: "dis",
        value: function (t, n) {
          return Math.sqrt(e.disPow2(t, n))
        }
      }, {
        key: "lerp",
        value: function (t, n, r) {
          if (!t || !n) return t || n;
          var a = t.value,
            i = n.value;
          return new e(a[0] + (i[0] - a[0]) * r, a[1] + (i[1] - a[1]) * r)
        }
      }, {
        key: "intersectPoint",
        value: function (t, n, r, a) {
          var i = t.value,
            A = n.value,
            o = r.value,
            s = a.value,
            u = o[0] - s[0],
            l = i[0] - A[0],
            c = o[1] - s[1],
            d = i[1] - A[1],
            h = l * c - d * u;
          if (0 == h) return null;
          var p = i[0] * A[1] - i[1] * A[0],
            f = o[0] * s[1] - o[1] * s[0];
          return new e((p * u - l * f) / h, (p * c - d * f) / h)
        }
      }, {
        key: "center",
        value: function () {
          for (var t = arguments.length, n = Array(t), a = 0; a < t; a++) n[a] =
            arguments[a];
          var i = n.length;
          if (!i) return new e(0, 0);
          if (1 === i) return new(Function.prototype.bind.apply(e, [null]
            .concat((0, r.default)(n[0].value))));
          if (2 === i) return new e((n[0].value[0] + n[1].value[0]) / 2, (n[0]
            .value[1] + n[1].value[1]) / 2);
          for (var A = 0, o = 0, s = 0, u = i - 1, l = 0; l < i; u = l, l++) {
            var c = n[u].value,
              d = n[l].value,
              h = c[0] * d[1] - d[0] * c[1];
            A += h, o += (d[0] + c[0]) * h, s += (d[1] + c[1]) * h
          }
          var p = 0,
            f = 0;
          return 0 != A && (p = o / (3 * A), f = s / (3 * A)), new e(p, f)
        }
      }, {
        key: "dot",
        value: function (e, t) {
          return e.x * t.x + e.y * t.y
        }
      }, {
        key: "cross",
        value: function (e, t) {
          return e.x * t.y - t.x * e.y
        }
      }, {
        key: "angle",
        value: function (t, n) {
          var r = e.normalize(t),
            a = e.normalize(n);
          return r && a ? Math.acos(Math.min(1, Math.max(-1, e.dot(r, a)))) : 0
        }
      }, {
        key: "fromToAngle",
        value: function (t, n) {
          return e.cross(t, n) < 0 ? -e.angle(t, n) : e.angle(t, n)
        }
      }]), e
    }();
    t.Vector2 = o;
    var s = t.CubicPoly = {
      init: function (e, t, n, r) {
        return [e, n, -3 * e + 3 * t - 2 * n - r, 2 * e - 2 * t + n + r]
      },
      calc: function (e, t) {
        var n = t * t,
          r = n * t;
        return e[0] + e[1] * t + e[2] * n + e[3] * r
      },
      catmullRom: function (e, t, n, r, a, i) {
        return s.calc(s.init(t, n, a * (n - e), a * (r - t)), i)
      },
      nonUniformCatmullRom: function (e, t, n, r, a, i, A, o) {
        var u = (t - e) / a - (n - e) / (a + i) + (n - t) / i,
          l = (n - t) / i - (r - t) / (i + A) + (r - n) / A;
        return u *= i, l *= i, s.calc(s.init(t, n, u, l), o)
      }
    }
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi41Mzg2IDIuNDYwMzRDMTMuMTUyNCAxLjg0NjU2IDE0LjE0NzUgMS44NDY1NSAxNC43NjEzIDIuNDYwMzRMMTcuNTM5NyA1LjIzODcxQzE4LjE1MzQgNS44NTI0OSAxOC4xNTM0IDYuODQ3NjIgMTcuNTM5NyA3LjQ2MTRMNy44MDEyMiAxNy4xOTk4QzcuNTQyMjIgMTcuNDU4OCA3LjIwMDkgMTcuNjE5MiA2LjgzNjIyIDE3LjY1MzRMMy4xODEyNyAxNy45OTUyQzIuNTA3MTMgMTguMDU4MiAxLjk0MTc2IDE3LjQ5MjkgMi4wMDQ4MSAxNi44MTg3TDIuMzQ2NjQgMTMuMTYzOEMyLjM4MDc1IDEyLjc5OTEgMi41NDExNSAxMi40NTc4IDIuODAwMTUgMTIuMTk4OEwxMi41Mzg2IDIuNDYwMzRaTTEzLjkyNzggMy4yOTM4NUMxMy43NzQzIDMuMTQwNCAxMy41MjU2IDMuMTQwNCAxMy4zNzIxIDMuMjkzODVMMy42MzM2NiAxMy4wMzIzQzMuNTY4OTEgMTMuMDk3IDMuNTI4ODEgMTMuMTgyNCAzLjUyMDI4IDEzLjI3MzVMMy4xODk0OSAxNi44MTA1TDYuNzI2NDYgMTYuNDc5N0M2LjgxNzYzIDE2LjQ3MTIgNi45MDI5NiAxNi40MzExIDYuOTY3NyAxNi4zNjYzTDE2LjcwNjIgNi42Mjc4OUMxNi44NTk2IDYuNDc0NDUgMTYuODU5NiA2LjIyNTY2IDE2LjcwNjIgNi4wNzIyMkwxMy45Mjc4IDMuMjkzODVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjYyMjQgOS41NDUxOEwxMC40NTQ4IDUuMzc3NjJMMTEuMjg4MyA0LjU0NDExTDE1LjQ1NTkgOC43MTE2N0wxNC42MjI0IDkuNTQ1MThaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K"
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(16)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(4)),
      u = d(n(74)),
      l = n(29),
      c = n(19);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "line", e.description =
          "绘制线段。\n首先使用op:line:activate设置画布为线段模式。通过op:line:lineWidth, op:line:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：",
          e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          return this.getTwoPointShapeCommonProperty({
            inProgress: e
          })
        }
      }, {
        key: "getBoundaryRect",
        value: function () {
          return this.getBoundaryRectOfLine()
        }
      }, {
        key: "draw",
        value: function (e, t) {
          var n = e.data,
            a = this.getStartEndPointFromSnapshot(n),
            i = a.sp,
            A = a.ep;
          t.beginPath(), t.moveTo.apply(t, (0, r.default)((0, c.padPt)((0, l
            .getTransPoint)(i, n.mat), this.app.scale))), t.lineTo.apply(t, (
            0, r.default)((0, c.padPt)((0, l.getTransPoint)(A, n.mat), this
            .app.scale))), this.strokeOrFill(t, {
            stroke: n.stroke || n.color,
            lineWidth: n.lineWidth,
            opacity: n.opacity,
            isShape: !1
          })
        }
      }, {
        key: "ifMouseOnOp",
        value: function (e, t, n) {
          var a = this.app.container.ctx,
            i = e.data,
            A = this.getStartEndPointFromSnapshot(i),
            o = A.sp,
            s = A.ep;
          return a.beginPath(), a.moveTo.apply(a, (0, r.default)((0, l
              .getTransPoint)(o, i.mat))), a.lineTo.apply(a, (0, r.default)((0,
              l.getTransPoint)(s, i.mat))), a.strokeStyle = "rgba(0,0,0,0)", a
            .lineWidth = i.lineWidth + 20, a.stroke(), a.isPointInStroke(t, n)
        }
      }, {
        key: "getStartEndPointFromSnapshot",
        value: function (e) {
          var t = void 0,
            n = void 0;
          return Array.isArray(e.points) ? (t = e.points[0], n = e.points[e
            .points.length - 1]) : (t = e.sp, n = e.ep), {
            sp: t,
            ep: n
          }
        }
      }, {
        key: "patchOp",
        value: function (e) {
          var t = Number(e.data.lineWidth),
            n = Math.abs(e.data.xFactor || 1),
            r = Math.abs(e.data.yFactor || 1);
          e.data.boundary = {
            sx: Math.min(e.data.sp[0], e.data.ep[0]) - t / 2 / n,
            sy: Math.min(e.data.sp[1], e.data.ep[1]) - t / 2 / r,
            w: Math.abs(e.data.sp[0] - e.data.ep[0]) + t / n,
            h: Math.abs(e.data.sp[1] - e.data.ep[1]) + t / r
          }
        }
      }]), t
    }(u.default);
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.drawInProgressSnapshots = t.drawLocalSnapshots = t.refresh = t
      .refreshOnStreamCanvas = t.cleanNonCanvasElements = t.LayerOrder = void 0;
    var r = s(n(7)),
      a = s(n(20)),
      i = n(105),
      A = n(19),
      o = n(95);

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.LayerOrder = {
      video: -1,
      audio: 2
    }, t.cleanNonCanvasElements = function (e) {
      var t, n, r = (0, a.default)(e.drawOpQueue);
      e.app.container && e.app.container.domEl && (e.app.container.domEl.innerHTML =
      "");
      for (var i = Array.prototype.slice.apply(e.app.container.el
          .getElementsByClassName("neteaseyunxin-wb-media-container")), A = 0; A < i
        .length; A++) {
        var o = i[A],
          s = o.id; - 1 === r.indexOf(s) && (null === (t = null == o ? void 0 : o
          .parentNode) || void 0 === t || t.removeChild(o))
      }
      for (var u = Array.prototype.slice.apply(e.app.container.el
          .getElementsByClassName("neteaseyunxin-wb-url-container")), l = 0; l < u
        .length; l++) {
        var c = u[l],
          d = c.id; - 1 === r.indexOf(d) && (null === (n = null == c ? void 0 : c
          .parentNode) || void 0 === n || n.removeChild(c))
      }
      e.app.opsManager.hooks.cleanNonCanvasEle.call(e)
    }, t.refreshOnStreamCanvas = function (e) {
      var t = e.app.container.streamCtx;
      if (t) {
        if (t.save(), (0, o.clearCtx)(t), t.fillStyle = e.app.appConfig.canvasBgColor, (
            0, o.fillCtx)(t), e.app.bgRenderContainer && e.app.bgRenderContainer({
            width: e.app.container.width,
            height: e.app.container.height,
            DPI: i.DPI,
            zoom: e.app.scale,
            ctx: t
          }), e.app.camera.convertPreviewCanvas(t), e.app.bgRenderWorld) {
          var n = e.app.camera.getContainerWorldRect();
          e.app.bgRenderWorld({
            width: e.app.container.width,
            height: e.app.container.height,
            DPI: i.DPI,
            rect: n,
            zoom: e.app.scale,
            ctx: t
          })
        }
        if (e.backgroundSnapshot) e.opsManager.preview(e.backgroundSnapshot, t, {
          page: e,
          supportToDataUrl: !0
        });
        else {
          var a = e.getBoard(),
            s = e.getAnimPageIndex();
          null !== s && a.previewDoc({
            ctx: t,
            animPageIndex: s,
            keepAnimState: !0,
            stream: !0
          })
        }
        var l = (0, A.getSortedDrawOpIds)(e.drawOpQueue),
          c = e.opsManager.opMap.url.currentUrlOpid;
        if (c)
          if (l = l.filter((function (e) {
              return e !== c
            })), e.drawOpQueue[c]) e.opsManager.opMap.url.preview(e.drawOpQueue[c], t, {
            page: e,
            supportToDataUrl: !0
          });
        var d = !0,
          h = !1,
          p = void 0;
        try {
          for (var f, g = (0, r.default)(l); !(d = (f = g.next()).done); d = !0) {
            var y = f.value;
            e.opsManager.preview(e.drawOpQueue[y], t, {
              page: e,
              supportToDataUrl: !0
            })
          }
        } catch (e) {
          h = !0, p = e
        } finally {
          try {
            !d && g.return && g.return()
          } finally {
            if (h) throw p
          }
        }
        for (var v in u(e, t, {
            preview: !1
          }), e.lastLaserOfUser) {
          var m = e.lastLaserOfUser[v];
          e.opsManager.preview(m, t, {
            page: e,
            supportToDataUrl: !0
          })
        }
        t.restore()
      }
    }, t.refresh = function (e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
        n = t.ctx,
        a = t.preview;
      n || (n = e.ctx);
      var s = a ? n : e.frontCtx,
        c = a ? n : e.bgCtx,
        d = !a || !t.supportToDataUrl && e.app.appConfig.previewCustomBg || t
        .supportToDataUrl && t.exportCustomBg;
      if (e.opsManager.hooks.refresh.call(), n.save(), a || (e.frontCtx.save(), e.bgCtx
          .save(), e.laserCtx.save()), (0, o.clearCtx)(n), (0, o.clearCtx)(c), a && t
        .supportToDataUrl && (c.fillStyle = e.app.appConfig.canvasBgColor, (0, o
          .fillCtx)(c)), e.app.bgRenderContainer && d) {
        var h = e.app.container.width,
          p = e.app.container.height;
        t.supportToDataUrl && t.boundary && (h = c.canvas.width, p = c.canvas.height), e
          .app.bgRenderContainer({
            width: h,
            height: p,
            DPI: i.DPI,
            zoom: e.app.scale,
            ctx: c
          })
      }
      if (a ? t.boundary ? e.app.camera.convertPreviewCanvas(n, t.boundary) : e.app
        .camera.convertPreviewCanvas(n) : (e.app.camera.convertCanvas(n), e.app.camera
          .convertCanvas(e.bgCtx)), e.app.bgRenderWorld && d) {
        var f = e.app.camera.getContainerWorldRect(),
          g = e.app.scale,
          y = t.supportToDataUrl && t.boundary ? t.boundary : f;
        g *= t.supportToDataUrl && t.boundary ? f.width / t.boundary.width : 1, e.app
          .bgRenderWorld({
            width: e.app.container.width,
            height: e.app.container.height,
            DPI: i.DPI,
            rect: y,
            zoom: g,
            ctx: c
          })
      }
      if (!a && e.getBoard() && e.getBoard().updateDocClipPath(), a || ((0, o.clearCtx)(
            s), (0, o.clearCtx)(e.laserCtx), e.app.camera.convertCanvas(s), e.app.camera
          .convertCanvas(e.laserCtx)), e.backgroundSnapshot && !a ? e.opsManager.draw(e
          .backgroundSnapshot, c, {
            page: e
          }) : e.backgroundSnapshot && e.opsManager.preview(e.backgroundSnapshot, n, {
          page: e,
          supportToDataUrl: t.supportToDataUrl
        }), a) {
        var v = e.getBoard(),
          m = e.getAnimPageIndex();
        null !== m && (n.save(), v.previewDoc({
          ctx: n,
          animPageIndex: m,
          keepAnimState: t.supportToDataUrl && !t.exportBoard,
          toDataUrl: t.supportToDataUrl,
          boundary: t.boundary
        }), n.restore())
      }
      var w = (0, A.getSortedDrawOpIds)(e.drawOpQueue);
      if (a) {
        var B = !0,
          M = !1,
          C = void 0;
        try {
          for (var I, x = (0, r.default)(w); !(B = (I = x.next()).done); B = !0) {
            var b = I.value;
            e.opsManager.preview(e.drawOpQueue[b], n, {
              page: e,
              supportToDataUrl: t.supportToDataUrl,
              boundary: t.boundary
            })
          }
        } catch (e) {
          M = !0, C = e
        } finally {
          try {
            !B && x.return && x.return()
          } finally {
            if (M) throw C
          }
        }
      } else {
        var k = !0,
          T = !1,
          E = void 0;
        try {
          for (var D, N = (0, r.default)(w); !(k = (D = N.next()).done); k = !0) {
            var P = D.value;
            e.opsManager.draw(e.drawOpQueue[P], n, {
              div: e.app.container.domEl,
              page: e
            })
          }
        } catch (e) {
          T = !0, E = e
        } finally {
          try {
            !k && N.return && N.return()
          } finally {
            if (T) throw E
          }
        }
        for (var Q in e.hiddenOpQueue) e.opsManager.hide(e.hiddenOpQueue[Q], n, e.app
          .container.domEl);
        for (var O in e.deletedOpQueue) e.opsManager.hide(e.deletedOpQueue[O], n, e.app
          .container.domEl)
      }
      if (a && t.omitSelection || u(e, s, {
          preview: a
        }), !a)
        for (var _ in l(e, e.laserCtx), e.lastLaserOfUser) {
          var S = e.lastLaserOfUser[_];
          e.opsManager.draw(S, e.laserCtx)
        }
      n.restore(), a || (e.frontCtx.restore(), e.bgCtx.restore(), e.laserCtx.restore())
    }, t.drawLocalSnapshots = function (e) {
      for (var t in e.localCtx.save(), (0, o.clearCtx)(e.localCtx), e.app.camera
          .convertCanvas(e.localCtx), e.localDrawQueue) e.opsManager.draw(e
        .localDrawQueue[t], e.localCtx, {
          page: e
        });
      e.localCtx.restore()
    }, t.drawInProgressSnapshots = function (e) {
      e.laserCtx.save(), e.frontCtx.save(), (0, o.clearCtx)(e.laserCtx), (0, o.clearCtx)
        (e.frontCtx), e.app.camera.convertCanvas(e.laserCtx), e.app.camera
        .convertCanvas(e.frontCtx), (0, a.default)(e.lastInProgressSnapshotOfUser).map((
          function (t) {
            return e.lastInProgressSnapshotOfUser[t]
          })).sort((function (e, t) {
          return e.beginAt - t.beginAt
        })).forEach((function (t) {
          var n = t.snapshot.opId,
            r = e.drawOpQueue[n];
          if (r) {
            var a = "laser" === r.data.type ? e.laserCtx : e.frontCtx;
            e.opsManager.draw(r, a, {
              div: e.app.container.domEl,
              page: e
            })
          } else {
            var i = "laser" === t.snapshot.data.type ? e.laserCtx : e.frontCtx;
            e.opsManager.draw(t.snapshot, i, {
              div: e.app.container.domEl,
              page: e
            })
          }
        })), u(e, e.frontCtx, {
          preview: !1
        }), l(e, e.laserCtx), e.laserCtx.restore(), e.frontCtx.restore()
    };
    var u = function (e, t, n) {
        for (var r in e.lastSelectOfUser) n.preview ? e.opsManager.preview(e
          .lastSelectOfUser[r], t, {
            page: e
          }) : e.opsManager.draw(e.lastSelectOfUser[r], t);
        for (var a in e.lastInProgressSelectOfUser) n.preview ? e.opsManager.preview(e
          .lastInProgressSelectOfUser[a], t, {
            page: e
          }) : e.opsManager.draw(e.lastInProgressSelectOfUser[a], t)
      },
      l = function (e, t) {
        for (var n in e.lastMousePointerOfUser) {
          var r = e.lastMousePointerOfUser[n];
          e.opsManager.draw(r, t)
        }
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(16)),
      a = d(n(7)),
      i = d(n(5)),
      A = n(28),
      o = d(n(135)),
      s = n(39),
      u = d(n(140)),
      l = n(65),
      c = n(19);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = {
      graphInit: function (e) {
        var t = e.start,
          n = e.end,
          r = {
            x: t.x / 2 + n.x / 2,
            y: t.y / 2 + n.y / 2
          };
        return {
          start: t,
          end: n,
          connPs: [{
            x: r.x,
            y: r.y,
            type: A.IConnPointType.Split
          }]
        }
      },
      isUnderRect: function (e) {
        return o.default.isUnderRect(e)
      },
      isUnderPoint: function (e) {
        return o.default.isUnderPoint(e)
      },
      patchLink: function (e) {
        var t = e.data,
          n = e.page,
          r = e.op;
        t._points = [];
        var o = t.start,
          u = t.end,
          c = t.connPs,
          d = (0, s.getLinkEndPos)(r.app, o, e.op, n),
          h = (0, s.getLinkEndPos)(r.app, u, e.op, n);
        if (d && h) {
          t._points.push([d.x, d.y]);
          var p = !0,
            f = !1,
            g = void 0;
          try {
            for (var y, v = (0, a.default)(c); !(p = (y = v.next()).done); p = !0) {
              var m = y.value;
              m.type === A.IConnPointType.Anchor && t._points.push([m.x, m.y])
            }
          } catch (e) {
            f = !0, g = e
          } finally {
            try {
              !p && v.return && v.return()
            } finally {
              if (f) throw g
            }
          }
          t._points.push([h.x, h.y]);
          var w = (0, l.getArrowPts)({
              data: t,
              op: r,
              startPos: d,
              endPos: h
            }),
            B = (0, l.getLinkTextPos)({
              data: t,
              op: r
            });
          t.boundary = (0, s.getLinkBoundary)((0, i.default)((0, i.default)((0, i
            .default)({
            start: d,
            end: h,
            connPs: c
          }, t.start.aType === A.IArrowType.Arrow ? {
            startArrow: w.start
          } : {}), t.end.aType === A.IArrowType.Arrow ? {
            endArrow: w.end
          } : {}), {
            textBoundaries: B
          }))
        }
      },
      drawLink: function (e) {
        var t = e.data,
          n = e.ctx,
          r = e.op.app.scale,
          a = (t._points || []).map((function (e) {
            return (0, c.padPt)(e, r)
          }));
        if (n.beginPath(), a.length >= 2) {
          n.moveTo(a[0][0], a[0][1]);
          for (var i = 1; i < a.length; i++) n.lineTo(a[i][0], a[i][1])
        }
        n.stroke()
      },
      graphAftTypeM: function (e) {
        var t = e.data,
          n = e.type,
          r = e.op,
          a = (0, s.getLinkEndPos)(r.app, t.start, r),
          l = (0, s.getLinkEndPos)(r.app, t.end, r);
        if (a && l && n !== A.ILinkType.Line) {
          if (n === A.ILinkType.Curve) return u.default.tidyGraph({
            start: a,
            end: l,
            connPs: t.connPs,
            op: r
          });
          if (n === A.ILinkType.Segment) {
            var c = t.connPs.filter((function (e) {
                return e.type === A.IConnPointType.Anchor
              })),
              d = t.connPs.filter((function (e) {
                return e.type === A.IConnPointType.Split
              }));
            if ((0, s.isConnAllHV)(c, r.app.scale) && c) {
              var h = a.dir === A.DIRECTION.LEFT || a.dir === A.DIRECTION.RIGHT;
              d[0] = (0, i.default)((0, i.default)({}, d[0]), {
                x: h ? a.x / 2 + c[0].x / 2 : a.x,
                y: h ? a.y : a.y / 2 + c[0].y / 2
              });
              var p = d.length % 2 == 1 ? h : !h;
              return d[d.length - 1] = (0, i.default)((0, i.default)({}, d[d.length -
                1]), {
                x: p ? l.x / 2 + c[c.length - 1].x / 2 : l.x,
                y: p ? l.y : l.y / 2 + c[c.length - 1].y / 2
              }), o.default.tidyGraph({
                start: a,
                end: l,
                connPs: d,
                op: r,
                data: t
              })
            }
            return o.default.graphInit({
              start: a,
              end: l,
              op: r
            })
          }
        }
      },
      graphAftConnD: function (e) {
        var t = e.start,
          n = e.end,
          r = e.data,
          a = e.index,
          i = r.connPs;
        if (i[a].type === A.IConnPointType.Split) return {
          connPs: i,
          start: t,
          end: n
        };
        var o = i.slice(),
          s = i[a - 2] || t,
          u = i[a + 2] || n,
          l = {
            x: (s.x + u.x) / 2,
            y: (s.y + u.y) / 2,
            type: A.IConnPointType.Split
          };
        return o.splice(a - 1, 3, l), {
          connPs: o,
          start: t,
          end: n
        }
      },
      isConnValid: function (e) {
        return !0
      },
      graphAftConnM: function (e) {
        return (0, s.moveNonSegConnPoint)(e)
      },
      graphFromAnchors: function (e) {
        var t = e.start,
          n = e.end,
          a = e.anchors,
          i = e.op;
        if (0 === a.length) return h.graphInit(e);
        for (var o = [], s = [t].concat((0, r.default)(a), [n]), u = 1; u < s
          .length; u++) o.push({
          x: s[u].x / 2 + s[u - 1].x / 2,
          y: s[u].y / 2 + s[u - 1].y / 2,
          type: A.IConnPointType.Split
        }), u < s.length - 1 && o.push({
          x: s[u].x,
          y: s[u].y,
          type: A.IConnPointType.Anchor
        });
        return h.tidyGraph({
          start: t,
          end: n,
          op: i,
          connPs: o
        })
      },
      tidyGraph: function (e) {
        for (var t = e.start, n = e.end, r = e.connPs.filter((function (e) {
            return e.type === A.IConnPointType.Anchor
          })), a = [], o = 0; o < r.length; o++) {
          var s = r[o - 1] || t;
          a.push({
            x: s.x / 2 + r[o].x / 2,
            y: s.y / 2 + r[o].y / 2,
            type: A.IConnPointType.Split
          }), a.push(r[o]), o === r.length - 1 && a.push({
            x: n.x / 2 + r[o].x / 2,
            y: n.y / 2 + r[o].y / 2,
            type: A.IConnPointType.Split
          })
        }
        return 0 === a.length && a.push({
          x: t.x / 2 + n.x / 2,
          y: t.y / 2 + n.y / 2,
          type: A.IConnPointType.Split
        }), (0, i.default)((0, i.default)({}, e), {
          connPs: a
        })
      },
      graphAftEndM: function (e) {
        var t = e.sTo,
          n = e.eTo,
          r = e.connPs,
          a = e.op;
        if (r.filter((function (e) {
            return e.type === A.IConnPointType.Anchor
          })).length <= 0) return h.graphInit({
          start: t,
          end: n,
          op: a
        });
        var o = r.slice(),
          s = r.length > 1 ? r[1] : n,
          u = r.length > 1 ? r[r.length - 2] : t;
        return o[0] = (0, i.default)((0, i.default)({}, o[0]), {
          x: t.x / 2 + s.x / 2,
          y: t.y / 2 + s.y / 2
        }), o[o.length - 1] = (0, i.default)((0, i.default)({}, o[o.length - 1]), {
          x: u.x / 2 + n.x / 2,
          y: u.y / 2 + n.y / 2
        }), {
          start: t,
          end: n,
          connPs: o
        }
      },
      getLinkPosByPer: function (e) {
        return o.default.getLinkPosByPer(e)
      },
      getNearestLinkInfo: function (e) {
        return o.default.getNearestLinkInfo(e)
      },
      getEndAngle: function (e) {
        return o.default.getEndAngle(e)
      }
    };
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(2)),
      a = c(n(0)),
      i = c(n(1)),
      A = c(n(3)),
      o = c(n(4)),
      s = c(n(9)),
      u = n(19),
      l = c(n(22));

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.points = [], e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "postMouseUp",
        value: function (e) {}
      }, {
        key: "postClick",
        value: function (e) {}
      }, {
        key: "postMouseMove",
        value: function (e, t) {}
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          t = Number(t.toFixed(1)), n = Number(n.toFixed(1)), this.dispatch(this
            .getSelectionSnapshot(!1, [])), this.points = [
            [t, n]
          ];
          var r = (0, u.findOpsUnderMouse)(this.app, this.app.scale, this
            .points, this.drawOpsOfPage, this.opsManager);
          r = this.opsManager.groupOp.getOpIdsInGroups(r), this.dispatch(this
            .getSelectionSnapshot(!0, r))
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n) {
          t = Number(t.toFixed(1)), n = Number(n.toFixed(1)), this.isMouseDown ?
            this.points.push([t, n]) : this.points = [
              [t, n]
            ];
          var r = [];
          this.isMouseDown && (r = (0, u.findOpsUnderRect)(this.app, this
              .points, this.drawOpsOfPage, this.app.appConfig.selectMode), r =
            this.opsManager.groupOp.getOpIdsInGroups(r), this.dispatch(this
              .getSelectionSnapshot(!0, r))), this.postMouseMove(e, r)
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n) {
          if (this.isMouseDown && this.isMouseMoved) {
            t = Number(t.toFixed(1)), n = Number(n.toFixed(1));
            var r = (Math.abs(this.points[this.points.length - 1][0] - this
                .points[0][0]) + Math.abs(this.points[this.points.length - 1][
                1
              ] - this.points[0][1])) * this.app.scale,
              a = 0 === this.points.length || this.points.length < 5 && r < 5 ?
              (0, u.findOpsUnderMouse)(this.app, this.app.scale, this.points,
                this.drawOpsOfPage, this.opsManager) : (0, u.findOpsUnderRect)(
                this.app, this.points, this.drawOpsOfPage, this.app.appConfig
                .selectMode);
            a = this.opsManager.groupOp.getOpIdsInGroups(a), this.postMouseUp(a)
          } else this.handleClick(e, t, n)
        }
      }, {
        key: "handleClick",
        value: function (e, t, n) {
          t = Number(t.toFixed(2)), n = Number(n.toFixed(2)), this.points = [
            [t, n]
          ];
          var r = (0, u.findOpsUnderMouse)(this.app, this.app.scale, this
            .points, this.drawOpsOfPage, this.opsManager);
          if (1 === r.length)
            if (-1 !== this.opsManager.selectedOpIds.indexOf(r[0]));
            else if (1 === this.opsManager.selectedOpIds.length) {
            this.opsManager.currPage.idToGroup.get(r[0]) !== this.opsManager
              .currPage.idToGroup.get(this.opsManager.selectedOpIds[0]) && (r =
                this.opsManager.groupOp.getOpIdsInGroups(r))
          } else r = this.opsManager.groupOp.getOpIdsInGroups(r);
          this.postClick(r)
        }
      }, {
        key: "getSelectionSnapshot",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[
              0],
            t = arguments[1],
            n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
            r = this.opsManager.opMap.url;
          return t = t.filter((function (e) {
            return e !== r.currentUrlOpid
          })), {
            type: "select",
            sp: this.sp,
            ep: this.ep,
            inProgress: e,
            selectedOpIds: t.slice(),
            reuseOpType: n ? "select-hover" : "select",
            skipUndo: !0,
            color: l.default.penDef.stroke,
            nickname: this.app.nickname
          }
        }
      }, {
        key: "sp",
        get: function () {
          return this.points.length > 0 ? this.points[0] : void 0
        }
      }, {
        key: "ep",
        get: function () {
          return this.points.length > 0 ? this.points[this.points.length - 1] :
            void 0
        }
      }]), t
    }(s.default);
    t.default = d
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.getTransIconPos = t.ROTATE_DIST = t.ROTATE_TEST_RADIUS = void 0;
    var r = y(n(5)),
      a = y(n(2)),
      i = y(n(0)),
      A = y(n(1)),
      o = y(n(3)),
      s = y(n(4)),
      u = y(n(9)),
      l = n(46),
      c = y(n(60)),
      d = n(19),
      h = n(15),
      p = n(29),
      f = n(96),
      g = n(39);

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var v = t.ROTATE_TEST_RADIUS = 8,
      m = t.ROTATE_DIST = 30,
      w = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.type = "rotate", e.activate = !1, e.angle = 0, e.cx = 0, e.cy = 0, e
            .sx = 0, e.sy = 0, e.description = "旋转", e.activateOpId = "", e
            .snapsBeenRotate = {}, e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.mousemove.tap("MouseMovePlugin", this
                .handleMouseMove.bind(this)), this.opsManager.hooks.mousedown.tap(
                "MouseMovePlugin", this.handleMouseDown.bind(this)), this
              .opsManager.hooks.mouseup.tap("MouseMovePlugin", this.handleMouseUp
                .bind(this))
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              "rotate:ele": {
                value: this.rotateEle.bind(this),
                information: {
                  args: "id: string, angle: number",
                  message: ""
                }
              }
            }
          }
        }, {
          key: "shouldRotateTest",
          value: function (e, t) {
            var n = this.opsManager.selectedOpIds;
            if (1 !== n.length) return !1;
            var r = this.opsManager.drawOpsOfPage[n[0]];
            return -1 === l.nonRotateTypes.indexOf(r.data.type) && this
              .mousePosTest(e, t)
          }
        }, {
          key: "handleMouseDown",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof c.default && this
              .shouldRotateTest(t, n)) {
              if (document.body.style.cursor = "pointer", !this.activate) {
                this.beginBatch(), this.activate = !0, this.activateOpId = this
                  .opsManager.currPage.getNextOpId(!0), this.opId = this
                  .opsManager.selectedOpIds[0], this.snapsBeenRotate = (0, g
                    .deepCopySnapBeforeMove)([this.opId], this.drawOpsOfPage),
                  this.angle = 0;
                var r = this.opsManager.drawOpsOfPage[this.opId],
                  a = (0, h.getTransformedBoundary)(this.app.scale, r.data);
                this.cx = a.sx + a.w / 2, this.cy = a.sy + a.h / 2, this.sx = t,
                  this.sy = n
              }
              return !0
            }
            this.activate = !1
          }
        }, {
          key: "handleMouseMove",
          value: function (e, t, n, r, a) {
            var i, A;
            if (this.opsManager.currOp instanceof c.default) {
              if (this.activate) {
                if (this.lastAuxiliaryPos && Math.abs(r - this.lastAuxiliaryPos[
                    0]) < 5 && Math.abs(a - this.lastAuxiliaryPos[1]) < 5)
                return !0;
                if (this.angle = (0, d.getVecAngle)([this.sx, this.sy], [t, n], [
                    this.cx, this.cy
                  ]), this.opId) {
                  var o = void 0,
                    s = (null === (A = null === (i = this.snapsBeenRotate[this
                        .opId]) || void 0 === i ? void 0 : i.data) || void 0 ===
                      A ? void 0 : A.rAngle) || 0,
                    u = s + this.angle;
                  Math.abs(u % (Math.PI / 2)) < .03 || Math.abs(Math.PI / 2 - u %
                    (Math.PI / 2)) < .03 ? (u = Math.round(u / (Math.PI / 2)) *
                    Math.PI / 2, this.angle = u - s, o = this.getSnapshot(!0,
                      this.opId, this.angle, this.cx, this.cy), this.opsManager
                    .auxiliaryOp.setRotateLine({
                      opsBeforeChange: this.snapsBeenRotate,
                      snap: o,
                      id: this.opId
                    }), this.lastAuxiliaryPos = [r, a]) : (this.opsManager
                    .auxiliaryOp.clean(), o = this.getSnapshot(!0, this.opId,
                      this.angle, this.cx, this.cy), this.lastAuxiliaryPos =
                    void 0), this.opsManager.graphOp.handleElePosChange(this
                    .snapsBeenRotate, o, this.activateOpId, this.activateOpId +
                    "_rotate")
                }
                return !0
              }
              if (this.shouldRotateTest(t, n)) return document.body.style.cursor =
                "pointer", !0;
              document.body.style.cursor = "default"
            }
          }
        }, {
          key: "handleMouseUp",
          value: function (e, t, n) {
            if (this.lastAuxiliaryPos = void 0, this.opsManager.auxiliaryOp
              .clean(), this.activate) return this.activate = !1, this.opId &&
              this.opsManager.graphOp.handleElePosChange(this.snapsBeenRotate,
                this.getSnapshot(!1, this.opId, this.angle, this.cx, this.cy),
                this.activateOpId, this.activateOpId + "_rotate"), !0
          }
        }, {
          key: "mousePosTest",
          value: function (e, t) {
            var n, r = this.opsManager.opMap.select;
            if (null === (n = r.selectInfo) || void 0 === n ? void 0 : n
              .rotateIcon) {
              var a = r.selectInfo.rotateIcon,
                i = a.x - e,
                A = a.y - t,
                o = v;
              return -1 !== f.TouchPlatformArray.indexOf(this.app.platform) && (
                o *= 2.2), Math.sqrt(i * i + A * A) * this.app.scale < o
            }
            return !1
          }
        }, {
          key: "rotateEle",
          value: function (e, t) {
            var n = this.opsManager.drawOpsOfPage[e];
            if (!n) return this.logger.error(
              "[ws] RotateOp.rotateEle: no visible element has id: " + e);
            var r = (0, h.getTransformedBoundary)(this.app.scale, n.data),
              a = r.sx + r.w / 2,
              i = r.sy + r.h / 2;
            this.dispatch({
              type: "rotate",
              inProgress: !1,
              rotate: {
                angle: t,
                x: a,
                y: i
              },
              dependOn: [e]
            })
          }
        }, {
          key: "getSnapshot",
          value: function (e, t, n, r, a) {
            return {
              type: "rotate",
              inProgress: e,
              rotate: {
                angle: n,
                x: r,
                y: a
              },
              dependOn: [t]
            }
          }
        }, {
          key: "transformOp",
          value: function (e, t) {
            if ("link" === e.data.type) return e;
            var n = ((e.data.rAngle || 0) + t.rotate.angle) / (2 * Math.PI);
            return n = (n -= Math.floor(n)) * Math.PI * 2, (0, r.default)({}, e, {
              data: (0, r.default)((0, r.default)({}, e.data), {
                mat: (0, p.rotateMat)(e.data.mat, t.rotate),
                rAngle: n
              })
            })
          }
        }]), t
      }(u.default);
    t.getTransIconPos = function (e, t, n) {
      var r = e.data.boundary,
        a = ("number" == typeof e.data.xFactor && e.data.xFactor) < 0 ? -1 : 1,
        i = ("number" == typeof e.data.yFactor && e.data.yFactor) < 0 ? -1 : 1,
        A = m / n / Math.abs(e.data.xFactor || 1),
        o = m / n / Math.abs(e.data.yFactor || 1),
        s = (0, p.getTransPoint)([r.sx - A, r.sy + r.h + o], e.data.mat),
        u = e.data.rAngle || 0;
      return (0, h.getPointAftPad)(s, t, u, 3, a, i)
    };
    t.default = w
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.updateEditor = t.removeEditor = t.setupTextEditor = void 0;
    var r, a = n(5),
      i = (r = a) && r.__esModule ? r : {
        default: r
      },
      A = n(137),
      o = n(97);
    var s = 1,
      u = (t.setupTextEditor = function (e, t, n, r) {
        var a = document.createElement("div"),
          i = document.createElement("div"),
          A = document.createElement("div");
        i.contentEditable = "true", i.dataset.editorId = "text-" + (s++).toString(), a
          .appendChild(i), a.appendChild(A);
        var l = 0;
        a.ontouchstart = function (e) {
          l = Date.now(), e.stopPropagation()
        }, a.onmousedown = function (e) {
          l = Date.now(), e.stopPropagation()
        }, a.onmousemove = function (e) {
          document.body.style.cursor = "auto", e.stopPropagation()
        };
        var c = !1;
        return i.oninput = function (e) {
            c = !0, (0, o.inputHandler)(e, r.onchange, t.maxTxtLen, !0)
          }, i.onblur = function (e) {
            if (Date.now() - l < 100) e.target.focus();
            else {
              var t = (0, o.htmlToText)(e.target);
              r.onblur("\n" === t ? "" : t, c), r.container.removeChild(a)
            }
          }, i.onfocus = function (e) {
            (0, o.setTextRange)(i, "end")
          }, i.onkeydown = function (e) {
            return (0, o.preventOverLen)(e, t.maxTxtLen)
          }, i.onpaste = function (e) {
            return (0, o.preventOverLen)(e, t.maxTxtLen)
          }, i.addEventListener("beforeinput", o.beforeInputHandler), i
          .addEventListener("compositionstart", o.beforeInputHandler), i
          .addEventListener("compositionend", (function (e) {
            (0, o.inputHandler)(e, r.onchange, t.maxTxtLen, !0)
          })), (null == t ? void 0 : t.text) && (i.innerText = t.text), u(n, {
            container: a,
            core: i,
            placeholder: A
          }, t), r.container.appendChild(a), i.focus(), {
            container: a,
            core: i,
            placeholder: A
          }
      }, t.removeEditor = function (e) {
        var t;
        e.core.onblur = null, null === (t = e.container.parentNode) || void 0 === t || t
          .removeChild(e.container)
      }, t.updateEditor = function (e, t, n, r) {
        var a = (null == n ? void 0 : n.fontSize) || 32,
          s = 1.25 * a,
          u = e.width + "px" || !1;
        (0, o.setEditorTxt)(t.core, (null == n ? void 0 : n.text) || ""), (0, i.default)
        (t.container.style, {
          position: "absolute",
          left: e.sx + "px",
          top: e.sy + "px",
          width: u,
          height: "fit-content",
          minHeight: s + "px",
          minWidth: A.MIN_TXT_W + "px",
          transform: "rotate(" + 180 * e.angle / Math.PI + "deg)",
          transformOrigin: "0 0",
          padding: "0 2px",
          overflow: "hidden",
          textAlign: (null == n ? void 0 : n.textAlign) || "left",
          outline: "1px dashed black",
          pointerEvents: "auto"
        });
        var l = e.width ? "pre-wrap" : "pre";
        (0, i.default)(t.core.style, (0, i.default)({
          fontSize: a + "px",
          fontFamily: null == n ? void 0 : n.fontFamily,
          fontWeight: "normal",
          lineHeight: s + "px",
          display: "inline",
          outline: "none",
          "-webkit-font-smoothing": "antialiased",
          userSelect: "text",
          webkitUserSelect: "text",
          color: (null == n ? void 0 : n.stroke) || "rgb(0,0,0)",
          background: "transparent",
          whiteSpace: l
        }, (null == n ? void 0 : n.fill) ? {
          backgroundColor: null == n ? void 0 : n.fill
        } : {})), t.placeholder && (t.placeholder.innerText = (null == n ? void 0 : n
          .text) ? "" : r || "", (0, i.default)(t.placeholder.style, {
          fontSize: a + "px",
          fontFamily: null == n ? void 0 : n.fontFamily,
          fontWeight: "normal",
          lineHeight: s + "px",
          background: "transparent",
          outline: "none",
          userSelect: "text",
          webkitUserSelect: "text",
          whiteSpace: l,
          opacity: .3,
          display: !(null == n ? void 0 : n.text) && r ? "inline" : "none",
          wordBreak: "break-all"
        }))
      })
  }, function (e, t) {
    var n;
    n = function () {
      return this
    }();
    try {
      n = n || new Function("return this")()
    } catch (e) {
      "object" == typeof window && (n = window)
    }
    e.exports = n
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(2)),
      a = l(n(0)),
      i = l(n(1)),
      A = l(n(3)),
      o = l(n(4)),
      s = l(n(74)),
      u = n(29);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "rect", e.shouldSaniteEp = !0, e.description =
          "绘制矩形。\n首先使用op:rect:activate设置画布为矩形模式。通过op:rect:lineWidth, op:rect:stroke, op:rect:fill设置矩形的宽度和颜色。然后画布会监听鼠标动作，生成矩形。具体用法如下：",
          e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "getSnapshot",
        value: function (e) {
          return this.getTwoPointShapeCommonProperty({
            inProgress: e
          })
        }
      }, {
        key: "draw",
        value: function (e, t) {
          var n = e.data,
            r = (0, u.getTransPoint)(n.sp, n.mat),
            a = (0, u.getTransPoint)([n.ep[0], n.sp[1]], n.mat),
            i = (0, u.getTransPoint)(n.ep, n.mat),
            A = (0, u.getTransPoint)([n.sp[0], n.ep[1]], n.mat);
          t.beginPath(), t.moveTo(r[0], r[1]), t.lineTo(a[0], a[1]), t.lineTo(i[
            0], i[1]), t.lineTo(A[0], A[1]), t.closePath(), this.strokeOrFill(
            t, {
              stroke: n.stroke,
              fill: n.fill,
              lineWidth: n.lineWidth,
              opacity: n.opacity,
              isShape: !0
            })
        }
      }]), t
    }(s.default);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(2)),
      a = l(n(0)),
      i = l(n(1)),
      A = l(n(3)),
      o = l(n(4)),
      s = l(n(74)),
      u = n(29);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "ellipse", e.shouldSaniteEp = !0, e.description = "绘制椭圆形", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "getSnapshot",
        value: function (e) {
          return this.getTwoPointShapeCommonProperty({
            inProgress: e
          })
        }
      }, {
        key: "draw",
        value: function (e, t) {
          var n = e.data;
          this._draw(t, n), this.strokeOrFill(t, {
            stroke: n.stroke,
            fill: n.fill,
            lineWidth: n.lineWidth,
            opacity: n.opacity,
            isShape: !0
          })
        }
      }, {
        key: "_draw",
        value: function (e, t) {
          var n = [
              [.5, 0],
              [.7761424, 0],
              [1, .2238576],
              [1, .5]
            ],
            r = [
              [1, .7761424],
              [.7761424, 1],
              [.5, 1]
            ],
            a = [void 0, [.2238576, 1],
              [0, .7761424],
              [0, .5]
            ],
            i = [void 0, [0, .2238576],
              [.2238576, 0],
              [.5, 0]
            ],
            A = t.ep[0] - t.sp[0],
            o = t.ep[1] - t.sp[1],
            s = function (e) {
              if (e) {
                var n = [t.sp[0] + A * e[0], t.sp[1] + o * e[1]];
                return (0, u.getTransPoint)(n, t.mat)
              }
              return e
            },
            l = n.map(s).filter((function (e) {
              return e
            })),
            c = r.map(s).filter((function (e) {
              return e
            })),
            d = a.map(s).filter((function (e) {
              return e
            })),
            h = i.map(s).filter((function (e) {
              return e
            }));
          e.beginPath(), e.moveTo(l[0][0], l[0][1]), e.bezierCurveTo(l[1][0], l[
              1][1], l[2][0], l[2][1], l[3][0], l[3][1]), e.bezierCurveTo(c[0][
              0], c[0][1], c[1][0], c[1][1], c[2][0], c[2][1]), e.bezierCurveTo(
              d[0][0], d[0][1], d[1][0], d[1][1], d[2][0], d[2][1]), e
            .bezierCurveTo(h[0][0], h[0][1], h[1][0], h[1][1], h[2][0], h[2][
            1]), e.closePath()
        }
      }, {
        key: "ifMouseOnOp",
        value: function (e, t, n) {
          var r = this.app.container.ctx,
            a = e.data;
          return this._draw(r, a), r.fillStyle = "rgba(0,0,0,0)", r.fill(), r
            .isPointInPath(t, n)
        }
      }]), t
    }(s.default);
    t.default = c
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEuNDQyMjkiIHdpZHRoPSI4LjM4OTY3IiBoZWlnaHQ9IjE0LjY4MTkiIHJ4PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSAxMiAxLjQ0MjI5KSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuNTg0NSA4Ljg1Nzc5TDEwLjUxNjkgMTQuNzkwMiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxLjIiLz4KPHBhdGggZD0iTTQuMjI0NjQgMTcuNjgxOEgxNS43NjA0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.MediaFitStrategy = t.DEFAULT_FONTSIZE = void 0;
    var r = o(n(5)),
      a = o(n(20)),
      i = o(n(21)),
      A = o(n(0));

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var s = (0, n(53).deviceOS)(),
      u = (t.DEFAULT_FONTSIZE = 32, t.MediaFitStrategy = void 0);
    ! function (e) {
      e[e.None = 0] = "None", e[e.Contain = 1] = "Contain", e[e.FitPercentange = 2] =
        "FitPercentange"
    }(u || (t.MediaFitStrategy = u = {}));
    t.default = function e(t) {
      var n = this;
      (0, A.default)(this, e), this.setAppConfig = function (e) {
        var t, A, o, s, u, l;
        if (n.app.logger.log("[wb]setAppConfig", (0, i.default)(e)), 0 === (0, a
            .default)(e).length) n.app.logger.error("[wb]",
          "drawPlugin.setAppConfig: argument is empty");
        else
          for (var c in e) "canvasBgColor" === c ? (n.config.canvasBgColor = e
              .canvasBgColor, null === (t = n.app.container) || void 0 === t || t
              .setBackgroundColor(), null === (A = n.app.previewFactory) || void 0 ===
              A || A.setBackgroundColor()) : "canvas_bg_color" === c ? (n.config
              .canvasBgColor = e.canvas_bg_color, null === (o = n.app.container) ||
              void 0 === o || o.setBackgroundColor(), null === (s = n.app
                .previewFactory) || void 0 === s || s.setBackgroundColor()) :
            "previewMode" === c ? (n.config.previewMode = e.previewMode, null === (u =
              n.app.previewFactory) || void 0 === u || u.refreshPreviewsOfCurrBoard(
              !0)) : "defaultBoardName" === c ? null === (l = n.app.room) ||
            void 0 === l || l.updateDefaultBoardName(e.defaultBoardName) :
            "workerTimerInterval" === c ? (n.config.workerTimerInterval = e
              .workerTimerInterval, n.app.updateWorker()) : n.config.hasOwnProperty(
            c) ? n.config[c] = e[c] : n.app.logger.error("[wb]",
              "drawPlugin.setAppConfig: argument key: " + c +
              " is not valid, available keys includes: " + (0, a.default)(n.config));
        (0, r.default)(n.config, e), n.app.emit("event:appState:change", "config", n
          .config)
      }, this.getAppConfig = function () {
        return n.config
      }, this.app = t, this.config = (0, r.default)((0, r.default)((0, r.default)({
        canvasBgColor: "#f5f5f7",
        showCursorNickname: !1,
        showSelectNickname: !1,
        showLaserNickname: !1,
        cameraTransformEnabled: !0,
        allowReplaceActiveBroadcaster: !0,
        zoomSensitivity: .91,
        staticDocType: "template",
        previewMode: "fitDoc",
        previewCustomBg: !1,
        disableAutoResize: !0,
        drawMergeInterval: -1,
        drawMergeDist: 200,
        drawMergeDebug: !1,
        selectMode: "intersect",
        resRetryInterval: 5e3,
        resRetryCors: !1,
        presetId: -1,
        cacheUploadDocs: !0,
        uniqueDocName: !1
      }, {
        videoFitStrategy: s.isMobile ? {
          type: u.FitPercentange,
          value: 1
        } : {
          type: u.FitPercentange,
          value: .5
        }
      }), {
        audioFitStrategy: s.isMobile ? {
          type: u.FitPercentange,
          value: 1
        } : {
          type: u.FitPercentange,
          value: .5
        }
      }), {
        resMaxRetry: 2,
        nosAntiLeech: !1,
        nosAntiLeechExpire: 7200,
        isDocZoomLevel1: !0,
        cameraMaxZoom: 4,
        cameraMinZoom: .25,
        defaultBoardName: "whiteboard",
        penPrecision: 1,
        showImportProgress: !0,
        workerTimerInterval: 200,
        urlRefreshTimerInterval: 2e3,
        deleteBoardBehavior: "keepBoard"
      })
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(5)),
      a = A(n(0)),
      i = A(n(1));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
      function e(t) {
        var n = this,
          i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          A = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
            emitEvent: !0
          };
        (0, a.default)(this, e), this.isDragging = !1, this.lastPercent = 0, this
          .onMouseDown = function (e) {
            n.app.editable && (e.stopPropagation(), e.preventDefault(), n.isDragging = !
              0, n.lastPercent = -1, n.onMouseMove(e))
          }, this.onMouseMove = function (e) {
            if (n.app.editable && n.isDragging) {
              e.stopPropagation(), e.preventDefault();
              var t = n.getPercent(e);
              n.lastPercent = t, n.seekListener && n.seekListener(t, !0), n
                .updateProgress(t, !0)
            }
          }, this.onMouseUp = function (e) {
            if (n.app.editable) {
              if (n.isDragging) {
                e.stopPropagation(), e.preventDefault();
                var t = n.lastPercent;
                n.updateProgress(t, !0), n.seekListener && n.seekListener(t, !1)
              }
              n.isDragging = !1
            }
          }, this.getPercent = function (e) {
            var t = 0,
              r = n.widget.getBoundingClientRect().left;
            t = e.type.search(/mouse|click/) > -1 ? e.clientX - r : e.touches[0]
              .clientX - r;
            var a = n.widget.offsetWidth;
            return t < 0 && (t = 0), t > a && (t = a), t / a
          }, this.app = t;
        var o = document.createElement("div");
        (0, r.default)(o.style, {
          flex: "auto",
          height: "4px",
          position: "relative",
          pointerEvents: A.emitEvent ? "auto" : "none",
          cursor: A.emitEvent ? "pointer" : "auto"
        });
        var s = document.createElement("div"),
          u = document.createElement("div");
        o.appendChild(s), o.appendChild(u);
        var l = {
          height: "100%",
          position: "absolute",
          top: "50%",
          transform: "translateY(-50%)"
        };
        (0, r.default)(s.style, (0, r.default)({
          width: "100%",
          backgroundColor: "rgb(0,0,0)"
        }, l)), (0, r.default)(u.style, (0, r.default)({
          width: 100 * i + "%",
          backgroundColor: "rgb(255,255,255)"
        }, l)), this.widget = o, this.frontBar = u, A.emitEvent && this.bindEvents()
      }
      return (0, i.default)(e, [{
        key: "addSeekListener",
        value: function (e) {
          this.seekListener = e
        }
      }, {
        key: "bindEvents",
        value: function () {
          this.widget.addEventListener("mousedown", this.onMouseDown), this
            .widget.addEventListener("touchstart", this.onMouseDown), window
            .document.addEventListener("mousemove", this.onMouseMove), window
            .document.addEventListener("touchmove", this.onMouseMove), window
            .document.addEventListener("mouseup", this.onMouseUp, !0), window
            .document.addEventListener("touchend", this.onMouseUp, !0)
        }
      }, {
        key: "destroy",
        value: function () {
          this.widget.removeEventListener("mousedown", this.onMouseDown), this
            .widget.removeEventListener("touchstart", this.onMouseDown), window
            .document.removeEventListener("mousemove", this.onMouseMove), window
            .document.removeEventListener("touchmove", this.onMouseMove), window
            .document.removeEventListener("mouseup", this.onMouseUp, !0), window
            .document.removeEventListener("touchend", this.onMouseUp, !0), this
            .seekListener = void 0
        }
      }, {
        key: "updateProgress",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[
            1];
          this.isDragging && !t || (this.lastPercent = e, this.frontBar.style
            .width = 100 * e + "%")
        }
      }]), e
    }();
    t.default = o
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = w(n(5)),
      a = w(n(25)),
      i = w(n(2)),
      A = w(n(0)),
      o = w(n(1)),
      s = w(n(3)),
      u = w(n(4)),
      l = w(n(11)),
      c = w(n(333)),
      d = w(n(239)),
      h = w(n(334)),
      p = w(n(335)),
      f = w(n(336));
    n(337);
    var g = n(240),
      y = n(102),
      v = n(53),
      m = n(15);

    function w(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var B = function (e, t, n, r) {
        return new(n || (n = l.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      M = function (e) {
        return new l.default((function (t) {
          return setTimeout(t, e)
        }))
      },
      C = (0, v.isIosDevice)(),
      I = !1;
    document.addEventListener("click", (function () {
      I = !0
    }));
    var x = void 0,
      b = function (e) {
        function t(e, n, r) {
          (0, A.default)(this, t);
          var o = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e, n,
            r));
          return o.count = 0, o.lastTimeCalibrateCheck = null, o.isWaiting = !0, o
            .hasCalibrate = !1, o.shouldPlay = !1, o.destroyed = !1, o.pageVisible = !0, o
            .onPageInVisible = function () {
              o.pageVisible = !1, o.media && o.media.pause()
            }, o.onPageVisible = function () {
              o.pageVisible = !0, o.boardName === o.app.room.currIndex && o.pageName === o
                .app.room.currBoard.currIndex.toString() && o.setNativeInitState()
            }, o.onMediaPause = function () {
              o.data.play && setTimeout((function () {
                var e, t;
                if (o.media) {
                  var n = null === (e = o.media.parentNode) || void 0 === e ?
                    void 0 : e.parentNode,
                    r = o.boardName === o.app.room.currBoard.boardName && o
                    .pageName === o.app.room.currBoard.currPage.pageIndex,
                    a = o.media.duration - o.media.currentTime > 1,
                    i = null === (t = o.progressController) || void 0 === t ?
                    void 0 : t.isDragging;
                  o.data.play && !o.destroyed && n && r && a && !i && o
                    .pageVisible && (o.setNativePlayState(o.data.play), o
                      .setNativeCurrTime(o.data))
                }
              }), 100)
            }, o.onMediaWait = function () {
              o.isWaiting = !0
            }, o.onMediaCanPlay = function () {
              clearTimeout(o.canPlayTimer), o.canPlayTimer = setTimeout((function () {
                if (o.isWaiting && o.media) {
                  o.isWaiting = !1;
                  var e = o.getCurrTimeFromData(o.data),
                    t = Math.abs(e - o.media.currentTime);
                  (t > 1.5 || !o.hasCalibrate && t > .2) && (o.hasCalibrate = !0, o
                    .setNativeCurrTime(o.data))
                }
              }), 30)
            }, o.onDurationChange = function () {
              o.media && (o.duration = o.media.duration, o.updateTimeLabel(o.data.seek))
            }, o.onTimeUpdate = function () {
              var e;
              if (o.media) {
                var t = o.media.currentTime;
                if (o.duration && o.duration > 2 && o.duration - t < .23 && (t = o
                    .duration), o.updateTimeLabel(t), "number" == typeof o.duration && !
                  isNaN(o.duration)) {
                  var n = t <= .1 ? 0 : t;
                  null === (e = o.progressController) || void 0 === e || e.updateProgress(
                    n / o.duration)
                }
                var r = o.getNtpTime();
                if (null === o.lastTimeCalibrateCheck || r - o.lastTimeCalibrateCheck >
                  5e3) {
                  var a = o.getCurrTimeFromData(o.data);
                  Math.abs(a - o.media.currentTime) > 1.2 && o.setNativeCurrTime(o.data),
                    o.lastTimeCalibrateCheck = r
                }
              }
            }, o.onMediaEnd = function () {
              if (o.allowControl() && !o.isInReplay() && o.media && o.duration) {
                var e = o.media.currentTime - o.duration;
                o.count < 100 && (o.count++, console.warn("media end", "video time", o
                    .media.currentTime, "duration", o.duration)), Math.abs(e) < 1 && o
                  .putAttributes({
                    ended: !0,
                    seek: "number" == typeof o.duration ? o.duration : 0,
                    play: !1
                  })
              }
            }, o.onPlayClick = function (e) {
              o.app.editable && (e.stopPropagation(), e.preventDefault(), o.media && (o
                .data.ended ? o.onNativePlayChange(!0, 0) : o.data.play ? o
                .onNativePlayChange(!1, o.media.currentTime) : o.onNativePlayChange(!
                  0, o.data.seek || 0)))
            }, o.onDeleteClick = function (e) {
              e.stopPropagation(), e.preventDefault(), o.app.deleteElementByOpIds([o
                .opId])
            }, o.onFullClick = function () {
              try {
                var e = o.app.room.boards[o.boardName].pages[o.pageName].drawOpQueue[o
                    .opId],
                  t = (0, m.getTransformedBoundary)(o.app.scale, e.data);
                o.app.setCameraBound({
                  centerX: t.sx + t.w / 2,
                  centerY: t.sy + t.h / 2,
                  width: t.w,
                  height: t.h
                }, !0)
              } catch (e) {
                o.app.logger.error("[wb] video maximum error:", e)
              }
            }, o.onSelfMuteClick = function () {
              o.selfMute = !o.selfMute, x = o.selfMute, o.hideC2p(), o.updateSelfMute()
            }, o.onC2pClick = function () {
              o.hideC2p(), o.updateSelfMute()
            }, o.eventStopPropagation = function (e) {
              e.stopPropagation()
            }, o.setNativeInitState = function () {
              return B(o, void 0, void 0, a.default.mark((function e() {
                return a.default.wrap((function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      if (this.data.hasOwnProperty("play") && this
                        .setNativePlayState(this.data.play), !this.data
                        .hasOwnProperty("seek")) {
                        e.next = 6;
                        break
                      }
                      if (!C) {
                        e.next = 5;
                        break
                      }
                      return e.next = 5, M(300);
                    case 5:
                      this.setNativeCurrTime(this.data);
                    case 6:
                    case "end":
                      return e.stop()
                  }
                }), e, this)
              })))
            }, o.onNativePlayChange = function (e, t) {
              o.allowControl() && !o.isInReplay() && o.putAttributes({
                play: e,
                seek: t,
                seekTime: o.getNtpTime() / 1e3,
                ended: !1
              })
            }, o.onNativeSeek = function (e) {
              o.allowControl() && !o.isInReplay() && o.putAttributes({
                seek: e,
                seekTime: o.getNtpTime() / 1e3
              })
            }, o.setNativePlayState = function (e) {
              return B(o, void 0, void 0, a.default.mark((function t() {
                var n;
                return a.default.wrap((function (t) {
                  for (;;) switch (t.prev = t.next) {
                    case 0:
                      if (n = this.media, this.updatePlayIcon("boolean" ==
                          typeof e && e), this.shouldPlay = e || !1, !e ||
                        !n) {
                        t.next = 27;
                        break
                      }
                      return this.hideC2p(), t.prev = 5, t.next = 8, n
                        .play();
                    case 8:
                      t.next = 25;
                      break;
                    case 10:
                      if (t.prev = 10, t.t0 = t.catch(5), !t.t0 || "" + t
                        .t0.name != "NotAllowedError" && "" + t.t0.name !=
                        "AbortError") {
                        t.next = 25;
                        break
                      }
                      if (!this.shouldPlay) {
                        t.next = 25;
                        break
                      }
                      return this.selfMute = !0, x = !0, this
                        .updateSelfMute(!1), t.prev = 17, t.next = 20, n
                        .play();
                    case 20:
                      t.next = 25;
                      break;
                    case 22:
                      t.prev = 22, t.t1 = t.catch(17), this.showC2p();
                    case 25:
                      t.next = 30;
                      break;
                    case 27:
                      if (!n) {
                        t.next = 30;
                        break
                      }
                      return t.next = 30, n.pause();
                    case 30:
                    case "end":
                      return t.stop()
                  }
                }), t, this, [
                  [5, 10],
                  [17, 22]
                ])
              })))
            }, o.getTime = function (e) {
              var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = function (e) {
                  return e < 10 ? "0" + e : "" + e
                },
                r = (e = e > 1 ? Math.round(e) : 0) % 60,
                a = (e = ~~((e -= r) / 60)) % 60,
                i = ~~(e / 60);
              return 0 === i && !1 === t ? n(a) + ":" + n(r) : i + ":" + n(a) + ":" + n(r)
            }, o.selfMute = void 0 === x ? !C && !I : x, x = o.selfMute, o
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "getNtpTime",
          value: function () {
            return Date.now() + this.ntpTimeDiff
          }
        }, {
          key: "mountElement",
          value: function (e, t) {
            this.selfMute = x;
            var n = this.app.resourceCache.getMediaResource(t).cloneNode(!0);
            e.appendChild(this.createHeader()), e.appendChild(n), e.className =
              "neteaseyunxin-wb-media-container " + this.type, n.preload =
              "metadata", (0, r.default)(n.style, {
                webkitUserSelect: "none",
                userSelect: "none",
                width: "100%",
                height: "100%",
                pointerEvents: "none"
              }), n.controls = !1, n.playsInline = !0, n
              .disablePictureInPicture = !0, n.muted = this.selfMute, this
              .duration = n.duration, this.media = n, e.appendChild(this
                .createControllor()), this.mediaDiv = e, this.addMediaListener(),
              this.setNativeInitState(), "function" == typeof this
              .unregisterVisibleChangeListener && this
              .unregisterVisibleChangeListener(), this
              .unregisterVisibleChangeListener = (0, y
                .registerVisibleChangeHandler)(this.onPageVisible, this
                .onPageInVisible)
          }
        }, {
          key: "onPrePageChange",
          value: function (e) {
            this.media && e === this.app.account && this.data.play && this
              .putAttributes({
                play: !1,
                seek: this.media.currentTime,
                seekTime: this.getNtpTime() / 1e3,
                ended: !1
              })
          }
        }, {
          key: "onPlaySpeedChange",
          value: function (e) {
            this.media && (this.media.playbackRate = e)
          }
        }, {
          key: "onAttributeUpdated",
          value: function (e) {
            return B(this, void 0, void 0, a.default.mark((function t() {
              var n;
              return a.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (e.play === this.data.play && !this
                      .isInReplay()) {
                      t.next = 5;
                      break
                    }
                    return n = e.play, this.isInReplay() && (n =
                        n && "play" === this.replayMode()), t
                      .next = 5, this.setNativePlayState(n);
                  case 5:
                    (e.seek !== this.data.seek || e.seekTime !==
                      this.data.seekTime || this.app
                      .isRecordPlayer) && this.setNativeCurrTime(
                      e);
                  case 6:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "addMediaListener",
          value: function () {
            var e = this;
            this.media && (this.media.addEventListener("durationchange", this
                .onDurationChange), this.media.addEventListener("timeupdate",
                this.onTimeUpdate), this.media.addEventListener("ended", this
                .onMediaEnd), this.media.addEventListener("waiting", this
                .onMediaWait), this.media.addEventListener("canplay", this
                .onMediaCanPlay), this.media.addEventListener("pause", this
                .onMediaPause)), this.allowControl() && !this.isInReplay() && (
                this.playWidget && this.playWidget.addEventListener("click", this
                  .onPlayClick), this.progressController && this
                .progressController.addSeekListener((function (t, n) {
                  if ("number" == typeof e.duration && !isNaN(e.duration)) {
                    var r = t * e.duration;
                    n && e.media ? (e.media.pause(), e.media.currentTime =
                      r) : e.media && (e.setNativePlayState(e.data.play), e
                        .onNativeSeek(r))
                  }
                }))), this.deleteIcon && (this.deleteIcon.addEventListener(
                "click", this.onDeleteClick), this.deleteIcon.addEventListener(
                "click", this.eventStopPropagation)), this.playWidget && this
              .playWidget.addEventListener("click", this.eventStopPropagation),
              this.selfMuteIcon && (this.selfMuteIcon.addEventListener("click",
                this.onSelfMuteClick), this.selfMuteIcon.addEventListener(
                "click", this.eventStopPropagation)), this.fullIcon && (this
                .fullIcon.addEventListener("click", this.onFullClick), this
                .fullIcon.addEventListener("click", this.eventStopPropagation)),
              this.c2pWidget && (this.c2pWidget.addEventListener("click", this
                .onC2pClick), this.c2pWidget.addEventListener("click", this
                .eventStopPropagation))
          }
        }, {
          key: "onPluginWillDestroy",
          value: function () {
            this.destroyed = !0, this.media && (this.media.removeEventListener(
                  "durationchange", this.onDurationChange), this.media
                .removeEventListener("timeupdate", this.onTimeUpdate), this.media
                .removeEventListener("ended", this.onMediaEnd), this.media
                .removeEventListener("waiting", this.onMediaWait), this.media
                .removeEventListener("canplay", this.onMediaCanPlay), this.media
                .removeEventListener("pause", this.onMediaPause), this.media
                .pause()), "function" == typeof this
              .unregisterVisibleChangeListener && this
              .unregisterVisibleChangeListener(), this.allowControl() && !this
              .isInReplay() && (this.playWidget && this.playWidget
                .removeEventListener("click", this.onPlayClick), this
                .progressController && this.progressController.destroy()), this
              .deleteIcon && this.deleteIcon.removeEventListener("click", this
                .onDeleteClick), this.selfMuteIcon && this.selfMuteIcon
              .removeEventListener("click", this.onSelfMuteClick), this
              .fullIcon && this.fullIcon.removeEventListener("click", this
                .onFullClick), this.playWidget && this.playWidget
              .removeEventListener("click", this.eventStopPropagation), this
              .selfMuteIcon && this.selfMuteIcon.removeEventListener("click", this
                .eventStopPropagation), this.deleteIcon && this.deleteIcon
              .removeEventListener("click", this.eventStopPropagation)
          }
        }, {
          key: "getCurrTimeFromData",
          value: function (e) {
            var t = 0;
            if (this.app.isRecordPlayer)
              if (e.hasOwnProperty("seek") && e.play) {
                var n = this.replaySeekDiff();
                t = e.seek + n
              } else e.hasOwnProperty("seek") && (t = e.seek);
            else e.play && e.seekTime && e.hasOwnProperty("seek") ? t = e.seek +
              this.getNtpTime() / 1e3 - e.seekTime : e.hasOwnProperty("seek") && (
                t = e.seek);
            return "number" != typeof this.duration || isNaN(this.duration) || (
              t = this.duration > 2 ? Math.min(t, this.duration - .22) : Math
              .min(t, this.duration)), t
          }
        }, {
          key: "setNativeCurrTime",
          value: function (e) {
            var t = this.getCurrTimeFromData(e),
              n = this.media;
            n && (n.currentTime = t)
          }
        }, {
          key: "createHeader",
          value: function () {
            var e = document.createElement("div");
            e.className = "header";
            var t = document.createElement("div");
            t.className = "title", t.innerText = this.getTitle(), e.appendChild(
            t);
            var n = document.createElement("div");
            return n.className = "close icon", e.appendChild(n), this.deleteIcon =
              n, this.headerWidget = e, e
          }
        }, {
          key: "createControlContainer",
          value: function () {
            var e = document.createElement("div");
            return e.className = "control-container", e
          }
        }, {
          key: "createPlayWidget",
          value: function () {
            var e = document.createElement("div");
            return e.className = "play-icon", this.playWidget = e, (0, r.default)(
              e.style, {
                pointerEvents: this.allowControl() && !this.isInReplay() ?
                  "auto" : "none",
                cursor: this.allowControl() && !this.isInReplay() ? "pointer" :
                  "auto"
              }), e
          }
        }, {
          key: "createTimeIndicator",
          value: function () {
            var e = document.createElement("div"),
              t = document.createElement("span");
            return e.className = "time-container", t.className = "time-text", this
              .timeIndicator = t, this.timeWidget = e, e.appendChild(t), e
          }
        }, {
          key: "createVolumeWidget",
          value: function () {
            var e = document.createElement("div");
            (0, r.default)(e.style, {
              display: "inline-flex",
              height: "40px",
              color: "white",
              flexDirection: "row",
              alignItems: "center",
              verticalAlign: "top",
              marginRight: "16px"
            });
            var t = document.createElement("div");
            (0, g.appendTooltip)(t, "开关本端声音");
            var n = this.selfMute ? f.default : p.default;
            return (0, r.default)(t.style, {
              display: "inline-block",
              height: "20px",
              width: "20px",
              backgroundImage: "url(" + n + ")",
              backgroundSize: "contain",
              pointerEvents: "auto",
              cursor: "pointer",
              marginLeft: "10px"
            }), e.appendChild(t), this.selfMuteIcon = t, e
          }
        }, {
          key: "createC2pWidget",
          value: function () {
            return this.c2pWidget = document.createElement("div"), (0, r.default)(
              this.c2pWidget.style, {
                display: "none",
                height: "40px",
                lineHeight: "40px",
                marginLeft: "4px",
                verticalAlign: "top",
                marginRight: "16px",
                color: "skyblue",
                cursor: "pointer"
              }), this.c2pWidget.innerText = "点击同步", this.c2pWidget
          }
        }, {
          key: "showC2p",
          value: function () {
            this.c2pWidget && (this.c2pWidget.style.display = "inline-block")
          }
        }, {
          key: "hideC2p",
          value: function () {
            this.c2pWidget && (this.c2pWidget.style.display = "none")
          }
        }, {
          key: "updatePlayIcon",
          value: function (e) {
            if (this.playWidget) {
              var t = e ? h.default : d.default;
              this.playWidget.style.backgroundImage = "url(" + t + ")"
            }
          }
        }, {
          key: "updateTimeLabel",
          value: function (e) {
            var t = !1,
              n = "00:00";
            e || (e = 0), "number" != typeof this.duration || isNaN(this
              .duration) || (t = this.duration >= 3600, n = this.getTime(this
                .duration, t));
            var r = this.getTime(e, t) + " / " + n;
            this.timeIndicator && (this.timeIndicator.innerText = r)
          }
        }, {
          key: "updateSelfMute",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0],
              t = this.selfMute ? f.default : p.default;
            if (this.selfMuteIcon && (this.selfMuteIcon.style.backgroundImage =
                "url(" + t + ")"), this.media && (this.media.muted = this
                .selfMute), this.media && e) {
              var n = this.data.play;
              this.isInReplay() && (n = n && "play" === this.replayMode()), this
                .setNativePlayState(n), this.setNativeCurrTime(this.data)
            }
          }
        }, {
          key: "ntpTimeDiff",
          get: function () {
            return this.app.ntpTimeDiff
          }
        }]), t
      }(c.default);
    t.default = b
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iLTgwMCAtODAwIDI2MjQgMjYyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+"
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.appendTooltip = void 0;
    var r = i(n(0)),
      a = i(n(1));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(340);
    var A = function () {
      function e(t, n) {
        var a = this;
        (0, r.default)(this, e), this.onMouseOver = function () {
          a.widget.classList.add("visible")
        }, this.onTouchStart = function () {
          a.widget.classList.add("visible"), clearTimeout(a.hideTimer), a.hideTimer =
            setTimeout((function () {
              a.onMouseLeave()
            }), 1e3)
        }, this.onMouseLeave = function () {
          a.widget.classList.remove("visible")
        }, t.classList.add("neteaseyunxin-wb-tooltip");
        var i = document.createElement("span");
        i.className = "tooltiptext", i.innerText = n, t.appendChild(i), this.widget = t,
          this.bindEvents()
      }
      return (0, a.default)(e, [{
        key: "bindEvents",
        value: function () {
          this.widget.addEventListener("mouseover", this.onMouseOver), this
            .widget.addEventListener("mouseleave", this.onMouseLeave), this
            .widget.addEventListener("touchstart", this.onTouchStart), window
            .document.addEventListener("touchend", this.onMouseLeave)
        }
      }]), e
    }();
    t.appendTooltip = function (e, t) {
      return new A(e, t)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.regExitListener = function (e, t) {
      function n(t) {
        t.persisted && e()
      }
      return window.addEventListener("beforeunload", e, !1), window.addEventListener(
          "pagehide", n, !1), t.on("event:destroy", e),
        function () {
          window.removeEventListener("beforeunload", e, !1), window.removeEventListener(
            "pagehide", n, !1), t.off("event:destroy", e)
        }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(25)),
      a = u(n(0)),
      i = u(n(1)),
      A = u(n(11)),
      o = u(n(147)),
      s = n(249);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e, t, n, r) {
        return new(n || (n = A.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      c = function () {
        function e(t, n, r) {
          (0, a.default)(this, e), this.pages = {}, this.pageNames = [], this
            .newPageIndex = 1, this.hasDoc = !1, this.app = t, this.dispatch = t
            .dispatcher, this.boardName = n, this.displayName = r, this.pages = {
              0: new o.default(t, n, "0")
            }, this.pageNames = ["0"], this.currIndex = 0
        }
        return (0, i.default)(e, [{
          key: "getPageByIndex",
          value: function (e) {
            return this.pages[this.pageNames[e]]
          }
        }, {
          key: "getPageNameByAnimPageIndex",
          value: function (e) {
            for (var t = this.payloadOfPages, n = 0; n < t.length; n++) {
              var r = t[n];
              if (r && r.animPageIndex === e) return this.pageNames[n]
            }
            return null
          }
        }, {
          key: "getCurrPageIndex",
          value: function () {
            return this.pageNames.indexOf(this.currIndex.toString())
          }
        }, {
          key: "getPageSnapshots",
          value: function () {
            var e = this;
            return this.app.room.boardOps[this.boardName].pageSnapshotIds.map((
              function (t) {
                return e.app.room.opIdSnapshotMap[t]
              })).filter((function (e) {
              return "goto" !== e.snapshot.data.action
            }))
          }
        }, {
          key: "getPageBuiltInIndex",
          value: function (e) {
            return Number(this.pageNames[e])
          }
        }, {
          key: "addOpInBoard",
          value: function (e) {
            var t = e.data,
              n = t.action,
              r = t.page,
              a = t.insertAfter;
            "add" === n && (0, s.addPage)(this, a, e), "goto" === n && (0, s
              .gotoPage)(this, r, e), "delete" === n && (0, s.deletePage)(this,
              r, e), this.app.opsManager.hooks.opAdd.call(e)
          }
        }, {
          key: "addTransDocOp",
          value: function (e, t) {
            var n = this.app.opsManager.opMap.transDoc;
            this.transDocSnapshot ? this.transDocSnapshot.opId !== e.data
              .dependOn ? this.logger.warn("[wb]transDocOp添加的snapshot有问题", this
                .transDocSnapshot, e) : this.transDocSnapshot = n.transformOp(this
                .transDocSnapshot, e.data) : this.transDocSnapshot = e;
            try {
              if (this.transDocSnapshot.data.transDocData) {
                var r = Number(this.getPageNameByAnimPageIndex(this
                  .transDocSnapshot.data.transDocData.animPageIndex));
                null !== this.transDocSnapshot.data.transDocData.animPageIndex &&
                  r !== this.currIndex && (0, s.gotoPage)(this, r, e)
              }
              n.apply(this.transDocSnapshot, t)
            } catch (e) {
              this.logger.error("[wb]transDoc.apply", e)
            }
          }
        }, {
          key: "previewDoc",
          value: function (e) {
            try {
              if (this.transDocSnapshot) this.app.opsManager.opMap.transDoc
                .previewDoc(this.transDocSnapshot, e)
            } catch (e) {
              this.logger.error("[wb]previewDoc", e)
            }
          }
        }, {
          key: "updateDocClipPath",
          value: function () {
            this.transDocSnapshot && this.app.opsManager.opMap.transDoc
              .updateDocClipPath(this.transDocSnapshot)
          }
        }, {
          key: "waitTilReady",
          value: function () {
            return l(this, void 0, void 0, r.default.mark((function e() {
              var t;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    if (!this.transDocSnapshot) {
                      e.next = 4;
                      break
                    }
                    return t = this.app.opsManager.opMap.transDoc,
                      e.next = 4, t.waitTilReady(this
                        .transDocSnapshot);
                  case 4:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "logger",
          get: function () {
            return this.app.logger
          }
        }, {
          key: "currPage",
          get: function () {
            return this.pages[this.currIndex]
          }
        }, {
          key: "payloadOfPages",
          get: function () {
            var e = this;
            return this.pageNames.map((function (t) {
              return e.pages[t].payload
            }))
          }
        }]), e
      }();
    t.default = c
  }, function (e, t, n) {
    n(71), n(45), n(51), n(244), n(245), n(246), n(247), e.exports = n(8).Map
  }, function (e, t, n) {
    "use strict";
    var r = n(126),
      a = n(93);
    e.exports = n(127)("Map", (function (e) {
      return function () {
        return e(this, arguments.length > 0 ? arguments[0] : void 0)
      }
    }), {
      get: function (e) {
        var t = r.getEntry(a(this, "Map"), e);
        return t && t.v
      },
      set: function (e, t) {
        return r.def(a(this, "Map"), 0 === e ? 0 : e, t)
      }
    }, r, !0)
  }, function (e, t, n) {
    var r = n(10);
    r(r.P + r.R, "Map", {
      toJSON: n(128)("Map")
    })
  }, function (e, t, n) {
    n(129)("Map")
  }, function (e, t, n) {
    n(130)("Map")
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.getDrawOpFromSnapshotQueue = t.calcDrawOpQueue = t.processInProgressSnap =
      void 0;
    var r = o(n(16)),
      a = o(n(7)),
      i = n(46),
      A = n(95);

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.processInProgressSnap = function (e, t) {
      console.log("processInProgressSnap snapshot:", t);
      var n = [];
      if (t.data.dependOn) {
        var r = Array.isArray(t.data.dependOn) ? t.data.dependOn : [t.data.dependOn],
          i = !0,
          o = !1,
          s = void 0;
        try {
          for (var u, l = (0, a.default)(r); !(i = (u = l.next()).done); i = !0) {
            var d = u.value;
            if (e.opQueueMap.hasOwnProperty(d)) {
              for (var h = e.opQueueMap[d], p = h.length - 1; p >= 0; p--)
                if (h[p].opId === t.opId) {
                  h.splice(p, 1);
                  break
                } h.push(t), n.push(d)
            }
          }
        } catch (e) {
          o = !0, s = e
        } finally {
          try {
            !i && l.return && l.return()
          } finally {
            if (o) throw s
          }
        }
      } else e.opQueueMap[t.opId] = [t], n.push(t.opId);
      console.log("processInProgressSnap touchedOpIds:", n);
      var f = [],
        g = !0,
        y = !1,
        v = void 0;
      try {
        for (var m, w = (0, a.default)(n); !(g = (m = w.next()).done); g = !0) {
          var B = m.value;
          (k = c(e, B)).data.deleted ? e.deletedOpQueue[B] = k : k.data.hidden ? (e
            .hiddenOpQueue[B] = k, f.push(k)) : (e.drawOpQueue[B] = k, f.push(k),
            console.log("processInProgressSnap drawOpQueue:", e.drawOpQueue))
        }
      } catch (e) {
        y = !0, v = e
      } finally {
        try {
          !g && w.return && w.return()
        } finally {
          if (y) throw v
        }
      }
      var M = !0,
        C = !1,
        I = void 0;
      try {
        for (var x, b = (0, a.default)(f); !(M = (x = b.next()).done); M = !0) {
          var k = x.value;
          (0, A.patchOp)(e, k)
        }
      } catch (e) {
        C = !0, I = e
      } finally {
        try {
          !M && b.return && b.return()
        } finally {
          if (C) throw I
        }
      }
      console.log("processInProgressSnap over:")
    }, t.calcDrawOpQueue = function (e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
      e.drawOpQueue = {}, e.hiddenOpQueue = {}, e.deletedOpQueue = {};
      var n = d(e, e.opQueue),
        r = n.normalQueue,
        a = n.abNormalQueue,
        i = h(e, r),
        A = p(e, i),
        o = f(e, A);
      s(e, a), u(e, o), t || l(e)
    };
    var s = function (e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          "select" === r.data.type ? r.data.inProgress ? e.lastInProgressSelectOfUser[r
            .uid] = r : (delete e.lastInProgressSelectOfUser[r.uid], e.lastSelectOfUser[
            r.uid] = r) : "mouse-pointer" === r.data.type ? e.lastMousePointerOfUser[r
            .uid] = r : "laser" === r.data.type && (e.lastLaserOfUser[r.uid] = r)
        }
      },
      u = function (e, t) {
        e.opQueueMap = {};
        var n = [],
          i = {};
        e.opsManager.groupOp.reset(e);
        var o = !0,
          s = !1,
          u = void 0;
        try {
          for (var l, d = (0, a.default)(t); !(o = (l = d.next()).done); o = !0) {
            var h = l.value;
            if (e.lastInProgressSelectOfUser = {}, "group" !== h.data.type)
              if (Array.isArray(h.data.dependOn)) {
                var p = !0,
                  f = !1,
                  y = void 0;
                try {
                  for (var v, m = (0, a.default)(h.data.dependOn); !(p = (v = m.next())
                      .done); p = !0) {
                    var w = v.value;
                    e.opQueueMap.hasOwnProperty(w) ? (n.push(w), e.opQueueMap[w].push(
                      h)) : (i[w] = i[w] || [], i[w].push(h))
                  }
                } catch (e) {
                  f = !0, y = e
                } finally {
                  try {
                    !p && m.return && m.return()
                  } finally {
                    if (f) throw y
                  }
                }
              } else if ("string" == typeof h.data.dependOn) e.opQueueMap.hasOwnProperty(h
              .data.dependOn) ? (n.push(h.data.dependOn), e.opQueueMap[h.data.dependOn]
              .push(h)) : (i[h.data.dependOn] = i[h.data.dependOn] || [], i[h.data
              .dependOn].push(h));
            else {
              var B;
              if (e.opQueueMap[h.opId] = [h], i[h.opId])(B = e.opQueueMap[h.opId]).push
                .apply(B, (0, r.default)(i[h.opId])), i[h.opId] = []
            } else e.opsManager.groupOp.process(e, h)
          }
        } catch (e) {
          s = !0, u = e
        } finally {
          try {
            !o && d.return && d.return()
          } finally {
            if (s) throw u
          }
        }
        g(e, n);
        var M = [];
        for (var C in e.opQueueMap) {
          var I = c(e, C);
          I.data.deleted ? e.deletedOpQueue[C] = I : I.data.hidden ? (e.hiddenOpQueue[C] =
            I, M.push(I)) : (e.drawOpQueue[C] = I, M.push(I))
        }
        var x = !0,
          b = !1,
          k = void 0;
        try {
          for (var T, E = (0, a.default)(M); !(x = (T = E.next()).done); x = !0) {
            var D = T.value;
            (0, A.patchOp)(e, D)
          }
        } catch (e) {
          b = !0, k = e
        } finally {
          try {
            !x && E.return && E.return()
          } finally {
            if (b) throw k
          }
        }
      },
      l = function (e) {
        if (e.app.room.currBoard.currPage === e) {
          var t = (0, A.getSelectedOpIds)(e);
          e.opsManager.selectOp.setSelectedOpIds(t)
        }
      },
      c = t.getDrawOpFromSnapshotQueue = function (e, t) {
        for (var n = e.opQueueMap[t][0], r = 1; r < e.opQueueMap[t].length; r++) n = (0, A
          .transformOp)(e, n, e.opQueueMap[t][r]);
        return n
      },
      d = function (e, t) {
        var n = [],
          r = [],
          A = !0,
          o = !1,
          s = void 0;
        try {
          for (var u, l = (0, a.default)(t); !(A = (u = l.next()).done); A = !0) {
            var c = u.value; - 1 !== i.snapshotOutOfNormalFlowTypes.indexOf(c.data.type) ?
              r.push(c) : n.push(c)
          }
        } catch (e) {
          o = !0, s = e
        } finally {
          try {
            !A && l.return && l.return()
          } finally {
            if (o) throw s
          }
        }
        for (var d in e.localEditQueue) n.push(e.localEditQueue[d]);
        return {
          normalQueue: n,
          abNormalQueue: r
        }
      },
      h = function (e, t) {
        for (var n = t.slice(), i = n.length - 1; i >= 0; i--) {
          var A = n[i];
          if ("undo" === A.data.type || "redo" === A.data.type) {
            var o = [];
            A.data.redoOpId ? o.push(A.data.redoOpId) : A.data.undoOpId ? o.push(A.data
              .undoOpId) : Array.isArray(A.data.undoOpIds) && o.push.apply(o, (0, r
              .default)(A.data.undoOpIds)), n.splice(i, 1);
            var s = !0,
              u = !1,
              l = void 0;
            try {
              for (var c, d = (0, a.default)(o); !(s = (c = d.next()).done); s = !0)
                for (var h = c.value, p = i - 1; p >= 0; p--) n[p].opId === h && (n
                  .splice(p, 1), i--)
            } catch (e) {
              u = !0, l = e
            } finally {
              try {
                !s && d.return && d.return()
              } finally {
                if (u) throw l
              }
            }
          }
        }
        return n
      },
      p = function (e, t) {
        for (var n = t.slice(), r = n.length - 1; r >= 0; r--) {
          if ("clear" === n[r].data.type) return g(e, n.slice(0, r + 1).map((function (
          e) {
            return e.opId
          }))), n = n.slice(r + 1)
        }
        return n
      },
      f = function (e, t) {
        for (var n = [], r = 0; r < t.length; r++) {
          var a = t[r];
          "duplicate" === a.data.type ? n = n.concat(a.data.duplicates) : n.push(t[r])
        }
        return n
      },
      g = function (e, t) {
        for (var n in e.lastInProgressSnapshotOfUser) {
          var r = e.lastInProgressSnapshotOfUser[n]; - 1 !== t.indexOf(r.snapshot.opId) &&
            delete e.lastInProgressSnapshotOfUser[n]
        }
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.deletePage = t.gotoPage = t.addPage = void 0;
    var r = i(n(20)),
      a = i(n(147));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.addPage = function (e, t, n, r) {
      e.app.emit("event:prePageChange", n), e.pages[e.newPageIndex] = new a.default(e
          .app, e.boardName, e.newPageIndex.toString()), r ? e.pages[e.newPageIndex]
        .setPayload(r) : "pageOp" === n.category && e.pages[e.newPageIndex].setPayload(n
          .data.payload), t = void 0 === t ? e.pageNames.length - 1 : t, e.pageNames
        .splice(t + 1, 0, e.newPageIndex.toString()), e.app.room
        .isReceivingBatchSnapshots || (e.pages[e.newPageIndex].calcDrawOpQueue(), e.app
          .room.pageToRefresh = e.pages[e.newPageIndex]), e.currIndex = e.newPageIndex,
        e.newPageIndex += 1, e.pages[e.currIndex] && e.pages[e.currIndex]
        .cleanNonCanvasElements(), e.app.opsManager.hooks.pageChange.call(n), o(e.app)
    }, t.gotoPage = function (e, t, n) {
      if (!e.pages.hasOwnProperty(t)) return e.logger.error(
        "[wb] board/gotoPage: page: " + t + " is not found");
      e.app.emit("event:prePageChange", n), e.currIndex = Number(t), e.pages[e
          .currIndex] && e.pages[e.currIndex].cleanNonCanvasElements(), e.app.opsManager
        .hooks.pageChange.call(n), o(e.app), e.app.room.isReceivingBatchSnapshots || (e
          .pages[t].calcDrawOpQueue(), e.app.room.pageToRefresh = e.pages[t])
    }, t.deletePage = function (e, t, n) {
      if (e.pages.hasOwnProperty(t))
        if (1 === (0, r.default)(e.pages).length) e.logger.error("[wb]",
          "board/deletePage: it is not allowed to delete the last page");
        else {
          e.app.emit("event:prePageChange", n), e.app.emit("event:deletePage", e.pages[
            t]), delete e.pages[t];
          var a = e.pageNames.indexOf(t.toString()); - 1 !== a && e.pageNames.splice(a,
            1);
          var i = a;
          a === e.pageNames.length && (i = a - 1), e.currIndex = Number(e.pageNames[i]),
            e.pages[e.currIndex] && e.pages[e.currIndex].cleanNonCanvasElements(), e.app
            .opsManager.hooks.pageChange.call(n), o(e.app), e.app.room
            .isReceivingBatchSnapshots || (e.pages[e.currIndex].calcDrawOpQueue(), e.app
              .room.pageToRefresh = e.pages[e.currIndex])
        }
      else e.logger.error("[wb]", "board/deletePage: page: " + t + " is not found")
    };
    var A = void 0;

    function o(e) {
      clearTimeout(A), A = setTimeout((function () {
        var t = e.room.currBoard.currIndex;
        e.preparePreview([t - 2, t - 1, t, t + 1, t + 2])
      }), 0)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.getCameraBoundFromGlobalOp = function (e, t) {
      var n = e.app.camera,
        r = e.app.vision;
      if ("camera-bound" === t.data.type) {
        if (n.cameraBoundByUser[t.uid] = t.data.boundary, "freeObserver" === r.mode && t
          .uid === e.app.account) return t.data.boundary;
        if ("broadcaster" === r.mode && t.uid === e.app.account) return t.data.boundary;
        if ("follower" === r.mode && t.uid === r.broadcaster) return t.data.boundary;
        if ("follower" === r.mode && t.uid === e.app.account) return t.data.boundary
      }
      return null
    }, t.shouldCacheSnapshot = function (e) {
      return !!e.category && (!("boardOp" !== e.category || "add" !== e.data.action || !
        e.data.tmpl) || ("boardOp" === e.category && "addTransDoc" === e.data
        .action || !("video" !== e.data.type && "audio" !== e.data.type &&
          "image" !== e.data.type || e.data.skipUndo)))
    };
    var r = void 0;
    t.fitToContentAfterBoardChange = function (e) {
      clearTimeout(r), r = setTimeout((function () {
        e.app.hasBackground() || e.app.hasTransDoc() ? e.app.fitToContent(!1) : (e
          .app.fitToContent(!1), e.app.camera.scale >= 1 && e.app.zoomTo(1, !1))
      }), 0)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = o(n(21)),
      a = o(n(20)),
      i = o(n(5)),
      A = o(n(33));

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.default = {
      isUndefined: function (e) {
        return void 0 === e
      },
      isDOM: function (e) {
        return "object" === ("undefined" == typeof HTMLElement ? "undefined" : (0, A
            .default)(HTMLElement)) ? e instanceof HTMLElement : e && "object" === (
            void 0 === e ? "undefined" : (0, A.default)(e)) && 1 === e.nodeType &&
          "string" == typeof e.nodeName
      },
      isValidString: function (e) {
        return "[object String]" === Object.prototype.toString.call(e)
      },
      isBoolean: function (e) {
        return "boolean" == typeof e
      },
      isFunction: function (e) {
        return "function" == typeof e
      },
      isNumber: function (e) {
        return "number" == typeof e
      },
      isValidArray: function (e) {
        return "[object Array]" === Object.prototype.toString.call(e)
      },
      isValidHexColor: function (e) {
        return /^#[0-9abcdef]{6}$/gi.test(e)
      },
      isObject: function (e) {
        return "object" === (void 0 === e ? "undefined" : (0, A.default)(e))
      },
      isValidObject: function (e) {
        if ("object" !== (void 0 === e ? "undefined" : (0, A.default)(e))) return !1;
        if (e = (0, i.default)({}, e), a.default && 0 === (0, a.default)(e).length)
          return !1;
        try {
          return "{}" !== (0, r.default)(e)
        } catch (e) {
          return !1
        }
      },
      validate: function (e, t, n, i) {
        var A = this,
          o = [];
        return (0, a.default)(i).map((function (e) {
            var t = i[e],
              a = n[e];
            if (A.isUndefined(a)) t.isRequire && o.push({
              key: e,
              message: e + " is required"
            });
            else {
              switch (t.type.toLowerCase()) {
                case "dom":
                  A.isDOM(a) || o.push({
                    key: e,
                    message: "Expected dom, but get other type"
                  });
                  break;
                case "string":
                  A.isValidString(a) || o.push({
                    key: e,
                    message: "Expected string, but get other type"
                  });
                  break;
                case "boolean":
                  A.isBoolean(a) || o.push({
                    key: e,
                    message: "Expected boolean, but get other type"
                  });
                  break;
                case "function":
                  A.isFunction(a) || o.push({
                    key: e,
                    message: "Expected function, but get other type"
                  });
                  break;
                case "number":
                  A.isNumber(a) || o.push({
                    key: e,
                    message: "Expected number, but get other type"
                  });
                  break;
                case "object":
                  A.isObject(a) || o.push({
                    key: e,
                    message: "Expected object, but get other type"
                  });
                  break;
                case "array":
                  A.isValidArray(a) || o.push({
                    key: e,
                    message: "Expected array, but get other type"
                  });
                  break;
                default:
                  o.push({
                    key: e,
                    message: e + "的类型未知: " + t.type.toLowerCase()
                  })
              }
              t.enum && -1 === t.enum.indexOf(a) && o.push({
                key: e,
                message: "Expected " + e + " to be one of " + (0, r.default)(t
                  .enum) + ", but it is not"
              })
            }
          })), o.length > 0 && (e.error("[wb]", "argument key: " + t + " is invalid"),
            e.error("[wb]", "error message: ", o), e.error("[wb]", "argument is：", n)
            ), 0 === o.length
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.chooseImgAndUpload = t.uploadAndAddImg = void 0;
    var r = s(n(5)),
      a = n(31),
      i = s(n(32)),
      A = n(14),
      o = n(143);

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    window.addEventListener("load", (function () {
      h()
    }));
    var u = ["jpg", "jpeg", "png", "bmp", "webp"],
      l = t.uploadAndAddImg = function (e, t, n) {
        var s = n.pageName,
          u = n.boardName;
        return t.dataURL || t.fileInput ? t.dataURL && !t.fileName ? e.logger.error(
          "[wb]uploadAndAddImg fileName is required when dataURL is provided") : (e
          .logger.log("[wb]已选择image文件，现在开始上传文件"), (0, o.uploadMedia)(e, (0, r.default)((
            0, r.default)({}, t), {
            mediaType: "image",
            uploadprogress: function (e) {
              e && "string" == typeof e.percentageText && (0, a.showToast)({
                msg: "" + (0, A.getMsg)("uploadPer") + e.percentageText,
                time: 1e5,
                type: "info",
                msgType: i.default.FILE_IS_UPLOADING
              })
            },
            done: function (t, n) {
              if ((0, a.hideToast)(), t) {
                var o = (null == t ? void 0 : t.msg) || (null == t ? void 0 : t
                  .message) || (0, A.getMsg)("uploadFail");
                e.logger.error("[wb] image upload failed", t), (0, a.showToast)({
                  msg: o,
                  type: "error",
                  time: 3,
                  msgType: i.default.FILE_UPLOAD_FAIL
                })
              } else e.logger.log("[wb]上传image文件成功"), (0, a.showToast)({
                msg: (0, A.getMsg)("uploadSucc"),
                type: "success",
                time: 3,
                msgType: i.default.FILE_UPLOAD_FAIL
              }), e.addImage((0, r.default)({
                url: n.url,
                pageName: s,
                boardName: u
              }, e.appConfig.nosAntiLeech ? {
                antiLeechProp: {
                  bucket: n.bucket,
                  object: n.object
                }
              } : {}))
            }
          })), void(0, a.showToast)({
            msg: (0, A.getMsg)("uploading"),
            time: 1e5,
            type: "info",
            msgType: i.default.FILE_IS_UPLOADING
          })) : e.logger.error(
          "[wb]uploadAndAddImg please provide dataURL or fileInput")
      },
      c = (t.chooseImgAndUpload = function (e, t) {
        var n = d();
        n.accept = u.map((function (e) {
          return "." + e
        })).join(","), n.value = "", n.onchange = function (n) {
          return c(n, {
            app: e,
            pageName: t.pageName,
            boardName: t.boardName
          })
        }, n.click()
      }, function (e, t) {
        var n = t.app,
          r = t.pageName,
          o = t.boardName,
          s = e.target,
          c = e.target.files[0];
        if (n.logger.log("[wb] 选择文件: " + c.name), c && c.size && c.size > 10485760)
          return s.value = "", n.logger.error("[wb] image size cannot exceed 10M"), (0,
            a.showToast)({
            msg: "" + (0, A.getMsg)("sizeLimit") + Math.round(10) + "M",
            type: "error",
            msgType: i.default.FILE_SIZE_EXCEED_LIMIT
          });
        if (!c || 0 === c.size) return s.value = "", n.logger.error("[wb] file " + (
          null == c ? void 0 : c.name) + " is empty"), (0, a.showToast)({
          msg: (0, A.getMsg)("fileEmpty"),
          type: "error",
          msgType: i.default.FILE_IS_EMPTY
        });
        var d = c.name.split("."),
          h = d[d.length - 1],
          p = -1 !== u.indexOf(h.toLowerCase());
        if (p || (s && s.files && s.files.length > 0 && (h = s.files[0].type), p = -
            1 !== u.indexOf(h)), !p) return s.value = "", (0, a.showToast)({
          msg: (0, A.getMsg)("allowedTypes") + ": " + u.join(","),
          time: 3,
          type: "error",
          msgType: i.default.FILE_ACCEPTED_TYPE_LIMIT
        });
        l(n, {
          fileInput: s
        }, {
          pageName: r,
          boardName: o
        })
      }),
      d = function () {
        var e = document.getElementById("netease-wb-resource-input");
        return e || h()
      },
      h = function () {
        var e = document.getElementById("netease-wb-resource-input");
        return e || (e = document.createElement("input"), document.body.appendChild(e), e
          .id = "netease-wb-resource-input", e.style.position = "absolute", e.style
          .visibility = "hidden", e.type = "file", e.style.width = "0", e.style.height =
          "0", e.style.top = "-100px"), e
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.FloatComponent = void 0;
    var r = c(n(16)),
      a = c(n(5)),
      i = c(n(2)),
      A = c(n(0)),
      o = c(n(1)),
      s = c(n(3)),
      u = c(n(4)),
      l = c(n(6));

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.FloatComponent = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.pickedProps = {}, e.nativeProps = {}, e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "propsFilter",
        value: function () {
          var e = this,
            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] :
            [],
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            {};
          this.pickedProps = {}, this.nativeProps = (0, a.default)({}, this
            .props), n = (0, a.default)({
            unrendered: !1
          }, n), [].concat((0, r.default)(t), ["unrendered"]).forEach((
            function (t) {
              t in e.nativeProps ? (e.pickedProps[t] = e.nativeProps[t],
                delete e.nativeProps[t]) : e.pickedProps[t] = n[t]
            }))
        }
      }, {
        key: "render",
        value: function () {
          return this.propsFilter(), this.pickedProps.unrendered ? null : this
            .children
        }
      }, {
        key: "children",
        get: function () {
          return null
        }
      }]), t
    }(l.default.Component)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.SliderItem = void 0;
    var r = d(n(5)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(26)),
      u = d(n(4)),
      l = d(n(6)),
      c = n(40);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(402);
    t.SliderItem = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.changeHandler = function (t, n) {
          var r, a, i = e.pickedProps,
            A = i.onChange,
            o = i.toolName;
          null == A || A({
              type: "change",
              target: t.target,
              toolName: o,
              value: t.target.value
            }, n), null === (a = (r = e.nativeProps).onInput) || void 0 === a || a
            .call(r, t), e.forceUpdate()
        }, e
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange"], {
            icon: void 0,
            value: void 0
          })
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          return (0, s.default)(t.prototype.__proto__ || (0, a.default)(t
            .prototype), "defaultClassNames", this).concat("slider-item")
        }
      }, {
        key: "defaultStyle",
        get: function () {
          return (0, r.default)((0, r.default)({}, (0, s.default)(t.prototype
            .__proto__ || (0, a.default)(t.prototype), "defaultStyle",
            this)), {
            pointerEvents: "none"
          })
        }
      }, {
        key: "inputStyle",
        get: function () {
          return {
            pointerEvents: "all"
          }
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.value,
            a = t.disabled;
          return l.default.createElement("label", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), this.itemChildren, l.default.createElement(
            "input", (0, r.default)({
              type: "range",
              style: this.inputStyle,
              disabled: a
            }, this.nativeProps, {
              onInput: function (t) {
                return e.changeHandler(t, !0)
              },
              onChange: function (t) {
                return e.changeHandler(t, !1)
              }
            }, void 0 !== n ? {
              value: n
            } : {})))
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = function (e) {
        var t = parseInt(e, 16);
        return isNaN(t) ? 0 : t
      },
      a = t.getRGBvalues = function (e) {
        if ("string" == typeof e && e) {
          var t, n, a = e.slice(0, 1);
          return "#" === a ? 4 === (t = e).length ? (n = t.replace("#", "").split(""), {
            r: r(n[0] + n[0]),
            g: r(n[1] + n[1]),
            b: r(n[2] + n[2])
          }) : {
            r: r(t.slice(1, 3)),
            g: r(t.slice(3, 5)),
            b: r(t.slice(5))
          } : "r" === a.toLowerCase() ? function (e) {
            var t, n = e.slice(e.indexOf("(") + 1, e.indexOf(")")).split(","),
              r = !1;
            return t = {
              r: (n = n.map((function (e, t) {
                return 3 !== t ? parseInt(e, 10) : r = !0, parseFloat(e)
              })))[0],
              g: n[1],
              b: n[2]
            }, r && (t.a = n[3]), t
          }(e) : {
            r: 0,
            g: 0,
            b: 0
          }
        }
      };
    t.mixColorAndOpacity = function (e, t) {
      var n = a(e);
      return t = Number(t), t = isNaN(t) ? 1 : t, void 0 === n ? e : "rgba(" + n.r +
        "," + n.g + "," + n.b + "," + t + ")"
    }
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1MDg3NTcyMzAxOSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSItMjAwIC0yMDAgMTQyNCAxNDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMzY4NyIgd2lkdGg9IjMyIgogICAgaGVpZ2h0PSIzMiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogZmVlZGJhY2staWNvbmZvbnQ7CiAgICAgICAgICAgICAgICBzcmM6IHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUud29mZjI/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ3b2ZmMiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmY/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ3b2ZmIiksIHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUudHRmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgidHJ1ZXR5cGUiKTsKICAgICAgICAgICAgfQogICAgICAgIDwvc3R5bGU+CiAgICA8L2RlZnM+CiAgICA8cGF0aAogICAgICAgIGQ9Ik04MTguMzQ2NjY3IDM1Mi44NTMzMzNsLTIwMi44MzczMzQtMTg4LjE2IDU2LjQ5MDY2Ny02MC44ODUzMzMgMjAyLjgzNzMzMyAxODguMTZ6TTQzOC43NDEzMzMgNzYyLjE5NzMzM2wtMjAyLjkyMjY2Ni0xODguMjQ1MzMzIDM2MC44NzQ2NjYtMzg4Ljk0OTMzMyAyMDIuODggMTg4LjI0NTMzM3pNMjE3LjAwMjY2NyA1OTQuMjE4NjY3bDIwMi45MjI2NjYgMTg4LjI4OC0yNzAuODkwNjY2IDg4LjQ0OHoiCiAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iMzY4OCI+PC9wYXRoPgogICAgPHBhdGgKICAgICAgICBkPSJNNzQ3LjY0OCA5OC41NmwxMjYuODA1MzMzIDExNy42MzJjMjAuOTkyIDE5LjQ5ODY2NyAyMS4xNjI2NjcgNTMuNTA0IDAuNDI2NjY3IDc1Ljg2MTMzMy0yMC44MjEzMzMgMjIuNDQyNjY3LTU0LjY5ODY2NyAyNC43NDY2NjctNzUuNjkwNjY3IDUuMjkwNjY3TDY3Mi4zODQgMTc5LjYyNjY2N2MtMjEuMDM0NjY3LTE5LjQ5ODY2Ny0yMS4yMDUzMzMtNTMuNTA0LTAuNDI2NjY3LTc1Ljg2MTMzNCAyMC44MjEzMzMtMjIuNCA1NC42OTg2NjctMjQuNzQ2NjY3IDc1LjY5MDY2Ny01LjI5MDY2NnoiCiAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iMzY4OSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTAwMjU5MDkxNCIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTIyNDAiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgIDxwYXRoCiAgICAgICAgZD0iTTAgNDU3djExMGg3NTB2MTEwbDIyMC0xNjVsLTIyMC0xNjV2MTEweiIKICAgICAgICBmaWxsPSIiIHAtaWQ9IjEyMjQxIj48L3BhdGg+Cjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjExNzE5MjA5NTA5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iLTIwMCAtMjAwIDE0MjQgMTQyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMxNzQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjE2LjMyNyAyMjMuNzc0cTE1NC4xMTYgMCA2MTYuNDY1IDAgMjcuMDEwIDAgNDYuMDc2IDE5LjA2NiAxOS4wNjYgMTkuMDY2IDE5LjA2NiA0Ni4wNzYgMCAxNTUuNzA1IDAgNDY3LjExNSAwIDI3LjAxMC0xOS4wNjYgNDYuMDc2LTE5LjA2NiAxOS4wNjYtNDYuMDc2IDE5LjA2Ni0yMDUuNzUzIDAtNjE2LjQ2NSAwLTI2LjIxNiAwLTQ2LjA3Ni0xOS4wNjYtMTkuMDY2LTE5LjA2Ni0xOS4wNjYtNDYuMDc2IDAtNTQuODE1IDAtMTY0LjQ0NCAwLTE5LjA2NiAwLTQ3LjY2NSAwLTE0LjI5OSAwLTMwLjk4MiAwLTIwLjY1NSAwLTQ1LjI4MiAwLTczLjA4NiAwLTE3OC43NDMgMC0yNy4wMTAgMTkuMDY2LTQ2LjA3NiAxOS44Ni0xOS4wNjYgNDYuMDc2LTE5LjA2NnpNMjE2LjMyNyA4NTUuMzMzcTE1NC4xMTYgMCA2MTYuNDY1IDAgNDEuMzEgMCA2OS45MDgtMjguNTk5IDI3LjgwNC0yOC41OTkgMjcuODA0LTY5LjExNCAwLTE1NS43MDUgMC00NjcuOTEgMC00MC41MTUtMjcuODA0LTY5LjExNC0yOC41OTktMjguNTk5LTY5LjkwOC0yOC41OTktMjA1Ljc1MyAwLTYxNi40NjUgMC00MC41MTUgMC02OS4xMTQgMjguNTk5LTI4LjU5OSAyOC41OTktMjguNTk5IDY5LjExNCAwIDQxLjMxIDAgMTIzLjkyOSAwIDQyLjg5OCAwIDEyOC42OTUgMCA0Mi44OTggMCA5Ni45MTggMCAyNy4wMTAgMCA1Ni40MDMgMCAyOS4zOTMgMCA2MS45NjQgMCAzOS43MjEgMjguNTk5IDY4LjMyIDI4LjU5OSAyOS4zOTMgNjkuMTE0IDI5LjM5M3pNMjYyLjQwMyA0MjUuNTU1cTAgMjguNTk5IDE5Ljg2IDQ4LjQ1OSAyMC42NTUgMjAuNjU1IDQ5LjI1NCAyMC42NTUgMjguNTk5IDAgNDkuMjU0LTIwLjY1NSAxOS44Ni0xOS44NiAxOS44Ni00OC40NTkgMC0yOC41OTktMTkuODYtNDguNDU5LTIwLjY1NS0yMC42NTUtNDkuMjU0LTIwLjY1NS0yOC41OTkgMC00OS4yNTQgMjAuNjU1dC0xOS44NiA0OC40NTl6TTI5NC45NzQgNDI1LjU1NXEwLTE1LjA5NCAxMS4xMjItMjYuMjE2IDEwLjMyNy0xMC4zMjcgMjUuNDIxLTEwLjMyNyAxNS4wOTQgMCAyNS40MjEgMTAuMzI3IDExLjEyMiAxMS4xMjIgMTEuMTIyIDI2LjIxNiAwIDE1LjA5NC0xMS4xMjIgMjYuMjE2LTEwLjMyNyAxMC4zMjctMjUuNDIxIDEwLjMyNy0xNC4yOTkgMC0yNS40MjEtMTAuMzI3dC0xMS4xMjItMjYuMjE2ek02NjMuNTgyIDQ5My4wODFxNDIuODk4IDQyLjg5OCAxNzIuMzg4IDE3Mi4zODggNS41NjEgNS41NjEgNS41NjEgMTEuMTIyIDAgNi4zNTUtNS41NjEgMTEuOTE2LTUuNTYxIDYuMzU1LTExLjkxNiA2LjM1NS01LjU2MSAwLTExLjEyMi02LjM1NS01Ny4xOTgtNTcuMTk4LTE3Mi4zODgtMTcyLjM4OC04LjczOS04LjczOS0yMi4yNDQtOC43MzktMTQuMjk5IDAtMjMuODMyIDguNzM5LTQ2LjA3NiA0Ni4wNzYtMTM4LjIyOCAxMzcuNDM0LTE5LjA2NiAxOS4wNjYtNDYuODcgMTkuMDY2LTI3LjAxMCAwLTQ2Ljg3LTE5LjA2Ni03LjE1LTcuMTUtMjEuNDQ5LTIyLjI0NC05LjUzMy04LjczOS0yMy44MzItOC43MzktMTMuNTA1IDAtMjIuMjQ0IDguNzM5LTE5LjA2NiAxOS4wNjYtNTcuMTk4IDU3LjE5OC0xMS4xMjIgMTEuOTE2LTIzLjAzOCAwLTUuNTYxLTUuNTYxLTUuNTYxLTExLjEyMiAwLTUuNTYxIDUuNTYxLTExLjkxNiAxOS4wNjYtMTkuMDY2IDU3LjE5OC01Ny4xOTggMTkuMDY2LTE5LjA2NiA0Ni44Ny0xOS4wNjYgMjcuMDEwIDAgNDYuODcgMTkuMDY2IDcuMTUgNy4xNSAyMS40NDkgMjIuMjQ0IDguNzM5IDguNzM5IDIyLjI0NCA4LjczOSAxNC4yOTkgMCAyMy44MzItOC43MzkgNDUuMjgyLTQ2LjA3NiAxMzYuNjM5LTEzNy40MzQgMTkuODYtMTkuMDY2IDQ3LjY2NS0xOS4wNjYgMjcuMDEwIDAgNDYuMDc2IDE5LjA2NnoiIHAtaWQ9IjMxNzUiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBmaWxsPScjNDQ0NDQ0JyB0PSIxNjIwMjcyOTk5MzUwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iLTIwMCAtMjAwIDE0MjQgMTQyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwMzYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMiA2NTguMjg2YTIwMS4xNDMgMjAxLjE0MyAwIDAgMCAyMDEuMTQzLTIwMS4xNDNWMjU2YTIwMS4xNDMgMjAxLjE0MyAwIDAgMC00MDIuMjg2IDB2MjAxLjE0M0EyMDEuMTQzIDIwMS4xNDMgMCAwIDAgNTEyIDY1OC4yODZ6TTM2NS43MTQgMjU2YTE0Ni4yODYgMTQ2LjI4NiAwIDAgMSAyOTIuNTcyIDB2MjAxLjE0M2ExNDYuMjg2IDE0Ni4yODYgMCAwIDEtMjkyLjU3MiAweiIgcC1pZD0iMjAzNyIgZmlsbD0iIzY2NjY2NiI+PC9wYXRoPjxwYXRoIGQ9Ik04NDEuMTQzIDQ3NS40MjlhMjcuNDI5IDI3LjQyOSAwIDAgMC01NC44NTcgMCAyNTYgMjU2IDAgMCAxLTI1NiAyNTZoLTM2LjU3MmEyNTYgMjU2IDAgMCAxLTI1Ni0yNTYgMjcuNDI5IDI3LjQyOSAwIDAgMC01NC44NTcgMCAzMTAuODU3IDMxMC44NTcgMCAwIDAgMzAxLjcxNCAzMTAuODU3VjkzMi41N0gzNjUuNzE0YTI3LjQyOSAyNy40MjkgMCAwIDAgMCA1NC44NThoMjkyLjU3MmEyNy40MjkgMjcuNDI5IDAgMCAwIDAtNTQuODU4SDUzOS40MjlWNzg2LjI4NmEzMTAuODU3IDMxMC44NTcgMCAwIDAgMzAxLjcxNC0zMTAuODU3eiIgcC1pZD0iMjAzOCIgZmlsbD0iIzY2NjY2NiI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.delay = t.stringToBlob = t.formatLogs = t.SPLITTER = void 0;
    var r, a = n(11),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    var A = t.SPLITTER = "*&(&(*&(&(&*(*&^&^$^%$($^%";
    t.formatLogs = function (e, t, n) {
      for (var r = [], a = "用户账号: " + n + ", 房间ID: " + t + "\n\n", i = 0; i < e
        .length; i++) e[i] && (-1 !== e[i].indexOf(A) && r.length > 0 ? (a += r.join(
          "\n") +
        "\n\n\n\n\n\n******************************************************************************************\n******************************************************************************************\n******************************************************************************************\n******************************************************************************************\n******************************************************************************************\n\n\n",
        r = []) : r.push(e[i]));
      return r.length > 0 && (a += r.join("\n") + "\n\n"), a
    }, t.stringToBlob = function (e, t) {
      var n = new Blob([e], {
        type: "text/plain"
      });
      return n.lastModifiedDate = new Date, n.name = t, n
    }, t.delay = function (e) {
      return new i.default((function (t) {
        setTimeout((function () {
          t()
        }), e)
      }))
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r, a = n(48);
    var i = new((r = a) && r.__esModule ? r : {
      default: r
    }).default;
    t.default = i
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.setLineStyle = s, t.setpixelated = u, t.setCavansStyleSize = function (e, t,
      n) {
      var r = e.canvas;
      r.style.width = t + "px", r.style.height = n + "px"
    }, t.setCanvasPropSize = function (e, t) {
      var n = e.canvas,
        r = !1;
      0 != n.width && 0 != n.height || (r = !0);
      var a = document.createElement("canvas").getContext("2d");
      r || (a.canvas.width = n.width, a.canvas.height = n.height, u(a), s(a), a
        .drawImage(n, 0, 0, n.width, n.height));
      n.width = t.width, n.height = t.height, s(e), u(e), r || (u(a), e.drawImage(a
        .canvas, 0, 0, n.width, n.height))
    }, t.applyCanvasLayout = function (e, t) {
      var n = t.paddingLeft,
        r = t.paddingTop;
      e.style.left = n + "px", e.style.top = r + "px"
    }, t.clearCtx = l, t.free = function (e, t, n, r, a, i) {
      if (e.fillStyle = a, e.strokeStyle = a, e.beginPath(), t.x === r.x && t.y === r.y)
        return void e.lineTo(t.x, t.y);
      e.moveTo(t.x, t.y), e.quadraticCurveTo(n.x, n.y, r.x, r.y), e.stroke(), o("free")
    }, t.line = function (e, t, n, r) {
      i.default.log("line", arguments), e.fillStyle = r, e.strokeStyle = r, e
      .beginPath(), e.moveTo(t.x, t.y), e.lineTo(n.x, n.y), e.stroke(), o("line")
    }, t.rect = function (e, t, n, r) {
      var a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4],
        i = arguments[5];
      a ? (e.fillStyle = i, e.fillRect(t.x, t.y, n, r)) : e.strokeRect(t.x, t.y, n, r)
    }, t.roundRect = function (e, t, n, r, a) {
      var i = arguments.length > 5 && void 0 !== arguments[5] && arguments[5],
        A = arguments[6],
        o = t.x,
        s = t.y,
        u = n < 0 ? -a : a,
        l = r < 0 ? -a : a;
      e.beginPath(), e.moveTo(o + u, s), e.lineTo(o + n - u, s), e.quadraticCurveTo(o +
          n, s, o + n, s + l), e.lineTo(o + n, s + r - l), e.quadraticCurveTo(o + n, s +
          r, o + n - u, s + r), e.lineTo(o + u, s + r), e.quadraticCurveTo(o, s + r, o,
          s + r - l), e.lineTo(o, s + l), e.quadraticCurveTo(o, s, o + u, s), e
      .stroke(), i && (e.fillStyle = A, e.fill())
    }, t.circle = function (e, t, n) {
      var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
        a = arguments[4];
      a && (e.strokeStyle = a);
      e.beginPath(), e.arc(t.x, t.y, n, 0, 2 * Math.PI), r && (e.fillStyle = a, e
      .fill());
      e.stroke()
    }, t.ellipse = function (e, t, n, r) {
      var a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4],
        i = arguments[5];
      i && (e.strokeStyle = i);
      e.beginPath(), e.ellipse(t.x, t.y, n, r, 0, 0, 2 * Math.PI), a && (e.fillStyle =
        i, e.fill());
      e.stroke()
    }, t.fill = function (e, t, n, a) {
      var A = Math.round(t.x),
        o = Math.round(t.y);
      e.save(), e.beginPath();
      var d = e.getImageData(0, 0, Math.round(e.canvas.width), Math.round(e.canvas
          .height)),
        h = d.height,
        p = d.width;
      a && (a.ctx.canvas.width = p, a.ctx.canvas.height = h, u(a.ctx), s(a.ctx));
      var f = n || e.strokeStyle,
        g = parseInt(f.substr(1, 2), 16),
        y = parseInt(f.substr(3, 2), 16),
        v = (255 << 24 | parseInt(f.substr(5, 2), 16) << 16 | y << 8 | g) >>> 0,
        m = [A, o],
        w = a.ctx.createImageData(p, h),
        B = new Uint32Array(w.data.buffer),
        M = new Uint32Array(d.data.buffer),
        C = M[o * p + A];
      if (0 == (16777215 & (C ^ v)) && C >>> 24 == v >>> 24) return;
      var I = 16777215 & C,
        x = (255 & I) >>> 0,
        b = (65280 & I) >>> 8,
        k = (16711680 & I) >>> 16,
        T = (4278190080 & C) >>> 24,
        E = c(x - 15),
        D = c(b - 15),
        N = c(k - 15),
        P = c(x + 15),
        Q = c(b + 15),
        O = c(k + 15),
        _ = [m],
        S = void 0,
        U = p - 1,
        F = h - 1;

      function L(e) {
        if (e === C) return !0;
        var t = (4278190080 & e) >>> 24;
        if (T < 10 && 0 === t) return !0;
        var n = (16777215 & e) >>> 0,
          r = (255 & n) >>> 0,
          a = (65280 & n) >>> 8,
          i = (16711680 & n) >>> 16;
        return r >= E && r <= P && a >= D && a <= Q && i >= N && i <= O && Math.abs(T -
          t) < 10
      }
      var j = {},
        z = new r.Coord(Math.round(p), Math.round(h)),
        R = new r.Coord(0, 0),
        H = function (e, t) {
          return t * p + e
        },
        Y = function (e, t) {
          return M[H(e, t)]
        };
      for (; S = _.pop();) {
        for (var W = S[0], K = S[1]; --K >= 0 && L(Y(W, K)););
        K++;
        for (var G = !1, V = !1; K++ < F && L(Y(W, K));) {
          z.topLeft(W, K), R.bottomRight(W + 1, K + 1);
          var Z = H(W, K);
          M[Z] = v, B[Z] = v, j[Z] = !0, W > 0 && !j[Z - 1] && (L(M[Z - 1]) ? G || (_
            .push([W - 1, K]), G = !0) : G && (G = !1)), W < U && !j[Z + 1] && (L(M[
            Z + 1]) ? V || (j[Z + 1] || _.push([W + 1, K]), V = !0) : V && (V = !1))
        }
      }
      var X = r.Coord.areaSize(z, R);
      i.default.log("fill area is ", X), i.default.log("fill corner is ", z, R), a
        .corner = [z, R], a.ctx.putImageData(w, 0, 0);
      var J = a.ctx.getImageData(z.x, z.y, X.width, X.height);
      i.default.log(J), a.ctx.canvas.height = J.height, a.ctx.canvas.width = J.width, u(
          a.ctx), s(a.ctx), a.ctx.putImageData(J, 0, 0), console.log("shape:", a.ctx
          .canvas.toDataURL()), l(e), i.default.image(e.canvas.toDataURL(),
          "ctx.canvas"), i.default.image(a.ctx.canvas.toDataURL(), "shape.ctx"), e
        .putImageData(d, 0, 0), console.error(a.ctx.canvas.toDataURL()), i.default
        .image(e.canvas.toDataURL(), "final"), a.ctx.beginPath(), e.restore()
    }, t.text = function (e, t, n, r) {
      var a = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4],
        i = arguments[5],
        A = t.x,
        o = t.y;
      e.beginPath(), e.moveTo(A, o), e.font = r + 'px "微软雅黑",Arial', e.textBaseline =
        "top", e.textAlign = "left", a ? (e.fillStyle = i, e.fillText(n, A, o)) : e
        .strokeText(n, A, o);
      e.beginPath()
    };
    var r = n(270),
      a = A(n(268)),
      i = A(n(104));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = (0, a.default)("DrawWorker/CanvasHelper");

    function s(e) {
      e.lineCap = "round", e.lineJoin = "round"
    }

    function u(e) {
      null !== e && (e.imageSmoothingEnabled = !1, e.mozImageSmoothingEnabled = !1, e
        .oImageSmoothingEnabled = !1, e.webkitImageSmoothingEnabled = !1, e
        .msImageSmoothingEnabled = !1)
    }

    function l(e) {
      e.clearRect(-40, -40, e.canvas.width + 80, e.canvas.height + 80)
    }

    function c(e) {
      return e < 0 ? 0 : e > 255 ? 255 : e
    }
  }, , function (e, t, n) {
    "use strict";
    e.exports = function (e, t, n, r) {
      var a = self || window;
      try {
        try {
          var i;
          try {
            i = new a.Blob([e])
          } catch (t) {
            (i = new(a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || a
              .MSBlobBuilder)).append(e), i = i.getBlob()
          }
          var A = a.URL || a.webkitURL,
            o = A.createObjectURL(i),
            s = new a[t](o, n);
          return A.revokeObjectURL(o), s
        } catch (r) {
          return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),
            n)
        }
      } catch (e) {
        if (!r) throw Error("Inline worker is not supported");
        return new a[t](r, n)
      }
    }
  }, function (e, t, n) {
    (function (e) {
      var r = Object.getOwnPropertyDescriptors || function (e) {
          for (var t = Object.keys(e), n = {}, r = 0; r < t.length; r++) n[t[r]] =
            Object.getOwnPropertyDescriptor(e, t[r]);
          return n
        },
        a = /%[sdj%]/g;
      t.format = function (e) {
        if (!y(e)) {
          for (var t = [], n = 0; n < arguments.length; n++) t.push(o(arguments[n]));
          return t.join(" ")
        }
        n = 1;
        for (var r = arguments, i = r.length, A = String(e).replace(a, (function (e) {
            if ("%%" === e) return "%";
            if (n >= i) return e;
            switch (e) {
              case "%s":
                return String(r[n++]);
              case "%d":
                return Number(r[n++]);
              case "%j":
                try {
                  return JSON.stringify(r[n++])
                } catch (e) {
                  return "[Circular]"
                }
                default:
                  return e
            }
          })), s = r[n]; n < i; s = r[++n]) f(s) || !w(s) ? A += " " + s : A += " " +
          o(s);
        return A
      }, t.deprecate = function (n, r) {
        if (void 0 !== e && !0 === e.noDeprecation) return n;
        if (void 0 === e) return function () {
          return t.deprecate(n, r).apply(this, arguments)
        };
        var a = !1;
        return function () {
          if (!a) {
            if (e.throwDeprecation) throw new Error(r);
            e.traceDeprecation ? console.trace(r) : console.error(r), a = !0
          }
          return n.apply(this, arguments)
        }
      };
      var i, A = {};

      function o(e, n) {
        var r = {
          seen: [],
          stylize: u
        };
        return arguments.length >= 3 && (r.depth = arguments[2]), arguments.length >=
          4 && (r.colors = arguments[3]), p(n) ? r.showHidden = n : n && t._extend(r,
          n), v(r.showHidden) && (r.showHidden = !1), v(r.depth) && (r.depth = 2), v(r
            .colors) && (r.colors = !1), v(r.customInspect) && (r.customInspect = !0), r
          .colors && (r.stylize = s), l(r, e, r.depth)
      }

      function s(e, t) {
        var n = o.styles[t];
        return n ? "[" + o.colors[n][0] + "m" + e + "[" + o.colors[n][1] + "m" : e
      }

      function u(e, t) {
        return e
      }

      function l(e, n, r) {
        if (e.customInspect && n && C(n.inspect) && n.inspect !== t.inspect && (!n
            .constructor || n.constructor.prototype !== n)) {
          var a = n.inspect(r, e);
          return y(a) || (a = l(e, a, r)), a
        }
        var i = function (e, t) {
          if (v(t)) return e.stylize("undefined", "undefined");
          if (y(t)) {
            var n = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'")
              .replace(/\\"/g, '"') + "'";
            return e.stylize(n, "string")
          }
          if (g(t)) return e.stylize("" + t, "number");
          if (p(t)) return e.stylize("" + t, "boolean");
          if (f(t)) return e.stylize("null", "null")
        }(e, n);
        if (i) return i;
        var A = Object.keys(n),
          o = function (e) {
            var t = {};
            return e.forEach((function (e, n) {
              t[e] = !0
            })), t
          }(A);
        if (e.showHidden && (A = Object.getOwnPropertyNames(n)), M(n) && (A.indexOf(
            "message") >= 0 || A.indexOf("description") >= 0)) return c(n);
        if (0 === A.length) {
          if (C(n)) {
            var s = n.name ? ": " + n.name : "";
            return e.stylize("[Function" + s + "]", "special")
          }
          if (m(n)) return e.stylize(RegExp.prototype.toString.call(n), "regexp");
          if (B(n)) return e.stylize(Date.prototype.toString.call(n), "date");
          if (M(n)) return c(n)
        }
        var u, w = "",
          I = !1,
          x = ["{", "}"];
        (h(n) && (I = !0, x = ["[", "]"]), C(n)) && (w = " [Function" + (n.name ? ": " +
          n.name : "") + "]");
        return m(n) && (w = " " + RegExp.prototype.toString.call(n)), B(n) && (w = " " +
            Date.prototype.toUTCString.call(n)), M(n) && (w = " " + c(n)), 0 !== A
          .length || I && 0 != n.length ? r < 0 ? m(n) ? e.stylize(RegExp.prototype
            .toString.call(n), "regexp") : e.stylize("[Object]", "special") : (e.seen
            .push(n), u = I ? function (e, t, n, r, a) {
              for (var i = [], A = 0, o = t.length; A < o; ++A) T(t, String(A)) ? i
                .push(d(e, t, n, r, String(A), !0)) : i.push("");
              return a.forEach((function (a) {
                a.match(/^\d+$/) || i.push(d(e, t, n, r, a, !0))
              })), i
            }(e, n, r, o, A) : A.map((function (t) {
              return d(e, n, r, o, t, I)
            })), e.seen.pop(),
            function (e, t, n) {
              if (e.reduce((function (e, t) {
                  return t.indexOf("\n") >= 0 && 0, e + t.replace(/\u001b\[\d\d?m/g,
                    "").length + 1
                }), 0) > 60) return n[0] + ("" === t ? "" : t + "\n ") + " " + e.join(
                ",\n  ") + " " + n[1];
              return n[0] + t + " " + e.join(", ") + " " + n[1]
            }(u, w, x)) : x[0] + w + x[1]
      }

      function c(e) {
        return "[" + Error.prototype.toString.call(e) + "]"
      }

      function d(e, t, n, r, a, i) {
        var A, o, s;
        if ((s = Object.getOwnPropertyDescriptor(t, a) || {
            value: t[a]
          }).get ? o = s.set ? e.stylize("[Getter/Setter]", "special") : e.stylize(
            "[Getter]", "special") : s.set && (o = e.stylize("[Setter]", "special")), T(
            r, a) || (A = "[" + a + "]"), o || (e.seen.indexOf(s.value) < 0 ? (o = f(
            n) ? l(e, s.value, null) : l(e, s.value, n - 1)).indexOf("\n") > -1 && (
            o = i ? o.split("\n").map((function (e) {
              return "  " + e
            })).join("\n").substr(2) : "\n" + o.split("\n").map((function (e) {
              return "   " + e
            })).join("\n")) : o = e.stylize("[Circular]", "special")), v(A)) {
          if (i && a.match(/^\d+$/)) return o;
          (A = JSON.stringify("" + a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (A = A
            .substr(1, A.length - 2), A = e.stylize(A, "name")) : (A = A.replace(/'/g,
            "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), A = e.stylize(A,
            "string"))
        }
        return A + ": " + o
      }

      function h(e) {
        return Array.isArray(e)
      }

      function p(e) {
        return "boolean" == typeof e
      }

      function f(e) {
        return null === e
      }

      function g(e) {
        return "number" == typeof e
      }

      function y(e) {
        return "string" == typeof e
      }

      function v(e) {
        return void 0 === e
      }

      function m(e) {
        return w(e) && "[object RegExp]" === I(e)
      }

      function w(e) {
        return "object" == typeof e && null !== e
      }

      function B(e) {
        return w(e) && "[object Date]" === I(e)
      }

      function M(e) {
        return w(e) && ("[object Error]" === I(e) || e instanceof Error)
      }

      function C(e) {
        return "function" == typeof e
      }

      function I(e) {
        return Object.prototype.toString.call(e)
      }

      function x(e) {
        return e < 10 ? "0" + e.toString(10) : e.toString(10)
      }
      t.debuglog = function (n) {
          if (v(i) && (i = e.env.NODE_DEBUG || ""), n = n.toUpperCase(), !A[n])
            if (new RegExp("\\b" + n + "\\b", "i").test(i)) {
              var r = e.pid;
              A[n] = function () {
                var e = t.format.apply(t, arguments);
                console.error("%s %d: %s", n, r, e)
              }
            } else A[n] = function () {};
          return A[n]
        }, t.inspect = o, o.colors = {
          bold: [1, 22],
          italic: [3, 23],
          underline: [4, 24],
          inverse: [7, 27],
          white: [37, 39],
          grey: [90, 39],
          black: [30, 39],
          blue: [34, 39],
          cyan: [36, 39],
          green: [32, 39],
          magenta: [35, 39],
          red: [31, 39],
          yellow: [33, 39]
        }, o.styles = {
          special: "cyan",
          number: "yellow",
          boolean: "yellow",
          undefined: "grey",
          null: "bold",
          string: "green",
          date: "magenta",
          regexp: "red"
        }, t.isArray = h, t.isBoolean = p, t.isNull = f, t.isNullOrUndefined =
        function (e) {
          return null == e
        }, t.isNumber = g, t.isString = y, t.isSymbol = function (e) {
          return "symbol" == typeof e
        }, t.isUndefined = v, t.isRegExp = m, t.isObject = w, t.isDate = B, t.isError =
        M, t.isFunction = C, t.isPrimitive = function (e) {
          return null === e || "boolean" == typeof e || "number" == typeof e ||
            "string" == typeof e || "symbol" == typeof e || void 0 === e
        }, t.isBuffer = n(282);
      var b = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct",
        "Nov", "Dec"
      ];

      function k() {
        var e = new Date,
          t = [x(e.getHours()), x(e.getMinutes()), x(e.getSeconds())].join(":");
        return [e.getDate(), b[e.getMonth()], t].join(" ")
      }

      function T(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
      }
      t.log = function () {
        console.log("%s - %s", k(), t.format.apply(t, arguments))
      }, t.inherits = n(283), t._extend = function (e, t) {
        if (!t || !w(t)) return e;
        for (var n = Object.keys(t), r = n.length; r--;) e[n[r]] = t[n[r]];
        return e
      };
      var E = "undefined" != typeof Symbol ? Symbol("util.promisify.custom") : void 0;

      function D(e, t) {
        if (!e) {
          var n = new Error("Promise was rejected with a falsy value");
          n.reason = e, e = n
        }
        return t(e)
      }
      t.promisify = function (e) {
        if ("function" != typeof e) throw new TypeError(
          'The "original" argument must be of type Function');
        if (E && e[E]) {
          var t;
          if ("function" != typeof (t = e[E])) throw new TypeError(
            'The "util.promisify.custom" argument must be of type Function');
          return Object.defineProperty(t, E, {
            value: t,
            enumerable: !1,
            writable: !1,
            configurable: !0
          }), t
        }

        function t() {
          for (var t, n, r = new Promise((function (e, r) {
              t = e, n = r
            })), a = [], i = 0; i < arguments.length; i++) a.push(arguments[i]);
          a.push((function (e, r) {
            e ? n(e) : t(r)
          }));
          try {
            e.apply(this, a)
          } catch (e) {
            n(e)
          }
          return r
        }
        return Object.setPrototypeOf(t, Object.getPrototypeOf(e)), E && Object
          .defineProperty(t, E, {
            value: t,
            enumerable: !1,
            writable: !1,
            configurable: !0
          }), Object.defineProperties(t, r(e))
      }, t.promisify.custom = E, t.callbackify = function (t) {
        if ("function" != typeof t) throw new TypeError(
          'The "original" argument must be of type Function');

        function n() {
          for (var n = [], r = 0; r < arguments.length; r++) n.push(arguments[r]);
          var a = n.pop();
          if ("function" != typeof a) throw new TypeError(
            "The last argument must be of type Function");
          var i = this,
            A = function () {
              return a.apply(i, arguments)
            };
          t.apply(this, n).then((function (t) {
            e.nextTick(A, null, t)
          }), (function (t) {
            e.nextTick(D, t, A)
          }))
        }
        return Object.setPrototypeOf(n, Object.getPrototypeOf(t)), Object
          .defineProperties(n, r(t)), n
      }
    }).call(this, n(154))
  }, function (e, t) {
    e.exports = function (e) {
      return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e
        .children || (e.children = []), Object.defineProperty(e, "loaded", {
          enumerable: !0,
          get: function () {
            return e.l
          }
        }), Object.defineProperty(e, "id", {
          enumerable: !0,
          get: function () {
            return e.i
          }
        }), e.webpackPolyfill = 1), e
    }
  }, , function (e, t, n) {
    (function (t) {
      void 0 === t || "renderer" === t.type || !0 === t.browser || t.__nwjs ? e
        .exports = n(519) : e.exports = n(521)
    }).call(this, n(154))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.packBulk = function (e) {
      var t = e.map((function (e) {
        return s(e)
      })).join(";") + ";";
      return i.default.m.syncmanager("packBulk anyAction", t), t
    }, t.pack = s, t.unpackBulk = function (e) {
      var t = [];
      return e.split(";").forEach((function (e) {
        var n = u(e);
        n && t.push(n)
      })), t
    }, t.unpack = u;
    var r, a = n(104),
      i = (r = a) && r.__esModule ? r : {
        default: r
      },
      A = n(151),
      o = n(152);

    function s(e, t) {
      return i.default.m.syncmanager("pack anyAction", e), console.assert(void 0 !== e
        .action, "ooops"), e.action.toString()
    }

    function u(e) {
      if (e) {
        var t = e.indexOf(":");
        i.default.m.syncmanager("unpack command ", e);
        var n = void 0,
          r = void 0;
        switch (-1 == t ? (n = +e, r = "") : (n = +e.slice(0, t), r = e.slice(t + 1, e
          .length)), i.default.command("unpack", e), n) {
          case A.WActions.START:
            return o.StartAction.fromString(r);
          case A.WActions.MOVE:
            return o.MoveAction.fromString(r);
          case A.WActions.END:
            return o.EndAction.fromString(r);
          case A.WActions.REVOKE:
            return o.RevokeAction.fromString(r);
          case A.WActions.SERIAL:
            return o.SerialAction.fromString(r);
          case A.WActions.CLEAR:
            return o.ClearAction.fromString(r);
          case A.WActions.CLEAR_ACK:
            return o.ClearAckAction.fromString(r);
          case A.WActions.LASER_PEN:
            return o.LaserPenAction.fromString(r);
          case A.WActions.SYNC_REQUEST:
            return o.SyncRequestAction.fromString(r);
          case A.WActions.SYNC:
            return o.SyncAction.fromString(r);
          case A.WActions.SYNC_PREPARE:
            return o.SyncPrepareAction.fromString(r);
          case A.WActions.SYNC_PREPARE_ACK:
            return o.SyncPrepareAckAction.fromString(r);
          case A.WActions.LASER_PEN_END:
            return o.LaserPenEndAction.fromString(r);
          case A.WActions.FILE:
            return o.FileAction.fromString(r);
          case A.WActions.REDO:
            return o.RedoAction.fromString(r);
          case A.WActions.CALIBRATE:
            return o.CalibrateAction.fromString(r);
          case A.WActions.TEXT:
            return o.TextAction.fromString(r);
          case A.WActions.VERSION:
            return o.VersionAction.fromString(r);
          default:
        }
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Coord = void 0;
    var r = i(n(0)),
      a = i(n(1));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var A = /\(x:([.\d]+),y:([.\d]+)\)/,
      o = function () {
        function e(t, n) {
          (0, r.default)(this, e), this.x = t || 0, this.y = n || 0
        }
        return (0, a.default)(e, [{
          key: "destroy",
          value: function () {}
        }, {
          key: "clone",
          value: function () {
            return new e(this.x, this.y)
          }
        }, {
          key: "toString",
          value: function () {
            return "(x:" + this.x.toFixed(8) + ",y:" + this.y.toFixed(8) + ")"
          }
        }, {
          key: "toCoord",
          value: function (e, t) {
            return new s(this.x * e, this.y * t)
          }
        }, {
          key: "copy",
          value: function (e) {
            this.x = e.x, this.y = e.y
          }
        }, {
          key: "minus",
          value: function (t) {
            return new e(this.x - t.x, this.y - t.y)
          }
        }, {
          key: "topLeft",
          value: function (t, n) {
            return "number" == typeof t && "number" == typeof n ? (t < this.x && (
                this.x = t), n < this.y && (this.y = n)) : t instanceof e && this
              .topLeft(t.x, t.y), this
          }
        }, {
          key: "bottomRight",
          value: function (t, n) {
            return "number" == typeof t && "number" == typeof n ? (t > this.x && (
                this.x = t), n > this.y && (this.y = n)) : t instanceof e && this
              .bottomRight(t.x, t.y), this
          }
        }], [{
          key: "fromString",
          value: function (t) {
            var n = A.exec(t);
            return n ? new e(+n[1], +n[2]) : new e(0, 0)
          }
        }, {
          key: "middle",
          value: function (t, n) {
            return new e((t.x + n.x) / 2, (t.y + n.y) / 2)
          }
        }, {
          key: "areaSize",
          value: function (e, t) {
            return {
              width: Math.ceil(Math.abs(e.x - t.x)),
              height: Math.ceil(Math.abs(e.y - t.y))
            }
          }
        }, {
          key: "clone",
          value: function (t) {
            return new e(t.x, t.y)
          }
        }]), e
      }();
    t.default = o;
    var s = t.Coord = function () {
      function e(t, n) {
        (0, r.default)(this, e), this.x = t, this.y = n
      }
      return (0, a.default)(e, [{
        key: "destroy",
        value: function () {}
      }, {
        key: "clone",
        value: function () {
          return new e(this.x, this.y)
        }
      }, {
        key: "toPoint",
        value: function (e, t) {
          return new o(this.x / e, this.y / t)
        }
      }, {
        key: "copy",
        value: function (e) {
          this.x = e.x, this.y = e.y
        }
      }, {
        key: "minus",
        value: function (t) {
          return new e(this.x - t.x, this.y - t.y)
        }
      }, {
        key: "topLeft",
        value: function (t, n) {
          return "number" == typeof t && "number" == typeof n ? (t < this.x && (
              this.x = t), n < this.y && (this.y = n)) : t instanceof e && this
            .topLeft(t.x, t.y), this
        }
      }, {
        key: "bottomRight",
        value: function (t, n) {
          return "number" == typeof t && "number" == typeof n ? (t > this.x && (
              this.x = t), n > this.y && (this.y = n)) : t instanceof e && this
            .bottomRight(t.x, t.y), this
        }
      }], [{
        key: "fromString",
        value: function (t, n, r) {
          var a = A.exec(t);
          return a ? new e(Math.round(+a[1] * n), Math.round(+a[2] * r)) :
            new e(0, 0)
        }
      }, {
        key: "middle",
        value: function (t, n) {
          return new e((t.x + n.x) / 2, (t.y + n.y) / 2)
        }
      }, {
        key: "areaSize",
        value: function (e, t) {
          return {
            width: Math.ceil(Math.abs(e.x - t.x)),
            height: Math.ceil(Math.abs(e.y - t.y))
          }
        }
      }, {
        key: "clone",
        value: function (t) {
          return new e(t.x, t.y)
        }
      }]), e
    }()
  }, , function (module, exports, __webpack_require__) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: !0
    }), exports.App = void 0;
    var _regenerator = __webpack_require__(25),
      _regenerator2 = _interopRequireDefault(_regenerator),
      _keys = __webpack_require__(20),
      _keys2 = _interopRequireDefault(_keys),
      _typeof2 = __webpack_require__(33),
      _typeof3 = _interopRequireDefault(_typeof2),
      _getIterator2 = __webpack_require__(7),
      _getIterator3 = _interopRequireDefault(_getIterator2),
      _stringify = __webpack_require__(21),
      _stringify2 = _interopRequireDefault(_stringify),
      _assign = __webpack_require__(5),
      _assign2 = _interopRequireDefault(_assign),
      _set = __webpack_require__(42),
      _set2 = _interopRequireDefault(_set),
      _classCallCheck2 = __webpack_require__(0),
      _classCallCheck3 = _interopRequireDefault(_classCallCheck2),
      _createClass2 = __webpack_require__(1),
      _createClass3 = _interopRequireDefault(_createClass2),
      _promise = __webpack_require__(11),
      _promise2 = _interopRequireDefault(_promise),
      _container = __webpack_require__(105),
      _container2 = _interopRequireDefault(_container),
      _OpsManager = __webpack_require__(279),
      _OpsManager2 = _interopRequireDefault(_OpsManager),
      _dispatcher2 = __webpack_require__(146),
      _dispatcher3 = _interopRequireDefault(_dispatcher2),
      _room = __webpack_require__(363),
      _room2 = _interopRequireDefault(_room),
      _dataHub = __webpack_require__(217),
      _dataHub2 = _interopRequireDefault(_dataHub),
      _types = __webpack_require__(96),
      _previewFactory = __webpack_require__(367),
      _previewFactory2 = _interopRequireDefault(_previewFactory),
      _config = __webpack_require__(236),
      _config2 = _interopRequireDefault(_config),
      _camera = __webpack_require__(368),
      _camera2 = _interopRequireDefault(_camera),
      _validate = __webpack_require__(251),
      _validate2 = _interopRequireDefault(_validate),
      _player = __webpack_require__(369),
      _player2 = _interopRequireDefault(_player),
      _simulator = __webpack_require__(370),
      _simulator2 = _interopRequireDefault(_simulator),
      _vision = __webpack_require__(371),
      _vision2 = _interopRequireDefault(_vision),
      _toast = __webpack_require__(31),
      _util = __webpack_require__(252),
      _isBase = __webpack_require__(372),
      _isBase2 = _interopRequireDefault(_isBase),
      _textConfig = __webpack_require__(373),
      _textConfig2 = _interopRequireDefault(_textConfig),
      _constant = __webpack_require__(32),
      _constant2 = _interopRequireDefault(_constant),
      _dataReport = __webpack_require__(72),
      _dataReport2 = _interopRequireDefault(_dataReport),
      _aliveManager = __webpack_require__(374),
      _aliveManager2 = _interopRequireDefault(_aliveManager),
      _instance = __webpack_require__(375),
      _instance2 = _interopRequireDefault(_instance),
      _delay = __webpack_require__(158),
      _ShapeSelector = __webpack_require__(454),
      _ShapeSelector2 = _interopRequireDefault(_ShapeSelector),
      _resourceCache = __webpack_require__(455),
      _resourceCache2 = _interopRequireDefault(_resourceCache),
      _shapeManager = __webpack_require__(460),
      _shapeManager2 = _interopRequireDefault(_shapeManager),
      _drawConfig = __webpack_require__(22),
      _drawConfig2 = _interopRequireDefault(_drawConfig),
      _util2 = __webpack_require__(133),
      _lang = __webpack_require__(14),
      _timerWorker = __webpack_require__(468),
      _timerWorker2 = _interopRequireDefault(_timerWorker),
      _visibleChangeUtil = __webpack_require__(102);

    function _interopRequireDefault(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var __awaiter = function (e, t, n, r) {
        return new(n || (n = _promise2.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      defaultServiceConf = {
        textFontUrl: "https://wb.vod.126.net/courseware/fonts",
        pptFontUrl: "https://wb.vod.126.net/courseware/pptview/fonts/"
      },
      App = function () {
        function App(e) {
          var t, n, r, a, i, A, o, s, u, l, c = this;
          if ((0, _classCallCheck3.default)(this, App), this.PluginType = _types
            .PluginType, this.isRecordPlayer = !1, this.editEnabled = !1, this
            .showCursor = !1, this.isConnected = !1, this.cameraReady = !1, this
            .floatToolbar = null, this.destroyed = !1, this.zoomTo1AfterJoin = !0, this
            .reportedError = new _set2.default, this.pageVisible = !0, this.sessionId = e
            .sessionId || "", this.account = e.account, this.nickname = e.nickname ? e
            .nickname : e.account, this.platform = e.platform, this.appkey = e.appkey,
            this.logger = e.logger, this.isG1 = e.isG1, this.serviceConf = (0, _assign2
              .default)({}, defaultServiceConf, e.serviceConf), this.ntpTimeDiff = e
            .ntpTimeDiff ? e.ntpTimeDiff : 0, this.uid = Number(e.uid), this.lang = e
            .lang, this.visHandlerUnregist = (0, _visibleChangeUtil
              .registerVisibleChangeHandler)((function () {
              c.pageVisible = !0
            }), (function () {
              c.pageVisible = !1
            })), e.getAntiLeechInfo && (this.getAntiLeechInfo = e.getAntiLeechInfo), !
            isNaN(Number(null === (t = e.cameraBound) || void 0 === t ? void 0 : t
              .centerX)) && !isNaN(Number(null === (n = e.cameraBound) || void 0 === n ?
              void 0 : n.centerY)) && !isNaN(Number(null === (r = e.cameraBound) ||
              void 0 === r ? void 0 : r.width)) && !isNaN(Number(null === (a = e
              .cameraBound) || void 0 === a ? void 0 : a.height)) && Number(null === (i =
              e.cameraBound) || void 0 === i ? void 0 : i.width) > 0 && Number(null === (
              A = e.cameraBound) || void 0 === A ? void 0 : A.height) > 0 ? this
            .defaultCameraBound = {
              centerX: Number(null === (o = e.cameraBound) || void 0 === o ? void 0 : o
                .centerX),
              centerY: Number(null === (s = e.cameraBound) || void 0 === s ? void 0 : s
                .centerY),
              width: Number(null === (u = e.cameraBound) || void 0 === u ? void 0 : u
                .width),
              height: Number(null === (l = e.cameraBound) || void 0 === l ? void 0 : l
                .height)
            } : e.cameraBound && this.logger.error(
              "[wb] drawPlugin init cameraBound is invalid", (0, _stringify2.default)(e
                .cameraBound)), this.zoomTo1AfterJoin = void 0 === e.zoomTo1AfterJoin || !
            0 === e.zoomTo1AfterJoin, this.nim = e.nim, this.resourceCache =
            new _resourceCache2.default(this), this.simulator = new _simulator2.default(
              this), this.shapeManager = new _shapeManager2.default(this), this
            .dispatcher = new _dispatcher3.default, this.configInstance = new _config2
            .default(this), !1 === e.cacheUploadDocs && this.setAppConfig({
              cacheUploadDocs: !1
            }), e.appConfig && this.setAppConfig(e.appConfig), this.opsManager =
            new _OpsManager2.default(this), this.opsManager.extendDefaultOps(), this
            .dataHub = new _dataHub2.default(this, e.connector), this.shapeSelector =
            new _ShapeSelector2.default(this), this.container = new _container2.default(
              this), this.room = new _room2.default(this, this.dataHub), this.container
            .addOpsManager(this.opsManager), this.opsManager.addContainer(this.container),
            this.camera = new _camera2.default(this, this.defaultCameraBound), this
            .vision = new _vision2.default(this), this.textConfig = new _textConfig2
            .default(this), Array.isArray(e.pluginDefArr)) {
            var d = !0,
              h = !1,
              p = void 0;
            try {
              for (var f, g = (0, _getIterator3.default)(e.pluginDefArr); !(d = (f = g
                  .next()).done); d = !0) {
                var y = f.value;
                this.definePlugin(y)
              }
            } catch (e) {
              h = !0, p = e
            } finally {
              try {
                !d && g.return && g.return()
              } finally {
                if (h) throw p
              }
            }
          }
          this.isRecordPlayer = !!e.isRecordPlayer, e.isRecordPlayer || (this
              .previewFactory = new _previewFactory2.default(this)), this.aliveManager =
            new _aliveManager2.default(this), e.isRecordPlayer && (this.player =
              new _player2.default(this)), e.container && this.setContainer(e.container),
            _drawConfig2.default.init()
        }
        return (0, _createClass3.default)(App, [{
          key: "startWorker",
          value: function () {
            var e = this;
            this.timeWorker = this.timeWorker || new _timerWorker2.default, this
              .timeWorker.postMessage({
                command: "start",
                interval: this.appConfig.workerTimerInterval
              }), this.timeWorker.onmessage = function (t) {
                var n;
                e.room && "tick" === (null === (n = null == t ? void 0 : t
                    .data) || void 0 === n ? void 0 : n.message) && e.room
                  .workerRefresh()
              }
          }
        }, {
          key: "stopWorker",
          value: function () {
            this.timeWorker && this.timeWorker.postMessage({
              command: "end"
            })
          }
        }, {
          key: "updateWorker",
          value: function () {
            this.timeWorker && this.timeWorker.postMessage({
              command: "update",
              interval: this.appConfig.workerTimerInterval
            })
          }
        }, {
          key: "getStream",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {};
            _validate2.default.validate(this.logger, "container.getStream", e, {
              width: {
                isRequire: !1,
                type: "number"
              },
              keepDPI: {
                isRequire: !1,
                type: "boolean"
              }
            }), this.startWorker();
            var t = this.room.currBoard.currPage;
            if (t) {
              var n = t.opsManager.opMap.url.currentUrlOpid;
              if (n) {
                var r = t.opsManager.opMap.url;
                r.getStream()
              }
            }
            return this.container.getStream(e, !0)
          }
        }, {
          key: "updateStream",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {};
            return _validate2.default.validate(this.logger,
              "container.updateStream", e, {
                width: {
                  isRequire: !1,
                  type: "number"
                },
                keepDPI: {
                  isRequire: !1,
                  type: "boolean"
                }
              }), this.container.getStream(e, !1)
          }
        }, {
          key: "stopStream",
          value: function () {
            this.stopWorker(), this.container.stopStream();
            var e = this.room.currBoard.currPage;
            e && (e.opsManager.opMap.url.currentUrlOpid && e.opsManager.opMap.url
              .stopStream())
          }
        }, {
          key: "getStrokeWidth",
          value: function () {}
        }, {
          key: "getOpacity",
          value: function () {}
        }, {
          key: "getColor",
          value: function () {}
        }, {
          key: "getDefStyles",
          value: function () {
            return _drawConfig2.default.getDefStyles()
          }
        }, {
          key: "getRedoCount",
          value: function () {
            return this.opsManager.opMap.redo.getCount()
          }
        }, {
          key: "getUndoCount",
          value: function () {
            return this.opsManager.opMap.undo.getCount()
          }
        }, {
          key: "isClearAvailable",
          value: function () {
            return this.opsManager.opMap.clear.isAvailable()
          }
        }, {
          key: "isTextAreaFocus",
          value: function () {
            return !1
          }
        }, {
          key: "isCameraReady",
          value: function () {
            return this.cameraReady
          }
        }, {
          key: "getSelectedIds",
          value: function () {
            return this.opsManager.opMap.select.getSelectedIds()
          }
        }, {
          key: "getPageElementInfos",
          value: function () {
            var e = this.room.currBoard.currPage.drawOpQueue,
              t = this.room.currBoard.currPage.hiddenOpQueue,
              n = [];
            for (var r in e) n.push({
              id: r,
              type: e[r].data.type,
              visible: !0
            });
            for (var a in t) n.push({
              id: a,
              type: t[a].data.type,
              visible: !1
            });
            return n
          }
        }, {
          key: "getZoomFactor",
          value: function () {
            return this.camera.zoomFactor
          }
        }, {
          key: "getCameraBound",
          value: function () {
            return this.camera.getContainerWorldRect()
          }
        }, {
          key: "getVisionState",
          value: function () {
            return {
              mode: this.vision.mode,
              broadcasterName: this.vision.broadcasterName,
              broadcaster: this.vision.broadcaster
            }
          }
        }, {
          key: "getCoordInWorld",
          value: function (e) {
            var t = e.x,
              n = e.y;
            return "ratio" === e.type && (t = this.container.width * t, n = this
              .container.height * n), this.camera.convertToPointInWorld(t, n)
          }
        }, {
          key: "getResourceMetadata",
          value: function (e) {
            this.logger.log("[白板]", "drawPlugin.getResourceMetadata", e),
              _validate2.default.validate(this.logger,
                "drawPlugin.getResourceMetadata", e, {
                  url: {
                    type: "string",
                    isRequire: !0
                  },
                  type: {
                    type: "string",
                    isRequire: !0,
                    enum: ["image", "video", "audio"]
                  }
                });
            var t = e.url,
              n = e.type;
            return this.resourceCache.getResourceMetadata(t, n)
          }
        }, {
          key: "setAppConfig",
          value: function (e) {
            this.configInstance.setAppConfig(e)
          }
        }, {
          key: "setNickName",
          value: function (e) {
            this.nickname = e
          }
        }, {
          key: "setContainer",
          value: function (e) {
            var t;
            this.logger.log("set container"), e.innerHTML = "", this.container
              .appendTo(e), null === (t = this.previewFactory) || void 0 === t ||
              t.reset(), this.isRecordPlayer || this.setFloatToolbar(e)
          }
        }, {
          key: "setFloatToolbar",
          value: function (e) {
            var t = this;
            _promise2.default.resolve().then((function () {
              t.floatToolbar = _instance2.default.getInstance({
                container: e,
                drawPlugin: t
              })
            }))
          }
        }, {
          key: "updateContainerAfterResize",
          value: function () {
            this.container.resize()
          }
        }, {
          key: "exportBoards",
          value: function (e) {
            if (_validate2.default.validate(this.logger,
                "drawPlugin.exportBoards", e, {
                  download: {
                    type: "boolean"
                  },
                  boardNames: {
                    type: "array",
                    isRequire: !0
                  },
                  fileName: {
                    type: "string"
                  }
                }), 0 === e.boardNames.length) throw new Error("boardNames不能为空");
            try {
              var t = this.getBoardInfos(),
                n = !0,
                r = !1,
                a = void 0;
              try {
                for (var i, A = (0, _getIterator3.default)(e.boardNames); !(n = (
                    i = A.next()).done); n = !0) {
                  var o = i.value;
                  if (-1 === t.boardNames.indexOf(o)) throw new Error("Board: " +
                    o + " 不存在")
                }
              } catch (e) {
                r = !0, a = e
              } finally {
                try {
                  !n && A.return && A.return()
                } finally {
                  if (r) throw a
                }
              }
              return this.room.exportBoards(e.boardNames, e.fileName, e.download)
            } catch (e) {
              return this.logger.error("drawPlugin.exportBoards error", e), null
            }
          }
        }, {
          key: "importBoards",
          value: function (e) {
            _validate2.default.validate(this.logger, "drawPlugin.importBoards",
            e, {
              boardNames: {
                type: "array"
              },
              url: {
                type: "string",
                isRequire: !0
              }
            }), this.emit("op:board:import", e.url, e.boardNames, e.overwrite)
          }
        }, {
          key: "readyToSyncData",
          value: function () {
            document.body.style.cursor = "auto", this.dataHub.sendSyncRequest()
          }
        }, {
          key: "stopSyncData",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.stopSyncData"), this.dataHub
              .stopSyncRequest()
          }
        }, {
          key: "setIsConnected",
          value: function (e) {
            this.logger.warn("[wb]drawPlugin.setIsConnected", e), this
              .isConnected = e, this.isConnected || (document.body.style.cursor =
                "auto"), this.emit("event:editable:change", this.editable)
          }
        }, {
          key: "resetState",
          value: function () {
            var e;
            this.logger.log("[wb]resetState"), this.room.reset(), this.dataHub
              .reset(), this.opsManager.destroy(), this.resourceCache.destroy(),
              null === (e = this.previewFactory) || void 0 === e || e.reset(),
              this.shapeSelector.destroy()
          }
        }, {
          key: "addImage",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.addImage", e), _validate2.default
              .validate(this.logger, "drawPlugin.addImage", e, {
                url: {
                  type: "string",
                  isRequire: !0
                }
              });
            var t = void 0 === e.pageName ? this.room.getPageNameFromIndex(e
              .boardName, e.pageIndex) : e.pageName;
            (0, _isBase2.default)(e.url) || (0, _isBase2.default)(e.url, {
              allowMime: !0
            }) ? (0, _util.uploadAndAddImg)(this, {
              dataURL: e.url,
              fileName: "img.png"
            }, {
              pageName: t,
              boardName: e.boardName
            }) : e.url.length > 1e4 ? this.logger.error("[wb]",
                "drawPlugin.addImage opt.url length should be less than 10000") :
              this.emit("op:image:upload", e.url, {
                pageName: t,
                boardName: e.boardName,
                antiLeechProp: e.antiLeechProp
              })
          }
        }, {
          key: "addVideo",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.addVideo", e), _validate2.default
              .validate(this.logger, "drawPlugin.addVideo", e, {
                url: {
                  type: "string",
                  isRequire: !0
                },
                sourceType: {
                  type: "string",
                  isRequire: !0
                },
                title: {
                  type: "string"
                }
              });
            var t = void 0 === e.pageName ? this.room.getPageNameFromIndex(e
              .boardName, e.pageIndex) : e.pageName;
            if (!this.hasMediaOnPage(!0, e.boardName, t)) {
              var n = e.sourceType.startsWith("video/") ? e.sourceType :
                "video/" + e.sourceType;
              this.emit("op:video:insert", e.url, {
                title: e.title,
                sourceType: n,
                pageName: t,
                boardName: e.boardName,
                antiLeechProp: e.antiLeechProp
              })
            }
          }
        }, {
          key: "addUrl",
          value: function (e) {
            this.logger.warn("[wb]", "drawPlugin.addUrl", e), _validate2.default
              .validate(this.logger, "drawPlugin.addUrl", e, {
                url: {
                  type: "string",
                  isRequire: !0
                },
                sourceType: {
                  type: "string",
                  isRequire: !0
                },
                title: {
                  type: "string"
                }
              });
            var t = void 0 === e.pageName ? this.room.getPageNameFromIndex(e
              .boardName, e.pageIndex) : e.pageName;
            this.hasMediaOnPage(!0, e.boardName, t) || this.emit("op:url:insert",
              e.url, {
                title: e.title,
                sourceType: e.sourceType,
                pageName: t,
                boardName: e.boardName
              })
          }
        }, {
          key: "hasMediaOnPage",
          value: function (e, t, n) {
            var r = this.room.getPageWithFallback(t, n);
            return !(!r || !(r.hasMedia("audio") || r.hasMedia("video") || r
              .hasMedia("url"))) && (this.logger.warn(
              "[白板] 同一页白板中仅允许插入一个音视频或者一个H5页面"), e && (0, _toast.showToast)({
              msg: (0, _lang.getMsg)("onemedia"),
              type: "warn",
              time: 3,
              msgType: _constant2.default.ONE_MEDIA_LIMIT
            }), !0)
          }
        }, {
          key: "addAudio",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.addAudio", e), _validate2.default
              .validate(this.logger, "drawPlugin.addAudio", e, {
                url: {
                  type: "string",
                  isRequire: !0
                },
                sourceType: {
                  type: "string",
                  isRequire: !0
                },
                title: {
                  type: "string"
                }
              });
            var t = void 0 === e.pageName ? this.room.getPageNameFromIndex(e
              .boardName, e.pageIndex) : e.pageName;
            if (!this.hasMediaOnPage(!0, e.boardName, t)) {
              var n = e.sourceType.startsWith("audio/") ? e.sourceType :
                "audio/" + e.sourceType;
              this.emit("op:audio:insert", e.url, {
                title: e.title,
                sourceType: n,
                pageName: t,
                boardName: e.boardName,
                antiLeechProp: e.antiLeechProp
              })
            }
          }
        }, {
          key: "setPageBackground",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.setPageBackground", e), _validate2
              .default.validate(this.logger, "drawPlugin.setPageBackground", e, {
                url: {
                  type: "string",
                  isRequire: !0
                },
                width: {
                  type: "number",
                  isRequire: !0
                },
                height: {
                  type: "number",
                  isRequire: !0
                }
              });
            var t = this.room.getPageNameFromIndex(e.boardName, e.pageIndex);
            this.emit("op:background:imageUpload", e.url, {
              width: e.width,
              height: e.height,
              pageName: t,
              boardName: e.boardName,
              antiLeechProp: e.antiLeechProp
            })
          }
        }, {
          key: "hasBackground",
          value: function (e) {
            return (e = e || this.room.currBoard.currPage).backgroundSnapshot ||
              null !== e.getAnimPageIndex()
          }
        }, {
          key: "hasTransDoc",
          value: function () {
            return void 0 !== this.room.currBoard.transDocSnapshot
          }
        }, {
          key: "hasDoc",
          value: function (e) {
            return (e = e || this.room.currBoard).hasDoc
          }
        }, {
          key: "addTransDoc",
          value: function (e) {
            if (this.logger.log("[wb]", "drawPlugin.addTransDoc", e), this
              .appConfig.uniqueDocName && this.getBoardInfos().boardDisplayNames
              .indexOf(e.docName) > -1) return this.logger.error("[wb]",
              "drawPlugin.addTransDoc", "已存在同名文档 " + e.docName + ".");
            var t = e.docName + "_" + (new Date).valueOf(),
              n = (0, _assign2.default)({}, e, {
                displayName: e.docName,
                boardName: t
              });
            return this.emit("op:transDoc:add", n), t
          }
        }, {
          key: "addDoc",
          value: function (e) {
            return this.logger.log("[wb]", "drawPlugin.addDoc", e), this.appConfig
              .uniqueDocName && this.getBoardInfos().boardDisplayNames.indexOf(e
                .docName) > -1 ? this.logger.error("[wb]", "drawPlugin.addDoc",
                "已存在同名文档 " + e.docName + ".") : Array.isArray(e.params) ? this
              ._addDocByUrlArray(e) : this._addDocByUrlTemplate(e)
          }
        }, {
          key: "_addDocByUrlArray",
          value: function (e) {
            _validate2.default.validate(this.logger, "drawPlugin.addDoc", e, {
              docName: {
                type: "string",
                isRequire: !0
              },
              params: {
                type: "array",
                isRequire: !0
              }
            });
            for (var t = 0; t < e.params.length; t++) _validate2.default.validate(
              this.logger, "drawPlugin.addDoc opt.params[" + t + "]", e.params[
                t], {
                url: {
                  type: "string",
                  isRequire: !0
                },
                width: {
                  type: "number",
                  isRequire: !0
                },
                height: {
                  type: "number",
                  isRequire: !0
                }
              });
            if (0 === e.params.length) throw new Error(
              "addDoc参数中params的数组长度必须大于0");
            for (var n = e.docName, r = e.params, a = this.addBoard(n, r.length),
                i = 0; i < r.length; i++) this.setPageBackground({
              url: r[i].url,
              width: r[i].width,
              height: r[i].height,
              pageIndex: i,
              boardName: a
            });
            return a
          }
        }, {
          key: "_addDocByUrlTemplate",
          value: function (e) {
            if (_validate2.default.validate(this.logger, "drawPlugin.addDoc", e, {
                docName: {
                  type: "string",
                  isRequire: !0
                }
              }), _validate2.default.validate(this.logger,
                "drawPlugin.addDoc opt.params", e.params, {
                  template: {
                    type: "string",
                    isRequire: !0
                  },
                  width: {
                    type: "number",
                    isRequire: !0
                  },
                  height: {
                    type: "number",
                    isRequire: !0
                  },
                  pageCount: {
                    type: "number",
                    isRequire: !0
                  },
                  offset: {
                    type: "number",
                    isRequire: !0
                  }
                }), e.params.pageCount <= 0) throw new Error(
              "addDoc参数中params.pageCount必须大于0");
            var t = e.docName,
              n = e.params,
              r = t + "_" + (new Date).valueOf();
            return this.emit("op:board:add", t, r, n.pageCount, {
              width: e.params.width,
              height: e.params.height,
              template: e.params.template,
              offset: e.params.offset,
              backupResultUrls: e.params.backupResultUrls
            }), r
          }
        }, {
          key: "setCustomBackground",
          value: function setCustomBackground(coordinate, customFn, bgName) {
            if ("string" == typeof customFn) try {
              customFn = eval(customFn)
            } catch (e) {
              return void this.logger.error(
                "setCustomBackground的参数应该为函数，或者函数的字符串表达", e)
            }
            "function" == typeof customFn && "world" === coordinate ? (this
                .bgRenderWorld = customFn, this.bgRenderContainer = void 0, this
                .bgRenderName = bgName) : "function" == typeof customFn &&
              "container" === coordinate ? (this.bgRenderWorld = void 0, this
                .bgRenderContainer = customFn, this.bgRenderName = bgName) : this
              .logger.error("setCustomBackground第一个参数为函数，第二个参数为world或者container"),
              this.room.refresh()
          }
        }, {
          key: "unsetCustomBackground",
          value: function () {
            this.bgRenderContainer = void 0, this.bgRenderWorld = void 0, this
              .bgRenderName = void 0, this.room.refresh()
          }
        }, {
          key: "getBgRendererName",
          value: function () {
            return this.bgRenderName
          }
        }, {
          key: "setTool",
          value: function (e, t) {
            this.emit("op:activate", e, t)
          }
        }, {
          key: "setFontFamilies",
          value: function (e) {
            Array.isArray(e) && 0 !== e.length || this.logger.error(
              "[wb] drawPlugin.setFontFamilies: arguments must be a non empty array"
              ), this.textConfig.setFontFamilies(e)
          }
        }, {
          key: "getFontFamilies",
          value: function () {
            return this.textConfig.getFontFamilies()
          }
        }, {
          key: "setFontFamily",
          value: function () {}
        }, {
          key: "setColor",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.setColor", e), this
              .setStrokeColor("link", e), this.setStrokeColor("pen", e), this
              .setStrokeColor("shape", e)
          }
        }, {
          key: "setStrokeColor",
          value: function (e, t) {
            if (this.logger.log("[wb]", "drawPlugin.setStrokeColor", e, t), -1 ===
              ["link", "shape", "pen"].indexOf(e)) return this.logger.error(
              "[wb] drawPlugin.setStrokeColor: argument type must be one of link, shape or pen"
              );
            "link" === e ? _drawConfig2.default.linkDef.stroke = t : "shape" ===
              e ? _drawConfig2.default.shapeDef.stroke = t : "pen" === e && (
                _drawConfig2.default.penDef.stroke = t), _drawConfig2.default
              .notify(this)
          }
        }, {
          key: "setStrokeWidth",
          value: function (e, t) {
            if (this.logger.log("[wb]", "drawPlugin.setStrokeWidth", e, t), -1 ===
              ["link", "shape", "pen"].indexOf(e)) return this.logger.error(
              "[wb] drawPlugin.setStrokeWidth: type must be one of link, shape or pen"
              );
            "link" === e ? _drawConfig2.default.linkDef.lineWidth = t :
              "shape" === e ? _drawConfig2.default.shapeDef.lineWidth = t :
              "pen" === e && (_drawConfig2.default.penDef.lineWidth = t),
              _drawConfig2.default.notify(this)
          }
        }, {
          key: "setStrokeCursor",
          value: function (e, t) {
            if (this.logger.log("[wb]", "drawPlugin.setStrokeCursor", e, t), -
              1 === ["shape", "pen"].indexOf(e)) return this.logger.error(
              "[wb] drawPlugin.setStrokeCursor: type must be one of shape or pen"
              );
            "shape" === e ? _drawConfig2.default.shapeDef.cursorImgUrl = t :
              "pen" === e && (_drawConfig2.default.penDef.cursorImgUrl = t),
              _drawConfig2.default.notify(this)
          }
        }, {
          key: "setOpacity",
          value: function () {}
        }, {
          key: "setShowCursor",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.setShowCursor", e), this
              .showCursor = e
          }
        }, {
          key: "enableDraw",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.enableDraw", e), _validate2
              .default.validate(this.logger, "drawPlugin.enableDraw", {
                editEnabled: e
              }, {
                editEnabled: {
                  type: "boolean",
                  isRequire: !0
                }
              }), this.editEnabled !== e && (e || (document.body.style.cursor =
                  "auto"), this.editEnabled = e, this.opsManager.hooks
                .enableDrawChange.call(e), this.emit("event:editable:change", this
                  .editable))
          }
        }, {
          key: "enableCameraTransform",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0];
            this.logger.log("[wb]", "drawPlugin.enableCameraTransform", e), this
              .setAppConfig({
                cameraTransformEnabled: e
              })
          }
        }, {
          key: "resetCamera",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0];
            this.logger.log("[wb]", "drawPlugin.resetCamera"), "follower" === this
              .vision.mode ? (0, _toast.showToast)({
                msg: (0, _lang.getMsg)("follow"),
                type: "info",
                msgType: _constant2.default
                  .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
                args: {
                  broadcasterName: this.vision.broadcasterName,
                  broadcaster: this.vision.broadcaster
                }
              }) : this.emit("op:reset-camera:exec", e)
          }
        }, {
          key: "setCameraBound",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[
              1];
            this.logger.log("[wb]", "drawPlugin.setCameraBound boundary: ", (0,
              _stringify2.default)(e), "animate: ", t);
            var n = _validate2.default.validate(this.logger,
              "drawPlugin.setCameraBound", e, {
                centerX: {
                  type: "number",
                  isRequire: !0
                },
                centerY: {
                  type: "number",
                  isRequire: !0
                },
                width: {
                  type: "number",
                  isRequire: !0
                },
                height: {
                  type: "number",
                  isRequire: !0
                }
              });
            n && this.emit("op:camera-bound:send", e, t)
          }
        }, {
          key: "fitToContent",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0];
            "follower" === this.vision.mode ? (0, _toast.showToast)({
              msg: (0, _lang.getMsg)("follow"),
              type: "info",
              msgType: _constant2.default
                .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
              args: {
                broadcasterName: this.vision.broadcasterName,
                broadcaster: this.vision.broadcaster
              }
            }) : this.emit("op:fit-to-content:exec", e)
          }
        }, {
          key: "fitToDoc",
          value: function () {
            var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
              arguments[0];
            this.logger.log("[wb]", "drawPlugin.fitToDoc"), "follower" === this
              .vision.mode ? (0, _toast.showToast)({
                msg: (0, _lang.getMsg)("follow"),
                type: "info",
                msgType: _constant2.default
                  .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
                args: {
                  broadcasterName: this.vision.broadcasterName,
                  broadcaster: this.vision.broadcaster
                }
              }) : this.emit("op:fit-to-doc:exec", e)
          }
        }, {
          key: "zoomIn",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.zoomIn"), "follower" === this
              .vision.mode ? (0, _toast.showToast)({
                msg: (0, _lang.getMsg)("follow"),
                type: "info",
                msgType: _constant2.default
                  .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
                args: {
                  broadcasterName: this.vision.broadcasterName,
                  broadcaster: this.vision.broadcaster
                }
              }) : this.emit("op:zoom:in")
          }
        }, {
          key: "zoomOut",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.zoomOut"), "follower" === this
              .vision.mode ? (0, _toast.showToast)({
                msg: (0, _lang.getMsg)("follow"),
                type: "info",
                msgType: _constant2.default
                  .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
                args: {
                  broadcasterName: this.vision.broadcasterName,
                  broadcaster: this.vision.broadcaster
                }
              }) : this.emit("op:zoom:out")
          }
        }, {
          key: "zoomTo",
          value: function (e) {
            var t = !(arguments.length > 1 && void 0 !== arguments[1]) ||
              arguments[1];
            this.logger.log("[wb]", "drawPlugin.zoomTo: ", e, " animate: ", t),
              "follower" === this.vision.mode ? (0, _toast.showToast)({
                msg: (0, _lang.getMsg)("follow"),
                type: "info",
                msgType: _constant2.default
                  .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
                args: {
                  broadcasterName: this.vision.broadcasterName,
                  broadcaster: this.vision.broadcaster
                }
              }) : this.emit("op:zoom:to", e, t)
          }
        }, {
          key: "lockCameraWithContent",
          value: function (e) {
            this.camera.lockCameraWithContent(e)
          }
        }, {
          key: "unlockCameraWithContent",
          value: function () {
            this.camera.unlockCameraWithContent()
          }
        }, {
          key: "rotateElement",
          value: function (e) {
            _validate2.default.validate(this.logger, "drawPlugin.rotateElement",
                e, {
                  id: {
                    type: "string",
                    isRequire: !0
                  },
                  angle: {
                    type: "number",
                    isRequire: !0
                  }
                }), this.logger.log("[wb]", "drawPlugin.rotateElement"), this
              .emit("op:rotate:ele", e.id, e.angle)
          }
        }, {
          key: "setElementsVisibility",
          value: function (e) {
            return this.logger.log("[wb]", "drawPlugin.setElementsVisibility", e),
              e && "object" === (void 0 === e ? "undefined" : (0, _typeof3
                .default)(e)) ? void 0 === e.ids || Array.isArray(e.ids) && 0 !==
              e.ids.length ? "boolean" != typeof e.visible ? this.logger.error(
                "[wb]drawPlugin.setElementsVisibility参数opt.visible必须为布尔值，实际参数为: ",
                e) : void this.emit("op:visible:eles", e.ids, e.visible) : this
              .logger.error(
                "[wb]drawPlugin.setElementsVisibility参数opt.ids必须为undefined或者为长度大于1的数组，实际参数为: ",
                e) : this.logger.error(
                "[wb]drawPlugin.setElementsVisibility必须提供如下参数类型opt: {ids: string[] | undefined, visible: boolean}，实际参数为: ",
                e)
          }
        }, {
          key: "undo",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.undo"), this.emit("op:undo:exec")
          }
        }, {
          key: "redo",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.redo"), this.emit("op:redo:exec")
          }
        }, {
          key: "clear",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.clear"), this.emit(
              "op:clear:exec")
          }
        }, {
          key: "duplicate",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.duplicate"), this.emit(
              "op:duplicate:exec")
          }
        }, {
          key: "deleteSelectedElements",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.deleteSelectedElements"), this
              .emit("op:delete:exec")
          }
        }, {
          key: "deleteElementByOpIds",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.deleteElementByOpIds", e), this
              .emit("op:delete:deleteOps", e)
          }
        }, {
          key: "addPage",
          value: function (e) {
            "object" === (void 0 === e ? "undefined" : (0, _typeof3.default)(e)) ?
            this.logger.log("[wb]", "drawPlugin.addPage", (0, _stringify2.default)
              (e)): this.logger.log("[wb]", "drawPlugin.addPage, insertAfter",
              e), "number" == typeof e ? e = {
              insertAfter: e
            } : e || (e = {}), this.emit("op:page:add", e)
          }
        }, {
          key: "deletePage",
          value: function (e) {
            var t = this.room.currBoard.getPageBuiltInIndex(e);
            this.logger.log("[wb]", "drawPlugin.deletePage: ", e, "builtInIndex",
              t), this.emit("op:page:delete", t)
          }
        }, {
          key: "gotoPage",
          value: function (e) {
            var t = this.room.currBoard.getPageBuiltInIndex(e);
            this.logger.log("[wb]", "drawPlugin.gotoPage: ", e, "buildInIndex",
              t), isNaN(t) ? this.logger.error("[wb] drawPlugin.gotoPage: page " +
                (e + 1) + " is not found，current page length is: " + this.room
                .currBoard.pageNames.length) : this.emit("op:page:goto", t)
          }
        }, {
          key: "gotoFirstPage",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.gotoFirstPage"), this.room
              .currBoard.getCurrPageIndex() > 0 && this.gotoPage(0)
          }
        }, {
          key: "gotoPrevPage",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.gotoPrevPage");
            var e = this.room.currBoard.getCurrPageIndex();
            e > 0 && this.gotoPage(e - 1)
          }
        }, {
          key: "gotoNextPage",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.gotoNextPage");
            var e = this.room.currBoard,
              t = e.getCurrPageIndex();
            t < e.pageNames.length - 1 && this.gotoPage(t + 1)
          }
        }, {
          key: "gotoLastPage",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.gotoLastPage");
            var e = this.room.currBoard;
            e.getCurrPageIndex() < e.pageNames.length - 1 && this.gotoPage(e
              .pageNames.length - 1)
          }
        }, {
          key: "gotoAnim",
          value: function (e) {
            if (!this.hasTransDoc()) return this.logger.error(
              "[wb] drawPlugin.gotoAnim: current board is not ppt board");
            this.logger.log("[wb]drawPlugin.gotoAnim", e), this.emit(
              "op:transDoc:gotoAnim", e)
          }
        }, {
          key: "nextAnim",
          value: function () {
            this.logger.log("[wb]drawPlugin.nextAnim"), this.emit(
              "op:transDoc:nextAnim")
          }
        }, {
          key: "prevAnim",
          value: function () {
            this.logger.log("[wb]drawPlugin.prevAnim"), this.emit(
              "op:transDoc:prevAnim")
          }
        }, {
          key: "gotoBoard",
          value: function (e) {
            _validate2.default.validate(this.logger, "drawPlugin.gotoBoard", {
              boardName: e
            }, {
              boardName: {
                type: "string",
                isRequire: !0
              }
            }), this.logger.log("[wb]", "drawPlugin.gotoBoard:", e), this.emit(
              "op:board:goto", e)
          }
        }, {
          key: "addBoard",
          value: function (e, t) {
            if (this.logger.log("[wb]", "drawPlugin.addBoard, displayName:", e,
                " pageCount:", t), this.appConfig.uniqueDocName && this
              .getBoardInfos().boardDisplayNames.indexOf(e) > -1) return this
              .logger.error("[wb]", "drawPlugin.addBoard", "已存在同名文档 " + e + ".");
            _validate2.default.validate(this.logger, "drawPlugin.addBoard", {
              displayName: e
            }, {
              displayName: {
                type: "string",
                isRequire: !0
              }
            });
            var n = e + "_" + (new Date).valueOf();
            return this.emit("op:board:add", e, n, t), n
          }
        }, {
          key: "deleteBoard",
          value: function (e) {
            _validate2.default.validate(this.logger, "drawPlugin.deleteBoard", {
                boardName: e
              }, {
                boardName: {
                  type: "string",
                  isRequire: !0
                }
              }), this.logger.log("[wb]", "drawPlugin.deleteBoard: ", e), this
              .emit("op:board:delete", e)
          }
        }, {
          key: "getAnimInfos",
          value: function () {
            var e = this.opsManager.opMap.transDoc.getPluginOfCurrBoard();
            if (e) {
              var t = e.data;
              return t && null !== t.animPageIndex ? {
                pageIndex: e.data.animPageIndex,
                animIndex: e.data.animIndex,
                animState: e.data.animState
              } : null
            }
            return null
          }
        }, {
          key: "getPageInfos",
          value: function (e) {
            var t = e ? this.room.boards[e] : this.room.currBoard;
            return {
              pageNames: (t = t || this.room.currBoard).pageNames.slice(),
              currPage: t.currIndex,
              activeIndex: t.getCurrPageIndex(),
              pagePayloads: t.payloadOfPages
            }
          }
        }, {
          key: "getBoardInfos",
          value: function () {
            return {
              boardNames: (0, _keys2.default)(this.room.boards),
              currBoard: this.room.currIndex,
              currBoardDisplayName: this.room.currBoard.displayName,
              boardDisplayNames: this.room.getBoardDisplayNames()
            }
          }
        }, {
          key: "bindPreviewContainer",
          value: function (e) {
            var t;
            null === (t = this.previewFactory) || void 0 === t || t
              .bindPreviewContainer(e)
          }
        }, {
          key: "preparePreview",
          value: function (e, t) {
            var n;
            null === (n = this.previewFactory) || void 0 === n || n
              .preparePreview(e, t)
          }
        }, {
          key: "emit",
          value: function (e) {
            for (var t, n = arguments.length, r = Array(n > 1 ? n - 1 : 0), a =
              1; a < n; a++) r[a - 1] = arguments[a];
            (t = this.dispatcher).emit.apply(t, [e].concat(r))
          }
        }, {
          key: "on",
          value: function (e, t) {
            this.dispatcher.on(e, t)
          }
        }, {
          key: "off",
          value: function (e, t) {
            this.dispatcher.off(e, t)
          }
        }, {
          key: "once",
          value: function (e, t) {
            this.dispatcher.once(e, t)
          }
        }, {
          key: "getOpDoc",
          value: function (e) {
            return this.opsManager.getOpDoc(e)
          }
        }, {
          key: "getCurrTool",
          value: function () {
            var e;
            return null === (e = this.opsManager.currOp) || void 0 === e ?
              void 0 : e.type
          }
        }, {
          key: "destroy",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.destroy"), this.emit(
                "event:destroy"), this.dispatcher.destroy(), this.container
              .destroy(), this.opsManager.destroy(), this.dataHub.destroy(), this
              .vision.destroy(), this.aliveManager.destroy(), this.shapeSelector
              .destroy(), this.resourceCache.destroy(), this.visHandlerUnregist(),
              this.pageVisible = !1, this.stopStream(), this.toolCollection &&
              "function" == typeof this.toolCollection.destroy && this
              .toolCollection.destroy(), this.player && this.player.destroy(),
              this.room.destroy(), this.stopWorker(), this.timeWorker = void 0,
              document.body.style.cursor = "auto", this.setIsConnected(!1), this
              .destroyed = !0
          }
        }, {
          key: "addRecordData",
          value: function (e) {
            var t;
            null === (t = this.player) || void 0 === t || t.addRecordData(e)
          }
        }, {
          key: "seekTo",
          value: function (e) {
            var t;
            null === (t = this.player) || void 0 === t || t.seekTo(e)
          }
        }, {
          key: "play",
          value: function () {
            var e;
            null === (e = this.player) || void 0 === e || e.play()
          }
        }, {
          key: "pause",
          value: function () {
            var e;
            null === (e = this.player) || void 0 === e || e.pause()
          }
        }, {
          key: "setPlaySpeed",
          value: function (e) {
            var t;
            null === (t = this.player) || void 0 === t || t.setPlaySpeed(e)
          }
        }, {
          key: "setViewer",
          value: function (e) {
            var t;
            null === (t = this.player) || void 0 === t || t.setViewer(e)
          }
        }, {
          key: "setSelfAsBroadcaster",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.setSelfAsBroadcaster"), this
              .vision.setSelfAsBroadcaster()
          }
        }, {
          key: "unsetSelfAsBroadcaster",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.unsetSelfAsBroadcaster"), this
              .vision.unsetSelfAsBroadcaster()
          }
        }, {
          key: "setSelfAsFollower",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.setSelfAsFollower"), this.vision
              .setSelfAsFollower()
          }
        }, {
          key: "setSelfAsFreeObserver",
          value: function () {
            this.logger.log("[wb]", "drawPlugin.setSelfAsFreeObserver"), this
              .vision.setSelfAsFreeObserver()
          }
        }, {
          key: "exportBoardAsStr",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {},
              t = arguments[1];
            return __awaiter(this, void 0, void 0, _regenerator2.default.mark((
              function n() {
                var r, a, i, A, o, s, u, l, c, d, h, p, f, g, y, v, m =
                this;
                return _regenerator2.default.wrap((function (n) {
                  for (;;) switch (n.prev = n.next) {
                    case 0:
                      return _validate2.default.validate(this
                        .logger, "drawPlugin.exportBoardAsStr",
                        e, {
                          type: {
                            type: "string"
                          },
                          quality: {
                            type: "number"
                          },
                          content: {
                            type: "string",
                            enum: ["clip", "fitToDoc",
                              "fitToContent"
                            ]
                          },
                          omitSelection: {
                            type: "boolean"
                          },
                          customBg: {
                            type: "boolean"
                          },
                          boardName: {
                            type: "string"
                          },
                          resWait: {
                            type: "number"
                          }
                        }), _validate2.default.validate(this
                        .logger, "drawPlugin.exportBoardAsStr",
                        t, {
                          onComplete: {
                            type: "function",
                            isRequire: !0
                          },
                          onResourceProgress: {
                            type: "function"
                          },
                          onImgProgress: {
                            type: "function"
                          },
                          onError: {
                            type: "function"
                          }
                        }), n.prev = 2, n.next = 5, (0, _delay
                        .delay)(50);
                    case 5:
                      for (r = this.room.currIndex, e.boardName && (
                          r = e.boardName), a = this.room.boards[r],
                        i = "number" != typeof e.resWait || isNaN(e
                          .resWait) ? 24e4 : e.resWait, i = Math
                        .max(i, 3e3), A = this.getPageInfos(r),
                        o = [], s = 0; s < A.pageNames.length; s++)(
                          u = this.room.getPage(r, A.pageNames[s])
                          ) && o.push(u);
                      return l = 0, c = o.map((function (e) {
                          return __awaiter(m, void 0, void 0,
                            _regenerator2.default.mark((
                              function n() {
                                return _regenerator2.default
                                  .wrap((function (n) {
                                    for (;;) switch (n
                                      .prev = n.next
                                      ) {
                                      case 0:
                                        return n
                                          .next = 2, e
                                          .waitTilReady();
                                      case 2:
                                        l += 1,
                                          "function" ==
                                          typeof t
                                          .onResourceProgress &&
                                          a && !a
                                          .transDocSnapshot &&
                                          t
                                          .onResourceProgress(
                                            l / o
                                            .length);
                                      case 4:
                                      case "end":
                                        return n
                                        .stop()
                                    }
                                  }), n, this)
                              })))
                        })), a && c.push(a.waitTilReady()), n.next =
                        18, _promise2.default.race([_promise2
                          .default.all(c), (0, _delay.delay)(i)
                        ]);
                    case 18:
                      return "function" == typeof t
                        .onResourceProgress && t.onResourceProgress(
                          1), n.next = 21, (0, _delay.delay)(20);
                    case 21:
                      d = [], h = [], p = [], f = 0, g = 0, y = 0;
                    case 27:
                      if (!(y < A.pageNames.length)) {
                        n.next = 36;
                        break
                      }
                      return v = this.exportAsBase64String((0,
                          _assign2.default)((0, _assign2.default)
                      ({}, e), {
                          pageIndex: y,
                          exportBoard: !0
                        })), "function" == typeof t.onImgProgress &&
                        t.onImgProgress((y + 1) / A.pageNames
                          .length), n.next = 32, (0, _delay.delay)(
                          20);
                    case 32:
                      null === v ? h.push(y) : (d.push(v.content), p
                        .push({
                          w: v.width,
                          h: v.height
                        }), f = Math.max(f, v.width), g = Math
                        .max(g, v.height));
                    case 33:
                      y++, n.next = 27;
                      break;
                    case 36:
                      t.onComplete({
                        contents: d,
                        nullPages: h,
                        maxW: f,
                        maxH: g,
                        sizes: p
                      }), n.next = 43;
                      break;
                    case 39:
                      n.prev = 39, n.t0 = n.catch(2), this.logger
                        .error("exportBoardAsStr error", n.t0),
                        "function" == typeof t.onError && t.onError(
                          n.t0);
                    case 43:
                    case "end":
                      return n.stop()
                  }
                }), n, this, [
                  [2, 39]
                ])
              })))
          }
        }, {
          key: "exportAsImage",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.exportAsImage", e);
            var t = null == e ? void 0 : e.type,
              n = this.exportAsBase64String(e);
            if (null !== n) {
              var r = document.createElement("a");
              r.href = n.content;
              var a = t && -1 !== t.toLowerCase().indexOf("jpeg") ? "jpeg" :
              "png";
              r.download = "whiteboard." + a, r.click()
            } else this.logger.error("[wb]", "drawPlugin.exportAsImage get null")
          }
        }, {
          key: "exportAsBase64String",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : {};
            this.logger.log("[wb]", "drawPlugin.exportAsBase64String", e),
              _validate2.default.validate(this.logger,
                "drawPlugin.exportAsBase64String", e, {
                  type: {
                    type: "string"
                  },
                  quality: {
                    type: "number"
                  },
                  content: {
                    type: "string",
                    enum: ["clip", "fitToDoc", "fitToContent", "region"]
                  },
                  omitSelection: {
                    type: "boolean"
                  },
                  customBg: {
                    type: "boolean"
                  },
                  boardName: {
                    type: "string"
                  },
                  pageIndex: {
                    type: "number"
                  }
                }), "region" === e.content && (e.regionParam && e.regionParam
                .cameraBound && e.regionParam.size || this.logger.error("[wb]",
                  "drawPlugin.exportAsBase64String",
                  "cameraBound and size is required when content equals region"));
            var t = e.type ? e.type : "image/png",
              n = e.content ? e.content : "fitToContent",
              r = "number" != typeof e.quality || isNaN(e.quality) ? .92 : e
              .quality,
              a = void 0 === e.omitSelection || e.omitSelection,
              i = void 0 === e.customBg || e.customBg,
              A = void 0 === e.boardName ? this.room.currIndex : e.boardName,
              o = this.room.currBoard.currIndex.toString();
            if (void 0 !== e.pageIndex) {
              var s = this.room.getPageNameFromIndex(A, e.pageIndex);
              void 0 === s ? this.logger.warn("[wb]",
                "drawPlugin.exportAsBase64String could not find board: " + A +
                ", pageIndex: " + e.pageIndex) : o = s
            }
            t && !t.startsWith("image") && (t = "image/" + t);
            var u = this.previewFactory.generatePreviewToDataUrl({
              pageIndex: o,
              boardName: A,
              state: "ready",
              content: n,
              omitSelection: a,
              customBg: i,
              regionParam: e.regionParam,
              exportBoard: e.exportBoard
            }, t, r);
            return u
          }
        }, {
          key: "setMemberList",
          value: function (e) {
            this.emit("event:member:change", e.slice())
          }
        }, {
          key: "dataReportUtil",
          value: function (e, t) {
            this.dataReportUrl && this.dataReportParams && !this.isRecordPlayer &&
              ("v3_run_error" === e ? t.error && !this.reportedError.has(t.error
                .message) && ((0, _dataReport2.default)(this.dataReportUrl, e,
                this.sessionId, (0, _assign2.default)((0, _assign2.default)((
                  0, _assign2.default)({}, this.dataReportParams), {
                  time: Date.now()
                }), t)), this.reportedError.add(t.error.message)) : (0,
                _dataReport2.default)(this.dataReportUrl, e, this.sessionId, (0,
                _assign2.default)((0, _assign2.default)((0, _assign2.default)
            ({}, this.dataReportParams), {
                time: Date.now()
              }), t)))
          }
        }, {
          key: "setDataReportParams",
          value: function (e, t) {
            this.dataReportUrl = e, this.dataReportParams = t
          }
        }, {
          key: "setToolCollection",
          value: function (e) {
            this.toolCollection && "function" == typeof this.toolCollection
              .destroy && this.toolCollection.destroy(), this.toolCollection = e
          }
        }, {
          key: "disableInteraction",
          value: function () {
            this.container.disableInteraction()
          }
        }, {
          key: "enableInteraction",
          value: function () {
            this.container.enableInteraction()
          }
        }, {
          key: "definePlugin",
          value: function (e) {
            "page" === e.type && this.opsManager.opMap.pagePlugin.definePlugin(e)
          }
        }, {
          key: "insertPlugin",
          value: function (e) {
            this.logger.log("[wb]", "drawPlugin.insertPlugin", e), _validate2
              .default.validate(this.logger, "drawPlugin.insertPlugin", e, {
                pluginType: {
                  type: "string",
                  isRequire: !0
                },
                cameraBound: {
                  type: "object"
                }
              });
            var t = void 0 === e.pageName ? this.room.getPageNameFromIndex(e
              .boardName, e.pageIndex) : e.pageName;
            this.emit("op:pagePlugin:insert", (0, _assign2.default)((0, _assign2
              .default)({}, e), {
              pageName: t,
              boardName: e.boardName
            }))
          }
        }, {
          key: "downloadRes",
          value: function (e) {
            var t = this.opsManager.drawOpsOfPage[e];
            if (t)
              if ("image" !== t.data.type) this.logger.error("[wb]",
                "drawPlugin.downloadRes element: " + e +
                " is not image, it is $" + t.data.type);
              else {
                var n = this.previewFactory.generateElesToDataUrl([e]);
                if (n) {
                  var r = document.createElement("a");
                  r.href = n;
                  r.download = "image.png", r.click()
                } else(0, _toast.showToast)({
                  type: "error",
                  msg: (0, _lang.getMsg)("imgDownFail")
                })
              }
            else this.logger.error("[wb]",
              "drawPlugin.downloadRes could not find element: " + e)
          }
        }, {
          key: "copySelectedElesToClipboard",
          value: function () {
            var e = this.previewFactory.generateElesToDataUrl(this.opsManager
              .selectOp.selectedOpIds);
            e ? (0, _util2.copyImgToClipBoard)(e, (function (t) {
              if (t)(0, _toast.showToast)({
                type: "success",
                msg: (0, _lang.getMsg)("cpyClipSucc")
              });
              else {
                var n = document.createElement("a");
                n.href = e;
                n.download = "image.png", n.click()
              }
            })) : (0, _toast.showToast)({
              type: "error",
              msg: (0, _lang.getMsg)("cpyClipFail")
            })
          }
        }, {
          key: "ifDeviceSupportOrientation",
          get: function () {
            return -1 !== _types.TouchPlatformArray.indexOf(this.platform
              .toLowerCase())
          }
        }, {
          key: "editable",
          get: function () {
            return this.editEnabled && !this.dataHub.isSynchronizing && this
              .isConnected
          }
        }, {
          key: "appConfig",
          get: function () {
            return this.configInstance.getAppConfig()
          }
        }, {
          key: "scale",
          get: function () {
            return this.camera.scale || 1
          }
        }, {
          key: "ShapeDesc",
          get: function () {
            return this.shapeManager.ShapeDesc
          }
        }]), App
      }(),
      DrawPlugin = {
        getInstance: function (e) {
          return e.logger.log("[wb]", "DrawPlugin.getInstance arguments:", e),
            _validate2.default.validate(e.logger, "DrawPlugin.instance", e, {
              account: {
                type: "string",
                isRequire: !0
              },
              nickname: {
                type: "string",
                isRequire: !1
              },
              container: {
                type: "dom",
                isRequire: !1
              },
              platform: {
                type: "string",
                isRequire: !0,
                enum: _types.PlatformArray
              },
              connector: {
                type: "object",
                isRequire: !0
              },
              nim: {
                type: "object",
                isRequire: !0
              }
            }), new App(e)
        }
      };
    exports.App = App, exports.default = DrawPlugin
  }, function (e, t, n) {
    var r = function () {
        return this
      }() || Function("return this")(),
      a = r.regeneratorRuntime && Object.getOwnPropertyNames(r).indexOf(
        "regeneratorRuntime") >= 0,
      i = a && r.regeneratorRuntime;
    if (r.regeneratorRuntime = void 0, e.exports = n(274), a) r.regeneratorRuntime = i;
    else try {
      delete r.regeneratorRuntime
    } catch (e) {
      r.regeneratorRuntime = void 0
    }
  }, function (e, t) {
    ! function (t) {
      "use strict";
      var n = Object.prototype,
        r = n.hasOwnProperty,
        a = "function" == typeof Symbol ? Symbol : {},
        i = a.iterator || "@@iterator",
        A = a.asyncIterator || "@@asyncIterator",
        o = a.toStringTag || "@@toStringTag",
        s = "object" == typeof e,
        u = t.regeneratorRuntime;
      if (u) s && (e.exports = u);
      else {
        (u = t.regeneratorRuntime = s ? e.exports : {}).wrap = f;
        var l = {},
          c = {};
        c[i] = function () {
          return this
        };
        var d = Object.getPrototypeOf,
          h = d && d(d(b([])));
        h && h !== n && r.call(h, i) && (c = h);
        var p = m.prototype = y.prototype = Object.create(c);
        v.prototype = p.constructor = m, m.constructor = v, m[o] = v.displayName =
          "GeneratorFunction", u.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return !!t && (t === v || "GeneratorFunction" === (t.displayName || t.name))
          }, u.mark = function (e) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e, m) : (e.__proto__ = m,
              o in e || (e[o] = "GeneratorFunction")), e.prototype = Object.create(p), e
          }, u.awrap = function (e) {
            return {
              __await: e
            }
          }, w(B.prototype), B.prototype[A] = function () {
            return this
          }, u.AsyncIterator = B, u.async = function (e, t, n, r) {
            var a = new B(f(e, t, n, r));
            return u.isGeneratorFunction(t) ? a : a.next().then((function (e) {
              return e.done ? e.value : a.next()
            }))
          }, w(p), p[o] = "Generator", p[i] = function () {
            return this
          }, p.toString = function () {
            return "[object Generator]"
          }, u.keys = function (e) {
            var t = [];
            for (var n in e) t.push(n);
            return t.reverse(),
              function n() {
                for (; t.length;) {
                  var r = t.pop();
                  if (r in e) return n.value = r, n.done = !1, n
                }
                return n.done = !0, n
              }
          }, u.values = b, x.prototype = {
            constructor: x,
            reset: function (e) {
              if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this
                .done = !1, this.delegate = null, this.method = "next", this.arg =
                void 0, this.tryEntries.forEach(I), !e)
                for (var t in this) "t" === t.charAt(0) && r.call(this, t) && !isNaN(+t
                  .slice(1)) && (this[t] = void 0)
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0].completion;
              if ("throw" === e.type) throw e.arg;
              return this.rval
            },
            dispatchException: function (e) {
              if (this.done) throw e;
              var t = this;

              function n(n, r) {
                return A.type = "throw", A.arg = e, t.next = n, r && (t.method = "next",
                  t.arg = void 0), !!r
              }
              for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                var i = this.tryEntries[a],
                  A = i.completion;
                if ("root" === i.tryLoc) return n("end");
                if (i.tryLoc <= this.prev) {
                  var o = r.call(i, "catchLoc"),
                    s = r.call(i, "finallyLoc");
                  if (o && s) {
                    if (this.prev < i.catchLoc) return n(i.catchLoc, !0);
                    if (this.prev < i.finallyLoc) return n(i.finallyLoc)
                  } else if (o) {
                    if (this.prev < i.catchLoc) return n(i.catchLoc, !0)
                  } else {
                    if (!s) throw new Error("try statement without catch or finally");
                    if (this.prev < i.finallyLoc) return n(i.finallyLoc)
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                var a = this.tryEntries[n];
                if (a.tryLoc <= this.prev && r.call(a, "finallyLoc") && this.prev < a
                  .finallyLoc) {
                  var i = a;
                  break
                }
              }
              i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i
                .finallyLoc && (i = null);
              var A = i ? i.completion : {};
              return A.type = e, A.arg = t, i ? (this.method = "next", this.next = i
                .finallyLoc, l) : this.complete(A)
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return "break" === e.type || "continue" === e.type ? this.next = e.arg :
                "return" === e.type ? (this.rval = this.arg = e.arg, this.method =
                  "return", this.next = "end") : "normal" === e.type && t && (this
                  .next = t), l
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc),
                  I(n), l
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.tryLoc === e) {
                  var r = n.completion;
                  if ("throw" === r.type) {
                    var a = r.arg;
                    I(n)
                  }
                  return a
                }
              }
              throw new Error("illegal catch attempt")
            },
            delegateYield: function (e, t, n) {
              return this.delegate = {
                iterator: b(e),
                resultName: t,
                nextLoc: n
              }, "next" === this.method && (this.arg = void 0), l
            }
          }
      }

      function f(e, t, n, r) {
        var a = t && t.prototype instanceof y ? t : y,
          i = Object.create(a.prototype),
          A = new x(r || []);
        return i._invoke = function (e, t, n) {
          var r = "suspendedStart";
          return function (a, i) {
            if ("executing" === r) throw new Error("Generator is already running");
            if ("completed" === r) {
              if ("throw" === a) throw i;
              return k()
            }
            for (n.method = a, n.arg = i;;) {
              var A = n.delegate;
              if (A) {
                var o = M(A, n);
                if (o) {
                  if (o === l) continue;
                  return o
                }
              }
              if ("next" === n.method) n.sent = n._sent = n.arg;
              else if ("throw" === n.method) {
                if ("suspendedStart" === r) throw r = "completed", n.arg;
                n.dispatchException(n.arg)
              } else "return" === n.method && n.abrupt("return", n.arg);
              r = "executing";
              var s = g(e, t, n);
              if ("normal" === s.type) {
                if (r = n.done ? "completed" : "suspendedYield", s.arg === l)
              continue;
                return {
                  value: s.arg,
                  done: n.done
                }
              }
              "throw" === s.type && (r = "completed", n.method = "throw", n.arg = s
                .arg)
            }
          }
        }(e, n, A), i
      }

      function g(e, t, n) {
        try {
          return {
            type: "normal",
            arg: e.call(t, n)
          }
        } catch (e) {
          return {
            type: "throw",
            arg: e
          }
        }
      }

      function y() {}

      function v() {}

      function m() {}

      function w(e) {
        ["next", "throw", "return"].forEach((function (t) {
          e[t] = function (e) {
            return this._invoke(t, e)
          }
        }))
      }

      function B(e) {
        var t;
        this._invoke = function (n, a) {
          function i() {
            return new Promise((function (t, i) {
              ! function t(n, a, i, A) {
                var o = g(e[n], e, a);
                if ("throw" !== o.type) {
                  var s = o.arg,
                    u = s.value;
                  return u && "object" == typeof u && r.call(u, "__await") ?
                    Promise.resolve(u.__await).then((function (e) {
                      t("next", e, i, A)
                    }), (function (e) {
                      t("throw", e, i, A)
                    })) : Promise.resolve(u).then((function (e) {
                      s.value = e, i(s)
                    }), A)
                }
                A(o.arg)
              }(n, a, t, i)
            }))
          }
          return t = t ? t.then(i, i) : i()
        }
      }

      function M(e, t) {
        var n = e.iterator[t.method];
        if (void 0 === n) {
          if (t.delegate = null, "throw" === t.method) {
            if (e.iterator.return && (t.method = "return", t.arg = void 0, M(e, t),
                "throw" === t.method)) return l;
            t.method = "throw", t.arg = new TypeError(
              "The iterator does not provide a 'throw' method")
          }
          return l
        }
        var r = g(n, e.iterator, t.arg);
        if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate =
          null, l;
        var a = r.arg;
        return a ? a.done ? (t[e.resultName] = a.value, t.next = e.nextLoc, "return" !== t
          .method && (t.method = "next", t.arg = void 0), t.delegate = null, l) : a : (t
          .method = "throw", t.arg = new TypeError("iterator result is not an object"),
          t.delegate = null, l)
      }

      function C(e) {
        var t = {
          tryLoc: e[0]
        };
        1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]),
          this.tryEntries.push(t)
      }

      function I(e) {
        var t = e.completion || {};
        t.type = "normal", delete t.arg, e.completion = t
      }

      function x(e) {
        this.tryEntries = [{
          tryLoc: "root"
        }], e.forEach(C, this), this.reset(!0)
      }

      function b(e) {
        if (e) {
          var t = e[i];
          if (t) return t.call(e);
          if ("function" == typeof e.next) return e;
          if (!isNaN(e.length)) {
            var n = -1,
              a = function t() {
                for (; ++n < e.length;)
                  if (r.call(e, n)) return t.value = e[n], t.done = !1, t;
                return t.value = void 0, t.done = !0, t
              };
            return a.next = a
          }
        }
        return {
          next: k
        }
      }

      function k() {
        return {
          value: void 0,
          done: !0
        }
      }
    }(function () {
      return this
    }() || Function("return this")())
  }, function (e, t, n) {
    e.exports = {
      default: n(276),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(51), n(45), e.exports = n(277)
  }, function (e, t, n) {
    var r = n(73),
      a = n(18)("iterator"),
      i = n(50);
    e.exports = n(8).isIterable = function (e) {
      var t = Object(e);
      return void 0 !== t[a] || "@@iterator" in t || i.hasOwnProperty(r(t))
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.evenify = function (e) {
      return 2 * Math.ceil(e / 2)
    }, t.deltaXY = function (e, t) {
      return [(t[0] - e[0] + t[2] - e[2]) / 2, (t[1] - e[1] + t[3] - e[3]) / 2]
    }, t.fingerDiff = function (e, t) {
      return Math.abs(t[0] - e[0] - t[2] + e[2]) + Math.abs(t[1] - e[1] - t[3] + e[3])
    }, t.pinchScale = function (e, t) {
      var n = Math.abs(e[0] - e[2]) + Math.abs(e[1] - e[3]);
      return (Math.abs(t[0] - t[2]) + Math.abs(t[1] - t[3])) / n
    }, t.ptsCenter = function (e, t) {
      return [(e[0] + e[2] + t[0] + t[2]) / 4, (e[1] + e[3] + t[1] + t[3]) / 4]
    }, t.scaleProb = function (e, t, n) {
      var r = 0,
        a = [2.5, 6],
        i = 0,
        A = [.01, .05],
        o = e / t;
      if (isNaN(o)) return .5;
      r = o > a[1] ? 1 : o > a[0] ? Math.min(1, .5 + Math.sqrt((o - a[0]) / (a[1] - a[
        0])) / 2) : (1 - Math.sqrt((a[0] - o) / a[0])) / 2;
      i = n > A[1] ? 1 : n > A[0] ? Math.min(1, .5 + Math.sqrt((n - A[0]) / (A[1] - A[
        0])) / 2) : (1 - Math.sqrt((A[0] - n) / A[0])) / 2;
      return .7 * r + .3 * i
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = le(n(5)),
      a = le(n(21)),
      i = le(n(25)),
      A = le(n(0)),
      o = le(n(1)),
      s = le(n(42)),
      u = le(n(11)),
      l = n(46),
      c = n(280),
      d = le(n(294)),
      h = le(n(216)),
      p = le(n(226)),
      f = le(n(60)),
      g = le(n(303)),
      y = le(n(304)),
      v = le(n(305)),
      m = le(n(306)),
      w = le(n(307)),
      B = le(n(308)),
      M = le(n(309)),
      C = le(n(233)),
      I = le(n(234)),
      x = le(n(136)),
      b = le(n(310)),
      k = le(n(311)),
      T = le(n(312)),
      E = le(n(313)),
      D = le(n(314)),
      N = le(n(315)),
      P = le(n(316)),
      Q = le(n(317)),
      O = le(n(318)),
      _ = le(n(319)),
      S = le(n(320)),
      U = le(n(321)),
      F = le(n(322)),
      L = le(n(323)),
      j = le(n(325)),
      z = le(n(326)),
      R = le(n(327)),
      H = le(n(67)),
      Y = le(n(328)),
      W = le(n(329)),
      K = le(n(330)),
      G = le(n(344)),
      V = le(n(346)),
      Z = le(n(347)),
      X = le(n(348)),
      J = le(n(351)),
      q = n(15),
      $ = n(241),
      ee = le(n(353)),
      te = le(n(230)),
      ne = le(n(355)),
      re = le(n(356)),
      ae = le(n(357)),
      ie = le(n(358)),
      Ae = le(n(359)),
      oe = le(n(360)),
      se = le(n(361)),
      ue = le(n(362));

    function le(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var ce = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      de = new s.default,
      he = function () {
        function e(t) {
          var n = this;
          (0, A.default)(this, e), this.currOp = null, this.opMap = {}, this
            .drawOpTypes = [], this.shapeTypes = [], this.exitHandler = function () {
              if (n.selectOp.selectedOpIds.length > 0 && n.selectOp.dispatch(n.selectOp
                  .getSnapshot([]), !0), n.currOp === n.opMap.laser && n.currOp.dispatch(n
                  .currOp.getSnapshot(!1), !0), n.app.showCursor) {
                var e = n.opMap["mouse-pointer"];
                e && e.dispatch(e.getSnapshot([0, 0], !1), !0)
              }
            }, this.app = t, this.dispatcher = t.dispatcher, this.unregistExit = (0, $
              .regExitListener)(this.exitHandler, t), this.hooks = {
              scale: new c.SyncBailHook(["event", "scale", "clientX", "clientY"]),
              pan: new c.SyncBailHook(["event", "clientDx", "clientDy"]),
              mousedown: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              mouseup: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              mousemove: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              mouseleave: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              mousewheel: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              resize: new c.SyncBailHook(["event", "width", "height"]),
              click: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              dblClick: new c.SyncBailHook(["event", "mx", "my", "clientX", "clientY"]),
              keyup: new c.SyncBailHook(["event"]),
              keydown: new c.SyncBailHook(["event"]),
              opAdd: new c.SyncHook(["snapshot"]),
              refresh: new c.SyncHook([]),
              opChange: new c.SyncHook(["type"]),
              selectChange: new c.SyncHook(["prevSelectedOpIds", "selectedOpIds"]),
              pageChange: new c.SyncHook(["snapshot"]),
              boardChange: new c.SyncHook([]),
              pageReady: new c.SyncHook(["boardName, pageIndex"]),
              enableDrawChange: new c.SyncHook(["enable"]),
              previewWaiting: new c.SyncHook(["pageIndex"]),
              cleanNonCanvasEle: new c.SyncHook(["page"])
            }, this.dispatcher.on("op:activate", (function (e, t) {
              n.setCurrOp(e, t)
            }))
        }
        return (0, o.default)(e, [{
          key: "extendDefaultOps",
          value: function () {
            this.extendOp(ie.default), this.extendOp(re.default), this.extendOp(ne
                .default), this.extendOp(L.default), this.extendOp(J.default),
              this.extendDrawOp(h.default), this.extendDrawOp(D.default), this
              .extendDrawOp(N.default), this.extendDrawOp(p.default), this
              .extendShapeOp(ee.default), this.extendDrawOp(C.default), this
              .extendDrawOp(Y.default), this.extendDrawOp(W.default), this
              .extendDrawOp(I.default), this.extendOp(x.default), this.extendOp(Q
                .default), this.extendOp(d.default), this.extendOp(f.default),
              this.extendOp(te.default), this.extendOp(y.default), this.extendOp(g
                .default), this.extendOp(v.default), this.extendOp(E.default),
              this.extendOp(m.default), this.extendOp(w.default), this.extendOp(B
                .default), this.extendOp(M.default), this.extendOp(P.default),
              this.extendOp(b.default), this.extendOp(T.default), this.extendOp(X
                .default), this.extendOp(k.default), this.extendOp(K.default),
              this.extendOp(Z.default), this.extendOp(G.default), this.extendOp(_
                .default), this.extendOp(O.default), this.extendOp(S.default),
              this.extendOp(U.default), this.extendOp(F.default), this.extendOp(j
                .default), this.extendOp(H.default), this.extendOp(z.default),
              this.extendOp(R.default), this.extendOp(V.default), this.extendOp(ae
                .default), this.extendOp(Ae.default), this.extendOp(oe.default),
              this.extendOp(se.default), this.extendOp(ue.default), this
              .setCurrOp("pen-pressure")
          }
        }, {
          key: "addContainer",
          value: function (e) {
            this.container = e
          }
        }, {
          key: "extendDrawOp",
          value: function (e) {
            var t = this.extendOp(e);
            this.drawOpTypes.push(t.type)
          }
        }, {
          key: "extendShapeOp",
          value: function (e) {
            var t = this.extendOp(e);
            for (var n in this.drawOpTypes.push(t.type), this.app.ShapeDesc) this
              .shapeTypes.push(n)
          }
        }, {
          key: "extendOp",
          value: function (e) {
            var t, n, r = new e(this.app);
            this.opMap[r.type] = r;
            var a = r.eventsToListen();
            if ((null === (t = a.activate) || void 0 === t ? void 0 : t.value) &&
              (null === (n = a.exec) || void 0 === n ? void 0 : n.value))
            throw new Error(
                "DEV--\x3e 操作不能同时设置activate和exec为true。操作不同同时为命令类操作，及状态类操作");
            for (var i in a.activate && a.activate.value || a.exec && a.exec
                .value && this.dispatcher.on("op:" + r.type + ":exec", r
                  .execCommand.bind(r)), a) "activate" !== i && "exec" !== i &&
              this.dispatcher.on("op:" + i, a[i].value);
            return r
          }
        }, {
          key: "getOpDoc",
          value: function (e) {
            var t = [];
            if (void 0 !== e) t = this._getOpDoc(e);
            else {
              for (var n in this.opMap)(t = t.concat(this._getOpDoc(n))).push(
                "*************************************");
              t.push(
                "全局事件\n\n用法：app.on('event:add:snapshot', (data: {local: boolean, snapshot: IOPSnapshot}) => {})\n作用： 接收到新的快照时发送此事件\n"
                ), t.push("*************************************")
            }
            return t.join("\n\n")
          }
        }, {
          key: "_getOpDoc",
          value: function (e) {
            var t = [];
            if (this.opMap.hasOwnProperty(e)) {
              var n = this.opMap[e];
              n.description && t.push(n.description);
              var r = n.eventsToListen();
              for (var a in r) {
                var i = r[a].information,
                  A = "op:" + a;
                "activate" !== a && "exec" !== a || (A = "op:" + n.type + ":" +
                  a), t.push("用法：app.emit('" + A + "'" + (i.args.length > 0 ?
                    ", " + i.args : "") + ")\n作用：" + i.message)
              }
            } else this.logger.log("DEV--\x3e", "op:" + e + "不存在!!!!!!");
            return t
          }
        }, {
          key: "setCurrOp",
          value: function (e, t) {
            var n;
            return this.logger.log("[wb]", "设置当前op为：" + e, "payload: ", t), this
              .currOpPayload = t, "pen-pressure" !== e && "pen" !== e || (this
                .opMap.pen.enableIntens = "pen-pressure" === e, e = "pen"), (
                null === (n = this.currOp) || void 0 === n ? void 0 : n.type) !==
              e ? (document.body.style.cursor = "default", this.hooks.opChange
                .call(e), -1 !== this.shapeTypes.indexOf(e) ? (this.currOp = this
                  .opMap.shape, this.currOp.setSubType(e)) : this.currOp = this
                .opMap[e], this.app.emit("event:appState:change", "currTool", e),
                this.currOp.validatePayloads(), !0) : (this.currOp
                .validatePayloads(), !1)
          }
        }, {
          key: "currOpIsCamera",
          value: function () {
            var e;
            return this.currOp && -1 !== l.cameraSnapshotTypes.indexOf(null === (
              e = this.currOp) || void 0 === e ? void 0 : e.type)
          }
        }, {
          key: "resize",
          value: function (e, t, n) {
            this.hooks.resize.call(e, t, n) || this.currOp && "handleResize" in
              this.currOp && this.currOp.handleResize(e, t, n)
          }
        }, {
          key: "pan",
          value: function (e, t, n) {
            this.hooks.pan.call(e, t, n) || this.currOp && "handlePan" in this
              .currOp && this.currOp.handlePan(e, t, n)
          }
        }, {
          key: "scale",
          value: function (e, t, n, r) {
            this.hooks.scale.call(e, t, n, r) || this.currOp && "handleScale" in
              this.currOp && this.currOp.handleScale(e, t, n, r)
          }
        }, {
          key: "mousedown",
          value: function (e, t, n, r, a) {
            (this.app.editable || this.app.isRecordPlayer) && (this.hooks
              .mousedown.call(e, t, n, r, a) || this.currOp &&
              "handleMouseDown" in this.currOp && this.currOp.handleMouseDown(e,
                t, n, r, a))
          }
        }, {
          key: "mouseup",
          value: function (e, t, n, r, a) {
            (this.app.editable || this.app.isRecordPlayer) && (this.hooks.mouseup
              .call(e, t, n, r, a) || this.currOp && "handleMouseUp" in this
              .currOp && this.currOp.handleMouseUp(e, t, n, r, a))
          }
        }, {
          key: "mouseleave",
          value: function (e, t, n, r, a) {
            (this.app.editable || this.app.isRecordPlayer) && (this.hooks
              .mouseleave.call(e, t, n, r, a) || this.currOp &&
              "handleMouseLeave" in this.currOp && this.currOp.handleMouseLeave(e,
                t, n, r, a))
          }
        }, {
          key: "mousewheel",
          value: function (e, t, n, r, a) {
            this.hooks.mousewheel.call(e, t, n, r, a) || this.currOp &&
              "handleMouseWheel" in this.currOp && this.currOp.handleMouseWheel(e,
                t, n, r, a)
          }
        }, {
          key: "mousemove",
          value: function (e, t, n, r, a) {
            (this.app.editable || this.app.isRecordPlayer) && (this.hooks
              .mousemove.call(e, t, n, r, a) || this.currOp &&
              "handleMouseMove" in this.currOp && this.currOp.handleMouseMove(e,
                t, n, r, a))
          }
        }, {
          key: "pointerdown",
          value: function (e) {
            (this.app.editable || this.app.isRecordPlayer) && this.currOp &&
              "handlePointerDown" in this.currOp && this.currOp.handlePointerDown(
                e)
          }
        }, {
          key: "pointermove",
          value: function (e) {
            (this.app.editable || this.app.isRecordPlayer) && this.currOp &&
              "handlePointerMove" in this.currOp && this.currOp.handlePointerMove(
                e)
          }
        }, {
          key: "pointerup",
          value: function (e) {
            (this.app.editable || this.app.isRecordPlayer) && this.currOp &&
              "handlePointerUp" in this.currOp && this.currOp.handlePointerUp(e)
          }
        }, {
          key: "click",
          value: function (e, t, n, r, a) {
            this.app.editable && (this.hooks.click.call(e, t, n, r, a) || this
              .currOp && "handleClick" in this.currOp && this.currOp
              .handleClick(e, t, n, r, a))
          }
        }, {
          key: "dblClick",
          value: function (e, t, n, r, a) {
            this.app.editable && (this.hooks.dblClick.call(e, t, n, r, a) || this
              .currOp && "handleDblClick" in this.currOp && this.currOp
              .handleDblClick(e, t, n, r, a))
          }
        }, {
          key: "keyup",
          value: function (e) {
            this.app.editable && (this.hooks.keyup.call(e) || this.currOp &&
              "handleKeyUp" in this.currOp && this.currOp.handleKeyUp(e))
          }
        }, {
          key: "keydown",
          value: function (e) {
            this.app.editable && (this.hooks.keydown.call(e) || this.currOp &&
              "handleKeyDown" in this.currOp && this.currOp.handleKeyDown(e))
          }
        }, {
          key: "draw",
          value: function (e, t, n) {
            try {
              var r = e.data.type;
              if (this.opMap[r]) {
                e = this.opMap[r].intepSnap(e);
                var a = this.app.camera.getContainerWorldRect(),
                  i = {
                    sx: a.centerX - a.width / 2,
                    sy: a.centerY - a.height / 2,
                    w: a.width,
                    h: a.height
                  };
                if (this.snapOutBound(e, i) && -1 === ["audio", "video", "image",
                    "text"
                  ].indexOf(r)) return;
                this.opMap[r].draw(e, t, n)
              }
            } catch (e) {
              this.logger.warn("[wb] opsManager.draw error", e)
            }
          }
        }, {
          key: "snapOutBound",
          value: function (e, t) {
            if (e.data.boundary) {
              var n = (0, q.getTransformedBoundary)(this.app.scale, e.data);
              return n.sx - .5 * n.w >= t.sx + t.w || n.sx + 1.5 * n.w <= t.sx ||
                n.sy - .5 * n.h >= t.sy + t.h || n.sy + 1.5 * n.h <= t.sy
            }
            return !1
          }
        }, {
          key: "preview",
          value: function (e, t, n) {
            try {
              var r = e.data.type;
              this.opMap[r].preview(e, t, n)
            } catch (e) {
              this.logger.warn("[wb] opsManager.preview error", e)
            }
          }
        }, {
          key: "hide",
          value: function (e, t, n) {
            try {
              var r = e.data.type;
              this.opMap[r] && this.opMap[r].hide(e, t, n)
            } catch (e) {
              this.logger.warn("[wb] opsManager.hide error", e)
            }
          }
        }, {
          key: "waitTilReady",
          value: function (e) {
            return ce(this, void 0, void 0, i.default.mark((function t() {
              return i.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!this.opMap[e.data.type]) {
                      t.next = 4;
                      break
                    }
                    return t.abrupt("return", this.opMap[e.data
                      .type].waitTilReady(e));
                  case 4:
                    return t.abrupt("return", u.default
                  .resolve());
                  case 5:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "mergePartial",
          value: function (e, t) {
            var n = e.data.type;
            return this.opMap[n] ? this.opMap[n].mergePartial(e, t) : (de.has(
              n) || (this.logger.error(
                "[wb] OpsManager.mergePartial: cannot find op with type " + n,
                (0, a.default)(e)), de.add(n)), t.hasOwnProperty("category") ? t
              .time >= e.time ? t : e : (0, r.default)((0, r.default)({}, e), {
                data: (0, r.default)((0, r.default)({}, e.data), t.data)
              }))
          }
        }, {
          key: "mergeTwoPartial",
          value: function (e, t) {
            var n = {
              opId: e.opId,
              data: e.data
            };
            for (var r in t.data) Array.isArray(t.data[r]) && Array.isArray(n
                .data[r]) ? n.data[r] = n.data[r].concat(t.data[r]) : n.data[r] =
              t.data[r];
            return n
          }
        }, {
          key: "hasOpType",
          value: function (e) {
            return this.opMap.hasOwnProperty(e)
          }
        }, {
          key: "resetUndoRedoCount",
          value: function () {
            this.opMap.undo.resetCount(), this.opMap.redo.resetCount()
          }
        }, {
          key: "destroy",
          value: function () {
            for (var e in this.opMap) this.opMap[e] && "function" == typeof this
              .opMap[e].destroy && this.opMap[e].destroy();
            "function" == typeof this.unregistExit && this.unregistExit()
          }
        }, {
          key: "logger",
          get: function () {
            return this.app.logger
          }
        }, {
          key: "currPage",
          get: function () {
            return this.currBoard.pages[this.currBoard.currIndex]
          }
        }, {
          key: "currBoard",
          get: function () {
            return this.app.room.boards[this.app.room.currIndex]
          }
        }, {
          key: "drawOpsOfPage",
          get: function () {
            return this.currPage.drawOpQueue || {}
          }
        }, {
          key: "hiddenOpsOfPage",
          get: function () {
            return this.currPage.hiddenOpQueue || {}
          }
        }, {
          key: "auxiliaryOp",
          get: function () {
            return this.opMap.auxiliary
          }
        }, {
          key: "graphOp",
          get: function () {
            return this.opMap.graph
          }
        }, {
          key: "linkOp",
          get: function () {
            return this.opMap.link
          }
        }, {
          key: "textOp",
          get: function () {
            return this.opMap.text
          }
        }, {
          key: "imageOp",
          get: function () {
            return this.opMap.image
          }
        }, {
          key: "dupOp",
          get: function () {
            return this.opMap.duplicate
          }
        }, {
          key: "mouseOp",
          get: function () {
            return this.opMap.mouse
          }
        }, {
          key: "selectOp",
          get: function () {
            return this.opMap.select
          }
        }, {
          key: "modifyOp",
          get: function () {
            return this.opMap.modify
          }
        }, {
          key: "deleteOp",
          get: function () {
            return this.opMap.delete
          }
        }, {
          key: "cropOp",
          get: function () {
            return this.opMap.crop
          }
        }, {
          key: "groupOp",
          get: function () {
            return this.opMap.group
          }
        }, {
          key: "selectedOpIds",
          get: function () {
            return this.currOp !== this.opMap.select ? [] : this.selectOp
              .selectedOpIds
          }
        }]), e
      }();
    t.default = he
  }, function (e, t, n) {
    "use strict";
    t.__esModule = !0, t.Tapable = n(281), t.SyncHook = n(284), t.SyncBailHook = n(207), t
      .SyncWaterfallHook = n(285), t.SyncLoopHook = n(286), t.AsyncParallelHook = n(287),
      t.AsyncParallelBailHook = n(288), t.AsyncSeriesHook = n(289), t
      .AsyncSeriesBailHook = n(290), t.AsyncSeriesWaterfallHook = n(291), t.HookMap = n(
        292), t.MultiHook = n(293)
  }, function (e, t, n) {
    "use strict";
    const r = n(265),
      a = n(207);

    function i() {
      this._pluginCompat = new a(["options"]), this._pluginCompat.tap({
        name: "Tapable camelCase",
        stage: 100
      }, e => {
        e.names.add(e.name.replace(/[- ]([a-z])/g, (e, t) => t.toUpperCase()))
      }), this._pluginCompat.tap({
        name: "Tapable this.hooks",
        stage: 200
      }, e => {
        let t;
        for (const n of e.names)
          if (t = this.hooks[n], void 0 !== t) break;
        if (void 0 !== t) {
          const n = {
            name: e.fn.name || "unnamed compat plugin",
            stage: e.stage || 0
          };
          return e.async ? t.tapAsync(n, e.fn) : t.tap(n, e.fn), !0
        }
      })
    }
    e.exports = i, i.addCompatLayer = function (e) {
        i.call(e), e.plugin = i.prototype.plugin, e.apply = i.prototype.apply
      }, i.prototype.plugin = r.deprecate((function (e, t) {
        if (Array.isArray(e)) return void e.forEach((function (e) {
          this.plugin(e, t)
        }), this);
        if (!this._pluginCompat.call({
            name: e,
            fn: t,
            names: new Set([e])
          })) throw new Error(
          `Plugin could not be registered at '${e}'. Hook was not found.\nBREAKING CHANGE: There need to exist a hook at 'this.hooks'. To create a compatibility layer for this hook, hook into 'this._pluginCompat'.`
          )
      }), "Tapable.plugin is deprecated. Use new API on `.hooks` instead"), i.prototype
      .apply = r.deprecate((function () {
        for (var e = 0; e < arguments.length; e++) arguments[e].apply(this)
      }), "Tapable.apply is deprecated. Call apply on the plugin directly instead")
  }, function (e, t) {
    e.exports = function (e) {
      return e && "object" == typeof e && "function" == typeof e.copy && "function" ==
        typeof e.fill && "function" == typeof e.readUInt8
    }
  }, function (e, t) {
    "function" == typeof Object.create ? e.exports = function (e, t) {
      e.super_ = t, e.prototype = Object.create(t.prototype, {
        constructor: {
          value: e,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      })
    } : e.exports = function (e, t) {
      e.super_ = t;
      var n = function () {};
      n.prototype = t.prototype, e.prototype = new n, e.prototype.constructor = e
    }
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onDone: t,
        rethrowIfPossible: n
      }) {
        return this.callTapsSeries({
          onError: (t, n) => e(n),
          onDone: t,
          rethrowIfPossible: n
        })
      }
    };
    e.exports = class extends r {
      tapAsync() {
        throw new Error("tapAsync is not supported on a SyncHook")
      }
      tapPromise() {
        throw new Error("tapPromise is not supported on a SyncHook")
      }
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onResult: t,
        resultReturns: n,
        rethrowIfPossible: r
      }) {
        return this.callTapsSeries({
          onError: (t, n) => e(n),
          onResult: (e, t, n) => {
            let r = "";
            return r += `if(${t} !== undefined) {\n`, r +=
              `${this._args[0]} = ${t};\n`, r += "}\n", r += n(), r
          },
          onDone: () => t(this._args[0]),
          doneReturns: n,
          rethrowIfPossible: r
        })
      }
    };
    e.exports = class extends r {
      constructor(e) {
        if (super(e), e.length < 1) throw new Error(
          "Waterfall hooks must have at least one argument")
      }
      tapAsync() {
        throw new Error("tapAsync is not supported on a SyncWaterfallHook")
      }
      tapPromise() {
        throw new Error("tapPromise is not supported on a SyncWaterfallHook")
      }
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onDone: t,
        rethrowIfPossible: n
      }) {
        return this.callTapsLooping({
          onError: (t, n) => e(n),
          onDone: t,
          rethrowIfPossible: n
        })
      }
    };
    e.exports = class extends r {
      tapAsync() {
        throw new Error("tapAsync is not supported on a SyncLoopHook")
      }
      tapPromise() {
        throw new Error("tapPromise is not supported on a SyncLoopHook")
      }
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onDone: t
      }) {
        return this.callTapsParallel({
          onError: (t, n, r, a) => e(n) + a(!0),
          onDone: t
        })
      }
    };
    class A extends r {
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
    Object.defineProperties(A.prototype, {
      _call: {
        value: void 0,
        configurable: !0,
        writable: !0
      }
    }), e.exports = A
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onResult: t,
        onDone: n
      }) {
        let r = "";
        return r += `var _results = new Array(${this.options.taps.length});\n`, r +=
          "var _checkDone = () => {\n", r +=
          "for(var i = 0; i < _results.length; i++) {\n", r +=
          "var item = _results[i];\n", r += "if(item === undefined) return false;\n",
          r += "if(item.result !== undefined) {\n", r += t("item.result"), r +=
          "return true;\n", r += "}\n", r += "if(item.error) {\n", r += e(
            "item.error"), r += "return true;\n", r += "}\n", r += "}\n", r +=
          "return false;\n", r += "}\n", r += this.callTapsParallel({
            onError: (e, t, n, r) => {
              let a = "";
              return a +=
                `if(${e} < _results.length && ((_results.length = ${e+1}), (_results[${e}] = { error: ${t} }), _checkDone())) {\n`,
                a += r(!0), a += "} else {\n", a += n(), a += "}\n", a
            },
            onResult: (e, t, n, r) => {
              let a = "";
              return a +=
                `if(${e} < _results.length && (${t} !== undefined && (_results.length = ${e+1}), (_results[${e}] = { result: ${t} }), _checkDone())) {\n`,
                a += r(!0), a += "} else {\n", a += n(), a += "}\n", a
            },
            onTap: (e, t, n, r) => {
              let a = "";
              return e > 0 && (a += `if(${e} >= _results.length) {\n`, a += n(),
                a += "} else {\n"), a += t(), e > 0 && (a += "}\n"), a
            },
            onDone: n
          }), r
      }
    };
    class A extends r {
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
    Object.defineProperties(A.prototype, {
      _call: {
        value: void 0,
        configurable: !0,
        writable: !0
      }
    }), e.exports = A
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onDone: t
      }) {
        return this.callTapsSeries({
          onError: (t, n, r, a) => e(n) + a(!0),
          onDone: t
        })
      }
    };
    class A extends r {
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
    Object.defineProperties(A.prototype, {
      _call: {
        value: void 0,
        configurable: !0,
        writable: !0
      }
    }), e.exports = A
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onResult: t,
        resultReturns: n,
        onDone: r
      }) {
        return this.callTapsSeries({
          onError: (t, n, r, a) => e(n) + a(!0),
          onResult: (e, n, r) =>
            `if(${n} !== undefined) {\n${t(n)};\n} else {\n${r()}}\n`,
          resultReturns: n,
          onDone: r
        })
      }
    };
    class A extends r {
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
    Object.defineProperties(A.prototype, {
      _call: {
        value: void 0,
        configurable: !0,
        writable: !0
      }
    }), e.exports = A
  }, function (e, t, n) {
    "use strict";
    const r = n(47),
      a = n(52);
    const i = new class extends a {
      content({
        onError: e,
        onResult: t,
        onDone: n
      }) {
        return this.callTapsSeries({
          onError: (t, n, r, a) => e(n) + a(!0),
          onResult: (e, t, n) => {
            let r = "";
            return r += `if(${t} !== undefined) {\n`, r +=
              `${this._args[0]} = ${t};\n`, r += "}\n", r += n(), r
          },
          onDone: () => t(this._args[0])
        })
      }
    };
    class A extends r {
      constructor(e) {
        if (super(e), e.length < 1) throw new Error(
          "Waterfall hooks must have at least one argument")
      }
      compile(e) {
        return i.setup(this, e), i.create(e)
      }
    }
    Object.defineProperties(A.prototype, {
      _call: {
        value: void 0,
        configurable: !0,
        writable: !0
      }
    }), e.exports = A
  }, function (e, t, n) {
    "use strict";
    e.exports = class {
      constructor(e) {
        this._map = new Map, this._factory = e, this._interceptors = []
      }
      get(e) {
        return this._map.get(e)
      }
      for (e) {
        const t = this.get(e);
        if (void 0 !== t) return t;
        let n = this._factory(e);
        const r = this._interceptors;
        for (let t = 0; t < r.length; t++) n = r[t].factory(e, n);
        return this._map.set(e, n), n
      }
      intercept(e) {
        this._interceptors.push(Object.assign({
          factory: (e, t) => t
        }, e))
      }
      tap(e, t, n) {
        return this.for(e).tap(t, n)
      }
      tapAsync(e, t, n) {
        return this.for(e).tapAsync(t, n)
      }
      tapPromise(e, t, n) {
        return this.for(e).tapPromise(t, n)
      }
    }
  }, function (e, t, n) {
    "use strict";
    n(47);
    class r {
      constructor(e) {
        this.hooks = e
      }
      tap(e, t) {
        for (const n of this.hooks) n.tap(e, t)
      }
      tapAsync(e, t) {
        for (const n of this.hooks) n.tapAsync(e, t)
      }
      tapPromise(e, t) {
        for (const n of this.hooks) n.tapPromise(e, t)
      }
      isUsed() {
        for (const e of this.hooks)
          if (e.isUsed()) return !0;
        return !1
      }
      intercept(e) {
        for (const t of this.hooks) t.intercept(e)
      }
      withOptions(e) {
        return new r(this.hooks.map(t => t.withOptions(e)))
      }
    }
    e.exports = r
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "mouse", e.description = "鼠标工具", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.opChange.tap("OpChange", this.handleOpChange
            .bind(this))
        }
      }, {
        key: "handleOpChange",
        value: function (e) {
          var t;
          console.log("MouseOp:handleOpChange newType", e);
          var n = this.opsManager.opMap.url,
            r = n.mediaPlugins[n.currentUrlOpid];
          r && r.media ? "mouse" !== e && "mouse" === (null === (t = this
              .opsManager.currOp) || void 0 === t ? void 0 : t.type) ? r.media
            .style.pointerEvents = "none" : "mouse" === e && (r.media.style
              .pointerEvents = "auto") : console.log(
              "MouseOp:handleOpChange cannot find the plugin")
        }
      }]), t
    }(s(n(9)).default);
    t.default = u
  }, function (e, t, n) {
    e.exports = {
      default: n(296),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(297);
    var r = n(8).Object;
    e.exports = function (e, t) {
      return r.getOwnPropertyDescriptor(e, t)
    }
  }, function (e, t, n) {
    var r = n(41),
      a = n(100).f;
    n(101)("getOwnPropertyDescriptor", (function () {
      return function (e, t) {
        return a(r(e), t)
      }
    }))
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r, a = n(299),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };

    function A(e) {
      var t = "0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()_+[]{}|/<>,./";
      return e ? "0123456789" [Math.floor(Math.random() * "0123456789".length)] : t[Math
        .floor(Math.random() * t.length)]
    }
    t.getRandomIntByStr = function (e) {
      var t = (n = function (e) {
        for (var t = 0, n = 1779033703 ^ e.length; t < e.length; t++) n = (n = (0, i
          .default)(n ^ e.charCodeAt(t), 3432918353)) << 13 | n >>> 19;
        return function () {
          return n = (0, i.default)(n ^ n >>> 16, 2246822507), n = (0, i.default)(
            n ^ n >>> 13, 3266489909), (n ^= n >>> 16) >>> 0
        }
      }(function (e) {
        for (var t = "", n = 0; n < e; n++) t += A(!1);
        return t
      }(18))(), function () {
        var e = n += 1831565813;
        return e = (0, i.default)(e ^ e >>> 15, 1 | e), ((e ^= e + (0, i.default)(
          e ^ e >>> 7, 61 | e)) ^ e >>> 14) >>> 0
      })().toString().slice(0, e);
      var n;
      if (t.length < e)
        for (var r = t.length; r < e; r++) t += A(!0);
      return t
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(300),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(301), e.exports = n(8).Math.imul
  }, function (e, t, n) {
    var r = n(10),
      a = Math.imul;
    r(r.S + r.F * n(38)((function () {
      return -5 != a(4294967295, 5) || 2 != a.length
    })), "Math", {
      imul: function (e, t) {
        var n = +e,
          r = +t,
          a = 65535 & n,
          i = 65535 & r;
        return 0 | a * i + ((65535 & n >>> 16) * i + a * (65535 & r >>> 16) <<
          16 >>> 0)
      }
    })
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.drawCurve = void 0;
    var r, a = n(16),
      i = (r = a) && r.__esModule ? r : {
        default: r
      },
      A = n(224);
    var o = function (e, t, n, r, a) {
      var o = A.Vector2.sub(n, t),
        s = A.Vector2.normalize(new A.Vector2(o.y, -o.x));
      s && (e.moveTo.apply(e, (0, i.default)(A.Vector2.add(t, A.Vector2.scale(s, r))
        .value)), e.lineTo.apply(e, (0, i.default)(A.Vector2.add(n, A.Vector2.scale(
        s, a)).value)), e.lineTo.apply(e, (0, i.default)(A.Vector2.add(n, A.Vector2
        .scale(s, -1 * a)).value)), e.lineTo.apply(e, (0, i.default)(A.Vector2.add(
        t, A.Vector2.scale(s, -1 * r)).value)))
    };
    t.drawCurve = function (e, t, n, r, a) {
      t.beginPath();
      var A = n.length;
      if (!(A < 1))
        if (void 0 !== a) {
          var s = .5 * a + .5;
          if (2 === A) {
            var u = n[0],
              l = n[1],
              c = s * u.intensity,
              d = s * l.intensity;
            t.moveTo.apply(t, (0, i.default)(n[0].value)), t.arc(u.x, u.y, c, 0, 6.28),
              o(t, u, l, c, d), t.moveTo.apply(t, (0, i.default)(n[1].value)), t.arc(l
                .x, l.y, d, 0, 6.28)
          } else {
            var h = n[0],
              p = s * h.intensity;
            t.moveTo.apply(t, (0, i.default)(h.value)), t.arc(h.x, h.y, p, 0, 6.28);
            for (var f = 1; f < A - 1; f++) {
              var g = n[f];
              if ((Math.abs(g.x - h.x) + Math.abs(g.y - h.y)) * r > 1) {
                var y = s * g.intensity;
                o(t, h, g, p, y), t.moveTo.apply(t, (0, i.default)(g.value)), t.arc(g.x,
                  g.y, y, 0, 6.28), h = g, p = y
              }
            }
            var v = n[A - 1],
              m = s * v.intensity;
            o(t, h, v, p, m), t.moveTo.apply(t, (0, i.default)(v.value)), t.arc(v.x, v
              .y, m, 0, 6.28)
          }
        } else if (t.moveTo.apply(t, (0, i.default)(n[0].value)), 2 === A) t.lineTo
        .apply(t, (0, i.default)(n[1].value));
      else {
        for (var w = n[0], B = 1; B < A - 1; B++) {
          var M = n[B];
          (Math.abs(M.x - w.x) + Math.abs(M.y - w.y)) * r > e.appConfig.penPrecision &&
            (t.lineTo.apply(t, (0, i.default)(M.value)), w = M)
        }
        t.lineTo.apply(t, (0, i.default)(n[A - 1].value))
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = y(n(5)),
      a = y(n(2)),
      i = y(n(0)),
      A = y(n(1)),
      o = y(n(3)),
      s = y(n(4)),
      u = y(n(9)),
      l = n(15),
      c = n(19),
      d = n(60),
      h = y(d),
      p = n(29),
      f = n(39),
      g = n(141);

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var v = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "move", e.activate = !1, e.activateOpId = "", e.description =
          "移动操作工具。内部使用，不提供对外接口", e.idsBeenMoved = [], e.snapsBeenMoved = {}, e
          .auxLock = {
            pos: [0, 0],
            lockX: 0,
            lockY: 0,
            unlockXCount: 0,
            unlockYCount: 0,
            shiftX: 0,
            shiftY: 0,
            lastMoves: [
              [0, 0],
              [0, 0],
              [0, 0]
            ],
            lastCx: 0,
            lastCy: 0
          }, e.keyDownMoveEnd = function () {
            if (e.keyMove) {
              var t = {
                type: "move",
                sp: [0, 0],
                ep: [e.keyMove.dx, e.keyMove.dy],
                dependOn: e.keyMove.moveIds,
                inProgress: !1
              };
              e.opsManager.graphOp.handleElePosChange(e.keyMove.snaps, t, e.keyMove
                .opId, e.keyMove.opId + "_move"), clearTimeout(e.keyMove.timer)
            }
            e.keyMove = void 0
          }, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.mousedown.tap("MousedownPlugin", this
              .handleMouseDown.bind(this)), this.opsManager.hooks.mousemove.tap(
              "MousemovePlugin", this.handleMouseMove.bind(this)), this
            .opsManager.hooks.mouseup.tap("MouseupPlugin", this.handleMouseUp
              .bind(this)), this.opsManager.hooks.keydown.tap("KeydownPlugin",
              this.handleKeyDown.bind(this))
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n, r, a) {
          if (this.opsManager.currOp instanceof h.default) {
            if (t = Number(t.toFixed(3)), n = Number(n.toFixed(3)), this
              .activate) {
              var i = (0, g.getMoveInAuxiliaryLine)(this.app, t, n, r, a, this
                .auxLock, "move");
              if (!i) return !0;
              t = i.mx, n = i.my, this.ep = [t, n];
              var A = this.getSnapshot(!0, this.idsBeenMoved),
                o = this.opsManager.auxiliaryOp.calcAuxiliaryLine({
                  opsBeforeChange: this.snapsBeenMoved,
                  snap: A,
                  action: "move",
                  ids: this.idsBeenMoved.slice()
                });
              return (0, g.updateAuxLock)(this.auxLock, t, n, o), this
                .opsManager.graphOp.handleElePosChange(this.snapsBeenMoved, A,
                  this.activateOpId, this.activateOpId + "_move"), !0
            }
            if (!this.isMouseDown) {
              if (!(0, c.linkSelectOnly)(this.opsManager.selectedOpIds, this
                  .drawOpsOfPage) && this.mouseInSelectedEleBoundary(t, n, this
                  .opsManager.selectedOpIds)) return document.body.style
                .cursor = "move", !0;
              var s = (0, c.findOpsUnderMouse)(this.app, this.app.scale, [
                  [t, n]
                ], this.drawOpsOfPage, this.opsManager),
                u = (0, c.arrayDeduce)(s, this.opsManager.selectedOpIds);
              if ((0, c.linkSelectOnly)(u, this.drawOpsOfPage)) return void(
                document.body.style.cursor = "default");
              u.length > 0 ? document.body.style.cursor = "move" : document.body
                .style.cursor = "default"
            }
          }
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          if (this.opsManager.currOp instanceof h.default) {
            if (t = Number(t.toFixed(3)), n = Number(n.toFixed(3)), this
              .mouseInSelectedEleBoundary(t, n, this.opsManager
              .selectedOpIds) && !(0, c.linkSelectOnly)(this.opsManager
                .selectedOpIds, this.drawOpsOfPage)) return this.beginBatch(),
              document.body.style.cursor = "move", this.idsBeenMoved = this
              .opsManager.selectedOpIds, this.sp = [t, n], this.activate = !0,
              this.activateOpId = this.opsManager.currPage.getNextOpId(!0),
              this.snapsBeenMoved = (0, f.deepCopySnapBeforeMove)(this
                .idsBeenMoved, this.drawOpsOfPage), !0;
            var r = (0, c.findOpsUnderMouse)(this.app, this.app.scale, [
              [t, n]
            ], this.drawOpsOfPage, this.opsManager);
            if ((r = this.opsManager.groupOp.getOpIdsInGroups(r)).length > 0) {
              if ((0, c.linkSelectOnly)(r, this.drawOpsOfPage)) return;
              return this.dispatch(this.opsManager.selectOp.getSnapshot([])),
                this.beginBatch(), document.body.style.cursor = "move", this
                .idsBeenMoved = this.opsManager.groupOp.getOpIdsInGroups(r
                  .slice()), this.sp = [t, n], this.activate = !0, this
                .activateOpId = this.opsManager.currPage.getNextOpId(!0), this
                .snapsBeenMoved = (0, f.deepCopySnapBeforeMove)(this
                  .idsBeenMoved, this.drawOpsOfPage), !0
            }
          }
          this.activate = !1
        }
      }, {
        key: "handleMouseUp",
        value: function () {
          if (this.auxLock.lockX = 0, this.auxLock.lockY = 0, this.auxLock
            .shiftX = 0, this.auxLock.shiftY = 0, this.auxLock.lastCx = 0, this
            .auxLock.lastCy = 0, this.auxLock.lastMoves = [
              [0, 0],
              [0, 0],
              [0, 0]
            ], this.opsManager.auxiliaryOp.clean(), this.activate && (this
              .activate = !1, this.sp && this.ep && this.isMouseMoved))
          return this.opsManager.graphOp.handleElePosChange(this
              .snapsBeenMoved, this.getSnapshot(!1, this.idsBeenMoved), this
              .activateOpId, this.activateOpId + "_move"), !0
        }
      }, {
        key: "handleKeyDown",
        value: function (e) {
          var t, n = this;
          if (this.opsManager.currOp instanceof h.default && this.opsManager
            .selectedOpIds.length > 0) {
            if ((0, c.linkSelectOnly)(this.opsManager.selectedOpIds, this
                .drawOpsOfPage)) return;
            var r = e.key.toLocaleLowerCase(),
              a = Date.now(),
              i = (this.keyMove ? a - this.keyMove.last : 120) < 110 ? 6 : 1,
              A = 0,
              o = 0;
            if ("arrowup" === r ? o = -i : "arrowdown" === r ? o = i :
              "arrowleft" === r ? A = -i : "arrowright" === r && (A = i), 0 !==
              A || 0 !== o) {
              clearTimeout(null === (t = this.keyMove) || void 0 === t ?
                void 0 : t.timer), void 0 === this.keyMove ? this.keyMove = {
                timer: null,
                dx: A,
                dy: o,
                last: a,
                opId: this.opsManager.currPage.getNextOpId(!0),
                moveIds: this.opsManager.selectedOpIds.slice(),
                snaps: (0, f.deepCopySnapBeforeMove)(this.opsManager
                  .selectedOpIds.slice(), this.drawOpsOfPage)
              } : (this.keyMove.dx += A, this.keyMove.dy += o, this.keyMove
                .last = a);
              var s = {
                type: "move",
                sp: [0, 0],
                ep: [this.keyMove.dx, this.keyMove.dy],
                dependOn: this.keyMove.moveIds,
                inProgress: !0
              };
              this.opsManager.graphOp.handleElePosChange(this.keyMove.snaps, s,
                  this.keyMove.opId, this.keyMove.opId + "_move"), this.keyMove
                .timer = setTimeout((function () {
                  n.keyDownMoveEnd()
                }), 1e3)
            }
          }
        }
      }, {
        key: "getSnapshot",
        value: function (e, t) {
          return {
            type: "move",
            sp: this.sp,
            ep: this.ep,
            dependOn: t.slice(),
            inProgress: e
          }
        }
      }, {
        key: "mouseInSelectedEleBoundary",
        value: function (e, t, n) {
          var r = this;
          if (0 === (n = n.filter((function (e) {
              return r.drawOpsOfPage.hasOwnProperty(e)
            }))).length) return !1;
          var a = d.SELECT_PAD;
          if (n.length > 1) {
            var i = n.map((function (e) {
              var t = r.drawOpsOfPage[e];
              return (0, l.getTransformedBoundary)(r.app.camera.scale, t
                .data)
            })).filter((function (e) {
              return !(isNaN(e.w) || isNaN(e.h) || isNaN(e.sx) || isNaN(e
                .sy))
            }));
            if (0 === i.length) return !1;
            var A = i.reduce((function (e, t) {
              return (0, l.combineBoundary)(e, t)
            }));
            return (0, l.pointInRect)(A, a, [e, t])
          }
          var o = this.drawOpsOfPage[n[0]],
            s = (0, l.getTransformedVertices)(o.data);
          return (0, l.pointInVertices)(s, [e, t])
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          if ("link" === e.data.type) return e;
          var n = void 0,
            a = void 0;
          return Array.isArray(t.points) ? (n = t.points[t.points.length - 1][
            0] - t.points[0][0], a = t.points[t.points.length - 1][1] - t
            .points[0][1]) : (n = t.ep[0] - t.sp[0], a = t.ep[1] - t.sp[1]), (
            0, r.default)({}, e, {
            data: (0, r.default)((0, r.default)({}, e.data), {
              mat: (0, p.panMat)(e.data.mat, n, a)
            })
          })
        }
      }]), t
    }(u.default);
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(5)),
      a = g(n(2)),
      i = g(n(0)),
      A = g(n(1)),
      o = g(n(3)),
      s = g(n(4)),
      u = g(n(9)),
      l = g(n(60)),
      c = n(15),
      d = n(96),
      h = n(29),
      p = n(39),
      f = n(141);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = ["text", "video", "image"],
      v = ["audio"],
      m = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.type = "scale", e.coordinateX = 0, e.coordinateY = 0, e.v1 = [1, 0], e
            .v2 = [0, 1], e.activate = !1, e.activateOpId = "", e.idsBeenScaled = [], e
            .snapsBeenScaled = {}, e.auxLock = {
              pos: [0, 0],
              lockX: 0,
              lockY: 0,
              unlockXCount: 0,
              unlockYCount: 0,
              shiftX: 0,
              shiftY: 0,
              lastMoves: [
                [0, 0],
                [0, 0],
                [0, 0]
              ],
              lastCx: 0,
              lastCy: 0
            }, e.description = "缩放", e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.mousemove.tap("MouseMovePlugin", this
                .handleMouseMove.bind(this)), this.opsManager.hooks.mousedown.tap(
                "MouseMovePlugin", this.handleMouseDown.bind(this)), this
              .opsManager.hooks.mouseup.tap("MouseMovePlugin", this.handleMouseUp
                .bind(this))
          }
        }, {
          key: "handleMouseDown",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof l.default) {
              var r = this.mousePosTest(t, n);
              document.body.style.cursor = r.cursorSuggestion;
              var a = this.opsManager.selectedOpIds;
              if (0 === a.length) return;
              if (!0 === r.value) {
                this.beginBatch(), this.activate = !0, this.activateOpId = this
                  .opsManager.currPage.getNextOpId(!0), this.idsBeenScaled = a,
                  this.snapsBeenScaled = (0, p.deepCopySnapBeforeMove)(this
                    .idsBeenScaled, this.drawOpsOfPage), this.coordinateX = r
                  .coordinateX, this.coordinateY = r.coordinateY;
                var i = r.angle,
                  A = r.xSign,
                  o = r.ySign;
                return this.v1 = [A * Math.cos(i) / r.w, A * Math.sin(i) / r.w],
                  this.v2 = [-o * Math.sin(i) / r.h, o * Math.cos(i) / r.h], !0
              }
            }
            this.activate = !1
          }
        }, {
          key: "handleMouseMove",
          value: function (e, t, n, r, a) {
            if (this.opsManager.currOp instanceof l.default) {
              var i = this.opsManager.selectedOpIds;
              if (this.activate) {
                var A = (0, f.getMoveInAuxiliaryLine)(this.app, t, n, r, a, this
                  .auxLock, "scale");
                if (!A) return !0;
                t = A.mx, n = A.my;
                var o = t - this.coordinateX,
                  s = n - this.coordinateY,
                  u = o * this.v1[0] + s * this.v1[1],
                  c = o * this.v2[0] + s * this.v2[1];
                this.idsBeenScaled.length > 1 && (c = u = Math.min(u, c)), this
                  .scaleInfo = {
                    scaleX: {
                      coordinate: this.coordinateX,
                      factor: u
                    },
                    scaleY: {
                      coordinate: this.coordinateY,
                      factor: c
                    }
                  };
                var d = this.getSnapshot(!0, this.idsBeenScaled),
                  h = this.opsManager.auxiliaryOp.calcAuxiliaryLine({
                    opsBeforeChange: this.snapsBeenScaled,
                    snap: d,
                    action: "scale",
                    ids: this.idsBeenScaled.slice(),
                    exclude: [{
                      dir: "h",
                      val: this.coordinateY
                    }, {
                      dir: "v",
                      val: this.coordinateX
                    }]
                  });
                return (0, f.updateAuxLock)(this.auxLock, t, n, h), this
                  .opsManager.graphOp.handleElePosChange(this.snapsBeenScaled,
                    this.getSnapshot(!0, this.idsBeenScaled), this.activateOpId,
                    this.activateOpId + "_scale"), !0
              }
              if (this.opsManager.currOp instanceof l.default && !this
                .isMouseDown && i.length > 0) {
                var p = this.mousePosTest(t, n);
                if (document.body.style.cursor = p.cursorSuggestion, "default" !==
                  p.cursorSuggestion) return !0
              } else document.body.style.cursor = "default"
            }
          }
        }, {
          key: "handleMouseUp",
          value: function () {
            if (this.auxLock.lockX = 0, this.auxLock.lockY = 0, this.auxLock
              .shiftX = 0, this.auxLock.shiftY = 0, this.auxLock.lastCx = 0, this
              .auxLock.lastCy = 0, this.auxLock.lastMoves = [
                [0, 0],
                [0, 0],
                [0, 0]
              ], this.opsManager.auxiliaryOp.clean(), this.activate && this
              .scaleInfo) return this.activate = !1, this.opsManager.graphOp
              .handleElePosChange(this.snapsBeenScaled, this.getSnapshot(!1,
                  this.idsBeenScaled), this.activateOpId, this.activateOpId +
                "_scale"), this.scaleInfo = void 0, !0;
            this.activate = !1, this.scaleInfo = void 0
          }
        }, {
          key: "mousePosTest",
          value: function (e, t) {
            var n = this,
              r = this.opsManager.opMap.select.selectInfo,
              a = this.opsManager.selectedOpIds;
            if (0 === (a = a.filter((function (e) {
                return n.drawOpsOfPage.hasOwnProperty(e)
              }))).length || !r) return {
              value: !1,
              cursorSuggestion: "default",
              coordinateX: 0,
              coordinateY: 0,
              xSign: 1,
              ySign: 1,
              angle: 0,
              w: 1,
              h: 1
            };
            var i = r.boundary,
              A = r.pad,
              o = i.isCombined ? [i.sx, i.sy] : i.p1,
              s = i.isCombined ? [i.sx + i.w, i.sy] : i.p2,
              u = i.isCombined ? [i.sx + i.w, i.sy + i.h] : i.p3,
              l = i.isCombined ? [i.sx, i.sy + i.h] : i.p4,
              h = i.isCombined ? i.w : Math.sqrt((s[0] - o[0]) * (s[0] - o[0]) + (
                s[1] - o[1]) * (s[1] - o[1])),
              p = i.isCombined ? i.h : Math.sqrt((l[0] - o[0]) * (l[0] - o[0]) + (
                l[1] - o[1]) * (l[1] - o[1]));
            h = Math.max(h, 1), p = Math.max(p, 1);
            var f = r.rotateIcon ? r.rotateIcon.angle : 0,
              g = 0,
              y = 1,
              v = 1,
              m = !0;
            if (1 === a.length) {
              var w = this.drawOpsOfPage[a[0]];
              "link" === w.data.type && (m = !1), w && w.data.xFactor && (g += w
                .data.xFactor > 0 ? 0 : Math.PI / 2, y = w.data.xFactor > 0 ?
                1 : -1), w && w.data.yFactor && (g += w.data.yFactor > 0 ? 0 : -
                Math.PI / 2, v = w.data.yFactor > 0 ? 1 : -1)
            }
            var B = 15;
            return -1 !== d.TouchPlatformArray.indexOf(this.app.platform) && (B *=
              2.2), B /= this.app.scale, m && (0, c.pointCollideWithPoint)([e,
              t], (0, c.getPointAftPad)(u, A, f, 2, y, v), B) ? {
              value: !0,
              cursorSuggestion: (0, c.getScaleCursor)(Math.PI / 4 + f + g),
              coordinateX: o[0],
              coordinateY: o[1],
              xSign: y,
              ySign: v,
              angle: f,
              w: h,
              h: p
            } : m && (0, c.pointCollideWithPoint)([e, t], (0, c.getPointAftPad)(
              l, A, f, 3, y, v), B) ? {
              value: !0,
              cursorSuggestion: (0, c.getScaleCursor)(Math.PI / 4 * 3 + f + g),
              coordinateX: s[0],
              coordinateY: s[1],
              xSign: -y,
              ySign: v,
              angle: f,
              w: h,
              h: p
            } : m && (0, c.pointCollideWithPoint)([e, t], (0, c.getPointAftPad)(
              o, A, f, 0, y, v), B) ? {
              value: !0,
              cursorSuggestion: (0, c.getScaleCursor)(Math.PI / 4 * 5 + f + g),
              coordinateX: u[0],
              coordinateY: u[1],
              xSign: -y,
              ySign: -v,
              angle: f,
              w: h,
              h: p
            } : m && (0, c.pointCollideWithPoint)([e, t], (0, c.getPointAftPad)(
              s, A, f, 1, y, v), B) ? {
              value: !0,
              cursorSuggestion: (0, c.getScaleCursor)(Math.PI / 4 * 7 + f + g),
              coordinateX: l[0],
              coordinateY: l[1],
              xSign: y,
              ySign: -v,
              angle: f,
              w: h,
              h: p
            } : {
              value: !1,
              cursorSuggestion: "default",
              coordinateX: 0,
              coordinateY: 0,
              xSign: 1,
              ySign: 1,
              angle: 0,
              w: 1,
              h: 1
            }
          }
        }, {
          key: "getSnapshot",
          value: function (e, t) {
            return {
              type: "scale",
              inProgress: e,
              scaleInfo: this._clipScaleInfo(),
              dependOn: t.slice()
            }
          }
        }, {
          key: "_clipScaleInfo",
          value: function () {
            return this.scaleInfo ? {
              scaleX: {
                coordinate: Number(this.scaleInfo.scaleX.coordinate.toFixed(3)),
                factor: Number(this.scaleInfo.scaleX.factor.toFixed(3))
              },
              scaleY: {
                coordinate: Number(this.scaleInfo.scaleY.coordinate.toFixed(3)),
                factor: Number(this.scaleInfo.scaleY.factor.toFixed(3))
              }
            } : this.scaleInfo
          }
        }, {
          key: "transformOp",
          value: function (e, t) {
            if ("link" === e.data.type) return e;
            var n = Array.isArray(t.scaleList) ? t.scaleList[t.scaleList.length -
                1] : t.scaleInfo,
              a = {
                coordinate: void 0 === n.scaleX ? 0 : n.scaleX.coordinate,
                factor: void 0 === n.scaleX ? 1 : n.scaleX.factor
              },
              i = {
                coordinate: void 0 === n.scaleY ? 0 : n.scaleY.coordinate,
                factor: void 0 === n.scaleY ? 1 : n.scaleY.factor
              };
            if (-1 !== y.indexOf(e.data.type)) {
              var A = (n.scaleX.factor || 1) / 2 + (n.scaleY.factor || 1) / 2;
              a.factor = A, i.factor = A
            } else -1 !== v.indexOf(e.data.type) && (i.factor = 1);
            return "text" !== e.data.type ? (0, r.default)({}, e, {
              data: (0, r.default)((0, r.default)({}, e.data), {
                mat: (0, h.scaleMat)(e.data.mat, e.data.rAngle, a, i),
                xFactor: (e.data.xFactor || 1) * a.factor,
                yFactor: (e.data.yFactor || 1) * i.factor
              })
            }) : (0, r.default)({}, e, {
              data: (0, r.default)((0, r.default)({}, e.data), {
                mat: (0, h.scaleMat)(e.data.mat, e.data.rAngle, a, i),
                fontSize: Math.abs(e.data.fontSize * a.factor),
                xFactor: (e.data.xFactor || 1) * a.factor,
                yFactor: (e.data.yFactor || 1) * i.factor
              })
            })
          }
        }]), t
      }(u.default);
    t.default = m
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(5)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "delete", e.description = "删除元素。", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.keydown.tap("KeydownPlugin", this.handleKeyDown
            .bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "删除当前选中的元素"
              }
            },
            "delete:deleteOps": {
              value: this.deleteOps.bind(this),
              information: {
                args: "opIds: Array<string>",
                message: "删除ops"
              }
            }
          }
        }
      }, {
        key: "handleKeyDown",
        value: function (e) {
          var t = e.key.toLocaleLowerCase();
          if (-1 !== ["backspace", "delete"].indexOf(t)) return this
            .execCommand(), !0
        }
      }, {
        key: "deleteOps",
        value: function (e) {
          Array.isArray(e) && e.length > 0 && this.dispatch(this.getSnapshot(e))
        }
      }, {
        key: "execCommand",
        value: function () {
          this.opsManager.selectedOpIds.length > 0 && this.dispatch(this
            .getSnapshot(this.opsManager.selectedOpIds))
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          for (var t in e = e.slice(), this.drawOpsOfPage) {
            var n = this.drawOpsOfPage[t];
            if ("link" === n.data.type && -1 === e.indexOf(t)) {
              if (n.data.start && n.data.start.id && -1 !== e.indexOf(n.data
                  .start.id)) {
                e.push(t);
                continue
              }
              if (n.data.end && n.data.end.id && -1 !== e.indexOf(n.data.end
                .id)) {
                e.push(t);
                continue
              }
            }
          }
          return {
            type: this.type,
            dependOn: e
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = (0, r.default)({}, e.data, {
            deleted: !0
          });
          return (0, r.default)({}, e, {
            data: n
          })
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(7)),
      a = d(n(42)),
      i = d(n(2)),
      A = d(n(0)),
      o = d(n(1)),
      s = d(n(3)),
      u = d(n(4)),
      l = d(n(9)),
      c = n(46);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "undo", e.description = "撤销操作", e.idsCouldUndo = new a.default,
          e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "getCount",
        value: function () {
          return this.idsCouldUndo.size
        }
      }, {
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.opAdd.tap("OpAdd", this.onOpAdded.bind(this)),
            this.opsManager.hooks.keydown.tap("KeydownPlugin", this
              .handleKeyDown.bind(this))
        }
      }, {
        key: "handleKeyDown",
        value: function (e) {
          "z" === e.key.toLocaleLowerCase() && this.app.container
          .isCtrlPressed() && (e.preventDefault(), this.execCommand())
        }
      }, {
        key: "resetCount",
        value: function () {
          this.idsCouldUndo.clear(), this.emit("event:appState:change",
            "undoCount", 0)
        }
      }, {
        key: "onOpAdded",
        value: function (e) {
          if ("pageOp" === e.category || "boardOp" === e.category) this
            .idsCouldUndo.clear();
          else {
            if (e.data.skipUndo || e.data.inProgress || -1 !== c
              .snapshotOutOfNormalFlowTypes.indexOf(e.data.type)) return;
            if (e.uid !== this.app.account) return;
            if ("undo" === e.data.type) {
              if (e.data.undoOpId && this.idsCouldUndo.delete(e.data.undoOpId),
                Array.isArray(e.data.undoOpIds)) {
                var t = !0,
                  n = !1,
                  a = void 0;
                try {
                  for (var i, A = (0, r.default)(e.data.undoOpIds); !(t = (i = A
                      .next()).done); t = !0) {
                    var o = i.value;
                    this.idsCouldUndo.delete(o)
                  }
                } catch (e) {
                  n = !0, a = e
                } finally {
                  try {
                    !t && A.return && A.return()
                  } finally {
                    if (n) throw a
                  }
                }
              }
            } else "undo" !== e.data.type && this.idsCouldUndo.add(e.opId)
          }
          this.emit("event:appState:change", "undoCount", this.idsCouldUndo
            .size)
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          0 !== this.idsCouldUndo.size && (this.getSnapshot().undoOpIds.length >
            0 && this.dispatch(this.getSnapshot()))
        }
      }, {
        key: "getSnapshot",
        value: function () {
          for (var e = this.opsOfPage, t = [], n = -1, i = new a.default, A = e
              .length - 1; A >= 0; A--) {
            var o = e[A],
              s = o.data.inProgress || o.data.skipUndo || -1 !== c
              .snapshotOutOfNormalFlowTypes.indexOf(o.data.type) || o.uid !==
              this.app.account;
            if ("undo" === o.data.type || s || i.has(o.opId)) {
              if ("undo" === o.data.type && (o.data.undoOpId && i.add(o.data
                  .undoOpId), Array.isArray(o.data.undoOpIds))) {
                var u = !0,
                  l = !1,
                  d = void 0;
                try {
                  for (var h, p = (0, r.default)(o.data.undoOpIds); !(u = (h = p
                      .next()).done); u = !0) {
                    var f = h.value;
                    i.add(f)
                  }
                } catch (e) {
                  l = !0, d = e
                } finally {
                  try {
                    !u && p.return && p.return()
                  } finally {
                    if (l) throw d
                  }
                }
              }
            } else {
              var g = o.time; - 1 === n ? (t.push(o.opId), n = g) : Math.abs(g -
                n) < 100 && t.push(o.opId)
            }
          }
          return {
            type: "undo",
            undoOpIds: t
          }
        }
      }]), t
    }(l.default);
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(42)),
      a = c(n(2)),
      i = c(n(0)),
      A = c(n(1)),
      o = c(n(3)),
      s = c(n(4)),
      u = c(n(9)),
      l = n(46);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "redo", e.description = "重做操作", e.idsCouldRedo = new r.default,
          e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "getCount",
        value: function () {
          return this.idsCouldRedo.size
        }
      }, {
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.opAdd.tap("OpAdd", this.onOpAdded.bind(this)),
            this.opsManager.hooks.keydown.tap("KeydownPlugin", this
              .handleKeyDown.bind(this))
        }
      }, {
        key: "handleKeyDown",
        value: function (e) {
          "y" === e.key.toLocaleLowerCase() && this.app.container
          .isCtrlPressed() && (e.preventDefault(), this.execCommand())
        }
      }, {
        key: "resetCount",
        value: function () {
          this.idsCouldRedo.clear(), this.emit("event:appState:change",
            "redoCount", 0)
        }
      }, {
        key: "onOpAdded",
        value: function (e) {
          if ("pageOp" === e.category || "boardOp" === e.category) this
            .idsCouldRedo.clear();
          else {
            if (e.data.inProgress || e.data.skipUndo || -1 !== l
              .snapshotOutOfNormalFlowTypes.indexOf(e.data.type)) return;
            if (e.uid !== this.app.account) return;
            "redo" === e.data.type ? this.idsCouldRedo.delete(e.data.redoOpId) :
              "undo" === e.data.type ? this.idsCouldRedo.add(e.opId) : this
              .idsCouldRedo.clear()
          }
          this.emit("event:appState:change", "redoCount", this.idsCouldRedo
            .size)
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          0 !== this.idsCouldRedo.size && this.dispatch(this.getSnapshot())
        }
      }, {
        key: "getSnapshot",
        value: function () {
          for (var e = this.opsOfPage, t = "", n = 0, r = e.length - 1; r >=
            0; r--) {
            var a = e[r];
            if (a.uid === this.app.account) {
              if ("undo" === a.data.type && 0 === n) {
                t = a.opId;
                break
              }
              "undo" === a.data.type ? n-- : "redo" === a.data.type ? n++ : a
                .data.skipUndo || -1 !== l.snapshotOutOfNormalFlowTypes.indexOf(
                  a.data.type) || this.logger.warn("DEV--\x3e",
                  "redo操作之前有非undo操作。请查看具体细节", e)
            }
          }
          return {
            type: this.type,
            redoOpId: t
          }
        }
      }]), t
    }(u.default);
    t.default = d
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(20)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "clear", e.description = "清空操作", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "isAvailable",
        value: function () {
          return (0, r.default)(this.drawOpsOfPage).length > 0
        }
      }, {
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.refresh.tap("RefreshPlugin", this.onRefresh
            .bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          (0, r.default)(this.drawOpsOfPage).length > 0 && this.dispatch(this
            .getSnapshot())
        }
      }, {
        key: "getSnapshot",
        value: function () {
          return {
            type: this.type
          }
        }
      }, {
        key: "onRefresh",
        value: function () {
          var e = (0, r.default)(this.drawOpsOfPage).length > 0;
          this.emit("event:appState:change", "clearAvailable", e)
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "eraser", e.eraserColor = "rgba(230, 100, 100, .4)", e.width =
          20, e.points = [], e.description = "橡皮擦", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n) {
          this.isMouseDown && (this.points.push([t, n]), this.dispatch(this
            .getSnapshot()))
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          this.beginBatch(), this.points = [], this.points.push([t, n])
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n) {
          this.isMouseDown && (this.dispatch(this.getSnapshot()), this
            .points = [])
        }
      }, {
        key: "getSnapshot",
        value: function () {
          return {
            type: this.type,
            points: this.points.slice(),
            width: this.width
          }
        }
      }, {
        key: "draw",
        value: function (e, t) {
          t.save(), t.fillStyle = "rgb(0, 0, 0)";
          var n = e.data.points;
          t.beginPath(), t.globalCompositeOperation = "destination-out";
          for (var r = 1; r < n.length; r++) t.moveTo(n[r][0], n[r][1]), t.arc(
            n[r][0], n[r][1], this.width, 0, 2 * Math.PI, !0);
          t.fill(), t.restore(), this.drawEraserSignpost(t)
        }
      }, {
        key: "drawEraserSignpost",
        value: function (e) {
          this.opsManager.currOp instanceof t && this.isMouseDown && (e
            .beginPath(), e.arc(this.points[this.points.length - 1][0], this
              .points[this.points.length - 1][1], this.width, 0, 2 * Math.PI,
              !0), e.fillStyle = this.eraserColor, e.fill())
        }
      }]), t
    }(s(n(9)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(20)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "page", e.description = "页面相关操作", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.pageChange.tap("pageChangePlugin", this
            .onPageChange.bind(this))
        }
      }, {
        key: "onPageChange",
        value: function () {
          return this.emit("event:appState:change", "page", {
            activeIndex: this.opsManager.currBoard.getCurrPageIndex(),
            pageNames: this.opsManager.currBoard.pageNames.slice(),
            currPage: this.opsManager.currBoard.currIndex,
            pagePayloads: this.opsManager.currBoard.payloadOfPages
          })
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "page:goto": {
              value: this.goto.bind(this),
              information: {
                args: "page: number",
                message: "跳转至页面"
              }
            },
            "page:add": {
              value: this.add.bind(this),
              information: {
                args: "opt: {insertAfter?: number, payload?: any}",
                message: "添加页面。默认添加至当前board最后"
              }
            },
            "page:delete": {
              value: this.delete.bind(this),
              information: {
                args: "page: number",
                message: "删除页面。只有当页面数量大于1时可以删除页面"
              }
            }
          }
        }
      }, {
        key: "add",
        value: function (e) {
          this.dispatch({
            type: this.type,
            action: "add",
            insertAfter: e.insertAfter,
            payload: e.payload
          })
        }
      }, {
        key: "goto",
        value: function (e) {
          e !== this.opsManager.currBoard.currIndex && -1 !== this.opsManager
            .currBoard.pageNames.indexOf(e.toString()) && this.dispatch({
              type: this.type,
              action: "goto",
              page: e
            })
        }
      }, {
        key: "delete",
        value: function (e) {
          var t = this.opsManager.currBoard.pages;
          e in t && (0, r.default)(t).length > 1 && this.dispatch({
            type: this.type,
            action: "delete",
            page: e
          })
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(25)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(4)),
      u = d(n(11)),
      l = d(n(9)),
      c = n(142);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      p = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.type = "image", e.description = "图片操作", e.dispatchImage = function (t,
            n, r, a) {
            var i = a.inProgress,
              A = a.page,
              o = a.pos,
              s = a.antiLeechProp,
              u = (null == o ? void 0 : o.size) ? o.size : "relative";
            n = "relative" === u ? n : n / e.app.scale, r = "relative" === u ? r : r / e
              .app.scale;
            var l = void 0,
              d = void 0;
            if (o) l = o.mx - n * o.origin.x, d = o.my - r * o.origin.y;
            else {
              var h = (0, c.getImageProperPosition)(e, n, r);
              l = h.sx, d = h.sy
            }
            A && A !== e.app.room.currBoard.currPage ? e.dispatchFromPage({
              type: e.type,
              url: t,
              antiLeechProp: s,
              boundary: {
                sx: l,
                sy: d,
                w: n,
                h: r
              }
            }, A) : e.dispatch({
              type: e.type,
              url: t,
              inProgress: i,
              antiLeechProp: s,
              boundary: {
                sx: l,
                sy: d,
                w: n,
                h: r
              }
            })
          }, e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "eventsToListen",
          value: function () {
            return {
              "image:upload": {
                value: this.addImage.bind(this),
                information: {
                  args: "url: string, opts: {\n                        pageName?: string,\n                        boardName?: string,\n                        antiLeechProp: IAntiLeechProp\n                    }",
                  message: "上传图片"
                }
              }
            }
          }
        }, {
          key: "addImage",
          value: function (e, t) {
            return (0, c.addImage)(this.app, this, e, t)
          }
        }, {
          key: "preview",
          value: function (e, t, n) {
            var r = e.data,
              a = r.crop ? r.crop.boundary : r.boundary;
            if (console.log("图片的 preview data: ", r), t.save(), r.mat) {
              var i = r.mat;
              t.transform(i[0][0], i[1][0], i[0][1], i[1][1], i[0][2], i[1][2])
            }(0, c.draw)(this.app, t, r.url, r.boundary, {
              baseBoundary: a,
              page: n.page,
              supportToDataUrl: n.supportToDataUrl,
              preview: !0,
              antiLeechProp: r.antiLeechProp
            }), t.restore()
          }
        }, {
          key: "draw",
          value: function (e, t, n) {
            var r = e.data,
              a = r.crop ? r.crop.boundary : r.boundary;
            if (t.save(), r.mat) {
              var i = r.mat;
              t.transform(i[0][0], i[1][0], i[0][1], i[1][1], i[0][2], i[1][2])
            }(0, c.draw)(this.app, t, r.url, r.boundary, {
              antiLeechProp: r.antiLeechProp,
              cropping: !!r.crop && r.crop.inProgress,
              baseBoundary: a,
              page: n.page,
              id: e.opId,
              type: "image"
            }), r.crop && r.crop.inProgress && this.opsManager.cropOp.drawCrop(t,
              r), t.restore()
          }
        }, {
          key: "hide",
          value: function (e, t, n) {
            var r, a = n.querySelector("[id='" + e.opId + "']");
            null === (r = null == a ? void 0 : a.parentNode) || void 0 === r || r
              .removeChild(a)
          }
        }, {
          key: "waitTilReady",
          value: function (e) {
            return h(this, void 0, void 0, r.default.mark((function t() {
              var n = this;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!this.app.resourceCache.resourceLoaded(e
                        .data.url)) {
                      t.next = 4;
                      break
                    }
                    return t.abrupt("return", u.default
                  .resolve());
                  case 4:
                    return t.abrupt("return", new u.default((
                      function (t) {
                        n.app.resourceCache.fetchResource({
                          urlArr: e.data.url,
                          antiLeechProp: e.data
                            .antiLeechProp,
                          cb: function () {
                            t()
                          }
                        })
                      })));
                  case 5:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }]), t
      }(l.default);
    t.default = p
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(20)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "board", e.description = "board相关操作", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.boardChange.tap("boardChangePlugin", this
            .onBoardChange.bind(this))
        }
      }, {
        key: "onBoardChange",
        value: function () {
          var e = this;
          setTimeout((function () {
            return e.emit("event:appState:change", "board", {
              boardNames: (0, r.default)(e.app.room.boards),
              boardDisplayNames: e.app.room.getBoardDisplayNames(),
              currBoard: e.app.room.currIndex,
              currBoardDisplayName: e.app.room.currBoard.displayName
            })
          }), 0)
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "board:import": {
              value: this.import.bind(this),
              information: {
                args: "url: string, boardNames?: Array<string>, overwrite?: boolean",
                message: "导入其它教学阶段导出的board"
              }
            },
            "board:goto": {
              value: this.goto.bind(this),
              information: {
                args: "boardName: string",
                message: "跳转至board。若board不存在，则创建board"
              }
            },
            "board:add": {
              value: this.add.bind(this),
              information: {
                args: "displayName: string, boardName: string, pageCount: number, opt?: {\n                        width: number,\n                        height: number,\n                        template: string,\n                        offset?: number\n                    }",
                message: "创建[pageCount]页数的board"
              }
            },
            "board:delete": {
              value: this.delete.bind(this),
              information: {
                args: "boardName: string",
                message: "删除board。只有当board数量大于1时可以删除board"
              }
            }
          }
        }
      }, {
        key: "import",
        value: function (e, t, n) {
          this.dispatch({
            type: this.type,
            action: "import",
            url: e,
            boardNames: t,
            overwrite: n
          })
        }
      }, {
        key: "goto",
        value: function (e) {
          e !== this.app.room.currIndex && this.dispatch({
            type: this.type,
            action: "goto",
            boardName: e
          })
        }
      }, {
        key: "add",
        value: function (e, t, n, r) {
          var a = Array.isArray(null == r ? void 0 : r.backupResultUrls) ?
            null == r ? void 0 : r.backupResultUrls : [];
          if (r) {
            var i = r.width,
              A = r.height;
            try {
              if (i / A > this.app.container.width / this.app.container
                .height) {
                var o = Math.max(this.app.container.width, 600);
                A = A / i * o, i = o
              } else {
                var s = Math.max(this.app.container.height, 600);
                i = i / A * s, A = s
              }
            } catch (e) {
              this.app.logger.error("[wb] add background error", e, i, A, this
                .app.container.width, this.app.container.height)
            }
            this.dispatch({
              type: this.type,
              action: "add",
              boardName: t,
              displayName: e,
              pageCount: n,
              w: i,
              h: A,
              tmpl: r.template,
              backupResultUrls: a,
              offset: r.offset ? r.offset : 0
            })
          } else this.dispatch({
            type: this.type,
            action: "add",
            boardName: t,
            displayName: e,
            pageCount: n
          })
        }
      }, {
        key: "delete",
        value: function (e) {
          var t = this.app.room.boards;
          if (e in t && (0, r.default)(t).length > 1) {
            var n = (0, r.default)(this.app.room.boards),
              a = this.app.room.currIndex;
            if (e === this.app.room.currIndex) {
              var i = n.indexOf(e);
              a = n[i === n.length - 1 ? i - 1 : i + 1]
            }
            "keepBoardCompat" === this.app.appConfig.deleteBoardBehavior ? (this
                .dispatch({
                  type: this.type,
                  action: "delete",
                  boardName: e
                }), this.dispatch({
                  type: this.type,
                  action: "goto",
                  boardName: a
                })) : "keepBoard" === this.app.appConfig.deleteBoardBehavior ?
              this.dispatch({
                type: this.type,
                action: "delete",
                boardName: e,
                nextBoard: a
              }) : this.dispatch({
                type: this.type,
                action: "delete",
                boardName: e
              })
          }
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.COPY_PASTE_SHIFT = void 0;
    var r = M(n(5)),
      a = M(n(7)),
      i = M(n(2)),
      A = M(n(0)),
      o = M(n(1)),
      s = M(n(3)),
      u = M(n(4)),
      l = M(n(9)),
      c = M(n(139)),
      d = n(19),
      h = n(15),
      p = n(29),
      f = n(143),
      g = n(31),
      y = M(n(32)),
      v = M(n(22)),
      m = n(28),
      w = n(39),
      B = n(14);

    function M(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var C = t.COPY_PASTE_SHIFT = 50;

    function I(e) {
      navigator.clipboard ? navigator.clipboard.writeText(e).then((function () {
        console.log("Async: Copying to clipboard was successful!")
      }), (function (e) {
        console.error("Async: Could not copy text: ", e)
      })) : function (e) {
        var t = document.createElement("textarea");
        t.value = e, t.style.top = "0", t.style.left = "0", t.style.position = "fixed",
          document.body.appendChild(t), t.focus(), t.select();
        try {
          var n = document.execCommand("copy") ? "successful" : "unsuccessful";
          console.log("Fallback: Copying text command was " + n)
        } catch (e) {
          console.error("Fallback: Oops, unable to copy", e)
        }
        document.body.removeChild(t)
      }(e)
    }
    var x = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "duplicate", e.description = "", e.copiedSnapshotArray = [], e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "复制当前选中的元素"
              }
            }
          }
        }
      }, {
        key: "copy",
        value: function (e) {
          var t = this,
            n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[
              1],
            r = (0, d.filterNonMediaOpIds)(this, this.opsManager.selectedOpIds);
          r.length > 0 && (this.copiedSnapshotArray = (0, c.default)(r.map((
              function (e) {
                return t.drawOpsOfPage[e]
              }))), n && e && (e.preventDefault(), e.stopPropagation(), I(
            "")))
        }
      }, {
        key: "paste",
        value: function (e) {
          var t, n, i, A = this,
            o = e.mx,
            s = e.my,
            u = e.fromWb,
            l = e.event,
            c = l && (l.clipboardData || window.clipboardData || l.originalEvent
              .clipboardData),
            h = c && c.items || [],
            p = c && c.getData("Text"),
            m = !1,
            w = !0,
            M = !1,
            C = void 0;
          try {
            for (var I, x = (0, a.default)(h); !(w = (I = x.next()).done); w = !
              0) {
              var b = I.value;
              if ("file" === b.kind && 0 === b.type.indexOf("image/")) {
                m = !0;
                var k = b.getAsFile();
                (0, g.showToast)({
                  type: "info",
                  msg: (0, B.getMsg)("pasteWait"),
                  time: 3,
                  msgType: y.default.PASTE_IMG_UPLOAD_WAIT
                }), (0, f.uploadMedia)(this.app, {
                  blob: k,
                  fileName: "temp.png",
                  mediaType: "image",
                  uploadprogress: function (e) {},
                  done: function (e, t) {
                    if ((0, g.hideToast)(), e) {
                      var n = (null == e ? void 0 : e.msg) || (null == e ?
                        void 0 : e.message) || (0, B.getMsg)(
                        "imgUploadFail");
                      (0, g.showToast)({
                        type: "error",
                        msg: n,
                        time: 3,
                        msgType: y.default.PASTE_IMG_UPLOAD_ERROR
                      }), A.logger.error("[wb] pasted image upload failed",
                        e)
                    } else if (!e) {
                      var a = A.dispatch((0, r.default)((0, r.default)({
                        type: "image",
                        url: t.url
                      }, A.app.appConfig.nosAntiLeech ? {
                        antiLeechProp: {
                          bucket: t.bucket,
                          object: t.object
                        }
                      } : {}), {
                        boundary: {
                          sx: (o || 0) - t.width / 2,
                          sy: (s || 0) - t.height / 2,
                          w: t.width,
                          h: t.height
                        }
                      }));
                      A.dispatch(A.opsManager.selectOp.getSnapshot([a]))
                    }
                  }
                })
              }
            }
          } catch (e) {
            M = !0, C = e
          } finally {
            try {
              !w && x.return && x.return()
            } finally {
              if (M) throw C
            }
          }
          var T = void 0;
          if (!m)
            if (u || !p) {
              if (this.copiedSnapshotArray.length > 0) {
                var E = this.getSnapshot(this.copiedSnapshotArray, o, s);
                T = E.duplicates.map((function (e) {
                  return e.opId
                }));
                var D = 0,
                  N = 0,
                  P = 0;
                for (P = 0; P < E.duplicates.length; P++) {
                  N += 700;
                  var Q = E.duplicates[P];
                  if ("pen" === Q.data.type) N += 13 * (Q.data.points || [])
                    .length;
                  else if ("shape" === Q.data.type) N += ((null === (t = Q.data
                    .text) || void 0 === t ? void 0 : t.value) || "").length;
                  else if ("text" === Q.data.type) N += (Q.data.text || "")
                    .length;
                  else if ("link" === Q.data.type) {
                    var O = (null === (i = null === (n = Q.data) || void 0 ===
                        n ? void 0 : n.text) || void 0 === i ? void 0 : i
                      .arr) || [],
                      _ = !0,
                      S = !1,
                      U = void 0;
                    try {
                      for (var F, L = (0, a.default)(O); !(_ = (F = L.next())
                          .done); _ = !0) {
                        N += (F.value.value || "").length
                      }
                    } catch (e) {
                      S = !0, U = e
                    } finally {
                      try {
                        !_ && L.return && L.return()
                      } finally {
                        if (S) throw U
                      }
                    }
                  }
                  N > 15e3 && (this.dispatch({
                    type: "duplicate",
                    duplicates: E.duplicates.slice(D, P + 1)
                  }, !0), D = P + 1, N = 0)
                }
                P > D && this.dispatch({
                  type: "duplicate",
                  duplicates: E.duplicates.slice(D, P + 1)
                }, !0)
              }
            } else if (!u && p) {
            var j = (p || "").slice(0, 1200);
            j = (0, d.convertWinTxtToUnixTxt)(j);
            var z = this.opsManager.textOp.getTextSize({
              text: j,
              fontSize: v.default.textDef.fontSize,
              fontFamily: v.default.textDef.fontFamily
            });
            T = [this.dispatch({
              boundary: {
                sx: (o || 0) - z.w / 2,
                sy: (s || 0) - z.h / 2,
                w: z.w,
                h: z.h
              },
              type: "text",
              stroke: v.default.textDef.stroke,
              fill: v.default.textDef.fill,
              text: j,
              fontSize: v.default.textDef.fontSize,
              fontFamily: v.default.textDef.fontFamily,
              textAlign: v.default.textDef.textAlign,
              inProgress: !1,
              skipUndo: !1
            })]
          }
          T && this.dispatch(this.opsManager.selectOp.getSnapshot(T))
        }
      }, {
        key: "execCommand",
        value: function () {
          this.copy(!1), this.paste({
            fromWb: !0,
            event: void 0
          })
        }
      }, {
        key: "getSnapshot",
        value: function (e, t, n) {
          var r = this,
            a = e.map((function (e) {
              return (0, h.getTransformedBoundary)(r.app.camera.scale, e
                .data)
            })).reduce((function (e, t) {
              return (0, h.combineBoundary)(e, t)
            })),
            i = C,
            A = C;
          "number" == typeof t && "number" == typeof n && (i = t - a.sx - a.w /
            2, A = n - a.sy - a.h / 2);
          var o = {};
          return (e = e.map((function (e) {
            var t = e.opId;
            return "link" !== (e = (0, c.default)(e)).data.type && (e
                .data.mat = (0, p.panMat)(e.data.mat, i, A)), e.opId = r
              .opsManager.currPage.getNextOpId(!0), o[t] = e.opId, e
          }))).forEach((function (e) {
            if ("link" === e.data.type) {
              var t = e.data;
              t.start.type === m.IEndPointType.COORD ? (t.start.x += i, t
                  .start.y += A) : o.hasOwnProperty(t.start.id) ? t.start
                .id = o[t.start.id] : t.start = {
                  type: m.IEndPointType.COORD,
                  x: (0, w.getLinkEndPos)(r.app, t.start, r).x + i,
                  y: (0, w.getLinkEndPos)(r.app, t.start, r).y + A,
                  aType: t.start.aType,
                  dir: t.start.dir
                }, t.end.type === m.IEndPointType.COORD ? (t.end.x += i, t
                  .end.y += A) : o.hasOwnProperty(t.end.id) ? t.end.id =
                o[t.end.id] : t.end = {
                  type: m.IEndPointType.COORD,
                  x: (0, w.getLinkEndPos)(r.app, t.end, r).x + i,
                  y: (0, w.getLinkEndPos)(r.app, t.end, r).y + A,
                  aType: t.end.aType,
                  dir: t.end.dir
                }, t.connPs.forEach((function (e) {
                  e.x += i, e.y += A
                }))
            }
          })), {
            type: this.type,
            duplicates: e
          }
        }
      }]), t
    }(l.default);
    t.default = x
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = h(n(16)),
      a = h(n(5)),
      i = h(n(2)),
      A = h(n(0)),
      o = h(n(1)),
      s = h(n(3)),
      u = h(n(4)),
      l = n(15),
      c = h(n(216)),
      d = h(n(22));

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "pen-arrow", e.description =
          "带箭头的涂鸦操作工具。\n首先使用op:pen-arrow:activate设置画布为涂鸦模式。通过op:pen-arrow:lineWidth, op:pen-arrow:color设置涂鸦的宽度和颜色。然后画布会监听鼠标动作，生成涂鸦。具体用法如下：",
          e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "getArrowPoints",
        value: function (e, t, n) {
          t = Number(t);
          var r = [];
          if (e.length < 3 || !e[0] || !e[1] || !e[2]) return r;
          if (e.length > 1 && n) {
            for (var a = e[e.length - 1], i = void 0, A = e.length - 2; A >=
              0 && A >= e.length - 30; A--) {
              var o = e[A];
              if (Math.abs(o[0] - a[0]) + Math.abs(o[1] - a[1]) > 1) {
                i = o;
                break
              }
            }
            void 0 === i && (i = e[A]);
            var s = [i, a],
              u = (0, l.getLineCoef)(s);
            if ((0, l.dist)(s[0], s[1]) > 1) {
              var c = s[1][0] - s[0][0] > 0 ? (0, l.getXFromCoefAndOffset)(s[1],
                  u, 1) : 2 * s[1][0] - (0, l.getXFromCoefAndOffset)(s[1], u,
                1),
                d = s[1][0] - s[0][0] == 0 ? s[1][1] + (s[1][1] - s[0][1] > 0 ?
                  1 : -1) : (0, l.getLineFromPointsY)(s, c);
              s.push([c, d])
            }
            r = (0, l.getArrowPoints)(t + 1, s)
          }
          return r
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          var t = this.points,
            n = !e && t.length > 2,
            r = this.getArrowPoints(t, d.default.penDef.lineWidth, n),
            i = this.opsManager.currPage.getOpId(),
            A = this.app.room.opIdSnapshotMap[i];
          if (!A || !A.snapshot.hasOwnProperty("category")) return (0, a
            .default)({
            points: t.slice(),
            arrowPoints: r,
            total: t.length
          }, this.getFreeDrawCommonProperty({
            inProgress: e
          }));
          var o = {
            boundary: this.getBoundaryRectOfFreeDraw()
          };
          return this.sampleSeq > 0 && e ? (0, a.default)((0, a.default)({},
          o), {
            points: t.slice(t.length - d.default.pointsPerBatch),
            total: t.length
          }) : this.sampleSeq > 0 ? (0, a.default)((0, a.default)({}, o), {
            points: t.slice(t.length - d.default.pointsPerBatch),
            arrowPoints: r,
            inProgress: e,
            total: t.length
          }) : (0, a.default)({
            points: t.slice(),
            arrowPoints: r,
            total: t.length
          }, this.getFreeDrawCommonProperty({
            inProgress: e
          }))
        }
      }, {
        key: "draw",
        value: function (e, t) {
          t.save();
          var n = e.data,
            a = this._draw(e, t);
          if (t.strokeStyle = n.stroke || n.color, t.lineWidth = n.lineWidth,
            "number" == typeof n.opacity && (t.globalAlpha = n.opacity), t
            .stroke(), 3 === n.arrowPoints.length) {
            var i = this.getArrowPoints(a, n.lineWidth, !0);
            3 === i.length && (t.beginPath(), t.moveTo.apply(t, (0, r.default)(
                i[0])), t.lineTo.apply(t, (0, r.default)(i[1])), t.lineTo
              .apply(t, (0, r.default)(i[2])), t.fillStyle = n.stroke || n
              .color, t.fill())
          }
          t.restore()
        }
      }]), t
    }(c.default);
    t.default = p
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(16)),
      a = p(n(5)),
      i = p(n(2)),
      A = p(n(0)),
      o = p(n(1)),
      s = p(n(3)),
      u = p(n(4)),
      l = n(15),
      c = p(n(226)),
      d = n(29),
      h = p(n(22));

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "line-arrow", e.description =
          "绘制带箭头线段。\n首先使用op:line-arrow:activate设置画布为线段模式。通过op:line-arrow:lineWidth, op:line-arrow:color设置线段的宽度和颜色。然后画布会监听鼠标动作，生成线段。具体用法如下：",
          e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          var t = !e && this.points.length > 2,
            n = [];
          if (this.points.length > 1 && t) {
            var r = [this.sp, this.ep];
            n = (0, l.getArrowPoints)(h.default.penDef.lineWidth + 1, r)
          }
          return (0, a.default)({
            arrowPoints: n
          }, this.getTwoPointShapeCommonProperty({
            inProgress: e
          }))
        }
      }, {
        key: "draw",
        value: function (e, t) {
          t.save();
          var n = e.data,
            a = this.getStartEndPointFromSnapshot(n),
            i = a.sp,
            A = a.ep,
            o = (0, d.getTransPoint)(i, n.mat),
            s = (0, d.getTransPoint)(A, n.mat);
          if (t.beginPath(), t.moveTo.apply(t, (0, r.default)(o)), t.lineTo
            .apply(t, (0, r.default)(s)), t.strokeStyle = n.stroke || n.color, t
            .lineWidth = n.lineWidth, "number" == typeof n.opacity && (t
              .globalAlpha = n.opacity), t.stroke(), 3 === n.arrowPoints.length
            ) {
            var u = (0, l.getArrowPoints)(Number(n.lineWidth) + 1, [o, s]);
            t.beginPath(), t.moveTo.apply(t, (0, r.default)(u[0])), t.lineTo
              .apply(t, (0, r.default)(u[1])), t.lineTo.apply(t, (0, r.default)(
                u[2])), t.fillStyle = n.stroke || n.color, t.fill()
          }
          t.restore()
        }
      }]), t
    }(c.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(5)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "element-eraser", e.description = "删除元素。", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "postMouseMove",
        value: function (e) {
          this.app.container.isTargetOnContainer(e.target) ? document.body.style
            .cursor = "url(" + n(235) + ") 2 13, auto" : document.body.style
            .cursor = "auto"
        }
      }, {
        key: "postMouseUp",
        value: function (e) {
          this.postClick(e)
        }
      }, {
        key: "postClick",
        value: function (e) {
          this.dispatch(this.getSelectionSnapshot(!1, []));
          var t = this.filterMediaIds(e);
          t.length > 0 && this.dispatch(this.opsManager.deleteOp.getSnapshot(t))
        }
      }, {
        key: "filterMediaIds",
        value: function (e) {
          var t = this;
          return e.filter((function (e) {
            var n = t.opsManager.drawOpsOfPage[e];
            return !n || !n.data || "audio" !== n.data.type && "video" !==
              n.data.type
          }))
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          return {
            type: "element-eraser",
            dependOn: e.slice()
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = (0, r.default)({}, e.data, {
            deleted: !0
          });
          return (0, r.default)({}, e, {
            data: n
          })
        }
      }]), t
    }(u(n(229)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = h(n(2)),
      a = h(n(0)),
      i = h(n(1)),
      A = h(n(3)),
      o = h(n(4)),
      s = h(n(9)),
      u = h(n(22)),
      l = n(19),
      c = n(134),
      d = h(c);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = (0, c.pointInterpFn)("point"),
      f = function (e) {
        function t() {
          (0, a.default)(this, t);
          var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
            arguments));
          return e.type = "laser", e.description = "镭射灯", e
        }
        return (0, o.default)(t, e), (0, i.default)(t, [{
          key: "eventsToListen",
          value: function () {
            return {
              activate: {
                value: !0,
                information: {
                  args: "",
                  message: "设置工具栏状态为：" + this.type
                }
              }
            }
          }
        }, {
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.opChange.tap("OpChange", this.handleOpChange
              .bind(this))
          }
        }, {
          key: "handleOpChange",
          value: function (e) {
            var t;
            "laser" !== e && "laser" === (null === (t = this.opsManager.currOp) ||
              void 0 === t ? void 0 : t.type) && (document.body.style.cursor =
              "default", this.dispatch(this.getSnapshot(!1)))
          }
        }, {
          key: "handleMouseLeave",
          value: function (e, t, n) {
            this.dispatch(this.getSnapshot(!1))
          }
        }, {
          key: "handleMouseMove",
          value: function (e, t, n) {
            var r = !0;
            this.app.container.isTargetOnContainer(e.target) ? document.body.style
              .cursor = "none" : (document.body.style.cursor = "auto", r = !1),
              this.dispatch(this.getSnapshot(r, [t, n]))
          }
        }, {
          key: "getSnapshot",
          value: function (e, t) {
            return {
              type: "laser",
              point: t,
              inProgress: e,
              skipUndo: !0,
              reuseOpType: "laser",
              color: u.default.penDef.stroke,
              nickname: this.app.nickname
            }
          }
        }, {
          key: "intepSnap",
          value: function (e) {
            return d.default.getSmootherSnapshot({
              app: this.app,
              snapshot: e,
              now: Date.now() + this.app.ntpTimeDiff,
              interpolateFn: p
            })
          }
        }, {
          key: "draw",
          value: function (e, t) {
            var n, r = e.data,
              a = Date.now() + this.app.ntpTimeDiff;
            if (this.app.isRecordPlayer) {
              if (this.app.player && (null === (n = this.app.player) || void 0 ===
                  n ? void 0 : n.lastTime) - e.data.recordTime > 9e4) return
            } else if (a - e.time > 9e4) return;
            var i = 6 / this.app.scale;
            e.data.inProgress && r.point && (t.save(), t.beginPath(), t.arc(r
                .point[0], r.point[1], i, 0, 2 * Math.PI, !0), t.shadowColor =
              "rgba(255, 0, 0, 0.5)", t.shadowBlur = 8, t.fillStyle = "#ff0000",
              t.fill(), t.restore(), e.uid !== this.app.account && this.app
              .appConfig.showLaserNickname && (0, l.drawUserName)({
                ctx: t,
                account: r.nickname || e.uid,
                scale: this.app.scale,
                px: r.point[0],
                py: r.point[1],
                bgColor: r.color
              }))
          }
        }]), t
      }(s.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(5)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "lock", e.description = "锁定元素。", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            lock: {
              value: this.lockOps.bind(this),
              information: {
                args: "opIds",
                message: "锁定元素"
              }
            },
            unlock: {
              value: this.unlockOps.bind(this),
              information: {
                args: "opIds",
                message: "解锁元素"
              }
            }
          }
        }
      }, {
        key: "lockOps",
        value: function (e) {
          this.dispatch(this.getSnapshot(e, "lock"))
        }
      }, {
        key: "unlockOps",
        value: function (e) {
          this.dispatch(this.getSnapshot(e, "unlock"))
        }
      }, {
        key: "getSnapshot",
        value: function (e, t) {
          return {
            type: this.type,
            action: t,
            dependOn: e.slice()
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = (0, r.default)({}, e.data, {
            locked: "lock" === t.action
          });
          return (0, r.default)({}, e, {
            data: n
          })
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(25)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(4)),
      u = d(n(11)),
      l = d(n(9)),
      c = n(142);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      p = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.type = "background", e.description = "设置背景操作", e
            .getBoundaryFromSnapshot = function (t) {
              var n = void 0;
              if (t.data.hasOwnProperty("imgWidth")) {
                var r = (0, c.getImageProperPosition)(e, t.data.imgWidth, t.data
                  .imgHeight);
                n = {
                  sx: r.sx,
                  sy: r.sy,
                  w: width,
                  h: height
                }
              } else n = t.data.boundary;
              return n
            }, e.dispatchImage = function (t, n, r, a) {
              var i = (0, c.getBackgroundImagePorperPosition)(e, n, r),
                A = i.sx,
                o = i.sy,
                s = i.width,
                u = i.height,
                l = a.page,
                d = a.antiLeechProp;
              l ? e.dispatchFromPage({
                type: e.type,
                url: t,
                antiLeechProp: d,
                boundary: {
                  sx: A,
                  sy: o,
                  w: s,
                  h: u
                }
              }, l) : e.dispatch({
                type: e.type,
                url: t,
                antiLeechProp: d,
                boundary: {
                  sx: A,
                  sy: o,
                  w: s,
                  h: u
                }
              })
            }, e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "eventsToListen",
          value: function () {
            return {
              "background:imageUpload": {
                value: this.addImage.bind(this),
                information: {
                  args: "url: string, opts?: {\n                        width?: number,\n                        height?: number,\n                        pageName?: string,\n                        boardName?: string\n                        antiLeechProp?: IAntiLeechProp\n                    }",
                  message: "上传背景图片"
                }
              }
            }
          }
        }, {
          key: "addImage",
          value: function (e, t) {
            return (0, c.addImage)(this.app, this, e, t)
          }
        }, {
          key: "preview",
          value: function (e, t, n) {
            var r = e.data;
            return (0, c.draw)(this.app, t, r.url, this.getBoundaryFromSnapshot(
              e), {
                page: n.page,
                supportToDataUrl: n.supportToDataUrl,
                preview: !0,
                backupUrls: e.data.backupUrls || [],
                antiLeechProp: r.antiLeechProp
              })
          }
        }, {
          key: "draw",
          value: function (e, t, n) {
            var r = e.data;
            return (0, c.draw)(this.app, t, r.url, this.getBoundaryFromSnapshot(
              e), {
                page: n.page,
                id: e.opId,
                type: "background",
                backupUrls: e.data.backupUrls || [],
                antiLeechProp: r.antiLeechProp
              })
          }
        }, {
          key: "waitTilReady",
          value: function (e) {
            return h(this, void 0, void 0, r.default.mark((function t() {
              var n = this;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!this.app.resourceCache.resourceLoaded(e
                        .data.url)) {
                      t.next = 4;
                      break
                    }
                    return t.abrupt("return", u.default
                  .resolve());
                  case 4:
                    return t.abrupt("return", new u.default((
                      function (t) {
                        n.app.resourceCache.fetchResource({
                          urlArr: e.data.url,
                          antiLeechProp: e.data
                            .antiLeechProp,
                          cb: function () {
                            t()
                          }
                        })
                      })));
                  case 5:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }]), t
      }(l.default);
    t.default = p
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(2)),
      a = p(n(0)),
      i = p(n(1)),
      A = p(n(3)),
      o = p(n(4)),
      s = p(n(9)),
      u = n(67),
      l = n(98),
      c = n(31),
      d = p(n(32)),
      h = n(14);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "pan", e.activate = !1, e.description = "平移操作", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.pan.tap("pan", this.handlePan.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            activate: {
              value: !0,
              information: {
                args: "",
                message: "设置工具栏状态为：" + this.type
              }
            }
          }
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n, r, a) {
          if (this.app.appConfig.cameraTransformEnabled && (0, l.shouldDispatch)
            (this.app)) {
            if (this.activate) document.body.style.cursor = "grabbing";
            else {
              if (this.app.container.isTargetOnContainer(e.target))
              return document.body.style.cursor = "grab", !0;
              document.body.style.cursor = "auto"
            }
            return this.activate && this.lastPoint ? (this.dispatch(this
                .getSnapshot(r - this.lastPoint[0], a - this.lastPoint[1])),
              this.lastPoint = [r, a], !0) : void 0
          }
        }
      }, {
        key: "handlePan",
        value: function (e, t, n) {
          if (this.app.appConfig.cameraTransformEnabled) {
            if ((0, l.shouldDispatch)(this.app) || (0, l.shouldDispatch)(this
                .app)) return this.dispatch(this.getSnapshot(t, n)), !0;
            (0, c.showToast)({
              msg: (0, h.getMsg)("follow"),
              type: "info",
              msgType: d.default
                .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
              args: {
                broadcasterName: this.app.vision.broadcasterName,
                broadcaster: this.app.vision.broadcaster
              }
            })
          }
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n, r, a) {
          this.app.appConfig.cameraTransformEnabled && ((0, l.shouldDispatch)(
            this.app) ? (this.activate = !0, this.beginBatch(), this
            .lastPoint = [r, a]) : (0, c.showToast)({
            msg: (0, h.getMsg)("follow"),
            type: "info",
            msgType: d.default
              .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
            args: {
              broadcasterName: this.app.vision.broadcasterName,
              broadcaster: this.app.vision.broadcaster
            }
          }))
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n, r, a) {
          this.app.appConfig.cameraTransformEnabled && (0, l.shouldDispatch)(
            this.app) && (this.activate && this.lastPoint && (this.dispatch(
            this.getSnapshot(r - this.lastPoint[0], a - this.lastPoint[1])
            ), this.lastPoint = void 0), this.activate = !1)
        }
      }, {
        key: "getSnapshot",
        value: function (e, t) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "pan",
            dx: -e,
            dy: -t,
            animate: !1
          })
        }
      }]), t
    }(s.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(2)),
      a = p(n(0)),
      i = p(n(1)),
      A = p(n(3)),
      o = p(n(4)),
      s = p(n(9)),
      u = n(67),
      l = n(98),
      c = n(31),
      d = p(n(32)),
      h = n(14);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "zoom", e.sp = [0, 0], e.description = "缩放操作", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.mousewheel.tap("MousewheelPlugin", this
            .handleMouseWheel.bind(this)), this.opsManager.hooks.scale.tap(
            "Scale", this.handleScale.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "zoom:in": {
              value: this.zoomIn.bind(this),
              information: {
                args: "",
                message: "缩放"
              }
            },
            "zoom:out": {
              value: this.zoomOut.bind(this),
              information: {
                args: "",
                message: "缩放"
              }
            },
            "zoom:to": {
              value: this.zoomTo.bind(this),
              information: {
                args: "scale: number, animate: boolean",
                message: "缩放"
              }
            }
          }
        }
      }, {
        key: "handleScale",
        value: function (e, t, n, r) {
          if (this.app.appConfig.cameraTransformEnabled)
            if ((0, l.shouldDispatch)(this.app)) {
              var a = this.getProperScale(t);
              null !== a && (this.beginBatch(), this.dispatch(this.getSnapshot(
                a, !1, [n, r])))
            } else(0, c.showToast)({
              msg: (0, h.getMsg)("follow"),
              type: "info",
              msgType: d.default
                .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
              args: {
                broadcasterName: this.app.vision.broadcasterName,
                broadcaster: this.app.vision.broadcaster
              }
            })
        }
      }, {
        key: "handleMouseWheel",
        value: function (e, t, n, r, a) {
          if (this.app.appConfig.cameraTransformEnabled)
            if ((0, l.shouldDispatch)(this.app)) {
              var i = void 0,
                A = this.app.appConfig.zoomSensitivity;
              if ("gesturestart" !== e.type)
                if ("gestureend" !== e.type) {
                  if ("gesturechange" === e.type) {
                    if (void 0 === this.gestureLastScale) return void(this
                      .gestureLastScale = e.scale);
                    i = e.scale / this.gestureLastScale, this.gestureLastScale =
                      e.scale
                  } else A = (1 - ("DOMMouseScroll" === e.type ? 1.1 : Math.abs(
                      e.deltaY) < 20 ? Math.max(Math.min(Math.pow(Math.abs(e
                      .deltaY) / 4, 2), .8), .1) : Math.max(Math.min(Math
                      .pow(Math.abs(e.deltaY) / 150, 2), 1), .5))) * (1 - A) +
                    A, i = "DOMMouseScroll" === e.type ? e.detail > 0 ? A : 1 /
                    A : e.deltaY > 0 ? A : 1 / A;
                  var o = this.getProperScale(i);
                  null !== o && (this.isMouseDown || this.app.container
                    .isTargetOnContainer(e.target) && (this.beginBatch(), this
                      .dispatch(this.getSnapshot(o, !1, [r, a]))))
                } else this.gestureLastScale = void 0;
              else this.gestureLastScale = e.scale
            } else(0, c.showToast)({
              msg: (0, h.getMsg)("follow"),
              type: "info",
              msgType: d.default
                .NOT_ALLOWED_SET_CAMERA_WHILE_FOLLOW_BROADCASTER,
              args: {
                broadcasterName: this.app.vision.broadcasterName,
                broadcaster: this.app.vision.broadcaster
              }
            })
        }
      }, {
        key: "zoomIn",
        value: function () {
          if ((0, l.shouldDispatch)(this.app)) {
            var e = this.getProperScale(1 / this.app.appConfig.zoomSensitivity);
            if (null !== e) return this.beginBatch(), this.dispatch(this
              .getSnapshot(e, !1))
          }
        }
      }, {
        key: "zoomOut",
        value: function () {
          if ((0, l.shouldDispatch)(this.app)) {
            var e = this.getProperScale(this.app.appConfig.zoomSensitivity);
            if (null !== e) return this.beginBatch(), this.dispatch(this
              .getSnapshot(e, !1))
          }
        }
      }, {
        key: "zoomTo",
        value: function (e, t) {
          if ((0, l.shouldDispatch)(this.app)) return this.beginBatch(), this
            .dispatch(this.getSnapshot(e / this.app.scale, t))
        }
      }, {
        key: "getSnapshot",
        value: function (e, t, n) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "zoom",
            animate: t,
            center: n,
            scale: e
          })
        }
      }, {
        key: "getProperScale",
        value: function (e) {
          return e > 1 ? this.app.camera.zoomFactor >= this.app.appConfig
            .cameraMaxZoom ? null : this.app.camera.zoomFactor * e >= this.app
            .appConfig.cameraMaxZoom ? this.app.appConfig.cameraMaxZoom / this
            .app.camera.zoomFactor : e : e < 1 ? this.app.camera.zoomFactor <=
            this.app.appConfig.cameraMinZoom ? null : this.app.camera
            .zoomFactor * e <= this.app.appConfig.cameraMinZoom ? this.app
            .appConfig.cameraMinZoom / this.app.camera.zoomFactor : e : e
        }
      }]), t
    }(s.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(2)),
      a = c(n(0)),
      i = c(n(1)),
      A = c(n(3)),
      o = c(n(4)),
      s = c(n(9)),
      u = n(67),
      l = n(98);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "reset-camera", e.description = "重置视角", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
            arguments[0];
          if ((0, l.shouldDispatch)(this.app)) return this.dispatch(this
            .getSnapshot(e))
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "reset-camera",
            animate: e
          })
        }
      }]), t
    }(s.default);
    t.default = d
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = y(n(36)),
      a = y(n(2)),
      i = y(n(0)),
      A = y(n(1)),
      o = y(n(3)),
      s = y(n(4)),
      u = y(n(9)),
      l = y(n(225)),
      c = y(n(235)),
      d = y(n(324)),
      h = y(n(22)),
      p = n(19),
      f = n(134),
      g = y(f);

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var v = new Image,
      m = new Image,
      w = new Image;
    v.src = l.default, m.src = c.default, w.src = d.default;
    var B = (0, f.pointInterpFn)("point"),
      M = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.type = "mouse-pointer", e.description = "展示鼠标位置", e.sampleSeq = 0, e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.mousemove.tap("MousemovePlugin", this
                .handleMouseMove.bind(this)), this.opsManager.hooks.mouseleave
              .tap("MousemovePlugin", this.handleMouseLeave.bind(this))
          }
        }, {
          key: "handleMouseMove",
          value: function (e, t, n) {
            var r;
            if (this.app.showCursor && "laser" !== (null === (r = this.opsManager
                .currOp) || void 0 === r ? void 0 : r.type)) {
              var a = this.app.container.isTargetOnContainer(e.target);
              this.sampleSeq % 6 == 0 && this.dispatch(this.getSnapshot([t, n],
                a)), this.sampleSeq += 1
            }
          }
        }, {
          key: "handleMouseLeave",
          value: function (e, t, n) {
            var r;
            this.app.showCursor && "laser" !== (null === (r = this.opsManager
              .currOp) || void 0 === r ? void 0 : r.type) && (this.dispatch(this
              .getSnapshot([t, n], !1)), this.sampleSeq = 0)
          }
        }, {
          key: "getSnapshot",
          value: function (e, t) {
            return {
              type: "mouse-pointer",
              point: [Number(e[0].toFixed(1)), Number(e[1].toFixed(1))],
              c: h.default.penDef.stroke,
              show: t ? 1 : 0,
              op: this.opsManager.currOp ? this.opsManager.currOp.type : "",
              reuseOpType: "mouse-pointer",
              nickname: this.app.nickname,
              inProgress: !0
            }
          }
        }, {
          key: "preview",
          value: function () {}
        }, {
          key: "intepSnap",
          value: function (e) {
            return g.default.getSmootherSnapshot({
              app: this.app,
              snapshot: e,
              now: Date.now() + this.app.ntpTimeDiff,
              interpolateFn: B
            })
          }
        }, {
          key: "draw",
          value: function (e, t) {
            var n, a = (new Date).valueOf();
            if (this.app.isRecordPlayer) {
              if (this.app.player && (null === (n = this.app.player) || void 0 ===
                  n ? void 0 : n.lastTime) - e.data.recordTime > 5e3) return
            } else if (a - e.time > 5e3) return;
            var i = e.data;
            if (e.uid !== this.app.account && i.show && i.point) {
              var A = this.getImageByOpType(i.op),
                o = this.mapPointInsideContainer(i.point[0], i.point[1]),
                s = (0, r.default)(o, 2),
                u = s[0],
                l = s[1]; - 1 !== this.opsManager.drawOpTypes.indexOf(i.op) && (
                u -= 1 / this.app.scale, l -= 27 / this.app.scale);
              var c = 32 / this.app.scale;
              t.drawImage(A, u, l, c, c), this.app.appConfig.showCursorNickname &&
                (0, p.drawUserName)({
                  ctx: t,
                  account: i.nickname || e.uid,
                  scale: this.app.scale,
                  px: u,
                  py: l,
                  bgColor: i.c
                })
            }
          }
        }, {
          key: "mapPointInsideContainer",
          value: function (e, t) {
            var n = this.app.camera.convertToPointInWorld(0, 0),
              a = (0, r.default)(n, 2),
              i = a[0],
              A = a[1],
              o = this.app.camera.convertToPointInWorld(this.app.container.width,
                this.app.container.height),
              s = (0, r.default)(o, 2),
              u = s[0],
              l = s[1];
            return e < i + 30 ? e = i + 30 : e > u - 25 && (e = u - 25), t < A +
              30 ? t = A + 30 : t > l - 15 && (t = l - 15), [e, t]
          }
        }, {
          key: "getImageByOpType",
          value: function (e) {
            return "element-eraser" === e ? m : -1 !== this.opsManager.drawOpTypes
              .indexOf(e) ? v : w
          }
        }]), t
      }(u.default);
    t.default = M
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MzA2MTkyNDQ5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU2IDBsNjEyLjY1MDY2NyA1NzMuODI0LTI1MC4yODI2NjcgMjIuNzQxMzMzLTQ1LjQ0IDQuMDk2IDE4LjkwMTMzMyA0MS41NTczMzMgMTUxLjg1MDY2NyAzMzIuNTQ0TDYzMS42OCAxMDI0bC0xNDQuODk2LTMzNi4xMjgtMTguMTc2LTQyLjM2OC0zMy41Nzg2NjcgMzEuNTMwNjY3LTE3Ny43OTIgMTY2Ljc0MTMzM0wyNTYgMCIgcC1pZD0iMjA5NyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(2)),
      a = l(n(0)),
      i = l(n(1)),
      A = l(n(3)),
      o = l(n(4)),
      s = l(n(9)),
      u = n(67);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "resize-camera", e.description = "重置视角", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.resize.tap("ResizePlugin", this.handleResize
            .bind(this))
        }
      }, {
        key: "handleResize",
        value: function (e, t, n) {
          if (t && n)
            if ("follower" === this.app.vision.mode) this.app.camera
              .updateTransParamAndRefresh();
            else {
              var r = this.app.camera,
                a = this.app.camera.getNextCameraBound({
                  type: "resize-camera",
                  width: t,
                  height: n,
                  animate: !1
                });
              Math.abs(a.centerX - r.centerX), Math.abs(a.centerY - r.centerY),
                Math.abs(a.width - r.width), Math.abs(a.height - r.height);
              this.dispatch(this.getSnapshot(t, n))
            }
          else this.logger.warn("[wb] resize 宽高无效", t, n)
        }
      }, {
        key: "getSnapshot",
        value: function (e, t) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "resize-camera",
            width: e,
            height: t,
            animate: !1
          })
        }
      }]), t
    }(s.default);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(2)),
      a = c(n(0)),
      i = c(n(1)),
      A = c(n(3)),
      o = c(n(4)),
      s = c(n(9)),
      u = n(67),
      l = n(98);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "fit-to-content", e.description = "缩放至完全包含内容", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
            arguments[0];
          if ((0, l.shouldDispatch)(this.app)) return this.dispatch(this
            .getSnapshot(e))
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "fit-to-content",
            animate: e
          })
        }
      }]), t
    }(s.default);
    t.default = d
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(2)),
      a = c(n(0)),
      i = c(n(1)),
      A = c(n(3)),
      o = c(n(4)),
      s = c(n(9)),
      u = n(67),
      l = n(98);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "fit-to-doc", e.description = "缩放至完全包含文档", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "执行" + this.type + "事件"
              }
            }
          }
        }
      }, {
        key: "execCommand",
        value: function () {
          var e = !(arguments.length > 0 && void 0 !== arguments[0]) ||
            arguments[0];
          if ((0, l.shouldDispatch)(this.app) && (this.app.room.currBoard
              .currPage.backgroundSnapshot || this.app.room.currBoard
              .transDocSnapshot)) return this.dispatch(this.getSnapshot(e))
        }
      }, {
        key: "getSnapshot",
        value: function (e) {
          return (0, u.convertToCameraBoundSnapshot)(this.app.camera, {
            type: "fit-to-doc",
            animate: e
          })
        }
      }]), t
    }(s.default);
    t.default = d
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "rect-fill", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "getSnapshot",
        value: function (e) {
          return this.getTwoPointShapeCommonProperty({
            inProgress: e
          })
        }
      }]), t
    }(s(n(233)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "ellipse-fill", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "getSnapshot",
        value: function (e) {
          return this.getTwoPointShapeCommonProperty({
            inProgress: e
          })
        }
      }]), t
    }(s(n(234)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "video", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            "video:insert": {
              value: this.addMedia.bind(this),
              information: {
                args: "url: string, opts: {\n                        width: number,\n                        sourceType: string,\n                        title?: string\n                        pageName?: string\n                        boardName?: string\n                        antiLeechProp?: IAntiLeechProp\n                    }",
                message: "上传视频"
              }
            }
          }
        }
      }, {
        key: "preview",
        value: function (e, t, n) {
          var r = e.data;
          if (t.save(), r.mat) {
            var a = r.mat;
            t.transform(a[0][0], a[1][0], a[0][1], a[1][1], a[0][2], a[1][2])
          }
          var i = r.boundary;
          try {
            this.app.resourceCache.mediaResourceLoaded(r.url, "video") && !n
              .supportToDataUrl ? t.drawImage(this.app.resourceCache
                .getMediaResource(r.url), i.sx, i.sy, i.w, i.h) : this.app
              .resourceCache.mediaResourceLoaded(r.url, this.type) || (n.page
                .addWaitingResource(r.url), this.app.resourceCache
                .fetchMediaResource({
                  antiLeechProp: r.antiLeechProp,
                  url: r.url,
                  sourceType: r.sourceType,
                  type: this.type,
                  cb: function () {
                    n.page.removeWaitingResource(r.url)
                  }
                }))
          } catch (e) {
            this.app.logger.error("[wb] video preview error:", e.message)
          }
          t.restore()
        }
      }]), t
    }(s(n(144)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(25)),
      a = s(n(5)),
      i = s(n(0)),
      A = s(n(1)),
      o = s(n(11));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e, t, n, r) {
        return new(n || (n = o.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      l = function () {
        function e(t, n, r) {
          (0, i.default)(this, e), this.recordTime = 0, this.destroyed = !1, this
            .ifreamLoaded = !1, this.opId = t.opId, this.boardName = t.board, this
            .pageName = t.page.toString(), this.mediaOwner = t.uid, this.app = n, this
            .operation = r, this.type = r.type, this.title = t.data.title, this
            .ifreamLoaded = !1, this.app.on("event:prePageChange", this
              .handlePrePageChange)
        }
        return (0, A.default)(e, [{
          key: "handlePrePageChange",
          value: function (e) {
            this.app && this.app.room.getPage(this.boardName, this.pageName) &&
              this.boardName === this.app.room.currIndex && this.pageName === this
              .app.room.currBoard.currIndex.toString() && "delete" !== e.data
              .action && this.onPrePageChange(e.uid)
          }
        }, {
          key: "mountElement",
          value: function (e, t) {
            var n;
            try {
              var r = document.createElement("div");
              r.style.position = "relative", r.style.width = "100%", r.style
                .height = this.app.container.canvas.clientHeight + "px", e
                .appendChild(r);
              var i = this.app.resourceCache.getMediaResource(t).cloneNode(!0);
              r.appendChild(i), (0, a.default)(i.style, {
                  webkitUserSelect: "none",
                  userSelect: "none",
                  width: "100%",
                  height: "100%",
                  pointerEvents: "none"
                }), this.media = i, i.allowFullscreen = !0, i.allow =
                "autoplay; microphone; camera", "mouse" === (null === (n = this
                  .app.opsManager.currOp) || void 0 === n ? void 0 : n.type) ? i
                .style.pointerEvents = "auto" : i.style.pointerEvents = "none",
                this.mediaDiv = e, this.addMediaListener()
            } catch (e) {
              console.log("[UrlOp] iframe mountElement: ", e)
            }
          }
        }, {
          key: "refreshElementStyle",
          value: function (e) {
            if (console.log("[UrlOp] iframe refreshElementStyle: ", e), this
              .media) {
              var t = e.containerWidth / e.boundaryWidth,
                n = e.containerHeight / e.boundaryHeight;
              this.media.style.width = e.boundaryWidth + "px", this.media.style
                .height = e.boundaryHeight + "px", this.media.style.transform =
                "scale(" + t + ", " + n + ")", this.media.style.transformOrigin =
                "0 0"
            }
          }
        }, {
          key: "addMediaListener",
          value: function () {
            var e = this;
            this.media && (this.media.addEventListener("load", (function (t) {
              console.log("[UrlOp] iframe load: ", t), e.ifreamLoaded = !0
            })), this.media.addEventListener("error", (function (e) {
              console.log("[UrlOp] iframe error: ", e)
            })))
          }
        }, {
          key: "replaySeekDiff",
          value: function () {
            return this.app.player ? (this.app.player.lastTime - this
              .recordTime) / 1e3 : 0
          }
        }, {
          key: "destroy",
          value: function () {
            var e;
            console.log("urlPlugin destroy()"), this.app.enableCameraTransform(!
              0), this.app.off("event:prePageChange", this.handlePrePageChange),
              this.onPluginWillDestroy();
            var t = this.app.container.el.querySelector("[id='" + this.opId +
              "']");
            null === (e = null == t ? void 0 : t.parentNode) || void 0 === e || e
              .removeChild(t), this.destroyed = !0, this.ifreamLoaded = !1
          }
        }, {
          key: "onReceiveAttributes",
          value: function (e) {
            return u(this, void 0, void 0, r.default.mark((function t() {
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    ({
                      play: !1,
                      seek: 0,
                      ended: !1
                    }), console.log(
                      "UrlPlugin onReceiveAttributes() 接收到来自于其他用户的iframe属性更新: ",
                      e);
                  case 2:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "onSizeChange",
          value: function (e) {
            console.log("UrlPlugin onSizeChange() width: ", e.width, "height: ", e
              .height)
          }
        }, {
          key: "setIframePointer",
          value: function (e) {
            console.log("UrlPlugin setIframePointerEvents() value: ", e), this
              .media && (0, a.default)(this.media.style, {
                pointerEvents: e
              })
          }
        }, {
          key: "onAttributeUpdated",
          value: function (e) {}
        }, {
          key: "onPlaySpeedChange",
          value: function (e) {}
        }, {
          key: "onPrePageChange",
          value: function (e) {}
        }, {
          key: "onPluginWillDestroy",
          value: function () {}
        }], [{
          key: "getElementWidth",
          value: function (e) {
            return 1280
          }
        }, {
          key: "getElementHeight",
          value: function (e) {
            return 720
          }
        }]), e
      }();
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(5)),
      a = p(n(2)),
      i = p(n(0)),
      A = p(n(1)),
      o = p(n(3)),
      s = p(n(4)),
      u = p(n(237)),
      l = p(n(238)),
      c = p(n(342)),
      d = n(240),
      h = n(14);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "onSizeChange",
        value: function (e) {
          this.headerWidget && this.controlWidget && (this.headerWidget.style
            .visibility = e.height > 130 && e.width > 180 ? "visible" :
            "hidden", this.controlWidget.style.visibility = e.height > 130 &&
            e.width > 180 ? "visible" : "hidden")
        }
      }, {
        key: "getTitle",
        value: function () {
          return this.title ? this.title : "视频文件"
        }
      }, {
        key: "createControllor",
        value: function () {
          var e = document.createElement("div");
          this.progressController = new u.default(this.app, 0, {
            emitEvent: this.allowControl()
          });
          var t = this.createControlContainer(),
            n = this.createPlayWidget(),
            r = this.createTimeIndicator(),
            a = this.createVolumeWidget(),
            i = this.createFullWidget(),
            A = this.createC2pWidget();
          return e.appendChild(this.progressController.widget), e.appendChild(
            t), t.appendChild(n), t.appendChild(r), t.appendChild(a), t
            .appendChild(A), t.appendChild(i), e.style.userSelect = "none", e
            .style.webkitUserSelect = "none", e.className = "media-control",
            this.controlWidget = e, e
        }
      }, {
        key: "createFullWidget",
        value: function () {
          var e = document.createElement("div");
          (0, r.default)(e.style, {
            display: "inline-flex",
            height: "40px",
            color: "white",
            flexDirection: "row",
            alignItems: "center",
            verticalAlign: "top",
            marginRight: "16px",
            marginLeft: "auto"
          });
          var t = document.createElement("div");
          return (0, d.appendTooltip)(e, (0, h.getMsg)("Maximize")), (0, r
            .default)(t.style, {
            display: "inline-block",
            height: "20px",
            width: "20px",
            backgroundImage: "url(" + c.default+")",
            backgroundSize: "contain",
            pointerEvents: "auto",
            cursor: "pointer",
            marginLeft: "10px"
          }), e.appendChild(t), this.fullIcon = t, e
        }
      }], [{
        key: "getElementWidth",
        value: function (e) {
          return 550
        }
      }, {
        key: "getElementHeight",
        value: function (e) {
          var t = e;
          return t.videoWidth && t.videoHeight ? 550 * t.videoHeight / t
            .videoWidth : 250
        }
      }]), t
    }(l.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(25)),
      a = s(n(5)),
      i = s(n(0)),
      A = s(n(1)),
      o = s(n(11));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e, t, n, r) {
        return new(n || (n = o.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      l = function () {
        function e(t, n, r) {
          var a = this;
          (0, i.default)(this, e), this.recordTime = 0, this.handlePrePageChange =
            function (e) {
              a.app.room.getPage(a.boardName, a.pageName) && a.boardName === a.app.room
                .currIndex && a.pageName === a.app.room.currBoard.currIndex.toString() &&
                "delete" !== e.data.action && a.onPrePageChange(e.uid)
            }, this.handlePlayerPlay = function () {
              a.boardName === a.app.room.currIndex && a.pageName === a.app.room.currBoard
                .currIndex.toString() && a.onAttributeUpdated(a.data)
            }, this.handlePlayerPause = function () {
              a.boardName === a.app.room.currIndex && a.pageName === a.app.room.currBoard
                .currIndex.toString() && a.onAttributeUpdated(a.data)
            }, this.handlePlayerSeekTo = function () {
              var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
              clearTimeout(a.seekToTimer), e > 30 || a.boardName === a.app.room
                .currIndex && a.pageName === a.app.room.currBoard.currIndex.toString() &&
                (a.media ? a.onAttributeUpdated(a.data) : a.seekToTimer = setTimeout((
                  function () {
                    a.handlePlayerSeekTo(e + 1)
                  }), 100))
            }, this.handlePlayerPlaySpeed = function (e) {
              a.onPlaySpeedChange(e)
            }, this.opId = t.opId, this.boardName = t.board, this.pageName = t.page
            .toString(), this.mediaOwner = t.uid, this.app = n, this.operation = r, this
            .type = r.type, this.title = t.data.title, this.data = t.data.mediaData || {
              play: !1,
              seek: 0,
              ended: !1
            }, this.app.player && (this.app.on("event:player:play", this
              .handlePlayerPlay), this.app.on("event:player:pause", this
                .handlePlayerPause), this.app.on("event:player:seekTo", this
                .handlePlayerSeekTo), this.app.on("event:player:playSpeed", this
                .handlePlayerPlaySpeed)), this.app.on("event:prePageChange", this
              .handlePrePageChange)
        }
        return (0, A.default)(e, [{
          key: "allowControl",
          value: function () {
            return !0
          }
        }, {
          key: "isInReplay",
          value: function () {
            return this.app.isRecordPlayer
          }
        }, {
          key: "replayMode",
          value: function () {
            return this.app.player ? this.app.player.state : "pause"
          }
        }, {
          key: "replaySeekDiff",
          value: function () {
            return this.app.player ? (this.app.player.lastTime - this
              .recordTime) / 1e3 : 0
          }
        }, {
          key: "destroy",
          value: function () {
            var e;
            this.app.off("event:prePageChange", this.handlePrePageChange), this
              .app.player && (this.app.off("event:player:play", this
                .handlePlayerPlay), this.app.off("event:player:pause", this
                .handlePlayerPause), this.app.off("event:player:seekTo", this
                .handlePlayerSeekTo), this.app.off("event:player:playSpeed",
                this.handlePlayerPlaySpeed)), this.onPluginWillDestroy();
            var t = this.app.container.el.querySelector("[id='" + this.opId +
              "']");
            null === (e = null == t ? void 0 : t.parentNode) || void 0 === e || e
              .removeChild(t)
          }
        }, {
          key: "putAttributes",
          value: function (e) {
            var t = this.app.room.getPage(this.boardName, this.pageName);
            t && this.operation.dispatchFromPage({
              dependOn: this.opId,
              skipUndo: !0,
              type: this.type,
              reuseOpType: this.opId + "-" + this.type + "-action",
              mediaData: (0, a.default)((0, a.default)({}, this.data), e)
            }, t)
          }
        }, {
          key: "onReceiveAttributes",
          value: function (e) {
            return u(this, void 0, void 0, r.default.mark((function t() {
              var n, a;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (n = {
                        play: !1,
                        seek: 0,
                        ended: !1
                      }, e.data.hasOwnProperty("mediaData"))
                      for (a in n = e.data.mediaData || {}, this
                        .data) n.hasOwnProperty(a) || (n[a] = this
                        .data[a]);
                    return this.recordTime = e.data.recordTime ||
                      0, t.next = 5, this.onAttributeUpdated(n);
                  case 5:
                    this.data = n;
                  case 6:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }], [{
          key: "getElementWidth",
          value: function (e) {
            return 600
          }
        }, {
          key: "getElementHeight",
          value: function (e) {
            return 340
          }
        }]), e
      }();
    t.default = l
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iLTYwMCAtNjAwIDIyMjQgMjIyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBmaWxsPScjZmZmZmZmJyB0PSIxNjIwODcxNDY4NTkwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTU2OS44OTg2NjcgMjc1LjJjLTIuMTMzMzMzLTIwLjczNi00LjM5NDY2Ny00Mi4yNC05Ljg5ODY2Ny02My43NDRDNTQ1LjA2NjY2NyAxNjAuMDg1MzMzIDUwMy41MDkzMzMgMTI4IDQ1OS4wMDggMTI4Yy0yNC44MzItMC4wODUzMzMtNTYuMjM0NjY3IDE1LjE4OTMzMy03NC4wNjkzMzMgMzAuNzJsLTE0Ny42MjY2NjcgMTIzLjYwNTMzM2gtNzcuMjI2NjY3Yy01Ni44NzQ2NjcgMC0xMDIuNTcwNjY3IDQzLjgxODY2Ny0xMTEuMjMyIDEwNy4wOTMzMzQtNy4zMzg2NjcgNjAuNzU3MzMzLTkuMTMwNjY3IDE3NS4zNiAwIDI0Mi4yMTg2NjYgNy45MzYgNjYuODU4NjY3IDUxLjYyNjY2NyAxMTAuMDM3MzMzIDExMS4yMzIgMTEwLjAzNzMzNGg3Ny4yMjY2NjdsMTUwLjQ4NTMzMyAxMjUuNDRjMTUuNDQ1MzMzIDEzLjQ0IDQyLjY2NjY2NyAyOC44NDI2NjcgNjcuNzU0NjY3IDI4Ljg0MjY2Nmw0LjQ4IDAuMDQyNjY3YzQ1LjM1NDY2NyAwIDg1LjMzMzMzMy0zMy4yOCAxMDAuMjY2NjY3LTg0LjQ4IDUuNjc0NjY3LTIxLjcxNzMzMyA3LjY4LTQyLjAyNjY2NyA5LjU1NzMzMy02MS42NTMzMzNsMC4wNDI2NjctMC4zNDEzMzQgMi4wMDUzMzMtMTkuNTg0YzcuNjgtNjMuNDQ1MzMzIDcuNjgtMzcyLjg2NCAwLTQzNS44NGwtMi4wMDUzMzMtMTguODU4NjY2eiBtMTcyLjggMS45MmEzOC42OTg2NjcgMzguNjk4NjY3IDAgMCAwLTU0LjU3MDY2Ny0xMC4xMTIgNDAuODMyIDQwLjgzMiAwIDAgMC05LjcyOCA1NS44MDhjMzQuMjE4NjY3IDUwLjQzMiA1My4wMzQ2NjcgMTE3LjU4OTMzMyA1My4wMzQ2NjcgMTg5LjE4NCAwIDcxLjU1Mi0xOC44MTYgMTM4Ljc1Mi01My4wMzQ2NjcgMTg5LjE4NGE0MC43ODkzMzMgNDAuNzg5MzMzIDAgMCAwIDkuODEzMzMzIDU1LjgwOCAzOC42MTMzMzMgMzguNjEzMzMzIDAgMCAwIDU0LjQ4NTMzNC0xMC4xMTJjNDMuMTc4NjY3LTYzLjY1ODY2NyA2Ny4wMjkzMzMtMTQ3LjA3MiA2Ny4wMjkzMzMtMjM0Ljg4cy0yMy44NTA2NjctMTcxLjIyMTMzMy02Ny4wMjkzMzMtMjM0Ljg4ek04MjMuMDQgMTM3LjM4NjY2N2EzOC42MTMzMzMgMzguNjEzMzMzIDAgMCAxIDU0LjQ4NTMzMyAxMC4wNjkzMzNDOTQ0LjQ2OTMzMyAyNDYuMDU4NjY3IDk4MS4zMzMzMzMgMzc1LjU1MiA5ODEuMzMzMzMzIDUxMmMwIDEzNi41MzMzMzMtMzYuODY0IDI2NS45ODQtMTAzLjgwOCAzNjQuNTQ0YTM4LjQ4NTMzMyAzOC40ODUzMzMgMCAwIDEtNTQuNDQyNjY2IDEwLjA2OTMzMyA0MC44MzIgNDAuODMyIDAgMCAxLTkuODEzMzM0LTU1LjgwOGM1Ny44NTYtODUuMjkwNjY3IDg5Ljc3MDY2Ny0xOTguNTI4IDg5Ljc3MDY2Ny0zMTguODA1MzMzIDAtMTIwLjIzNDY2Ny0zMS45MTQ2NjctMjMzLjQ3Mi04OS44MTMzMzMtMzE4Ljc2MjY2N2E0MC44NzQ2NjcgNDAuODc0NjY3IDAgMCAxIDkuODEzMzMzLTU1LjgwOHoiIGZpbGw9IiNmZmZmZmYiIHAtaWQ9IjIwMzIiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjIwODkxOTY3ODE0IiBmaWxsPScjZmZmZmZmJyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE4NzQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg5OS42NDggNTMzLjk1MmwxMDIuNC0xMDIuNGMxNC42MjQtMTQuNjI0IDE0LjYyNC0zNi41NzYgMC01MS4ycy0zNi41NzYtMTQuNjI0LTUxLjIgMGwtMTAyLjQgMTAyLjQtMTA5LjcyOC0xMDkuNzI4Yy03LjMyOC03LjMyOC0yOS4yNDgtMjEuOTUyLTUxLjIgMGEzNS4zNiAzNS4zNiAwIDAgMCAwIDUxLjJsMTAyLjQgMTAyLjQtMTAyLjQgMTA5LjcyOGMtMTQuNjI0IDE0LjYyNC0xNC42MjQgMzYuNTc2IDAgNTEuMnMzNi41NzYgMTQuNjI0IDUxLjIgMGwxMDkuNzI4LTEwMi40IDEwMi40IDEwMi40YzE0LjYyNCAxNC42MjQgMzYuNTc2IDE0LjYyNCA1MS4yIDBzMTQuNjI0LTM2LjU3NiAwLTUxLjJsLTEwMi40LTEwMi40eiBtLTQwMi4yNzItNDYwLjhjLTcuMzI4IDAtMTQuNjI0IDAtMjEuOTUyIDcuMzI4TDE1My42IDM1MS4xMDRINzMuMTUyYy0yOS4yNDgtNy4zMjgtNTEuMiAyMS45NTItNTEuMiA1MS4ydjIxOS40MjRjMCAyOS4yNDggMjEuOTUyIDU4LjUyOCA1MS4yIDU4LjUyOCAwIDAgODcuNzc2IDAgOTUuMDcyIDcuMzI4bDMwNy4yIDI2My4zMjhoMjEuOTUyYzIxLjk1MiAwIDM2LjU3Ni0yMS45NTIgMzYuNTc2LTUxLjJWMTI0LjM4NGMwLTI5LjI0OC0xNC42MjQtNTEuMi0zNi41NzYtNTEuMnoiIHAtaWQ9IjE4NzUiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t, n) {
    var r = n(338);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    t = e.exports = n(12)(!1);
    var r = n(64),
      a = r(n(339)),
      i = r(n(239));
    t.push([e.i,
      ".neteaseyunxin-wb-media-container {\n    position: fixed;\n    pointer-events: auto;\n}\n    .neteaseyunxin-wb-media-container .header {\n        display: flex;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 32px;\n        background-color: rgba(0,0,0,.7);\n        align-items: center;\n    }\n    .neteaseyunxin-wb-media-container .header .title {\n            flex: 1;\n            color: white;\n            margin-left: 8px;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            font-size: 18px;\n        }\n    .neteaseyunxin-wb-media-container .header .close.icon {\n            width: 20px;\n            height: 20px;\n            background-image: url(" +
      a +
      ");\n            background-size: contain;\n            margin-right: 8px\n        }\n    .neteaseyunxin-wb-media-container .header .close.icon:hover {\n                cursor: pointer;\n            }\n    .neteaseyunxin-wb-media-container .media-control {\n        width: 100%;\n        position: absolute;\n        display: block;\n        bottom: 0;\n        background: rgba(0,0,0,.7);\n        padding-top: 3px;\n    }\n    .neteaseyunxin-wb-media-container .media-control .control-container {\n            display: flex;\n            height: 40px;\n            width: 100%;\n        }\n    .neteaseyunxin-wb-media-container .media-control .play-icon {\n            display: inline-block;\n            height: 100%;\n            width: 40px;\n            background-image: url(" +
      i +
      ");\n            background-size: contain;\n        }\n    .neteaseyunxin-wb-media-container .media-control .time-container {\n            display: inline-block;\n            height: 40px;\n            color: white;\n            vertical-align: top;\n            margin: 0 16px 0 0;\n        }\n    .neteaseyunxin-wb-media-container .media-control .time-text {\n            line-height: 40px;\n            height: 40px;\n            vertical-align: middle;\n            font-size: 14px;\n        }",
      ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHQ9IjE2MjA4OTY3NjEwNjEiIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNSAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTg2MyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzMi4wMzEyNSIgaGVpZ2h0PSIzMiI+CjxkZWZzPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPgo8cGF0aCBkPSJNNTEzLjM0NCAwYTUxMiA1MTIgMCAxIDAgMCAxMDI0IDUxMiA1MTIgMCAwIDAgMC0xMDI0eiBtMjI2LjA0OCA2NzQuNjI0bC01NC41MjggNTYuODk2LTE3MS41Mi0xNjQuOTI4LTE3MS4zOTIgMTY0LjkyOC01NC41OTItNTYuODk2TDQ1Ni41NzYgNTEyIDI4Ny4zNiAzNDkuMzEybDU0LjU5Mi01Ni43NjggMTcxLjM5MiAxNjQuOCAxNzEuNTItMTY0LjggNTQuNTI4IDU2Ljc2OEw1NzAuMTc2IDUxMmwxNjkuMjE2IDE2Mi42MjR6IiBmaWxsPSIjZDgzZjIzIiBwLWlkPSIxODY0Ij48L3BhdGg+Cjwvc3ZnPg=="
  }, function (e, t, n) {
    var r = n(341);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".neteaseyunxin-wb-tooltip {\n    position: relative;\n    display: inline-block;\n}\n\n    \n    .neteaseyunxin-wb-tooltip .tooltiptext {\n        visibility: hidden;\n        width: 120px;\n        background-color: black;\n        color: #fff;\n        text-align: center;\n        border-radius: 6px;\n        padding: 5px 0;\n      \n        /* Position the tooltip */\n        position: absolute;\n        z-index: 1;\n        bottom: 30px;\n        left: 50%;\n        transform: translateX(-50%);\n    }\n\n    \n.neteaseyunxin-wb-tooltip.visible .tooltiptext {\n        visibility: visible;\n    }",
      ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY5MDM2MDM0NTU0NSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIxNTAgMTUwIDcyNCA3MjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSIyMjkzIgogICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+CiAgICA8cGF0aAogICAgICAgIGQ9Ik0yOTguNjY2NjY3IDU5Ny4zMzMzMzNoLTg1LjMzMzMzNHYyMTMuMzMzMzM0aDIxMy4zMzMzMzR2LTg1LjMzMzMzNGgtMTI4di0xMjh6IG0tODUuMzMzMzM0LTE3MC42NjY2NjZoODUuMzMzMzM0di0xMjhoMTI4di04NS4zMzMzMzRIMjEzLjMzMzMzM3YyMTMuMzMzMzM0eiBtNTEyIDI5OC42NjY2NjZoLTEyOHY4NS4zMzMzMzRoMjEzLjMzMzMzNFY1OTcuMzMzMzMzaC04NS4zMzMzMzR2MTI4eiBtLTEyOC01MTJ2ODUuMzMzMzM0aDEyOHYxMjhoODUuMzMzMzM0VjIxMy4zMzMzMzNINTk3LjMzMzMzM3oiCiAgICAgICAgcC1pZD0iMjI5NCIgZmlsbD0id2hpdGUiPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(5)),
      a = l(n(2)),
      i = l(n(0)),
      A = l(n(1)),
      o = l(n(3)),
      s = l(n(4)),
      u = l(n(237));

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "onSizeChange",
        value: function (e) {
          this.playWidget && this.timeWidget && this.selfMuteIcon && this
            .progressController && (this.playWidget.style.display = e.width >
              140 ? "inline-block" : "none", this.progressController.widget
              .style.display = e.width > 140 ? "inline-block" : "none", this
              .timeWidget.style.display = e.width > 260 ? "inline-block" :
              "none", this.selfMuteIcon.style.display = e.width > 140 ?
              "inline-block" : "none")
        }
      }, {
        key: "getTitle",
        value: function () {
          return this.title ? this.title : "音频文件"
        }
      }, {
        key: "createControllor",
        value: function () {
          var e = document.createElement("div");
          this.progressController = new u.default(this.app, 0, {
            emitEvent: this.allowControl()
          });
          var t = this.createControlContainer(),
            n = this.createPlayWidget(),
            a = this.createTimeIndicator(),
            i = this.createVolumeWidget();
          e.appendChild(t), t.appendChild(n), t.appendChild(a);
          var A = this.createC2pWidget(),
            o = document.createElement("div");
          return (0, r.default)(o.style, {
              height: "40px",
              lineHeight: "40px",
              display: "inline-flex",
              alignItems: "center",
              flex: 1,
              marginRight: "16px"
            }), o.appendChild(this.progressController.widget), t.appendChild(o),
            t.appendChild(i), t.appendChild(A), e.style.userSelect = "none", e
            .style.webkitUserSelect = "none", e.className = "media-control",
            this.controlWidget = e, e
        }
      }], [{
        key: "getElementWidth",
        value: function () {
          return 320
        }
      }, {
        key: "getElementHeight",
        value: function () {
          return 75
        }
      }]), t
    }(l(n(238)).default);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(2)),
      a = l(n(0)),
      i = l(n(1)),
      A = l(n(3)),
      o = l(n(4)),
      s = l(n(144)),
      u = l(n(345));

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = void 0,
      d = function (e) {
        function t() {
          (0, a.default)(this, t);
          var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
            arguments));
          return e.type = "url", e.urlCanvas = void 0, e.getStreaming = !1, e
            .isStopped = !1, e.html2canvascopy = u.default, e.urlRefreshTimerInterval = e
            .app.appConfig.urlRefreshTimerInterval, e._delayedHtml2canvas = function () {
              c || (clearTimeout(c), c = setTimeout((function () {
                e.html2canvas(), c = null
              }), e.urlRefreshTimerInterval))
            }, e
        }
        return (0, o.default)(t, e), (0, i.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.cleanNonCanvasEle.tap("cleanNonCanvasElePlugin",
              this.handleCleanEle.bind(this))
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              "url:insert": {
                value: this.newUrl.bind(this),
                information: {
                  args: "url: string, opts: {\n                        width: number,\n                        sourceType: string,\n                        title?: string\n                        pageName?: string\n                        boardName?: string\n                    }",
                  message: "上传视频"
                }
              }
            }
          }
        }, {
          key: "handleCleanEle",
          value: function (e) {
            this.logger.log("[wb] UrlOp handleCleanEle() page: ", e);
            var t = this.mediaPlugins[this.currentUrlOpid];
            t && t.boardName === e.boardName && t.pageName === e.pageIndex && this
              .destroyUrlOp(t)
          }
        }, {
          key: "destroyUrlOp",
          value: function (e) {
            this.logger.log("[wb] UrlOp destroyUrlOp()"), this.app
              .unsetSelfAsBroadcaster(), this.app.enableCameraTransform(!0), this
              .stopStream(), e.destroy()
          }
        }, {
          key: "newUrl",
          value: function (e, t) {
            this.logger.log("[wb] UrlOp 使用newUrl页面: ", e), this.stopStream(), this
              .addUrl(e, t)
          }
        }, {
          key: "html2canvasReason",
          value: function (e) {
            if (1 === e.length)
              if (e[0].removedNodes.length) {
                if (-1 !== e[0].removedNodes[0].className.indexOf("html2canvas"))
                  return !0
              } else if (e[0].addedNodes.length) {
              if (-1 !== e[0].addedNodes[0].className.indexOf("html2canvas"))
                return !0
            }
            return !1
          }
        }, {
          key: "getStream",
          value: function () {
            var e = this;
            try {
              this.logger.log("[wb] UrlOP getStream()"), this._ro && this
                .stopStream();
              var t = this.mediaPlugins[this.currentUrlOpid],
                n = t.media,
                r = n && n.contentWindow && n.contentWindow.document;
              r && console.log("[UrlOP] getStream() iframeDocument.readyState: ",
                  null == r ? void 0 : r.readyState), console.log(
                  "[UrlOP] getStream() ifreamLoaded: ", t.ifreamLoaded), t
                .ifreamLoaded && r && (this.getStreaming = !0, this.html2canvas(),
                  this._ro = new MutationObserver((function (t) {
                    console.log(
                        "[UrlOP] getStream() 监听到iframe MutationObserver:", t),
                      t.length > 0 && e.getStreaming && !e.html2canvasReason(
                        t) && (console.log(
                        "[UrlOP] getStream() 监听到iframe内容发生变化,需要刷新canvas:", t
                        ), e._delayedHtml2canvas())
                  })), this._ro.observe(r, {
                    childList: !0,
                    subtree: !0,
                    attributes: !0,
                    characterData: !0,
                    attributeOldValue: !0,
                    characterDataOldValue: !0
                  }))
            } catch (e) {
              this.logger.error("[wb] UrlOP getStream() error: ", e)
            }
          }
        }, {
          key: "stopStream",
          value: function () {
            var e;
            this.logger.log("[wb] UrlOP stopStream()"), null === (e = this._ro) ||
              void 0 === e || e.disconnect(), this._ro = void 0, this
              .getStreaming = !1, this.isStopped = !0, this.urlCanvas = void 0,
              c && clearTimeout(c)
          }
        }, {
          key: "renderVideoElement",
          value: function (e) {
            var t = this.mediaPlugins[this.currentUrlOpid].media,
              n = t && t.contentWindow && t.contentWindow.document;
            n && (n.querySelectorAll("video") || []).forEach((function (t) {
              var n = t.getBoundingClientRect();
              e.drawImage(t, 0, 0, t.videoWidth, t.videoHeight, n.left, n
                .top, n.width, n.height)
            }))
          }
        }, {
          key: "html2canvas",
          value: function (e) {
            var t = this;
            try {
              var n = this.mediaPlugins[this.currentUrlOpid].media;
              this.logger.log("[wb] UrlOp iframe"), n && n.contentWindow && n
                .contentWindow.document && (this.logger.log(
                  "[wb] UrlOp iframetocanvas"), (0, u.default)(n.contentWindow
                  .document.body).then((function (n) {
                  if (t.logger.log("[wb] UrlOp canvas width: ", n.width), t
                    .urlCanvas = n, e) {
                    e.save(), e.resetTransform(), t.renderVideoElement(t
                      .urlCanvas.getContext("2d"));
                    var r = document.createElement("canvas");
                    r.width = e.canvas.width, r.height = e.canvas.height;
                    var a = r.getContext("2d");
                    null == a || a.drawImage(t.urlCanvas, 0, 0, t.urlCanvas
                      .width, t.urlCanvas.height, 0, 0, e.canvas.width, e
                      .canvas.height), null == a || a.drawImage(e.canvas,
                      0, 0), a && e.drawImage(null == a ? void 0 : a
                      .canvas, 0, 0), e.restore()
                  }
                })).catch((function (e) {
                  t.logger.log("[wb] UrlOp iframetocanvas failed: ", e
                    .message)
                })))
            } catch (e) {
              this.logger.warn("[wb] UrlOp html2canvas failed: ", e.message)
            }
          }
        }, {
          key: "preview",
          value: function (e, t, n) {
            this.logger.log("[wb] UrlOp preview supportToDataUrl: ", n
              .supportToDataUrl), null == n.supportToDataUrl ? this.html2canvas(
              t) : n.supportToDataUrl && this.urlCanvas && (t.save(), t
              .resetTransform(), t.drawImage(this.urlCanvas, 0, 0, this
                .urlCanvas.width, this.urlCanvas.height), this
              .renderVideoElement(t), t.restore())
          }
        }]), t
      }(s.default);
    t.default = d
  }, function (e, t, n) {
    /*!
     * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */
    e.exports = function () {
      "use strict";
      /*! *****************************************************************************
          Copyright (c) Microsoft Corporation.

          Permission to use, copy, modify, and/or distribute this software for any
          purpose with or without fee is hereby granted.

          THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
          REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
          AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
          INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
          LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
          OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
          PERFORMANCE OF THIS SOFTWARE.
          ***************************************************************************** */
      var e = function (t, n) {
        return (e = Object.setPrototypeOf || {
            __proto__: []
          }
          instanceof Array && function (e, t) {
            e.__proto__ = t
          } || function (e, t) {
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] =
              t[n])
          })(t, n)
      };

      function t(t, n) {
        if ("function" != typeof n && null !== n) throw new TypeError(
          "Class extends value " + String(n) + " is not a constructor or null");

        function r() {
          this.constructor = t
        }
        e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n
          .prototype, new r)
      }
      var n = function () {
        return (n = Object.assign || function (e) {
          for (var t, n = 1, r = arguments.length; n < r; n++)
            for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(
              t, a) && (e[a] = t[a]);
          return e
        }).apply(this, arguments)
      };

      function r(e, t, n, r) {
        return new(n || (n = Promise))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      }

      function a(e, t) {
        var n, r, a, i, A = {
          label: 0,
          sent: function () {
            if (1 & a[0]) throw a[1];
            return a[1]
          },
          trys: [],
          ops: []
        };
        return i = {
          next: o(0),
          throw: o(1),
          return: o(2)
        }, "function" == typeof Symbol && (i[Symbol.iterator] = function () {
          return this
        }), i;

        function o(i) {
          return function (o) {
            return function (i) {
              if (n) throw new TypeError("Generator is already executing.");
              for (; A;) try {
                if (n = 1, r && (a = 2 & i[0] ? r.return : i[0] ? r.throw || ((a =
                    r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, i[1]))
                  .done) return a;
                switch (r = 0, a && (i = [2 & i[0], a.value]), i[0]) {
                  case 0:
                  case 1:
                    a = i;
                    break;
                  case 4:
                    return A.label++, {
                      value: i[1],
                      done: !1
                    };
                  case 5:
                    A.label++, r = i[1], i = [0];
                    continue;
                  case 7:
                    i = A.ops.pop(), A.trys.pop();
                    continue;
                  default:
                    if (!((a = (a = A.trys).length > 0 && a[a.length - 1]) ||
                        6 !== i[0] && 2 !== i[0])) {
                      A = 0;
                      continue
                    }
                    if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) {
                      A.label = i[1];
                      break
                    }
                    if (6 === i[0] && A.label < a[1]) {
                      A.label = a[1], a = i;
                      break
                    }
                    if (a && A.label < a[2]) {
                      A.label = a[2], A.ops.push(i);
                      break
                    }
                    a[2] && A.ops.pop(), A.trys.pop();
                    continue
                }
                i = t.call(e, A)
              } catch (e) {
                i = [6, e], r = 0
              } finally {
                n = a = 0
              }
              if (5 & i[0]) throw i[1];
              return {
                value: i[0] ? i[1] : void 0,
                done: !0
              }
            }([i, o])
          }
        }
      }

      function i(e, t, n) {
        if (n || 2 === arguments.length)
          for (var r, a = 0, i = t.length; a < i; a++) !r && a in t || (r || (r = Array
            .prototype.slice.call(t, 0, a)), r[a] = t[a]);
        return e.concat(r || t)
      }
      for (var A = function () {
            function e(e, t, n, r) {
              this.left = e, this.top = t, this.width = n, this.height = r
            }
            return e.prototype.add = function (t, n, r, a) {
              return new e(this.left + t, this.top + n, this.width + r, this.height +
                a)
            }, e.fromClientRect = function (t, n) {
              return new e(n.left + t.windowBounds.left, n.top + t.windowBounds.top, n
                .width, n.height)
            }, e.fromDOMRectList = function (t, n) {
              var r = Array.from(n).find((function (e) {
                return 0 !== e.width
              }));
              return r ? new e(r.left + t.windowBounds.left, r.top + t.windowBounds
                .top, r.width, r.height) : e.EMPTY
            }, e.EMPTY = new e(0, 0, 0, 0), e
          }(), o = function (e, t) {
            return A.fromClientRect(e, t.getBoundingClientRect())
          }, s = function (e) {
            for (var t = [], n = 0, r = e.length; n < r;) {
              var a = e.charCodeAt(n++);
              if (a >= 55296 && a <= 56319 && n < r) {
                var i = e.charCodeAt(n++);
                56320 == (64512 & i) ? t.push(((1023 & a) << 10) + (1023 & i) + 65536) :
                  (t.push(a), n--)
              } else t.push(a)
            }
            return t
          }, u = function () {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            if (String.fromCodePoint) return String.fromCodePoint.apply(String, e);
            var n = e.length;
            if (!n) return "";
            for (var r = [], a = -1, i = ""; ++a < n;) {
              var A = e[a];
              A <= 65535 ? r.push(A) : (A -= 65536, r.push(55296 + (A >> 10), A % 1024 +
                56320)), (a + 1 === n || r.length > 16384) && (i += String
                .fromCharCode.apply(String, r), r.length = 0)
            }
            return i
          }, l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", c =
          "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), d = 0; d < l
        .length; d++) c[l.charCodeAt(d)] = d;
      for (var h = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
          p = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), f = 0; f < h
        .length; f++) p[h.charCodeAt(f)] = f;
      for (var g = function (e, t, n) {
            return e.slice ? e.slice(t, n) : new Uint16Array(Array.prototype.slice.call(
              e, t, n))
          }, y = function () {
            function e(e, t, n, r, a, i) {
              this.initialValue = e, this.errorValue = t, this.highStart = n, this
                .highValueIndex = r, this.index = a, this.data = i
            }
            return e.prototype.get = function (e) {
              var t;
              if (e >= 0) {
                if (e < 55296 || e > 56319 && e <= 65535) return t = ((t = this.index[
                  e >> 5]) << 2) + (31 & e), this.data[t];
                if (e <= 65535) return t = ((t = this.index[2048 + (e - 55296 >>
                  5)]) << 2) + (31 & e), this.data[t];
                if (e < this.highStart) return t = 2080 + (e >> 11), t = this.index[
                  t], t += e >> 5 & 63, t = ((t = this.index[t]) << 2) + (31 & e),
                  this.data[t];
                if (e <= 1114111) return this.data[this.highValueIndex]
              }
              return this.errorValue
            }, e
          }(), v = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
          m = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), w = 0; w < v
        .length; w++) m[v.charCodeAt(w)] = w;
      var B = 10,
        M = 13,
        C = 15,
        I = 17,
        x = 18,
        b = 19,
        k = 20,
        T = 21,
        E = 22,
        D = 24,
        N = 25,
        P = 26,
        Q = 27,
        O = 28,
        _ = 30,
        S = 32,
        U = 33,
        F = 34,
        L = 35,
        j = 37,
        z = 38,
        R = 39,
        H = 40,
        Y = 42,
        W = [9001, 65288],
        K = function (e, t) {
          var n, r, a, i = function (e) {
              var t, n, r, a, i, A = .75 * e.length,
                o = e.length,
                s = 0;
              "=" === e[e.length - 1] && (A--, "=" === e[e.length - 2] && A--);
              var u = "undefined" != typeof ArrayBuffer && "undefined" !=
                typeof Uint8Array && void 0 !== Uint8Array.prototype.slice ?
                new ArrayBuffer(A) : new Array(A),
                l = Array.isArray(u) ? u : new Uint8Array(u);
              for (t = 0; t < o; t += 4) n = p[e.charCodeAt(t)], r = p[e.charCodeAt(t +
                  1)], a = p[e.charCodeAt(t + 2)], i = p[e.charCodeAt(t + 3)], l[s++] =
                n << 2 | r >> 4, l[s++] = (15 & r) << 4 | a >> 2, l[s++] = (3 & a) <<
                6 | 63 & i;
              return u
            }(e),
            A = Array.isArray(i) ? function (e) {
              for (var t = e.length, n = [], r = 0; r < t; r += 4) n.push(e[r + 3] <<
                24 | e[r + 2] << 16 | e[r + 1] << 8 | e[r]);
              return n
            }(i) : new Uint32Array(i),
            o = Array.isArray(i) ? function (e) {
              for (var t = e.length, n = [], r = 0; r < t; r += 2) n.push(e[r + 1] <<
                8 | e[r]);
              return n
            }(i) : new Uint16Array(i),
            s = g(o, 12, A[4] / 2),
            u = 2 === A[5] ? g(o, (24 + A[4]) / 2) : (n = A, r = Math.ceil((24 + A[4]) /
              4), n.slice ? n.slice(r, a) : new Uint32Array(Array.prototype.slice
              .call(n, r, a)));
          return new y(A[0], A[1], A[2], A[3], s, u)
        }(
          "KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),
        G = [_, 36],
        V = [1, 2, 3, 5],
        Z = [B, 8],
        X = [Q, P],
        J = V.concat(Z),
        q = [z, R, H, F, L],
        $ = [C, M],
        ee = function (e, t, n, r) {
          var a = r[n];
          if (Array.isArray(e) ? -1 !== e.indexOf(a) : e === a)
            for (var i = n; i <= r.length;) {
              if ((s = r[++i]) === t) return !0;
              if (s !== B) break
            }
          if (a === B)
            for (i = n; i > 0;) {
              var A = r[--i];
              if (Array.isArray(e) ? -1 !== e.indexOf(A) : e === A)
                for (var o = n; o <= r.length;) {
                  var s;
                  if ((s = r[++o]) === t) return !0;
                  if (s !== B) break
                }
              if (A !== B) break
            }
          return !1
        },
        te = function (e, t) {
          for (var n = e; n >= 0;) {
            var r = t[n];
            if (r !== B) return r;
            n--
          }
          return 0
        },
        ne = function (e, t, n, r, a) {
          if (0 === n[r]) return "×";
          var i = r - 1;
          if (Array.isArray(a) && !0 === a[i]) return "×";
          var A = i - 1,
            o = i + 1,
            s = t[i],
            u = A >= 0 ? t[A] : 0,
            l = t[o];
          if (2 === s && 3 === l) return "×";
          if (-1 !== V.indexOf(s)) return "!";
          if (-1 !== V.indexOf(l)) return "×";
          if (-1 !== Z.indexOf(l)) return "×";
          if (8 === te(i, t)) return "÷";
          if (11 === K.get(e[i])) return "×";
          if ((s === S || s === U) && 11 === K.get(e[o])) return "×";
          if (7 === s || 7 === l) return "×";
          if (9 === s) return "×";
          if (-1 === [B, M, C].indexOf(s) && 9 === l) return "×";
          if (-1 !== [I, x, b, D, O].indexOf(l)) return "×";
          if (te(i, t) === E) return "×";
          if (ee(23, E, i, t)) return "×";
          if (ee([I, x], T, i, t)) return "×";
          if (ee(12, 12, i, t)) return "×";
          if (s === B) return "÷";
          if (23 === s || 23 === l) return "×";
          if (16 === l || 16 === s) return "÷";
          if (-1 !== [M, C, T].indexOf(l) || 14 === s) return "×";
          if (36 === u && -1 !== $.indexOf(s)) return "×";
          if (s === O && 36 === l) return "×";
          if (l === k) return "×";
          if (-1 !== G.indexOf(l) && s === N || -1 !== G.indexOf(s) && l === N)
          return "×";
          if (s === Q && -1 !== [j, S, U].indexOf(l) || -1 !== [j, S, U].indexOf(s) &&
            l === P) return "×";
          if (-1 !== G.indexOf(s) && -1 !== X.indexOf(l) || -1 !== X.indexOf(s) && -
            1 !== G.indexOf(l)) return "×";
          if (-1 !== [Q, P].indexOf(s) && (l === N || -1 !== [E, C].indexOf(l) && t[o +
              1] === N) || -1 !== [E, C].indexOf(s) && l === N || s === N && -1 !== [N,
              O, D
            ].indexOf(l)) return "×";
          if (-1 !== [N, O, D, I, x].indexOf(l))
            for (var c = i; c >= 0;) {
              if ((d = t[c]) === N) return "×";
              if (-1 === [O, D].indexOf(d)) break;
              c--
            }
          if (-1 !== [Q, P].indexOf(l))
            for (c = -1 !== [I, x].indexOf(s) ? A : i; c >= 0;) {
              var d;
              if ((d = t[c]) === N) return "×";
              if (-1 === [O, D].indexOf(d)) break;
              c--
            }
          if (z === s && -1 !== [z, R, F, L].indexOf(l) || -1 !== [R, F].indexOf(s) && -
            1 !== [R, H].indexOf(l) || -1 !== [H, L].indexOf(s) && l === H) return "×";
          if (-1 !== q.indexOf(s) && -1 !== [k, P].indexOf(l) || -1 !== q.indexOf(l) &&
            s === Q) return "×";
          if (-1 !== G.indexOf(s) && -1 !== G.indexOf(l)) return "×";
          if (s === D && -1 !== G.indexOf(l)) return "×";
          if (-1 !== G.concat(N).indexOf(s) && l === E && -1 === W.indexOf(e[o]) || -
            1 !== G.concat(N).indexOf(l) && s === x) return "×";
          if (41 === s && 41 === l) {
            for (var h = n[i], p = 1; h > 0 && 41 === t[--h];) p++;
            if (p % 2 != 0) return "×"
          }
          return s === S && l === U ? "×" : "÷"
        },
        re = function (e, t) {
          t || (t = {
            lineBreak: "normal",
            wordBreak: "normal"
          });
          var n = function (e, t) {
              void 0 === t && (t = "strict");
              var n = [],
                r = [],
                a = [];
              return e.forEach((function (e, i) {
                var A = K.get(e);
                if (A > 50 ? (a.push(!0), A -= 50) : a.push(!1), -1 !== ["normal",
                    "auto", "loose"
                  ].indexOf(t) && -1 !== [8208, 8211, 12316, 12448].indexOf(e))
                  return r.push(i), n.push(16);
                if (4 === A || 11 === A) {
                  if (0 === i) return r.push(i), n.push(_);
                  var o = n[i - 1];
                  return -1 === J.indexOf(o) ? (r.push(r[i - 1]), n.push(o)) : (r
                    .push(i), n.push(_))
                }
                return r.push(i), 31 === A ? n.push("strict" === t ? T : j) :
                  A === Y || 29 === A ? n.push(_) : 43 === A ? e >= 131072 && e <=
                  196605 || e >= 196608 && e <= 262141 ? n.push(j) : n.push(_) :
                  void n.push(A)
              })), [r, n, a]
            }(e, t.lineBreak),
            r = n[0],
            a = n[1],
            i = n[2];
          return "break-all" !== t.wordBreak && "break-word" !== t.wordBreak || (a = a
            .map((function (e) {
              return -1 !== [N, _, Y].indexOf(e) ? j : e
            }))), [r, a, "keep-all" === t.wordBreak ? i.map((function (t, n) {
            return t && e[n] >= 19968 && e[n] <= 40959
          })) : void 0]
        },
        ae = function () {
          function e(e, t, n, r) {
            this.codePoints = e, this.required = "!" === t, this.start = n, this.end = r
          }
          return e.prototype.slice = function () {
            return u.apply(void 0, this.codePoints.slice(this.start, this.end))
          }, e
        }(),
        ie = function (e) {
          return e >= 48 && e <= 57
        },
        Ae = function (e) {
          return ie(e) || e >= 65 && e <= 70 || e >= 97 && e <= 102
        },
        oe = function (e) {
          return 10 === e || 9 === e || 32 === e
        },
        se = function (e) {
          return function (e) {
            return function (e) {
              return e >= 97 && e <= 122
            }(e) || function (e) {
              return e >= 65 && e <= 90
            }(e)
          }(e) || function (e) {
            return e >= 128
          }(e) || 95 === e
        },
        ue = function (e) {
          return se(e) || ie(e) || 45 === e
        },
        le = function (e) {
          return e >= 0 && e <= 8 || 11 === e || e >= 14 && e <= 31 || 127 === e
        },
        ce = function (e, t) {
          return 92 === e && 10 !== t
        },
        de = function (e, t, n) {
          return 45 === e ? se(t) || ce(t, n) : !!se(e) || !(92 !== e || !ce(e, t))
        },
        he = function (e, t, n) {
          return 43 === e || 45 === e ? !!ie(t) || 46 === t && ie(n) : ie(46 === e ? t :
            e)
        },
        pe = function (e) {
          var t = 0,
            n = 1;
          43 !== e[t] && 45 !== e[t] || (45 === e[t] && (n = -1), t++);
          for (var r = []; ie(e[t]);) r.push(e[t++]);
          var a = r.length ? parseInt(u.apply(void 0, r), 10) : 0;
          46 === e[t] && t++;
          for (var i = []; ie(e[t]);) i.push(e[t++]);
          var A = i.length,
            o = A ? parseInt(u.apply(void 0, i), 10) : 0;
          69 !== e[t] && 101 !== e[t] || t++;
          var s = 1;
          43 !== e[t] && 45 !== e[t] || (45 === e[t] && (s = -1), t++);
          for (var l = []; ie(e[t]);) l.push(e[t++]);
          var c = l.length ? parseInt(u.apply(void 0, l), 10) : 0;
          return n * (a + o * Math.pow(10, -A)) * Math.pow(10, s * c)
        },
        fe = {
          type: 2
        },
        ge = {
          type: 3
        },
        ye = {
          type: 4
        },
        ve = {
          type: 13
        },
        me = {
          type: 8
        },
        we = {
          type: 21
        },
        Be = {
          type: 9
        },
        Me = {
          type: 10
        },
        Ce = {
          type: 11
        },
        Ie = {
          type: 12
        },
        xe = {
          type: 14
        },
        be = {
          type: 23
        },
        ke = {
          type: 1
        },
        Te = {
          type: 25
        },
        Ee = {
          type: 24
        },
        De = {
          type: 26
        },
        Ne = {
          type: 27
        },
        Pe = {
          type: 28
        },
        Qe = {
          type: 29
        },
        Oe = {
          type: 31
        },
        _e = {
          type: 32
        },
        Se = function () {
          function e() {
            this._value = []
          }
          return e.prototype.write = function (e) {
            this._value = this._value.concat(s(e))
          }, e.prototype.read = function () {
            for (var e = [], t = this.consumeToken(); t !== _e;) e.push(t), t = this
              .consumeToken();
            return e
          }, e.prototype.consumeToken = function () {
            var e = this.consumeCodePoint();
            switch (e) {
              case 34:
                return this.consumeStringToken(34);
              case 35:
                var t = this.peekCodePoint(0),
                  n = this.peekCodePoint(1),
                  r = this.peekCodePoint(2);
                if (ue(t) || ce(n, r)) {
                  var a = de(t, n, r) ? 2 : 1;
                  return {
                    type: 5,
                    value: this.consumeName(),
                    flags: a
                  }
                }
                break;
              case 36:
                if (61 === this.peekCodePoint(0)) return this.consumeCodePoint(), ve;
                break;
              case 39:
                return this.consumeStringToken(39);
              case 40:
                return fe;
              case 41:
                return ge;
              case 42:
                if (61 === this.peekCodePoint(0)) return this.consumeCodePoint(), xe;
                break;
              case 43:
                if (he(e, this.peekCodePoint(0), this.peekCodePoint(1))) return this
                  .reconsumeCodePoint(e), this.consumeNumericToken();
                break;
              case 44:
                return ye;
              case 45:
                var i = e,
                  A = this.peekCodePoint(0),
                  o = this.peekCodePoint(1);
                if (he(i, A, o)) return this.reconsumeCodePoint(e), this
                  .consumeNumericToken();
                if (de(i, A, o)) return this.reconsumeCodePoint(e), this
                  .consumeIdentLikeToken();
                if (45 === A && 62 === o) return this.consumeCodePoint(), this
                  .consumeCodePoint(), Ee;
                break;
              case 46:
                if (he(e, this.peekCodePoint(0), this.peekCodePoint(1))) return this
                  .reconsumeCodePoint(e), this.consumeNumericToken();
                break;
              case 47:
                if (42 === this.peekCodePoint(0))
                  for (this.consumeCodePoint();;) {
                    var s = this.consumeCodePoint();
                    if (42 === s && 47 === (s = this.consumeCodePoint())) return this
                      .consumeToken();
                    if (-1 === s) return this.consumeToken()
                  }
                break;
              case 58:
                return De;
              case 59:
                return Ne;
              case 60:
                if (33 === this.peekCodePoint(0) && 45 === this.peekCodePoint(1) &&
                  45 === this.peekCodePoint(2)) return this.consumeCodePoint(), this
                  .consumeCodePoint(), Te;
                break;
              case 64:
                var l = this.peekCodePoint(0),
                  c = this.peekCodePoint(1),
                  d = this.peekCodePoint(2);
                if (de(l, c, d)) return {
                  type: 7,
                  value: this.consumeName()
                };
                break;
              case 91:
                return Pe;
              case 92:
                if (ce(e, this.peekCodePoint(0))) return this.reconsumeCodePoint(e),
                  this.consumeIdentLikeToken();
                break;
              case 93:
                return Qe;
              case 61:
                if (61 === this.peekCodePoint(0)) return this.consumeCodePoint(), me;
                break;
              case 123:
                return Ce;
              case 125:
                return Ie;
              case 117:
              case 85:
                var h = this.peekCodePoint(0),
                  p = this.peekCodePoint(1);
                return 43 !== h || !Ae(p) && 63 !== p || (this.consumeCodePoint(),
                    this.consumeUnicodeRangeToken()), this.reconsumeCodePoint(e), this
                  .consumeIdentLikeToken();
              case 124:
                if (61 === this.peekCodePoint(0)) return this.consumeCodePoint(), Be;
                if (124 === this.peekCodePoint(0)) return this.consumeCodePoint(), we;
                break;
              case 126:
                if (61 === this.peekCodePoint(0)) return this.consumeCodePoint(), Me;
                break;
              case -1:
                return _e
            }
            return oe(e) ? (this.consumeWhiteSpace(), Oe) : ie(e) ? (this
              .reconsumeCodePoint(e), this.consumeNumericToken()) : se(e) ? (this
              .reconsumeCodePoint(e), this.consumeIdentLikeToken()) : {
              type: 6,
              value: u(e)
            }
          }, e.prototype.consumeCodePoint = function () {
            var e = this._value.shift();
            return void 0 === e ? -1 : e
          }, e.prototype.reconsumeCodePoint = function (e) {
            this._value.unshift(e)
          }, e.prototype.peekCodePoint = function (e) {
            return e >= this._value.length ? -1 : this._value[e]
          }, e.prototype.consumeUnicodeRangeToken = function () {
            for (var e = [], t = this.consumeCodePoint(); Ae(t) && e.length < 6;) e
              .push(t), t = this.consumeCodePoint();
            for (var n = !1; 63 === t && e.length < 6;) e.push(t), t = this
              .consumeCodePoint(), n = !0;
            if (n) return {
              type: 30,
              start: parseInt(u.apply(void 0, e.map((function (e) {
                return 63 === e ? 48 : e
              }))), 16),
              end: parseInt(u.apply(void 0, e.map((function (e) {
                return 63 === e ? 70 : e
              }))), 16)
            };
            var r = parseInt(u.apply(void 0, e), 16);
            if (45 === this.peekCodePoint(0) && Ae(this.peekCodePoint(1))) {
              this.consumeCodePoint(), t = this.consumeCodePoint();
              for (var a = []; Ae(t) && a.length < 6;) a.push(t), t = this
                .consumeCodePoint();
              return {
                type: 30,
                start: r,
                end: parseInt(u.apply(void 0, a), 16)
              }
            }
            return {
              type: 30,
              start: r,
              end: r
            }
          }, e.prototype.consumeIdentLikeToken = function () {
            var e = this.consumeName();
            return "url" === e.toLowerCase() && 40 === this.peekCodePoint(0) ? (this
                .consumeCodePoint(), this.consumeUrlToken()) : 40 === this
              .peekCodePoint(0) ? (this.consumeCodePoint(), {
                type: 19,
                value: e
              }) : {
                type: 20,
                value: e
              }
          }, e.prototype.consumeUrlToken = function () {
            var e = [];
            if (this.consumeWhiteSpace(), -1 === this.peekCodePoint(0)) return {
              type: 22,
              value: ""
            };
            var t = this.peekCodePoint(0);
            if (39 === t || 34 === t) {
              var n = this.consumeStringToken(this.consumeCodePoint());
              return 0 === n.type && (this.consumeWhiteSpace(), -1 === this
                .peekCodePoint(0) || 41 === this.peekCodePoint(0)) ? (this
                .consumeCodePoint(), {
                  type: 22,
                  value: n.value
                }) : (this.consumeBadUrlRemnants(), be)
            }
            for (;;) {
              var r = this.consumeCodePoint();
              if (-1 === r || 41 === r) return {
                type: 22,
                value: u.apply(void 0, e)
              };
              if (oe(r)) return this.consumeWhiteSpace(), -1 === this.peekCodePoint(
                0) || 41 === this.peekCodePoint(0) ? (this.consumeCodePoint(), {
                  type: 22,
                  value: u.apply(void 0, e)
                }) : (this.consumeBadUrlRemnants(), be);
              if (34 === r || 39 === r || 40 === r || le(r)) return this
                .consumeBadUrlRemnants(), be;
              if (92 === r) {
                if (!ce(r, this.peekCodePoint(0))) return this
                .consumeBadUrlRemnants(), be;
                e.push(this.consumeEscapedCodePoint())
              } else e.push(r)
            }
          }, e.prototype.consumeWhiteSpace = function () {
            for (; oe(this.peekCodePoint(0));) this.consumeCodePoint()
          }, e.prototype.consumeBadUrlRemnants = function () {
            for (;;) {
              var e = this.consumeCodePoint();
              if (41 === e || -1 === e) return;
              ce(e, this.peekCodePoint(0)) && this.consumeEscapedCodePoint()
            }
          }, e.prototype.consumeStringSlice = function (e) {
            for (var t = ""; e > 0;) {
              var n = Math.min(5e4, e);
              t += u.apply(void 0, this._value.splice(0, n)), e -= n
            }
            return this._value.shift(), t
          }, e.prototype.consumeStringToken = function (e) {
            for (var t = "", n = 0;;) {
              var r = this._value[n];
              if (-1 === r || void 0 === r || r === e) return {
                type: 0,
                value: t += this.consumeStringSlice(n)
              };
              if (10 === r) return this._value.splice(0, n), ke;
              if (92 === r) {
                var a = this._value[n + 1]; - 1 !== a && void 0 !== a && (10 === a ? (
                    t += this.consumeStringSlice(n), n = -1, this._value.shift()) :
                  ce(r, a) && (t += this.consumeStringSlice(n), t += u(this
                    .consumeEscapedCodePoint()), n = -1))
              }
              n++
            }
          }, e.prototype.consumeNumber = function () {
            var e = [],
              t = 4,
              n = this.peekCodePoint(0);
            for (43 !== n && 45 !== n || e.push(this.consumeCodePoint()); ie(this
                .peekCodePoint(0));) e.push(this.consumeCodePoint());
            n = this.peekCodePoint(0);
            var r = this.peekCodePoint(1);
            if (46 === n && ie(r))
              for (e.push(this.consumeCodePoint(), this.consumeCodePoint()), t =
                8; ie(this.peekCodePoint(0));) e.push(this.consumeCodePoint());
            n = this.peekCodePoint(0), r = this.peekCodePoint(1);
            var a = this.peekCodePoint(2);
            if ((69 === n || 101 === n) && ((43 === r || 45 === r) && ie(a) || ie(r)))
              for (e.push(this.consumeCodePoint(), this.consumeCodePoint()), t =
                8; ie(this.peekCodePoint(0));) e.push(this.consumeCodePoint());
            return [pe(e), t]
          }, e.prototype.consumeNumericToken = function () {
            var e = this.consumeNumber(),
              t = e[0],
              n = e[1],
              r = this.peekCodePoint(0),
              a = this.peekCodePoint(1),
              i = this.peekCodePoint(2);
            return de(r, a, i) ? {
              type: 15,
              number: t,
              flags: n,
              unit: this.consumeName()
            } : 37 === r ? (this.consumeCodePoint(), {
              type: 16,
              number: t,
              flags: n
            }) : {
              type: 17,
              number: t,
              flags: n
            }
          }, e.prototype.consumeEscapedCodePoint = function () {
            var e = this.consumeCodePoint();
            if (Ae(e)) {
              for (var t = u(e); Ae(this.peekCodePoint(0)) && t.length < 6;) t += u(
                this.consumeCodePoint());
              oe(this.peekCodePoint(0)) && this.consumeCodePoint();
              var n = parseInt(t, 16);
              return 0 === n || function (e) {
                return e >= 55296 && e <= 57343
              }(n) || n > 1114111 ? 65533 : n
            }
            return -1 === e ? 65533 : e
          }, e.prototype.consumeName = function () {
            for (var e = "";;) {
              var t = this.consumeCodePoint();
              if (ue(t)) e += u(t);
              else {
                if (!ce(t, this.peekCodePoint(0))) return this.reconsumeCodePoint(t),
                  e;
                e += u(this.consumeEscapedCodePoint())
              }
            }
          }, e
        }(),
        Ue = function () {
          function e(e) {
            this._tokens = e
          }
          return e.create = function (t) {
            var n = new Se;
            return n.write(t), new e(n.read())
          }, e.parseValue = function (t) {
            return e.create(t).parseComponentValue()
          }, e.parseValues = function (t) {
            return e.create(t).parseComponentValues()
          }, e.prototype.parseComponentValue = function () {
            for (var e = this.consumeToken(); 31 === e.type;) e = this.consumeToken();
            if (32 === e.type) throw new SyntaxError(
              "Error parsing CSS component value, unexpected EOF");
            this.reconsumeToken(e);
            var t = this.consumeComponentValue();
            do {
              e = this.consumeToken()
            } while (31 === e.type);
            if (32 === e.type) return t;
            throw new SyntaxError(
              "Error parsing CSS component value, multiple values found when expecting only one"
              )
          }, e.prototype.parseComponentValues = function () {
            for (var e = [];;) {
              var t = this.consumeComponentValue();
              if (32 === t.type) return e;
              e.push(t), e.push()
            }
          }, e.prototype.consumeComponentValue = function () {
            var e = this.consumeToken();
            switch (e.type) {
              case 11:
              case 28:
              case 2:
                return this.consumeSimpleBlock(e.type);
              case 19:
                return this.consumeFunction(e)
            }
            return e
          }, e.prototype.consumeSimpleBlock = function (e) {
            for (var t = {
                type: e,
                values: []
              }, n = this.consumeToken();;) {
              if (32 === n.type || Ke(n, e)) return t;
              this.reconsumeToken(n), t.values.push(this.consumeComponentValue()), n =
                this.consumeToken()
            }
          }, e.prototype.consumeFunction = function (e) {
            for (var t = {
                name: e.value,
                values: [],
                type: 18
              };;) {
              var n = this.consumeToken();
              if (32 === n.type || 3 === n.type) return t;
              this.reconsumeToken(n), t.values.push(this.consumeComponentValue())
            }
          }, e.prototype.consumeToken = function () {
            var e = this._tokens.shift();
            return void 0 === e ? _e : e
          }, e.prototype.reconsumeToken = function (e) {
            this._tokens.unshift(e)
          }, e
        }(),
        Fe = function (e) {
          return 15 === e.type
        },
        Le = function (e) {
          return 17 === e.type
        },
        je = function (e) {
          return 20 === e.type
        },
        ze = function (e) {
          return 0 === e.type
        },
        Re = function (e, t) {
          return je(e) && e.value === t
        },
        He = function (e) {
          return 31 !== e.type
        },
        Ye = function (e) {
          return 31 !== e.type && 4 !== e.type
        },
        We = function (e) {
          var t = [],
            n = [];
          return e.forEach((function (e) {
            if (4 === e.type) {
              if (0 === n.length) throw new Error(
                "Error parsing function args, zero tokens for arg");
              return t.push(n), void(n = [])
            }
            31 !== e.type && n.push(e)
          })), n.length && t.push(n), t
        },
        Ke = function (e, t) {
          return 11 === t && 12 === e.type || 28 === t && 29 === e.type || 2 === t &&
            3 === e.type
        },
        Ge = function (e) {
          return 17 === e.type || 15 === e.type
        },
        Ve = function (e) {
          return 16 === e.type || Ge(e)
        },
        Ze = function (e) {
          return e.length > 1 ? [e[0], e[1]] : [e[0]]
        },
        Xe = {
          type: 17,
          number: 0,
          flags: 4
        },
        Je = {
          type: 16,
          number: 50,
          flags: 4
        },
        qe = {
          type: 16,
          number: 100,
          flags: 4
        },
        $e = function (e, t, n) {
          var r = e[0],
            a = e[1];
          return [et(r, t), et(void 0 !== a ? a : r, n)]
        },
        et = function (e, t) {
          if (16 === e.type) return e.number / 100 * t;
          if (Fe(e)) switch (e.unit) {
            case "rem":
            case "em":
              return 16 * e.number;
            case "px":
            default:
              return e.number
          }
          return e.number
        },
        tt = function (e, t) {
          if (15 === t.type) switch (t.unit) {
            case "deg":
              return Math.PI * t.number / 180;
            case "grad":
              return Math.PI / 200 * t.number;
            case "rad":
              return t.number;
            case "turn":
              return 2 * Math.PI * t.number
          }
          throw new Error("Unsupported angle type")
        },
        nt = function (e) {
          return 15 === e.type && ("deg" === e.unit || "grad" === e.unit || "rad" === e
            .unit || "turn" === e.unit)
        },
        rt = function (e) {
          switch (e.filter(je).map((function (e) {
            return e.value
          })).join(" ")) {
            case "to bottom right":
            case "to right bottom":
            case "left top":
            case "top left":
              return [Xe, Xe];
            case "to top":
            case "bottom":
              return at(0);
            case "to bottom left":
            case "to left bottom":
            case "right top":
            case "top right":
              return [Xe, qe];
            case "to right":
            case "left":
              return at(90);
            case "to top left":
            case "to left top":
            case "right bottom":
            case "bottom right":
              return [qe, qe];
            case "to bottom":
            case "top":
              return at(180);
            case "to top right":
            case "to right top":
            case "left bottom":
            case "bottom left":
              return [qe, Xe];
            case "to left":
            case "right":
              return at(270)
          }
          return 0
        },
        at = function (e) {
          return Math.PI * e / 180
        },
        it = function (e, t) {
          if (18 === t.type) {
            var n = pt[t.name];
            if (void 0 === n) throw new Error(
              'Attempting to parse an unsupported color function "' + t.name + '"');
            return n(e, t.values)
          }
          if (5 === t.type) {
            if (3 === t.value.length) {
              var r = t.value.substring(0, 1),
                a = t.value.substring(1, 2),
                i = t.value.substring(2, 3);
              return st(parseInt(r + r, 16), parseInt(a + a, 16), parseInt(i + i, 16),
                1)
            }
            if (4 === t.value.length) {
              r = t.value.substring(0, 1), a = t.value.substring(1, 2), i = t.value
                .substring(2, 3);
              var A = t.value.substring(3, 4);
              return st(parseInt(r + r, 16), parseInt(a + a, 16), parseInt(i + i, 16),
                parseInt(A + A, 16) / 255)
            }
            if (6 === t.value.length) return r = t.value.substring(0, 2), a = t.value
              .substring(2, 4), i = t.value.substring(4, 6), st(parseInt(r, 16),
                parseInt(a, 16), parseInt(i, 16), 1);
            if (8 === t.value.length) return r = t.value.substring(0, 2), a = t.value
              .substring(2, 4), i = t.value.substring(4, 6), A = t.value.substring(6,
                8), st(parseInt(r, 16), parseInt(a, 16), parseInt(i, 16), parseInt(A,
                16) / 255)
          }
          if (20 === t.type) {
            var o = gt[t.value.toUpperCase()];
            if (void 0 !== o) return o
          }
          return gt.TRANSPARENT
        },
        At = function (e) {
          return 0 == (255 & e)
        },
        ot = function (e) {
          var t = 255 & e,
            n = 255 & e >> 8,
            r = 255 & e >> 16,
            a = 255 & e >> 24;
          return t < 255 ? "rgba(" + a + "," + r + "," + n + "," + t / 255 + ")" :
            "rgb(" + a + "," + r + "," + n + ")"
        },
        st = function (e, t, n, r) {
          return (e << 24 | t << 16 | n << 8 | Math.round(255 * r) << 0) >>> 0
        },
        ut = function (e, t) {
          if (17 === e.type) return e.number;
          if (16 === e.type) {
            var n = 3 === t ? 1 : 255;
            return 3 === t ? e.number / 100 * n : Math.round(e.number / 100 * n)
          }
          return 0
        },
        lt = function (e, t) {
          var n = t.filter(Ye);
          if (3 === n.length) {
            var r = n.map(ut),
              a = r[0],
              i = r[1],
              A = r[2];
            return st(a, i, A, 1)
          }
          if (4 === n.length) {
            var o = n.map(ut),
              s = (a = o[0], i = o[1], A = o[2], o[3]);
            return st(a, i, A, s)
          }
          return 0
        };

      function ct(e, t, n) {
        return n < 0 && (n += 1), n >= 1 && (n -= 1), n < 1 / 6 ? (t - e) * n * 6 + e :
          n < .5 ? t : n < 2 / 3 ? 6 * (t - e) * (2 / 3 - n) + e : e
      }
      var dt, ht = function (e, t) {
          var n = t.filter(Ye),
            r = n[0],
            a = n[1],
            i = n[2],
            A = n[3],
            o = (17 === r.type ? at(r.number) : tt(e, r)) / (2 * Math.PI),
            s = Ve(a) ? a.number / 100 : 0,
            u = Ve(i) ? i.number / 100 : 0,
            l = void 0 !== A && Ve(A) ? et(A, 1) : 1;
          if (0 === s) return st(255 * u, 255 * u, 255 * u, 1);
          var c = u <= .5 ? u * (s + 1) : u + s - u * s,
            d = 2 * u - c,
            h = ct(d, c, o + 1 / 3),
            p = ct(d, c, o),
            f = ct(d, c, o - 1 / 3);
          return st(255 * h, 255 * p, 255 * f, l)
        },
        pt = {
          hsl: ht,
          hsla: ht,
          rgb: lt,
          rgba: lt
        },
        ft = function (e, t) {
          return it(e, Ue.create(t).parseComponentValue())
        },
        gt = {
          ALICEBLUE: 4042850303,
          ANTIQUEWHITE: 4209760255,
          AQUA: 16777215,
          AQUAMARINE: 2147472639,
          AZURE: 4043309055,
          BEIGE: 4126530815,
          BISQUE: 4293182719,
          BLACK: 255,
          BLANCHEDALMOND: 4293643775,
          BLUE: 65535,
          BLUEVIOLET: 2318131967,
          BROWN: 2771004159,
          BURLYWOOD: 3736635391,
          CADETBLUE: 1604231423,
          CHARTREUSE: 2147418367,
          CHOCOLATE: 3530104575,
          CORAL: 4286533887,
          CORNFLOWERBLUE: 1687547391,
          CORNSILK: 4294499583,
          CRIMSON: 3692313855,
          CYAN: 16777215,
          DARKBLUE: 35839,
          DARKCYAN: 9145343,
          DARKGOLDENROD: 3095837695,
          DARKGRAY: 2846468607,
          DARKGREEN: 6553855,
          DARKGREY: 2846468607,
          DARKKHAKI: 3182914559,
          DARKMAGENTA: 2332068863,
          DARKOLIVEGREEN: 1433087999,
          DARKORANGE: 4287365375,
          DARKORCHID: 2570243327,
          DARKRED: 2332033279,
          DARKSALMON: 3918953215,
          DARKSEAGREEN: 2411499519,
          DARKSLATEBLUE: 1211993087,
          DARKSLATEGRAY: 793726975,
          DARKSLATEGREY: 793726975,
          DARKTURQUOISE: 13554175,
          DARKVIOLET: 2483082239,
          DEEPPINK: 4279538687,
          DEEPSKYBLUE: 12582911,
          DIMGRAY: 1768516095,
          DIMGREY: 1768516095,
          DODGERBLUE: 512819199,
          FIREBRICK: 2988581631,
          FLORALWHITE: 4294635775,
          FORESTGREEN: 579543807,
          FUCHSIA: 4278255615,
          GAINSBORO: 3705462015,
          GHOSTWHITE: 4177068031,
          GOLD: 4292280575,
          GOLDENROD: 3668254975,
          GRAY: 2155905279,
          GREEN: 8388863,
          GREENYELLOW: 2919182335,
          GREY: 2155905279,
          HONEYDEW: 4043305215,
          HOTPINK: 4285117695,
          INDIANRED: 3445382399,
          INDIGO: 1258324735,
          IVORY: 4294963455,
          KHAKI: 4041641215,
          LAVENDER: 3873897215,
          LAVENDERBLUSH: 4293981695,
          LAWNGREEN: 2096890111,
          LEMONCHIFFON: 4294626815,
          LIGHTBLUE: 2916673279,
          LIGHTCORAL: 4034953471,
          LIGHTCYAN: 3774873599,
          LIGHTGOLDENRODYELLOW: 4210742015,
          LIGHTGRAY: 3553874943,
          LIGHTGREEN: 2431553791,
          LIGHTGREY: 3553874943,
          LIGHTPINK: 4290167295,
          LIGHTSALMON: 4288707327,
          LIGHTSEAGREEN: 548580095,
          LIGHTSKYBLUE: 2278488831,
          LIGHTSLATEGRAY: 2005441023,
          LIGHTSLATEGREY: 2005441023,
          LIGHTSTEELBLUE: 2965692159,
          LIGHTYELLOW: 4294959359,
          LIME: 16711935,
          LIMEGREEN: 852308735,
          LINEN: 4210091775,
          MAGENTA: 4278255615,
          MAROON: 2147483903,
          MEDIUMAQUAMARINE: 1724754687,
          MEDIUMBLUE: 52735,
          MEDIUMORCHID: 3126187007,
          MEDIUMPURPLE: 2473647103,
          MEDIUMSEAGREEN: 1018393087,
          MEDIUMSLATEBLUE: 2070474495,
          MEDIUMSPRINGGREEN: 16423679,
          MEDIUMTURQUOISE: 1221709055,
          MEDIUMVIOLETRED: 3340076543,
          MIDNIGHTBLUE: 421097727,
          MINTCREAM: 4127193855,
          MISTYROSE: 4293190143,
          MOCCASIN: 4293178879,
          NAVAJOWHITE: 4292783615,
          NAVY: 33023,
          OLDLACE: 4260751103,
          OLIVE: 2155872511,
          OLIVEDRAB: 1804477439,
          ORANGE: 4289003775,
          ORANGERED: 4282712319,
          ORCHID: 3664828159,
          PALEGOLDENROD: 4008225535,
          PALEGREEN: 2566625535,
          PALETURQUOISE: 2951671551,
          PALEVIOLETRED: 3681588223,
          PAPAYAWHIP: 4293907967,
          PEACHPUFF: 4292524543,
          PERU: 3448061951,
          PINK: 4290825215,
          PLUM: 3718307327,
          POWDERBLUE: 2967529215,
          PURPLE: 2147516671,
          REBECCAPURPLE: 1714657791,
          RED: 4278190335,
          ROSYBROWN: 3163525119,
          ROYALBLUE: 1097458175,
          SADDLEBROWN: 2336560127,
          SALMON: 4202722047,
          SANDYBROWN: 4104413439,
          SEAGREEN: 780883967,
          SEASHELL: 4294307583,
          SIENNA: 2689740287,
          SILVER: 3233857791,
          SKYBLUE: 2278484991,
          SLATEBLUE: 1784335871,
          SLATEGRAY: 1887473919,
          SLATEGREY: 1887473919,
          SNOW: 4294638335,
          SPRINGGREEN: 16744447,
          STEELBLUE: 1182971135,
          TAN: 3535047935,
          TEAL: 8421631,
          THISTLE: 3636451583,
          TOMATO: 4284696575,
          TRANSPARENT: 0,
          TURQUOISE: 1088475391,
          VIOLET: 4001558271,
          WHEAT: 4125012991,
          WHITE: 4294967295,
          WHITESMOKE: 4126537215,
          YELLOW: 4294902015,
          YELLOWGREEN: 2597139199
        },
        yt = {
          name: "background-clip",
          initialValue: "border-box",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return t.map((function (e) {
              if (je(e)) switch (e.value) {
                case "padding-box":
                  return 1;
                case "content-box":
                  return 2
              }
              return 0
            }))
          }
        },
        vt = {
          name: "background-color",
          initialValue: "transparent",
          prefix: !1,
          type: 3,
          format: "color"
        },
        mt = function (e, t) {
          var n = it(e, t[0]),
            r = t[1];
          return r && Ve(r) ? {
            color: n,
            stop: r
          } : {
            color: n,
            stop: null
          }
        },
        wt = function (e, t) {
          var n = e[0],
            r = e[e.length - 1];
          null === n.stop && (n.stop = Xe), null === r.stop && (r.stop = qe);
          for (var a = [], i = 0, A = 0; A < e.length; A++) {
            var o = e[A].stop;
            if (null !== o) {
              var s = et(o, t);
              s > i ? a.push(s) : a.push(i), i = s
            } else a.push(null)
          }
          var u = null;
          for (A = 0; A < a.length; A++) {
            var l = a[A];
            if (null === l) null === u && (u = A);
            else if (null !== u) {
              for (var c = A - u, d = (l - a[u - 1]) / (c + 1), h = 1; h <= c; h++) a[
                u + h - 1] = d * h;
              u = null
            }
          }
          return e.map((function (e, n) {
            return {
              color: e.color,
              stop: Math.max(Math.min(1, a[n] / t), 0)
            }
          }))
        },
        Bt = function (e, t, n) {
          var r = "number" == typeof e ? e : function (e, t, n) {
              var r = t / 2,
                a = n / 2,
                i = et(e[0], t) - r,
                A = a - et(e[1], n);
              return (Math.atan2(A, i) + 2 * Math.PI) % (2 * Math.PI)
            }(e, t, n),
            a = Math.abs(t * Math.sin(r)) + Math.abs(n * Math.cos(r)),
            i = t / 2,
            A = n / 2,
            o = a / 2,
            s = Math.sin(r - Math.PI / 2) * o,
            u = Math.cos(r - Math.PI / 2) * o;
          return [a, i - u, i + u, A - s, A + s]
        },
        Mt = function (e, t) {
          return Math.sqrt(e * e + t * t)
        },
        Ct = function (e, t, n, r, a) {
          return [
            [0, 0],
            [0, t],
            [e, 0],
            [e, t]
          ].reduce((function (e, t) {
            var i = t[0],
              A = t[1],
              o = Mt(n - i, r - A);
            return (a ? o < e.optimumDistance : o > e.optimumDistance) ? {
              optimumCorner: t,
              optimumDistance: o
            } : e
          }), {
            optimumDistance: a ? 1 / 0 : -1 / 0,
            optimumCorner: null
          }).optimumCorner
        },
        It = function (e, t) {
          var n = at(180),
            r = [];
          return We(t).forEach((function (t, a) {
            if (0 === a) {
              var i = t[0];
              if (20 === i.type && -1 !== ["top", "left", "right", "bottom"]
                .indexOf(i.value)) return void(n = rt(t));
              if (nt(i)) return void(n = (tt(e, i) + at(270)) % at(360))
            }
            var A = mt(e, t);
            r.push(A)
          })), {
            angle: n,
            stops: r,
            type: 1
          }
        },
        xt = function (e, t) {
          var n = 0,
            r = 3,
            a = [],
            i = [];
          return We(t).forEach((function (t, A) {
            var o = !0;
            if (0 === A ? o = t.reduce((function (e, t) {
                if (je(t)) switch (t.value) {
                  case "center":
                    return i.push(Je), !1;
                  case "top":
                  case "left":
                    return i.push(Xe), !1;
                  case "right":
                  case "bottom":
                    return i.push(qe), !1
                } else if (Ve(t) || Ge(t)) return i.push(t), !1;
                return e
              }), o) : 1 === A && (o = t.reduce((function (e, t) {
                if (je(t)) switch (t.value) {
                  case "circle":
                    return n = 0, !1;
                  case "ellipse":
                    return n = 1, !1;
                  case "contain":
                  case "closest-side":
                    return r = 0, !1;
                  case "farthest-side":
                    return r = 1, !1;
                  case "closest-corner":
                    return r = 2, !1;
                  case "cover":
                  case "farthest-corner":
                    return r = 3, !1
                } else if (Ge(t) || Ve(t)) return Array.isArray(r) || (
                  r = []), r.push(t), !1;
                return e
              }), o)), o) {
              var s = mt(e, t);
              a.push(s)
            }
          })), {
            size: r,
            shape: n,
            stops: a,
            position: i,
            type: 2
          }
        },
        bt = function (e, t) {
          if (22 === t.type) {
            var n = {
              url: t.value,
              type: 0
            };
            return e.cache.addImage(t.value), n
          }
          if (18 === t.type) {
            var r = kt[t.name];
            if (void 0 === r) throw new Error(
              'Attempting to parse an unsupported image function "' + t.name + '"');
            return r(e, t.values)
          }
          throw new Error("Unsupported image type " + t.type)
        },
        kt = {
          "linear-gradient": function (e, t) {
            var n = at(180),
              r = [];
            return We(t).forEach((function (t, a) {
              if (0 === a) {
                var i = t[0];
                if (20 === i.type && "to" === i.value) return void(n = rt(t));
                if (nt(i)) return void(n = tt(e, i))
              }
              var A = mt(e, t);
              r.push(A)
            })), {
              angle: n,
              stops: r,
              type: 1
            }
          },
          "-moz-linear-gradient": It,
          "-ms-linear-gradient": It,
          "-o-linear-gradient": It,
          "-webkit-linear-gradient": It,
          "radial-gradient": function (e, t) {
            var n = 0,
              r = 3,
              a = [],
              i = [];
            return We(t).forEach((function (t, A) {
              var o = !0;
              if (0 === A) {
                var s = !1;
                o = t.reduce((function (e, t) {
                  if (s)
                    if (je(t)) switch (t.value) {
                      case "center":
                        return i.push(Je), e;
                      case "top":
                      case "left":
                        return i.push(Xe), e;
                      case "right":
                      case "bottom":
                        return i.push(qe), e
                    } else(Ve(t) || Ge(t)) && i.push(t);
                    else if (je(t)) switch (t.value) {
                    case "circle":
                      return n = 0, !1;
                    case "ellipse":
                      return n = 1, !1;
                    case "at":
                      return s = !0, !1;
                    case "closest-side":
                      return r = 0, !1;
                    case "cover":
                    case "farthest-side":
                      return r = 1, !1;
                    case "contain":
                    case "closest-corner":
                      return r = 2, !1;
                    case "farthest-corner":
                      return r = 3, !1
                  } else if (Ge(t) || Ve(t)) return Array.isArray(r) ||
                    (r = []), r.push(t), !1;
                  return e
                }), o)
              }
              if (o) {
                var u = mt(e, t);
                a.push(u)
              }
            })), {
              size: r,
              shape: n,
              stops: a,
              position: i,
              type: 2
            }
          },
          "-moz-radial-gradient": xt,
          "-ms-radial-gradient": xt,
          "-o-radial-gradient": xt,
          "-webkit-radial-gradient": xt,
          "-webkit-gradient": function (e, t) {
            var n = at(180),
              r = [],
              a = 1;
            return We(t).forEach((function (t, n) {
              var i = t[0];
              if (0 === n) {
                if (je(i) && "linear" === i.value) return void(a = 1);
                if (je(i) && "radial" === i.value) return void(a = 2)
              }
              if (18 === i.type)
                if ("from" === i.name) {
                  var A = it(e, i.values[0]);
                  r.push({
                    stop: Xe,
                    color: A
                  })
                } else if ("to" === i.name) A = it(e, i.values[0]), r.push({
                stop: qe,
                color: A
              });
              else if ("color-stop" === i.name) {
                var o = i.values.filter(Ye);
                if (2 === o.length) {
                  A = it(e, o[1]);
                  var s = o[0];
                  Le(s) && r.push({
                    stop: {
                      type: 16,
                      number: 100 * s.number,
                      flags: s.flags
                    },
                    color: A
                  })
                }
              }
            })), 1 === a ? {
              angle: (n + at(180)) % at(360),
              stops: r,
              type: a
            } : {
              size: 3,
              shape: 0,
              stops: r,
              position: [],
              type: a
            }
          }
        },
        Tt = {
          name: "background-image",
          initialValue: "none",
          type: 1,
          prefix: !1,
          parse: function (e, t) {
            if (0 === t.length) return [];
            var n = t[0];
            return 20 === n.type && "none" === n.value ? [] : t.filter((function (e) {
              return Ye(e) && function (e) {
                return !(20 === e.type && "none" === e.value || 18 === e
                  .type && !kt[e.name])
              }(e)
            })).map((function (t) {
              return bt(e, t)
            }))
          }
        },
        Et = {
          name: "background-origin",
          initialValue: "border-box",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return t.map((function (e) {
              if (je(e)) switch (e.value) {
                case "padding-box":
                  return 1;
                case "content-box":
                  return 2
              }
              return 0
            }))
          }
        },
        Dt = {
          name: "background-position",
          initialValue: "0% 0%",
          type: 1,
          prefix: !1,
          parse: function (e, t) {
            return We(t).map((function (e) {
              return e.filter(Ve)
            })).map(Ze)
          }
        },
        Nt = {
          name: "background-repeat",
          initialValue: "repeat",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return We(t).map((function (e) {
              return e.filter(je).map((function (e) {
                return e.value
              })).join(" ")
            })).map(Pt)
          }
        },
        Pt = function (e) {
          switch (e) {
            case "no-repeat":
              return 1;
            case "repeat-x":
            case "repeat no-repeat":
              return 2;
            case "repeat-y":
            case "no-repeat repeat":
              return 3;
            case "repeat":
            default:
              return 0
          }
        };
      ! function (e) {
        e.AUTO = "auto", e.CONTAIN = "contain", e.COVER = "cover"
      }(dt || (dt = {}));
      var Qt, Ot = {
          name: "background-size",
          initialValue: "0",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return We(t).map((function (e) {
              return e.filter(_t)
            }))
          }
        },
        _t = function (e) {
          return je(e) || Ve(e)
        },
        St = function (e) {
          return {
            name: "border-" + e + "-color",
            initialValue: "transparent",
            prefix: !1,
            type: 3,
            format: "color"
          }
        },
        Ut = St("top"),
        Ft = St("right"),
        Lt = St("bottom"),
        jt = St("left"),
        zt = function (e) {
          return {
            name: "border-radius-" + e,
            initialValue: "0 0",
            prefix: !1,
            type: 1,
            parse: function (e, t) {
              return Ze(t.filter(Ve))
            }
          }
        },
        Rt = zt("top-left"),
        Ht = zt("top-right"),
        Yt = zt("bottom-right"),
        Wt = zt("bottom-left"),
        Kt = function (e) {
          return {
            name: "border-" + e + "-style",
            initialValue: "solid",
            prefix: !1,
            type: 2,
            parse: function (e, t) {
              switch (t) {
                case "none":
                  return 0;
                case "dashed":
                  return 2;
                case "dotted":
                  return 3;
                case "double":
                  return 4
              }
              return 1
            }
          }
        },
        Gt = Kt("top"),
        Vt = Kt("right"),
        Zt = Kt("bottom"),
        Xt = Kt("left"),
        Jt = function (e) {
          return {
            name: "border-" + e + "-width",
            initialValue: "0",
            type: 0,
            prefix: !1,
            parse: function (e, t) {
              return Fe(t) ? t.number : 0
            }
          }
        },
        qt = Jt("top"),
        $t = Jt("right"),
        en = Jt("bottom"),
        tn = Jt("left"),
        nn = {
          name: "color",
          initialValue: "transparent",
          prefix: !1,
          type: 3,
          format: "color"
        },
        rn = {
          name: "direction",
          initialValue: "ltr",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "rtl":
                return 1;
              case "ltr":
              default:
                return 0
            }
          }
        },
        an = {
          name: "display",
          initialValue: "inline-block",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return t.filter(je).reduce((function (e, t) {
              return e | An(t.value)
            }), 0)
          }
        },
        An = function (e) {
          switch (e) {
            case "block":
            case "-webkit-box":
              return 2;
            case "inline":
              return 4;
            case "run-in":
              return 8;
            case "flow":
              return 16;
            case "flow-root":
              return 32;
            case "table":
              return 64;
            case "flex":
            case "-webkit-flex":
              return 128;
            case "grid":
            case "-ms-grid":
              return 256;
            case "ruby":
              return 512;
            case "subgrid":
              return 1024;
            case "list-item":
              return 2048;
            case "table-row-group":
              return 4096;
            case "table-header-group":
              return 8192;
            case "table-footer-group":
              return 16384;
            case "table-row":
              return 32768;
            case "table-cell":
              return 65536;
            case "table-column-group":
              return 131072;
            case "table-column":
              return 262144;
            case "table-caption":
              return 524288;
            case "ruby-base":
              return 1048576;
            case "ruby-text":
              return 2097152;
            case "ruby-base-container":
              return 4194304;
            case "ruby-text-container":
              return 8388608;
            case "contents":
              return 16777216;
            case "inline-block":
              return 33554432;
            case "inline-list-item":
              return 67108864;
            case "inline-table":
              return 134217728;
            case "inline-flex":
              return 268435456;
            case "inline-grid":
              return 536870912
          }
          return 0
        },
        on = {
          name: "float",
          initialValue: "none",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "left":
                return 1;
              case "right":
                return 2;
              case "inline-start":
                return 3;
              case "inline-end":
                return 4
            }
            return 0
          }
        },
        sn = {
          name: "letter-spacing",
          initialValue: "0",
          prefix: !1,
          type: 0,
          parse: function (e, t) {
            return 20 === t.type && "normal" === t.value ? 0 : 17 === t.type || 15 ===
              t.type ? t.number : 0
          }
        };
      ! function (e) {
        e.NORMAL = "normal", e.STRICT = "strict"
      }(Qt || (Qt = {}));
      var un, ln = {
          name: "line-break",
          initialValue: "normal",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "strict":
                return Qt.STRICT;
              case "normal":
              default:
                return Qt.NORMAL
            }
          }
        },
        cn = {
          name: "line-height",
          initialValue: "normal",
          prefix: !1,
          type: 4
        },
        dn = function (e, t) {
          return je(e) && "normal" === e.value ? 1.2 * t : 17 === e.type ? t * e
            .number : Ve(e) ? et(e, t) : t
        },
        hn = {
          name: "list-style-image",
          initialValue: "none",
          type: 0,
          prefix: !1,
          parse: function (e, t) {
            return 20 === t.type && "none" === t.value ? null : bt(e, t)
          }
        },
        pn = {
          name: "list-style-position",
          initialValue: "outside",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "inside":
                return 0;
              case "outside":
              default:
                return 1
            }
          }
        },
        fn = {
          name: "list-style-type",
          initialValue: "none",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "disc":
                return 0;
              case "circle":
                return 1;
              case "square":
                return 2;
              case "decimal":
                return 3;
              case "cjk-decimal":
                return 4;
              case "decimal-leading-zero":
                return 5;
              case "lower-roman":
                return 6;
              case "upper-roman":
                return 7;
              case "lower-greek":
                return 8;
              case "lower-alpha":
                return 9;
              case "upper-alpha":
                return 10;
              case "arabic-indic":
                return 11;
              case "armenian":
                return 12;
              case "bengali":
                return 13;
              case "cambodian":
                return 14;
              case "cjk-earthly-branch":
                return 15;
              case "cjk-heavenly-stem":
                return 16;
              case "cjk-ideographic":
                return 17;
              case "devanagari":
                return 18;
              case "ethiopic-numeric":
                return 19;
              case "georgian":
                return 20;
              case "gujarati":
                return 21;
              case "gurmukhi":
              case "hebrew":
                return 22;
              case "hiragana":
                return 23;
              case "hiragana-iroha":
                return 24;
              case "japanese-formal":
                return 25;
              case "japanese-informal":
                return 26;
              case "kannada":
                return 27;
              case "katakana":
                return 28;
              case "katakana-iroha":
                return 29;
              case "khmer":
                return 30;
              case "korean-hangul-formal":
                return 31;
              case "korean-hanja-formal":
                return 32;
              case "korean-hanja-informal":
                return 33;
              case "lao":
                return 34;
              case "lower-armenian":
                return 35;
              case "malayalam":
                return 36;
              case "mongolian":
                return 37;
              case "myanmar":
                return 38;
              case "oriya":
                return 39;
              case "persian":
                return 40;
              case "simp-chinese-formal":
                return 41;
              case "simp-chinese-informal":
                return 42;
              case "tamil":
                return 43;
              case "telugu":
                return 44;
              case "thai":
                return 45;
              case "tibetan":
                return 46;
              case "trad-chinese-formal":
                return 47;
              case "trad-chinese-informal":
                return 48;
              case "upper-armenian":
                return 49;
              case "disclosure-open":
                return 50;
              case "disclosure-closed":
                return 51;
              case "none":
              default:
                return -1
            }
          }
        },
        gn = function (e) {
          return {
            name: "margin-" + e,
            initialValue: "0",
            prefix: !1,
            type: 4
          }
        },
        yn = gn("top"),
        vn = gn("right"),
        mn = gn("bottom"),
        wn = gn("left"),
        Bn = {
          name: "overflow",
          initialValue: "visible",
          prefix: !1,
          type: 1,
          parse: function (e, t) {
            return t.filter(je).map((function (e) {
              switch (e.value) {
                case "hidden":
                  return 1;
                case "scroll":
                  return 2;
                case "clip":
                  return 3;
                case "auto":
                  return 4;
                case "visible":
                default:
                  return 0
              }
            }))
          }
        },
        Mn = {
          name: "overflow-wrap",
          initialValue: "normal",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "break-word":
                return "break-word";
              case "normal":
              default:
                return "normal"
            }
          }
        },
        Cn = function (e) {
          return {
            name: "padding-" + e,
            initialValue: "0",
            prefix: !1,
            type: 3,
            format: "length-percentage"
          }
        },
        In = Cn("top"),
        xn = Cn("right"),
        bn = Cn("bottom"),
        kn = Cn("left"),
        Tn = {
          name: "text-align",
          initialValue: "left",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "right":
                return 2;
              case "center":
              case "justify":
                return 1;
              case "left":
              default:
                return 0
            }
          }
        },
        En = {
          name: "position",
          initialValue: "static",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "relative":
                return 1;
              case "absolute":
                return 2;
              case "fixed":
                return 3;
              case "sticky":
                return 4
            }
            return 0
          }
        },
        Dn = {
          name: "text-shadow",
          initialValue: "none",
          type: 1,
          prefix: !1,
          parse: function (e, t) {
            return 1 === t.length && Re(t[0], "none") ? [] : We(t).map((function (t) {
              for (var n = {
                  color: gt.TRANSPARENT,
                  offsetX: Xe,
                  offsetY: Xe,
                  blur: Xe
                }, r = 0, a = 0; a < t.length; a++) {
                var i = t[a];
                Ge(i) ? (0 === r ? n.offsetX = i : 1 === r ? n.offsetY = i : n
                  .blur = i, r++) : n.color = it(e, i)
              }
              return n
            }))
          }
        },
        Nn = {
          name: "text-transform",
          initialValue: "none",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "uppercase":
                return 2;
              case "lowercase":
                return 1;
              case "capitalize":
                return 3
            }
            return 0
          }
        },
        Pn = {
          name: "transform",
          initialValue: "none",
          prefix: !0,
          type: 0,
          parse: function (e, t) {
            if (20 === t.type && "none" === t.value) return null;
            if (18 === t.type) {
              var n = Qn[t.name];
              if (void 0 === n) throw new Error(
                'Attempting to parse an unsupported transform function "' + t
                .name + '"');
              return n(t.values)
            }
            return null
          }
        },
        Qn = {
          matrix: function (e) {
            var t = e.filter((function (e) {
              return 17 === e.type
            })).map((function (e) {
              return e.number
            }));
            return 6 === t.length ? t : null
          },
          matrix3d: function (e) {
            var t = e.filter((function (e) {
                return 17 === e.type
              })).map((function (e) {
                return e.number
              })),
              n = t[0],
              r = t[1];
            t[2], t[3];
            var a = t[4],
              i = t[5];
            t[6], t[7], t[8], t[9], t[10], t[11];
            var A = t[12],
              o = t[13];
            return t[14], t[15], 16 === t.length ? [n, r, a, i, A, o] : null
          }
        },
        On = {
          type: 16,
          number: 50,
          flags: 4
        },
        _n = [On, On],
        Sn = {
          name: "transform-origin",
          initialValue: "50% 50%",
          prefix: !0,
          type: 1,
          parse: function (e, t) {
            var n = t.filter(Ve);
            return 2 !== n.length ? _n : [n[0], n[1]]
          }
        },
        Un = {
          name: "visible",
          initialValue: "none",
          prefix: !1,
          type: 2,
          parse: function (e, t) {
            switch (t) {
              case "hidden":
                return 1;
              case "collapse":
                return 2;
              case "visible":
              default:
                return 0
            }
          }
        };
      ! function (e) {
        e.NORMAL = "normal", e.BREAK_ALL = "break-all", e.KEEP_ALL = "keep-all"
      }(un || (un = {}));
      for (var Fn = {
            name: "word-break",
            initialValue: "normal",
            prefix: !1,
            type: 2,
            parse: function (e, t) {
              switch (t) {
                case "break-all":
                  return un.BREAK_ALL;
                case "keep-all":
                  return un.KEEP_ALL;
                case "normal":
                default:
                  return un.NORMAL
              }
            }
          }, Ln = {
            name: "z-index",
            initialValue: "auto",
            prefix: !1,
            type: 0,
            parse: function (e, t) {
              if (20 === t.type) return {
                auto: !0,
                order: 0
              };
              if (Le(t)) return {
                auto: !1,
                order: t.number
              };
              throw new Error("Invalid z-index number parsed")
            }
          }, jn = function (e, t) {
            if (15 === t.type) switch (t.unit.toLowerCase()) {
              case "s":
                return 1e3 * t.number;
              case "ms":
                return t.number
            }
            throw new Error("Unsupported time type")
          }, zn = {
            name: "opacity",
            initialValue: "1",
            type: 0,
            prefix: !1,
            parse: function (e, t) {
              return Le(t) ? t.number : 1
            }
          }, Rn = {
            name: "text-decoration-color",
            initialValue: "transparent",
            prefix: !1,
            type: 3,
            format: "color"
          }, Hn = {
            name: "text-decoration-line",
            initialValue: "none",
            prefix: !1,
            type: 1,
            parse: function (e, t) {
              return t.filter(je).map((function (e) {
                switch (e.value) {
                  case "underline":
                    return 1;
                  case "overline":
                    return 2;
                  case "line-through":
                    return 3;
                  case "none":
                    return 4
                }
                return 0
              })).filter((function (e) {
                return 0 !== e
              }))
            }
          }, Yn = {
            name: "font-family",
            initialValue: "",
            prefix: !1,
            type: 1,
            parse: function (e, t) {
              var n = [],
                r = [];
              return t.forEach((function (e) {
                switch (e.type) {
                  case 20:
                  case 0:
                    n.push(e.value);
                    break;
                  case 17:
                    n.push(e.number.toString());
                    break;
                  case 4:
                    r.push(n.join(" ")), n.length = 0
                }
              })), n.length && r.push(n.join(" ")), r.map((function (e) {
                return -1 === e.indexOf(" ") ? e : "'" + e + "'"
              }))
            }
          }, Wn = {
            name: "font-size",
            initialValue: "0",
            prefix: !1,
            type: 3,
            format: "length"
          }, Kn = {
            name: "font-weight",
            initialValue: "normal",
            type: 0,
            prefix: !1,
            parse: function (e, t) {
              if (Le(t)) return t.number;
              if (je(t)) switch (t.value) {
                case "bold":
                  return 700;
                case "normal":
                default:
                  return 400
              }
              return 400
            }
          }, Gn = {
            name: "font-variant",
            initialValue: "none",
            type: 1,
            prefix: !1,
            parse: function (e, t) {
              return t.filter(je).map((function (e) {
                return e.value
              }))
            }
          }, Vn = {
            name: "font-style",
            initialValue: "normal",
            prefix: !1,
            type: 2,
            parse: function (e, t) {
              switch (t) {
                case "oblique":
                  return "oblique";
                case "italic":
                  return "italic";
                case "normal":
                default:
                  return "normal"
              }
            }
          }, Zn = function (e, t) {
            return 0 != (e & t)
          }, Xn = {
            name: "content",
            initialValue: "none",
            type: 1,
            prefix: !1,
            parse: function (e, t) {
              if (0 === t.length) return [];
              var n = t[0];
              return 20 === n.type && "none" === n.value ? [] : t
            }
          }, Jn = {
            name: "counter-increment",
            initialValue: "none",
            prefix: !0,
            type: 1,
            parse: function (e, t) {
              if (0 === t.length) return null;
              var n = t[0];
              if (20 === n.type && "none" === n.value) return null;
              for (var r = [], a = t.filter(He), i = 0; i < a.length; i++) {
                var A = a[i],
                  o = a[i + 1];
                if (20 === A.type) {
                  var s = o && Le(o) ? o.number : 1;
                  r.push({
                    counter: A.value,
                    increment: s
                  })
                }
              }
              return r
            }
          }, qn = {
            name: "counter-reset",
            initialValue: "none",
            prefix: !0,
            type: 1,
            parse: function (e, t) {
              if (0 === t.length) return [];
              for (var n = [], r = t.filter(He), a = 0; a < r.length; a++) {
                var i = r[a],
                  A = r[a + 1];
                if (je(i) && "none" !== i.value) {
                  var o = A && Le(A) ? A.number : 0;
                  n.push({
                    counter: i.value,
                    reset: o
                  })
                }
              }
              return n
            }
          }, $n = {
            name: "duration",
            initialValue: "0s",
            prefix: !1,
            type: 1,
            parse: function (e, t) {
              return t.filter(Fe).map((function (t) {
                return jn(e, t)
              }))
            }
          }, er = {
            name: "quotes",
            initialValue: "none",
            prefix: !0,
            type: 1,
            parse: function (e, t) {
              if (0 === t.length) return null;
              var n = t[0];
              if (20 === n.type && "none" === n.value) return null;
              var r = [],
                a = t.filter(ze);
              if (a.length % 2 != 0) return null;
              for (var i = 0; i < a.length; i += 2) {
                var A = a[i].value,
                  o = a[i + 1].value;
                r.push({
                  open: A,
                  close: o
                })
              }
              return r
            }
          }, tr = function (e, t, n) {
            if (!e) return "";
            var r = e[Math.min(t, e.length - 1)];
            return r ? n ? r.open : r.close : ""
          }, nr = {
            name: "box-shadow",
            initialValue: "none",
            type: 1,
            prefix: !1,
            parse: function (e, t) {
              return 1 === t.length && Re(t[0], "none") ? [] : We(t).map((function (
              t) {
                for (var n = {
                    color: 255,
                    offsetX: Xe,
                    offsetY: Xe,
                    blur: Xe,
                    spread: Xe,
                    inset: !1
                  }, r = 0, a = 0; a < t.length; a++) {
                  var i = t[a];
                  Re(i, "inset") ? n.inset = !0 : Ge(i) ? (0 === r ? n.offsetX =
                    i : 1 === r ? n.offsetY = i : 2 === r ? n.blur = i : n
                    .spread = i, r++) : n.color = it(e, i)
                }
                return n
              }))
            }
          }, rr = {
            name: "paint-order",
            initialValue: "normal",
            prefix: !1,
            type: 1,
            parse: function (e, t) {
              var n = [];
              return t.filter(je).forEach((function (e) {
                switch (e.value) {
                  case "stroke":
                    n.push(1);
                    break;
                  case "fill":
                    n.push(0);
                    break;
                  case "markers":
                    n.push(2)
                }
              })), [0, 1, 2].forEach((function (e) {
                -1 === n.indexOf(e) && n.push(e)
              })), n
            }
          }, ar = {
            name: "-webkit-text-stroke-color",
            initialValue: "currentcolor",
            prefix: !1,
            type: 3,
            format: "color"
          }, ir = {
            name: "-webkit-text-stroke-width",
            initialValue: "0",
            type: 0,
            prefix: !1,
            parse: function (e, t) {
              return Fe(t) ? t.number : 0
            }
          }, Ar = function () {
            function e(e, t) {
              var n, r;
              this.animationDuration = ur(e, $n, t.animationDuration), this
                .backgroundClip = ur(e, yt, t.backgroundClip), this.backgroundColor =
                ur(e, vt, t.backgroundColor), this.backgroundImage = ur(e, Tt, t
                  .backgroundImage), this.backgroundOrigin = ur(e, Et, t
                  .backgroundOrigin), this.backgroundPosition = ur(e, Dt, t
                  .backgroundPosition), this.backgroundRepeat = ur(e, Nt, t
                  .backgroundRepeat), this.backgroundSize = ur(e, Ot, t.backgroundSize),
                this.borderTopColor = ur(e, Ut, t.borderTopColor), this
                .borderRightColor = ur(e, Ft, t.borderRightColor), this
                .borderBottomColor = ur(e, Lt, t.borderBottomColor), this
                .borderLeftColor = ur(e, jt, t.borderLeftColor), this
                .borderTopLeftRadius = ur(e, Rt, t.borderTopLeftRadius), this
                .borderTopRightRadius = ur(e, Ht, t.borderTopRightRadius), this
                .borderBottomRightRadius = ur(e, Yt, t.borderBottomRightRadius), this
                .borderBottomLeftRadius = ur(e, Wt, t.borderBottomLeftRadius), this
                .borderTopStyle = ur(e, Gt, t.borderTopStyle), this.borderRightStyle =
                ur(e, Vt, t.borderRightStyle), this.borderBottomStyle = ur(e, Zt, t
                  .borderBottomStyle), this.borderLeftStyle = ur(e, Xt, t
                  .borderLeftStyle), this.borderTopWidth = ur(e, qt, t.borderTopWidth),
                this.borderRightWidth = ur(e, $t, t.borderRightWidth), this
                .borderBottomWidth = ur(e, en, t.borderBottomWidth), this
                .borderLeftWidth = ur(e, tn, t.borderLeftWidth), this.boxShadow = ur(e,
                  nr, t.boxShadow), this.color = ur(e, nn, t.color), this.direction =
                ur(e, rn, t.direction), this.display = ur(e, an, t.display), this
                .float = ur(e, on, t.cssFloat), this.fontFamily = ur(e, Yn, t
                  .fontFamily), this.fontSize = ur(e, Wn, t.fontSize), this.fontStyle =
                ur(e, Vn, t.fontStyle), this.fontVariant = ur(e, Gn, t.fontVariant),
                this.fontWeight = ur(e, Kn, t.fontWeight), this.letterSpacing = ur(e,
                  sn, t.letterSpacing), this.lineBreak = ur(e, ln, t.lineBreak), this
                .lineHeight = ur(e, cn, t.lineHeight), this.listStyleImage = ur(e, hn, t
                  .listStyleImage), this.listStylePosition = ur(e, pn, t
                  .listStylePosition), this.listStyleType = ur(e, fn, t.listStyleType),
                this.marginTop = ur(e, yn, t.marginTop), this.marginRight = ur(e, vn, t
                  .marginRight), this.marginBottom = ur(e, mn, t.marginBottom), this
                .marginLeft = ur(e, wn, t.marginLeft), this.opacity = ur(e, zn, t
                  .opacity);
              var a = ur(e, Bn, t.overflow);
              this.overflowX = a[0], this.overflowY = a[a.length > 1 ? 1 : 0], this
                .overflowWrap = ur(e, Mn, t.overflowWrap), this.paddingTop = ur(e, In, t
                  .paddingTop), this.paddingRight = ur(e, xn, t.paddingRight), this
                .paddingBottom = ur(e, bn, t.paddingBottom), this.paddingLeft = ur(e,
                  kn, t.paddingLeft), this.paintOrder = ur(e, rr, t.paintOrder), this
                .position = ur(e, En, t.position), this.textAlign = ur(e, Tn, t
                  .textAlign), this.textDecorationColor = ur(e, Rn, null !== (n = t
                  .textDecorationColor) && void 0 !== n ? n : t.color), this
                .textDecorationLine = ur(e, Hn, null !== (r = t.textDecorationLine) &&
                  void 0 !== r ? r : t.textDecoration), this.textShadow = ur(e, Dn, t
                  .textShadow), this.textTransform = ur(e, Nn, t.textTransform), this
                .transform = ur(e, Pn, t.transform), this.transformOrigin = ur(e, Sn, t
                  .transformOrigin), this.visibility = ur(e, Un, t.visibility), this
                .webkitTextStrokeColor = ur(e, ar, t.webkitTextStrokeColor), this
                .webkitTextStrokeWidth = ur(e, ir, t.webkitTextStrokeWidth), this
                .wordBreak = ur(e, Fn, t.wordBreak), this.zIndex = ur(e, Ln, t.zIndex)
            }
            return e.prototype.isVisible = function () {
              return this.display > 0 && this.opacity > 0 && 0 === this.visibility
            }, e.prototype.isTransparent = function () {
              return At(this.backgroundColor)
            }, e.prototype.isTransformed = function () {
              return null !== this.transform
            }, e.prototype.isPositioned = function () {
              return 0 !== this.position
            }, e.prototype.isPositionedWithZIndex = function () {
              return this.isPositioned() && !this.zIndex.auto
            }, e.prototype.isFloating = function () {
              return 0 !== this.float
            }, e.prototype.isInlineLevel = function () {
              return Zn(this.display, 4) || Zn(this.display, 33554432) || Zn(this
                .display, 268435456) || Zn(this.display, 536870912) || Zn(this
                .display, 67108864) || Zn(this.display, 134217728)
            }, e
          }(), or = function (e, t) {
            this.content = ur(e, Xn, t.content), this.quotes = ur(e, er, t.quotes)
          }, sr = function (e, t) {
            this.counterIncrement = ur(e, Jn, t.counterIncrement), this.counterReset =
              ur(e, qn, t.counterReset)
          }, ur = function (e, t, n) {
            var r = new Se,
              a = null != n ? n.toString() : t.initialValue;
            r.write(a);
            var i = new Ue(r.read());
            switch (t.type) {
              case 2:
                var A = i.parseComponentValue();
                return t.parse(e, je(A) ? A.value : t.initialValue);
              case 0:
                return t.parse(e, i.parseComponentValue());
              case 1:
                return t.parse(e, i.parseComponentValues());
              case 4:
                return i.parseComponentValue();
              case 3:
                switch (t.format) {
                  case "angle":
                    return tt(e, i.parseComponentValue());
                  case "color":
                    return it(e, i.parseComponentValue());
                  case "image":
                    return bt(e, i.parseComponentValue());
                  case "length":
                    var o = i.parseComponentValue();
                    return Ge(o) ? o : Xe;
                  case "length-percentage":
                    var s = i.parseComponentValue();
                    return Ve(s) ? s : Xe;
                  case "time":
                    return jn(e, i.parseComponentValue())
                }
            }
          }, lr = function (e, t) {
            var n = function (e) {
              switch (e.getAttribute("data-html2canvas-debug")) {
                case "all":
                  return 1;
                case "clone":
                  return 2;
                case "parse":
                  return 3;
                case "render":
                  return 4;
                default:
                  return 0
              }
            }(e);
            return 1 === n || t === n
          }, cr = function (e, t) {
            this.context = e, this.textNodes = [], this.elements = [], this.flags = 0,
              lr(t, 3), this.styles = new Ar(e, window.getComputedStyle(t, null)), ca(
              t) && (this.styles.animationDuration.some((function (e) {
                  return e > 0
                })) && (t.style.animationDuration = "0s"), null !== this.styles
                .transform && (t.style.transform = "none")), this.bounds = o(this
                .context, t), lr(t, 4) && (this.flags |= 16)
          }, dr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
          hr = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), pr = 0; pr <
        dr.length; pr++) hr[dr.charCodeAt(pr)] = pr;
      for (var fr = function (e, t, n) {
            return e.slice ? e.slice(t, n) : new Uint16Array(Array.prototype.slice.call(
              e, t, n))
          }, gr = function () {
            function e(e, t, n, r, a, i) {
              this.initialValue = e, this.errorValue = t, this.highStart = n, this
                .highValueIndex = r, this.index = a, this.data = i
            }
            return e.prototype.get = function (e) {
              var t;
              if (e >= 0) {
                if (e < 55296 || e > 56319 && e <= 65535) return t = ((t = this.index[
                  e >> 5]) << 2) + (31 & e), this.data[t];
                if (e <= 65535) return t = ((t = this.index[2048 + (e - 55296 >>
                  5)]) << 2) + (31 & e), this.data[t];
                if (e < this.highStart) return t = 2080 + (e >> 11), t = this.index[
                  t], t += e >> 5 & 63, t = ((t = this.index[t]) << 2) + (31 & e),
                  this.data[t];
                if (e <= 1114111) return this.data[this.highValueIndex]
              }
              return this.errorValue
            }, e
          }(), yr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
          vr = "undefined" == typeof Uint8Array ? [] : new Uint8Array(256), mr = 0; mr <
        yr.length; mr++) vr[yr.charCodeAt(mr)] = mr;
      var wr, Br = 8,
        Mr = 9,
        Cr = 11,
        Ir = 12,
        xr = function () {
          for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
          if (String.fromCodePoint) return String.fromCodePoint.apply(String, e);
          var n = e.length;
          if (!n) return "";
          for (var r = [], a = -1, i = ""; ++a < n;) {
            var A = e[a];
            A <= 65535 ? r.push(A) : (A -= 65536, r.push(55296 + (A >> 10), A % 1024 +
              56320)), (a + 1 === n || r.length > 16384) && (i += String.fromCharCode
              .apply(String, r), r.length = 0)
          }
          return i
        },
        br = function (e, t) {
          var n, r, a, i = function (e) {
              var t, n, r, a, i, A = .75 * e.length,
                o = e.length,
                s = 0;
              "=" === e[e.length - 1] && (A--, "=" === e[e.length - 2] && A--);
              var u = "undefined" != typeof ArrayBuffer && "undefined" !=
                typeof Uint8Array && void 0 !== Uint8Array.prototype.slice ?
                new ArrayBuffer(A) : new Array(A),
                l = Array.isArray(u) ? u : new Uint8Array(u);
              for (t = 0; t < o; t += 4) n = hr[e.charCodeAt(t)], r = hr[e.charCodeAt(
                t + 1)], a = hr[e.charCodeAt(t + 2)], i = hr[e.charCodeAt(t + 3)], l[
                s++] = n << 2 | r >> 4, l[s++] = (15 & r) << 4 | a >> 2, l[s++] = (3 &
                a) << 6 | 63 & i;
              return u
            }(e),
            A = Array.isArray(i) ? function (e) {
              for (var t = e.length, n = [], r = 0; r < t; r += 4) n.push(e[r + 3] <<
                24 | e[r + 2] << 16 | e[r + 1] << 8 | e[r]);
              return n
            }(i) : new Uint32Array(i),
            o = Array.isArray(i) ? function (e) {
              for (var t = e.length, n = [], r = 0; r < t; r += 2) n.push(e[r + 1] <<
                8 | e[r]);
              return n
            }(i) : new Uint16Array(i),
            s = fr(o, 12, A[4] / 2),
            u = 2 === A[5] ? fr(o, (24 + A[4]) / 2) : (n = A, r = Math.ceil((24 + A[
              4]) / 4), n.slice ? n.slice(r, a) : new Uint32Array(Array.prototype
              .slice.call(n, r, a)));
          return new gr(A[0], A[1], A[2], A[3], s, u)
        }(
          "AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),
        kr = function (e) {
          return br.get(e)
        },
        Tr = function (e, t, n) {
          var r = n - 2,
            a = t[r],
            i = t[n - 1],
            A = t[n];
          if (2 === i && 3 === A) return "×";
          if (2 === i || 3 === i || 4 === i) return "÷";
          if (2 === A || 3 === A || 4 === A) return "÷";
          if (i === Br && -1 !== [Br, Mr, Cr, Ir].indexOf(A)) return "×";
          if (!(i !== Cr && i !== Mr || A !== Mr && 10 !== A)) return "×";
          if ((i === Ir || 10 === i) && 10 === A) return "×";
          if (13 === A || 5 === A) return "×";
          if (7 === A) return "×";
          if (1 === i) return "×";
          if (13 === i && 14 === A) {
            for (; 5 === a;) a = t[--r];
            if (14 === a) return "×"
          }
          if (15 === i && 15 === A) {
            for (var o = 0; 15 === a;) o++, a = t[--r];
            if (o % 2 == 0) return "×"
          }
          return "÷"
        },
        Er = function (e) {
          var t = function (e) {
              for (var t = [], n = 0, r = e.length; n < r;) {
                var a = e.charCodeAt(n++);
                if (a >= 55296 && a <= 56319 && n < r) {
                  var i = e.charCodeAt(n++);
                  56320 == (64512 & i) ? t.push(((1023 & a) << 10) + (1023 & i) +
                    65536) : (t.push(a), n--)
                } else t.push(a)
              }
              return t
            }(e),
            n = t.length,
            r = 0,
            a = 0,
            i = t.map(kr);
          return {
            next: function () {
              if (r >= n) return {
                done: !0,
                value: null
              };
              for (var e = "×"; r < n && "×" === (e = Tr(0, i, ++r)););
              if ("×" !== e || r === n) {
                var A = xr.apply(null, t.slice(a, r));
                return a = r, {
                  value: A,
                  done: !1
                }
              }
              return {
                done: !0,
                value: null
              }
            }
          }
        },
        Dr = function (e) {
          return 0 === e[0] && 255 === e[1] && 0 === e[2] && 255 === e[3]
        },
        Nr = function (e, t, n, r, a) {
          var i = "http://www.w3.org/2000/svg",
            A = document.createElementNS(i, "svg"),
            o = document.createElementNS(i, "foreignObject");
          return A.setAttributeNS(null, "width", e.toString()), A.setAttributeNS(null,
              "height", t.toString()), o.setAttributeNS(null, "width", "100%"), o
            .setAttributeNS(null, "height", "100%"), o.setAttributeNS(null, "x", n
              .toString()), o.setAttributeNS(null, "y", r.toString()), o.setAttributeNS(
              null, "externalResourcesRequired", "true"), A.appendChild(o), o
            .appendChild(a), A
        },
        Pr = function (e) {
          return new Promise((function (t, n) {
            var r = new Image;
            r.onload = function () {
                return t(r)
              }, r.onerror = n, r.src = "data:image/svg+xml;charset=utf-8," +
              encodeURIComponent((new XMLSerializer).serializeToString(e))
          }))
        },
        Qr = {
          get SUPPORT_RANGE_BOUNDS() {
            var e = function (e) {
              if (e.createRange) {
                var t = e.createRange();
                if (t.getBoundingClientRect) {
                  var n = e.createElement("boundtest");
                  n.style.height = "123px", n.style.display = "block", e.body
                    .appendChild(n), t.selectNode(n);
                  var r = t.getBoundingClientRect(),
                    a = Math.round(r.height);
                  if (e.body.removeChild(n), 123 === a) return !0
                }
              }
              return !1
            }(document);
            return Object.defineProperty(Qr, "SUPPORT_RANGE_BOUNDS", {
              value: e
            }), e
          },
          get SUPPORT_WORD_BREAKING() {
            var e = Qr.SUPPORT_RANGE_BOUNDS && function (e) {
              var t = e.createElement("boundtest");
              t.style.width = "50px", t.style.display = "block", t.style.fontSize =
                "12px", t.style.letterSpacing = "0px", t.style.wordSpacing = "0px",
                e.body.appendChild(t);
              var n = e.createRange();
              t.innerHTML = "function" == typeof "".repeat ? "&#128104;".repeat(
                10) : "";
              var r = t.firstChild,
                a = s(r.data).map((function (e) {
                  return u(e)
                })),
                i = 0,
                A = {},
                o = a.every((function (e, t) {
                  n.setStart(r, i), n.setEnd(r, i + e.length);
                  var a = n.getBoundingClientRect();
                  i += e.length;
                  var o = a.x > A.x || a.y > A.y;
                  return A = a, 0 === t || o
                }));
              return e.body.removeChild(t), o
            }(document);
            return Object.defineProperty(Qr, "SUPPORT_WORD_BREAKING", {
              value: e
            }), e
          },
          get SUPPORT_SVG_DRAWING() {
            var e = function (e) {
              var t = new Image,
                n = e.createElement("canvas"),
                r = n.getContext("2d");
              if (!r) return !1;
              t.src =
                "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";
              try {
                r.drawImage(t, 0, 0), n.toDataURL()
              } catch (e) {
                return !1
              }
              return !0
            }(document);
            return Object.defineProperty(Qr, "SUPPORT_SVG_DRAWING", {
              value: e
            }), e
          },
          get SUPPORT_FOREIGNOBJECT_DRAWING() {
            var e = "function" == typeof Array.from && "function" == typeof window
              .fetch ? function (e) {
                var t = e.createElement("canvas");
                t.width = 100, t.height = 100;
                var n = t.getContext("2d");
                if (!n) return Promise.reject(!1);
                n.fillStyle = "rgb(0, 255, 0)", n.fillRect(0, 0, 100, 100);
                var r = new Image,
                  a = t.toDataURL();
                r.src = a;
                var i = Nr(100, 100, 0, 0, r);
                return n.fillStyle = "red", n.fillRect(0, 0, 100, 100), Pr(i).then((
                  function (t) {
                    n.drawImage(t, 0, 0);
                    var r = n.getImageData(0, 0, 100, 100).data;
                    n.fillStyle = "red", n.fillRect(0, 0, 100, 100);
                    var i = e.createElement("div");
                    return i.style.backgroundImage = "url(" + a + ")", i.style
                      .height = "100px", Dr(r) ? Pr(Nr(100, 100, 0, 0, i)) :
                      Promise.reject(!1)
                  })).then((function (e) {
                  return n.drawImage(e, 0, 0), Dr(n.getImageData(0, 0, 100, 100)
                    .data)
                })).catch((function () {
                  return !1
                }))
              }(document) : Promise.resolve(!1);
            return Object.defineProperty(Qr, "SUPPORT_FOREIGNOBJECT_DRAWING", {
              value: e
            }), e
          },
          get SUPPORT_CORS_IMAGES() {
            var e = void 0 !== (new Image).crossOrigin;
            return Object.defineProperty(Qr, "SUPPORT_CORS_IMAGES", {
              value: e
            }), e
          },
          get SUPPORT_RESPONSE_TYPE() {
            var e = "string" == typeof (new XMLHttpRequest).responseType;
            return Object.defineProperty(Qr, "SUPPORT_RESPONSE_TYPE", {
              value: e
            }), e
          },
          get SUPPORT_CORS_XHR() {
            var e = "withCredentials" in new XMLHttpRequest;
            return Object.defineProperty(Qr, "SUPPORT_CORS_XHR", {
              value: e
            }), e
          },
          get SUPPORT_NATIVE_TEXT_SEGMENTATION() {
            var e = !("undefined" == typeof Intl || !Intl.Segmenter);
            return Object.defineProperty(Qr, "SUPPORT_NATIVE_TEXT_SEGMENTATION", {
              value: e
            }), e
          }
        },
        Or = function (e, t) {
          this.text = e, this.bounds = t
        },
        _r = function (e, t) {
          var n = t.ownerDocument;
          if (n) {
            var r = n.createElement("html2canvaswrapper");
            r.appendChild(t.cloneNode(!0));
            var a = t.parentNode;
            if (a) {
              a.replaceChild(r, t);
              var i = o(e, r);
              return r.firstChild && a.replaceChild(r.firstChild, r), i
            }
          }
          return A.EMPTY
        },
        Sr = function (e, t, n) {
          var r = e.ownerDocument;
          if (!r) throw new Error("Node has no owner document");
          var a = r.createRange();
          return a.setStart(e, t), a.setEnd(e, t + n), a
        },
        Ur = function (e) {
          if (Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
            var t = new Intl.Segmenter(void 0, {
              granularity: "grapheme"
            });
            return Array.from(t.segment(e)).map((function (e) {
              return e.segment
            }))
          }
          return function (e) {
            for (var t, n = Er(e), r = []; !(t = n.next()).done;) t.value && r.push(t
              .value.slice());
            return r
          }(e)
        },
        Fr = function (e, t) {
          return 0 !== t.letterSpacing ? Ur(e) : function (e, t) {
            if (Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
              var n = new Intl.Segmenter(void 0, {
                granularity: "word"
              });
              return Array.from(n.segment(e)).map((function (e) {
                return e.segment
              }))
            }
            return jr(e, t)
          }(e, t)
        },
        Lr = [32, 160, 4961, 65792, 65793, 4153, 4241],
        jr = function (e, t) {
          for (var n, r = function (e, t) {
              var n = s(e),
                r = re(n, t),
                a = r[0],
                i = r[1],
                A = r[2],
                o = n.length,
                u = 0,
                l = 0;
              return {
                next: function () {
                  if (l >= o) return {
                    done: !0,
                    value: null
                  };
                  for (var e = "×"; l < o && "×" === (e = ne(n, i, a, ++l, A)););
                  if ("×" !== e || l === o) {
                    var t = new ae(n, e, u, l);
                    return u = l, {
                      value: t,
                      done: !1
                    }
                  }
                  return {
                    done: !0,
                    value: null
                  }
                }
              }
            }(e, {
              lineBreak: t.lineBreak,
              wordBreak: "break-word" === t.overflowWrap ? "break-word" : t
                .wordBreak
            }), a = [], i = function () {
              if (n.value) {
                var e = n.value.slice(),
                  t = s(e),
                  r = "";
                t.forEach((function (e) {
                  -1 === Lr.indexOf(e) ? r += u(e) : (r.length && a.push(r), a
                    .push(u(e)), r = "")
                })), r.length && a.push(r)
              }
            }; !(n = r.next()).done;) i();
          return a
        },
        zr = function (e, t, n) {
          this.text = Rr(t.data, n.textTransform), this.textBounds = function (e, t, n,
            r) {
            var a = Fr(t, n),
              i = [],
              o = 0;
            return a.forEach((function (t) {
              if (n.textDecorationLine.length || t.trim().length > 0)
                if (Qr.SUPPORT_RANGE_BOUNDS) {
                  var a = Sr(r, o, t.length).getClientRects();
                  if (a.length > 1) {
                    var s = Ur(t),
                      u = 0;
                    s.forEach((function (t) {
                      i.push(new Or(t, A.fromDOMRectList(e, Sr(r, u + o, t
                        .length).getClientRects()))), u += t.length
                    }))
                  } else i.push(new Or(t, A.fromDOMRectList(e, a)))
                } else {
                  var l = r.splitText(t.length);
                  i.push(new Or(t, _r(e, r))), r = l
                }
              else Qr.SUPPORT_RANGE_BOUNDS || (r = r.splitText(t.length));
              o += t.length
            })), i
          }(e, this.text, n, t)
        },
        Rr = function (e, t) {
          switch (t) {
            case 1:
              return e.toLowerCase();
            case 3:
              return e.replace(Hr, Yr);
            case 2:
              return e.toUpperCase();
            default:
              return e
          }
        },
        Hr = /(^|\s|:|-|\(|\))([a-z])/g,
        Yr = function (e, t, n) {
          return e.length > 0 ? t + n.toUpperCase() : e
        },
        Wr = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.src = n.currentSrc || n.src, r.intrinsicWidth = n.naturalWidth, r
              .intrinsicHeight = n.naturalHeight, r.context.cache.addImage(r.src), r
          }
          return t(n, e), n
        }(cr),
        Kr = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.canvas = n, r.intrinsicWidth = n.width, r.intrinsicHeight = n
              .height, r
          }
          return t(n, e), n
        }(cr),
        Gr = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this,
              a = new XMLSerializer,
              i = o(t, n);
            return n.setAttribute("width", i.width + "px"), n.setAttribute("height", i
                .height + "px"), r.svg = "data:image/svg+xml," + encodeURIComponent(a
                .serializeToString(n)), r.intrinsicWidth = n.width.baseVal.value, r
              .intrinsicHeight = n.height.baseVal.value, r.context.cache.addImage(r
              .svg), r
          }
          return t(n, e), n
        }(cr),
        Vr = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.value = n.value, r
          }
          return t(n, e), n
        }(cr),
        Zr = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.start = n.start, r.reversed = "boolean" == typeof n.reversed && !
              0 === n.reversed, r
          }
          return t(n, e), n
        }(cr),
        Xr = [{
          type: 15,
          flags: 0,
          unit: "px",
          number: 3
        }],
        Jr = [{
          type: 16,
          flags: 0,
          number: 50
        }],
        qr = "password",
        $r = function (e) {
          function n(t, n) {
            var r, a, i, o = e.call(this, t, n) || this;
            switch (o.type = n.type.toLowerCase(), o.checked = n.checked, o.value =
              0 === (a = (r = n).type === qr ? new Array(r.value.length + 1).join("•") :
                r.value).length ? r.placeholder || "" : a, "checkbox" !== o.type &&
              "radio" !== o.type || (o.styles.backgroundColor = 3739148031, o.styles
                .borderTopColor = o.styles.borderRightColor = o.styles
                .borderBottomColor = o.styles.borderLeftColor = 2779096575, o.styles
                .borderTopWidth = o.styles.borderRightWidth = o.styles
                .borderBottomWidth = o.styles.borderLeftWidth = 1, o.styles
                .borderTopStyle = o.styles.borderRightStyle = o.styles
                .borderBottomStyle = o.styles.borderLeftStyle = 1, o.styles
                .backgroundClip = [0], o.styles.backgroundOrigin = [0], o.bounds = (i =
                  o.bounds).width > i.height ? new A(i.left + (i.width - i.height) / 2,
                  i.top, i.height, i.height) : i.width < i.height ? new A(i.left, i
                  .top + (i.height - i.width) / 2, i.width, i.width) : i), o.type) {
              case "checkbox":
                o.styles.borderTopRightRadius = o.styles.borderTopLeftRadius = o.styles
                  .borderBottomRightRadius = o.styles.borderBottomLeftRadius = Xr;
                break;
              case "radio":
                o.styles.borderTopRightRadius = o.styles.borderTopLeftRadius = o.styles
                  .borderBottomRightRadius = o.styles.borderBottomLeftRadius = Jr
            }
            return o
          }
          return t(n, e), n
        }(cr),
        ea = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this,
              a = n.options[n.selectedIndex || 0];
            return r.value = a && a.text || "", r
          }
          return t(n, e), n
        }(cr),
        ta = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.value = n.value, r
          }
          return t(n, e), n
        }(cr),
        na = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            r.src = n.src, r.width = parseInt(n.width, 10) || 0, r.height = parseInt(n
              .height, 10) || 0, r.backgroundColor = r.styles.backgroundColor;
            try {
              if (n.contentWindow && n.contentWindow.document && n.contentWindow
                .document.documentElement) {
                r.tree = Aa(t, n.contentWindow.document.documentElement);
                var a = n.contentWindow.document.documentElement ? ft(t,
                    getComputedStyle(n.contentWindow.document.documentElement)
                    .backgroundColor) : gt.TRANSPARENT,
                  i = n.contentWindow.document.body ? ft(t, getComputedStyle(n
                    .contentWindow.document.body).backgroundColor) : gt.TRANSPARENT;
                r.backgroundColor = At(a) ? At(i) ? r.styles.backgroundColor : i : a
              }
            } catch (e) {}
            return r
          }
          return t(n, e), n
        }(cr),
        ra = ["OL", "UL", "MENU"],
        aa = function (e, t, n, r) {
          for (var a = t.firstChild, i = void 0; a; a = i)
            if (i = a.nextSibling, ua(a) && a.data.trim().length > 0) n.textNodes.push(
              new zr(e, a, n.styles));
            else if (la(a))
            if (xa(a) && a.assignedNodes) a.assignedNodes().forEach((function (t) {
              return aa(e, t, n, r)
            }));
            else {
              var A = ia(e, a);
              A.styles.isVisible() && (oa(a, A, r) ? A.flags |= 4 : sa(A.styles) && (A
                  .flags |= 2), -1 !== ra.indexOf(a.tagName) && (A.flags |= 8), n
                .elements.push(A), a.slot, a.shadowRoot ? aa(e, a.shadowRoot, A, r) :
                Ca(a) || ga(a) || Ia(a) || aa(e, a, A, r))
            }
        },
        ia = function (e, t) {
          return wa(t) ? new Wr(e, t) : va(t) ? new Kr(e, t) : ga(t) ? new Gr(e, t) :
            ha(t) ? new Vr(e, t) : pa(t) ? new Zr(e, t) : fa(t) ? new $r(e, t) : Ia(t) ?
            new ea(e, t) : Ca(t) ? new ta(e, t) : Ba(t) ? new na(e, t) : new cr(e, t)
        },
        Aa = function (e, t) {
          var n = ia(e, t);
          return n.flags |= 4, aa(e, t, n, n), n
        },
        oa = function (e, t, n) {
          return t.styles.isPositionedWithZIndex() || t.styles.opacity < 1 || t.styles
            .isTransformed() || ya(e) && n.styles.isTransparent()
        },
        sa = function (e) {
          return e.isPositioned() || e.isFloating()
        },
        ua = function (e) {
          return e.nodeType === Node.TEXT_NODE
        },
        la = function (e) {
          return e.nodeType === Node.ELEMENT_NODE
        },
        ca = function (e) {
          return la(e) && void 0 !== e.style && !da(e)
        },
        da = function (e) {
          return "object" == typeof e.className
        },
        ha = function (e) {
          return "LI" === e.tagName
        },
        pa = function (e) {
          return "OL" === e.tagName
        },
        fa = function (e) {
          return "INPUT" === e.tagName
        },
        ga = function (e) {
          return "svg" === e.tagName
        },
        ya = function (e) {
          return "BODY" === e.tagName
        },
        va = function (e) {
          return "CANVAS" === e.tagName
        },
        ma = function (e) {
          return "VIDEO" === e.tagName
        },
        wa = function (e) {
          return "IMG" === e.tagName
        },
        Ba = function (e) {
          return "IFRAME" === e.tagName
        },
        Ma = function (e) {
          return "STYLE" === e.tagName
        },
        Ca = function (e) {
          return "TEXTAREA" === e.tagName
        },
        Ia = function (e) {
          return "SELECT" === e.tagName
        },
        xa = function (e) {
          return "SLOT" === e.tagName
        },
        ba = function (e) {
          return e.tagName.indexOf("-") > 0
        },
        ka = function () {
          function e() {
            this.counters = {}
          }
          return e.prototype.getCounterValue = function (e) {
            var t = this.counters[e];
            return t && t.length ? t[t.length - 1] : 1
          }, e.prototype.getCounterValues = function (e) {
            var t = this.counters[e];
            return t || []
          }, e.prototype.pop = function (e) {
            var t = this;
            e.forEach((function (e) {
              return t.counters[e].pop()
            }))
          }, e.prototype.parse = function (e) {
            var t = this,
              n = e.counterIncrement,
              r = e.counterReset,
              a = !0;
            null !== n && n.forEach((function (e) {
              var n = t.counters[e.counter];
              n && 0 !== e.increment && (a = !1, n.length || n.push(1), n[Math
                .max(0, n.length - 1)] += e.increment)
            }));
            var i = [];
            return a && r.forEach((function (e) {
              var n = t.counters[e.counter];
              i.push(e.counter), n || (n = t.counters[e.counter] = []), n.push(e
                .reset)
            })), i
          }, e
        }(),
        Ta = {
          integers: [1e3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
          values: ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV",
            "I"]
        },
        Ea = {
          integers: [9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 900, 800, 700, 600,
            500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6,
            5, 4, 3, 2, 1
          ],
          values: ["Ք", "Փ", "Ւ", "Ց", "Ր", "Տ", "Վ", "Ս", "Ռ", "Ջ", "Պ", "Չ", "Ո", "Շ",
            "Ն", "Յ", "Մ", "Ճ", "Ղ", "Ձ", "Հ", "Կ", "Ծ", "Խ", "Լ", "Ի", "Ժ", "Թ", "Ը",
            "Է", "Զ", "Ե", "Դ", "Գ", "Բ", "Ա"
          ]
        },
        Da = {
          integers: [1e4, 9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 400, 300, 200,
            100, 90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7, 6,
            5, 4, 3, 2, 1
          ],
          values: ["י׳", "ט׳", "ח׳", "ז׳", "ו׳", "ה׳", "ד׳", "ג׳", "ב׳", "א׳", "ת", "ש",
            "ר", "ק", "צ", "פ", "ע", "ס", "נ", "מ", "ל", "כ", "יט", "יח", "יז", "טז",
            "טו", "י", "ט", "ח", "ז", "ו", "ה", "ד", "ג", "ב", "א"
          ]
        },
        Na = {
          integers: [1e4, 9e3, 8e3, 7e3, 6e3, 5e3, 4e3, 3e3, 2e3, 1e3, 900, 800, 700,
            600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7,
            6, 5, 4, 3, 2, 1
          ],
          values: ["ჵ", "ჰ", "ჯ", "ჴ", "ხ", "ჭ", "წ", "ძ", "ც", "ჩ", "შ", "ყ", "ღ", "ქ",
            "ფ", "ჳ", "ტ", "ს", "რ", "ჟ", "პ", "ო", "ჲ", "ნ", "მ", "ლ", "კ", "ი", "თ",
            "ჱ", "ზ", "ვ", "ე", "დ", "გ", "ბ", "ა"
          ]
        },
        Pa = function (e, t, n, r, a, i) {
          return e < t || e > n ? Ua(e, a, i.length > 0) : r.integers.reduce((function (
            t, n, a) {
            for (; e >= n;) e -= n, t += r.values[a];
            return t
          }), "") + i
        },
        Qa = function (e, t, n, r) {
          var a = "";
          do {
            n || e--, a = r(e) + a, e /= t
          } while (e * t >= t);
          return a
        },
        Oa = function (e, t, n, r, a) {
          var i = n - t + 1;
          return (e < 0 ? "-" : "") + (Qa(Math.abs(e), i, r, (function (e) {
            return u(Math.floor(e % i) + t)
          })) + a)
        },
        _a = function (e, t, n) {
          void 0 === n && (n = ". ");
          var r = t.length;
          return Qa(Math.abs(e), r, !1, (function (e) {
            return t[Math.floor(e % r)]
          })) + n
        },
        Sa = function (e, t, n, r, a, i) {
          if (e < -9999 || e > 9999) return Ua(e, 4, a.length > 0);
          var A = Math.abs(e),
            o = a;
          if (0 === A) return t[0] + o;
          for (var s = 0; A > 0 && s <= 4; s++) {
            var u = A % 10;
            0 === u && Zn(i, 1) && "" !== o ? o = t[u] + o : u > 1 || 1 === u && 0 ===
              s || 1 === u && 1 === s && Zn(i, 2) || 1 === u && 1 === s && Zn(i, 4) &&
              e > 100 || 1 === u && s > 1 && Zn(i, 8) ? o = t[u] + (s > 0 ? n[s - 1] :
                "") + o : 1 === u && s > 0 && (o = n[s - 1] + o), A = Math.floor(A / 10)
          }
          return (e < 0 ? r : "") + o
        },
        Ua = function (e, t, n) {
          var r = n ? ". " : "",
            a = n ? "、" : "",
            i = n ? ", " : "",
            A = n ? " " : "";
          switch (t) {
            case 0:
              return "•" + A;
            case 1:
              return "◦" + A;
            case 2:
              return "◾" + A;
            case 5:
              var o = Oa(e, 48, 57, !0, r);
              return o.length < 4 ? "0" + o : o;
            case 4:
              return _a(e, "〇一二三四五六七八九", a);
            case 6:
              return Pa(e, 1, 3999, Ta, 3, r).toLowerCase();
            case 7:
              return Pa(e, 1, 3999, Ta, 3, r);
            case 8:
              return Oa(e, 945, 969, !1, r);
            case 9:
              return Oa(e, 97, 122, !1, r);
            case 10:
              return Oa(e, 65, 90, !1, r);
            case 11:
              return Oa(e, 1632, 1641, !0, r);
            case 12:
            case 49:
              return Pa(e, 1, 9999, Ea, 3, r);
            case 35:
              return Pa(e, 1, 9999, Ea, 3, r).toLowerCase();
            case 13:
              return Oa(e, 2534, 2543, !0, r);
            case 14:
            case 30:
              return Oa(e, 6112, 6121, !0, r);
            case 15:
              return _a(e, "子丑寅卯辰巳午未申酉戌亥", a);
            case 16:
              return _a(e, "甲乙丙丁戊己庚辛壬癸", a);
            case 17:
            case 48:
              return Sa(e, "零一二三四五六七八九", "十百千萬", "負", a, 14);
            case 47:
              return Sa(e, "零壹貳參肆伍陸柒捌玖", "拾佰仟萬", "負", a, 15);
            case 42:
              return Sa(e, "零一二三四五六七八九", "十百千萬", "负", a, 14);
            case 41:
              return Sa(e, "零壹贰叁肆伍陆柒捌玖", "拾佰仟萬", "负", a, 15);
            case 26:
              return Sa(e, "〇一二三四五六七八九", "十百千万", "マイナス", a, 0);
            case 25:
              return Sa(e, "零壱弐参四伍六七八九", "拾百千万", "マイナス", a, 7);
            case 31:
              return Sa(e, "영일이삼사오육칠팔구", "십백천만", "마이너스", i, 7);
            case 33:
              return Sa(e, "零一二三四五六七八九", "十百千萬", "마이너스", i, 0);
            case 32:
              return Sa(e, "零壹貳參四五六七八九", "拾百千", "마이너스", i, 7);
            case 18:
              return Oa(e, 2406, 2415, !0, r);
            case 20:
              return Pa(e, 1, 19999, Na, 3, r);
            case 21:
              return Oa(e, 2790, 2799, !0, r);
            case 22:
              return Oa(e, 2662, 2671, !0, r);
            case 22:
              return Pa(e, 1, 10999, Da, 3, r);
            case 23:
              return _a(e, "あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");
            case 24:
              return _a(e, "いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");
            case 27:
              return Oa(e, 3302, 3311, !0, r);
            case 28:
              return _a(e, "アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン", a);
            case 29:
              return _a(e, "イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス", a);
            case 34:
              return Oa(e, 3792, 3801, !0, r);
            case 37:
              return Oa(e, 6160, 6169, !0, r);
            case 38:
              return Oa(e, 4160, 4169, !0, r);
            case 39:
              return Oa(e, 2918, 2927, !0, r);
            case 40:
              return Oa(e, 1776, 1785, !0, r);
            case 43:
              return Oa(e, 3046, 3055, !0, r);
            case 44:
              return Oa(e, 3174, 3183, !0, r);
            case 45:
              return Oa(e, 3664, 3673, !0, r);
            case 46:
              return Oa(e, 3872, 3881, !0, r);
            case 3:
            default:
              return Oa(e, 48, 57, !0, r)
          }
        },
        Fa = function () {
          function e(e, t, n) {
            if (this.context = e, this.options = n, this.scrolledElements = [], this
              .referenceElement = t, this.counters = new ka, this.quoteDepth = 0, !t
              .ownerDocument) throw new Error(
              "Cloned element does not have an owner document");
            this.documentElement = this.cloneNode(t.ownerDocument.documentElement, !1)
          }
          return e.prototype.toIFrame = function (e, t) {
            var n = this,
              i = ja(e, t);
            if (!i.contentWindow) return Promise.reject(
              "Unable to find iframe window");
            var A = e.defaultView.pageXOffset,
              o = e.defaultView.pageYOffset,
              s = i.contentWindow,
              u = s.document,
              l = Ha(i).then((function () {
                return r(n, void 0, void 0, (function () {
                  var e, n;
                  return a(this, (function (r) {
                    switch (r.label) {
                      case 0:
                        return this.scrolledElements.forEach(Va), s &&
                          (s.scrollTo(t.left, t.top), !
                            /(iPad|iPhone|iPod)/g.test(navigator
                              .userAgent) || s.scrollY === t.top && s
                            .scrollX === t.left || (this.context
                              .logger.warn(
                                "Unable to restore scroll position for cloned document"
                                ), this.context.windowBounds = this
                              .context.windowBounds.add(s.scrollX - t
                                .left, s.scrollY - t.top, 0, 0))), e =
                          this.options.onclone, void 0 === (n = this
                            .clonedReferenceElement) ? [2, Promise
                            .reject("Error finding the " + this
                              .referenceElement.nodeName +
                              " in the cloned document")
                          ] : u.fonts && u.fonts.ready ? [4, u.fonts
                            .ready
                          ] : [3, 2];
                      case 1:
                        r.sent(), r.label = 2;
                      case 2:
                        return /(AppleWebKit)/g.test(navigator
                          .userAgent) ? [4, Ra(u)] : [3, 4];
                      case 3:
                        r.sent(), r.label = 4;
                      case 4:
                        return "function" == typeof e ? [2, Promise
                          .resolve().then((function () {
                            return e(u, n)
                          })).then((function () {
                            return i
                          }))
                        ] : [2, i]
                    }
                  }))
                }))
              }));
            return u.open(), u.write(Ka(document.doctype) + "<html></html>"), Ga(this
              .referenceElement.ownerDocument, A, o), u.replaceChild(u.adoptNode(
              this.documentElement), u.documentElement), u.close(), l
          }, e.prototype.createElementClone = function (e) {
            if (lr(e, 2), va(e)) return this.createCanvasClone(e);
            if (ma(e)) return this.createVideoClone(e);
            if (Ma(e)) return this.createStyleClone(e);
            var t = e.cloneNode(!1);
            return wa(t) && (wa(e) && e.currentSrc && e.currentSrc !== e.src && (t
              .src = e.currentSrc, t.srcset = ""), "lazy" === t.loading && (t
              .loading = "eager")), ba(t) ? this.createCustomElementClone(t) : t
          }, e.prototype.createCustomElementClone = function (e) {
            var t = document.createElement("html2canvascustomelement");
            return Wa(e.style, t), t
          }, e.prototype.createStyleClone = function (e) {
            try {
              var t = e.sheet;
              if (t && t.cssRules) {
                var n = [].slice.call(t.cssRules, 0).reduce((function (e, t) {
                    return t && "string" == typeof t.cssText ? e + t.cssText : e
                  }), ""),
                  r = e.cloneNode(!1);
                return r.textContent = n, r
              }
            } catch (e) {
              if (this.context.logger.error("Unable to access cssRules property", e),
                "SecurityError" !== e.name) throw e
            }
            return e.cloneNode(!1)
          }, e.prototype.createCanvasClone = function (e) {
            var t;
            if (this.options.inlineImages && e.ownerDocument) {
              var n = e.ownerDocument.createElement("img");
              try {
                return n.src = e.toDataURL(), n
              } catch (t) {
                this.context.logger.info(
                  "Unable to inline canvas contents, canvas is tainted", e)
              }
            }
            var r = e.cloneNode(!1);
            try {
              r.width = e.width, r.height = e.height;
              var a = e.getContext("2d"),
                i = r.getContext("2d");
              if (i)
                if (!this.options.allowTaint && a) i.putImageData(a.getImageData(0, 0,
                  e.width, e.height), 0, 0);
                else {
                  var A = null !== (t = e.getContext("webgl2")) && void 0 !== t ? t :
                    e.getContext("webgl");
                  if (A) {
                    var o = A.getContextAttributes();
                    !1 === (null == o ? void 0 : o.preserveDrawingBuffer) && this
                      .context.logger.warn(
                        "Unable to clone WebGL context as it has preserveDrawingBuffer=false",
                        e)
                  }
                  i.drawImage(e, 0, 0)
                } return r
            } catch (t) {
              this.context.logger.info("Unable to clone canvas as it is tainted", e)
            }
            return r
          }, e.prototype.createVideoClone = function (e) {
            var t = e.ownerDocument.createElement("canvas");
            t.width = e.offsetWidth, t.height = e.offsetHeight;
            var n = t.getContext("2d");
            try {
              return n && (n.drawImage(e, 0, 0, t.width, t.height), this.options
                .allowTaint || n.getImageData(0, 0, t.width, t.height)), t
            } catch (t) {
              this.context.logger.info("Unable to clone video as it is tainted", e)
            }
            var r = e.ownerDocument.createElement("canvas");
            return r.width = e.offsetWidth, r.height = e.offsetHeight, r
          }, e.prototype.appendChildNode = function (e, t, n) {
            la(t) && ("SCRIPT" === t.tagName || t.hasAttribute(
                  "data-html2canvas-ignore") || "function" == typeof this.options
                .ignoreElements && this.options.ignoreElements(t)) || this.options
              .copyStyles && la(t) && Ma(t) || e.appendChild(this.cloneNode(t, n))
          }, e.prototype.cloneChildNodes = function (e, t, n) {
            for (var r = this, a = e.shadowRoot ? e.shadowRoot.firstChild : e
                .firstChild; a; a = a.nextSibling)
              if (la(a) && xa(a) && "function" == typeof a.assignedNodes) {
                var i = a.assignedNodes();
                i.length && i.forEach((function (e) {
                  return r.appendChildNode(t, e, n)
                }))
              } else this.appendChildNode(t, a, n)
          }, e.prototype.cloneNode = function (e, t) {
            if (ua(e)) return document.createTextNode(e.data);
            if (!e.ownerDocument) return e.cloneNode(!1);
            var n = e.ownerDocument.defaultView;
            if (n && la(e) && (ca(e) || da(e))) {
              var r = this.createElementClone(e);
              r.style.transitionProperty = "none";
              var a = n.getComputedStyle(e),
                i = n.getComputedStyle(e, ":before"),
                A = n.getComputedStyle(e, ":after");
              this.referenceElement === e && ca(r) && (this.clonedReferenceElement =
                r), ya(r) && Ja(r);
              var o = this.counters.parse(new sr(this.context, a)),
                s = this.resolvePseudoContent(e, r, i, wr.BEFORE);
              ba(e) && (t = !0), ma(e) || this.cloneChildNodes(e, r, t), s && r
                .insertBefore(s, r.firstChild);
              var u = this.resolvePseudoContent(e, r, A, wr.AFTER);
              return u && r.appendChild(u), this.counters.pop(o), (a && (this.options
                  .copyStyles || da(e)) && !Ba(e) || t) && Wa(a, r), 0 === e
                .scrollTop && 0 === e.scrollLeft || this.scrolledElements.push([r, e
                  .scrollLeft, e.scrollTop
                ]), (Ca(e) || Ia(e)) && (Ca(r) || Ia(r)) && (r.value = e.value), r
            }
            return e.cloneNode(!1)
          }, e.prototype.resolvePseudoContent = function (e, t, n, r) {
            var a = this;
            if (n) {
              var i = n.content,
                A = t.ownerDocument;
              if (A && i && "none" !== i && "-moz-alt-content" !== i && "none" !== n
                .display) {
                this.counters.parse(new sr(this.context, n));
                var o = new or(this.context, n),
                  s = A.createElement("html2canvaspseudoelement");
                Wa(n, s), o.content.forEach((function (t) {
                  if (0 === t.type) s.appendChild(A.createTextNode(t.value));
                  else if (22 === t.type) {
                    var n = A.createElement("img");
                    n.src = t.value, n.style.opacity = "1", s.appendChild(n)
                  } else if (18 === t.type) {
                    if ("attr" === t.name) {
                      var r = t.values.filter(je);
                      r.length && s.appendChild(A.createTextNode(e.getAttribute(
                        r[0].value) || ""))
                    } else if ("counter" === t.name) {
                      var i = t.values.filter(Ye),
                        u = i[0],
                        l = i[1];
                      if (u && je(u)) {
                        var c = a.counters.getCounterValue(u.value),
                          d = l && je(l) ? fn.parse(a.context, l.value) : 3;
                        s.appendChild(A.createTextNode(Ua(c, d, !1)))
                      }
                    } else if ("counters" === t.name) {
                      var h = t.values.filter(Ye),
                        p = (u = h[0], h[1]);
                      if (l = h[2], u && je(u)) {
                        var f = a.counters.getCounterValues(u.value),
                          g = l && je(l) ? fn.parse(a.context, l.value) : 3,
                          y = p && 0 === p.type ? p.value : "",
                          v = f.map((function (e) {
                            return Ua(e, g, !1)
                          })).join(y);
                        s.appendChild(A.createTextNode(v))
                      }
                    }
                  } else if (20 === t.type) switch (t.value) {
                    case "open-quote":
                      s.appendChild(A.createTextNode(tr(o.quotes, a
                        .quoteDepth++, !0)));
                      break;
                    case "close-quote":
                      s.appendChild(A.createTextNode(tr(o.quotes, --a
                        .quoteDepth, !1)));
                      break;
                    default:
                      s.appendChild(A.createTextNode(t.value))
                  }
                })), s.className = Za + " " + Xa;
                var u = r === wr.BEFORE ? " " + Za : " " + Xa;
                return da(t) ? t.className.baseValue += u : t.className += u, s
              }
            }
          }, e.destroy = function (e) {
            return !!e.parentNode && (e.parentNode.removeChild(e), !0)
          }, e
        }();
      ! function (e) {
        e[e.BEFORE = 0] = "BEFORE", e[e.AFTER = 1] = "AFTER"
      }(wr || (wr = {}));
      var La, ja = function (e, t) {
          var n = e.createElement("iframe");
          return n.className = "html2canvas-container", n.style.visibility = "hidden", n
            .style.position = "fixed", n.style.left = "-10000px", n.style.top = "0px", n
            .style.border = "0", n.width = t.width.toString(), n.height = t.height
            .toString(), n.scrolling = "no", n.setAttribute("data-html2canvas-ignore",
              "true"), e.body.appendChild(n), n
        },
        za = function (e) {
          return new Promise((function (t) {
            e.complete ? t() : e.src ? (e.onload = t, e.onerror = t) : t()
          }))
        },
        Ra = function (e) {
          return Promise.all([].slice.call(e.images, 0).map(za))
        },
        Ha = function (e) {
          return new Promise((function (t, n) {
            var r = e.contentWindow;
            if (!r) return n("No window assigned for iframe");
            var a = r.document;
            r.onload = e.onload = function () {
              r.onload = e.onload = null;
              var n = setInterval((function () {
                a.body.childNodes.length > 0 && "complete" === a
                  .readyState && (clearInterval(n), t(e))
              }), 50)
            }
          }))
        },
        Ya = ["all", "d", "content"],
        Wa = function (e, t) {
          for (var n = e.length - 1; n >= 0; n--) {
            var r = e.item(n); - 1 === Ya.indexOf(r) && t.style.setProperty(r, e
              .getPropertyValue(r))
          }
          return t
        },
        Ka = function (e) {
          var t = "";
          return e && (t += "<!DOCTYPE ", e.name && (t += e.name), e.internalSubset && (
              t += e.internalSubset), e.publicId && (t += '"' + e.publicId + '"'), e
            .systemId && (t += '"' + e.systemId + '"'), t += ">"), t
        },
        Ga = function (e, t, n) {
          e && e.defaultView && (t !== e.defaultView.pageXOffset || n !== e.defaultView
            .pageYOffset) && e.defaultView.scrollTo(t, n)
        },
        Va = function (e) {
          var t = e[0],
            n = e[1],
            r = e[2];
          t.scrollLeft = n, t.scrollTop = r
        },
        Za = "___html2canvas___pseudoelement_before",
        Xa = "___html2canvas___pseudoelement_after",
        Ja = function (e) {
          qa(e, "." + Za +
            ':before{\n    content: "" !important;\n    display: none !important;\n}\n         .' +
            Xa +
            ':after{\n    content: "" !important;\n    display: none !important;\n}')
        },
        qa = function (e, t) {
          var n = e.ownerDocument;
          if (n) {
            var r = n.createElement("style");
            r.textContent = t, e.appendChild(r)
          }
        },
        $a = function () {
          function e() {}
          return e.getOrigin = function (t) {
            var n = e._link;
            return n ? (n.href = t, n.href = n.href, n.protocol + n.hostname + n
              .port) : "about:blank"
          }, e.isSameOrigin = function (t) {
            return e.getOrigin(t) === e._origin
          }, e.setContext = function (t) {
            e._link = t.document.createElement("a"), e._origin = e.getOrigin(t
              .location.href)
          }, e._origin = "about:blank", e
        }(),
        ei = function () {
          function e(e, t) {
            this.context = e, this._options = t, this._cache = {}
          }
          return e.prototype.addImage = function (e) {
            var t = Promise.resolve();
            return this.has(e) ? t : oi(e) || ai(e) ? ((this._cache[e] = this
              .loadImage(e)).catch((function () {})), t) : t
          }, e.prototype.match = function (e) {
            return this._cache[e]
          }, e.prototype.loadImage = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, n, r, i, A = this;
              return a(this, (function (a) {
                switch (a.label) {
                  case 0:
                    return t = $a.isSameOrigin(e), n = !ii(e) && !0 ===
                      this._options.useCORS && Qr.SUPPORT_CORS_IMAGES && !
                      t, r = !ii(e) && !t && !oi(e) && "string" ==
                      typeof this._options.proxy && Qr.SUPPORT_CORS_XHR &&
                      !n, t || !1 !== this._options.allowTaint || ii(e) ||
                      oi(e) || r || n ? (i = e, r ? [4, this.proxy(i)] : [
                        3, 2
                      ]) : [2];
                  case 1:
                    i = a.sent(), a.label = 2;
                  case 2:
                    return this.context.logger.debug("Added image " + e
                      .substring(0, 256)), [4, new Promise((function (e,
                      t) {
                      var r = new Image;
                      r.onload = function () {
                          return e(r)
                        }, r.onerror = t, (Ai(i) || n) && (r
                          .crossOrigin = "anonymous"), r.src = i,
                        !0 === r.complete && setTimeout((
                          function () {
                            return e(r)
                          }), 500), A._options.imageTimeout > 0 &&
                        setTimeout((function () {
                          return t("Timed out (" + A._options
                            .imageTimeout +
                            "ms) loading image")
                        }), A._options.imageTimeout)
                    }))];
                  case 3:
                    return [2, a.sent()]
                }
              }))
            }))
          }, e.prototype.has = function (e) {
            return void 0 !== this._cache[e]
          }, e.prototype.keys = function () {
            return Promise.resolve(Object.keys(this._cache))
          }, e.prototype.proxy = function (e) {
            var t = this,
              n = this._options.proxy;
            if (!n) throw new Error("No proxy defined");
            var r = e.substring(0, 256);
            return new Promise((function (a, i) {
              var A = Qr.SUPPORT_RESPONSE_TYPE ? "blob" : "text",
                o = new XMLHttpRequest;
              o.onload = function () {
                if (200 === o.status)
                  if ("text" === A) a(o.response);
                  else {
                    var e = new FileReader;
                    e.addEventListener("load", (function () {
                      return a(e.result)
                    }), !1), e.addEventListener("error", (function (e) {
                      return i(e)
                    }), !1), e.readAsDataURL(o.response)
                  }
                else i("Failed to proxy resource " + r +
                  " with status code " + o.status)
              }, o.onerror = i;
              var s = n.indexOf("?") > -1 ? "&" : "?";
              if (o.open("GET", "" + n + s + "url=" + encodeURIComponent(e) +
                  "&responseType=" + A), "text" !== A &&
                o instanceof XMLHttpRequest && (o.responseType = A), t._options
                .imageTimeout) {
                var u = t._options.imageTimeout;
                o.timeout = u, o.ontimeout = function () {
                  return i("Timed out (" + u + "ms) proxying " + r)
                }
              }
              o.send()
            }))
          }, e
        }(),
        ti = /^data:image\/svg\+xml/i,
        ni = /^data:image\/.*;base64,/i,
        ri = /^data:image\/.*/i,
        ai = function (e) {
          return Qr.SUPPORT_SVG_DRAWING || !si(e)
        },
        ii = function (e) {
          return ri.test(e)
        },
        Ai = function (e) {
          return ni.test(e)
        },
        oi = function (e) {
          return "blob" === e.substr(0, 4)
        },
        si = function (e) {
          return "svg" === e.substr(-3).toLowerCase() || ti.test(e)
        },
        ui = function () {
          function e(e, t) {
            this.type = 0, this.x = e, this.y = t
          }
          return e.prototype.add = function (t, n) {
            return new e(this.x + t, this.y + n)
          }, e
        }(),
        li = function (e, t, n) {
          return new ui(e.x + (t.x - e.x) * n, e.y + (t.y - e.y) * n)
        },
        ci = function () {
          function e(e, t, n, r) {
            this.type = 1, this.start = e, this.startControl = t, this.endControl = n,
              this.end = r
          }
          return e.prototype.subdivide = function (t, n) {
            var r = li(this.start, this.startControl, t),
              a = li(this.startControl, this.endControl, t),
              i = li(this.endControl, this.end, t),
              A = li(r, a, t),
              o = li(a, i, t),
              s = li(A, o, t);
            return n ? new e(this.start, r, A, s) : new e(s, o, i, this.end)
          }, e.prototype.add = function (t, n) {
            return new e(this.start.add(t, n), this.startControl.add(t, n), this
              .endControl.add(t, n), this.end.add(t, n))
          }, e.prototype.reverse = function () {
            return new e(this.end, this.endControl, this.startControl, this.start)
          }, e
        }(),
        di = function (e) {
          return 1 === e.type
        },
        hi = function (e) {
          var t = e.styles,
            n = e.bounds,
            r = $e(t.borderTopLeftRadius, n.width, n.height),
            a = r[0],
            i = r[1],
            A = $e(t.borderTopRightRadius, n.width, n.height),
            o = A[0],
            s = A[1],
            u = $e(t.borderBottomRightRadius, n.width, n.height),
            l = u[0],
            c = u[1],
            d = $e(t.borderBottomLeftRadius, n.width, n.height),
            h = d[0],
            p = d[1],
            f = [];
          f.push((a + o) / n.width), f.push((h + l) / n.width), f.push((i + p) / n
            .height), f.push((s + c) / n.height);
          var g = Math.max.apply(Math, f);
          g > 1 && (a /= g, i /= g, o /= g, s /= g, l /= g, c /= g, h /= g, p /= g);
          var y = n.width - o,
            v = n.height - c,
            m = n.width - l,
            w = n.height - p,
            B = t.borderTopWidth,
            M = t.borderRightWidth,
            C = t.borderBottomWidth,
            I = t.borderLeftWidth,
            x = et(t.paddingTop, e.bounds.width),
            b = et(t.paddingRight, e.bounds.width),
            k = et(t.paddingBottom, e.bounds.width),
            T = et(t.paddingLeft, e.bounds.width);
          this.topLeftBorderDoubleOuterBox = a > 0 || i > 0 ? pi(n.left + I / 3, n.top +
              B / 3, a - I / 3, i - B / 3, La.TOP_LEFT) : new ui(n.left + I / 3, n.top +
              B / 3), this.topRightBorderDoubleOuterBox = a > 0 || i > 0 ? pi(n.left +
              y, n.top + B / 3, o - M / 3, s - B / 3, La.TOP_RIGHT) : new ui(n.left + n
              .width - M / 3, n.top + B / 3), this.bottomRightBorderDoubleOuterBox = l >
            0 || c > 0 ? pi(n.left + m, n.top + v, l - M / 3, c - C / 3, La
              .BOTTOM_RIGHT) : new ui(n.left + n.width - M / 3, n.top + n.height - C /
              3), this.bottomLeftBorderDoubleOuterBox = h > 0 || p > 0 ? pi(n.left + I /
              3, n.top + w, h - I / 3, p - C / 3, La.BOTTOM_LEFT) : new ui(n.left + I /
              3, n.top + n.height - C / 3), this.topLeftBorderDoubleInnerBox = a > 0 ||
            i > 0 ? pi(n.left + 2 * I / 3, n.top + 2 * B / 3, a - 2 * I / 3, i - 2 * B /
              3, La.TOP_LEFT) : new ui(n.left + 2 * I / 3, n.top + 2 * B / 3), this
            .topRightBorderDoubleInnerBox = a > 0 || i > 0 ? pi(n.left + y, n.top + 2 *
              B / 3, o - 2 * M / 3, s - 2 * B / 3, La.TOP_RIGHT) : new ui(n.left + n
              .width - 2 * M / 3, n.top + 2 * B / 3), this
            .bottomRightBorderDoubleInnerBox = l > 0 || c > 0 ? pi(n.left + m, n.top +
              v, l - 2 * M / 3, c - 2 * C / 3, La.BOTTOM_RIGHT) : new ui(n.left + n
              .width - 2 * M / 3, n.top + n.height - 2 * C / 3), this
            .bottomLeftBorderDoubleInnerBox = h > 0 || p > 0 ? pi(n.left + 2 * I / 3, n
              .top + w, h - 2 * I / 3, p - 2 * C / 3, La.BOTTOM_LEFT) : new ui(n.left +
              2 * I / 3, n.top + n.height - 2 * C / 3), this.topLeftBorderStroke = a >
            0 || i > 0 ? pi(n.left + I / 2, n.top + B / 2, a - I / 2, i - B / 2, La
              .TOP_LEFT) : new ui(n.left + I / 2, n.top + B / 2), this
            .topRightBorderStroke = a > 0 || i > 0 ? pi(n.left + y, n.top + B / 2, o -
              M / 2, s - B / 2, La.TOP_RIGHT) : new ui(n.left + n.width - M / 2, n.top +
              B / 2), this.bottomRightBorderStroke = l > 0 || c > 0 ? pi(n.left + m, n
              .top + v, l - M / 2, c - C / 2, La.BOTTOM_RIGHT) : new ui(n.left + n
              .width - M / 2, n.top + n.height - C / 2), this.bottomLeftBorderStroke =
            h > 0 || p > 0 ? pi(n.left + I / 2, n.top + w, h - I / 2, p - C / 2, La
              .BOTTOM_LEFT) : new ui(n.left + I / 2, n.top + n.height - C / 2), this
            .topLeftBorderBox = a > 0 || i > 0 ? pi(n.left, n.top, a, i, La.TOP_LEFT) :
            new ui(n.left, n.top), this.topRightBorderBox = o > 0 || s > 0 ? pi(n.left +
              y, n.top, o, s, La.TOP_RIGHT) : new ui(n.left + n.width, n.top), this
            .bottomRightBorderBox = l > 0 || c > 0 ? pi(n.left + m, n.top + v, l, c, La
              .BOTTOM_RIGHT) : new ui(n.left + n.width, n.top + n.height), this
            .bottomLeftBorderBox = h > 0 || p > 0 ? pi(n.left, n.top + w, h, p, La
              .BOTTOM_LEFT) : new ui(n.left, n.top + n.height), this.topLeftPaddingBox =
            a > 0 || i > 0 ? pi(n.left + I, n.top + B, Math.max(0, a - I), Math.max(0,
              i - B), La.TOP_LEFT) : new ui(n.left + I, n.top + B), this
            .topRightPaddingBox = o > 0 || s > 0 ? pi(n.left + Math.min(y, n.width - M),
              n.top + B, y > n.width + M ? 0 : Math.max(0, o - M), Math.max(0, s - B),
              La.TOP_RIGHT) : new ui(n.left + n.width - M, n.top + B), this
            .bottomRightPaddingBox = l > 0 || c > 0 ? pi(n.left + Math.min(m, n.width -
              I), n.top + Math.min(v, n.height - C), Math.max(0, l - M), Math.max(0,
              c - C), La.BOTTOM_RIGHT) : new ui(n.left + n.width - M, n.top + n.height -
              C), this.bottomLeftPaddingBox = h > 0 || p > 0 ? pi(n.left + I, n.top +
              Math.min(w, n.height - C), Math.max(0, h - I), Math.max(0, p - C), La
              .BOTTOM_LEFT) : new ui(n.left + I, n.top + n.height - C), this
            .topLeftContentBox = a > 0 || i > 0 ? pi(n.left + I + T, n.top + B + x, Math
              .max(0, a - (I + T)), Math.max(0, i - (B + x)), La.TOP_LEFT) : new ui(n
              .left + I + T, n.top + B + x), this.topRightContentBox = o > 0 || s > 0 ?
            pi(n.left + Math.min(y, n.width + I + T), n.top + B + x, y > n.width + I +
              T ? 0 : o - I + T, s - (B + x), La.TOP_RIGHT) : new ui(n.left + n.width -
              (M + b), n.top + B + x), this.bottomRightContentBox = l > 0 || c > 0 ? pi(
              n.left + Math.min(m, n.width - (I + T)), n.top + Math.min(v, n.height +
                B + x), Math.max(0, l - (M + b)), c - (C + k), La.BOTTOM_RIGHT) :
            new ui(n.left + n.width - (M + b), n.top + n.height - (C + k)), this
            .bottomLeftContentBox = h > 0 || p > 0 ? pi(n.left + I + T, n.top + w, Math
              .max(0, h - (I + T)), p - (C + k), La.BOTTOM_LEFT) : new ui(n.left + I +
              T, n.top + n.height - (C + k))
        };
      ! function (e) {
        e[e.TOP_LEFT = 0] = "TOP_LEFT", e[e.TOP_RIGHT = 1] = "TOP_RIGHT", e[e
          .BOTTOM_RIGHT = 2] = "BOTTOM_RIGHT", e[e.BOTTOM_LEFT = 3] = "BOTTOM_LEFT"
      }(La || (La = {}));
      var pi = function (e, t, n, r, a) {
          var i = (Math.sqrt(2) - 1) / 3 * 4,
            A = n * i,
            o = r * i,
            s = e + n,
            u = t + r;
          switch (a) {
            case La.TOP_LEFT:
              return new ci(new ui(e, u), new ui(e, u - o), new ui(s - A, t), new ui(s,
                t));
            case La.TOP_RIGHT:
              return new ci(new ui(e, t), new ui(e + A, t), new ui(s, u - o), new ui(s,
                u));
            case La.BOTTOM_RIGHT:
              return new ci(new ui(s, t), new ui(s, t + o), new ui(e + A, u), new ui(e,
                u));
            case La.BOTTOM_LEFT:
            default:
              return new ci(new ui(s, u), new ui(s - A, u), new ui(e, t + o), new ui(e,
                t))
          }
        },
        fi = function (e) {
          return [e.topLeftBorderBox, e.topRightBorderBox, e.bottomRightBorderBox, e
            .bottomLeftBorderBox
          ]
        },
        gi = function (e) {
          return [e.topLeftPaddingBox, e.topRightPaddingBox, e.bottomRightPaddingBox, e
            .bottomLeftPaddingBox
          ]
        },
        yi = function (e, t, n) {
          this.offsetX = e, this.offsetY = t, this.matrix = n, this.type = 0, this
            .target = 6
        },
        vi = function (e, t) {
          this.path = e, this.target = t, this.type = 1
        },
        mi = function (e) {
          this.opacity = e, this.type = 2, this.target = 6
        },
        wi = function (e) {
          return 1 === e.type
        },
        Bi = function (e, t) {
          return e.length === t.length && e.some((function (e, n) {
            return e === t[n]
          }))
        },
        Mi = function (e) {
          this.element = e, this.inlineLevel = [], this.nonInlineLevel = [], this
            .negativeZIndex = [], this.zeroOrAutoZIndexOrTransformedOrOpacity = [], this
            .positiveZIndex = [], this.nonPositionedFloats = [], this
            .nonPositionedInlineLevel = []
        },
        Ci = function () {
          function e(e, t) {
            if (this.container = e, this.parent = t, this.effects = [], this.curves =
              new hi(this.container), this.container.styles.opacity < 1 && this.effects
              .push(new mi(this.container.styles.opacity)), null !== this.container
              .styles.transform) {
              var n = this.container.bounds.left + this.container.styles
                .transformOrigin[0].number,
                r = this.container.bounds.top + this.container.styles.transformOrigin[1]
                .number,
                a = this.container.styles.transform;
              this.effects.push(new yi(n, r, a))
            }
            if (0 !== this.container.styles.overflowX) {
              var i = fi(this.curves),
                A = gi(this.curves);
              Bi(i, A) ? this.effects.push(new vi(i, 6)) : (this.effects.push(new vi(i,
                2)), this.effects.push(new vi(A, 4)))
            }
          }
          return e.prototype.getEffects = function (e) {
            for (var t = -1 === [2, 3].indexOf(this.container.styles.position), n =
                this.parent, r = this.effects.slice(0); n;) {
              var a = n.effects.filter((function (e) {
                return !wi(e)
              }));
              if (t || 0 !== n.container.styles.position || !n.parent) {
                if (r.unshift.apply(r, a), t = -1 === [2, 3].indexOf(n.container
                    .styles.position), 0 !== n.container.styles.overflowX) {
                  var i = fi(n.curves),
                    A = gi(n.curves);
                  Bi(i, A) || r.unshift(new vi(A, 6))
                }
              } else r.unshift.apply(r, a);
              n = n.parent
            }
            return r.filter((function (t) {
              return Zn(t.target, e)
            }))
          }, e
        }(),
        Ii = function (e, t, n, r) {
          e.container.elements.forEach((function (a) {
            var i = Zn(a.flags, 4),
              A = Zn(a.flags, 2),
              o = new Ci(a, e);
            Zn(a.styles.display, 2048) && r.push(o);
            var s = Zn(a.flags, 8) ? [] : r;
            if (i || A) {
              var u = i || a.styles.isPositioned() ? n : t,
                l = new Mi(o);
              if (a.styles.isPositioned() || a.styles.opacity < 1 || a.styles
                .isTransformed()) {
                var c = a.styles.zIndex.order;
                if (c < 0) {
                  var d = 0;
                  u.negativeZIndex.some((function (e, t) {
                    return c > e.element.container.styles.zIndex.order ? (
                      d = t, !1) : d > 0
                  })), u.negativeZIndex.splice(d, 0, l)
                } else if (c > 0) {
                  var h = 0;
                  u.positiveZIndex.some((function (e, t) {
                    return c >= e.element.container.styles.zIndex.order ? (
                      h = t + 1, !1) : h > 0
                  })), u.positiveZIndex.splice(h, 0, l)
                } else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)
              } else a.styles.isFloating() ? u.nonPositionedFloats.push(l) : u
                .nonPositionedInlineLevel.push(l);
              Ii(o, l, i ? l : n, s)
            } else a.styles.isInlineLevel() ? t.inlineLevel.push(o) : t
              .nonInlineLevel.push(o), Ii(o, t, n, s);
            Zn(a.flags, 8) && xi(a, s)
          }))
        },
        xi = function (e, t) {
          for (var n = e instanceof Zr ? e.start : 1, r = e instanceof Zr && e.reversed,
              a = 0; a < t.length; a++) {
            var i = t[a];
            i.container instanceof Vr && "number" == typeof i.container.value && 0 !== i
              .container.value && (n = i.container.value), i.listValue = Ua(n, i
                .container.styles.listStyleType, !0), n += r ? -1 : 1
          }
        },
        bi = function (e, t) {
          switch (t) {
            case 0:
              return Ti(e.topLeftBorderBox, e.topLeftPaddingBox, e.topRightBorderBox, e
                .topRightPaddingBox);
            case 1:
              return Ti(e.topRightBorderBox, e.topRightPaddingBox, e
                .bottomRightBorderBox, e.bottomRightPaddingBox);
            case 2:
              return Ti(e.bottomRightBorderBox, e.bottomRightPaddingBox, e
                .bottomLeftBorderBox, e.bottomLeftPaddingBox);
            case 3:
            default:
              return Ti(e.bottomLeftBorderBox, e.bottomLeftPaddingBox, e
                .topLeftBorderBox, e.topLeftPaddingBox)
          }
        },
        ki = function (e, t) {
          var n = [];
          return di(e) ? n.push(e.subdivide(.5, !1)) : n.push(e), di(t) ? n.push(t
            .subdivide(.5, !0)) : n.push(t), n
        },
        Ti = function (e, t, n, r) {
          var a = [];
          return di(e) ? a.push(e.subdivide(.5, !1)) : a.push(e), di(n) ? a.push(n
              .subdivide(.5, !0)) : a.push(n), di(r) ? a.push(r.subdivide(.5, !0)
              .reverse()) : a.push(r), di(t) ? a.push(t.subdivide(.5, !1).reverse()) : a
            .push(t), a
        },
        Ei = function (e) {
          var t = e.bounds,
            n = e.styles;
          return t.add(n.borderLeftWidth, n.borderTopWidth, -(n.borderRightWidth + n
            .borderLeftWidth), -(n.borderTopWidth + n.borderBottomWidth))
        },
        Di = function (e) {
          var t = e.styles,
            n = e.bounds,
            r = et(t.paddingLeft, n.width),
            a = et(t.paddingRight, n.width),
            i = et(t.paddingTop, n.width),
            A = et(t.paddingBottom, n.width);
          return n.add(r + t.borderLeftWidth, i + t.borderTopWidth, -(t
            .borderRightWidth + t.borderLeftWidth + r + a), -(t.borderTopWidth + t
            .borderBottomWidth + i + A))
        },
        Ni = function (e, t, n) {
          var r = function (e, t) {
              return 0 === e ? t.bounds : 2 === e ? Di(t) : Ei(t)
            }(_i(e.styles.backgroundOrigin, t), e),
            a = function (e, t) {
              return 0 === e ? t.bounds : 2 === e ? Di(t) : Ei(t)
            }(_i(e.styles.backgroundClip, t), e),
            i = Oi(_i(e.styles.backgroundSize, t), n, r),
            A = i[0],
            o = i[1],
            s = $e(_i(e.styles.backgroundPosition, t), r.width - A, r.height - o);
          return [Si(_i(e.styles.backgroundRepeat, t), s, i, r, a), Math.round(r.left +
            s[0]), Math.round(r.top + s[1]), A, o]
        },
        Pi = function (e) {
          return je(e) && e.value === dt.AUTO
        },
        Qi = function (e) {
          return "number" == typeof e
        },
        Oi = function (e, t, n) {
          var r = t[0],
            a = t[1],
            i = t[2],
            A = e[0],
            o = e[1];
          if (!A) return [0, 0];
          if (Ve(A) && o && Ve(o)) return [et(A, n.width), et(o, n.height)];
          var s = Qi(i);
          if (je(A) && (A.value === dt.CONTAIN || A.value === dt.COVER)) return Qi(i) ?
            n.width / n.height < i != (A.value === dt.COVER) ? [n.width, n.width /
            i] : [n.height * i, n.height] : [n.width, n.height];
          var u = Qi(r),
            l = Qi(a),
            c = u || l;
          if (Pi(A) && (!o || Pi(o))) return u && l ? [r, a] : s || c ? c && s ? [u ?
            r : a * i, l ? a : r / i
          ] : [u ? r : n.width, l ? a : n.height] : [n.width, n.height];
          if (s) {
            var d = 0,
              h = 0;
            return Ve(A) ? d = et(A, n.width) : Ve(o) && (h = et(o, n.height)), Pi(A) ?
              d = h * i : o && !Pi(o) || (h = d / i), [d, h]
          }
          var p = null,
            f = null;
          if (Ve(A) ? p = et(A, n.width) : o && Ve(o) && (f = et(o, n.height)), null ===
            p || o && !Pi(o) || (f = u && l ? p / r * a : n.height), null !== f && Pi(
            A) && (p = u && l ? f / a * r : n.width), null !== p && null !== f) return [
            p, f
          ];
          throw new Error("Unable to calculate background-size for element")
        },
        _i = function (e, t) {
          var n = e[t];
          return void 0 === n ? e[0] : n
        },
        Si = function (e, t, n, r, a) {
          var i = t[0],
            A = t[1],
            o = n[0],
            s = n[1];
          switch (e) {
            case 2:
              return [new ui(Math.round(r.left), Math.round(r.top + A)), new ui(Math
                .round(r.left + r.width), Math.round(r.top + A)), new ui(Math.round(
                r.left + r.width), Math.round(s + r.top + A)), new ui(Math.round(r
                .left), Math.round(s + r.top + A))];
            case 3:
              return [new ui(Math.round(r.left + i), Math.round(r.top)), new ui(Math
                .round(r.left + i + o), Math.round(r.top)), new ui(Math.round(r
                .left + i + o), Math.round(r.height + r.top)), new ui(Math.round(r
                .left + i), Math.round(r.height + r.top))];
            case 1:
              return [new ui(Math.round(r.left + i), Math.round(r.top + A)), new ui(Math
                .round(r.left + i + o), Math.round(r.top + A)), new ui(Math.round(r
                .left + i + o), Math.round(r.top + A + s)), new ui(Math.round(r
                .left + i), Math.round(r.top + A + s))];
            default:
              return [new ui(Math.round(a.left), Math.round(a.top)), new ui(Math.round(a
                .left + a.width), Math.round(a.top)), new ui(Math.round(a.left + a
                .width), Math.round(a.height + a.top)), new ui(Math.round(a.left),
                Math.round(a.height + a.top))]
          }
        },
        Ui = function () {
          function e(e) {
            this._data = {}, this._document = e
          }
          return e.prototype.parseMetrics = function (e, t) {
            var n = this._document.createElement("div"),
              r = this._document.createElement("img"),
              a = this._document.createElement("span"),
              i = this._document.body;
            n.style.visibility = "hidden", n.style.fontFamily = e, n.style.fontSize =
              t, n.style.margin = "0", n.style.padding = "0", n.style.whiteSpace =
              "nowrap", i.appendChild(n), r.src =
              "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
              r.width = 1, r.height = 1, r.style.margin = "0", r.style.padding = "0",
              r.style.verticalAlign = "baseline", a.style.fontFamily = e, a.style
              .fontSize = t, a.style.margin = "0", a.style.padding = "0", a
              .appendChild(this._document.createTextNode("Hidden Text")), n
              .appendChild(a), n.appendChild(r);
            var A = r.offsetTop - a.offsetTop + 2;
            n.removeChild(a), n.appendChild(this._document.createTextNode(
                "Hidden Text")), n.style.lineHeight = "normal", r.style
              .verticalAlign = "super";
            var o = r.offsetTop - n.offsetTop + 2;
            return i.removeChild(n), {
              baseline: A,
              middle: o
            }
          }, e.prototype.getMetrics = function (e, t) {
            var n = e + " " + t;
            return void 0 === this._data[n] && (this._data[n] = this.parseMetrics(e,
              t)), this._data[n]
          }, e
        }(),
        Fi = function (e, t) {
          this.context = e, this.options = t
        },
        Li = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r._activeEffects = [], r.canvas = n.canvas ? n.canvas : document
              .createElement("canvas"), r.ctx = r.canvas.getContext("2d"), n.canvas || (
                r.canvas.width = Math.floor(n.width * n.scale), r.canvas.height = Math
                .floor(n.height * n.scale), r.canvas.style.width = n.width + "px", r
                .canvas.style.height = n.height + "px"), r.fontMetrics = new Ui(
                document), r.ctx.scale(r.options.scale, r.options.scale), r.ctx
              .translate(-n.x, -n.y), r.ctx.textBaseline = "bottom", r
              ._activeEffects = [], r.context.logger.debug(
                "Canvas renderer initialized (" + n.width + "x" + n.height +
                ") with scale " + n.scale), r
          }
          return t(n, e), n.prototype.applyEffects = function (e) {
            for (var t = this; this._activeEffects.length;) this.popEffect();
            e.forEach((function (e) {
              return t.applyEffect(e)
            }))
          }, n.prototype.applyEffect = function (e) {
            this.ctx.save(),
              function (e) {
                return 2 === e.type
              }(e) && (this.ctx.globalAlpha = e.opacity),
              function (e) {
                return 0 === e.type
              }(e) && (this.ctx.translate(e.offsetX, e.offsetY), this.ctx.transform(e
                .matrix[0], e.matrix[1], e.matrix[2], e.matrix[3], e.matrix[4], e
                .matrix[5]), this.ctx.translate(-e.offsetX, -e.offsetY)), wi(e) && (
                this.path(e.path), this.ctx.clip()), this._activeEffects.push(e)
          }, n.prototype.popEffect = function () {
            this._activeEffects.pop(), this.ctx.restore()
          }, n.prototype.renderStack = function (e) {
            return r(this, void 0, void 0, (function () {
              return a(this, (function (t) {
                switch (t.label) {
                  case 0:
                    return e.element.container.styles.isVisible() ? [4,
                      this.renderStackContent(e)
                    ] : [3, 2];
                  case 1:
                    t.sent(), t.label = 2;
                  case 2:
                    return [2]
                }
              }))
            }))
          }, n.prototype.renderNode = function (e) {
            return r(this, void 0, void 0, (function () {
              return a(this, (function (t) {
                switch (t.label) {
                  case 0:
                    return Zn(e.container.flags, 16), e.container.styles
                      .isVisible() ? [4, this
                        .renderNodeBackgroundAndBorders(e)
                      ] : [3, 3];
                  case 1:
                    return t.sent(), [4, this.renderNodeContent(e)];
                  case 2:
                    t.sent(), t.label = 3;
                  case 3:
                    return [2]
                }
              }))
            }))
          }, n.prototype.renderTextWithLetterSpacing = function (e, t, n) {
            var r = this;
            0 === t ? this.ctx.fillText(e.text, e.bounds.left, e.bounds.top + n) : Ur(
              e.text).reduce((function (t, a) {
              return r.ctx.fillText(a, t, e.bounds.top + n), t + r.ctx
                .measureText(a).width
            }), e.bounds.left)
          }, n.prototype.createFontStyle = function (e) {
            var t = e.fontVariant.filter((function (e) {
                return "normal" === e || "small-caps" === e
              })).join(""),
              n = Yi(e.fontFamily).join(", "),
              r = Fe(e.fontSize) ? "" + e.fontSize.number + e.fontSize.unit : e
              .fontSize.number + "px";
            return [
              [e.fontStyle, t, e.fontWeight, r, n].join(" "), n, r
            ]
          }, n.prototype.renderTextNode = function (e, t) {
            return r(this, void 0, void 0, (function () {
              var n, r, i, A, o, s, u, l, c = this;
              return a(this, (function (a) {
                return n = this.createFontStyle(t), r = n[0], i = n[1],
                  A = n[2], this.ctx.font = r, this.ctx.direction = 1 ===
                  t.direction ? "rtl" : "ltr", this.ctx.textAlign =
                  "left", this.ctx.textBaseline = "alphabetic", o = this
                  .fontMetrics.getMetrics(i, A), s = o.baseline, u = o
                  .middle, l = t.paintOrder, e.textBounds.forEach((
                    function (e) {
                      l.forEach((function (n) {
                        switch (n) {
                          case 0:
                            c.ctx.fillStyle = ot(t.color), c
                              .renderTextWithLetterSpacing(e, t
                                .letterSpacing, s);
                            var r = t.textShadow;
                            r.length && e.text.trim().length && (r
                                .slice(0).reverse().forEach((
                                  function (n) {
                                    c.ctx.shadowColor = ot(n
                                        .color), c.ctx
                                      .shadowOffsetX = n.offsetX
                                      .number * c.options.scale,
                                      c.ctx.shadowOffsetY = n
                                      .offsetY.number * c
                                      .options.scale, c.ctx
                                      .shadowBlur = n.blur
                                      .number, c
                                      .renderTextWithLetterSpacing(
                                        e, t.letterSpacing, s)
                                  })), c.ctx.shadowColor = "", c
                                .ctx.shadowOffsetX = 0, c.ctx
                                .shadowOffsetY = 0, c.ctx
                                .shadowBlur = 0), t
                              .textDecorationLine.length && (c.ctx
                                .fillStyle = ot(t
                                  .textDecorationColor || t.color
                                  ), t.textDecorationLine.forEach(
                                  (function (t) {
                                    switch (t) {
                                      case 1:
                                        c.ctx.fillRect(e.bounds
                                          .left, Math.round(e
                                            .bounds.top + s),
                                          e.bounds.width, 1);
                                        break;
                                      case 2:
                                        c.ctx.fillRect(e.bounds
                                          .left, Math.round(e
                                            .bounds.top), e
                                          .bounds.width, 1);
                                        break;
                                      case 3:
                                        c.ctx.fillRect(e.bounds
                                          .left, Math.ceil(e
                                            .bounds.top + u),
                                          e.bounds.width, 1)
                                    }
                                  })));
                            break;
                          case 1:
                            t.webkitTextStrokeWidth && e.text
                              .trim().length && (c.ctx
                                .strokeStyle = ot(t
                                  .webkitTextStrokeColor), c.ctx
                                .lineWidth = t
                                .webkitTextStrokeWidth, c.ctx
                                .lineJoin = window.chrome ?
                                "miter" : "round", c.ctx
                                .strokeText(e.text, e.bounds.left,
                                  e.bounds.top + s)), c.ctx
                              .strokeStyle = "", c.ctx.lineWidth =
                              0, c.ctx.lineJoin = "miter"
                        }
                      }))
                    })), [2]
              }))
            }))
          }, n.prototype.renderReplacedElement = function (e, t, n) {
            if (n && e.intrinsicWidth > 0 && e.intrinsicHeight > 0) {
              var r = Di(e),
                a = gi(t);
              this.path(a), this.ctx.save(), this.ctx.clip(), this.ctx.drawImage(n, 0,
                0, e.intrinsicWidth, e.intrinsicHeight, r.left, r.top, r.width, r
                .height), this.ctx.restore()
            }
          }, n.prototype.renderNodeContent = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, r, i, o, s, u, l, c, d, h, p, f, g, y, v, m, w, B;
              return a(this, (function (a) {
                switch (a.label) {
                  case 0:
                    this.applyEffects(e.getEffects(4)), t = e.container,
                      r = e.curves, i = t.styles, o = 0, s = t.textNodes,
                      a.label = 1;
                  case 1:
                    return o < s.length ? (u = s[o], [4, this
                      .renderTextNode(u, i)
                    ]) : [3, 4];
                  case 2:
                    a.sent(), a.label = 3;
                  case 3:
                    return o++, [3, 1];
                  case 4:
                    if (!(t instanceof Wr)) return [3, 8];
                    a.label = 5;
                  case 5:
                    return a.trys.push([5, 7, , 8]), [4, this.context
                      .cache.match(t.src)
                    ];
                  case 6:
                    return v = a.sent(), this.renderReplacedElement(t, r,
                      v), [3, 8];
                  case 7:
                    return a.sent(), this.context.logger.error(
                      "Error loading image " + t.src), [3, 8];
                  case 8:
                    if (t instanceof Kr && this.renderReplacedElement(t,
                        r, t.canvas), !(t instanceof Gr)) return [3, 12];
                    a.label = 9;
                  case 9:
                    return a.trys.push([9, 11, , 12]), [4, this.context
                      .cache.match(t.svg)
                    ];
                  case 10:
                    return v = a.sent(), this.renderReplacedElement(t, r,
                      v), [3, 12];
                  case 11:
                    return a.sent(), this.context.logger.error(
                      "Error loading svg " + t.svg.substring(0, 255)), [
                      3, 12
                    ];
                  case 12:
                    return t instanceof na && t.tree ? [4, new n(this
                      .context, {
                        scale: this.options.scale,
                        backgroundColor: t.backgroundColor,
                        x: 0,
                        y: 0,
                        width: t.width,
                        height: t.height
                      }).render(t.tree)] : [3, 14];
                  case 13:
                    l = a.sent(), t.width && t.height && this.ctx
                      .drawImage(l, 0, 0, t.width, t.height, t.bounds
                        .left, t.bounds.top, t.bounds.width, t.bounds
                        .height), a.label = 14;
                  case 14:
                    if (t instanceof $r && (c = Math.min(t.bounds.width, t
                          .bounds.height), "checkbox" === t.type ? t
                        .checked && (this.ctx.save(), this.path([new ui(t
                              .bounds.left + .39363 * c, t.bounds.top +
                              .79 * c), new ui(t.bounds.left + .16 * c,
                              t.bounds.top + .5549 * c), new ui(t.bounds
                              .left + .27347 * c, t.bounds.top +
                              .44071 * c), new ui(t.bounds.left +
                              .39694 * c, t.bounds.top + .5649 * c),
                            new ui(t.bounds.left + .72983 * c, t.bounds
                              .top + .23 * c), new ui(t.bounds.left +
                              .84 * c, t.bounds.top + .34085 * c),
                            new ui(t.bounds.left + .39363 * c, t.bounds
                              .top + .79 * c)
                          ]), this.ctx.fillStyle = ot(707406591), this.ctx
                          .fill(), this.ctx.restore()) : "radio" === t
                        .type && t.checked && (this.ctx.save(), this.ctx
                          .beginPath(), this.ctx.arc(t.bounds.left + c /
                            2, t.bounds.top + c / 2, c / 4, 0, 2 * Math
                            .PI, !0), this.ctx.fillStyle = ot(707406591),
                          this.ctx.fill(), this.ctx.restore())), ji(t) &&
                      t.value.length) {
                      switch (d = this.createFontStyle(i), w = d[0], h =
                        d[1], p = this.fontMetrics.getMetrics(w, h)
                        .baseline, this.ctx.font = w, this.ctx.fillStyle =
                        ot(i.color), this.ctx.textBaseline = "alphabetic",
                        this.ctx.textAlign = Ri(t.styles.textAlign), B =
                        Di(t), f = 0, t.styles.textAlign) {
                        case 1:
                          f += B.width / 2;
                          break;
                        case 2:
                          f += B.width
                      }
                      g = B.add(f, 0, 0, -B.height / 2 + 1), this.ctx
                        .save(), this.path([new ui(B.left, B.top), new ui(
                          B.left + B.width, B.top), new ui(B.left + B
                          .width, B.top + B.height), new ui(B.left, B
                          .top + B.height)]), this.ctx.clip(), this
                        .renderTextWithLetterSpacing(new Or(t.value, g), i
                          .letterSpacing, p), this.ctx.restore(), this.ctx
                        .textBaseline = "alphabetic", this.ctx.textAlign =
                        "left"
                    }
                    if (!Zn(t.styles.display, 2048)) return [3, 20];
                    if (null === t.styles.listStyleImage) return [3, 19];
                    if (0 !== (y = t.styles.listStyleImage).type) return [
                      3, 18
                    ];
                    v = void 0, m = y.url, a.label = 15;
                  case 15:
                    return a.trys.push([15, 17, , 18]), [4, this.context
                      .cache.match(m)
                    ];
                  case 16:
                    return v = a.sent(), this.ctx.drawImage(v, t.bounds
                      .left - (v.width + 10), t.bounds.top), [3, 18];
                  case 17:
                    return a.sent(), this.context.logger.error(
                      "Error loading list-style-image " + m), [3, 18];
                  case 18:
                    return [3, 20];
                  case 19:
                    e.listValue && -1 !== t.styles.listStyleType && (w =
                      this.createFontStyle(i)[0], this.ctx.font = w,
                      this.ctx.fillStyle = ot(i.color), this.ctx
                      .textBaseline = "middle", this.ctx.textAlign =
                      "right", B = new A(t.bounds.left, t.bounds.top +
                        et(t.styles.paddingTop, t.bounds.width), t
                        .bounds.width, dn(i.lineHeight, i.fontSize
                          .number) / 2 + 1), this
                      .renderTextWithLetterSpacing(new Or(e.listValue,
                        B), i.letterSpacing, dn(i.lineHeight, i
                        .fontSize.number) / 2 + 2), this.ctx
                      .textBaseline = "bottom", this.ctx.textAlign =
                      "left"), a.label = 20;
                  case 20:
                    return [2]
                }
              }))
            }))
          }, n.prototype.renderStackContent = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, n, r, i, A, o, s, u, l, c, d, h, p, f, g;
              return a(this, (function (a) {
                switch (a.label) {
                  case 0:
                    return Zn(e.element.container.flags, 16), [4, this
                      .renderNodeBackgroundAndBorders(e.element)
                    ];
                  case 1:
                    a.sent(), t = 0, n = e.negativeZIndex, a.label = 2;
                  case 2:
                    return t < n.length ? (g = n[t], [4, this.renderStack(
                      g)]) : [3, 5];
                  case 3:
                    a.sent(), a.label = 4;
                  case 4:
                    return t++, [3, 2];
                  case 5:
                    return [4, this.renderNodeContent(e.element)];
                  case 6:
                    a.sent(), r = 0, i = e.nonInlineLevel, a.label = 7;
                  case 7:
                    return r < i.length ? (g = i[r], [4, this.renderNode(
                      g)]) : [3, 10];
                  case 8:
                    a.sent(), a.label = 9;
                  case 9:
                    return r++, [3, 7];
                  case 10:
                    A = 0, o = e.nonPositionedFloats, a.label = 11;
                  case 11:
                    return A < o.length ? (g = o[A], [4, this.renderStack(
                      g)]) : [3, 14];
                  case 12:
                    a.sent(), a.label = 13;
                  case 13:
                    return A++, [3, 11];
                  case 14:
                    s = 0, u = e.nonPositionedInlineLevel, a.label = 15;
                  case 15:
                    return s < u.length ? (g = u[s], [4, this.renderStack(
                      g)]) : [3, 18];
                  case 16:
                    a.sent(), a.label = 17;
                  case 17:
                    return s++, [3, 15];
                  case 18:
                    l = 0, c = e.inlineLevel, a.label = 19;
                  case 19:
                    return l < c.length ? (g = c[l], [4, this.renderNode(
                      g)]) : [3, 22];
                  case 20:
                    a.sent(), a.label = 21;
                  case 21:
                    return l++, [3, 19];
                  case 22:
                    d = 0, h = e.zeroOrAutoZIndexOrTransformedOrOpacity, a
                      .label = 23;
                  case 23:
                    return d < h.length ? (g = h[d], [4, this.renderStack(
                      g)]) : [3, 26];
                  case 24:
                    a.sent(), a.label = 25;
                  case 25:
                    return d++, [3, 23];
                  case 26:
                    p = 0, f = e.positiveZIndex, a.label = 27;
                  case 27:
                    return p < f.length ? (g = f[p], [4, this.renderStack(
                      g)]) : [3, 30];
                  case 28:
                    a.sent(), a.label = 29;
                  case 29:
                    return p++, [3, 27];
                  case 30:
                    return [2]
                }
              }))
            }))
          }, n.prototype.mask = function (e) {
            this.ctx.beginPath(), this.ctx.moveTo(0, 0), this.ctx.lineTo(this.canvas
                .width, 0), this.ctx.lineTo(this.canvas.width, this.canvas.height),
              this.ctx.lineTo(0, this.canvas.height), this.ctx.lineTo(0, 0), this
              .formatPath(e.slice(0).reverse()), this.ctx.closePath()
          }, n.prototype.path = function (e) {
            this.ctx.beginPath(), this.formatPath(e), this.ctx.closePath()
          }, n.prototype.formatPath = function (e) {
            var t = this;
            e.forEach((function (e, n) {
              var r = di(e) ? e.start : e;
              0 === n ? t.ctx.moveTo(r.x, r.y) : t.ctx.lineTo(r.x, r.y), di(
                e) && t.ctx.bezierCurveTo(e.startControl.x, e.startControl.y, e
                  .endControl.x, e.endControl.y, e.end.x, e.end.y)
            }))
          }, n.prototype.renderRepeat = function (e, t, n, r) {
            this.path(e), this.ctx.fillStyle = t, this.ctx.translate(n, r), this.ctx
              .fill(), this.ctx.translate(-n, -r)
          }, n.prototype.resizeImage = function (e, t, n) {
            var r;
            if (e.width === t && e.height === n) return e;
            var a = (null !== (r = this.canvas.ownerDocument) && void 0 !== r ? r :
              document).createElement("canvas");
            return a.width = Math.max(1, t), a.height = Math.max(1, n), a.getContext(
              "2d").drawImage(e, 0, 0, e.width, e.height, 0, 0, t, n), a
          }, n.prototype.renderBackgroundImage = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, n, r, i, A, o;
              return a(this, (function (s) {
                switch (s.label) {
                  case 0:
                    t = e.styles.backgroundImage.length - 1, n =
                      function (n) {
                        var i, A, o, s, u, l, c, d, h, p, f, g, y, v, m,
                          w, B, M, C, I, x, b, k, T, E, D, N, P, Q, O, _;
                        return a(this, (function (a) {
                          switch (a.label) {
                            case 0:
                              if (0 !== n.type) return [3, 5];
                              i = void 0, A = n.url, a.label = 1;
                            case 1:
                              return a.trys.push([1, 3, , 4]), [4, r
                                .context.cache.match(A)
                              ];
                            case 2:
                              return i = a.sent(), [3, 4];
                            case 3:
                              return a.sent(), r.context.logger
                                .error(
                                  "Error loading background-image " +
                                  A), [3, 4];
                            case 4:
                              return i && (o = Ni(e, t, [i.width, i
                                  .height, i.width / i.height
                                ]), w = o[0], b = o[1], k = o[2],
                                C = o[3], I = o[4], v = r.ctx
                                .createPattern(r.resizeImage(i, C,
                                  I), "repeat"), r.renderRepeat(w,
                                  v, b, k)), [3, 6];
                            case 5:
                              1 === n.type ? (s = Ni(e, t, [null,
                                    null, null
                                  ]), w = s[0], b = s[1], k = s[2],
                                  C = s[3], I = s[4], u = Bt(n
                                    .angle, C, I), l = u[0], c = u[
                                    1], d = u[2], h = u[3], p = u[
                                  4], (f = document.createElement(
                                    "canvas")).width = C, f.height =
                                  I, g = f.getContext("2d"), y = g
                                  .createLinearGradient(c, h, d, p),
                                  wt(n.stops, l).forEach((function (
                                    e) {
                                    return y.addColorStop(e
                                      .stop, ot(e.color))
                                  })), g.fillStyle = y, g.fillRect(
                                    0, 0, C, I), C > 0 && I > 0 && (
                                    v = r.ctx.createPattern(f,
                                      "repeat"), r.renderRepeat(w,
                                      v, b, k))) : function (e) {
                                  return 2 === e.type
                                }(n) && (m = Ni(e, t, [null, null,
                                    null
                                  ]), w = m[0], B = m[1], M = m[2],
                                  C = m[3], I = m[4], x = 0 === n
                                  .position.length ? [Je] : n
                                  .position, b = et(x[0], C), k =
                                  et(x[x.length - 1], I), T =
                                  function (e, t, n, r, a) {
                                    var i = 0,
                                      A = 0;
                                    switch (e.size) {
                                      case 0:
                                        0 === e.shape ? i = A = Math
                                          .min(Math.abs(t), Math
                                            .abs(t - r), Math.abs(
                                            n), Math.abs(n - a)) :
                                          1 === e.shape && (i = Math
                                            .min(Math.abs(t), Math
                                              .abs(t - r)), A = Math
                                            .min(Math.abs(n), Math
                                              .abs(n - a)));
                                        break;
                                      case 2:
                                        if (0 === e.shape) i = A =
                                          Math.min(Mt(t, n), Mt(t,
                                              n - a), Mt(t - r, n),
                                            Mt(t - r, n - a));
                                        else if (1 === e.shape) {
                                          var o = Math.min(Math.abs(
                                              n), Math.abs(n - a)) /
                                            Math.min(Math.abs(t),
                                              Math.abs(t - r)),
                                            s = Ct(r, a, t, n, !0),
                                            u = s[0],
                                            l = s[1];
                                          A = o * (i = Mt(u - t, (
                                            l - n) / o))
                                        }
                                        break;
                                      case 1:
                                        0 === e.shape ? i = A = Math
                                          .max(Math.abs(t), Math
                                            .abs(t - r), Math.abs(
                                            n), Math.abs(n - a)) :
                                          1 === e.shape && (i = Math
                                            .max(Math.abs(t), Math
                                              .abs(t - r)), A = Math
                                            .max(Math.abs(n), Math
                                              .abs(n - a)));
                                        break;
                                      case 3:
                                        if (0 === e.shape) i = A =
                                          Math.max(Mt(t, n), Mt(t,
                                              n - a), Mt(t - r, n),
                                            Mt(t - r, n - a));
                                        else if (1 === e.shape) {
                                          o = Math.max(Math.abs(n),
                                              Math.abs(n - a)) /
                                            Math.max(Math.abs(t),
                                              Math.abs(t - r));
                                          var c = Ct(r, a, t, n, !
                                          1);
                                          u = c[0], l = c[1], A =
                                            o * (i = Mt(u - t, (l -
                                              n) / o))
                                        }
                                    }
                                    return Array.isArray(e.size) &&
                                      (i = et(e.size[0], r), A =
                                        2 === e.size.length ? et(e
                                          .size[1], a) : i), [i, A]
                                  }(n, b, k, C, I), E = T[0], D = T[
                                    1], E > 0 && D > 0 && (N = r.ctx
                                    .createRadialGradient(B + b, M +
                                      k, 0, B + b, M + k, E), wt(n
                                      .stops, 2 * E).forEach((
                                      function (e) {
                                        return N.addColorStop(e
                                          .stop, ot(e.color))
                                      })), r.path(w), r.ctx
                                    .fillStyle = N, E !== D ? (P = e
                                      .bounds.left + .5 * e.bounds
                                      .width, Q = e.bounds.top +
                                      .5 * e.bounds.height, _ = 1 /
                                      (O = D / E), r.ctx.save(), r
                                      .ctx.translate(P, Q), r.ctx
                                      .transform(1, 0, 0, O, 0, 0),
                                      r.ctx.translate(-P, -Q), r.ctx
                                      .fillRect(B, _ * (M - Q) + Q,
                                        C, I * _), r.ctx.restore()
                                      ) : r.ctx.fill())), a.label =
                                6;
                            case 6:
                              return t--, [2]
                          }
                        }))
                      }, r = this, i = 0, A = e.styles.backgroundImage
                      .slice(0).reverse(), s.label = 1;
                  case 1:
                    return i < A.length ? (o = A[i], [5, n(o)]) : [3, 4];
                  case 2:
                    s.sent(), s.label = 3;
                  case 3:
                    return i++, [3, 1];
                  case 4:
                    return [2]
                }
              }))
            }))
          }, n.prototype.renderSolidBorder = function (e, t, n) {
            return r(this, void 0, void 0, (function () {
              return a(this, (function (r) {
                return this.path(bi(n, t)), this.ctx.fillStyle = ot(e),
                  this.ctx.fill(), [2]
              }))
            }))
          }, n.prototype.renderDoubleBorder = function (e, t, n, i) {
            return r(this, void 0, void 0, (function () {
              var r, A;
              return a(this, (function (a) {
                switch (a.label) {
                  case 0:
                    return t < 3 ? [4, this.renderSolidBorder(e, n, i)] :
                      [3, 2];
                  case 1:
                    return a.sent(), [2];
                  case 2:
                    return r = function (e, t) {
                        switch (t) {
                          case 0:
                            return Ti(e.topLeftBorderBox, e
                              .topLeftBorderDoubleOuterBox, e
                              .topRightBorderBox, e
                              .topRightBorderDoubleOuterBox);
                          case 1:
                            return Ti(e.topRightBorderBox, e
                              .topRightBorderDoubleOuterBox, e
                              .bottomRightBorderBox, e
                              .bottomRightBorderDoubleOuterBox);
                          case 2:
                            return Ti(e.bottomRightBorderBox, e
                              .bottomRightBorderDoubleOuterBox, e
                              .bottomLeftBorderBox, e
                              .bottomLeftBorderDoubleOuterBox);
                          case 3:
                          default:
                            return Ti(e.bottomLeftBorderBox, e
                              .bottomLeftBorderDoubleOuterBox, e
                              .topLeftBorderBox, e
                              .topLeftBorderDoubleOuterBox)
                        }
                      }(i, n), this.path(r), this.ctx.fillStyle = ot(e),
                      this.ctx.fill(), A = function (e, t) {
                        switch (t) {
                          case 0:
                            return Ti(e.topLeftBorderDoubleInnerBox, e
                              .topLeftPaddingBox, e
                              .topRightBorderDoubleInnerBox, e
                              .topRightPaddingBox);
                          case 1:
                            return Ti(e.topRightBorderDoubleInnerBox, e
                              .topRightPaddingBox, e
                              .bottomRightBorderDoubleInnerBox, e
                              .bottomRightPaddingBox);
                          case 2:
                            return Ti(e.bottomRightBorderDoubleInnerBox, e
                              .bottomRightPaddingBox, e
                              .bottomLeftBorderDoubleInnerBox, e
                              .bottomLeftPaddingBox);
                          case 3:
                          default:
                            return Ti(e.bottomLeftBorderDoubleInnerBox, e
                              .bottomLeftPaddingBox, e
                              .topLeftBorderDoubleInnerBox, e
                              .topLeftPaddingBox)
                        }
                      }(i, n), this.path(A), this.ctx.fill(), [2]
                }
              }))
            }))
          }, n.prototype.renderNodeBackgroundAndBorders = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, n, r, i, A, o, s, u, l = this;
              return a(this, (function (a) {
                switch (a.label) {
                  case 0:
                    return this.applyEffects(e.getEffects(2)), t = e
                      .container.styles, n = !At(t.backgroundColor) || t
                      .backgroundImage.length, r = [{
                        style: t.borderTopStyle,
                        color: t.borderTopColor,
                        width: t.borderTopWidth
                      }, {
                        style: t.borderRightStyle,
                        color: t.borderRightColor,
                        width: t.borderRightWidth
                      }, {
                        style: t.borderBottomStyle,
                        color: t.borderBottomColor,
                        width: t.borderBottomWidth
                      }, {
                        style: t.borderLeftStyle,
                        color: t.borderLeftColor,
                        width: t.borderLeftWidth
                      }], i = zi(_i(t.backgroundClip, 0), e.curves), n ||
                      t.boxShadow.length ? (this.ctx.save(), this.path(i),
                        this.ctx.clip(), At(t.backgroundColor) || (this
                          .ctx.fillStyle = ot(t.backgroundColor), this.ctx
                          .fill()), [4, this.renderBackgroundImage(e
                          .container)]) : [3, 2];
                  case 1:
                    a.sent(), this.ctx.restore(), t.boxShadow.slice(0)
                      .reverse().forEach((function (t) {
                        l.ctx.save();
                        var n, r, a, i, A, o = fi(e.curves),
                          s = t.inset ? 0 : 1e4,
                          u = (n = o, r = -s + (t.inset ? 1 : -1) * t
                            .spread.number, a = (t.inset ? 1 : -1) * t
                            .spread.number, i = t.spread.number * (t
                              .inset ? -2 : 2), A = t.spread.number *
                            (t.inset ? -2 : 2), n.map((function (e,
                            t) {
                              switch (t) {
                                case 0:
                                  return e.add(r, a);
                                case 1:
                                  return e.add(r + i, a);
                                case 2:
                                  return e.add(r + i, a + A);
                                case 3:
                                  return e.add(r, a + A)
                              }
                              return e
                            })));
                        t.inset ? (l.path(o), l.ctx.clip(), l.mask(
                          u)) : (l.mask(o), l.ctx.clip(), l.path(u)),
                          l.ctx.shadowOffsetX = t.offsetX.number + s,
                          l.ctx.shadowOffsetY = t.offsetY.number, l
                          .ctx.shadowColor = ot(t.color), l.ctx
                          .shadowBlur = t.blur.number, l.ctx
                          .fillStyle = t.inset ? ot(t.color) :
                          "rgba(0,0,0,1)", l.ctx.fill(), l.ctx
                          .restore()
                      })), a.label = 2;
                  case 2:
                    A = 0, o = 0, s = r, a.label = 3;
                  case 3:
                    return o < s.length ? 0 !== (u = s[o]).style && !At(u
                        .color) && u.width > 0 ? 2 !== u.style ? [3, 5] :
                      [4, this.renderDashedDottedBorder(u.color, u.width,
                        A, e.curves, 2)] : [3, 11] : [3, 13];
                  case 4:
                    return a.sent(), [3, 11];
                  case 5:
                    return 3 !== u.style ? [3, 7] : [4, this
                      .renderDashedDottedBorder(u.color, u.width, A, e
                        .curves, 3)
                    ];
                  case 6:
                    return a.sent(), [3, 11];
                  case 7:
                    return 4 !== u.style ? [3, 9] : [4, this
                      .renderDoubleBorder(u.color, u.width, A, e.curves)
                    ];
                  case 8:
                    return a.sent(), [3, 11];
                  case 9:
                    return [4, this.renderSolidBorder(u.color, A, e
                      .curves)];
                  case 10:
                    a.sent(), a.label = 11;
                  case 11:
                    A++, a.label = 12;
                  case 12:
                    return o++, [3, 3];
                  case 13:
                    return [2]
                }
              }))
            }))
          }, n.prototype.renderDashedDottedBorder = function (e, t, n, i, A) {
            return r(this, void 0, void 0, (function () {
              var r, o, s, u, l, c, d, h, p, f, g, y, v, m, w, B;
              return a(this, (function (a) {
                return this.ctx.save(), r = function (e, t) {
                    switch (t) {
                      case 0:
                        return ki(e.topLeftBorderStroke, e
                          .topRightBorderStroke);
                      case 1:
                        return ki(e.topRightBorderStroke, e
                          .bottomRightBorderStroke);
                      case 2:
                        return ki(e.bottomRightBorderStroke, e
                          .bottomLeftBorderStroke);
                      case 3:
                      default:
                        return ki(e.bottomLeftBorderStroke, e
                          .topLeftBorderStroke)
                    }
                  }(i, n), o = bi(i, n), 2 === A && (this.path(o), this
                    .ctx.clip()), di(o[0]) ? (s = o[0].start.x, u = o[0]
                    .start.y) : (s = o[0].x, u = o[0].y), di(o[1]) ? (l =
                    o[1].end.x, c = o[1].end.y) : (l = o[1].x, c = o[1]
                  .y), d = 0 === n || 2 === n ? Math.abs(s - l) : Math
                  .abs(u - c), this.ctx.beginPath(), 3 === A ? this
                  .formatPath(r) : this.formatPath(o.slice(0, 2)), h = t <
                  3 ? 3 * t : 2 * t, p = t < 3 ? 2 * t : t, 3 === A && (
                    h = t, p = t), f = !0, d <= 2 * h ? f = !1 : d <= 2 *
                  h + p ? (h *= g = d / (2 * h + p), p *= g) : (y = Math
                    .floor((d + p) / (h + p)), v = (d - y * h) / (y - 1),
                    p = (m = (d - (y + 1) * h) / y) <= 0 || Math.abs(p -
                      v) < Math.abs(p - m) ? v : m), f && (3 === A ? this
                    .ctx.setLineDash([0, h + p]) : this.ctx.setLineDash([
                      h, p
                    ])), 3 === A ? (this.ctx.lineCap = "round", this.ctx
                    .lineWidth = t) : this.ctx.lineWidth = 2 * t + 1.1,
                  this.ctx.strokeStyle = ot(e), this.ctx.stroke(), this
                  .ctx.setLineDash([]), 2 === A && (di(o[0]) && (w = o[3],
                    B = o[0], this.ctx.beginPath(), this.formatPath([
                      new ui(w.end.x, w.end.y), new ui(B.start.x, B
                        .start.y)
                    ]), this.ctx.stroke()), di(o[1]) && (w = o[1], B =
                    o[2], this.ctx.beginPath(), this.formatPath([new ui(
                      w.end.x, w.end.y), new ui(B.start.x, B.start
                      .y)]), this.ctx.stroke())), this.ctx.restore(), [2]
              }))
            }))
          }, n.prototype.render = function (e) {
            return r(this, void 0, void 0, (function () {
              var t;
              return a(this, (function (n) {
                switch (n.label) {
                  case 0:
                    return this.options.backgroundColor && (this.ctx
                        .fillStyle = ot(this.options.backgroundColor),
                        this.ctx.fillRect(this.options.x, this.options.y,
                          this.options.width, this.options.height)), r =
                      new Ci(e, null), a = new Mi(r), Ii(r, a, a, i = []),
                      xi(r.container, i), t = a, [4, this.renderStack(t)];
                  case 1:
                    return n.sent(), this.applyEffects([]), [2, this
                      .canvas
                    ]
                }
                var r, a, i
              }))
            }))
          }, n
        }(Fi),
        ji = function (e) {
          return e instanceof ta || e instanceof ea || e instanceof $r && "radio" !== e
            .type && "checkbox" !== e.type
        },
        zi = function (e, t) {
          switch (e) {
            case 0:
              return fi(t);
            case 2:
              return function (e) {
                return [e.topLeftContentBox, e.topRightContentBox, e
                  .bottomRightContentBox, e.bottomLeftContentBox
                ]
              }(t);
            case 1:
            default:
              return gi(t)
          }
        },
        Ri = function (e) {
          switch (e) {
            case 1:
              return "center";
            case 2:
              return "right";
            case 0:
            default:
              return "left"
          }
        },
        Hi = ["-apple-system", "system-ui"],
        Yi = function (e) {
          return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent) ? e.filter((
            function (e) {
              return -1 === Hi.indexOf(e)
            })) : e
        },
        Wi = function (e) {
          function n(t, n) {
            var r = e.call(this, t, n) || this;
            return r.canvas = n.canvas ? n.canvas : document.createElement("canvas"), r
              .ctx = r.canvas.getContext("2d"), r.options = n, r.canvas.width = Math
              .floor(n.width * n.scale), r.canvas.height = Math.floor(n.height * n
                .scale), r.canvas.style.width = n.width + "px", r.canvas.style.height =
              n.height + "px", r.ctx.scale(r.options.scale, r.options.scale), r.ctx
              .translate(-n.x, -n.y), r.context.logger.debug(
                "EXPERIMENTAL ForeignObject renderer initialized (" + n.width + "x" + n
                .height + " at " + n.x + "," + n.y + ") with scale " + n.scale), r
          }
          return t(n, e), n.prototype.render = function (e) {
            return r(this, void 0, void 0, (function () {
              var t, n;
              return a(this, (function (r) {
                switch (r.label) {
                  case 0:
                    return t = Nr(this.options.width * this.options.scale,
                      this.options.height * this.options.scale, this
                      .options.scale, this.options.scale, e), [4, Ki(t)];
                  case 1:
                    return n = r.sent(), this.options.backgroundColor && (
                        this.ctx.fillStyle = ot(this.options
                          .backgroundColor), this.ctx.fillRect(0, 0, this
                          .options.width * this.options.scale, this
                          .options.height * this.options.scale)), this.ctx
                      .drawImage(n, -this.options.x * this.options.scale,
                        -this.options.y * this.options.scale), [2, this
                        .canvas
                      ]
                }
              }))
            }))
          }, n
        }(Fi),
        Ki = function (e) {
          return new Promise((function (t, n) {
            var r = new Image;
            r.onload = function () {
                t(r)
              }, r.onerror = n, r.src = "data:image/svg+xml;charset=utf-8," +
              encodeURIComponent((new XMLSerializer).serializeToString(e))
          }))
        },
        Gi = function () {
          function e(e) {
            var t = e.id,
              n = e.enabled;
            this.id = t, this.enabled = n, this.start = Date.now()
          }
          return e.prototype.debug = function () {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this.enabled && ("undefined" != typeof window && window.console &&
              "function" == typeof console.debug ? console.debug.apply(console, i([
                this.id, this.getTime() + "ms"
              ], e)) : this.info.apply(this, e))
          }, e.prototype.getTime = function () {
            return Date.now() - this.start
          }, e.prototype.info = function () {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this.enabled && "undefined" != typeof window && window.console &&
              "function" == typeof console.info && console.info.apply(console, i([this
                .id, this.getTime() + "ms"
              ], e))
          }, e.prototype.warn = function () {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this.enabled && ("undefined" != typeof window && window.console &&
              "function" == typeof console.warn ? console.warn.apply(console, i([
                this.id, this.getTime() + "ms"
              ], e)) : this.info.apply(this, e))
          }, e.prototype.error = function () {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            this.enabled && ("undefined" != typeof window && window.console &&
              "function" == typeof console.error ? console.error.apply(console, i([
                this.id, this.getTime() + "ms"
              ], e)) : this.info.apply(this, e))
          }, e.instances = {}, e
        }(),
        Vi = function () {
          function e(t, n) {
            var r;
            this.windowBounds = n, this.instanceName = "#" + e.instanceCount++, this
              .logger = new Gi({
                id: this.instanceName,
                enabled: t.logging
              }), this.cache = null !== (r = t.cache) && void 0 !== r ? r : new ei(this,
                t)
          }
          return e.instanceCount = 1, e
        }();
      "undefined" != typeof window && $a.setContext(window);
      var Zi = function (e, t) {
          return r(void 0, void 0, void 0, (function () {
            var r, i, s, u, l, c, d, h, p, f, g, y, v, m, w, B, M, C, I, x, b, k,
              T, E, D, N, P, Q, O, _, S, U, F, L, j, z, R, H;
            return a(this, (function (a) {
              switch (a.label) {
                case 0:
                  if (!e || "object" != typeof e) return [2, Promise.reject(
                    "Invalid element provided as first argument")];
                  if (!(r = e.ownerDocument)) throw new Error(
                    "Element is not attached to a Document");
                  if (!(i = r.defaultView)) throw new Error(
                    "Document is not attached to a Window");
                  return s = {
                    allowTaint: null !== (k = t.allowTaint) && void 0 !==
                      k && k,
                    imageTimeout: null !== (T = t.imageTimeout) &&
                      void 0 !== T ? T : 15e3,
                    proxy: t.proxy,
                    useCORS: null !== (E = t.useCORS) && void 0 !== E && E
                  }, u = n({
                    logging: null === (D = t.logging) || void 0 === D ||
                      D,
                    cache: t.cache
                  }, s), l = {
                    windowWidth: null !== (N = t.windowWidth) &&
                      void 0 !== N ? N : i.innerWidth,
                    windowHeight: null !== (P = t.windowHeight) &&
                      void 0 !== P ? P : i.innerHeight,
                    scrollX: null !== (Q = t.scrollX) && void 0 !== Q ?
                      Q : i.pageXOffset,
                    scrollY: null !== (O = t.scrollY) && void 0 !== O ?
                      O : i.pageYOffset
                  }, c = new A(l.scrollX, l.scrollY, l.windowWidth, l
                    .windowHeight), d = new Vi(u, c), h = null !== (_ = t
                    .foreignObjectRendering) && void 0 !== _ && _, p = {
                    allowTaint: null !== (S = t.allowTaint) && void 0 !==
                      S && S,
                    onclone: t.onclone,
                    ignoreElements: t.ignoreElements,
                    inlineImages: h,
                    copyStyles: h
                  }, d.logger.debug("Starting document clone with size " +
                    c.width + "x" + c.height + " scrolled to " + -c.left +
                    "," + -c.top), f = new Fa(d, e, p), (g = f
                    .clonedReferenceElement) ? [4, f.toIFrame(r, c)] : [2,
                    Promise.reject(
                      "Unable to find element in cloned iframe")
                  ];
                case 1:
                  return y = a.sent(), v = ya(g) || "HTML" === g.tagName ?
                    function (e) {
                      var t = e.body,
                        n = e.documentElement;
                      if (!t || !n) throw new Error(
                        "Unable to get document size");
                      var r = Math.max(Math.max(t.scrollWidth, n
                          .scrollWidth), Math.max(t.offsetWidth, n
                          .offsetWidth), Math.max(t.clientWidth, n
                          .clientWidth)),
                        a = Math.max(Math.max(t.scrollHeight, n
                          .scrollHeight), Math.max(t.offsetHeight, n
                          .offsetHeight), Math.max(t.clientHeight, n
                          .clientHeight));
                      return new A(0, 0, r, a)
                    }(g.ownerDocument) : o(d, g), m = v.width, w = v.height,
                    B = v.left, M = v.top, C = Xi(d, g, t.backgroundColor),
                    I = {
                      canvas: t.canvas,
                      backgroundColor: C,
                      scale: null !== (F = null !== (U = t.scale) &&
                          void 0 !== U ? U : i.devicePixelRatio) &&
                        void 0 !== F ? F : 1,
                      x: (null !== (L = t.x) && void 0 !== L ? L : 0) + B,
                      y: (null !== (j = t.y) && void 0 !== j ? j : 0) + M,
                      width: null !== (z = t.width) && void 0 !== z ? z :
                        Math.ceil(m),
                      height: null !== (R = t.height) && void 0 !== R ? R :
                        Math.ceil(w)
                    }, h ? (d.logger.debug(
                        "Document cloned, using foreign object rendering"),
                      [4, new Wi(d, I).render(g)]) : [3, 3];
                case 2:
                  return x = a.sent(), [3, 5];
                case 3:
                  return d.logger.debug(
                      "Document cloned, element located at " + B + "," + M +
                      " with size " + m + "x" + w +
                      " using computed rendering"), d.logger.debug(
                      "Starting DOM parsing"), b = Aa(d, g), C === b.styles
                    .backgroundColor && (b.styles.backgroundColor = gt
                      .TRANSPARENT), d.logger.debug(
                      "Starting renderer for element at " + I.x + "," + I
                      .y + " with size " + I.width + "x" + I.height), [4,
                      new Li(d, I).render(b)
                    ];
                case 4:
                  x = a.sent(), a.label = 5;
                case 5:
                  return (null === (H = t.removeContainer) || void 0 ===
                    H || H) && (Fa.destroy(y) || d.logger.error(
                    "Cannot detach cloned iframe as it is not in the DOM anymore"
                    )), d.logger.debug("Finished rendering"), [2, x]
              }
            }))
          }))
        },
        Xi = function (e, t, n) {
          var r = t.ownerDocument,
            a = r.documentElement ? ft(e, getComputedStyle(r.documentElement)
              .backgroundColor) : gt.TRANSPARENT,
            i = r.body ? ft(e, getComputedStyle(r.body).backgroundColor) : gt
            .TRANSPARENT,
            A = "string" == typeof n ? ft(e, n) : null === n ? gt.TRANSPARENT :
            4294967295;
          return t === r.documentElement ? At(a) ? At(i) ? A : i : a : A
        };
      return function (e, t) {
        return void 0 === t && (t = {}), Zi(e, t)
      }
    }()
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = m(n(5)),
      a = m(n(33)),
      i = m(n(7)),
      A = m(n(94)),
      o = m(n(2)),
      s = m(n(0)),
      u = m(n(1)),
      l = m(n(3)),
      c = m(n(4)),
      d = m(n(9)),
      h = m(n(22)),
      p = n(65),
      f = n(15),
      g = n(136),
      y = n(28),
      v = n(39);

    function m(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var w = function (e) {
      function t() {
        (0, s.default)(this, t);
        var e = (0, l.default)(this, (t.__proto__ || (0, o.default)(t)).apply(this,
          arguments));
        return e.type = "modify", e.description = "移动操作工具。内部使用，不提供对外接口", e
          .modifyHandler = function (t, n, r) {
            if (!((t = t.filter((function (t) {
                return e.drawOpsOfPage[t]
              }))).length < 1) && n) {
              h.default.updateDefAttr(e.app, t.map((function (t) {
                return e.drawOpsOfPage[t]
              })), n);
              var a = e.getAttrs(t, n);
              if (a && a.updateGraph) {
                var i = {
                    type: "modify",
                    dependOn: t,
                    attrs: a.attrs,
                    inProgress: r
                  },
                  A = e.opsManager.currPage.getNextOpId(!0),
                  o = (0, v.deepCopySnapBeforeMove)(t, e.drawOpsOfPage);
                e.opsManager.graphOp.handleElePosChange(o, i, A, A + "_modify")
              } else a && e.dispatch({
                type: "modify",
                dependOn: t,
                attrs: a.attrs,
                inProgress: r
              })
            }
          }, e
      }
      return (0, c.default)(t, e), (0, u.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            "modify:change": {
              value: this.modifyHandler,
              information: {
                args: "ids: Array<string>, attrs:{key:string, value: any}[], inProgress: boolean",
                message: "更改选中元素的属性"
              }
            }
          }
        }
      }, {
        key: "getAttrs",
        value: function (e, t) {
          for (var n, r, a, o, s, u = this, l = !1, c = {
              common: [],
              sub: []
            }, d = e.map((function (e) {
              return u.drawOpsOfPage[e]
            })).filter((function (e) {
              return e
            })), v = d.filter((function (e) {
              return "text" === e.data.type
            })).map((function (e) {
              return e.opId
            })), m = d.filter((function (e) {
              return "shape" === e.data.type
            })).map((function (e) {
              return e.opId
            })), w = d.filter((function (e) {
              return "link" === e.data.type
            })).map((function (e) {
              return e.opId
            })), B = 0; B < t.length; B++) {
            var M = t[B];
            if (-1 !== ["fontStroke", "fontFill", "textAlign", "verticalAlign"]
              .indexOf(M.k)) {
              var C = -1 !== ["fontStroke", "fontFill"].indexOf(M.k) ? M.k
                .slice(4).toLowerCase() : M.k;
              v.length > 0 && c.sub.push({
                ids: v,
                attrs: [{
                  k: C,
                  v: M.v
                }]
              }), (m.length > 0 || w.length > 0) && c.sub.push({
                ids: m.concat(w),
                attrs: [{
                  k: "text",
                  v: (0, A.default)({}, C, M.v)
                }]
              })
            } else if ("fontSize" === M.k || "fontFamily" === M.k) {
              if (v.length > 0) {
                var I = !0,
                  x = !1,
                  b = void 0;
                try {
                  for (var k, T = (0, i.default)(v); !(I = (k = T.next())
                    .done); I = !0) {
                    var E = k.value,
                      D = null === (n = this.drawOpsOfPage[E]) || void 0 === n ?
                      void 0 : n.data;
                    if (D) {
                      var N = void 0;
                      if ("fontFamily" === M.k) N = this.opsManager.textOp
                        .getUpdatedTxtBoundary(D, (0, A.default)({}, M.k, M.v));
                      else {
                        var P = M.v / D.fontSize || 1;
                        N = {
                          sx: D.boundary.sx,
                          sy: D.boundary.sy,
                          w: D.boundary.w * P,
                          h: D.boundary.h * P
                        }
                      }
                      c.sub.push({
                        ids: [E],
                        attrs: [{
                          k: M.k,
                          v: M.v
                        }, {
                          k: "boundary",
                          v: N
                        }]
                      })
                    }
                  }
                } catch (e) {
                  x = !0, b = e
                } finally {
                  try {
                    !I && T.return && T.return()
                  } finally {
                    if (x) throw b
                  }
                }
                l = !0
              }
              var Q = !0,
                O = !1,
                _ = void 0;
              try {
                for (var S, U = (0, i.default)(w); !(Q = (S = U.next())
                  .done); Q = !0) {
                  var F = S.value,
                    L = this.app.opsManager.linkOp.getUpdatedTxtProps(this
                      .drawOpsOfPage[F].data, (0, A.default)({}, M.k, M.v));
                  L && c.sub.push({
                    ids: [F],
                    attrs: [{
                      k: "text",
                      v: L
                    }]
                  })
                }
              } catch (e) {
                O = !0, _ = e
              } finally {
                try {
                  !Q && U.return && U.return()
                } finally {
                  if (O) throw _
                }
              }
              m.length > 0 && c.sub.push({
                ids: m,
                attrs: [{
                  k: "text",
                  v: (0, A.default)({}, M.k, M.v)
                }]
              })
            } else if ("linkType" === M.k) {
              c.common.push(M);
              var j = !0,
                z = !1,
                R = void 0;
              try {
                for (var H, Y = (0, i.default)(d); !(j = (H = Y.next())
                  .done); j = !0) {
                  var W = H.value,
                    K = (0, p.graphAftTypeM)({
                      data: W.data,
                      type: M.v,
                      op: this
                    });
                  K && c.sub.push({
                    ids: [W.opId],
                    attrs: [{
                      k: "connPs",
                      v: K.connPs
                    }, {
                      k: "linkType",
                      v: M.v
                    }, {
                      k: "start",
                      v: {
                        dir: K.start.dir
                      }
                    }, {
                      k: "end",
                      v: {
                        dir: K.end.dir
                      }
                    }]
                  })
                }
              } catch (e) {
                z = !0, R = e
              } finally {
                try {
                  !j && Y.return && Y.return()
                } finally {
                  if (z) throw R
                }
              }
            } else {
              if ("typeChange" !== M.k) {
                c.common.push(M);
                continue
              }
              if ("text" === d[0].data.type && "text" !== M.v) {
                var G = d[0].data,
                  V = this.opsManager.textOp.getTextActualBound(G),
                  Z = this.app.shapeManager.getShapeBoundByTextBound(M.v, V);
                c.common.push({
                  k: "_reset",
                  v: {
                    type: "shape",
                    shape: M.v,
                    boundary: Z,
                    rAngle: G.rAngle || 0,
                    mat: G.mat,
                    xFactor: G.xFactor,
                    yFactor: G.yFactor,
                    lineWidth: h.default.shapeDef.lineWidth,
                    stroke: h.default.shapeDef.stroke,
                    fill: h.default.shapeDef.fill,
                    dash: y.IDashType.Solid,
                    text: {
                      value: G.text,
                      stroke: G.stroke,
                      fontSize: G.fontSize,
                      fill: G.fill,
                      textAlign: G.textAlign,
                      verticalAlign: h.default.shapeDef.text.verticalAlign,
                      fontFamily: G.fontFamily
                    },
                    inProgress: !1
                  }
                }), l = !0
              } else if ("shape" === d[0].data.type && "text" === M.v) {
                var X = d[0].data,
                  J = ((null === (r = X.text) || void 0 === r ? void 0 : r
                    .value) || "").trim();
                J = J || g.DefaultText;
                var q = (null === (a = X.text) || void 0 === a ? void 0 : a
                    .value) ? (null === (o = X.text) || void 0 === o ? void 0 :
                    o.fontSize) || h.default.textDef.fontSize : 16,
                  $ = (null === (s = X.text) || void 0 === s ? void 0 : s
                    .fontFamily) || h.default.textDef.fontFamily,
                  ee = X.boundary,
                  te = (0, f.getTransformedSize)(X),
                  ne = this.opsManager.textOp.getTextSize({
                    text: J,
                    fontSize: q,
                    fontFamily: $,
                    width: te.w
                  }),
                  re = ee.h * ne.h / te.h;
                c.common.push({
                  k: "_reset",
                  v: {
                    type: "text",
                    boundary: {
                      sx: ee.sx,
                      sy: ee.sy + ee.h / 2 - re / 2,
                      w: ee.w,
                      h: re
                    },
                    fixW: ee.w,
                    rAngle: X.rAngle || 0,
                    mat: X.mat,
                    xFactor: X.xFactor,
                    yFactor: X.yFactor,
                    text: X.text ? X.text.value : " ",
                    stroke: X.text ? X.text.stroke : h.default.textDef
                      .stroke,
                    textAlign: X.text ? X.text.textAlign : h.default.textDef
                      .textAlign,
                    fill: X.text ? X.text.fill : h.default.textDef.fill,
                    fontSize: q,
                    fontFamily: X.text ? X.text.fontFamily : h.default
                      .textDef.fontFamily,
                    inProgress: !1
                  }
                }), l = !0
              } else {
                if ("shape" !== d[0].data.type || d[0].data.shape === M.v)
                  return this.logger.log("转换类型不能相同，当前类型：" + d[0].data.type +
                    "-" + d[0].data.shape + "，目标类型：" + M.v), null;
                c.common.push({
                  k: "shape",
                  v: M.v
                })
              }
            }
          }
          return {
            updateGraph: l,
            attrs: c
          }
        }
      }, {
        key: "getSnapshot",
        value: function (e, t, n) {
          return {
            type: "modify",
            dependOn: e,
            attrs: this.getAttrs(e, t).attrs,
            inProgress: n
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = e.data.boundary ? {
              boundary: e.data.boundary
            } : {},
            A = e.data.text && "object" === (0, a.default)(e.data.text) ? {
              text: (0, r.default)({}, e.data.text)
            } : {},
            o = (0, r.default)((0, r.default)((0, r.default)({}, e.data), n),
            A),
            s = t.attrs;
          if (o = B(s.common, o), Array.isArray(s.sub)) {
            var u = !0,
              l = !1,
              c = void 0;
            try {
              for (var d, h = (0, i.default)(s.sub); !(u = (d = h.next())
                .done); u = !0) {
                var p = d.value,
                  f = p.ids,
                  g = p.attrs; - 1 !== f.indexOf(e.opId) && (o = B(g, o))
              }
            } catch (e) {
              l = !0, c = e
            } finally {
              try {
                !u && h.return && h.return()
              } finally {
                if (l) throw c
              }
            }
          }
          return (0, r.default)((0, r.default)({}, e), {
            data: o
          })
        }
      }]), t
    }(d.default);

    function B(e, t) {
      return Array.isArray(e) ? (e.forEach((function (e) {
        var n = e.k,
          i = e.v;
        "_reset" === n ? t = (0, r.default)({}, i) : i && "object" === (void 0 ===
            i ? "undefined" : (0, a.default)(i)) && !Array.isArray(i) ? i.reset ?
          t[n] = i : t[n] = (0, r.default)((0, r.default)({}, t[n] || {}), i) : t[
            n] = i, "boundary" === n && i.reset && (t.dx = 0, t.dy = 0, t
          .scaleX = {
            coordinate: 0,
            factor: 1
          }, t.scaleY = {
            coordinate: 0,
            factor: 1
          }, t.xFactor = 1, t.yFactor = 1, t.rAngle = 0, t.mat = void 0)
      })), t) : t
    }
    t.default = w
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = s(n(2)),
      a = s(n(0)),
      i = s(n(1)),
      A = s(n(3)),
      o = s(n(4));

    function s(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var u = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "audio", e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            "audio:insert": {
              value: this.addMedia.bind(this),
              information: {
                args: "url: string, opts: {\n                         width: number,\n                         sourceType: string,\n                         title?: string\n                         pageName?: string\n                         boardName?: string\n                         antiLeechProp?: IAntiLeechProp\n                     }",
                message: "上传视频"
              }
            }
          }
        }
      }, {
        key: "preview",
        value: function (e, t, n) {
          t.save();
          var r = void 0,
            a = void 0;
          if (n.boundary) {
            var i = t.canvas.width / t.canvas.height,
              A = void 0,
              o = void 0;
            i > n.boundary.width / n.boundary.height ? (A = n.boundary.height *
              i, o = n.boundary.height) : (o = n.boundary.width / i, A = n
              .boundary.width);
            var s = Math.min(A, o) / 6;
            r = [n.boundary.centerX - A / 2, n.boundary.centerY + o / 2 - s],
              a = [n.boundary.centerX - A / 2 + s, n.boundary.centerY + o / 2]
          } else {
            var u = void 0,
              l = void 0,
              c = this.app.container.width,
              d = this.app.container.height,
              h = t.canvas.width / t.canvas.height,
              p = c,
              f = d;
            h > c / d ? (u = (c - (p = d * h)) / 2, l = d) : (u = 0, l = ((f =
              c / h) + d) / 2);
            var g = Math.min(p, f) / 6;
            r = this.app.camera.convertToPointInWorld(u, l - g), a = this.app
              .camera.convertToPointInWorld(u + g, l)
          }
          try {
            this.app.resourceCache.resourceLoaded("audio") && !n
              .supportToDataUrl && t.drawImage(this.app.resourceCache
                .getResource("audio"), r[0], r[1], a[0] - r[0], a[1] - r[1])
          } catch (e) {
            this.logger.error("error", e)
          }
          t.restore()
        }
      }]), t
    }(s(n(144)).default);
    t.default = u
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = f(n(20)),
      a = f(n(25)),
      i = f(n(2)),
      A = f(n(0)),
      o = f(n(1)),
      s = f(n(3)),
      u = f(n(4)),
      l = f(n(11)),
      c = n(15),
      d = f(n(9)),
      h = n(19),
      p = f(n(349));

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var g = function (e, t, n, r) {
        return new(n || (n = l.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      y = void 0,
      v = function (e) {
        function t() {
          (0, A.default)(this, t);
          var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
            arguments));
          return e.type = "transDoc", e.description = "转码相关的操作汇聚地", e.transDocPlugin = {},
            e.boardLastSnapshot = {}, e
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.boardChange.tap("boardChangePlugin", this
              .onBoardChange.bind(this))
          }
        }, {
          key: "getPluginOfCurrBoard",
          value: function () {
            var e = this.app.room.currBoard.transDocSnapshot,
              t = e && e.opId || "";
            return this.transDocPlugin[t]
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              "transDoc:add": {
                value: this.addTransDoc.bind(this),
                information: {
                  args: "opt",
                  message: "添加ppt转码文档页面"
                }
              },
              "transDoc:nextAnim": {
                value: this.nextAnim.bind(this),
                information: {
                  args: "",
                  message: "播放下一个动画"
                }
              },
              "transDoc:prevAnim": {
                value: this.prevAnim.bind(this),
                information: {
                  args: "",
                  message: "跳到上一个动画"
                }
              },
              "transDoc:gotoAnim": {
                value: this.gotoAnim.bind(this),
                information: {
                  args: "",
                  message: "跳到指定位置"
                }
              }
            }
          }
        }, {
          key: "addTransDoc",
          value: function (e) {
            var t = Array.isArray(e.backupResultUrls) ? e.backupResultUrls : [];
            this.dispatch({
              type: this.type,
              action: "addTransDoc",
              boardName: e.boardName,
              displayName: e.displayName,
              pageCount: e.pageCount,
              transDocUrl: e.url,
              backupResultUrls: t,
              boundary: {
                sx: -e.width / 2,
                sy: -e.height / 2,
                w: e.width,
                h: e.height
              },
              transDocData: {
                animIndex: 0,
                animState: "start",
                animPageIndex: 0
              }
            })
          }
        }, {
          key: "waitTilReady",
          value: function (e) {
            return g(this, void 0, void 0, a.default.mark((function t() {
              var n;
              return a.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!(n = this.transDocPlugin[e.opId])) {
                      t.next = 4;
                      break
                    }
                    return t.next = 4, n.waitTilReady();
                  case 4:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "nextAnim",
          value: function () {
            var e = this.getPluginOfCurrBoard();
            if (e) return e.nextAnim()
          }
        }, {
          key: "prevAnim",
          value: function () {
            var e = this.getPluginOfCurrBoard();
            if (e) return e.prevAnim()
          }
        }, {
          key: "gotoAnim",
          value: function (e) {
            var t = this.getPluginOfCurrBoard();
            if (t) return t.gotoAnim(e)
          }
        }, {
          key: "onBoardChange",
          value: function () {
            var e = (0, r.default)(this.app.room.boards);
            for (var t in this.transDocPlugin) {
              var n = this.transDocPlugin[t]; - 1 === e.indexOf(n.boardName) ?
                this.destroyPlugin(n) : n.boardName !== this.app.room.currIndex &&
                n.hide()
            }
            var a = this.app.room.currIndex;
            this.boardLastSnapshot.hasOwnProperty(a) && this.apply(this
              .boardLastSnapshot[a], {
                fromBatch: !0
              })
          }
        }, {
          key: "destroy",
          value: function () {
            for (var e in this.transDocPlugin) this.destroyPlugin(this
              .transDocPlugin[e])
          }
        }, {
          key: "destroyPlugin",
          value: function (e) {
            e.destroy(), delete this.transDocPlugin[e.opId]
          }
        }, {
          key: "previewDoc",
          value: function (e, t) {
            var n = this.transDocPlugin[e.opId];
            n && n.previewDoc(t)
          }
        }, {
          key: "updateDocClipPath",
          value: function (e) {}
        }, {
          key: "apply",
          value: function (e, t) {
            var n = this;
            this.boardLastSnapshot[e.data.boardName] = e, clearTimeout(y), t
              .fromBatch && !this.app.isRecordPlayer ? y = setTimeout((
            function () {
                n._apply(e, t)
              }), 0) : this._apply(e, t)
          }
        }, {
          key: "_apply",
          value: function (e, t) {
            if (!this.transDocPlugin[e.opId]) {
              if (!this.app.room.boards.hasOwnProperty(e.data.boardName)) return;
              this.transDocPlugin[e.opId] = new p.default(e, this.app, this)
            }
            var n = this.transDocPlugin[e.opId],
              r = e.data,
              a = r.boundary,
              i = (0, c.getTransformedBoundary)(this.app.scale, {
                boundary: a
              }),
              A = this.app.container.h5El,
              o = A.querySelector("[id='" + e.opId + "']"),
              s = null == o;
            s && ((o = document.createElement("div")).style.position = "fixed", o
                .id = "" + e.opId, o.className = "transDoc-plugin-container", A
                .appendChild(o)), o.style.width = i.w + "px", o.style.height = i
              .h + "px", o.style.left = i.sx + "px", o.style.top = i.sy + "px",
              s && n.mountElement(e, t.fromBatch, o, r.transDocUrl), n
              .onReceiveAttributes(e.data.transDocData, {
                jump: t.fromBatch
              })
          }
        }, {
          key: "transformOp",
          value: function (e, t) {
            return (0, h.transformPropertyOverwriteOp)(e, t)
          }
        }]), t
      }(d.default);
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(21)),
      a = d(n(5)),
      i = d(n(25)),
      A = d(n(7)),
      o = d(n(0)),
      s = d(n(1)),
      u = d(n(11)),
      l = d(n(350)),
      c = n(145);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      p = function () {
        function e(t, n, r) {
          var a, i = this;
          (0, o.default)(this, e), this.summaryReady = !1, this.actorRandomParam = Date
            .now().toString().slice(7), this.handleEditableChange = function (e) {
              i.pgReader && "function" == typeof i.pgReader.updateControl && i.pgReader
                .updateControl(e)
            }, this.handlePlayerPause = function () {
              i.pgReader && i.data.animPageIndex === i.app.room.currBoard.currPage
                .getAnimPageIndex() && i.pgReader.gotoAnimation({
                  animIndex: i.data.animIndex,
                  animState: i.data.animState
                }, !0)
            }, this.handlePlayerPlaySpeed = function (e) {
              i.pgReader && i.pgReader.setAnimSpeed(e)
            }, this.opId = t.opId, this.type = r.type, this.boardName = t.data.boardName,
            this.app = n, this.operation = r, this.boundary = t.data.boundary;
          var s = this.app.room.boards[this.boardName];
          window.PgReader ? (this.pgReader = new window.PgReader({
              fontDownloadPrefix: null === (a = this.app.serviceConf) || void 0 ===
                a ? void 0 : a.pptFontUrl,
              pageCount: t.data.pageCount,
              loadVideo: !0,
              controlVideo: !this.app.isRecordPlayer,
              ntpDiff: this.app.ntpTimeDiff,
              logger: this.app.logger,
              drawPlugin: this.app,
              videoFullIcon: !0
            }), this.pgReader.on("event:pptState:change", (function (e, t) {
              if ("pageImgLoaded" === e) i.removeBlockH5Img(t);
              else if ("indexLoaded" === e) i.summaryReady = !0, i
                .onAttributeUpdated(i.data, !0);
              else if ("mediaUpdate" === e) i.onPptMediaUpdate(t);
              else if ("maxVideo" === e) {
                var n = i.boundary,
                  r = {
                    sx: n.sx + n.w * t.left,
                    sy: n.sy + n.h * t.top,
                    w: n.w * t.w,
                    h: n.h * t.h
                  };
                i.app.setCameraBound({
                  centerX: r.sx + r.w / 2,
                  centerY: r.sy + r.h / 2,
                  width: r.w,
                  height: r.h
                }, !0)
              }
            }))) : n.logger.error("[ws] pptRenderer.js is required to load ppt"), this
            .data = t.data.transDocData || {
              animIndex: 0,
              animState: "start",
              animPageIndex: 0
            }, this.operation.opsManager.hooks.pageChange.tap("PageChange", this
              .handlePageChange.bind(this)), this.operation.opsManager.hooks
            .previewWaiting.tap("PreviewWaitingPlugin", this.handlePreviewWaiting.bind(
              this));
          var u = s.payloadOfPages,
            l = !0,
            c = !1,
            d = void 0;
          try {
            for (var h, p = (0, A.default)(u); !(l = (h = p.next()).done); l = !0) {
              var f = h.value;
              if (f && f.hasOwnProperty("animPageIndex")) {
                var g = s.getPageNameByAnimPageIndex(f.animPageIndex);
                null !== g && s.pages[g].addWaitingResource("h5Image")
              }
            }
          } catch (e) {
            c = !0, d = e
          } finally {
            try {
              !l && p.return && p.return()
            } finally {
              if (c) throw d
            }
          }
          this.app.on("event:editable:change", this.handleEditableChange), this.app
            .isRecordPlayer && (this.app.on("event:player:pause", this.handlePlayerPause),
              this.app.on("event:player:playSpeed", this.handlePlayerPlaySpeed))
        }
        return (0, s.default)(e, [{
          key: "waitTilReady",
          value: function () {
            return h(this, void 0, void 0, i.default.mark((function e() {
              var t, n, r, a = this;
              return i.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    if (t = u.default.resolve(!0), this.pgReader)
                      for (n = function (e) {
                          t = t.then((function () {
                            var t = [];
                            return t.push(a.pgReader
                                .waitTilPageReady(e, {
                                  timeout: 8e3
                                })), "function" == typeof a
                              .pgReader.waitTilImgReady && t
                              .push(a.pgReader
                                .waitTilImgReady(e, {
                                  timeout: 8e3
                                })), u.default.all(t)
                          }))
                        }, r = 0; r < this.pgReader
                        .pageCount; r++) n(r);
                    return e.next = 4, t;
                  case 4:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "removeBlockH5Img",
          value: function (e) {
            if (this.pgReader) {
              var t = this.app.room.boards[this.boardName],
                n = t.getPageNameByAnimPageIndex(e);
              n && t.pages[n].removeWaitingResource("h5Image")
            }
          }
        }, {
          key: "mountElement",
          value: function (e, t, n, i) {
            var A, o, s, u = this;
            if (i = (null === (A = this.app.serviceConf) || void 0 === A ?
                void 0 : A.pptDownloadHost) ? (0, c.replaceUrlHost)(i, this.app
                .serviceConf.pptDownloadHost) : i, this.container = n, this
              .pgReader) {
              ! function () {
                if (f) return;
                f = !0;
                var e = document.createElement("style");
                e.type = "text/css";
                e.innerHTML =
                  "\n@keyframes __newb__rotate {\nfrom {transform: rotate(0);}\nto {transform: rotate(360deg);}\n}\n    ",
                  document.getElementsByTagName("head")[0].appendChild(e)
              }();
              var d = document.createElement("img");
              d.src = l.default, d.className = "__newb__ppt_icon_loading", this
                .container.appendChild(d), (0, a.default)(d.style, {
                  display: "none",
                  position: "absolute",
                  top: "50%",
                  left: "50%",
                  bottom: "0",
                  right: "0",
                  width: "55px",
                  height: "55px",
                  animation: "2s ease-in-out infinite __newb__rotate",
                  transform: "translate(-50%, -50%)",
                  zIndex: "1000"
                });
              var h = Array.isArray(e.data.backupResultUrls) ? e.data
                .backupResultUrls : [];
              h = h.map((function (e) {
                  var t;
                  return (null === (t = u.app.serviceConf) || void 0 === t ?
                    void 0 : t.pptDownloadHost) ? (0, c.replaceUrlHost)(e, u
                    .app.serviceConf.pptDownloadHost) : e
                })), this.app.logger.log("whiteboardSDK--\x3e mountPpt", i, (0, r
                  .default)(h)), this.pgReader.open(i, {
                  mode: "lazy",
                  backupResultUrls: h
                }).then((function () {
                  u.pgReader.updateContainer(n);
                  var r = Date.now() + u.app.ntpTimeDiff - e.time;
                  e.uid === u.app.account.toString() && r < 1e3 && !t && 0 ===
                    u.data.animPageIndex && "start" === u.data.animState &&
                    0 === u.data.animIndex && u.pgReader.waitTilPageReady(0)
                    .then((function () {
                      var e = u.pgReader.getFirstAnimationPosition(0);
                      0 === e.animIndex && "start" === e.animState || u
                        .putAttributes((0, a.default)((0, a.default)({},
                          e), {
                          animPageIndex: 0,
                          jump: !1
                        }))
                    }))
                })), this.app.isRecordPlayer && (null === (o = this.app.player) ||
                  void 0 === o ? void 0 : o.playSpeed) && this.pgReader
                .setAnimSpeed(null === (s = this.app.player) || void 0 === s ?
                  void 0 : s.playSpeed)
            }
          }
        }, {
          key: "destroy",
          value: function () {
            var e;
            this.container && (null === (e = this.container.parentNode) ||
                void 0 === e || e.removeChild(this.container)), this.app
              .isRecordPlayer && (this.app.off("event:player:pause", this
                .handlePlayerPause), this.app.off("event:player:playSpeed", this
                .handlePlayerPlaySpeed)), this.pgReader && this.pgReader.destroy()
          }
        }, {
          key: "hide",
          value: function () {
            this.container && (this.container.style.visibility = "hidden", this
              .pgReader && "function" == typeof this.pgReader.hide && this
              .pgReader.hide())
          }
        }, {
          key: "show",
          value: function () {
            this.container && (this.container.style.visibility = "visible", this
              .pgReader && "function" == typeof this.pgReader.show && this
              .pgReader.show())
          }
        }, {
          key: "hideLoading",
          value: function () {
            for (var e, t = (null === (e = this.container) || void 0 === e ?
                  void 0 : e.getElementsByClassName("__newb__ppt_icon_loading")
                  ) || [], n = 0; n < t.length; n++) t[n].style.display = "none"
          }
        }, {
          key: "showLoading",
          value: function () {
            for (var e, t = (null === (e = this.container) || void 0 === e ?
                  void 0 : e.getElementsByClassName("__newb__ppt_icon_loading")
                  ) || [], n = 0; n < t.length; n++) t[n].style.display = "block"
          }
        }, {
          key: "gotoNextPage",
          value: function () {
            var e = this,
              t = this.app.getPageInfos(),
              n = t.activeIndex;
            if (n < t.pageNames.length - 1) {
              var r = this.app.room.currBoard.getPageByIndex(n + 1)
                .getAnimPageIndex();
              null === r ? this.app.gotoPage(n + 1) : this.pgReader && (this
                .showLoading(), this.pgReader.waitTilPageReady(r).then((
                  function () {
                    var t = e.pgReader.getFirstAnimationPosition(r);
                    e.putAttributes((0, a.default)((0, a.default)({
                      jump: !1,
                      animPageIndex: r
                    }, t), {
                      updatePage: !0
                    })), e.hideLoading()
                  })).catch((function () {
                  e.putAttributes({
                    jump: !0,
                    animPageIndex: r,
                    animIndex: 0,
                    animState: "start",
                    updatePage: !0
                  }), e.hideLoading()
                })))
            }
          }
        }, {
          key: "gotoPrevPage",
          value: function () {
            var e = this,
              t = this.app.getPageInfos().activeIndex;
            if (t > 0) {
              var n = this.app.room.currBoard.getPageByIndex(t - 1)
                .getAnimPageIndex();
              null === n ? this.app.gotoPage(t - 1) : this.pgReader && (this
                .showLoading(), this.pgReader.waitTilPageReady(n).then((
                  function () {
                    var t = e.pgReader.getFirstAnimationPosition(n);
                    e.putAttributes((0, a.default)((0, a.default)({
                      jump: !1,
                      animPageIndex: n
                    }, t), {
                      updatePage: !0
                    })), e.hideLoading()
                  })).catch((function () {
                  e.putAttributes({
                    jump: !0,
                    animPageIndex: n,
                    animIndex: 0,
                    animState: "start",
                    updatePage: !0
                  }), e.hideLoading()
                })))
            }
          }
        }, {
          key: "gotoAnim",
          value: function (e) {
            var t = this;
            if (this.pgReader) {
              if (null === this.app.room.currBoard.getPageNameByAnimPageIndex(e
                  .pageIndex)) return this.app.logger.error(
                "[ws]: ppt page index: " + e.pageIndex + " is not found");
              this.showLoading(), this.pgReader.waitTilPageReady(e.pageIndex)
                .then((function () {
                  t.putAttributes({
                    jump: !0,
                    animIndex: e.animIndex,
                    animState: e.animState,
                    animPageIndex: e.pageIndex,
                    updatePage: !1
                  }), t.hideLoading()
                })).catch((function () {
                  t.hideLoading()
                }))
            }
          }
        }, {
          key: "nextAnim",
          value: function () {
            if (this.pgReader) {
              var e = void 0 !== this.data.animPageIndex && null !== this.data
                .animPageIndex,
                t = this.pgReader.getNextAnimationPosition(),
                n = this.app.room.currBoard;
              e && this.data.animPageIndex === n.currPage.getAnimPageIndex() &&
                t ? this.putAttributes((0, a.default)((0, a.default)({}, t), {
                  animPageIndex: this.app.room.currBoard.currPage
                    .getAnimPageIndex(),
                  jump: !1
                })) : this.gotoNextPage()
            }
          }
        }, {
          key: "prevAnim",
          value: function () {
            if (this.pgReader) {
              var e = void 0 !== this.data.animPageIndex && null !== this.data
                .animPageIndex,
                t = this.pgReader.getPrevAnimationPosition();
              e && t && this.data.animPageIndex === this.app.room.currBoard
                .currPage.getAnimPageIndex() ? this.putAttributes((0, a.default)((
                  0, a.default)({}, t), {
                  animPageIndex: this.app.room.currBoard.currPage
                    .getAnimPageIndex(),
                  jump: !0
                })) : this.gotoPrevPage()
            }
          }
        }, {
          key: "handlePreviewWaiting",
          value: function (e) {
            var t = this.app.room.currBoard.getPageByIndex(e);
            if (t) {
              var n = t.getAnimPageIndex();
              n && this.pgReader && this.boardName === this.app.room.currBoard
                .boardName && this.pgReader.waitTilPageReady(n)
            }
          }
        }, {
          key: "handlePageChange",
          value: function (e) {
            var t = this;
            if (this.app.isRecordPlayer || e.uid !== this.app.account ||
              "transDoc" === e.data.type) {
              if (this.app.isRecordPlayer || "transDoc" === e.data.type) {
                if (this.app.isRecordPlayer && this.boardName === this.app.room
                  .currBoard.boardName) {
                  var n = this.app.room.currBoard.currPage.getAnimPageIndex();
                  this.onReceiveAttributes({
                    animIndex: 0,
                    animState: "start",
                    animPageIndex: n,
                    jump: !0,
                    actor: e.uid
                  }, {
                    jump: !0
                  })
                }
              } else if (this.boardName === this.app.room.currBoard.boardName) {
                var r = this.app.room.currBoard.currPage.getAnimPageIndex();
                this.onReceiveAttributes({
                  animIndex: 0,
                  animState: "start",
                  animPageIndex: r,
                  jump: !0,
                  actor: e.uid
                }, {
                  jump: !0
                })
              }
            } else {
              var a = Date.now() + this.app.ntpTimeDiff - e.time;
              if (this.pgReader && this.boardName === this.app.room.currBoard
                .boardName && a < 300) {
                var i = this.app.room.currBoard.currPage.getAnimPageIndex();
                i || 0 === i ? (this.showLoading(), this.pgReader
                  .waitTilPageReady(i).then((function () {
                    var e = t.pgReader.getFirstAnimationPosition(i);
                    t.putAttributes({
                      jump: !1,
                      animIndex: e.animIndex,
                      animState: e.animState,
                      animPageIndex: i,
                      updatePage: !0
                    }), t.hideLoading()
                  })).catch((function () {
                    t.hideLoading()
                  }))) : this.putAttributes({
                  animIndex: 0,
                  animState: "start",
                  animPageIndex: i,
                  jump: !0,
                  updatePage: !0
                })
              }
            }
          }
        }, {
          key: "onPptMediaUpdate",
          value: function (e) {
            ("action" === e.cause || "anim" === e.cause && this.data.actor ===
              this.app.account + "_" + this.actorRandomParam) && this.operation
              .dispatch({
                boardName: this.boardName,
                dependOn: this.opId,
                skipUndo: !0,
                type: this.type,
                transDocData: (0, a.default)((0, a.default)({}, this.data), {
                  v: e.videos
                })
              })
          }
        }, {
          key: "putAttributes",
          value: function (e) {
            this.operation.dispatch({
              boardName: this.boardName,
              dependOn: this.opId,
              skipUndo: !0,
              type: this.type,
              transDocData: (0, a.default)((0, a.default)((0, a.default)((0, a
                .default)({}, this.data), e), {
                actor: this.app.account + "_" + this.actorRandomParam
              }), e.updatePage ? {
                v: {}
              } : {})
            })
          }
        }, {
          key: "onReceiveAttributes",
          value: function (e, t) {
            return h(this, void 0, void 0, i.default.mark((function n() {
              var r;
              return i.default.wrap((function (n) {
                for (;;) switch (n.prev = n.next) {
                  case 0:
                    r = (0, a.default)({}, this.data, e || {
                        animState: "start",
                        animIndex: 0,
                        animPageIndex: 0
                      }), e.jump ? this.onAttributeUpdated(r, !
                      0) : this.app.isRecordPlayer ? this
                      .onAttributeUpdated(r, !1) : this
                      .onAttributeUpdated(r, t.jump), this.data =
                      r;
                  case 3:
                  case "end":
                    return n.stop()
                }
              }), n, this)
            })))
          }
        }, {
          key: "onAttributeUpdated",
          value: function (e, t) {
            var n = this;
            clearTimeout(this.animTimer), this.summaryReady && (this.animTimer =
              setTimeout((function () {
                var r = n.app.room.currBoard.currPage.getAnimPageIndex();
                null !== r && r === e.animPageIndex ? (n.show(), n
                  .pgReader && n.pgReader.currPageIndex !== e
                  .animPageIndex && (n.showLoading(), n.pgReader
                    .waitTilPageReady(e.animPageIndex).then((function () {
                      n.pgReader.gotoPage(e.animPageIndex),
                        "function" == typeof n.pgReader
                        .setVideoState && n.pgReader.setVideoState(e
                          .v), n.hideLoading()
                    })).catch((function () {
                      n.pgReader.gotoPage(e.animPageIndex),
                        "function" == typeof n.pgReader
                        .setVideoState && n.pgReader.setVideoState(e
                          .v), n.hideLoading()
                    }))), n.pgReader && (n.showLoading(), n.app.emit(
                      "event:appState:change", "animation", {
                        pageIndex: e.animPageIndex,
                        animIndex: e.animIndex,
                        animState: e.animState
                      }), n.pgReader.waitTilPageReady(e.animPageIndex)
                    .then((function () {
                      n.pgReader.gotoAnimation({
                          animIndex: e.animIndex,
                          animState: e.animState
                        }, t), "function" == typeof n.pgReader
                        .setVideoState && n.pgReader.setVideoState(e
                          .v), n.hideLoading()
                    })).catch((function () {
                      n.pgReader.gotoAnimation({
                          animIndex: e.animIndex,
                          animState: e.animState
                        }, t), "function" == typeof n.pgReader
                        .setVideoState && n.pgReader.setVideoState(e
                          .v), n.hideLoading()
                    })))) : n.hide()
              }), 20))
          }
        }, {
          key: "previewDoc",
          value: function (e) {
            if (this.pgReader) {
              var t = e.boundary ? e.boundary : this.app.camera
                .getContainerWorldRect(),
                n = e.ctx.canvas.width,
                r = e.ctx.canvas.height,
                a = this.boundary.w;
              if ("fitDoc" === this.app.appConfig.previewMode && !e.stream && !e
                .toDataUrl) return this.pgReader.paintOnCanvas({
                ctx: e.ctx,
                pageIndex: e.animPageIndex,
                keepAnimState: e.keepAnimState
              });
              var i, A = [1, 0, 0, 1, 0, 0];
              if (n / r > t.width / t.height) {
                var o = r / n * a,
                  s = t.width / t.height * o,
                  u = s / a;
                A = [u, 0, 0, u, (a - s) / 2, 0]
              } else {
                A = [1, 0, 0, 1, 0, (r / n * a - t.height / t.width * a) / 2]
              }
              var l = a / t.width;
              i = [l, 0, 0, l, (this.boundary.sx - t.centerX + t.width / 2) * l, (
                  this.boundary.sy - t.centerY + t.height / 2) * l], this.pgReader
                .paintOnCanvas({
                  ctx: e.ctx,
                  pageIndex: e.animPageIndex,
                  keepAnimState: e.keepAnimState,
                  transforms: [A[0] * i[0], 0, 0, A[3] * i[3], A[4] + A[0] * i[
                    4], A[5] + A[3] * i[5]]
                })
            }
          }
        }]), e
      }(),
      f = !1;
    t.default = p
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjM1ODM4Mzk1MTM1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MTAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNDgwIDk2YTMyIDMyIDAgMCAxIDY0IDB2MTkyYTMyIDMyIDAgMCAxLTY0IDBWOTZ6IG0yNTAuNjI0IDYwLjY0YTMyIDMyIDAgMSAxIDUxLjc3NiAzNy42MzJsLTExMi44MzIgMTU1LjMyOGEzMiAzMiAwIDAgMS01MS44MDgtMzcuNjMybDExMi44NjQtMTU1LjMyOHogbTE2Ny4xMzYgMTk2LjM4NGEzMiAzMiAwIDEgMSAxOS43NzYgNjAuODY0bC0xODIuNjI0IDU5LjMyOGEzMiAzMiAwIDAgMS0xOS43NzYtNjAuODY0bDE4Mi42MjQtNTkuMzI4eiBtMTkuNzc2IDI1Ny4wODhhMzIgMzIgMCAxIDEtMTkuNzc2IDYwLjg2NGwtMTgyLjYyNC01OS4zMjhhMzIgMzIgMCAwIDEgMTkuNzc2LTYwLjg2NGwxODIuNjI0IDU5LjMyOHpNNzgyLjQgODI5Ljc2YTMyIDMyIDAgMCAxLTUxLjc3NiAzNy42MzJsLTExMi44NjQtMTU1LjMyOGEzMiAzMiAwIDEgMSA1MS44MDgtMzcuNjMybDExMi44MzIgMTU1LjMyOHpNNTQ0IDkyOGEzMiAzMiAwIDAgMS02NCAwdi0xOTJhMzIgMzIgMCAwIDEgNjQgMHYxOTJ6IG0tMjUwLjYyNC02MC42NGEzMiAzMiAwIDAgMS01MS43NzYtMzcuNjMybDExMi44MzItMTU1LjMyOGEzMiAzMiAwIDAgMSA1MS44MDggMzcuNjMybC0xMTIuODY0IDE1NS4zMjh6IG0tMTY3LjEzNi0xOTYuMzg0YTMyIDMyIDAgMSAxLTE5Ljc3Ni02MC44NjRsMTgyLjYyNC01OS4zMjhhMzIgMzIgMCAwIDEgMTkuNzc2IDYwLjg2NGwtMTgyLjYyNCA1OS4zMjh6IG0tMTkuNzc2LTI1Ny4wODhhMzIgMzIgMCAwIDEgMTkuNzc2LTYwLjg2NGwxODIuNjI0IDU5LjMyOGEzMiAzMiAwIDEgMS0xOS43NzYgNjAuODY0bC0xODIuNjI0LTU5LjMyOHpNMjQxLjYgMTk0LjI0YTMyIDMyIDAgMSAxIDUxLjc3Ni0zNy42MzJsMTEyLjg2NCAxNTUuMzI4YTMyIDMyIDAgMSAxLTUxLjgwOCAzNy42MzJMMjQxLjYgMTk0LjI0eiIgcC1pZD0iMjkxMSIgZmlsbD0iIzJjMmMyYyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(5)),
      a = p(n(20)),
      i = p(n(2)),
      A = p(n(0)),
      o = p(n(1)),
      s = p(n(3)),
      u = p(n(4)),
      l = n(15),
      c = p(n(9)),
      d = n(19),
      h = p(n(352));

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = void 0,
      g = function (e) {
        function t() {
          (0, A.default)(this, t);
          var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
            arguments));
          return e.type = "pagePlugin", e.description = "外部页面插件", e.plugins = {}, e
            .DefMap = {}, e
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.mousedown.tap("MousedownPlugin", this
                .handleMouseDown.bind(this)), this.opsManager.hooks.click.tap(
                "ClickPlugin", this.handleMouseUp.bind(this)), this.opsManager
              .hooks.mouseup.tap("MouseupPlugin", this.handleMouseUp.bind(this)),
              this.opsManager.hooks.pageChange.tap("pageChangePlugin", this
                .onPageChange.bind(this)), this.opsManager.hooks.opChange.tap(
                "toolChangePlugin", this.handleToolChange.bind(this)), this
              .opsManager.hooks.cleanNonCanvasEle.tap("cleanNonCanvasElePlugin",
                this.handleCleanEle.bind(this))
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              "pagePlugin:insert": {
                value: this.addPlugin.bind(this),
                information: {
                  args: "opt",
                  message: "添加ppt转码文档页面"
                }
              }
            }
          }
        }, {
          key: "definePlugin",
          value: function (e) {
            this.DefMap[e.pluginType] = e.PluginClass
          }
        }, {
          key: "addPlugin",
          value: function (e) {
            var t = this.app.room.currBoard,
              n = this.opsManager.currPage;
            if (e && void 0 !== e.boardName && void 0 !== e.pageName) {
              var r = this.app.room.getPage(e.boardName, e.pageName);
              r && (n = r)
            } else if (e && void 0 !== e.pageName) {
              var a = this.app.room.getPage(t.boardName, e.pageName);
              a && (n = a)
            }
            n ? this.dispatchFromPage({
              type: this.type,
              pluginType: e.pluginType,
              attributes: e.attributes,
              boundary: {
                sx: e.cameraBound.centerX - e.cameraBound.width / 2,
                sy: e.cameraBound.centerY - e.cameraBound.height / 2,
                w: e.cameraBound.width,
                h: e.cameraBound.height
              }
            }, n) : this.app.logger.error(
              "[ws] PagePluginOp.addPlugin: board: " + e.boardName +
              ", page: " + e.pageName + " is not found")
          }
        }, {
          key: "handleCleanEle",
          value: function (e) {
            for (var t in this.plugins) {
              var n = this.plugins[t];
              n.boardName === e.boardName && n.pageName === e.pageIndex && this
                .destroyPlugin(n)
            }
          }
        }, {
          key: "handleMouseDown",
          value: function () {
            this.lastFocusPlugin && this.lastFocusPlugin.setClickable(!1)
          }
        }, {
          key: "handleMouseUp",
          value: function () {
            var e = this;
            clearTimeout(this.timer), this.timer = setTimeout((function () {
              e.checkPluginClickable()
            }), 0), this.checkPluginClickable()
          }
        }, {
          key: "handleToolChange",
          value: function (e) {
            "select" === e && this.lastFocusPlugin ? this.lastFocusPlugin
              .setClickable(!0) : this.lastFocusPlugin && this.lastFocusPlugin
              .setClickable(!1)
          }
        }, {
          key: "checkPluginClickable",
          value: function () {
            var e = this.opsManager.selectedOpIds,
              t = void 0;
            1 === e.length && (t = this.plugins[e[0]]), this.lastFocusPlugin !==
              t && (this.lastFocusPlugin && this.lastFocusPlugin.setClickable(!1),
                t && t.setClickable(!0), this.lastFocusPlugin = t)
          }
        }, {
          key: "onPageChange",
          value: function () {
            var e = this;
            this.lastFocusPlugin && (this.lastFocusPlugin.setClickable(!1), this
              .lastFocusPlugin = void 0), clearTimeout(f), f = setTimeout((
              function () {
                for (var t = (0, a.default)(e.app.room.boards), n = e.app.room
                    .currBoard.pageNames, r = e.app.room.currIndex, i = e.app
                    .room.currBoard.currIndex.toString(), A = (0, a.default)(e
                      .plugins), o = A.length - 1; o >= 0; o--) {
                  var s = A[o],
                    u = e.plugins[s];
                  if (-1 !== t.indexOf(u.boardName)) {
                    if (r !== u.boardName && u.visible) u.hide();
                    else if (r === u.boardName) {
                      if (-1 === n.indexOf(i)) {
                        e.destroyPlugin(e.plugins[s]);
                        continue
                      }
                      i !== u.pageName || u.visible ? i !== u.pageName && u
                        .visible && u.hide() : u.show()
                    }
                  } else e.destroyPlugin(e.plugins[s])
                }
              }), 0)
          }
        }, {
          key: "destroy",
          value: function () {
            for (var e in this.plugins) this.destroyPlugin(this.plugins[e])
          }
        }, {
          key: "destroyPlugin",
          value: function (e) {
            e.destroy(), delete this.plugins[e.opId]
          }
        }, {
          key: "updateDocClipPath",
          value: function () {
            for (var e = this.app.room.currIndex, t = (0, a.default)(this
                .plugins), n = t.length - 1; n >= 0; n--) {
              var r = t[n],
                i = this.plugins[r];
              i.boardName === e && (0, d.updateDocClipPath)(i.boundary, this.app
                .camera, i.container)
            }
          }
        }, {
          key: "hide",
          value: function (e) {
            var t = this.plugins[e.opId];
            t && this.destroyPlugin(t)
          }
        }, {
          key: "draw",
          value: function (e) {
            if (!this.plugins[e.opId]) {
              var t = this.DefMap[e.data.pluginType];
              if (!t) return void this.logger.error(
                "[ws] PagePluginOp: plugin type " + e.data.pluginType +
                " is not found");
              this.plugins[e.opId] = new h.default({
                snapshot: e,
                app: this.app,
                pagePluginOp: this,
                HandlerConstructor: t
              })
            }
            var n = this.plugins[e.opId],
              a = e.data,
              i = (0, l.getTransformedBoundary)(this.app.scale, a),
              A = n.container;
            (0, r.default)(A.style, {
              transformOrigin: "0 0",
              left: i.sx + "px",
              top: i.sy + "px",
              width: i.w * this.app.scale + "px",
              height: i.h * this.app.scale + "px",
              transform: "scale(" + 1 / this.app.scale + ")"
            }), (0, d.updateDocClipPath)({
              sx: i.sx,
              sy: i.sy,
              w: i.w,
              h: i.h
            }, this.app.camera, A, 1 / this.app.scale), n.receiveAttributes(e.data
              .transDocData)
          }
        }, {
          key: "transformOp",
          value: function (e, t) {
            return (0, d.transformPropertyOverwriteOp)(e, t)
          }
        }]), t
      }(c.default);
    t.default = g
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = i(n(0)),
      a = i(n(1));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var A = function () {
      function e(t) {
        (0, r.default)(this, e), this.visible = !1;
        var n = t.snapshot,
          a = t.app,
          i = t.pagePluginOp,
          A = t.HandlerConstructor;
        this.handler = new A, this.opId = n.opId, this.boardName = n.board, this
          .pageName = n.page.toString(), this.app = a, this.op = i, this.boundary = n
          .data.boundary, this.container = document.createElement("div"), this.container
          .style.position = "fixed", this.container.id = "" + n.opId, this.container
          .className = "plugin-container", this.app.container.h5El.appendChild(this
            .container), this.mountElement({
            snapshot: n
          })
      }
      return (0, a.default)(e, [{
        key: "setClickable",
        value: function (e) {
          this.container && e !== this.clickable && (this.clickable = e, this
            .container.style.pointerEvents = e ? "auto" : "unset")
        }
      }, {
        key: "mountElement",
        value: function (e) {
          var t = e.snapshot;
          this.attributes = t.data.attributes, this.visible = !0, this.handler
            .onMount && this.handler.onMount({
              container: this.container,
              attributes: this.attributes,
              recordPlayer: this.app.isRecordPlayer
            })
        }
      }, {
        key: "destroy",
        value: function () {
          var e;
          this.visible = !1, this.container && (null === (e = this.container
              .parentNode) || void 0 === e || e.removeChild(this.container)),
            this.handler.onDestroy && this.handler.onDestroy({
              container: this.container,
              attributes: this.attributes,
              recordPlayer: this.app.isRecordPlayer
            })
        }
      }, {
        key: "hide",
        value: function () {
          this.visible = !1, this.container && (this.container.style
              .visibility = "hidden"), this.handler.onHide && this.handler
            .onHide({
              container: this.container,
              attributes: this.attributes,
              recordPlayer: this.app.isRecordPlayer
            })
        }
      }, {
        key: "show",
        value: function () {
          this.visible = !0, this.container && (this.container.style
              .visibility = "visible"), this.handler.onShow && this.handler
            .onShow({
              attributes: this.attributes,
              container: this.container,
              recordPlayer: this.app.isRecordPlayer
            })
        }
      }, {
        key: "receiveAttributes",
        value: function (e) {
          var t = this.attributes;
          this.handler.onReceiveAttributes && this.handler.onReceiveAttributes({
            container: this.container,
            attributes: e,
            prevAttribtues: t,
            recordPlayer: this.app.isRecordPlayer
          })
        }
      }, {
        key: "_putAttributes",
        value: function (e) {
          this.op.dispatch({
            reuseOpType: "edit-" + this.opId,
            dependOn: this.opId,
            skipUndo: !0,
            type: this.op.type,
            attributes: e
          })
        }
      }, {
        key: "putAttributes",
        value: function (e) {
          this._putAttributes(e)
        }
      }]), e
    }();
    t.default = A
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = I(n(7)),
      a = I(n(5)),
      i = I(n(2)),
      A = I(n(0)),
      o = I(n(1)),
      s = I(n(3)),
      u = I(n(26)),
      l = I(n(4)),
      c = I(n(74)),
      d = n(29),
      h = I(n(60)),
      p = n(15),
      f = n(354),
      g = I(n(22)),
      y = n(138),
      v = n(53),
      m = n(28),
      w = n(66),
      B = n(97),
      M = n(141),
      C = n(19);

    function I(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var x = (0, v.deviceOS)(),
      b = function (e) {
        function t() {
          (0, A.default)(this, t);
          var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
            arguments));
          return e.type = "shape", e.shouldSaniteEp = !0, e.description =
            "绘制图形。\n首先使用op:shape:activate设置画布为矩形模式", e.defType = "rect", e
            .currTextAttr = {
              value: ""
            }, e.currOpId = void 0, e.lastDragMx = 0, e.lastDragMy = 0, e.lastOpId = "", e
            .auxLock = {
              pos: [0, 0],
              lockX: 0,
              lockY: 0,
              unlockXCount: 0,
              unlockYCount: 0,
              shiftX: 0,
              shiftY: 0,
              lastMoves: [
                [0, 0],
                [0, 0],
                [0, 0]
              ],
              lastCx: 0,
              lastCy: 0
            }, e.enterTextEditMode = function (t) {
              e.currOpId = t.opId, e.currTextAttr = (0, a.default)({}, t.data.text ||
                {}) || {
                  value: ""
                }, e.currEditor = (0, f.setupTextEditor)(e.app, (0, a.default)((0, a
                  .default)({}, t.data), {
                  maxTxtLen: w.MAX_SHAPE_TXT_LEN
                }), {
                  container: e.app.container.domEl,
                  onchange: function (t) {
                    e.handleTextChange(t, !0)
                  },
                  onblur: function (t, n) {
                    n && e.handleTextChange(t, !1), e.currEditor = null, e
                      .currTextAttr = {
                        value: ""
                      }, e.app.room.refresh()
                  }
                }), e.app.emit("event:textEditor:show")
            }, e.handleTextChange = function (t, n) {
              e.currTextAttr || (e.currTextAttr = {
                value: ""
              }), e.currTextAttr.value = t;
              var r = e.opsManager.opMap.modify;
              "string" == typeof e.currOpId && e.dispatch(r.getSnapshot([e.currOpId], [{
                k: "text",
                v: (0, a.default)({}, e.currTextAttr)
              }], n))
            }, e.getSnapshot = function (t) {
              var n = g.default.shapeDef;
              return {
                type: e.type,
                boundary: e.getBoundaryRectOfLine(),
                lineWidth: n.lineWidth,
                inProgress: t,
                stroke: n.stroke,
                fill: n.fill,
                dash: m.IDashType.Solid,
                text: {
                  value: "",
                  stroke: n.text.stroke,
                  fontSize: n.text.fontSize,
                  fill: n.text.fill,
                  textAlign: n.text.textAlign,
                  verticalAlign: n.text.verticalAlign,
                  fontFamily: n.text.fontFamily
                },
                shape: e.defType
              }
            }, e
        }
        return (0, l.default)(t, e), (0, o.default)(t, [{
          key: "registerHooks",
          value: function () {
            (0, u.default)(t.prototype.__proto__ || (0, i.default)(t.prototype),
              "registerHooks", this).call(this), this.opsManager.hooks.opAdd.tap(
                "OpAdd", this.onOpAdded.bind(this)), this.opsManager.hooks.click
              .tap("MouseClick", this.MouseClickHook.bind(this))
          }
        }, {
          key: "eventsToListen",
          value: function () {
            return {
              "shape:dragShapeIn": {
                value: this.dragShapeIn.bind(this),
                information: {
                  args: "ids: Array<string>, attrs:{key:string, value: any}[], inProgress: boolean",
                  message: "更改选中元素的属性"
                }
              }
            }
          }
        }, {
          key: "dragShapeIn",
          value: function (e, t, n, r) {
            var a = g.default.shapeDef,
              i = void 0,
              A = void 0;
            if (r || 0 === this.lastDragMx && 0 === this.lastDragMy) {
              var o = t - this.app.container.left,
                s = n - this.app.container.top,
                u = this.app.camera.convertToPointInWorld(o, s);
              this.lastDragMx = u[0], this.lastDragMy = u[1]
            }
            i = this.lastDragMx, A = this.lastDragMy;
            var l = (0, M.getMoveInAuxiliaryLine)(this.app, i, A, t, n, this
              .auxLock, "move");
            if (!l && r) return !0;
            l && (i = l.mx, A = l.my);
            var c = {
              type: this.type,
              boundary: {
                sx: i - 75,
                sy: A - 75,
                w: 150,
                h: 150
              },
              lineWidth: a.lineWidth,
              inProgress: r,
              stroke: a.stroke,
              fill: a.fill,
              dash: m.IDashType.Solid,
              text: {
                value: "",
                stroke: a.text.stroke,
                fontSize: a.text.fontSize,
                fontFamily: a.text.fontFamily,
                fill: a.text.fill,
                textAlign: a.text.textAlign,
                verticalAlign: a.text.verticalAlign
              },
              shape: e
            };
            if (this.lastOpId) {
              var d = this.opsManager.auxiliaryOp.calcAuxiliaryLine({
                bound: {
                  sx: i - 75,
                  sy: A - 75,
                  w: 150,
                  h: 150
                },
                ids: [this.lastOpId],
                action: "move"
              });
              (0, M.updateAuxLock)(this.auxLock, i, A, d)
            }
            this.lastOpId = this.dispatch(c), r || (this.opsManager.auxiliaryOp
              .clean(), this.app.setTool("select"), this.lastDragMx = 0, this
              .lastDragMy = 0, this.lastOpId = "")
          }
        }, {
          key: "dispatchClickSnap",
          value: function (e, t, n) {
            return this.points = [
                [t - 75, n - 75],
                [t + 75, n + 75]
              ], this.dispatch(this.getSnapshot(!1)), this.points = [], this
              .opsManager.setCurrOp("select"), !0
          }
        }, {
          key: "handleMouseUp",
          value: function (e, n, r, a, A, o) {
            (0, u.default)(t.prototype.__proto__ || (0, i.default)(t.prototype),
              "handleMouseUp", this).call(this, e, n, r, a, A, o), this.auxLock
              .shiftX = 0, this.auxLock.shiftY = 0, this.auxLock.lockX = 0, this
              .auxLock.lockY = 0, this.auxLock.lastCx = 0, this.auxLock.lastCy =
              0, this.auxLock.lastMoves = [
                [0, 0],
                [0, 0],
                [0, 0]
              ], this.points = [], this.opsManager.setCurrOp("select")
          }
        }, {
          key: "onOpAdded",
          value: function (e) {
            if ("shape" === e.data.type && e.uid === this.app.account && !e.data
              .inProgress) {
              var t = e.time,
                n = Date.now() + this.app.ntpTimeDiff;
              Math.abs(n - t) < 100 && this.currOpId !== e.opId && (this.dispatch(
                  this.opsManager.selectOp.getSnapshot([e.opId])), x
                .isDesktop && this.enterTextEditMode(e))
            }
          }
        }, {
          key: "MouseClickHook",
          value: function (e, t, n) {
            var r = this;
            if (this.opsManager.currOp instanceof h.default) {
              var a = this.opsManager.selectedOpIds.filter((function (e) {
                return r.drawOpsOfPage.hasOwnProperty(e)
              }));
              if (1 === a.length) {
                var i = this.drawOpsOfPage[a[0]];
                if ("shape" === i.data.type && !(0, v.isIosDevice)()) {
                  var A = (0, p.getTransformedVertices)(i.data);
                  if ((0, p.pointInVertices)(A, [t, n])) return this.currOpId ===
                    i.opId && this.currEditor || (this.enterTextEditMode(i),
                      this.app.room.refresh()), !0
                }
              }
            }
          }
        }, {
          key: "isTxtContained",
          value: function (e) {
            var t = e.data;
            if (this.app.ShapeDesc[t.shape] && t.text) {
              var n = (0, B.getEditorPos)(this.app, t),
                r = n.w,
                a = n.h,
                i = t.text.fontSize || 32;
              return a > (0, y.getTextLines)({
                ctx: this.app.container.ctx,
                txt: t.text.value || "",
                fontSize: i,
                w: r,
                fontFamily: t.text.fontFamily
              }).length * i * 1.25 - .28 * i
            }
            return !0
          }
        }, {
          key: "setSubType",
          value: function (e) {
            this.defType = e
          }
        }, {
          key: "draw",
          value: function (e, t) {
            var n, r = e.data;
            r.shape && this.app.ShapeDesc.hasOwnProperty(r.shape) ? (this
              .drawPath(t, r.shape, r), this.strokeOrFill(t, {
                stroke: r.stroke,
                fill: r.fill,
                lineWidth: r.lineWidth,
                opacity: r.opacity,
                isShape: !0,
                dash: r.dash
              }), (null === (n = e.data.text) || void 0 === n ? void 0 : n
                .value) && (this.currOpId === e.opId && this.currEditor ? (this
                  .currTextAttr = e.data.text || {
                    value: ""
                  }, (0, f.updateEditor)(this.app, this.currEditor, r)) : r
                .text && (0, y.drawTextOnCanvas)(this.app, t, r, this.app.scale)
                )) : console.warn("[wb], 未定义类型: " + r.shape)
          }
        }, {
          key: "drawPath",
          value: function (e, t, n) {
            var a = [n.boundary.sx, n.boundary.sy],
              i = [n.boundary.sx + n.boundary.w, n.boundary.sy + n.boundary.h],
              A = n.mat,
              o = this.app.ShapeDesc[t].path;
            e.beginPath();
            var s = !0,
              u = this.app.scale,
              l = (0, p.getTransformedSize)(n);
            o = "function" == typeof o ? o(l.w, l.h) : o;
            var c = !0,
              h = !1,
              f = void 0;
            try {
              for (var g, y = (0, r.default)(o); !(c = (g = y.next()).done); c = !
                0) {
                var v = g.value,
                  m = v.pos.map((function (e) {
                    var t = k(a, i, e);
                    return t = (0, d.getTransPoint)(t, A), (0, C.padPt)(t, u)
                  }));
                s && (e.moveTo(m[0][0], m[0][1]), s = !1), "l" === v.t ? e.lineTo(
                  m[1][0], m[1][1]) : "b" === v.t && (4 === m.length ? e
                  .bezierCurveTo(m[1][0], m[1][1], m[2][0], m[2][1], m[3][0], m[
                    3][1]) : 3 === m.length && e.quadraticCurveTo(m[1][0], m[1][
                    1
                  ], m[2][0], m[2][1]))
              }
            } catch (e) {
              h = !0, f = e
            } finally {
              try {
                !c && y.return && y.return()
              } finally {
                if (h) throw f
              }
            }
            e.closePath()
          }
        }]), t
      }(c.default);

    function k(e, t, n) {
      return [e[0] * (1 - n[0]) + t[0] * n[0], e[1] * (1 - n[1]) + t[1] * n[1]]
    }
    t.default = b
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.updateEditor = t.setupTextEditor = void 0;
    var r, a = n(5),
      i = (r = a) && r.__esModule ? r : {
        default: r
      },
      A = n(53),
      o = n(22),
      s = n(97);
    var u = 1,
      l = (t.setupTextEditor = function (e, t, n) {
        var r = document.createElement("div"),
          a = document.createElement("div"),
          i = document.createElement("div");
        a.appendChild(i), i.contentEditable = "true", i.dataset.editorId = "shape-" + (
          u++).toString();
        var o = 0;
        r.ontouchstart = function (e) {
          o = Date.now(), e.stopPropagation()
        }, r.onmousedown = function (e) {
          o = Date.now(), e.stopPropagation()
        }, r.onmousemove = function (e) {
          document.body.style.cursor = "auto", e.stopPropagation()
        };
        var d = !1;
        return i.oninput = function (e) {
            d = !0, (0, s.inputHandler)(e, (function (e) {
              var i;
              n.onchange(e), c(null === (i = t.text) || void 0 === i ? void 0 : i
                .verticalAlign, r, a)
            }), t.maxTxtLen)
          }, i.onblur = function (e) {
            Date.now() - o < 100 ? e.target.focus() : (n.onblur((0, s.htmlToText)(e
              .target), d), n.container.removeChild(r))
          }, i.onfocus = function (e) {
            var n;
            if (!(Date.now() - o < 100)) {
              var u = (0, A.deviceOS)();
              (0, s.setTextRange)(i, u.isDesktop ? "all" : "end"), c(null === (n = t
                .text) || void 0 === n ? void 0 : n.verticalAlign, r, a)
            }
          }, i.onkeydown = function (e) {
            return (0, s.preventOverLen)(e, t.maxTxtLen)
          }, i.onpaste = function (e) {
            return (0, s.preventOverLen)(e, t.maxTxtLen)
          }, i.addEventListener("beforeinput", s.beforeInputHandler), i
          .addEventListener("compositionstart", s.beforeInputHandler), i
          .addEventListener("compositionend", (function (e) {
            (0, s.inputHandler)(e, n.onchange, t.maxTxtLen)
          })), t.text && (i.innerText = t.text.value), l(e, {
            container: r,
            wrapper: a,
            core: i
          }, t), n.container.appendChild(r), r.appendChild(a), i.focus(), {
            container: r,
            wrapper: a,
            core: i
          }
      }, t.updateEditor = function (e, t, n) {
        var r, a, A, u, l, c, d = (0, s.getEditorPos)(e, n),
          h = (null === (r = n.text) || void 0 === r ? void 0 : r.fontSize) || 32,
          p = (null === (a = n.text) || void 0 === a ? void 0 : a.fontFamily) || o
          .DefaultFont,
          f = 1.25 * h;
        (0, s.setEditorTxt)(t.core, (null === (A = n.text) || void 0 === A ? void 0 : A
          .value) || ""), (0, i.default)(t.container.style, {
          position: "absolute",
          left: d.sx + "px",
          top: d.sy + "px",
          width: d.w + 1 + "px",
          height: d.h + "px",
          transform: "rotate(" + 180 * d.angle / Math.PI + "deg)",
          transformOrigin: "0 0",
          padding: 0,
          outline: "none",
          resize: "none",
          overflow: "hidden",
          pointerEvents: "auto",
          textAlign: (null === (u = n.text) || void 0 === u ? void 0 : u.textAlign) ||
            "left"
        }), (0, i.default)(t.wrapper.style, {
          width: "100%",
          height: "fit-content",
          fontFamily: p,
          fontSize: h + "px",
          fontWeight: "normal",
          lineHeight: f + "px",
          padding: 0
        }), (0, i.default)(t.core.style, (0, i.default)({
          display: "inline",
          outline: "none",
          "-webkit-font-smoothing": "antialiased",
          userSelect: "text",
          webkitUserSelect: "text",
          paddingLeft: "1px",
          color: (null === (l = n.text) || void 0 === l ? void 0 : l.stroke) ||
            "rgb(0,0,0)",
          background: "transparent"
        }, (null === (c = n.text) || void 0 === c ? void 0 : c.fill) ? {
          backgroundColor: n.text.fill
        } : {}))
      }),
      c = function (e, t, n) {
        var r = n.clientHeight < t.clientHeight,
          a = r && ("middle" === e || "bottom" === e),
          A = r && "middle" === e,
          o = t.getElementsByClassName("pre"),
          s = t.getElementsByClassName("aft");
        if (a && 0 === o.length) {
          var u = document.createElement("div");
          u.className = "pre", t.prepend(u), (0, i.default)(u.style, {
            height: "100%"
          })
        } else if (!a && o.length > 0)
          for (var l = o.length - 1; l >= 0; l--) o[l].remove();
        if (A && 0 === s.length) {
          var c = document.createElement("div");
          c.className = "aft", t.appendChild(c), (0, i.default)(c.style, {
            height: "100%"
          })
        } else if (!A && s.length > 0)
          for (var d = s.length - 1; d >= 0; d--) s[d].remove();
        "bottom" === e ? t.scrollTop = t.scrollHeight : "middle" === e && (t.childNodes
          .length > 1 ? t.scrollTop = (t.clientHeight + n.clientHeight) / 2 : t
          .scrollTop = (n.clientHeight - t.clientHeight) / 2)
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = C(n(16)),
      a = C(n(7)),
      i = C(n(5)),
      A = C(n(2)),
      o = C(n(0)),
      s = C(n(1)),
      u = C(n(3)),
      l = C(n(4)),
      c = C(n(139)),
      d = C(n(74)),
      h = n(28),
      p = C(n(60)),
      f = n(138),
      g = n(231),
      y = n(15),
      v = n(65),
      m = n(39),
      w = n(66),
      B = n(22),
      M = n(137);

    function C(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var I = function (e) {
      function t() {
        (0, o.default)(this, t);
        var e = (0, u.default)(this, (t.__proto__ || (0, A.default)(t)).apply(this,
          arguments));
        return e.type = "link", e.description = "流程图连接", e._handleMoveText = function (
          t, n, r) {
          if (e.movingText)
            for (var a = (0, v.getNearestLinkInfo)({
                  mx: t,
                  my: n,
                  data: e.movingText.linkSnap.data
                }), i = a.per, A = a.dist, o = e.movingText.linkSnap.data, s = o
                .text || {
                  arr: [],
                  stroke: "black",
                  fontSize: 12,
                  fontFamily: B.DefaultFont
                }, u = s.arr, l = (0, c.default)(s), d = 0; d < u.length; d++)
              if (u[d]._id === e.movingText._id) {
                var h = w.TEXT_REMOVE_THRES / e.app.scale;
                if (A > h && !r) l.arr.splice(d, 1);
                else if (A > h) {
                  var p = (0, v.getLinkPosByPer)({
                      data: o,
                      per: i,
                      op: e
                    }),
                    f = t - p[0],
                    g = n - p[1],
                    y = Math.sqrt(f * f + g * g);
                  f = f / y * (.5 * h + Math.pow(y, .7)), g = g / y * (.5 * h + Math
                      .pow(y, .7)), l.arr[d].per = i, l.arr[d].rm = !0, l.arr[d].dx =
                    f, l.arr[d].dy = g
                } else l.arr[d].per = i;
                return void e.dispatch(e.opsManager.modifyOp.getSnapshot([e.movingText
                  .linkSnap.opId
                ], [{
                  k: "text",
                  v: l
                }], r))
              }
        }, e._handleMoveP = function (t, n, r) {
          var a;
          if (e.movingEle) {
            var A = void 0,
              o = (0, i.default)({}, e.movingEle.start),
              s = (0, i.default)({}, e.movingEle.end);
            if ("conn" === e.movingEle.type) A = (0, v.graphAftConnM)({
              start: e.movingEle.start,
              end: e.movingEle.end,
              startPos: e.movingEle.startPos,
              endPos: e.movingEle.endPos,
              connPs: e.movingEle.connPs,
              index: e.movingEle.index,
              linkType: e.movingEle.linkType,
              x: t,
              y: n,
              op: e
            }), o.dir = A.start.dir, s.dir = A.end.dir;
            else {
              var u = e.drawOpsOfPage[e.movingEle.opId].data;
              u = u && "link" === u.type ? u : void 0;
              var l = {
                  linkType: e.movingEle.linkType,
                  sFrom: e.movingEle.startPos,
                  eFrom: e.movingEle.endPos,
                  sTo: e.movingEle.startPos,
                  eTo: e.movingEle.endPos,
                  connPs: e.movingEle.connPs,
                  data: e.drawOpsOfPage[e.movingEle.opId].data
                },
                c = (0, m.findEndPoint)(e.app, {
                  drawOps: e.drawOpsOfPage,
                  scale: e.app.scale,
                  mx: t,
                  my: n
                }),
                d = "start" === e.movingEle.type ? e.movingEle.endPos : e.movingEle
                .startPos,
                p = c ? c.dir : (0, m.getInitDir)(d, {
                  x: t,
                  y: n
                }),
                f = {
                  x: t,
                  y: n
                };
              if (c) {
                var g = null === (a = e.drawOpsOfPage[c.opId]) || void 0 === a ?
                  void 0 : a.data;
                g && (f = (0, m.getEndPointInfo)(e.app, g, c.per))
              }
              "start" === e.movingEle.type ? l.sTo = (0, i.default)((0, i.default)({},
                f), {
                dir: p
              }) : l.eTo = (0, i.default)((0, i.default)({}, f), {
                dir: p
              }), A = (0, v.graphAftEndM)((0, i.default)((0, i.default)({}, l), {
                op: e
              })), "start" === e.movingEle.type ? o = c ? {
                id: c.opId,
                type: h.IEndPointType.ATTACH,
                per: c.per,
                aType: e.movingEle.start.aType,
                dir: A.start.dir,
                reset: !0
              } : {
                type: h.IEndPointType.COORD,
                x: t,
                y: n,
                aType: e.movingEle.start.aType,
                dir: A.start.dir,
                reset: !0
              } : s = c ? {
                id: c.opId,
                type: h.IEndPointType.ATTACH,
                per: c.per,
                aType: e.movingEle.end.aType,
                dir: A.end.dir,
                reset: !0
              } : {
                type: h.IEndPointType.COORD,
                x: t,
                y: n,
                aType: e.movingEle.end.aType,
                dir: A.end.dir,
                reset: !0
              }
            }
            return e.dispatch(e.opsManager.modifyOp.getSnapshot([e.movingEle.opId], [{
              k: "connPs",
              v: A.connPs
            }, {
              k: "start",
              v: o
            }, {
              k: "end",
              v: s
            }], r)), !0
          }
        }, e.addT = function (t) {
          var n = e.drawOpsOfPage[t];
          if (n && "link" === n.data.type) {
            var r = n.data;
            if (!(r.text.arr.length >= 7)) {
              var a = (0, m.getLinkNewTextPer)(r.text.arr);
              if (a > 0 && a < 1) {
                var i = (0, v.getLinkPosByPer)({
                  per: a,
                  data: r,
                  op: e
                });
                e.enterTextEditMode({
                  x: i[0],
                  y: i[1],
                  linkSnap: n,
                  per: a
                })
              }
            }
          }
        }, e.enterTextEditMode = function (t) {
          clearTimeout(e.textEditTimer), e.textEditTimer = setTimeout((function () {
            clearTimeout(e.textEditTimer), e._enterTextEditMode(t)
          }), 100)
        }, e._enterTextEditMode = function (t) {
          var n, r, a, i, A;
          e.app.room.refresh();
          var o = t.per,
            s = t.x,
            u = t.y,
            l = t._id,
            c = t.linkSnap;
          e.textEditInfo = {
            _id: l,
            linkSnap: c,
            per: o
          };
          var d = c.data,
            h = ((null === (n = d.text) || void 0 === n ? void 0 : n.arr) || [])
            .filter((function (e) {
              return e._id === l
            }))[0];
          e.currEditor = (0, g.setupTextEditor)(e.app, {
            text: (null == h ? void 0 : h.value) || "",
            stroke: (null === (r = d.text) || void 0 === r ? void 0 : r.stroke) ||
              "black",
            fontSize: (null === (a = d.text) || void 0 === a ? void 0 : a
              .fontSize) || 12,
            fontFamily: (null === (i = d.text) || void 0 === i ? void 0 : i
              .fontFamily) || B.DefaultFont,
            textAlign: "center",
            maxTxtLen: w.MAX_LINK_TXT_LEN
          }, {
            sx: s - M.MIN_TXT_W / 2,
            sy: u - 1.5 * ((null === (A = d.text) || void 0 === A ? void 0 : A
              .fontSize) || 12) / 2,
            angle: 0
          }, {
            container: e.app.container.domEl,
            onchange: function (t) {
              e.handleTextChange(t, !0)
            },
            onblur: function (t, n) {
              e.handleTextBlur(t, n), e.app.room.refresh()
            }
          }), e.app.emit("event:textEditor:show")
        }, e.handleTextChange = function (t, n) {
          if (e.textEditInfo) {
            e.textEditInfo._id || (e.textEditInfo._id = Date.now() + Math.ceil(1e3 *
              Math.random()));
            for (var r = e.textEditInfo.linkSnap.data.text || {
                arr: [],
                stroke: "black",
                fontSize: 12
              }, a = r.arr, A = (0, c.default)(r), o = !1, s = 0; s < a.length; s++)
              if (a[s]._id === e.textEditInfo._id) {
                A.arr[s].value = t;
                var u = e.getTextBoundRect();
                A.arr[s] = (0, i.default)((0, i.default)((0, i.default)({}, A.arr[
                s]), {
                  value: t
                }), u), o = !0;
                break
              } if (!o) {
              var l = e.getTextBoundRect();
              A.arr.push((0, i.default)({
                _id: e.textEditInfo._id,
                value: t,
                per: e.textEditInfo.per
              }, l))
            }
            A.arr = A.arr.filter((function (e) {
              return e.value
            })), e.dispatch(e.opsManager.modifyOp.getSnapshot([e.textEditInfo
              .linkSnap.opId
            ], [{
              k: "text",
              v: A
            }], n))
          }
        }, e.getTextBoundRect = function () {
          var t = e.currEditor.container.getBoundingClientRect(),
            n = t.width,
            r = t.height;
          return {
            w: n /= e.app.scale,
            h: r /= e.app.scale
          }
        }, e.handleTextBlur = function (t, n) {
          n && e.handleTextChange(t, !1), e.textEditInfo = void 0, e.currEditor =
            void 0
        }, e
      }
      return (0, l.default)(t, e), (0, s.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.mousedown.tap("md", this.handleMouseDown.bind(
              this)), this.opsManager.hooks.mousemove.tap("mm", this
              .handleMouseMove.bind(this)), this.opsManager.hooks.mouseup.tap(
              "mc", this.handleMouseUp.bind(this)), this.opsManager.hooks
            .dblClick.tap("dblClick", this.handleDblClick.bind(this)), this
            .opsManager.hooks.click.tap("click", this.handleClick.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "link:addT": {
              value: this.addT,
              information: {
                args: "id: string",
                message: ""
              }
            }
          }
        }
      }, {
        key: "getMouseHandleIds",
        value: function (e) {
          var t = this,
            n = [];
          if (this.opsManager.currOp instanceof p.default) {
            var r = this.opsManager.selectedOpIds;
            for (var a in this.drawOpsOfPage) "link" === this.drawOpsOfPage[a]
              .data.type && -1 === r.indexOf(a) && n.push(a);
            1 === r.length && "link" === this.drawOpsOfPage[r[0]].data.type && n
              .push(r[0]);
            var i = this.app.getCameraBound();
            n = n.filter((function (e) {
              var n = t.drawOpsOfPage[e],
                r = (0, y.getTransformedBoundary)(t.app.scale, {
                  boundary: n.data.boundary
                });
              return r.sx < i.centerX + i.width / 2 && r.sy < i.centerY +
                i.height / 2 && r.sx + r.w > i.centerX - i.width / 2 && r
                .sy + r.h > i.centerY - i.height / 2
            }))
          }
          return n
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          var r;
          this.movingEle = void 0, this.movingText = void 0;
          var i = this.getMouseHandleIds(e),
            A = this.opsManager.selectedOpIds,
            o = !0,
            s = !1,
            u = void 0;
          try {
            for (var l, c = (0, a.default)(i); !(o = (l = c.next()).done); o = !
              0) {
              var d = l.value,
                h = this.drawOpsOfPage[d],
                p = h.data,
                f = p.start,
                g = p.end,
                y = p.connPs,
                v = p.linkType,
                w = this.getPosToMouse({
                  mx: t,
                  my: n,
                  data: p
                }),
                B = (0, m.getLinkEndPos)(this.app, f, this),
                M = (0, m.getLinkEndPos)(this.app, g, this);
              if (B && M && w) {
                if ("start" === w.type) return this.movingEle = {
                  opId: d,
                  type: "start",
                  index: -1,
                  connPs: y.slice(),
                  startPos: B,
                  endPos: M,
                  start: f,
                  end: g,
                  linkType: v
                }, !0;
                if ("end" === w.type) return this.movingEle = {
                  opId: d,
                  type: "end",
                  index: -1,
                  connPs: y.slice(),
                  startPos: B,
                  endPos: M,
                  start: f,
                  end: g,
                  linkType: v
                }, !0;
                if ("conn" === w.type && -1 !== A.indexOf(d)) return this
                  .movingEle = {
                    opId: d,
                    type: "conn",
                    index: w.payload.index,
                    connPs: y.slice(),
                    startPos: B,
                    endPos: M,
                    start: f,
                    end: g,
                    linkType: v
                  }, !0;
                if ("text" === w.type) {
                  var C = (null === (r = p.text) || void 0 === r ? void 0 : r
                      .arr) || [],
                    I = !0,
                    x = !1,
                    b = void 0;
                  try {
                    for (var k, T = (0, a.default)(C); !(I = (k = T.next())
                        .done); I = !0) {
                      var E = k.value;
                      if (E._id === w.payload._id) return this.movingText = {
                        linkSnap: h,
                        _id: E._id,
                        per: E.per
                      }, !0
                    }
                  } catch (e) {
                    x = !0, b = e
                  } finally {
                    try {
                      !I && T.return && T.return()
                    } finally {
                      if (x) throw b
                    }
                  }
                }
              }
            }
          } catch (e) {
            s = !0, u = e
          } finally {
            try {
              !o && c.return && c.return()
            } finally {
              if (s) throw u
            }
          }
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n) {
          if (this.opsManager.currOp instanceof p.default) {
            if (this.movingEle && this.isMouseDown) return this._handleMoveP(t,
              n, !0);
            if (this.movingText && this.isMouseDown) return this
              ._handleMoveText(t, n, !0), !0;
            if (!this.isMouseDown && 1 === this.opsManager.selectedOpIds
              .length) {
              var r = this.drawOpsOfPage[this.opsManager.selectedOpIds[0]].data;
              if ("link" === r.type) {
                var a = this.getPosToMouse({
                  mx: t,
                  my: n,
                  data: r
                });
                if (a) return "start" === a.type && r.start.type === h
                  .IEndPointType.COORD || "end" === a.type && r.end.type === h
                  .IEndPointType.COORD || "conn" === a.type || "text" === a
                  .type ? (document.body.style.cursor = "pointer", !0) : (
                    document.body.style.cursor = "auto", !0)
              }
            }
          }
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n) {
          if (this.opsManager.currOp instanceof p.default && this.movingEle &&
            this.isMouseDown) {
            var r = this._handleMoveP(t, n, !1);
            return this.movingEle = void 0, this.movingText = void 0, r
          }
          if (this.opsManager.currOp instanceof p.default && this.movingText &&
            this.isMouseDown) return this._handleMoveText(t, n, !1), this
            .movingEle = void 0, this.movingText = void 0, !0
        }
      }, {
        key: "handleClick",
        value: function (e, t, n) {
          var r;
          if (this.opsManager.currOp instanceof p.default) {
            var i = this.opsManager.currOp.selectedOpIds;
            if (1 === i.length) {
              var A = this.drawOpsOfPage[i[0]];
              if ("link" === A.data.type) {
                var o = A.data,
                  s = (null === (r = o.text) || void 0 === r ? void 0 : r
                  .arr) || [],
                  u = !0,
                  l = !1,
                  c = void 0;
                try {
                  for (var d, h = (0, a.default)(s); !(u = (d = h.next())
                    .done); u = !0) {
                    var f = d.value,
                      g = (0, v.getLinkPosByPer)({
                        data: o,
                        per: f.per,
                        op: this
                      });
                    if ((0, y.pointInRect)({
                        sx: g[0] - f.w / 2,
                        sy: g[1] - f.h / 2,
                        w: f.w,
                        h: f.h
                      }, 0, [t, n])) return this.enterTextEditMode({
                      x: g[0] - f.w / 2,
                      y: g[1] - f.h / 2,
                      _id: f._id,
                      per: f.per,
                      linkSnap: A
                    }), !0
                  }
                } catch (e) {
                  l = !0, c = e
                } finally {
                  try {
                    !u && h.return && h.return()
                  } finally {
                    if (l) throw c
                  }
                }
              }
            }
          }
        }
      }, {
        key: "getPosToMouse",
        value: function (e) {
          var t, n = e.mx,
            r = e.my,
            i = e.data;
          if ("link" === i.type) {
            var A = i.connPs,
              o = i.start,
              s = i.end,
              u = (0, m.getLinkEndPos)(this.app, o, this),
              l = (0, m.getLinkEndPos)(this.app, s, this);
            if (!u || !l) return;
            var c = Math.abs(l.x - n) + Math.abs(l.y - r) < w
              .END_POINT_TEST_RADIUS / this.app.scale;
            if (Math.abs(u.x - n) + Math.abs(u.y - r) < w
              .END_POINT_TEST_RADIUS / this.app.scale) return {
              type: "start"
            };
            if (c) return {
              type: "end"
            };
            for (var d = 0; d < A.length; d++) {
              if (Math.abs(A[d].x - n) + Math.abs(A[d].y - r) < w
                .CONN_TEST_RADIUS / this.app.scale) return {
                type: "conn",
                payload: {
                  index: d,
                  per: (0, v.getNearestLinkInfo)({
                    mx: n,
                    my: r,
                    data: i
                  }).per
                }
              }
            }
            var h = (null === (t = i.text) || void 0 === t ? void 0 : t.arr) ||
              [],
              p = !0,
              f = !1,
              g = void 0;
            try {
              for (var B, M = (0, a.default)(h); !(p = (B = M.next())
                .done); p = !0) {
                var C = B.value,
                  I = (0, v.getLinkPosByPer)({
                    data: i,
                    per: C.per,
                    op: this
                  });
                if ((0, y.pointInRect)({
                    sx: I[0] - C.w / 2,
                    sy: I[1] - C.h / 2,
                    w: C.w,
                    h: C.h
                  }, 0, [n, r])) return {
                  type: "text",
                  payload: {
                    _id: C._id
                  }
                }
              }
            } catch (e) {
              f = !0, g = e
            } finally {
              try {
                !p && M.return && M.return()
              } finally {
                if (f) throw g
              }
            }
            if ((0, v.isUnderPoint)({
                data: i,
                p: [n, r],
                op: this
              })) return {
              type: "link",
              payload: {
                per: (0, v.getNearestLinkInfo)({
                  mx: n,
                  my: r,
                  data: i
                }).per
              }
            }
          }
        }
      }, {
        key: "handleDblClick",
        value: function (e, t, n) {
          var r, A, o = this.getMouseHandleIds(e),
            s = this.opsManager.selectedOpIds,
            u = !0,
            l = !1,
            c = void 0;
          try {
            for (var d, p = (0, a.default)(o); !(u = (d = p.next()).done); u = !
              0) {
              var f = d.value,
                g = this.drawOpsOfPage[f],
                y = g.data,
                w = this.getPosToMouse({
                  data: y,
                  mx: t,
                  my: n
                });
              if (w) {
                if ("start" === w.type && y.start.type === h.IEndPointType
                  .COORD) return (0, m.selectShapeForLink)({
                  app: this.app,
                  op: this,
                  linkData: y,
                  linkId: g.opId,
                  where: "start"
                }), !0;
                if ("end" === w.type && y.end.type === h.IEndPointType.COORD)
                  return (0, m.selectShapeForLink)({
                    app: this.app,
                    op: this,
                    linkData: y,
                    linkId: g.opId,
                    where: "end"
                  }), !0;
                if ("conn" === w.type) {
                  if ((null === (r = y.connPs[w.payload.index]) || void 0 ===
                      r ? void 0 : r.type) === h.IConnPointType.Anchor && -1 !==
                    s.indexOf(f)) {
                    var B = (0, m.getLinkEndPos)(this.app, y.start, this),
                      M = (0, m.getLinkEndPos)(this.app, y.end, this);
                    if (!B || !M) continue;
                    var C = (0, v.graphAftConnD)({
                      start: B,
                      end: M,
                      data: y,
                      index: w.payload.index,
                      op: this
                    });
                    return this.dispatch(this.opsManager.modifyOp.getSnapshot([g
                      .opId
                    ], [{
                      k: "connPs",
                      v: C.connPs
                    }, {
                      k: "start",
                      v: (0, i.default)((0, i.default)({}, y.start), {
                        dir: C.start.dir
                      })
                    }, {
                      k: "end",
                      v: (0, i.default)((0, i.default)({}, y.end), {
                        dir: C.end.dir
                      })
                    }], !1)), !0
                  }
                  if (y.text.arr.length < 7) {
                    var I = (0, v.getLinkPosByPer)({
                      per: w.payload.per,
                      data: y,
                      op: this
                    });
                    return this.enterTextEditMode({
                      x: I[0],
                      y: I[1],
                      linkSnap: g,
                      per: w.payload.per
                    }), !0
                  }
                } else if ("link" === w.type) {
                  if (y.text.arr.length < 7) {
                    var x = (0, v.getLinkPosByPer)({
                      per: w.payload.per,
                      data: y,
                      op: this
                    });
                    return this.enterTextEditMode({
                      x: x[0],
                      y: x[1],
                      linkSnap: g,
                      per: w.payload.per
                    }), !0
                  }
                } else if ("text" === w.type) {
                  var b = (null === (A = y.text) || void 0 === A ? void 0 : A
                      .arr) || [],
                    k = !0,
                    T = !1,
                    E = void 0;
                  try {
                    for (var D, N = (0, a.default)(b); !(k = (D = N.next())
                        .done); k = !0) {
                      var P = D.value;
                      if (P._id === w.payload._id) {
                        var Q = (0, v.getLinkPosByPer)({
                          data: y,
                          per: P.per,
                          op: this
                        });
                        return console.log("pos", Q, "entry w h", P.w, P.h),
                          this.enterTextEditMode({
                            x: Q[0] - P.w / 2,
                            y: Q[1] - P.h / 2,
                            _id: P._id,
                            per: P.per,
                            linkSnap: g
                          }), !0
                      }
                    }
                  } catch (e) {
                    T = !0, E = e
                  } finally {
                    try {
                      !k && N.return && N.return()
                    } finally {
                      if (T) throw E
                    }
                  }
                }
              }
            }
          } catch (e) {
            l = !0, c = e
          } finally {
            try {
              !u && p.return && p.return()
            } finally {
              if (l) throw c
            }
          }
        }
      }, {
        key: "drawSelectedLink",
        value: function (e, t) {
          var n = t.data,
            r = n.start,
            i = n.end,
            A = n.connPs,
            o = (0, m.getLinkEndPos)(this.app, r, this),
            s = (0, m.getLinkEndPos)(this.app, i, this);
          if (o && s) {
            this.drawWhiteDot(e, o), this.drawWhiteDot(e, s);
            var u = !0,
              l = !1,
              c = void 0;
            try {
              for (var d, p = (0, a.default)(A); !(u = (d = p.next())
                .done); u = !0) {
                var f = d.value;
                if (e.beginPath(), f.type === h.IConnPointType.Split) Math.min((
                    0, y.dist)([o.x, o.y], [f.x, f.y]), (0, y.dist)([s.x, s
                    .y], [f.x, f.y])) > w.CONN_DISP_THRES / this.app.scale &&
                  this.drawBlueDot(e, f);
                else this.drawWhiteDot(e, f)
              }
            } catch (e) {
              l = !0, c = e
            } finally {
              try {
                !u && p.return && p.return()
              } finally {
                if (l) throw c
              }
            }
          }
        }
      }, {
        key: "drawBlueDot",
        value: function (e, t) {
          e.beginPath(), e.fillStyle = "blue", e.arc(t.x, t.y, 2 / this.app
            .scale, 0, 2 * Math.PI), e.fill()
        }
      }, {
        key: "drawWhiteDot",
        value: function (e, t) {
          e.beginPath(), e.fillStyle = "white", e.arc(t.x, t.y, 4 / this.app
            .scale, 0, 2 * Math.PI), e.fill(), e.strokeStyle = "black", e.arc(
            t.x, t.y, 4 / this.app.scale, 0, 2 * Math.PI), e.stroke()
        }
      }, {
        key: "draw",
        value: function (e, t) {
          var n = e.data,
            r = n.dash,
            a = n.start,
            i = n.end,
            A = this.app.room.getPage(e.board, e.page.toString(), !1),
            o = (0, m.getLinkEndPos)(this.app, a, this, A),
            s = (0, m.getLinkEndPos)(this.app, i, this, A);
          if (o && s) {
            if (r === h.IDashType.Dashed) {
              var u = 2 / this.app.scale;
              t.lineCap = "butt", t.lineWidth = 1 / this.app.scale, t
                .setLineDash([u, 2 * u])
            } else t.lineWidth = n.lineWidth;
            t.strokeStyle = n.stroke, (0, v.drawLink)({
              ctx: t,
              data: n,
              op: this
            });
            var l = (0, v.getArrowPts)({
              data: n,
              op: this,
              startPos: o,
              endPos: s
            });
            a.aType === h.IArrowType.Arrow && this.drawArrow(t, l.start, n
              .stroke), i.aType === h.IArrowType.Arrow && this.drawArrow(t, l
              .end, n.stroke), this.drawText(e, t, A)
          }
        }
      }, {
        key: "drawArrow",
        value: function (e, t, n) {
          e.beginPath(), e.moveTo.apply(e, (0, r.default)(t[0])), e.lineTo
            .apply(e, (0, r.default)(t[1])), e.lineTo.apply(e, (0, r.default)(t[
              2])), e.fillStyle = n, e.fill()
        }
      }, {
        key: "drawText",
        value: function (e, t, n) {
          var r, i = e.data,
            A = i.text;
          if (A) {
            t.fillStyle = A.stroke;
            var o = !0,
              s = !1,
              u = void 0;
            try {
              for (var l, c = (0, a.default)(A.arr); !(o = (l = c.next())
                .done); o = !0) {
                var d = l.value;
                if (d._id === (null === (r = this.textEditInfo) || void 0 ===
                    r ? void 0 : r._id) && this.currEditor) {
                  var h = (0, v.getLinkPosByPer)({
                    per: d.per,
                    data: i,
                    op: this
                  });
                  (0, g.updateEditor)({
                    sx: h[0] - d.w / 2,
                    sy: h[1] - d.h / 2,
                    angle: 0
                  }, this.currEditor, {
                    text: d.value,
                    stroke: A.stroke,
                    fontSize: A.fontSize,
                    fontFamily: A.fontFamily,
                    textAlign: "center"
                  })
                } else {
                  var p = (0, v.getLinkPosByPer)({
                      per: d.per,
                      data: i,
                      op: this,
                      page: n
                    }),
                    y = (0, f.getTextLines)({
                      ctx: t,
                      txt: d.value,
                      fontSize: A.fontSize,
                      fontFamily: A.fontFamily
                    });
                  d.rm || (t.fillStyle = this.app.appConfig.canvasBgColor, t
                      .fillRect(p[0] - d.w / 2, p[1] - d.h / 2, d.w, d.h)), t
                    .translate(p[0] - d.w / 2, p[1] - d.h / 2), d.rm && (t
                      .globalAlpha = .3, t.translate(d.dx || 0, d.dy || 0)), (0,
                      f.drawText)({
                      ctx: t,
                      textArr: y,
                      fontSize: A.fontSize,
                      fontFamily: A.fontFamily,
                      lineHeightF: 1.25,
                      w: d.w,
                      h: d.h,
                      fill: void 0,
                      stroke: A.stroke,
                      clip: !0,
                      align: "center",
                      vAlign: "middle"
                    }), d.rm && (t.globalAlpha = 1, t.translate(-(d.dx || 0), -(
                      d.dy || 0))), t.translate(-p[0] + d.w / 2, -p[1] + d.h /
                      2)
                }
              }
            } catch (e) {
              s = !0, u = e
            } finally {
              try {
                !o && c.return && c.return()
              } finally {
                if (s) throw u
              }
            }
          }
        }
      }, {
        key: "patchOp",
        value: function (e) {
          var t = this.app.room.getPage(e.board, e.page.toString(), !1);
          (0, v.patchLink)({
            data: e.data,
            op: this,
            page: t
          })
        }
      }, {
        key: "getUpdatedTxtProps",
        value: function (e, t) {
          var n = t.fontFamily,
            r = t.fontSize,
            i = (0, c.default)(e.text),
            A = i.arr,
            o = !0,
            s = !1,
            u = void 0;
          try {
            for (var l, d = (0, a.default)(A); !(o = (l = d.next()).done); o = !
              0) {
              var h = l.value;
              if (r) h.w = r / i.fontSize * h.w, h.h = r / i.fontSize * h.h;
              else if (n) {
                var p = this.opsManager.textOp.getTextSize({
                  text: h.value,
                  fontFamily: n,
                  fontSize: i.fontSize
                });
                h.w = p.w, h.h = p.h
              }
            }
          } catch (e) {
            s = !0, u = e
          } finally {
            try {
              !o && d.return && d.return()
            } finally {
              if (s) throw u
            }
          }
          return r ? i.fontSize = r : n && (i.fontFamily = n), i
        }
      }]), t
    }(d.default);
    t.default = I
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = B(n(7)),
      a = B(n(5)),
      i = B(n(2)),
      A = B(n(0)),
      o = B(n(1)),
      s = B(n(3)),
      u = B(n(4)),
      l = n(53),
      c = n(15),
      d = n(66),
      h = n(29),
      p = B(n(9)),
      f = B(n(60)),
      g = n(19),
      y = B(n(22)),
      v = n(65),
      m = n(39),
      w = n(28);

    function B(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var M = (0, l.deviceOS)(),
      C = M.isMobile || M.isTablet,
      I = function (e) {
        function t() {
          (0, A.default)(this, t);
          var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
            arguments));
          return e.type = "graph", e
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "registerHooks",
          value: function () {
            this.opsManager.hooks.mousedown.tap("md", this.handleMouseDown.bind(
              this)), this.opsManager.hooks.mouseup.tap("mu", this.handleMouseUp
              .bind(this)), this.opsManager.hooks.mousemove.tap("mm", this
              .handleMouseMove.bind(this)), this.opsManager.hooks.click.tap(
              "mc", this.handleClick.bind(this))
          }
        }, {
          key: "handleMouseDown",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof f.default && (this.hintInfo ||
                this.setHintInfo(t, n), this.hintInfo)) return this.dispatch(this
              .opsManager.selectOp.getSnapshot([])), !0
          }
        }, {
          key: "handleMouseUp",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof f.default && this.hintInfo) {
              if (this.isMouseMoved) {
                var r = this.genLink(t, n, !1);
                if (!r) return;
                (0, m.selectShapeForLink)({
                  linkData: r.linkData,
                  linkId: r.opId,
                  app: this.app,
                  op: this,
                  where: "end"
                })
              } else this.handleClick(e, t, n);
              return this.hintInfo = void 0, this.hideHintShape(), !0
            }
          }
        }, {
          key: "setHintInfo",
          value: function (e, t) {
            var n, r, a = null === (n = this.opsManager.selectOp.selectInfo) ||
              void 0 === n ? void 0 : n.hintPos,
              i = null === (r = this.opsManager.drawOpsOfPage[this.opsManager
                .selectedOpIds[0]]) || void 0 === r ? void 0 : r.data;
            if (a && !a.hidden && i) {
              var A = this.app.scale,
                o = d.HINT_TEST_RADIUS / A,
                s = Math.sqrt((a.p1[0] - a.p3[0]) * (a.p1[0] - a.p3[0]) + (a.p1[
                  1] - a.p3[1]) * (a.p1[1] - a.p3[1])) * A,
                u = Math.sqrt((a.p2[0] - a.p4[0]) * (a.p2[0] - a.p4[0]) + (a.p2[
                  1] - a.p4[1]) * (a.p2[1] - a.p4[1])) * A,
                l = C ? Math.min(3, s / 100) : 1,
                h = C ? Math.min(3, u / 100) : 1;
              (0, c.dist)([e, t], a.p1) < o * h ? this.hintInfo = {
                data: i,
                id: a.id,
                p: a.p1,
                sp: a.sp1,
                dir: w.DIRECTION.UP
              } : (0, c.dist)([e, t], a.p2) < o * l ? this.hintInfo = {
                data: i,
                id: a.id,
                p: a.p2,
                sp: a.sp2,
                dir: w.DIRECTION.RIGHT
              } : (0, c.dist)([e, t], a.p3) < o * h ? this.hintInfo = {
                data: i,
                id: a.id,
                p: a.p3,
                sp: a.sp3,
                dir: w.DIRECTION.DOWN
              } : (0, c.dist)([e, t], a.p4) < o * l ? this.hintInfo = {
                data: i,
                id: a.id,
                p: a.p4,
                sp: a.sp4,
                dir: w.DIRECTION.LEFT
              } : this.hintInfo = void 0
            } else this.hintInfo = void 0
          }
        }, {
          key: "handleMouseMove",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof f.default && !this.isMouseDown)
              this.setHintInfo(t, n);
            else if (this.opsManager.currOp instanceof f.default && this.hintInfo)
              return this.genLink(t, n, !0), this.hideHintShape(), !0;
            this.hintInfo ? this.showHintShape(this.hintInfo.data, this.hintInfo
                .id, this.hintInfo.sp, this.hintInfo.dir, !1) : this
              .hideHintShape()
          }
        }, {
          key: "handleClick",
          value: function (e, t, n) {
            if (this.opsManager.currOp instanceof f.default) {
              if (this.hintInfo) return this.showHintShape(this.hintInfo.data,
                  this.hintInfo.id, this.hintInfo.sp, this.hintInfo.dir, !0),
                this.hintInfo = void 0, this.hideHintShape(), !0;
              this.hideHintShape()
            }
          }
        }, {
          key: "genLink",
          value: function (e, t, n) {
            if (this.hintInfo) {
              var r = 1 / 8;
              switch (this.hintInfo.dir) {
                case w.DIRECTION.DOWN:
                  r = 5 / 8;
                  break;
                case w.DIRECTION.LEFT:
                  r = 7 / 8;
                  break;
                case w.DIRECTION.RIGHT:
                  r = 3 / 8
              }
              var i = {
                  id: this.hintInfo.id,
                  type: w.IEndPointType.FLEX,
                  per: r,
                  aType: y.default.linkDef.startArrow,
                  dir: this.hintInfo.dir
                },
                A = (0, m.findEndPoint)(this.app, {
                  mx: e,
                  my: t,
                  drawOps: this.drawOpsOfPage,
                  scale: this.app.scale
                }),
                o = A ? A.dir : (0, m.getInitDir)({
                  x: this.hintInfo.sp[0],
                  y: this.hintInfo.sp[1]
                }, {
                  x: e,
                  y: t
                }),
                s = A ? {
                  id: A.opId,
                  type: w.IEndPointType.FLEX,
                  per: A.per,
                  aType: y.default.linkDef.endArrow,
                  dir: o
                } : {
                  type: w.IEndPointType.COORD,
                  x: e,
                  y: t,
                  aType: y.default.linkDef.endArrow,
                  dir: o
                },
                u = (0, m.getLinkEndPos)(this.app, i, this.opsManager.linkOp),
                l = (0, m.getLinkEndPos)(this.app, s, this.opsManager.linkOp);
              if (u && l) {
                var c = (0, v.graphInit)({
                    linkType: y.default.linkDef.linkType,
                    start: u,
                    end: l,
                    op: this,
                    data: {
                      start: i,
                      end: s
                    }
                  }),
                  d = {
                    type: "link",
                    start: (0, a.default)((0, a.default)({}, i), {
                      dir: c.start.dir
                    }),
                    end: (0, a.default)((0, a.default)({}, s), {
                      dir: c.end.dir
                    }),
                    connPs: c.connPs,
                    dash: y.default.linkDef.dash,
                    linkType: y.default.linkDef.linkType,
                    stroke: y.default.linkDef.stroke,
                    lineWidth: y.default.linkDef.lineWidth,
                    inProgress: n,
                    text: {
                      arr: [],
                      fontSize: y.default.linkDef.text.fontSize,
                      stroke: y.default.linkDef.text.stroke,
                      fontFamily: y.default.linkDef.text.fontFamily
                    }
                  };
                return {
                  linkData: d,
                  opId: this.dispatch(d)
                }
              }
            }
          }
        }, {
          key: "connToExistShape",
          value: function (e) {
            var t = e.data,
              n = e.id,
              r = e.sp,
              i = e.dir,
              A = e.per,
              o = e.otherPer,
              s = e.dirAftRotate,
              u = e.send,
              l = 1 / 0,
              p = void 0,
              f = d.SUGGEST_SHAPE_DIST,
              g = (0, c.getTransformedBoundary)(this.app.scale, {
                mat: t.mat,
                boundary: t.boundary
              }),
              B = i === w.DIRECTION.LEFT || i === w.DIRECTION.RIGHT ? g.w : g.h,
              M = [];
            for (var C in this.drawOpsOfPage) {
              var I = this.drawOpsOfPage[C].data;
              "link" === I.type && I.start.type !== w.IEndPointType.COORD && I.end
                .type !== w.IEndPointType.COORD && (I.start.id === n && -1 === M
                  .indexOf(I.end.id) && M.push(I.end.id), I.end.id === n && -1 ===
                  M.indexOf(I.start.id) && M.push(I.start.id))
            }
            for (var x in this.drawOpsOfPage) {
              var b = this.drawOpsOfPage[x].data;
              if (-1 === w.exLinkTypes.indexOf(b.type) && x !== n && -1 === M
                .indexOf(x)) {
                var k = b.boundary,
                  T = (0, h.getTransPoint)([k.sx + k.w / 2, k.sy], b.mat),
                  E = (0, h.getTransPoint)([k.sx + k.w, k.sy + k.h / 2], b.mat),
                  D = (0, h.getTransPoint)([k.sx + k.w / 2, k.sy + k.h], b.mat),
                  N = (0, h.getTransPoint)([k.sx, k.sy + k.h / 2], b.mat),
                  P = (0, c.distSqrt)(T, r),
                  Q = (0, c.distSqrt)(E, r),
                  O = (0, c.distSqrt)(D, r),
                  _ = (0, c.distSqrt)(N, r),
                  S = P,
                  U = T;
                S > Q && (S = Q, U = E), S > O && (S = O, U = D), S > _ && (S = _,
                  U = N);
                var F = (0, m.getDistDivideByDir)(U, r, s),
                  L = F.v1,
                  j = F.v2;
                L > 0 && L < f && L < l && Math.abs(j) < B && (l = L, p = x)
              }
            }
            if (p) {
              var z = this.drawOpsOfPage[p].data,
                R = (0, a.default)((0, a.default)({}, (0, m.getEndPointInfo)(this
                  .app, z, o)), {
                  dir: 3 - s
                }),
                H = (0, a.default)((0, a.default)({}, (0, m.getEndPointInfo)(this
                  .app, t, A)), {
                  dir: s
                }),
                Y = (0, v.graphInit)({
                  linkType: y.default.linkDef.linkType,
                  start: H,
                  end: R,
                  op: this
                }),
                W = {
                  type: "link",
                  start: {
                    id: n,
                    type: w.IEndPointType.FLEX,
                    per: A,
                    aType: y.default.linkDef.startArrow,
                    dir: s
                  },
                  end: {
                    id: p,
                    type: w.IEndPointType.FLEX,
                    per: o,
                    aType: y.default.linkDef.endArrow,
                    dir: 3 - s
                  },
                  connPs: Y.connPs,
                  linkType: y.default.linkDef.linkType,
                  dash: u ? y.default.linkDef.dash : w.IDashType.Dashed,
                  stroke: u ? y.default.linkDef.stroke : "rgba(132, 176, 245)",
                  lineWidth: u ? y.default.linkDef.lineWidth : 1,
                  inProgress: !1,
                  text: {
                    arr: [],
                    stroke: y.default.linkDef.text.stroke,
                    fontSize: y.default.linkDef.text.fontSize,
                    fontFamily: y.default.linkDef.text.fontFamily
                  }
                };
              return u ? this.dispatch(W) : this.opsManager.currPage.setLocalOp(
                "link", this.getLocalSnapshot(W)), {
                id: p,
                data: z
              }
            }
          }
        }, {
          key: "connToEmptyArea",
          value: function (e) {
            var t = e.data,
              n = e.id,
              r = e.sp,
              i = e.per,
              A = e.otherPer,
              o = e.dirAftRotate,
              s = e.send,
              u = d.SUGGEST_SHAPE_DIST,
              l = (0, c.getTransformedBoundary)(this.app.scale, {
                mat: t.mat,
                boundary: t.boundary
              }),
              p = u + (o === w.DIRECTION.LEFT || o === w.DIRECTION.RIGHT ? l.w : l
                .h),
              f = o === w.DIRECTION.LEFT || o === w.DIRECTION.RIGHT ? l.h : l.w,
              g = d.SUGGEST_SHAPE_GAP,
              B = [];
            for (var M in this.drawOpsOfPage) {
              var C = this.drawOpsOfPage[M].data;
              if (M !== n && "link" !== C.type) {
                var I = C.boundary,
                  x = (0, h.getTransPoint)([I.sx, I.sy], C.mat),
                  b = (0, h.getTransPoint)([I.sx + I.w, I.sy], C.mat),
                  k = (0, h.getTransPoint)([I.sx + I.w, I.sy + I.h], C.mat),
                  T = (0, h.getTransPoint)([I.sx, I.sy + I.h], C.mat),
                  E = (0, m.getDistDivideByDir)(x, r, o),
                  D = (0, m.getDistDivideByDir)(b, r, o),
                  N = (0, m.getDistDivideByDir)(k, r, o),
                  P = (0, m.getDistDivideByDir)(T, r, o),
                  Q = E.v1 < u && D.v1 < u && N.v1 < u && P.v1 < u,
                  O = E.v1 > p && D.v1 > p && N.v1 > p && P.v1 > p;
                Q || O || B.push([Math.min(E.v2, D.v2, N.v2, P.v2) - g, Math.max(E
                  .v2, D.v2, N.v2, P.v2) + g])
              }
            }
            for (var _ = (B = (0, m.mergeIntervals)(B)).length > 0 ? Math.abs(B[0]
                [0] - f / 2) : 0, S = B.length > 0 ? Math.min(B[0][0] - f / 2,
                0) : 0, U = 0; U < B.length; U++) {
              var F = B[U][1],
                L = U < B.length - 1 ? B[U + 1][0] : 1 / 0;
              if (L - F > f) {
                if (F < -f / 2 && L > f / 2) {
                  S = 0;
                  break
                }
                if (f / 2 > L) {
                  var j = Math.abs(L - f / 2);
                  j < _ && (_ = j, S = L - f / 2)
                } else if (-f / 2 < F) {
                  var z = Math.abs(F + f / 2);
                  z < _ && (_ = z, S = F + f / 2)
                }
              }
            }
            var R = (0, c.getTransformedSize)(t),
              H = d.SUGGEST_SHAPE_DIST,
              Y = t.shape ? t.shape : "rect",
              W = r.slice();
            switch (o) {
              case w.DIRECTION.UP:
                W[1] -= H + R.h / 2, W[0] += S;
                break;
              case w.DIRECTION.DOWN:
                W[1] += H + R.h / 2, W[0] += S;
                break;
              case w.DIRECTION.LEFT:
                W[0] -= H + R.w / 2, W[1] += S;
                break;
              case w.DIRECTION.RIGHT:
                W[0] += H + R.w / 2, W[1] += S
            }
            var K = (0, m.getShapeDataFromExist)({
              sx: W[0] - R.w / 2,
              sy: W[1] - R.h / 2,
              w: R.w,
              h: R.h,
              shapeType: Y,
              another: t
            });
            s || (K = (0, a.default)((0, a.default)({}, K), {
              stroke: "rgba(132, 176, 245)",
              lineWidth: 1,
              fill: void 0,
              dash: w.IDashType.Dashed
            }));
            var G = void 0;
            if (s) G = this.dispatch(K);
            else {
              var V = this.getLocalSnapshot(K);
              this.opsManager.currPage.setLocalOp("shape", V), G = V.opId
            }
            var Z = (0, a.default)((0, a.default)({}, (0, m.getEndPointInfo)(this
                .app, K, A)), {
                dir: 3 - o
              }),
              X = (0, a.default)((0, a.default)({}, (0, m.getEndPointInfo)(this
                .app, t, i)), {
                dir: o
              }),
              J = (0, v.graphInit)({
                linkType: y.default.linkDef.linkType,
                start: X,
                end: Z,
                op: this
              }),
              q = {
                type: "link",
                start: {
                  id: n,
                  type: w.IEndPointType.FLEX,
                  per: i,
                  aType: y.default.linkDef.startArrow,
                  dir: o
                },
                end: {
                  id: G,
                  type: w.IEndPointType.FLEX,
                  per: A,
                  aType: y.default.linkDef.endArrow,
                  dir: 3 - o
                },
                connPs: J.connPs,
                linkType: y.default.linkDef.linkType,
                dash: s ? y.default.linkDef.dash : w.IDashType.Dashed,
                stroke: s ? y.default.linkDef.stroke : "rgba(132, 176, 245)",
                lineWidth: s ? y.default.linkDef.lineWidth : 1,
                inProgress: !1,
                text: {
                  arr: [],
                  stroke: y.default.linkDef.text.stroke,
                  fontSize: y.default.linkDef.text.fontSize,
                  fontFamily: y.default.linkDef.text.fontFamily
                }
              };
            return s ? this.dispatch(q) : this.opsManager.currPage.setLocalOp(
              "link", this.getLocalSnapshot(q)), {
              id: G,
              data: K
            }
          }
        }, {
          key: "showHintShape",
          value: function (e, t, n, r) {
            var a = arguments.length > 4 && void 0 !== arguments[4] && arguments[
                4],
              i = 1 / 8,
              A = 5 / 8;
            switch (r) {
              case w.DIRECTION.DOWN:
                i = 5 / 8;
                break;
              case w.DIRECTION.LEFT:
                i = 7 / 8;
                break;
              case w.DIRECTION.RIGHT:
                i = 3 / 8
            }
            var o = (0, m.getDirAftRotate)(r, e.rAngle, e.xFactor, e.yFactor);
            switch (o) {
              case w.DIRECTION.UP:
                break;
              case w.DIRECTION.DOWN:
                A = 1 / 8;
                break;
              case w.DIRECTION.LEFT:
                A = 3 / 8;
                break;
              case w.DIRECTION.RIGHT:
                A = 7 / 8
            }
            var s = this.connToExistShape({
              id: t,
              per: i,
              otherPer: A,
              dirAftRotate: o,
              sp: n,
              data: e,
              send: a,
              dir: r
            });
            if (s || (s = this.connToEmptyArea({
                id: t,
                per: i,
                otherPer: A,
                dirAftRotate: o,
                sp: n,
                data: e,
                send: a,
                dir: r
              })), a) {
              var u = s.id,
                l = s.data;
              this.dispatch(this.opsManager.selectOp.getSnapshot([u]));
              var c = (0, g.extendCameraToSnap)({
                  app: this.app,
                  boundary: l.boundary
                }),
                d = c.needAdjust,
                h = c.camera;
              d && this.app.setCameraBound(h, !0)
            }
          }
        }, {
          key: "hideHintShape",
          value: function () {
            this.opsManager.currPage.setLocalOp(["shape", "link"], void 0)
          }
        }, {
          key: "handleElePosChange",
          value: function (e, t, n, i) {
            var A = [];
            for (var o in e) "link" === e[o].data.type && A.push(e[o]);
            var s = t.dependOn || [],
              u = [],
              l = !0,
              c = !1,
              d = void 0;
            try {
              for (var h, p = (0, r.default)(A); !(l = (h = p.next()).done); l = !
                0) {
                var f = h.value,
                  g = f.data,
                  y = void 0,
                  B = void 0,
                  M = void 0,
                  C = void 0,
                  I = g.start.id,
                  x = g.end.id,
                  b = e[I],
                  k = e[x],
                  T = this.opsManager.opMap[t.type],
                  E = b ? T.transformOp(b, t).data : void 0,
                  D = k ? T.transformOp(k, t).data : void 0;
                if (y = g.start.type === w.IEndPointType.COORD ? g.start : (0, a
                    .default)((0, a.default)({}, (0, m.getEndPointInfo)(this.app,
                    b.data, g.start.per)), {
                    dir: g.start.dir
                  }), B = g.end.type === w.IEndPointType.COORD ? g.end : (0, a
                    .default)((0, a.default)({}, (0, m.getEndPointInfo)(this.app,
                    k.data, g.end.per)), {
                    dir: g.end.dir
                  }), -1 !== s.indexOf(I) || -1 !== s.indexOf(f.opId) && !I) {
                  var N = void 0,
                    P = y.dir;
                  if (I && E) {
                    var Q = (0, m.getEndPointInfo)(this.app, E, g.start.per);
                    N = [Q.x, Q.y]
                  } else N = (0, m.getPosAftMove)([y.x, y.y], t);
                  M = {
                    dir: P,
                    x: N[0],
                    y: N[1]
                  }
                } else M = (0, a.default)({}, y);
                if (-1 !== s.indexOf(x) || -1 !== s.indexOf(f.opId) && !x) {
                  var O = void 0,
                    _ = B.dir;
                  if (x && D) {
                    var S = (0, m.getEndPointInfo)(this.app, D, g.end.per);
                    O = [S.x, S.y]
                  } else O = (0, m.getPosAftMove)([B.x, B.y], t);
                  C = {
                    dir: _,
                    x: O[0],
                    y: O[1]
                  }
                } else C = (0, a.default)({}, B);
                var U = [],
                  F = void 0;
                if (-1 !== s.indexOf(I) && -1 !== s.indexOf(x)) {
                  var L = g.connPs.map((function (e) {
                    var n = (0, m.getPosAftMove)([e.x, e.y], t);
                    return (0, a.default)((0, a.default)({}, e), {
                      x: n[0],
                      y: n[1]
                    })
                  }));
                  F = (0, v.tidyGraph)({
                    linkType: f.data.linkType,
                    start: M,
                    end: C,
                    connPs: L,
                    op: this,
                    data: g
                  })
                } else if (-1 !== s.indexOf(f.opId)) {
                  var j = g.connPs.filter((function (e) {
                    return e.type === w.IConnPointType.Anchor
                  })).map((function (e) {
                    var n = (0, m.getPosAftMove)([e.x, e.y], t);
                    return (0, a.default)((0, a.default)({}, e), {
                      x: n[0],
                      y: n[1]
                    })
                  }));
                  F = (0, v.graphFromAnchors)({
                    anchors: j,
                    start: M,
                    end: C,
                    linkType: g.linkType,
                    op: this
                  })
                } else -1 === s.indexOf(I) && -1 === s.indexOf(x) || (F = (0, v
                  .graphAftEndM)({
                  linkType: g.linkType,
                  sFrom: y,
                  eFrom: B,
                  sTo: M,
                  eTo: C,
                  connPs: g.connPs,
                  op: this,
                  data: g
                }));
                F && U.push({
                  k: "connPs",
                  v: F.connPs
                }, {
                  k: "start",
                  v: {
                    dir: F.start.dir
                  }
                }, {
                  k: "end",
                  v: {
                    dir: F.end.dir
                  }
                }), I || U.push({
                  k: "start",
                  v: (0, a.default)((0, a.default)({}, g.start), {
                    x: M.x,
                    y: M.y
                  })
                }), x || U.push({
                  k: "end",
                  v: (0, a.default)((0, a.default)({}, g.end), {
                    x: C.x,
                    y: C.y
                  })
                }), U.length > 0 && u.push({
                  changes: U,
                  linkId: f.opId
                })
              }
            } catch (e) {
              c = !0, d = e
            } finally {
              try {
                !l && p.return && p.return()
              } finally {
                if (c) throw d
              }
            }
            var z = [],
              R = {
                common: [],
                sub: []
              },
              H = !0,
              Y = !1,
              W = void 0;
            try {
              for (var K, G = (0, r.default)(u); !(H = (K = G.next()).done); H = !
                0) {
                var V = K.value;
                z.push(V.linkId), R.sub.push({
                  ids: [V.linkId],
                  attrs: V.changes
                })
              }
            } catch (e) {
              Y = !0, W = e
            } finally {
              try {
                !H && G.return && G.return()
              } finally {
                if (Y) throw W
              }
            }
            this.dispatch(t, !1, n), z.length > 0 && this.dispatch({
              type: "modify",
              dependOn: z,
              attrs: R,
              inProgress: t.inProgress
            }, !1, i)
          }
        }]), t
      }(p.default);
    t.default = I
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(5)),
      a = l(n(20)),
      i = l(n(2)),
      A = l(n(0)),
      o = l(n(1)),
      s = l(n(3)),
      u = l(n(4));

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "visible", e.description = "", e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            "visible:eles": {
              value: this.setOpsVisibility.bind(this),
              information: {
                args: "opIds: string[] | undefined, visible: boolean",
                message: "锁定元素"
              }
            }
          }
        }
      }, {
        key: "setOpsVisibility",
        value: function (e, t) {
          var n = this,
            r = [];
          if (e) {
            if (0 === (r = e.filter((function (e) {
                return t ? n.opsManager.hiddenOpsOfPage[e] : n.opsManager
                  .drawOpsOfPage[e]
              }))).length) return
          } else if (t ? r = (0, a.default)(this.opsManager.hiddenOpsOfPage) :
            t || (r = (0, a.default)(this.opsManager.drawOpsOfPage)), 0 === r
            .length) return;
          this.dispatch(this.getSnapshot(r, t))
        }
      }, {
        key: "getSnapshot",
        value: function (e, t) {
          return {
            type: this.type,
            visible: t,
            dependOn: e.slice()
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = (0, r.default)({}, e.data, {
            hidden: !t.visible
          });
          return (0, r.default)({}, e, {
            data: n
          })
        }
      }]), t
    }(l(n(9)).default);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(5)),
      a = d(n(2)),
      i = d(n(0)),
      A = d(n(1)),
      o = d(n(3)),
      s = d(n(4)),
      u = d(n(9)),
      l = n(15),
      c = n(29);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "crop", e.description = "", e.inCropMode = !1, e.isCropping = !
          1, e.cropHotRegion = {
            sp: [0, 0],
            ep: [0, 0],
            r: 12
          }, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "registerHooks",
        value: function () {
          this.opsManager.hooks.mousedown.tap("MousedownPlugin", this
              .handleMouseDown.bind(this)), this.opsManager.hooks.mousemove.tap(
              "MousemovePlugin", this.handleMouseMove.bind(this)), this
            .opsManager.hooks.mouseup.tap("MouseupPlugin", this.handleMouseUp
              .bind(this)), this.opsManager.hooks.click.tap("ClickPlugin", this
              .handleClick.bind(this))
        }
      }, {
        key: "eventsToListen",
        value: function () {
          return {
            "crop:image": {
              value: this.startCrop.bind(this),
              information: {
                args: "id: string",
                message: ""
              }
            }
          }
        }
      }, {
        key: "startCrop",
        value: function (e) {
          var t = this.drawOpsOfPage[e];
          if (!t || "image" !== t.data.type) return this.logger.error(
            "CropOp.startCrop: image does not exist", t);
          var n = t.data;
          this.inCropMode = !0, this.isCropping = !1, this.cropId = e;
          var r = n.crop ? n.crop.sp : [0, 0],
            a = n.crop ? n.crop.ep : [1, 1];
          this.opsManager.currPage.setLocalOp("crop", this.getLocalSnapshot({
            inProgress: !0,
            dependOn: [e],
            sp: r,
            ep: a,
            type: "crop"
          }), !0)
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          if (this.inCropMode) {
            var r = this.mousePosTest(t, n);
            return "default" !== r.cursorSuggestion && (this.isCropping = !0,
                this.cropAnchor = r.cropAnchor, this.moveAnchor = r.moveAnchor),
              !0
          }
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n) {
          if (this.inCropMode) {
            var r = this.drawOpsOfPage[this.cropId || ""];
            if (this.isCropping && r && (this.moveAnchor || this.cropAnchor)) {
              var a = this.getCropBoundary(t, n, r.data),
                i = a.sp,
                A = a.ep;
              this.opsManager.currPage.setLocalOp("crop", this
            .getLocalSnapshot({
                inProgress: !0,
                dependOn: [this.cropId],
                sp: i,
                ep: A,
                type: "crop"
              }), !0), this.lastSp = i, this.lastEp = A
            } else if (this.isMouseDown) document.body.style.cursor = "default";
            else {
              var o = this.mousePosTest(t, n);
              document.body.style.cursor = o.cursorSuggestion
            }
            return !0
          }
        }
      }, {
        key: "handleClick",
        value: function (e, t, n) {
          this.handleMouseUp(e, t, n)
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n) {
          if (this.inCropMode) {
            if (this.isCropping) this.isCropping = !1;
            else {
              var r = this.drawOpsOfPage[this.cropId || ""];
              if (r) {
                var a = (0, l.getTransformedVertices)(r.data);
                (0, l.pointInVertices)(a, [t, n]) || (this.isCropping = !1, this
                  .inCropMode = !1, this.opsManager.currPage.setLocalOp("crop",
                    void 0, !0), this.lastSp && this.lastEp && this.dispatch({
                    inProgress: !1,
                    dependOn: [this.cropId],
                    sp: this.lastSp,
                    ep: this.lastEp,
                    type: "crop"
                  }), this.lastSp = void 0, this.lastEp = void 0)
              }
            }
            return !0
          }
        }
      }, {
        key: "drawCrop",
        value: function (e, t) {
          if (t.crop) {
            var n = t.crop,
              r = n.sp,
              a = n.ep,
              i = this.getCropPoint(r, t, !1),
              A = this.getCropPoint(a, t, !1);
            e.fillStyle = "rgb(255, 255, 255)";
            var o = 1 / this.app.scale / Math.abs(t.xFactor || 1),
              s = 12 * o;
            e.fillRect(i[0] - s / 2, i[1] - s / 2, s, s), e.fillRect(A[0] - s /
                2, i[1] - s / 2, s, s), e.fillRect(A[0] - s / 2, A[1] - s / 2,
                s, s), e.fillRect(i[0] - s / 2, A[1] - s / 2, s, s), e
              .strokeStyle = "rgb(150, 150, 150)", e.lineWidth = 1 * o, e
              .strokeRect(i[0] - s / 2, i[1] - s / 2, s, s), e.strokeRect(A[0] -
                s / 2, i[1] - s / 2, s, s), e.strokeRect(A[0] - s / 2, A[1] -
                s / 2, s, s), e.strokeRect(i[0] - s / 2, A[1] - s / 2, s, s),
              this.cropHotRegion = {
                sp: r,
                ep: a,
                r: s
              }
          }
        }
      }, {
        key: "getCropPoint",
        value: function (e, t) {
          var n = !(arguments.length > 2 && void 0 !== arguments[2]) ||
            arguments[2],
            r = t.crop ? t.crop.boundary : t.boundary,
            a = [r.sx + r.w * e[0], r.sy + r.h * e[1]];
          return n ? (0, c.getTransPoint)(a, t.mat) : a
        }
      }, {
        key: "mousePosTest",
        value: function (e, t) {
          var n = this.drawOpsOfPage[this.cropId || ""];
          if (!this.cropHotRegion || !n) return {
            value: !1,
            cursorSuggestion: "default",
            cropAnchor: [0, 0]
          };
          var r = n.data,
            a = this.cropHotRegion.sp,
            i = [this.cropHotRegion.ep[0], this.cropHotRegion.sp[1]],
            A = this.cropHotRegion.ep,
            o = [this.cropHotRegion.sp[0], this.cropHotRegion.ep[1]],
            s = this.cropHotRegion.r / this.app.scale,
            u = n.data.rAngle || 0,
            c = 0;
          n && n.data.xFactor && (c += n.data.xFactor > 0 ? 0 : Math.PI / 2),
            n && n.data.yFactor && (c += n.data.yFactor > 0 ? 0 : -Math.PI / 2);
          var d = this.getCropPoint(a, r),
            h = this.getCropPoint(i, r),
            p = this.getCropPoint(A, r),
            f = this.getCropPoint(o, r);
          return (0, l.pointCollideWithPoint)([e, t], p, s) ? {
            value: !0,
            cursorSuggestion: (0, l.getScaleCursor)(Math.PI / 4 + u + c),
            cropAnchor: a
          } : (0, l.pointCollideWithPoint)([e, t], f, s) ? {
            value: !0,
            cursorSuggestion: (0, l.getScaleCursor)(Math.PI / 4 * 3 + u + c),
            cropAnchor: i
          } : (0, l.pointCollideWithPoint)([e, t], d, s) ? {
            value: !0,
            cursorSuggestion: (0, l.getScaleCursor)(Math.PI / 4 * 5 + u + c),
            cropAnchor: A
          } : (0, l.pointCollideWithPoint)([e, t], h, s) ? {
            value: !0,
            cursorSuggestion: (0, l.getScaleCursor)(Math.PI / 4 * 7 + u + c),
            cropAnchor: o
          } : (0, l.pointInVertices)([d, h, p, f], [e, t]) ? {
            value: !0,
            cursorSuggestion: "move",
            moveAnchor: {
              sp: a,
              ep: A,
              anchor: [e, t]
            }
          } : {
            value: !1,
            cursorSuggestion: "default",
            cropAnchor: [0, 0]
          }
        }
      }, {
        key: "getCropBoundary",
        value: function (e, t, n) {
          var r = n.crop ? n.crop.boundary : n.boundary,
            a = (0, c.getTransPoint)([r.sx, r.sy], n.mat),
            i = (0, c.getTransPoint)([r.sx + r.w, r.sy], n.mat),
            A = (0, c.getTransPoint)([r.sx, r.sy + r.h], n.mat),
            o = (0, l.dist)(a, i),
            s = (0, l.dist)(a, A),
            u = [i[0] - a[0], i[1] - a[1]],
            d = [A[0] - a[0], A[1] - a[1]],
            h = [e - a[0], t - a[1]],
            p = (h[0] * u[0] + h[1] * u[1]) / (u[0] * u[0] + u[1] * u[1]),
            f = (h[0] * d[0] + h[1] * d[1]) / (d[0] * d[0] + d[1] * d[1]),
            g = (this.cropAnchor, void 0),
            y = void 0;
          if (this.cropAnchor) g = [Math.max(0, Math.min(this.cropAnchor[0], p,
            1)), Math.max(Math.min(this.cropAnchor[1], f, 1), 0)], y = [Math
            .min(1, Math.max(this.cropAnchor[0], p, 0)), Math.min(Math.max(
              this.cropAnchor[1], f, 0), 1)
          ];
          else {
            var v = this.moveAnchor,
              m = (e - v.anchor[0]) / Math.max(o, 1),
              w = (t - v.anchor[1]) / Math.max(s, 1);
            m + v.sp[0] < 0 ? m = -v.sp[0] : m + v.ep[0] > 1 && (m = 1 - v.ep[
              0]), w + v.sp[1] < 0 ? w = -v.sp[1] : w + v.ep[1] > 1 && (w =
              1 - v.ep[1]), g = [v.sp[0] + m, v.sp[1] + w], y = [v.ep[0] + m,
              v.ep[1] + w
            ]
          }
          return {
            sp: g,
            ep: y
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = e.data.crop ? e.data.crop.boundary : e.data.boundary,
            a = {
              sx: n.sx + t.sp[0] * n.w,
              sy: n.sy + t.sp[1] * n.h,
              w: (t.ep[0] - t.sp[0]) * n.w,
              h: (t.ep[1] - t.sp[1]) * n.h
            };
          return (0, r.default)((0, r.default)({}, e), {
            data: (0, r.default)((0, r.default)({}, e.data), {
              boundary: a,
              crop: {
                sp: t.sp,
                ep: t.ep,
                inProgress: t.inProgress,
                boundary: n
              }
            })
          })
        }
      }]), t
    }(u.default);
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(7)),
      a = d(n(16)),
      i = d(n(2)),
      A = d(n(0)),
      o = d(n(1)),
      s = d(n(3)),
      u = d(n(4)),
      l = d(n(9)),
      c = n(15);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.type = "auxiliary", e.description = "", e.calcAuxiliaryLine =
          function (t) {
            var n = void 0,
              r = [],
              i = t.action;
            if ("snap" in t) {
              if (0 === t.ids.length) return {
                lockX: 0,
                lockY: 0
              };
              n = e.getCombinedBound(t.ids, t.opsBeforeChange, t.snap)
            } else n = t.bound;
            var A = t.ids,
              o = e.app.getCameraBound(),
              s = [];
            for (var u in e.drawOpsOfPage) {
              var l = e.drawOpsOfPage[u].data;
              if (-1 === A.indexOf(u) && "link" !== l.type && "pen" !== l.type &&
                "line" !== l.type) {
                var d = l.rAngle || 0;
                if (Math.abs(d % (Math.PI / 2)) < .02 || Math.abs(Math.PI / 2 - d % (
                    Math.PI / 2)) < .02) {
                  var h = (0, c.getTransformedBoundary)(e.app.scale, {
                    mat: l.mat,
                    boundary: l.boundary
                  });
                  if (h.sx > o.centerX + o.width / 2 || h.sx + h.w < o.centerX - o
                    .width / 2 || h.sy > o.centerY + o.height / 2 || h.sy + h.h < o
                    .centerY - o.height / 2) continue;
                  s.push(h)
                }
              }
            }
            return r = r.concat(e.calcAlignLines(n, s, t.exclude || [])), "scale" ===
              i ? r = r.concat(e.calcSizeLines(n, s)) : "move" === i && (r = r.concat(e
                .calcPadLines(n, s))), e.opsManager.currPage.setLocalOp("auxiliary", e
                .getLocalSnapshot({
                  type: e.type,
                  lines: r
                })), {
                lockX: Math.max.apply(Math, (0, a.default)(r.map((function (e) {
                  return e.lockX
                }))).concat([0])),
                lockY: Math.max.apply(Math, (0, a.default)(r.map((function (e) {
                  return e.lockY
                }))).concat([0]))
              }
          }, e.setRotateLine = function (t) {
            var n = t.id,
              r = t.snap,
              a = t.opsBeforeChange,
              i = e.opsManager.opMap[r.type],
              A = a[n],
              o = i.transformOp(A, r).data,
              s = (0, c.getTransformedBoundary)(e.app.scale, {
                mat: o.mat,
                boundary: o.boundary
              }),
              u = 16 / e.app.scale;
            e.opsManager.currPage.setLocalOp("auxiliary", e.getLocalSnapshot({
              type: e.type,
              lines: [{
                pos: [
                  [s.sx - u, s.sy - u],
                  [s.sx, s.sy - u]
                ]
              }, {
                pos: [
                  [s.sx - u, s.sy - u],
                  [s.sx - u, s.sy]
                ]
              }, {
                pos: [
                  [s.sx + s.w + u, s.sy - u],
                  [s.sx + s.w, s.sy - u]
                ]
              }, {
                pos: [
                  [s.sx + s.w + u, s.sy - u],
                  [s.sx + s.w + u, s.sy]
                ]
              }, {
                pos: [
                  [s.sx + s.w + u, s.sy + s.h + u],
                  [s.sx + s.w + u, s.sy + s.h]
                ]
              }, {
                pos: [
                  [s.sx + s.w + u, s.sy + s.h + u],
                  [s.sx + s.w, s.sy + s.h + u]
                ]
              }, {
                pos: [
                  [s.sx - u, s.sy + s.h + u],
                  [s.sx - u, s.sy + s.h]
                ]
              }, {
                pos: [
                  [s.sx - u, s.sy + s.h + u],
                  [s.sx, s.sy + s.h + u]
                ]
              }]
            }))
          }, e.calcAlignLines = function (t, n, a) {
            var i = [],
              A = 1 / e.app.scale,
              o = 3 / e.app.scale,
              s = {},
              u = !1,
              l = !1,
              c = !0,
              d = !1,
              h = void 0;
            try {
              for (var p, f = (0, r.default)(n); !(c = (p = f.next()).done); c = !0) {
                var g = p.value;
                if (u && l) break;
                var y = Math.min(g.sy, t.sy),
                  v = Math.max(g.sy + g.h, t.sy + t.h),
                  m = Math.min(g.sx, t.sx),
                  w = Math.max(g.sx + g.w, t.sx + t.w),
                  B = [
                    [g.sx + g.w / 2, t.sx + t.w / 2, 0, 1, "middle"],
                    [g.sy + g.h / 2, t.sy + t.h / 2, 0, 2, "center"],
                    [g.sx, t.sx, -o, 1, "left"],
                    [g.sx, t.sx + t.w, 0, 1, "left"],
                    [g.sx + g.w, t.sx, 0, 1, "right"],
                    [g.sx + g.w, t.sx + t.w, o, 1, "right"],
                    [g.sy, t.sy, -o, 2, "top"],
                    [g.sy, t.sy + t.h, 0, 2, "top"],
                    [g.sy + g.h, t.sy, 0, 2, "bottom"],
                    [g.sy + g.h, t.sy + t.h, o, 2, "bottom"]
                  ],
                  M = l,
                  C = u,
                  I = !0,
                  x = !1,
                  b = void 0;
                try {
                  for (var k, T = (0, r.default)(B); !(I = (k = T.next()).done); I = !
                    0) {
                    var E = k.value;
                    if (1 !== E[3] || M) {
                      if (2 === E[3] && !C) {
                        if (("top" === E[4] || "bottom" === E[4]) && s.center) continue;
                        if (Math.abs(E[0] - E[1]) < A) {
                          var D = !1,
                            N = !0,
                            P = !1,
                            Q = void 0;
                          try {
                            for (var O, _ = (0, r.default)(a); !(N = (O = _.next())
                                .done); N = !0) {
                              var S = O.value;
                              "h" === S.dir && Math.abs(E[1] - S.val) < A && (D = !0)
                            }
                          } catch (e) {
                            P = !0, Q = e
                          } finally {
                            try {
                              !N && _.return && _.return()
                            } finally {
                              if (P) throw Q
                            }
                          }
                          if (D) continue;
                          var U = Math.abs(t.sx + t.w / 2 - g.sx - g.w / 2);
                          s[E[4]] || (s[E[4]] = {
                            pos: [
                              [m, E[0] + E[2]],
                              [w, E[0] + E[2]]
                            ],
                            dist: U,
                            lockX: 0,
                            lockY: 20
                          }, u = !0)
                        }
                      }
                    } else {
                      if (("left" === E[4] || "right" === E[4]) && s.middle) continue;
                      if (Math.abs(E[0] - E[1]) < A) {
                        var F = !1,
                          L = !0,
                          j = !1,
                          z = void 0;
                        try {
                          for (var R, H = (0, r.default)(a); !(L = (R = H.next())
                            .done); L = !0) {
                            var Y = R.value;
                            "v" === Y.dir && Math.abs(E[1] - Y.val) < A && (F = !0)
                          }
                        } catch (e) {
                          j = !0, z = e
                        } finally {
                          try {
                            !L && H.return && H.return()
                          } finally {
                            if (j) throw z
                          }
                        }
                        if (F) continue;
                        var W = Math.abs(t.sy + t.h / 2 - g.sy - g.h / 2);
                        s[E[4]] || (s[E[4]] = {
                          pos: [
                            [E[0] + E[2], y],
                            [E[0] + E[2], v]
                          ],
                          dist: W,
                          lockX: 20,
                          lockY: 0
                        }, l = !0)
                      }
                    }
                  }
                } catch (e) {
                  x = !0, b = e
                } finally {
                  try {
                    !I && T.return && T.return()
                  } finally {
                    if (x) throw b
                  }
                }
              }
            } catch (e) {
              d = !0, h = e
            } finally {
              try {
                !c && f.return && f.return()
              } finally {
                if (d) throw h
              }
            }
            for (var K in s) i.push(s[K]);
            return i
          }, e.calcSizeLines = function (t, n) {
            var a = [],
              i = 2 / e.app.scale,
              A = 16 / e.app.scale,
              o = !1,
              s = !1,
              u = !0,
              l = !1,
              c = void 0;
            try {
              for (var d, h = (0, r.default)(n); !(u = (d = h.next()).done); u = !0) {
                var p = d.value;
                Math.abs(p.w - t.w) < i && (o = !0, a.push({
                  pos: [
                    [p.sx, p.sy + p.h + A],
                    [p.sx + p.w, p.sy + p.h + A]
                  ],
                  h: !0,
                  lockX: 8,
                  lockY: 0
                })), Math.abs(p.h - t.h) < i && (s = !0, a.push({
                  pos: [
                    [p.sx + p.w + A, p.sy],
                    [p.sx + p.w + A, p.sy + p.h]
                  ],
                  h: !1,
                  lockX: 0,
                  lockY: 8
                }))
              }
            } catch (e) {
              l = !0, c = e
            } finally {
              try {
                !u && h.return && h.return()
              } finally {
                if (l) throw c
              }
            }
            return o && a.push({
              pos: [
                [t.sx, t.sy + t.h + A],
                [t.sx + t.w, t.sy + t.h + A]
              ],
              h: !0,
              lockX: 8,
              lockY: 0
            }), s && a.push({
              pos: [
                [t.sx + t.w + A, t.sy],
                [t.sx + t.w + A, t.sy + t.h]
              ],
              h: !1,
              lockX: 0,
              lockY: 8
            }), a
          }, e.calcPadLines = function (t, n) {
            var r = [];
            return r = (r = r.concat(e._calcPadLines(t, n, "h"))).concat(e
              ._calcPadLines(t, n, "v"))
          }, e._calcPadLines = function (t, n, r) {
            for (var a = 3 / e.app.scale, i = n.map((function (n) {
                return e.getPadAndIntersect(t, n, r, !0)
              })).filter((function (t) {
                return null != t && t.pad > 25 / e.app.scale
              })), A = (i = (i = i.sort((function (e, t) {
                return e.pad - t.pad
              }))).slice(0, 10)).slice(), o = 0; o < i.length; o++)
              for (var s = o + 1; s < i.length; s++) {
                var u = e.getPadAndIntersect(i[o].b2, i[s].b2, r, !1);
                u && A.push(u)
              }
            A = A.sort((function (e, t) {
              return e.pad - t.pad
            }));
            for (var l = 0; l < A.length; l++) {
              var c = A[l].inter.slice(),
                d = [l];
              if (A[l].hasBase) {
                for (var h = l + 1; h < A.length; h++)
                  if (A[h].pad - A[l].pad <= a) {
                    var p = [Math.max(c[0], A[h].inter[0]), Math.min(c[1], A[h].inter[
                      1])];
                    if (p[0] < p[1]) d.push(h), c = p;
                    else if (d.length > 1) return e.getPadRes(A, d, r, c[0] / 2 + c[1] /
                      2)
                  } else if (d.length > 1) return e.getPadRes(A, d, r, c[0] / 2 + c[1] /
                  2);
                if (d.length > 1) return e.getPadRes(A, d, r, c[0] / 2 + c[1] / 2)
              }
            }
            return []
          }, e.getPadRes = function (t, n, a, i) {
            var A = [],
              o = 4 / e.app.scale,
              s = !0,
              u = !1,
              l = void 0;
            try {
              for (var c, d = (0, r.default)(n); !(s = (c = d.next()).done); s = !0) {
                var h = c.value;
                "h" === a ? A.push({
                  pos: [
                    [t[h].s + o, i],
                    [t[h].e - o, i]
                  ],
                  h: !0,
                  lockX: 20,
                  lockY: 0
                }) : A.push({
                  pos: [
                    [i, t[h].s + o],
                    [i, t[h].e - o]
                  ],
                  h: !1,
                  lockX: 0,
                  lockY: 20
                })
              }
            } catch (e) {
              u = !0, l = e
            } finally {
              try {
                !s && d.return && d.return()
              } finally {
                if (u) throw l
              }
            }
            return A
          }, e.getPadAndIntersect = function (e, t, n, r) {
            if ("h" === n) {
              if (e.sy + e.h > t.sy && e.sy < t.sy + t.h) return e.sx + e.w < t.sx ? {
                b1: e,
                b2: t,
                pad: Math.abs(t.sx - (e.sx + e.w)),
                inter: [Math.max(e.sy, t.sy), Math.min(e.sy + e.h, t.sy + t.h)],
                hasBase: r,
                s: e.sx + e.w,
                e: t.sx
              } : e.sx > t.sx + t.w ? {
                b1: e,
                b2: t,
                pad: Math.abs(e.sx - (t.sx + t.w)),
                inter: [Math.max(e.sy, t.sy), Math.min(e.sy + e.h, t.sy + t.h)],
                hasBase: r,
                s: t.sx + t.w,
                e: e.sx
              } : void 0
            } else if ("v" === n && e.sx + e.w > t.sx && e.sx < t.sx + t.w) return e
              .sy + e.h < t.sy ? {
                b1: e,
                b2: t,
                pad: Math.abs(t.sy - (e.sy + e.h)),
                inter: [Math.max(e.sx, t.sx), Math.min(e.sx + e.w, t.sx + t.w)],
                hasBase: r,
                s: e.sy + e.h,
                e: t.sy
              } : e.sy > t.sy + t.h ? {
                b1: e,
                b2: t,
                pad: Math.abs(e.sy - (t.sy + t.h)),
                inter: [Math.max(e.sx, t.sx), Math.min(e.sx + e.w, t.sx + t.w)],
                hasBase: r,
                s: t.sy + t.h,
                e: e.sy
              } : void 0
          }, e.clean = function () {
            e.opsManager.currPage.setLocalOp(["auxiliary"], void 0)
          }, e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "getCombinedBound",
        value: function (e, t, n) {
          var r = this;
          e = e.filter((function (e) {
            return t.hasOwnProperty(e)
          }));
          var a = this.opsManager.opMap[n.type];
          return e.map((function (e) {
            var i = t[e],
              A = a.transformOp(i, n).data;
            return (0, c.getTransformedBoundary)(r.app.scale, A)
          })).reduce((function (e, t) {
            return (0, c.combineBoundary)(e, t)
          }))
        }
      }, {
        key: "draw",
        value: function (e, t) {
          var n = e.data;
          t.strokeStyle = "rgba(25, 64, 250, 0.5)", t.lineWidth = 1.2 / this.app
            .scale;
          var a = 6 / this.app.scale,
            i = !0,
            A = !1,
            o = void 0;
          try {
            for (var s, u = (0, r.default)(n.lines); !(i = (s = u.next())
              .done); i = !0) {
              var l = s.value,
                c = l.pos;
              t.beginPath(), t.moveTo(c[0][0], c[0][1]), t.lineTo(c[1][0], c[1][
                1
              ]), !0 === l.h ? (t.moveTo(c[0][0], c[0][1] - a), t.lineTo(c[0][
                0
              ], c[0][1]), t.moveTo(c[1][0], c[1][1] - a), t.lineTo(c[1][0],
                c[1][1])) : !1 === l.h && (t.moveTo(c[0][0] - a, c[0][1]), t
                .lineTo(c[0][0], c[0][1]), t.moveTo(c[1][0] - a, c[1][1]), t
                .lineTo(c[1][0], c[1][1])), t.stroke()
            }
          } catch (e) {
            A = !0, o = e
          } finally {
            try {
              !i && u.return && u.return()
            } finally {
              if (A) throw o
            }
          }
        }
      }]), t
    }(l.default);
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(5)),
      a = u(n(2)),
      i = u(n(0)),
      A = u(n(1)),
      o = u(n(3)),
      s = u(n(4));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.type = "layer", e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            exec: {
              value: !0,
              information: {
                args: "",
                message: "删除当前选中的元素"
              }
            },
            "layer:update": {
              value: this.updateLayers.bind(this),
              information: {
                args: "opIds: Array<string>, dir: 'top' | 'bottom'",
                message: "删除ops"
              }
            }
          }
        }
      }, {
        key: "updateLayers",
        value: function (e, t) {
          if (console.log("updateLayers", e, t), 0 !== e.length) {
            var n = Date.now() + this.app.ntpTimeDiff;
            this.dispatch({
              type: "layer",
              inProgress: !1,
              dependOn: e,
              layer: "top" === t ? n : -n
            })
          }
        }
      }, {
        key: "transformOp",
        value: function (e, t) {
          var n = (0, r.default)({}, e.data, {
            layer: t.layer
          });
          return (0, r.default)({}, e, {
            data: n
          })
        }
      }]), t
    }(u(n(9)).default);
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(16)),
      a = p(n(7)),
      i = p(n(75)),
      A = p(n(42)),
      o = p(n(2)),
      s = p(n(0)),
      u = p(n(1)),
      l = p(n(3)),
      c = p(n(4)),
      d = p(n(9)),
      h = n(107);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t() {
        (0, s.default)(this, t);
        var e = (0, l.default)(this, (t.__proto__ || (0, o.default)(t)).apply(this,
          arguments));
        return e.type = "group", e
      }
      return (0, c.default)(t, e), (0, u.default)(t, [{
        key: "eventsToListen",
        value: function () {
          return {
            group: {
              value: this.group.bind(this),
              information: {
                args: "group: boolean, opIds: Array<string>",
                message: "删除ops"
              }
            }
          }
        }
      }, {
        key: "group",
        value: function (e, t) {
          0 !== t.length && (e ? this.dispatch({
            type: "group",
            group: e,
            dependOn: t.slice(),
            gid: (0, h.v4)()
          }) : this.dispatch({
            type: "group",
            group: e,
            dependOn: t.slice()
          }))
        }
      }, {
        key: "getOpIdsInGroups",
        value: function (e) {
          var t = new A.default,
            n = this.opsManager.currPage,
            r = new A.default,
            o = !0,
            s = !1,
            u = void 0;
          try {
            for (var l, c = (0, a.default)(e); !(o = (l = c.next()).done); o = !
              0) {
              var d = l.value;
              t.add(d), (v = n.idToGroup.get(d)) && r.add(v)
            }
          } catch (e) {
            s = !0, u = e
          } finally {
            try {
              !o && c.return && c.return()
            } finally {
              if (s) throw u
            }
          }
          var h = !0,
            p = !1,
            f = void 0;
          try {
            for (var g, y = (0, a.default)(r); !(h = (g = y.next()).done); h = !
              0) {
              var v = g.value,
                m = n.groups.get(v);
              if (m) {
                var w = !0,
                  B = !1,
                  M = void 0;
                try {
                  for (var C, I = (0, a.default)(m); !(w = (C = I.next())
                    .done); w = !0) {
                    var x = C.value;
                    t.add(x)
                  }
                } catch (e) {
                  B = !0, M = e
                } finally {
                  try {
                    !w && I.return && I.return()
                  } finally {
                    if (B) throw M
                  }
                }
              }
            }
          } catch (e) {
            p = !0, f = e
          } finally {
            try {
              !h && y.return && y.return()
            } finally {
              if (p) throw f
            }
          }
          return (0, i.default)(t)
        }
      }, {
        key: "reset",
        value: function (e) {
          e.idToGroup.clear(), e.groups.clear()
        }
      }, {
        key: "process",
        value: function (e, t) {
          var n = t.data,
            i = t.data.gid || t.opId,
            o = !0,
            s = !1,
            u = void 0;
          try {
            for (var l, c = (0, a.default)(n.dependOn); !(o = (l = c.next())
                .done); o = !0) {
              var d = l.value,
                h = e.idToGroup.get(d);
              !h || t.data.group && h === i || (e.idToGroup.delete(d), w(h, d))
            }
          } catch (e) {
            s = !0, u = e
          } finally {
            try {
              !o && c.return && c.return()
            } finally {
              if (s) throw u
            }
          }
          if (n.group) {
            e.groups.has(i) ? e.groups.set(i, new A.default([].concat((0, r
                .default)(n.dependOn), (0, r.default)(e.groups.get(i))))) : e
              .groups.set(i, new A.default(n.dependOn));
            var p = !0,
              f = !1,
              g = void 0;
            try {
              for (var y, v = (0, a.default)(n.dependOn); !(p = (y = v.next())
                  .done); p = !0) {
                var m = y.value;
                e.idToGroup.set(m, i)
              }
            } catch (e) {
              f = !0, g = e
            } finally {
              try {
                !p && v.return && v.return()
              } finally {
                if (f) throw g
              }
            }
          }

          function w(t, n) {
            var r = e.groups.get(t);
            r && (r.delete(n), r.size <= 1 && e.groups.delete(t))
          }
        }
      }]), t
    }(d.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(2)),
      a = l(n(0)),
      i = l(n(1)),
      A = l(n(3)),
      o = l(n(4)),
      s = n(157),
      u = l(n(22));

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return e.type = "macro", e.description = "宏教具", e.sx = 0, e.sy = 0, e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "validatePayloads",
        value: function () {
          var e, t, n, r = this.opsManager.currOpPayload;
          r ? -1 === ["image", "text"].indexOf(r.type) ? this.app.logger.error(
              "[ws] MacroOp.validatePayloads: payload type should be either image or text. Now it is : " +
              r.type) : r.hasOwnProperty("clkAdd") ? r.hasOwnProperty(
            "dragAdd") ? "image" === r.type ? (null === (e = r.attr) ||
              void 0 === e ? void 0 : e.url) || this.logger.error(
              "[ws] MacroOp.validatePayloads: when type === 'image', 'attr.url' is needed"
              ) : "text" === r.type && (!(null === (t = r.attr) || void 0 ===
                t ? void 0 : t.text) || r.attr.text.length > 100 ? this.logger
              .error(
                "[ws] MacroOp.validatePayloads: when type === 'text', the length of 'attr.text' should be between 1 and 100"
                ) : (null === (n = r.attr) || void 0 === n ? void 0 : n
                .fontSize) && ("number" != typeof r.attr.fontSize || isNaN(r
                  .attr.fontSize) || r.attr.fontSize < 12 || r.attr.fontSize >
                300) && this.logger.error(
                "[ws] MacroOp.validatePayloads: when type === 'text', 'attr.fontSize' must be a number and between 12 and 300"
                )) : this.app.logger.error(
              "[ws] MacroOp.validatePayloads: payload attribute 'dragAdd' is needed"
              ) : this.app.logger.error(
              "[ws] MacroOp.validatePayloads: payload attribute 'clkAdd' is needed"
              ) : this.app.logger.error(
              "[ws] MacroOp.validatePayloads: payload is needed")
        }
      }, {
        key: "handleMouseDown",
        value: function (e, t, n) {
          this.beginBatch(), this.sx = t, this.sy = n
        }
      }, {
        key: "handleMouseUp",
        value: function (e, t, n, r, a) {
          this.isMouseMoved ? this.dispatchDraggingPayload(t, n, "mouseup") :
            this.handleClick(e, t, n)
        }
      }, {
        key: "handleMouseMove",
        value: function (e, t, n) {
          var r = this.opsManager.currOpPayload;
          r && (this.app.container.isTargetOnContainer(e.target) ? r.cursor ?
              document.body.style.cursor = r.cursor : "text" === r.type ?
              document.body.style.cursor = "text" : "image" === r.type ?
              document.body.style.cursor = "pointer" : document.body.style
              .cursor = "auto" : document.body.style.cursor = "auto"), this
            .isMouseDown && this.dispatchDraggingPayload(t, n, "mousemove")
        }
      }, {
        key: "dispatchDraggingPayload",
        value: function (e, t, n) {
          var r = this.opsManager.currOpPayload;
          if (r && r.dragAdd && "image" === r.type) {
            var a = r.attr.url,
              i = Math.max(Math.abs(e - this.sx), 1),
              A = Math.max(Math.abs(t - this.sy), 1),
              o = e > this.sx ? 0 : 1,
              s = t > this.sy ? 0 : 1;
            this.opsManager.imageOp.addImage(a, {
              inProgress: "mousemove" === n,
              width: i,
              height: A,
              pos: {
                mx: this.sx,
                my: this.sy,
                size: "relative",
                origin: {
                  x: o,
                  y: s
                }
              }
            })
          }
        }
      }, {
        key: "handleClick",
        value: function (e, t, n) {
          var r = this.opsManager.currOpPayload;
          if (r && r.clkAdd)
            if ("image" === r.type) {
              var a = r.attr,
                i = a.url,
                A = a.width,
                o = a.height,
                l = r.origin ? r.origin : {
                  x: 0,
                  y: 0
                };
              this.opsManager.imageOp.addImage(i, {
                width: A,
                height: o,
                pos: {
                  my: n,
                  mx: t,
                  size: r.size ? r.size : "relative",
                  origin: l
                }
              })
            } else if ("text" === r.type) {
            var c = r.attr,
              d = c.text,
              h = c.fontSize,
              p = c.fontFamily,
              f = c.stroke;
            if (h = h || 32, !d || d.length > 100) return void this.app.logger
              .error(
                "[ws] The length of text marco must be between 1 and 100");
            if (!h || !(0, s.isNumber)(h) || h < 12 || h > 300) return void this
              .app.logger.error(
                "[ws] fontSize of text macro is needed, and must be between 12 and 300."
                );
            p = p || u.default.textDef.fontFamily, f = f || u.default.textDef
              .stroke;
            var g = r.attr.hasOwnProperty("fill") ? r.attr.fill : u.default
              .textDef.fill,
              y = this.opsManager.textOp.getTextSize({
                text: d,
                fontSize: h,
                fontFamily: p
              });
            this.dispatch({
              type: "text",
              boundary: {
                w: y.w,
                h: y.h,
                sx: t - y.w / 2,
                sy: n - y.h / 2
              },
              stroke: f,
              textAlign: "center",
              fill: g,
              text: d,
              fontSize: h,
              fontFamily: p,
              inProgress: !1
            })
          }
        }
      }]), t
    }(l(n(9)).default);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = M(n(5)),
      a = M(n(7)),
      i = M(n(21)),
      A = M(n(20)),
      o = M(n(42)),
      s = M(n(0)),
      u = M(n(1)),
      l = M(n(242)),
      c = n(46),
      d = n(148),
      h = n(365),
      p = n(250),
      f = n(366),
      g = n(96),
      y = n(72),
      v = n(31),
      m = M(n(32)),
      w = n(14),
      B = M(n(159));

    function M(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var C = 0,
      I = function () {
        function e(t, n) {
          var r = this;
          (0, s.default)(this, e), this.importingBoards = !1, this
            .snapsDuringImporting = [], this.importPkgId = -1, this.executedClientIdSet =
            new o.default, this.currIndex = "whiteboard", this
            .isReceivingBatchSnapshots = !1, this.boards = {}, this.pkgIdOpIdMap = {},
            this.pageToRefresh = void 0, this.pageToIncRefresh = void 0, this
            .opIdSnapshotMap = {}, this.boardsSnapshotIds = [], this
            .globalSnapshotIds = [], this.boardOps = {}, this.delayedSnaps = [], this
            .mergeFailCache = {}, this._startRefreshLoop2 = function () {
              if (!r.app.destroyed) {
                cancelAnimationFrame(r.refreshAnimationTimer);
                try {
                  r.refreshAnimationTimer = requestAnimationFrame((function () {
                    return r._startRefreshLoop2()
                  }))
                } catch (e) {
                  C < 10 && (C += 1, r.logger.error("[wb]requestAnimationFrame error")), (
                    0, f.polyfillRaf)(), r._startRefreshLoop()
                }(r.pageToRefresh && r.pageToRefresh === r.currBoard.currPage || r
                  .pageToIncRefresh && r.pageToIncRefresh === r.currBoard.currPage) && r
                  .currBoard.currPage.refreshOnStreamCanvas(), r.pageToRefresh && r
                  .pageToRefresh === r.currBoard.currPage && (r.pageToRefresh = void 0, r
                    .currBoard.currPage.refresh()), r.pageToIncRefresh && r
                  .pageToIncRefresh === r.currBoard.currPage && (r.pageToIncRefresh =
                    void 0, r.currBoard.currPage.incRefresh())
              }
            }, this.app = t, this.dataHub = n, this._init()
        }
        return (0, u.default)(e, [{
          key: "updateDefaultBoardName",
          value: function (e) {
            var t = this.boards.whiteboard;
            t && e.length > 0 && e.length <= 64 && (t.displayName = e, this.app
              .opsManager.hooks.boardChange.call())
          }
        }, {
          key: "getBoardSnapshots",
          value: function () {
            var e = this;
            return this.boardsSnapshotIds.map((function (t) {
              return e.opIdSnapshotMap[t]
            })).filter((function (e) {
              return "goto" !== e.snapshot.data.action
            }))
          }
        }, {
          key: "getBoardDisplayNames",
          value: function () {
            var e = this;
            return (0, A.default)(this.boards).map((function (t) {
              return e.boards[t].displayName
            }))
          }
        }, {
          key: "getPageWithFallback",
          value: function (e, t) {
            e = void 0 === e ? this.currBoard.boardName : e;
            var n = this.boards[e],
              r = void 0;
            if (n) {
              if (r = void 0 === t ? n.pages[n.currIndex] : n.pages[t]) return r;
              this.logger.warn("[wb]getPageWithFallback 找不到boardName为" + e +
                "，pageName为" + t + "的白板页")
            } else this.logger.warn("[wb]getPageWithFallback 找不到boardName为" + e +
              "的文档")
          }
        }, {
          key: "getPage",
          value: function (e, t) {
            var n = !(arguments.length > 2 && void 0 !== arguments[2]) ||
              arguments[2],
              r = this.boards[e];
            if (!r) return n && this.app.dataReportUtil("v3_run_error", {
              error: {
                code: y.DataReportRunError.Board_Lost,
                message: (0, i.default)({
                  snaps: this.getBoardSnapshots(),
                  board: e,
                  page: t
                })
              }
            }), void this.logger.warn("[wb]getPage: 找不到名字为" + e +
              "的白板，当前房间白板列表为: " + (0, A.default)(this.app.room.boards).join(
                ","));
            var a = r.pages[t];
            return a || (n && this.app.dataReportUtil("v3_run_error", {
                error: {
                  code: y.DataReportRunError.Page_Lost,
                  message: (0, i.default)({
                    snaps: r.getPageSnapshots(),
                    board: e,
                    page: t
                  })
                }
              }), void this.logger.warn("[wb]getPage: 找不到boardName: " + e +
                ", pageName: " + t + "的白板页，当前房间白板页码为: " + r.pageNames.join(",")
                ))
          }
        }, {
          key: "getPageByBoardNameAndIndex",
          value: function (e, t) {
            var n = this.boards[e];
            if (n) {
              var r = n.pageNames[t];
              if (r) {
                if (n.pages[r]) return n.pages[r];
                this.logger.warn(
                  "[wb]getPageByBoardNameAndIndex: 找不到找不到boardName: " + e +
                  ", pageName: " + r + "的的白板页，当前房间白板页码为: " + n.pageNames.join(
                    ","))
              } else this.logger.warn(
                "[wb]getPageByBoardNameAndIndex: 找不到找不到boardName: " + e +
                ", pageIndex: " + t + "的的白板页，当前房间白板页码为: " + n.pageNames.join(
                  ","))
            } else this.logger.warn("[wb]getPageByBoardNameAndIndex: 找不到名字为" + e +
              "的白板，当前房间白板列表为: " + (0, A.default)(this.app.room.boards).join(",")
              )
          }
        }, {
          key: "getPageNameFromIndex",
          value: function (e, t) {
            if (void 0 !== t) {
              e = e || this.currBoard.boardName;
              var n = this.getPageByBoardNameAndIndex(e, t);
              return null == n ? void 0 : n.pageIndex
            }
          }
        }, {
          key: "recoverFullSnapshot",
          value: function (e) {
            var t = this.opIdSnapshotMap[e.opId] && this.opIdSnapshotMap[e.opId]
              .snapshot.data.type,
              n = e.data.type;
            if (t && n) return this.app.opsManager.mergePartial(this
              .opIdSnapshotMap[e.opId].snapshot, e);
            if (n) {
              var r = this.mergeFailCache[e.opId],
                i = e;
              if (r) {
                var A = !0,
                  o = !1,
                  s = void 0;
                try {
                  for (var u, l = (0, a.default)(r); !(A = (u = l.next())
                    .done); A = !0) {
                    var c = u.value;
                    i = this.app.opsManager.mergePartial(i, c)
                  }
                } catch (e) {
                  o = !0, s = e
                } finally {
                  try {
                    !A && l.return && l.return()
                  } finally {
                    if (o) throw s
                  }
                }
                delete this.mergeFailCache[e.opId]
              }
              return i
            }
            return t ? (delete this.mergeFailCache[e.opId], this.app.opsManager
              .mergePartial(this.opIdSnapshotMap[e.opId].snapshot, e)) : (this
              .mergeFailCache[e.opId] = this.mergeFailCache[e.opId] || [], this
              .mergeFailCache[e.opId].push(e), e)
          }
        }, {
          key: "destroy",
          value: function () {
            var e, t;
            this.logger.log("[wb] room destroy"), this._init(), null === (t =
                null === (e = this.currBoard) || void 0 === e ? void 0 : e
                .currPage) || void 0 === t || t.cleanNonCanvasElements(),
              cancelAnimationFrame(this.refreshAnimationTimer)
          }
        }, {
          key: "reset",
          value: function () {
            var e, t, n;
            this.logger.log("[wb]", "room.reset"), this._init(), null === (t =
                null === (e = this.currBoard) || void 0 === e ? void 0 : e
                .currPage) || void 0 === t || t.cleanNonCanvasElements(), this
              .pageToRefresh = null === (n = this.currBoard) || void 0 === n ?
              void 0 : n.currPage
          }
        }, {
          key: "beginReceiveBatchSnapshots",
          value: function (e) {
            this.batchSource = e, this.isReceivingBatchSnapshots = !0
          }
        }, {
          key: "endReceiveBatchSnapshots",
          value: function (e) {
            var t, n, r, a = this,
              i = e.boundaries,
              A = e.hasBoardAction,
              o = e.cb,
              s = e.batchSource;
            if (this.batchSource = void 0, this.isReceivingBatchSnapshots = !1,
              this.currBoard.currPage.calcDrawOpQueue(), i.length > 0) {
              var u = i[i.length - 1];
              u.boundary.width > 0 && u.boundary.height > 0 ? !u.animate ||
                "sync" === s && "function" == typeof o ? ((0, d
                    .stopTransitionToCameraBound)(), this.app.camera
                  .setCameraBound(u.boundary), null === (t = this.app
                    .previewFactory) || void 0 === t || t
                  .refreshPreviewsOfCurrBoard(), "function" == typeof o && o(!0)
                  ) : (0, d.transitionToCameraBound)(this.app.camera, u.boundary,
                  (function () {
                    var e;
                    null === (e = a.app.previewFactory) || void 0 === e || e
                      .refreshPreviewsOfCurrBoard(), "function" == typeof o &&
                      o(!0)
                  })) : "function" == typeof o && o(!1)
            } else this.pageToRefresh = this.currBoard.currPage, A ? null === (n =
                this.app.previewFactory) || void 0 === n || n
              .refreshPreviewsOfCurrBoard() : null === (r = this.app
                .previewFactory) || void 0 === r || r.refreshPreviewsOfCurrPage(),
              "function" == typeof o && o(!1)
          }
        }, {
          key: "dispatch",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[
              1];
            if (!this.app.destroyed) {
              var n = -1 !== c.cameraSnapshotTypes.indexOf(e.data.type);
              if ("camera-bound" !== e.data.type || e.data.boundary.width && e
                .data.boundary.height) {
                if (!this.app.editable && !n) {
                  if (this.app.isRecordPlayer) return;
                  if (!this.app.editEnabled) return this.logger.warn(
                    "[wb] room.dispatch: app is not editable yet");
                  if (this.importingBoards) return;
                  var r = (0, p.shouldCacheSnapshot)(e);
                  if (r) return this.logger.log("[wb]白板恢复后会上传数据: " + e.data.type),
                    (0, v.showToast)({
                      time: 30,
                      type: "warn",
                      msg: (0, w.getMsg)("delayAdd"),
                      msgType: m.default.SYNCHRONIZING,
                      args: {
                        name: name
                      }
                    }), void this.delayedSnaps.push({
                      snap: e,
                      time: Date.now()
                    });
                  if (!this.app.isConnected) return this.logger.error(
                    "[wb] room.dispatch: it' not allowed to edit whiteboard when it's not connected"
                    );
                  if (this.dataHub.isSynchronizing) return this.logger.error(
                    "[wb] room.dispatch: it' not allowed to edit whiteboard when sync is not finished"
                    )
                }
                if (this.dataHub.isSynchronizing) "camera-bound" !== e.data
                  .type && this.logger.error(
                    "[wb] room.dispatch: it' not allowed to edit whiteboard when sync is not finished"
                    );
                else if (n && "broadcaster" !== this.app.vision.mode)(0, h
                  .addGlobalOp)(this, e);
                else {
                  if (this.importingBoards) return;
                  var a = this.dataHub.sendSnapshot(e, t);
                  this.execSnapshot({
                    snapshot: e,
                    pkgId: a
                  })
                }
              } else this.logger.warn("[wb]error, dispatch camera-bound的宽高无效", (0,
                i.default)(e.data))
            }
          }
        }, {
          key: "execCachedSnapshots",
          value: function (e) {
            var t = (0, A.default)(e.pkgIdOpIdMap).map((function (e) {
                return Number(e)
              })).sort((function (e, t) {
                return e - t
              })),
              n = [],
              r = !0,
              i = !1,
              o = void 0;
            try {
              for (var s, u = (0, a.default)(t); !(r = (s = u.next()).done); r = !
                0) {
                var l = s.value;
                if (Number(l) <= e.lastConfirmId) {
                  var c = e.pkgIdOpIdMap[l],
                    d = !0,
                    h = !1,
                    p = void 0;
                  try {
                    for (var f, g = (0, a.default)(c); !(d = (f = g.next())
                      .done); d = !0) {
                      var y = f.value;
                      n.push(e.opIdSnapshotMap[y])
                    }
                  } catch (e) {
                    h = !0, p = e
                  } finally {
                    try {
                      !d && g.return && g.return()
                    } finally {
                      if (h) throw p
                    }
                  }
                }
              }
            } catch (e) {
              i = !0, o = e
            } finally {
              try {
                !r && u.return && u.return()
              } finally {
                if (i) throw o
              }
            }
            this.execBatchSnapshots(n, "sync")
          }
        }, {
          key: "getCachedTil",
          value: function (e) {
            for (var t = (0, A.default)(this.pkgIdOpIdMap).map((function (e) {
                return Number(e)
              })).sort((function (e, t) {
                return e - t
              })), n = t.length - 1; n >= 0; n--)
              if (t[n] <= e) return t[n];
            return -1
          }
        }, {
          key: "executeDelayedSnaps",
          value: function () {
            if (this.app.editEnabled)
              for (; this.delayedSnaps.length > 0;) {
                var e = this.delayedSnaps.shift(),
                  t = Date.now();
                if (t - e.time < 3e4) {
                  if (("video" === e.snap.data.type || "audio" === e.snap.data
                      .type) && this.app.hasMediaOnPage(!1)) continue;
                  e.snap.time = t, this.dispatch(e.snap)
                }
              } else this.delayedSnaps = []
          }
        }, {
          key: "execSnapshot",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : {
                fromBatch: !1,
                batchSource: "data"
              },
              n = (0, r.default)((0, r.default)({}, e), {
                snapshot: this.recoverFullSnapshot(e.snapshot)
              });
            if (this.importingBoards) this.snapsDuringImporting.push(n);
            else {
              t.fromBatch || (this.cacheSnapshot(n, !0), this.pushSnapshotToQueue(
                n));
              var a = n.snapshot;
              if ("inPageOp" === a.category) {
                var i = this.getPage(a.board, a.page.toString(), !1);
                i && i.addOpInPage(a)
              } else if ("pageOp" === a.category) {
                var A = this.boards[a.board];
                A && A.addOpInBoard(a)
              } else "globalOp" === a.category ? (0, h.addGlobalOp)(this, a) : (0,
                h.addOpInRoom)(this, a, {
                fromBatch: t.fromBatch && "data" !== t.batchSource
              })
            }
          }
        }, {
          key: "importInPageOps",
          value: function (e) {
            var t = !0,
              n = !1,
              r = void 0;
            try {
              for (var i, A = (0, a.default)(e); !(t = (i = A.next()).done); t = !
                0) {
                var o = i.value;
                this.pushSnapshotToQueue({
                  pkgId: this.importPkgId,
                  snapshot: o
                }), this.opIdSnapshotMap[o.opId] = {
                  snapshot: o,
                  pkgId: this.importPkgId
                }, this.importPkgId--
              }
            } catch (e) {
              n = !0, r = e
            } finally {
              try {
                !t && A.return && A.return()
              } finally {
                if (n) throw r
              }
            }
          }
        }, {
          key: "execBatchSnapshots",
          value: function (e, t, n) {
            var i = this;
            console.log("execBatchSnapshots 从远程批量接收快照: ", e);
            var A = e.map((function (e) {
                var t = (0, r.default)((0, r.default)({}, e), {
                  snapshot: i.recoverFullSnapshot(e.snapshot)
                });
                return i.cacheSnapshot(t, !0), i.pushSnapshotToQueue(t), t
              })),
              o = 0 === A.filter((function (e) {
                return "inPageOp" !== e.snapshot.category
              })).length,
              s = A.filter((function (e) {
                return "boardOp" === e.snapshot.category
              })).length > 0,
              u = A.filter((function (e) {
                return "globalOp" === e.snapshot.category &&
                  "camera-bound" === e.snapshot.data.type
              })).map((function (e) {
                return {
                  animate: e.snapshot.data.animate,
                  boundary: (0, p.getCameraBoundFromGlobalOp)(i, e.snapshot)
                }
              })).filter((function (e) {
                return e.boundary
              })),
              l = A.filter((function (e) {
                return "globalOp" !== e.snapshot.category ||
                  "camera-bound" !== e.snapshot.data.type
              }));
            if (o) {
              var c = !1;
              l.forEach((function (e) {
                var t = e.snapshot,
                  n = i.getPage(t.board, t.page.toString());
                n && (c = n.addOpInPage(t, !1) || c)
              })), c ? this.endReceiveBatchSnapshots({
                boundaries: [],
                hasBoardAction: !1,
                batchSource: t,
                cb: n
              }) : "function" == typeof n && n(!1)
            } else {
              this.beginReceiveBatchSnapshots(t);
              try {
                var d = {},
                  h = !0,
                  f = !1,
                  y = void 0;
                try {
                  for (var v, m = (0, a.default)(l); !(h = (v = m.next())
                    .done); h = !0) {
                    var w = v.value,
                      B = w.snapshot.data.type; - 1 === g.overwritableTypes
                      .indexOf(B) ? this.execSnapshot(w, {
                        fromBatch: !0,
                        batchSource: t
                      }) : d[w.snapshot.opId] = w
                  }
                } catch (e) {
                  f = !0, y = e
                } finally {
                  try {
                    !h && m.return && m.return()
                  } finally {
                    if (f) throw y
                  }
                }
                for (var M in d) this.execSnapshot(d[M], {
                  fromBatch: !0,
                  batchSource: t
                });
                this.endReceiveBatchSnapshots({
                  boundaries: u,
                  hasBoardAction: s,
                  batchSource: t,
                  cb: n
                })
              } catch (e) {
                this.logger.error("[wb]error", e), this.endReceiveBatchSnapshots({
                  boundaries: u,
                  hasBoardAction: s,
                  batchSource: t,
                  cb: n
                })
              }
            }
          }
        }, {
          key: "cacheOrExecAckPkg",
          value: function (e, t) {
            var n = this.pkgIdOpIdMap[e.pkgId],
              r = this.pkgIdOpIdMap[t];
            n && -1 !== n.indexOf(e.snapshot.opId) ? this.cacheSnapshot(e) : r &&
              -1 !== r.indexOf(e.snapshot.opId) ? "inPageOp" === e.snapshot
              .category && t !== e.pkgId ? this.execSnapshot(e) : "pageOp" !== e
              .snapshot.category && "boardOp" != e.snapshot.category || "goto" !==
              e.snapshot.data.action ? this.cacheSnapshot(e) : this.execSnapshot(
                e) : this.execSnapshot(e)
          }
        }, {
          key: "cacheSnapshot",
          value: function (e) {
            var t, n = arguments.length > 1 && void 0 !== arguments[1] &&
              arguments[1],
              r = e.snapshot.opId,
              a = e.pkgId;
            if (this.opIdSnapshotMap[r]) {
              n || (e.snapshot = this.recoverFullSnapshot(e.snapshot));
              var i = this.opIdSnapshotMap[r].pkgId,
                A = this.pkgIdOpIdMap[i].indexOf(r);
              this.pkgIdOpIdMap[i].splice(A, 1), 0 === this.pkgIdOpIdMap[i]
                .length && delete this.pkgIdOpIdMap[i]
            }
            this.opIdSnapshotMap[r] = e, (t = this.pkgIdOpIdMap)[a] || (t[
            a] = []), this.pkgIdOpIdMap[a].push(r)
          }
        }, {
          key: "pushSnapshotToQueue",
          value: function (e) {
            var t, n, r = e.snapshot.category,
              a = e.snapshot.opId,
              i = e.pkgId;
            if ("globalOp" === r) this._pushSnapshotInArray(a, i, this
              .globalSnapshotIds);
            else if ("boardOp" === r) this._pushSnapshotInArray(a, i, this
              .boardsSnapshotIds);
            else if ("pageOp" === e.snapshot.category) {
              var A = e.snapshot.board;
              this.boardOps.hasOwnProperty(A) || (this.boardOps[A] = {
                pageSnapshotIds: [],
                pages: {}
              }), (t = this.boardOps[A]).pageSnapshotIds || (t
                .pageSnapshotIds = []), this._pushSnapshotInArray(a, i, this
                .boardOps[A].pageSnapshotIds)
            } else if ("inPageOp" === e.snapshot.category) {
              var o = e.snapshot.board,
                s = e.snapshot.page;
              this.boardOps.hasOwnProperty(o) || (this.boardOps[o] = {
                pageSnapshotIds: [],
                pages: {}
              }), this.boardOps[o].pages.hasOwnProperty(s) || (this.boardOps[o]
                .pages[s] = {
                  inPageSnapshotIds: []
                }), (n = this.boardOps[o].pages[s]).inPageSnapshotIds || (n
                .inPageSnapshotIds = []), this._pushSnapshotInArray(a, i, this
                .boardOps[o].pages[s].inPageSnapshotIds)
            }
          }
        }, {
          key: "_pushSnapshotInArray",
          value: function (e, t, n) {
            var r = n.indexOf(e); - 1 !== r && n.splice(r, 1);
            for (var a = n.length; a >= 0; a--) {
              if (0 === a) {
                n.splice(a, 0, e);
                break
              }
              if (this.opIdSnapshotMap[n[a - 1]].pkgId <= t) {
                n.splice(a, 0, e);
                break
              }
            }
          }
        }, {
          key: "mergeDebouncedData",
          value: function (e, t) {
            if ("snapshot" !== t && e.length > 0) return e[e.length - 1];
            if ("snapshot" !== t) throw new Error(
              "[wb]mergeDebounceData, dataArr is empty!!");
            var n = {},
              r = !0,
              i = !1,
              o = void 0;
            try {
              for (var s, u = (0, a.default)(e); !(r = (s = u.next()).done); r = !
                0) {
                var l = s.value;
                "vision" === l.type ? n.vision = l : n.hasOwnProperty(l.value
                    .opId) ? l.value.hasOwnProperty("category") ? n[l.value
                  .opId] = l.value : n[l.value.opId].hasOwnProperty("category") ?
                  n[l.value.opId] = this.app.opsManager.mergePartial(n[l.value
                    .opId], l.value) : n[l.value.opId] = this.app.opsManager
                  .mergeTwoPartial(n[l.value.opId], l.value) : n[l.value.opId] = l
                  .value
              }
            } catch (e) {
              i = !0, o = e
            } finally {
              try {
                !r && u.return && u.return()
              } finally {
                if (i) throw o
              }
            }
            return 1 === (0, A.default)(n).length ? {
              type: "snapshot",
              value: (0, A.default)(n).map((function (e) {
                return n[e]
              }))[0]
            } : {
              type: "snapshotArr",
              value: (0, A.default)(n).map((function (e) {
                return n[e]
              }))
            }
          }
        }, {
          key: "_init",
          value: function () {
            var e = new l.default(this.app, "whiteboard", this.app.appConfig
              .defaultBoardName);
            this.boards = {
                whiteboard: e
              }, this.currIndex = "whiteboard", this.pkgIdOpIdMap = {}, this
              .opIdSnapshotMap = {}, this.boardsSnapshotIds = [], this
              .globalSnapshotIds = [], this.boardOps = {}, this
              .mergeFailCache = {}, this.executedClientIdSet.clear(), this
              ._startRefreshLoop()
          }
        }, {
          key: "overwrite",
          value: function () {
            this.currIndex = "", this.boards = {}, this.pkgIdOpIdMap = {}, this
              .opIdSnapshotMap = {}, this.boardsSnapshotIds = [], this
              .globalSnapshotIds = [], this.boardOps = {}, this
              .mergeFailCache = {}, this.executedClientIdSet.clear()
          }
        }, {
          key: "_startRefreshLoop",
          value: function () {
            cancelAnimationFrame(this.refreshAnimationTimer), this
              ._startRefreshLoop2()
          }
        }, {
          key: "refresh",
          value: function () {
            this.pageToRefresh = this.currBoard.currPage
          }
        }, {
          key: "importBoards",
          value: function (e, t, n) {
            var r, a;
            this.logger.log("[wb] importBoards", "boardNames", t, "overwrite", n),
              t = t || [];
            var i = !1;
            try {
              for (var A = B.default.ungzip(e), o = new DataView(A.buffer), s = 0,
                  u = void 0, l = [], c = []; !(s >= A.length);) {
                var d = o.getUint32(s, !0);
                s += 4;
                var p = (new TextDecoder).decode(A.slice(s, s + d));
                s += d;
                var f = JSON.parse(p);
                f.isBoard ? t.length > 0 && -1 === t.indexOf(f.name) ? c.push(f
                    .name) : !n && this.boards[f.name] ? (this.logger.log(
                    "[wb]importBoards, board already exists", f.name), c.push(f
                    .name)) : (!i && n && (i = !0, this.overwrite()), u = f.name,
                    (0, h.importBoard)(this, f), this.currIndex = f.name) : -1 ===
                  c.indexOf(f.board) && l.push(f)
              }
              u ? (this.importInPageOps(l), this.currBoard.currPage
                .calcDrawOpQueue(), this.pageToRefresh = this.currBoard
                .currPage, null === (a = null === (r = this.currBoard) ||
                  void 0 === r ? void 0 : r.currPage) || void 0 === a || a
                .cleanNonCanvasElements(!0), this.app.opsManager.hooks
                .boardChange.call()) : this.logger.error(
                "[wb]importBoards, no valid board")
            } catch (e) {
              return this.logger.error("[wb]importBoards, parse error", e),
                void this.app.emit("event:importBoard:error", e)
            }
          }
        }, {
          key: "exportBoards",
          value: function (e, t, n) {
            this.logger.log("[wb] exportBoards, boardNames", e);
            var A = new TextEncoder,
              o = 0,
              s = [],
              u = [],
              l = !0,
              c = !1,
              d = void 0;
            try {
              for (var h, p = (0, a.default)(e); !(l = (h = p.next()).done); l = !
                0) {
                var f = h.value,
                  g = "whiteboard" === f ? "whiteboard_" + (new Date).valueOf() :
                  f,
                  y = this.boards[f];
                if (y) {
                  u.push({
                    name: g,
                    displayName: y.displayName,
                    pageCount: y.pageNames.length
                  });
                  var v = {
                    isBoard: !0,
                    name: g,
                    displayName: y.displayName,
                    pageNames: y.pageNames
                  };
                  if (y.transDocSnapshot) {
                    var m = y.transDocSnapshot.data;
                    v.transDocSnapshot = {
                      opId: y.transDocSnapshot.opId,
                      time: y.transDocSnapshot.time,
                      category: y.transDocSnapshot.category,
                      uid: y.transDocSnapshot.uid,
                      data: (0, r.default)((0, r.default)({}, m), {
                        transDocData: {
                          animIndex: 0,
                          animState: "start",
                          animPageIndex: 0
                        }
                      })
                    }
                  } else if (y.staticDocSnapshot) {
                    var w = y.staticDocSnapshot.data;
                    v.staticDocSnapshot = {
                      opId: y.staticDocSnapshot.opId,
                      time: y.staticDocSnapshot.time,
                      category: y.staticDocSnapshot.category,
                      uid: y.staticDocSnapshot.uid,
                      data: w
                    }
                  }
                  var M = A.encode((0, i.default)(v));
                  for (var C in s.push(M), o += M.length + 4, y.pages) {
                    var I = y.pages[C];
                    for (var x in I.drawOpQueue) {
                      var b = I.drawOpQueue[x],
                        k = (0, r.default)((0, r.default)({}, b), {
                          data: (0, r.default)({}, b.data)
                        });
                      k.board = g, "audio" !== k.data.type && "video" !== k.data
                        .type || k.data.mediaData && (k.data.mediaData = {
                          ened: !1,
                          play: !1,
                          seek: 0,
                          seekTime: (this.app.ntpTimeDiff + Date.now()) / 1e3
                        });
                      var T = A.encode((0, i.default)(k));
                      s.push(T), o += T.length + 4
                    }
                  }
                } else this.logger.error("[wb]exportBoards, board not found", f)
              }
            } catch (e) {
              c = !0, d = e
            } finally {
              try {
                !l && p.return && p.return()
              } finally {
                if (c) throw d
              }
            }
            this.logger.log("[wb]exportBoards, lenTotal", o);
            var E = 0,
              D = new ArrayBuffer(o),
              N = !0,
              P = !1,
              Q = void 0;
            try {
              for (var O, _ = (0, a.default)(s); !(N = (O = _.next()).done); N = !
                0) {
                var S = O.value,
                  U = S.length;
                new DataView(D, E, 4).setUint32(0, U, !0), E += 4, new Uint8Array(
                  D, E, U).set(S), E += U
              }
            } catch (e) {
              P = !0, Q = e
            } finally {
              try {
                !N && _.return && _.return()
              } finally {
                if (P) throw Q
              }
            }
            var F = B.default.gzip(new Uint8Array(D), {
              to: "string"
            });
            if (n) {
              var L = document.createElement("a");
              L.setAttribute("href", "data:text/plain;charset=utf-8," +
                  encodeURIComponent(F)), t = -1 !== (t = t || "whiteboard")
                .indexOf(".") ? t : t + ".yxwb", L.setAttribute("download", "" +
                  t), L.click()
            }
            return {
              summary: u,
              content: F
            }
          }
        }, {
          key: "workerRefresh",
          value: function () {
            this.currBoard.currPage.refreshOnStreamCanvas()
          }
        }, {
          key: "currBoard",
          get: function () {
            return this.boards[this.currIndex]
          }
        }, {
          key: "logger",
          get: function () {
            return this.app.logger
          }
        }]), e
      }();
    t.default = I
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.addIncrementSnapshot = void 0;
    var r = n(46),
      a = n(248),
      i = n(95),
      A = (t.addIncrementSnapshot = function (e, t) {
        "text" === t.data.type ? A(e, t) : o(e, t)
      }, function (e, t) {
        if (e.boardName === e.app.room.currIndex && e.pageIndex === e.app.room.currBoard
          .currIndex.toString()) {
          if (t.data.dependOn) {
            var n = t.data.dependOn,
              r = e.drawOpQueue[n];
            r && (r = (0, i.transformOp)(e, r, t), e.drawOpQueue[n] = r, s(e, r))
          } else e.drawOpQueue[t.opId] = t, s(e, t);
          e.app.room.pageToIncRefresh = e
        }
      }),
      o = function (e, t) {
        if (e.boardName === e.app.room.currIndex && e.pageIndex === e.app.room.currBoard
          .currIndex.toString()) {
          var n = t;
          if (-1 === r.snapshotOutOfNormalFlowTypes.indexOf(t.data.type)) {
            if (!t.data.dependOn && e.opQueueMap.hasOwnProperty(t.opId)) {
              var A = e.opQueueMap[t.opId];
              A[0].opId === t.opId && (A[0] = t), n = (0, a.getDrawOpFromSnapshotQueue)(e,
                t.opId), (0, i.patchOp)(e, n)
            }
            e.drawOpQueue[t.opId] = n
          } else "laser" === t.data.type && (e.lastLaserOfUser[t.uid] = t);
          s(e, t), e.app.room.pageToIncRefresh = e
        }
      },
      s = function (e, t) {
        "select" === t.data.type ? t.data.inProgress && (e.lastInProgressSelectOfUser[t
            .uid] = t) : "mouse-pointer" === t.data.type ? e.lastMousePointerOfUser[t
          .uid] = t : e.lastInProgressSnapshotOfUser.hasOwnProperty(t.uid) && e
          .lastInProgressSnapshotOfUser[t.uid].snapshot.opId === t.opId ? e
          .lastInProgressSnapshotOfUser[t.uid] = {
            snapshot: t,
            beginAt: e.lastInProgressSnapshotOfUser[t.uid].beginAt
          } : e.lastInProgressSnapshotOfUser[t.uid] = {
            snapshot: t,
            beginAt: Date.now()
          }
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
      }), t.gotoBoard = t.addTransDocBoard = t.addBoard = t.importBoard = t.deleteBoard =
      t.addOpInRoom = t.addGlobalOp = void 0;
    var r = h(n(5)),
      a = h(n(20)),
      i = h(n(25)),
      A = h(n(11)),
      o = n(158),
      s = n(148),
      u = h(n(242)),
      l = n(249),
      c = h(n(147)),
      d = n(250);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = function (e, t, n, r) {
        return new(n || (n = A.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      f = (t.addGlobalOp = function (e, t) {
        var n, r = e.app.camera,
          a = (0, d.getCameraBoundFromGlobalOp)(e, t);
        a && (t.data.animate || t.uid !== e.app.account ? (0, s.transitionToCameraBound)
          (r, a, (function () {
            var t;
            null === (t = e.app.previewFactory) || void 0 === t || t
              .refreshPreviewsOfCurrBoard()
          })) : ((0, s.stopTransitionToCameraBound)(), e.app.camera.setCameraBound(a),
            null === (n = e.app.previewFactory) || void 0 === n || n
            .refreshPreviewsOfCurrBoard()))
      }, t.addOpInRoom = function (e, t, n) {
        return p(void 0, void 0, void 0, i.default.mark((function r() {
          var a, s, u, l, c, h, w;
          return i.default.wrap((function (r) {
            for (;;) switch (r.prev = r.next) {
              case 0:
                if (s = t.data, u = s.action, l = s.boardName, c = s
                  .type, h = e.app.logger, "goto" === u && v(e, l, t),
                  "delete" === u && f(e, l, t), "add" === u && g(e, l,
                    t), "import" !== u) {
                  r.next = 18;
                  break
                }
                e.app.emit("event:importBoard", "start"), e
                  .importingBoards = !0, e.snapsDuringImporting = [],
                  w = e.app.appConfig.showImportProgress ? m(e.app
                    .container.el) : function () {}, r.next = 13;
                break;
              case 13:
                r.next = 16;
                break;
              case 16:
                (function e(t) {
                  return new A.default((function (n, r) {
                    fetch(t, {
                      method: "get"
                    }).then((function (e) {
                      e.ok ? n(e) : (h.error(
                        "fetch error", e), r(e))
                    })).catch((function (a) {
                      return p(void 0, void 0, void 0, i
                        .default.mark((function A() {
                          return i.default.wrap((
                            function (i) {
                              for (;;) switch (i
                                .prev = i.next
                                ) {
                                case 0:
                                  return h
                                    .error(
                                      "fetch error",
                                      a), i
                                    .next = 3,
                                    (0, o
                                      .delay)(
                                      1500);
                                case 3:
                                  e(t).then((
                                      function (
                                        e) {
                                        n(e)
                                      }))
                                    .catch((
                                      function (
                                        e) {
                                        r(e)
                                      }));
                                case 4:
                                case "end":
                                  return i
                                    .stop()
                              }
                            }), A, this)
                        })))
                    }))
                  }))
                })(t.data.url).then((function (e) {
                  return e.text()
                })).then((function (n) {
                  e.importBoards(n, t.data.boardNames, t.data
                    .overwrite)
                })).finally((function () {
                  if (w(), e.importingBoards = !1, e
                    .snapsDuringImporting.length > 0) {
                    var t = e.snapsDuringImporting;
                    e.snapsDuringImporting = [], e
                      .execBatchSnapshots(t, "sync")
                  }(0, d.fitToContentAfterBoardChange)(e), e.app
                    .emit("event:importBoard", "finish")
                }));
              case 18:
                "transDoc" === c && ("addTransDoc" === u && y(e, l, t),
                    e.boards[l].addTransDocOp(t, n)), e.app.opsManager
                  .hooks.opAdd.call(t), "transDoc" === c &&
                  "addTransDoc" !== u || null === (a = e.app
                    .previewFactory) || void 0 === a || a
                  .refreshPreviewsOfCurrBoard();
              case 21:
              case "end":
                return r.stop()
            }
          }), r, this)
        })))
      }, t.deleteBoard = function (e, t, n) {
        if (e.boards.hasOwnProperty(t))
          if (1 === (0, a.default)(e.boards).length) e.logger.error("[wb]",
            "room/deleteBoard: cannot delete last board");
          else {
            var r = (0, a.default)(e.boards),
              i = r.indexOf(t);
            delete e.boards[t];
            var A = void 0;
            if (n.data.nextBoard && e.boards[n.data.nextBoard]) n.data.nextBoard !== e
              .currIndex && (A = n.data.nextBoard);
            else A = r[i === r.length - 1 ? i - 1 : i + 1];
            if (e.logger.log("[wb]", "deleteBoard nextBoard: ", A), A) {
              e.currIndex = A;
              var o = e.boards[e.currIndex];
              e.app.opsManager.hooks.boardChange.call(), (0, l.gotoPage)(o, o.currIndex,
                n), (0, d.fitToContentAfterBoardChange)(e)
            } else e.app.opsManager.hooks.boardChange.call()
          }
        else e.logger.error("[wb]", "room/deleteBoard: board:" + t + " is not found")
      }),
      g = (t.importBoard = function (e, t) {
        var n = t.name,
          r = t.displayName,
          a = t.pageNames;
        e.boards[n] = new u.default(e.app, n, r);
        for (var i = e.boards[n], A = 0, o = 1; o < a.length; o++) i.pages[a[o]] = new c
          .default(e.app, i.boardName, a[o]), i.pageNames.push(a[o]), A = Math.max(A,
            Number(a[o]));
        if (i.newPageIndex = A + 1, t.transDocSnapshot) {
          i.hasDoc = !0;
          for (var s = t.transDocSnapshot, l = 0; l < a.length; l++) {
            var d = a[l];
            if (!(s.data.pageCount <= Number(d))) i.pages[d].setPayload({
              animPageIndex: Number(d)
            })
          }
          i.addTransDocOp(s, {
            fromBatch: !0
          })
        } else t.staticDocSnapshot && function () {
          i.staticDocSnapshot = t.staticDocSnapshot;
          for (var e = t.staticDocSnapshot, r = function (t) {
              var r = a[t];
              if (e.data.pageCount <= Number(r)) return "continue";
              var A = i.pages[r],
                o = (e.data.backupResultUrls || []).map((function (n) {
                  return n.replace("{index}", e.data.offset + t)
                }));
              A.setBackgroundSnapshot({
                board: n,
                page: t,
                category: "inPageOp",
                opId: e.opId + "_" + t,
                time: e.time,
                uid: e.uid,
                data: {
                  boundary: {
                    sx: -e.data.w / 2,
                    sy: -e.data.h / 2,
                    w: e.data.w,
                    h: e.data.h
                  },
                  url: e.data.tmpl.replace("{index}", e.data.offset + Number(
                    r)),
                  backupUrls: o,
                  type: "background"
                }
              })
            }, A = 0; A < a.length; A++) r(A)
        }()
      }, t.addBoard = function (e, t, n) {
        var r = n.data.displayName ? n.data.displayName : t;
        e.boards[t] = new u.default(e.app, t, r), e.currIndex = t;
        var a = e.boards[e.currIndex];
        e.app.opsManager.hooks.boardChange.call();
        for (var i = 1; i < n.data.pageCount; i++)(0, l.addPage)(a, void 0, n);
        if (n.data.tmpl) {
          a.staticDocSnapshot = n;
          for (var A = function (e) {
              var r = a.pages[e],
                i = (n.data.backupResultUrls || []).map((function (t) {
                  return t.replace("{index}", n.data.offset + e)
                }));
              r.setBackgroundSnapshot({
                board: t,
                page: e,
                category: "inPageOp",
                opId: n.opId + "_" + e,
                time: n.time,
                uid: n.uid,
                data: {
                  boundary: {
                    sx: -n.data.w / 2,
                    sy: -n.data.h / 2,
                    w: n.data.w,
                    h: n.data.h
                  },
                  url: n.data.tmpl.replace("{index}", n.data.offset + e),
                  backupUrls: i,
                  type: "background"
                }
              })
            }, o = 0; o < n.data.pageCount; o++) A(o)
        }(0, l.gotoPage)(a, 0, n), (0, d.fitToContentAfterBoardChange)(e)
      }),
      y = t.addTransDocBoard = function (e, t, n) {
        var r = n.data.displayName ? n.data.displayName : t;
        e.boards[t] = new u.default(e.app, t, r), e.currIndex = t;
        var a = e.boards[e.currIndex];
        a.hasDoc = !0, e.app.opsManager.hooks.boardChange.call(), a.pages[0].setPayload({
          animPageIndex: 0
        });
        for (var i = 1; i < n.data.pageCount; i++)(0, l.addPage)(a, void 0, n, {
          animPageIndex: i
        });
        (0, l.gotoPage)(a, 0, n), (0, d.fitToContentAfterBoardChange)(e)
      },
      v = t.gotoBoard = function (e, t, n) {
        e.boards.hasOwnProperty(t) || (e.boards[t] = new u.default(e.app, t, t)), e
          .currIndex = t;
        var r = e.boards[e.currIndex];
        e.app.opsManager.hooks.boardChange.call(), (0, l.gotoPage)(r, r.currIndex, n), (0,
          d.fitToContentAfterBoardChange)(e)
      },
      m = function (e) {
        var t = document.createElement("div");
        e.appendChild(t), (0, r.default)(t.style, {
          position: "absolute",
          top: 0,
          left: 0,
          width: "0",
          height: "2px",
          bordeRadius: "3px",
          backgroundColor: "rgba(7, 112, 240, 0.8)"
        });
        var n = void 0,
          a = Date.now();
        return function e() {
            var r = 1 - Math.pow(.7, (Date.now() - a) / 1e3);
            r = r > .99 ? .9999 : r, t.style.width = 100 * r + "%", n = setTimeout((
              function () {
                e()
              }), 30)
          }(),
          function () {
            clearTimeout(n), e.removeChild(t)
          }
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    t.polyfillRaf = function () {
      var e = 0;
      window.requestAnimationFrame = function (t, n) {
        var r = window.performance.now(),
          a = Math.max(e + 16, r);
        return setTimeout((function () {
          t(e = a)
        }), a - r)
      }, window.cancelAnimationFrame = clearTimeout
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(25)),
      a = g(n(7)),
      i = g(n(75)),
      A = g(n(103)),
      o = g(n(0)),
      s = g(n(1)),
      u = g(n(11)),
      l = n(31),
      c = g(n(32)),
      d = n(14),
      h = n(105),
      p = n(15),
      f = n(95);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      v = function () {
        function e(t) {
          (0, o.default)(this, e), this.previewContainerMap = new A.default, this
            .task = [], this.isLoopBusy = !1, this.visiblePages = [], this
            .isContainerVisible = !1, this.app = t, this.app.opsManager.hooks.pageReady
            .tap("PageReadyPlugin", this.onPageReady.bind(this)), this.app.opsManager
            .hooks.opAdd.tap("OpAdd", this.onOpAdded.bind(this))
        }
        return (0, s.default)(e, [{
          key: "getPagePreviewCtx",
          value: function (e) {
            return this.pagePreviewCtx && this.pagePreviewCanvas || (this
                .pagePreviewCanvas = document.createElement("canvas"), this
                .pagePreviewCtx = this.pagePreviewCanvas.getContext("2d"), this
                .pagePreviewCanvas.style.visibility = "hidden", this
                .pagePreviewCanvas.style.position = "absolute", this.app.container
                .el.appendChild(this.pagePreviewCanvas)), e.width < 8192 && e
              .height < 8192 ? (this.pagePreviewCanvas.width = e.width, this
                .pagePreviewCanvas.height = e.height) : e.width > e.height ? (this
                .pagePreviewCanvas.width = 8192, this.pagePreviewCanvas.height =
                Math.floor(8192 * e.height / e.width)) : (this.pagePreviewCanvas
                .height = 8192, this.pagePreviewCanvas.width = Math.floor(8192 * e
                  .width / e.height)), this.pagePreviewCtx.lineJoin = "round",
              this.pagePreviewCtx.lineCap = "round", this.pagePreviewCtx
          }
        }, {
          key: "reset",
          value: function () {
            this.previewContainerMap.clear()
          }
        }, {
          key: "bindPreviewContainer",
          value: function (e) {
            var t = this,
              n = !e.hasOwnProperty("reset") || e.reset,
              r = !e.hasOwnProperty("keepPrevContainer") || e.keepPrevContainer,
              A = e.previewContainerSettings.map((function (e) {
                return t.getContainerKey(e)
              })),
              o = (0, i.default)(this.previewContainerMap.keys());
            if (n) {
              var s = !0,
                u = !1,
                l = void 0;
              try {
                for (var c, d = (0, a.default)(o); !(s = (c = d.next())
                  .done); s = !0) {
                  var h = c.value; - 1 !== A.indexOf(h) && r || this
                    .previewContainerMap.delete(h)
                }
              } catch (e) {
                u = !0, l = e
              } finally {
                try {
                  !s && d.return && d.return()
                } finally {
                  if (u) throw l
                }
              }
              this.task = []
            }
            var p = [];
            e.previewContainerSettings.forEach((function (e) {
              var n = t.getContainerKey(e);
              if (!r || !t.previewContainerMap.has(n) || t
                .previewContainerMap.get(n).id !== e.id) {
                var a = t.setupPreviewElements(e.container),
                  i = a.ctx,
                  A = a.canvasContainer,
                  o = e.container.getBoundingClientRect();
                p.push({
                  pageIndex: e.pageIndex,
                  boardName: e.boardName
                }), t.previewContainerMap.set(n, {
                  id: e.id,
                  container: A,
                  ctx: i,
                  width: o.width,
                  height: o.height
                })
              }
            })), this.addPreviewTask(p), this.setBackgroundColor()
          }
        }, {
          key: "preparePreview",
          value: function (e, t) {
            void 0 !== t && (this.isContainerVisible = t);
            for (var n = this.app.room.currIndex, r = [], a = 0; a < e
              .length; a++) {
              var i = this.app.room.currBoard.pageNames[e[a]];
              void 0 !== i && (this.app.opsManager.hooks.previewWaiting.call(e[
                a]), r.push({
                  pageIndex: i,
                  boardName: n
                }))
            }
            this.visiblePages = r.slice(), this.setPreviewTask(r)
          }
        }, {
          key: "generateElesToDataUrl",
          value: function (e) {
            var t = this,
              n = this.app.room.currBoard.currPage;
            n.calcDrawOpQueue();
            var r = e.map((function (e) {
              return n.drawOpQueue[e]
            })).filter((function (e) {
              return e && !e.data.deleted && !e.data.hidden
            }));
            if (0 === r.length) return null;
            var i = void 0,
              A = r.map((function (e) {
                return (0, p.getTransformedBoundary)(t.app.scale, e.data)
              })).reduce((function (e, t) {
                return (0, p.combineBoundary)(e, t)
              }));
            if (!(i = this.getPagePreviewCtx({
                width: A.w,
                height: A.h
              }))) return null;
            i.fillStyle = n.app.appConfig.canvasBgColor, (0, f.fillCtx)(i), n.app
              .camera.convertPreviewCanvas(i, {
                centerX: A.sx + A.w / 2,
                centerY: A.sy + A.h / 2,
                width: A.w,
                height: A.h
              });
            var o = !0,
              s = !1,
              u = void 0;
            try {
              for (var l, c = (0, a.default)(r); !(o = (l = c.next()).done); o = !
                0) {
                var d = l.value;
                n.opsManager.preview(d, i, {
                  page: n,
                  supportToDataUrl: !0
                })
              }
            } catch (e) {
              s = !0, u = e
            } finally {
              try {
                !o && c.return && c.return()
              } finally {
                if (s) throw u
              }
            }
            var h = this.wrapToDataUrl(this.app, i);
            return this.app.room.refresh(), h
          }
        }, {
          key: "wrapToDataUrl",
          value: function (e, t, n, r) {
            try {
              return t.canvas.toDataURL(n, r)
            } catch (t) {
              throw this.app.logger.error("[ws] export image error", t && t
                .message), (0, l.showToast)({
                msg: (0, d.getMsg)("exportImgErr"),
                time: 3,
                type: "error",
                msgType: c.default.EXPORT_IMG_ERROR
              }), e.room.refresh(), t
            }
          }
        }, {
          key: "generatePreviewToDataUrl",
          value: function (e, t, n) {
            var r, a, i = this.app.room.getPage(e.boardName, e.pageIndex);
            if (!i) return null;
            var A = void 0,
              o = void 0,
              s = this.app.room.boards[i.boardName],
              u = i.backgroundSnapshot || s && s.transDocSnapshot;
            if ("clip" === e.content) A = this.ctx;
            else if ("fitToContent" === e.content || "fitToDoc" === e.content && !
              u) o = this.app.camera.getCameraBoundFitToContent({
                padding: 4,
                page: i,
                fitContainer: !1
              }), u || (o.width = Math.max(o.width, this.app.container.width), o
                .height = Math.max(o.height, this.app.container.height)), A = this
              .getPagePreviewCtx(o);
            else if ("fitToDoc" === e.content) o = this.app.camera
              .getCameraBoundFitToDoc({
                page: i,
                fitContainer: !1
              }), A = this.getPagePreviewCtx(o);
            else {
              if ("region" !== e.content) return this.app.logger.error(
                "[wb]PreviewFactory.generatePreviewToDataUrl content must be one of clip, fitToContent, fitToDoc, region"
                ), null;
              A = this.getPagePreviewCtx(null === (r = e.regionParam) ||
                void 0 === r ? void 0 : r.size)
            }
            if (!A) return null;
            i.calcDrawOpQueue(), "clip" === e.content ? i.refresh({
              ctx: A,
              preview: !0,
              supportToDataUrl: !0,
              omitSelection: e.omitSelection,
              exportCustomBg: e.customBg,
              exportBoard: e.exportBoard
            }) : "region" === e.content ? i.refresh({
              ctx: A,
              preview: !0,
              supportToDataUrl: !0,
              boundary: null === (a = e.regionParam) || void 0 === a ?
                void 0 : a.cameraBound,
              omitSelection: e.omitSelection,
              exportCustomBg: e.customBg,
              exportBoard: e.exportBoard
            }) : i.refresh({
              ctx: A,
              preview: !0,
              supportToDataUrl: !0,
              boundary: o,
              omitSelection: e.omitSelection,
              exportCustomBg: e.customBg,
              exportBoard: e.exportBoard
            });
            var l = this.wrapToDataUrl(this.app, A, t, n);
            return this.app.room.refresh(), this.app.logger.log(
                "generatePreviewToDataUrl result, content length: ", l.length,
                ", width: ", A.canvas.width, ", height: ", A.canvas.height), l
              .length < 200 && this.app.logger.error(
                "generatePreviewToDataUrl toDataURL error. result is", l), {
                content: l,
                width: A.canvas.width,
                height: A.canvas.height
              }
          }
        }, {
          key: "setBackgroundColor",
          value: function () {
            var e = !0,
              t = !1,
              n = void 0;
            try {
              for (var r, i = (0, a.default)(this.previewContainerMap.values()); !
                (e = (r = i.next()).done); e = !0) {
                r.value.container.style.backgroundColor = this.app.appConfig
                  .canvasBgColor
              }
            } catch (e) {
              t = !0, n = e
            } finally {
              try {
                !e && i.return && i.return()
              } finally {
                if (t) throw n
              }
            }
          }
        }, {
          key: "refreshPreviewsOfCurrBoard",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[
              0];
            if (!this.app.room.isReceivingBatchSnapshots) {
              this.task = [];
              var t = this.app.room.currBoard,
                n = t.pages,
                r = [];
              for (var a in n) !e && "fitContainer" !== this.app.appConfig
                .previewMode && this.app.hasBackground(n[a]) || r.push({
                  boardName: t.boardName,
                  pageIndex: n[a].pageIndex
                });
              this.addPreviewTask(r)
            }
          }
        }, {
          key: "refreshPreviewsOfCurrPage",
          value: function () {
            if (!this.app.room.isReceivingBatchSnapshots) {
              var e = this.app.room.currBoard;
              this.invalidatePreview(e.currPage.pageIndex, e.boardName);
              var t = [{
                boardName: e.boardName,
                pageIndex: e.currIndex.toString()
              }];
              this.addPreviewTask(t)
            }
          }
        }, {
          key: "generatePreview",
          value: function (e) {
            var t = this.getContainerKey(e);
            if (this.previewContainerMap.has(t)) {
              var n = this.previewContainerMap.get(t),
                r = this.app.room.getPage(e.boardName, e.pageIndex);
              if (!r) return;
              var a = void 0;
              "fitDoc" === this.app.appConfig.previewMode && this.app
                .hasBackground(r) && (a = this.app.camera.getDocCameraBound(r)), r
                .calcDrawOpQueue(), r.refresh({
                  ctx: null == n ? void 0 : n.ctx,
                  preview: !0,
                  boundary: a
                })
            }
          }
        }, {
          key: "invalidatePreview",
          value: function (e, t) {}
        }, {
          key: "setPreviewTask",
          value: function (e) {
            this.task = [], this.addPreviewTask(e)
          }
        }, {
          key: "addPreviewTask",
          value: function (e) {
            var t = this;
            e = e.filter((function (e) {
              return t.isPageVisible(e)
            })), setTimeout((function () {
              e.reverse().forEach((function (e) {
                var n = t.getTaskIndexOfPage(e.pageIndex, e
                .boardName); - 1 !== n && t.task.splice(n, 1);
                var r = t.app.room.boards[e.boardName];
                if (r) {
                  var a = r.pages[e.pageIndex];
                  if (a) {
                    var i = t.getContainerKey(e);
                    t.previewContainerMap.has(i) && t.task.unshift({
                      pageIndex: e.pageIndex,
                      boardName: e.boardName,
                      state: a.blocked ? "waiting" : "ready"
                    })
                  }
                }
              })), t.startLoop()
            }), 0)
          }
        }, {
          key: "getTaskIndexOfPage",
          value: function (e, t) {
            for (var n = 0; n < this.task.length; n++)
              if (this.task[n].pageIndex === e && this.task[n].boardName === t)
                return n;
            return -1
          }
        }, {
          key: "getContainerKey",
          value: function (e) {
            return e.boardName + "129*&^ljdfh893" + e.pageIndex.toString()
          }
        }, {
          key: "setupPreviewElements",
          value: function (e) {
            var t = e.getElementsByClassName("preview-canvas-container"),
              n = void 0,
              r = void 0,
              a = void 0;
            0 === t.length ? ((a = document.createElement("div")).className =
              "preview-canvas-container", a.style.backgroundColor = this.app
              .appConfig.canvasBgColor, a.style.position = "absolute", a.style
              .left = "0", a.style.right = "0", a.style.top = "0", a.style
              .bottom = "0", e.appendChild(a), (n = document.createElement(
                "canvas")).style.imageRendering = "optimize-contrast", a
              .appendChild(n), (r = n.getContext("2d")).lineCap = "round", r
              .lineJoin = "round") : (a = t[0], r = (n = t[0]
              .getElementsByTagName("canvas")[0]).getContext("2d"));
            var i = a.getBoundingClientRect();
            return n.width = i.width * h.DPI, n.height = i.height * h.DPI, n.style
              .width = i.width + "px", n.style.height = i.height + "px", {
                ctx: r,
                canvasContainer: a
              }
          }
        }, {
          key: "onOpAdded",
          value: function (e) {
            if ("inPageOp" === e.category && !e.data.inProgress && "laser" !== e
              .data.type && "mouse-pointer" !== e.data.type && !this.app.room
              .isReceivingBatchSnapshots) {
              var t = e.board,
                n = e.page;
              this.invalidatePreview(n.toString(), t), this.addPreviewTask([{
                pageIndex: n.toString(),
                boardName: t
              }])
            }
          }
        }, {
          key: "onPageReady",
          value: function (e, t) {
            this.invalidatePreview(t.toString(), e), this.addPreviewTask([{
              pageIndex: t.toString(),
              boardName: e
            }])
          }
        }, {
          key: "isPageVisible",
          value: function (e) {
            for (var t = 0; t < this.visiblePages.length; t++)
              if (this.visiblePages[t].boardName === e.boardName && this
                .visiblePages[t].pageIndex === e.pageIndex) return !0;
            return !1
          }
        }, {
          key: "startLoop",
          value: function () {
            return y(this, void 0, void 0, r.default.mark((function e() {
              var t, n = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    if (!this.isLoopBusy) {
                      e.next = 2;
                      break
                    }
                    return e.abrupt("return");
                  case 2:
                    return this.isLoopBusy = !0, e.next = 5, new u
                      .default((function (e) {
                        setTimeout(e, 0)
                      }));
                  case 5:
                    t = r.default.mark((function e() {
                      var t, a;
                      return r.default.wrap((function (e) {
                        for (;;) switch (e.prev = e
                          .next) {
                          case 0:
                            return e.next = 2, n
                              .shiftNextTastk();
                          case 2:
                            t = e.sent;
                          case 3:
                            if (null !== t) {
                              e.next = 11;
                              break
                            }
                            return e.next = 6, n
                              .delay(30);
                          case 6:
                            return e.next = 8, n
                              .shiftNextTastk();
                          case 8:
                            t = e.sent, e.next = 3;
                            break;
                          case 11:
                            if (a = n
                              .getContainerKey(t), n
                              .previewContainerMap
                              .has(a)) {
                              e.next = 14;
                              break
                            }
                            return e.abrupt(
                              "return", "continue"
                              );
                          case 14:
                            return e.next = 16,
                              new u.default((
                                function (e) {
                                  try {
                                    t && n
                                      .isPageVisible(
                                        t) && n
                                      .generatePreview(
                                        t), e()
                                  } catch (t) {
                                    n.app.logger
                                      .error(
                                        "[wb]", t
                                        ), e()
                                  }
                                }));
                          case 16:
                            return e.next = 18, n
                              .delay(n
                                .isContainerVisible ?
                                100 : 1e3);
                          case 18:
                          case "end":
                            return e.stop()
                        }
                      }), e, n)
                    }));
                  case 6:
                    if (!(this.task.length > 0)) {
                      e.next = 13;
                      break
                    }
                    return e.delegateYield(t(), "t0", 8);
                  case 8:
                    if ("continue" !== e.t0) {
                      e.next = 11;
                      break
                    }
                    return e.abrupt("continue", 6);
                  case 11:
                    e.next = 6;
                    break;
                  case 13:
                    this.isLoopBusy = !1;
                  case 14:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "shiftNextTastk",
          value: function () {
            return y(this, void 0, void 0, r.default.mark((function e() {
              var t, n;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    t = 0;
                  case 1:
                    if (!(t < this.task.length)) {
                      e.next = 21;
                      break
                    }
                    if (n = this.task[t], this.task.splice(t, 1),
                      e.prev = 4, !this.app.room.getPage(n
                        .boardName, n.pageIndex)) {
                      e.next = 10;
                      break
                    }
                    return e.abrupt("return", n);
                  case 10:
                    return t--, e.abrupt("continue", 18);
                  case 12:
                    e.next = 18;
                    break;
                  case 14:
                    return e.prev = 14, e.t0 = e.catch(4), t--, e
                      .abrupt("continue", 18);
                  case 18:
                    t++, e.next = 1;
                    break;
                  case 21:
                    return e.abrupt("return", null);
                  case 22:
                  case "end":
                    return e.stop()
                }
              }), e, this, [
                [4, 14]
              ])
            })))
          }
        }, {
          key: "delay",
          value: function (e) {
            return y(this, void 0, void 0, r.default.mark((function t() {
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    return t.abrupt("return", new u.default((
                      function (t) {
                        setTimeout((function () {
                          t()
                        }), e)
                      })));
                  case 1:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "ctx",
          get: function () {
            return this.app.container.ctx
          }
        }]), e
      }();
    t.default = v
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = l(n(20)),
      a = l(n(21)),
      i = l(n(36)),
      A = l(n(0)),
      o = l(n(1)),
      s = n(105),
      u = n(15);

    function l(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var c = function () {
      function e(t, n) {
        (0, A.default)(this, e), this.scale = 1, this.cameraBoundByUser = {}, this.app =
          t, this.translateX = 0, this.translateY = 0, this.scale = 1, n ? (this.width =
            n.width, this.height = n.height, this.centerX = n.centerX, this.centerY = n
            .centerY) : (this.width = 1920, this.height = 1080, this.centerX = 0, this
            .centerY = 0), this.containerWorldRect = {
            centerX: this.centerX,
            centerY: this.centerY,
            width: this.width,
            height: this.height
          }
      }
      return (0, o.default)(e, [{
        key: "getContainerWorldRect",
        value: function () {
          return this.containerWorldRect
        }
      }, {
        key: "_computeContainerWorldRect",
        value: function () {
          var e = this.container.el.getBoundingClientRect(),
            t = e.width,
            n = e.height,
            r = this.convertToPointInWorld(0, 0),
            a = (0, i.default)(r, 2),
            A = a[0],
            o = a[1],
            s = this.convertToPointInWorld(t, n),
            u = (0, i.default)(s, 2),
            l = u[0],
            c = u[1];
          this.containerWorldRect = {
            centerX: A / 2 + l / 2,
            centerY: o / 2 + c / 2,
            width: l - A,
            height: c - o
          }
        }
      }, {
        key: "getContainerWorldRectByCameraBound",
        value: function (e, t) {
          if (e.width <= 0 || e.height <= 0) return this.app.logger.warn(
            "[wb]camera.getContainerWorldRectByCameraBound opts width or height less or equal to 0. \n            from: " +
            t + ", width: " + e.width + ", height: " + e.height), {
            centerX: this.centerX,
            centerY: this.centerY,
            width: this.width,
            height: this.height
          };
          var n = this.container.width,
            r = this.container.height;
          return n / r > e.width / e.height ? e.width = e.height / r * n : e
            .height = e.width / n * r, e
        }
      }, {
        key: "convertToPointInWorld",
        value: function (e, t) {
          return [e = (e - this.translateX) / this.scale, t = (t - this
            .translateY) / this.scale]
        }
      }, {
        key: "convertWorldPointInContainer",
        value: function (e, t) {
          return [e = e * this.scale + this.translateX, t = t * this.scale +
            this.translateY
          ]
        }
      }, {
        key: "convertDom",
        value: function (e) {
          e.style.transform = "translate(" + this.translateX + "px, " + this
            .translateY + "px) scale(" + this.scale + ")", this.app.emit(
              "event:camera:transform", this.scale)
        }
      }, {
        key: "convertDomAndRefresh",
        value: function () {
          var e, t;
          this.convertDom(this.container.domEl), this.convertDom(this.container
              .h5El), this.app.room.pageToRefresh = null === (t = null === (e =
              this.app.room) || void 0 === e ? void 0 : e.currBoard) ||
            void 0 === t ? void 0 : t.currPage
        }
      }, {
        key: "convertCanvas",
        value: function (e) {
          e.translate(this.translateX * s.DPI, this.translateY * s.DPI), e
            .scale(this.scale * s.DPI, this.scale * s.DPI)
        }
      }, {
        key: "convertPreviewCanvas",
        value: function (e, t) {
          var n = e.canvas.width,
            r = e.canvas.height,
            a = this.getTransParam(n, r, t),
            i = a.scale,
            A = a.translateX,
            o = a.translateY;
          e.translate(A, o), e.scale(i, i)
        }
      }, {
        key: "setCameraBound",
        value: function (e) {
          e.width && e.height ? (this.centerX = e.centerX, this.centerY = e
            .centerY, this.width = e.width, this.height = e.height, this
            .updateTransParamAndRefresh()) : this.app.logger.warn(
            "[wb]camera.setCameraBound 宽高无效", (0, a.default)(e))
        }
      }, {
        key: "getNextCameraBound",
        value: function (e) {
          return this.cameraLockParam ? this.getCameraBoundLockWithContent(this
              .cameraLockParam) : "pan" === e.type ? this._roundBoundary(this
              .getCameraBoundPan(e)) : "zoom" === e.type ? this._roundBoundary(
              this.getCameraBoundZoom(e)) : "reset-camera" === e.type ? this
            ._roundBoundary(this.getCameraBoundReset()) : "fit-to-content" === e
            .type ? this._roundBoundary(this.getCameraBoundFitToContent({
              fitContainer: !0,
              padding: 0
            })) : "fit-to-doc" === e.type ? this._roundBoundary(this
              .getCameraBoundFitToDoc({
                fitContainer: !1
              })) : "resize-camera" === e.type ? this._roundBoundary(this
              .getCameraBoundResize(e)) : (console.error(
              "不应该进入此分支(getCameraBound), data类型为：" + e), {
              width: this.width,
              height: this.height,
              centerX: this.centerX,
              centerY: this.centerY
            })
        }
      }, {
        key: "_roundBoundary",
        value: function (e) {
          return {
            centerX: Number(e.centerX.toFixed(1)),
            centerY: Number(e.centerY.toFixed(1)),
            width: Number(e.width.toFixed(1)),
            height: Number(e.height.toFixed(1))
          }
        }
      }, {
        key: "getCameraBoundPan",
        value: function (e) {
          var t = this.centerX,
            n = this.centerY,
            r = this.width,
            a = this.height;
          return t += e.dx / this.scale, n += e.dy / this.scale, this
            .getContainerWorldRectByCameraBound({
              centerX: t,
              centerY: n,
              width: r,
              height: a
            }, "pan")
        }
      }, {
        key: "getCameraBoundZoom",
        value: function (e) {
          var t = this.centerX,
            n = this.centerY,
            r = this.width,
            a = this.height,
            i = void 0;
          i = e.center ? this.convertToPointInWorld(e.center[0], e.center[1]) :
            [t, n];
          var A = e.scale;
          return t = i[0] - (i[0] - t) / A, n = i[1] - (i[1] - n) / A, r /= A,
            a /= A, this.getContainerWorldRectByCameraBound({
              centerX: t,
              centerY: n,
              width: r,
              height: a
            }, "zoom")
        }
      }, {
        key: "getCameraBoundReset",
        value: function () {
          return console.log("getCameraBoundReset()默认值"), {
            centerX: 0,
            centerY: 0,
            width: this.container.width,
            height: this.container.height
          }
        }
      }, {
        key: "getCameraBoundFitToDoc",
        value: function (e) {
          var t = e.page ? e.page : this.app.room.currBoard.currPage,
            n = this.app.room.boards[t.boardName],
            r = t.backgroundSnapshot,
            a = n.transDocSnapshot;
          if (a && a.data.boundary) {
            var i = a.data.boundary,
              A = i.sx,
              o = i.sy,
              s = i.w,
              u = i.h;
            return e.fitContainer ? this.getContainerWorldRectByCameraBound({
              centerX: A + s / 2,
              centerY: o + u / 2,
              width: s,
              height: u
            }, "fitToDoc") : {
              centerX: A + s / 2,
              centerY: o + u / 2,
              width: s,
              height: u
            }
          }
          if (r) {
            var l = r.data.boundary,
              c = l.sx,
              d = l.sy,
              h = l.w,
              p = l.h;
            return e.fitContainer ? this.getContainerWorldRectByCameraBound({
              centerX: c + h / 2,
              centerY: d + p / 2,
              width: h,
              height: p
            }, "fitToDoc") : {
              centerX: c + h / 2,
              centerY: d + p / 2,
              width: h,
              height: p
            }
          }
          return {
            centerX: this.centerX,
            centerY: this.centerY,
            width: this.width,
            height: this.height
          }
        }
      }, {
        key: "getDocCameraBound",
        value: function (e) {
          var t = e.getBoard(),
            n = e.backgroundSnapshot,
            r = t.transDocSnapshot;
          if (r && r.data.boundary) {
            var a = r.data.boundary,
              i = a.sx,
              A = a.sy,
              o = a.w,
              s = a.h;
            return {
              centerX: i + o / 2,
              centerY: A + s / 2,
              width: o,
              height: s
            }
          }
          if (n) {
            var u = n.data.boundary,
              l = u.sx,
              c = u.sy,
              d = u.w,
              h = u.h;
            return {
              centerX: l + d / 2,
              centerY: c + h / 2,
              width: d,
              height: h
            }
          }
          return {
            centerX: this.centerX,
            centerY: this.centerY,
            width: this.width,
            height: this.height
          }
        }
      }, {
        key: "getCameraBoundFitToContent",
        value: function (e) {
          var t = e && e.page ? e.page : this.app.room.currBoard.currPage,
            n = t.drawOpQueue,
            a = t.backgroundSnapshot,
            i = this.app.room.currBoard.transDocSnapshot;
          if (0 === (0, r.default)(n).length && !a && !i) return this
            .getCameraBoundReset();
          var A = {
            sx: 1e7,
            sy: 1e7,
            ex: -1e7,
            ey: -1e7
          };
          if (a) {
            var o = a.data.boundary,
              s = o.sx,
              l = o.sy,
              c = o.w,
              d = o.h;
            A.sx = Math.min(A.sx, s), A.sy = Math.min(A.sy, l), A.ex = Math.max(
              A.ex, s + c), A.ey = Math.max(A.ey, l + d)
          }
          if (i && i.data.boundary) {
            var h = i.data.boundary,
              p = h.sx,
              f = h.sy,
              g = h.w,
              y = h.h;
            A.sx = Math.min(A.sx, p), A.sy = Math.min(A.sy, f), A.ex = Math.max(
              A.ex, p + g), A.ey = Math.max(A.ey, f + y)
          }
          for (var v in n) {
            var m = n[v].data;
            if (m.boundary && null !== m.boundary.sx && void 0 !== m.boundary
              .sx && null !== m.boundary.sy && void 0 !== m.boundary.sy &&
              null !== m.boundary.w && void 0 !== m.boundary.w && null !== m
              .boundary.h && void 0 !== m.boundary.h) {
              var w = (0, u.getTransformedBoundary)(this.scale, m),
                B = w.sx,
                M = w.sy,
                C = w.w,
                I = w.h;
              A.sx = Math.min(A.sx, B), A.sy = Math.min(A.sy, M), A.ex = Math
                .max(A.ex, B + C), A.ey = Math.max(A.ey, M + I)
            }
          }
          if (A.ex - A.sx < 100 && A.ey - A.sy < 100) {
            var x = 100 - (A.ex - A.sx),
              b = 100 - (A.ey - A.sy);
            A.sx = A.sx - x / 2, A.ex = A.ex + x / 2, A.sy = A.sy - b / 2, A
              .ey = A.ey + b / 2
          }
          var k = e ? e.padding : 0;
          return e.fitContainer ? this.getContainerWorldRectByCameraBound({
            centerX: A.sx / 2 + A.ex / 2,
            centerY: A.sy / 2 + A.ey / 2,
            width: A.ex - A.sx + 2 * k,
            height: A.ey - A.sy + 2 * k
          }, "fitToContent") : {
            centerX: A.sx / 2 + A.ex / 2,
            centerY: A.sy / 2 + A.ey / 2,
            width: A.ex - A.sx + 2 * k,
            height: A.ey - A.sy + 2 * k
          }
        }
      }, {
        key: "getCameraBoundResize",
        value: function (e) {
          return this.app.appConfig.disableAutoResize ? {
            centerX: this.centerX,
            centerY: this.centerY,
            width: e.width / this.scale,
            height: e.height / this.scale
          } : {
            centerX: this.centerX,
            centerY: this.centerY,
            width: this.width,
            height: this.width / e.width * e.height
          }
        }
      }, {
        key: "getTransParam",
        value: function (e, t, n) {
          var r = n ? n.width : this.width,
            a = n ? n.height : this.height,
            i = n ? n.centerX : this.centerX,
            A = n ? n.centerY : this.centerY,
            o = void 0,
            s = void 0,
            u = void 0;
          return s = e / 2 - i * (o = e / t > r / a ? t / a : e / r), u = t /
            2 - A * o, o && isFinite(o) || (s = e / 2 - i * (o = 1), u = t / 2 -
              A * o), {
              scale: o,
              translateX: s,
              translateY: u
            }
        }
      }, {
        key: "updateTransParamAndRefresh",
        value: function () {
          var e = this.getTransParam(this.container.width, this.container
              .height),
            t = e.scale,
            n = e.translateX,
            r = e.translateY;
          this.scale = t, this.translateX = n, this.translateY = r, this
            ._computeContainerWorldRect(), this.convertDomAndRefresh(), this.app
            .emit("event:appState:change", "zoomFactor", this.zoomFactor)
        }
      }, {
        key: "getCameraBoundLockWithContent",
        value: function (e) {
          var t = e.width,
            n = e.height,
            r = e.height / e.width * 1920,
            a = void 0,
            i = void 0;
          return this.container.width / this.container.height > t / n ? (i = r,
            a = this.container.width / this.container.height * r) : (a = 1920,
            i = this.container.height / this.container.width * 1920), {
            centerX: 0,
            centerY: 0,
            width: a / 2,
            height: i / 2
          }
        }
      }, {
        key: "lockCameraWithContent",
        value: function (e) {
          this.cameraLockParam = e, this.setCameraBound(this
            .getCameraBoundLockWithContent(e))
        }
      }, {
        key: "unlockCameraWithContent",
        value: function () {
          this.cameraLockParam = void 0
        }
      }, {
        key: "zoomFactor",
        get: function () {
          var e = this.scale;
          try {
            if (this.app.hasDoc() && this.app.appConfig.isDocZoomLevel1) {
              var t = this.app.room.currBoard,
                n = this.app.room.currBoard.currPage.backgroundSnapshot,
                r = t.transDocSnapshot,
                a = void 0,
                i = void 0;
              r && r.data.boundary ? (a = r.data.boundary.w, i = r.data.boundary
                  .h) : n && (a = n.data.boundary.w, i = n.data.boundary.h),
                a && i && (e = this.width / this.height > a / i ? i / this
                  .height : a / this.width)
            }
          } catch (e) {
            return this.scale
          }
          return isNaN(e) || e <= 0 ? this.scale : e
        }
      }, {
        key: "container",
        get: function () {
          return this.app.container
        }
      }]), e
    }();
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(7)),
      a = A(n(0)),
      i = A(n(1));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
      function e(t) {
        (0, a.default)(this, e), this.state = "pause", this.playSpeed = 1, this
          .records = [], this.nextRecordIndex = 0, this.lastTime = 0, this
          .lastRealTime = 0, this.offsetBegin = 0, this.pkgId = 0, this.app = t
      }
      return (0, i.default)(e, [{
        key: "addRecordData",
        value: function (e) {
          this.records = e.slice(), this.app.resetState(), this
            .nextRecordIndex = 0
        }
      }, {
        key: "setViewer",
        value: function (e) {
          this.app.account = e;
          var t = this.lastTime;
          this.lastTime = 1 / 0, this.seekTo(t)
        }
      }, {
        key: "destroy",
        value: function () {
          this.app.emit("event:player:destroy")
        }
      }, {
        key: "play",
        value: function () {
          "pause" === this.state && (this.state = "play", this.app.emit(
            "event:player:play"))
        }
      }, {
        key: "pause",
        value: function () {
          "play" === this.state && (this.state = "pause", this.app.emit(
            "event:player:pause"))
        }
      }, {
        key: "setPlaySpeed",
        value: function (e) {
          this.playSpeed !== e && (this.playSpeed = e, this.app.emit(
            "event:player:playSpeed", this.playSpeed))
        }
      }, {
        key: "seekTo",
        value: function (e) {
          var t = Date.now(),
            n = Math.abs(t - this.lastRealTime - (e - this.lastTime));
          this.lastRealTime = t;
          var a = e >= this.lastTime;
          this.lastTime = e;
          for (var i = a ? this.nextRecordIndex : 0, A = i; A < this.records
            .length; A++) {
            if (this.records[A].time + this.offsetBegin > e) break
          }
          var o = this.records.slice(i, A);
          this.nextRecordIndex = A, a || (this.app.resetState(), this.pkgId =
          0);
          for (var s = [], u = void 0, l = void 0, c = [], d = 0; d < o
            .length; d++)
            if ("snapshot" === o[d].record.type) s.push({
              snapshot: o[d].record.value,
              pkgId: this.pkgId
            }), this.pkgId += 1;
            else if ("snapshotArr" === o[d].record.type) {
            var h = !0,
              p = !1,
              f = void 0;
            try {
              for (var g, y = (0, r.default)(o[d].record.value); !(h = (g = y
                  .next()).done); h = !0) {
                var v = g.value;
                s.push({
                  snapshot: v,
                  pkgId: this.pkgId
                }), this.pkgId += 1
              }
            } catch (e) {
              p = !0, f = e
            } finally {
              try {
                !h && y.return && y.return()
              } finally {
                if (p) throw f
              }
            }
          } else "broadcaster" === o[d].record.type ? u = o[d].record.value :
            "observeMode" === o[d].record.type ? o[d].record.value.account ===
            this.app.account && (l = o[d].record.value) : "alive" === o[d]
            .record.type && c.push(o[d]);
          this.app.aliveManager.receiveSyncData(c), u && this.app.vision
            .receiveBroadcasterAfterSync(u), l && this.app.vision
            .receiveObserveModeAfterSync(l), this.app.room.execBatchSnapshots(s,
              "player"), n > 100 && this.app.emit("event:player:seekTo")
        }
      }]), e
    }();
    t.default = o
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = o(n(36)),
      a = o(n(16)),
      i = o(n(0)),
      A = o(n(1));

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var s = function () {
      function e(t) {
        (0, i.default)(this, e), this._lastDirection = 0, this._interruptFreeDraw = !1,
          this.task = [], this.lNo = 0, this.dNo = 0, this.rNo = 0, this.repeat = 100,
          this.dInterval = 15, this.lInterval = 1e3, this.taskGenerator =
        function () {}, this.hooked = !1, this.curTaskName = null, this.curParams = [],
          this.app = t
      }
      return (0, A.default)(e, [{
        key: "reconnect",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[
              0],
            t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
          console.log("DEV--\x3e 模拟重连， 是否清空数据: " + t + ", 是否重新创建socket连接: " +
            e), t && this.app.resetState(), e ? this.app.dataHub.handler
            ._simulateReconnect() : this.app.readyToSyncData()
        }
      }, {
        key: "generateRandomLines",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : 30,
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            100,
            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            15,
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] :
            100,
            a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
          this._interruptFreeDraw = !1, this.app.disableInteraction(), a ? this
            .app.setTool("pen-pressure") : this.app.setTool("pen"), this
            ._generateRandomLines(e, t, n, r), this.addPageChangeHook(), this
            .curTaskName = "line", this.curParams = [e, t, n, r, a]
        }
      }, {
        key: "generateZheng",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : 30,
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            100,
            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            15,
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] :
            100,
            a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
          this._interruptFreeDraw = !1, this.app.disableInteraction(), a ? this
            .app.setTool("pen-pressure") : this.app.setTool("pen"), this
            ._generateZheng(e, t, n, r), this.addPageChangeHook(), this
            .curTaskName = "zheng", this.curParams = [e, t, n, r, a]
        }
      }, {
        key: "interruptRandomLines",
        value: function () {
          clearTimeout(this.timer), this.finish(), this._interruptFreeDraw = !0,
            this.app.enableInteraction(), this.curTaskName = null, this
            .curParams = []
        }
      }, {
        key: "addPageChangeHook",
        value: function () {
          var e = this;
          this.hooked || (this.app.on("event:prePageChange", (function () {
            var t = e.curTaskName;
            if (t) {
              var n = [].concat((0, a.default)(e.curParams));
              e.interruptRandomLines(), "line" === t ? e
                .generateRandomLines.apply(e, (0, a.default)(n)) :
                "zheng" === t && e.generateZheng.apply(e, (0, a.default)
                  (n))
            }
          })), this.hooked = !0)
        }
      }, {
        key: "next",
        value: function () {
          var e = this;
          clearTimeout(this.timer);
          var t = this.task[this.lNo];
          if (t)
            if (t.length > 2) {
              var n = t[this.dNo],
                r = void 0,
                a = void 0,
                i = void 0;
              0 === this.dNo ? (r = "mousedown", a = "pointerdown", i = this
                .dInterval, this.dNo += 1) : this.dNo === t.length - 1 ? (r =
                "mouseup", a = "pointerup", i = this.lInterval, this.dNo = 0,
                this.lNo += 1) : (r = "mousemove", i = this.dInterval, this
                .dNo += 1);
              var A = new MouseEvent(r, {
                clientX: n.x,
                clientY: n.y
              });
              a && this.app.container[a](new PointerEvent(a, {
                pointerType: "mouse"
              }), !0), this.app.container[r](A, !0), this.timer = setTimeout((
                function () {
                  e.next()
                }), i)
            } else this.lNo += 1, this.next();
          else this.timer = setTimeout((function () {
            e.nextTask()
          }), this.lInterval)
        }
      }, {
        key: "nextTask",
        value: function () {
          this.lNo = 0, this.dNo = 0, this.isFinish() ? (this.task = [], this
            ._interruptFreeDraw = !0, this.app.enableInteraction()) : (this
            .task = this.taskGenerator(), this.rNo += 1, this.next())
        }
      }, {
        key: "isFinish",
        value: function () {
          return this._interruptFreeDraw || this.rNo >= this.repeat
        }
      }, {
        key: "finish",
        value: function () {
          var e = new MouseEvent("mousedown", {
            clientX: 0,
            clientY: 0
          });
          this.app.container.pointerdown(new PointerEvent("pointerdown", {
            pointerType: "mouse"
          })), this.app.container.mousedown(e, !0), e = new MouseEvent(
            "mouseup", {
              clientX: 0,
              clientY: 0
            }), this.app.container.pointerup(new PointerEvent("pointerup", {
            pointerType: "mouse"
          })), this.app.container.mouseup(e, !0)
        }
      }, {
        key: "_generateZheng",
        value: function (e, t) {
          var n = this,
            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            15,
            a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] :
            1e3;
          this.dInterval = Number(r) || 15, this.lInterval = Number(a) || 1e3,
            this.repeat = t || 100;
          var i = Math.ceil(Math.sqrt(t)),
            A = Math.ceil(Math.sqrt(t));
          this.taskParam = {
            x: 0,
            y: 0,
            row: A,
            col: i
          }, this.rNo = 0, this.taskGenerator = function () {
            var t = n.app.container.el.getBoundingClientRect(),
              r = t.width,
              a = t.height,
              o = .9 * r / Math.max(i, 15),
              s = .9 * a / Math.max(A, 15),
              u = t.left + .05 * r + n.taskParam.x * o,
              l = t.top + .05 * a + n.taskParam.y * s,
              c = t.left + .05 * r + (n.taskParam.x + .8) * o,
              d = t.top + .05 * a + (n.taskParam.y + .8) * s,
              h = [];
            return h.push(n._generateLine(e, u, l, c, l)), h.push(n
                ._generateLine(e, u / 2 + c / 2, l, u / 2 + c / 2, d)), h
              .push(n._generateLine(e, u / 2 + c / 2, l / 2 + d / 2, c, l /
                2 + d / 2)), h.push(n._generateLine(e, .75 * u + .25 * c, l /
                2 + d / 2, .75 * u + .25 * c, d)), h.push(n._generateLine(e,
                u, d, c, d)), n.taskParam.x < A - 1 ? n.taskParam.x += 1 : (n
                .taskParam.y += 1, n.taskParam.x = 0), h
          }, this.nextTask()
        }
      }, {
        key: "_generateLine",
        value: function (e, t, n, r, a) {
          for (var i = [], A = 0; A < e; A++) i.push({
            x: t + A / e * (r - t) + Math.random(),
            y: n + A / e * (a - n) + Math.random()
          });
          return i
        }
      }, {
        key: "_generateRandomLines",
        value: function (e, t) {
          var n = this,
            a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            15,
            i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] :
            1e3;
          this.dInterval = Number(a) || 15, this.lInterval = Number(i) || 1e3,
            this.repeat = Number(t) || 100, this.taskParam = e || 100, this
            .rNo = 0, this.taskGenerator = function () {
              var e = n.app.container.el.getBoundingClientRect(),
                t = e.width,
                a = e.height,
                i = Math.random() * t + e.left,
                A = Math.random() * a + e.top,
                o = [];
              o.push({
                x: i,
                y: A
              });
              for (var s = 0; s < n.taskParam; s++) {
                var u = n._getDxDy(s),
                  l = (0, r.default)(u, 2);
                i += l[0], A += l[1], o.push({
                  x: i,
                  y: A
                })
              }
              return [o]
            }, this.nextTask()
        }
      }, {
        key: "_getDxDy",
        value: function (e) {
          return e % 10 == 0 && (this._lastDirection = Math.floor(4 * Math
            .random())), 0 === this._lastDirection ? [30 * Math.random(), 30 *
            Math.random()
          ] : 1 === this._lastDirection ? [30 * Math.random(), -30 * Math
            .random()
          ] : 2 === this._lastDirection ? [-30 * Math.random(), 30 * Math
            .random()
          ] : [-30 * Math.random(), -30 * Math.random()]
        }
      }]), e
    }();
    t.default = s
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(7)),
      a = c(n(0)),
      i = c(n(1)),
      A = n(31),
      o = c(n(32)),
      s = n(14),
      u = n(241),
      l = n(148);

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function () {
      function e(t) {
        var n = this;
        (0, a.default)(this, e), this.mode = "freeObserver", this
          .unsetWhenDisconnecting = function () {
            n.broadcaster === n.app.account.toString() && n.unsetSelfAsBroadcaster()
          }, this.handleBroadcasterOffline = function (e) {
            n.app.logger.log("[wb]vision broadcaster offline", e, "broadcaster", n
              .broadcaster);
            var t = !0,
              a = !1,
              i = void 0;
            try {
              for (var u, l = (0, r.default)(e); !(t = (u = l.next()).done); t = !0) {
                var c = u.value;
                if (c.toString() === n.broadcaster && c.toString() === n.app.account)
                  return n.unsetSelfAsBroadcaster();
                if (c.toString() === n.broadcaster) {
                  var d = n.broadcasterName,
                    h = n.broadcaster;
                  n.setVisionData({
                    mode: "freeObserver",
                    broadcaster: {
                      value: void 0,
                      nickname: void 0
                    }
                  });
                  var p = (0, s.getMsg)("recvCancelBroadcast", d),
                    f = o.default.RECEIVE_STOP_BROADCAST;
                  (0, A.showToast)({
                    msg: p,
                    type: "success",
                    time: 3,
                    msgType: f,
                    args: {
                      broadcasterName: n.broadcasterName,
                      broadcaster: n.broadcaster,
                      prevBroadcasterName: d,
                      prevBroadcaster: h
                    }
                  })
                }
              }
            } catch (e) {
              a = !0, i = e
            } finally {
              try {
                !t && l.return && l.return()
              } finally {
                if (a) throw i
              }
            }
          }, this.app = t, this.camera = this.app.camera, this.app.on(
            "aliveManager:offline", this.handleBroadcasterOffline), this.unregistExit =
          (0, u.regExitListener)(this.unsetWhenDisconnecting, t)
      }
      return (0, i.default)(e, [{
        key: "destroy",
        value: function () {
          this.app.off("aliveManager:offline", this.handleBroadcasterOffline),
            "function" == typeof this.unregistExit && this.unregistExit()
        }
      }, {
        key: "setVisionData",
        value: function (e) {
          e.mode && (this.mode = e.mode), e.broadcaster && (this.broadcaster = e
            .broadcaster.value, this.broadcasterNickname = e.broadcaster
            .nickname), this.app.emit("event:appState:change", "vision", {
            mode: this.mode,
            broadcasterName: this.broadcasterName,
            broadcaster: this.broadcaster
          })
        }
      }, {
        key: "setSelfAsBroadcaster",
        value: function () {
          if (this.app.appConfig.allowReplaceActiveBroadcaster || !this
            .broadcaster || this.broadcaster === this.app.account.toString()) {
            if (this.broadcaster !== this.app.account.toString())
              if (this.app.dataHub.isSynchronizing) this.app.logger.warn(
                "正在同步数据，请同步后再设置");
              else {
                var e = this.app.account,
                  t = this.app.nickname;
                this.setVisionData({
                  mode: "broadcaster",
                  broadcaster: {
                    value: e,
                    nickname: t
                  }
                }), (0, A.showToast)({
                  type: "success",
                  msg: (0, s.getMsg)("broadcast"),
                  time: 3,
                  msgType: o.default.START_BROADCAST,
                  args: {
                    broadcasterName: this.broadcasterName,
                    broadcaster: this.broadcaster
                  }
                }), this.app.dataHub.broadcastRoomState({
                  broadcaster: e,
                  nickname: t
                }, "broadcaster"), this.app.emit("op:camera-bound:send", this
                  .camera.getContainerWorldRect(), !0)
              }
          } else(0, A.showToast)({
            type: "error",
            msg: (0, s.getMsg)("sbBroadcast"),
            time: 3,
            msgType: o.default.NOT_ALLOWED_REPLACE_ACTIVE_BROADCASTER,
            args: {
              broadcasterName: this.broadcasterName,
              broadcaster: this.broadcaster
            }
          })
        }
      }, {
        key: "unsetSelfAsBroadcaster",
        value: function () {
          if (this.app.dataHub.isSynchronizing) this.app.logger.warn(
            "正在同步数据，请同步后再设置");
          else if ("broadcaster" === this.mode) {
            this.broadcaster !== this.app.account && this.app.logger.error(
              "[wb] vision.unsetSelfAsBroadcaster: current user is not broadcaster",
              this.broadcaster, this.app.account);
            var e = this.broadcasterName,
              t = this.broadcaster;
            this.setVisionData({
              mode: "freeObserver",
              broadcaster: {
                value: void 0,
                nickname: void 0
              }
            }), (0, A.showToast)({
              type: "success",
              msg: (0, s.getMsg)("sendCancelBroadcast"),
              msgType: o.default.STOP_BROADCAST,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster,
                prevBroadcasterName: e,
                prevBroadcaster: t
              }
            }), this.app.dataHub.broadcastRoomState({
              broadcaster: void 0
            }, "broadcaster")
          }
        }
      }, {
        key: "setSelfAsFollower",
        value: function () {
          if (this.app.dataHub.isSynchronizing) this.app.logger.warn(
            "正在同步数据，请同步后再设置");
          else if ("broadcaster" === this.mode) this.app.logger.error(
            "[wb] vision.setSelfAsFollower: please stop broadcasting first");
          else if ("freeObserver" === this.mode) {
            this.setVisionData({
              mode: "follower"
            });
            var e = this.camera.cameraBoundByUser[this.broadcaster];
            (0, l.transitionToCameraBound)(this.camera, e), (0, A.showToast)({
              type: "success",
              msg: (0, s.getMsg)("toFollower", this.broadcasterName),
              msgType: o.default.SWITCH_TO_FOLLOWER,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster
              }
            }), this.app.dataHub.broadcastRoomState({
              account: this.app.account,
              mode: "follower"
            }, "observeMode")
          }
        }
      }, {
        key: "setSelfAsFreeObserver",
        value: function () {
          this.app.dataHub.isSynchronizing ? this.app.logger.warn(
              "正在同步数据，请同步后再设置") : "broadcaster" === this.mode ? this.app.logger
            .error(
              "[wb] vision.setSelfAsFreeObserver: please stop broadcasting first"
              ) : "follower" === this.mode && (this.setVisionData({
              mode: "freeObserver"
            }), (0, A.showToast)({
              type: "success",
              msg: (0, s.getMsg)("toFreeOb", this.broadcasterName),
              msgType: o.default.SWITCH_TO_FREE_OBSERVER,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster
              }
            }), this.app.dataHub.broadcastRoomState({
              account: this.app.account,
              mode: "freeObserver"
            }, "observeMode"), this.app.emit("op:camera-bound:send", this
              .camera.getContainerWorldRect(), !1))
        }
      }, {
        key: "receiveBroadcaster",
        value: function (e) {
          var t = e.broadcaster,
            n = e.nickname;
          if (t) this.setVisionData({
            mode: "follower",
            broadcaster: {
              value: t,
              nickname: n
            }
          }), (0, A.showToast)({
            msg: (0, s.getMsg)("recvBroadcast", this.broadcasterName),
            type: "success",
            time: 3,
            msgType: o.default.RECEIVE_START_BROADCAST,
            args: {
              broadcasterName: this.broadcasterName,
              broadcaster: this.broadcaster
            }
          });
          else {
            var r = this.broadcasterName,
              a = this.broadcaster;
            this.setVisionData({
              mode: "freeObserver",
              broadcaster: {
                value: void 0,
                nickname: void 0
              }
            }), (0, A.showToast)({
              msg: (0, s.getMsg)("recvCancelBroadcast", r),
              type: "success",
              time: 3,
              msgType: o.default.RECEIVE_STOP_BROADCAST,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster,
                prevBroadcasterName: r,
                prevBroadcaster: a
              }
            })
          }
        }
      }, {
        key: "receiveBroadcasterAfterSync",
        value: function (e) {
          var t = this.app.aliveManager.isAlive(e.broadcaster);
          if (t && e.broadcaster === this.app.account) "broadcaster" !== this
            .mode && (this.setVisionData({
              mode: "broadcaster",
              broadcaster: {
                value: this.app.account,
                nickname: this.app.nickname
              }
            }), (0, A.showToast)({
              type: "success",
              msg: (0, s.getMsg)("recvBroadcasting"),
              time: 3,
              msgType: o.default.CURRENT_USER_IS_BROADCASTER,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster
              }
            }));
          else if (t && e.broadcaster) "follower" === this.mode && this
            .broadcaster === e.broadcaster || (this.setVisionData({
              mode: "follower",
              broadcaster: {
                value: e.broadcaster,
                nickname: e.nickname
              }
            }), (0, A.showToast)({
              msg: (0, s.getMsg)("recvBroadcast", this.broadcasterName),
              type: "success",
              time: 3,
              msgType: o.default.CURRENT_USER_IS_FOLLOWER,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster
              }
            }));
          else if ("freeObserver" !== this.mode || this.broadcaster) {
            var n = this.broadcaster,
              r = this.broadcasterName;
            this.setVisionData({
              mode: "freeObserver",
              broadcaster: {
                value: void 0,
                nickname: void 0
              }
            }), this.app.account === n ? (0, A.showToast)({
              type: "success",
              msg: "其他用户将停止与您保持视角同步",
              msgType: o.default.STOP_BROADCAST,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster,
                prevBroadcasterName: r,
                prevBroadcaster: n
              }
            }) : n && (0, A.showToast)({
              msg: (0, s.getMsg)("recvCancelBroadcast", r),
              type: "success",
              time: 3,
              msgType: o.default.RECEIVE_STOP_BROADCAST,
              args: {
                broadcasterName: this.broadcasterName,
                broadcaster: this.broadcaster,
                prevBroadcasterName: r,
                prevBroadcaster: n
              }
            })
          }
        }
      }, {
        key: "receiveObserveModeAfterSync",
        value: function (e) {
          if (e.account === this.app.account)
            if ("follower" === e.mode) {
              this.setVisionData({
                mode: "follower"
              });
              var t = this.camera.cameraBoundByUser[this.broadcaster];
              (0, l.transitionToCameraBound)(this.camera, t), (0, A.showToast)({
                type: "success",
                msg: (0, s.getMsg)("recvBroadcast", this.broadcasterName),
                msgType: o.default.CURRENT_USER_IS_FOLLOWER,
                args: {
                  broadcasterName: this.broadcasterName,
                  broadcaster: this.broadcaster
                }
              })
            } else {
              this.setVisionData({
                mode: "freeObserver"
              });
              var n = this.camera.cameraBoundByUser[this.app.account];
              (0, l.transitionToCameraBound)(this.camera, n), (0, A.showToast)({
                type: "success",
                msg: "与" + this.broadcasterName + "解除视角同步",
                msgType: o.default.CURRENT_USER_IS_FREE_OBSERVER,
                args: {
                  broadcasterName: this.broadcasterName,
                  broadcaster: this.broadcaster
                }
              })
            }
        }
      }, {
        key: "broadcasterName",
        get: function () {
          return this.broadcasterNickname ? this.broadcasterNickname : this
            .broadcaster
        }
      }]), e
    }();
    t.default = d
  }, function (e, t, n) {
    ! function (n) {
      "use strict";

      function r(e, t) {
        if (e instanceof Boolean || "boolean" == typeof e) return !1;
        if (t instanceof Object || (t = {}), !1 === t.allowEmpty && "" === e) return !1;
        var n = "(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?",
          r = "(data:\\w+\\/[a-zA-Z\\+\\-\\.]+;base64,)";
        return !0 === t.mimeRequired ? n = r + n : !0 === t.allowMime && (n = r + "?" +
          n), !1 === t.paddingRequired && (n =
            "(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?"),
          new RegExp("^" + n + "$", "gi").test(e)
      }
      e.exports && (t = e.exports = r), t.isBase64 = r
    }()
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = o(n(7)),
      a = o(n(0)),
      i = o(n(1)),
      A = o(n(22));

    function o(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var s = ["embedded-opentype", "woff", "truetype", "svg", "opentype", "woff2"],
      u = void 0,
      l = function () {
        function e(t) {
          var n, i, o, s, l, c, d = this;
          (0, a.default)(this, e), this.setFontFamilies = function (e) {
            clearTimeout(u), u = setTimeout((function () {
              d._setFontFamilies(e)
            }), 1e3)
          }, this._setFontFamilies = function (e) {
            d.fontFamilies = e;
            var t = void 0,
              n = !0,
              a = !1,
              i = void 0;
            try {
              for (var o, s = (0, r.default)(e); !(n = (o = s.next()).done); n = !0) {
                var u = o.value;
                u.fontFace && (t || ((t = document.createElement("style")).setAttribute(
                    "type", "text/css"), document.head.appendChild(t)), d
                  .appendFontFaceStyle(t, u.fontFace, u.displayName))
              }
            } catch (e) {
              a = !0, i = e
            } finally {
              try {
                !n && s.return && s.return()
              } finally {
                if (a) throw i
              }
            }
            A.default.updateFontFamily(d.app, e[0].displayName)
          }, this.app = t, this.fontFamilies = [{
            displayName: "Helvetica",
            fontName: "Helvetica"
          }, {
            displayName: "Times New Roman",
            fontName: "Times New Roman"
          }, {
            displayName: "Garamond",
            fontName: "Garamond"
          }, {
            displayName: "Courier New",
            fontName: "Courier New"
          }, {
            displayName: "Noto Sans SC",
            fontFace: {
              url: (null === (n = t.serviceConf) || void 0 === n ? void 0 : n
                .textFontUrl) + "/Noto_Sans_SC/NotoSansSC-Regular.otf"
            }
          }, {
            displayName: "Open Sans",
            fontFace: {
              url: (null === (i = t.serviceConf) || void 0 === i ? void 0 : i
                .textFontUrl) + "/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf"
            }
          }, {
            displayName: "ZOOL KuaiLe",
            fontFace: {
              url: (null === (o = t.serviceConf) || void 0 === o ? void 0 : o
                .textFontUrl) + "/ZCOOL_KuaiLe/ZCOOLKuaiLe-Regular.ttf"
            }
          }, {
            displayName: "Caveat",
            fontFace: {
              url: (null === (s = t.serviceConf) || void 0 === s ? void 0 : s
                .textFontUrl) + "/Caveat/Caveat-VariableFont_wght.ttf"
            }
          }, {
            displayName: "Long Cang",
            fontFace: {
              url: (null === (l = t.serviceConf) || void 0 === l ? void 0 : l
                .textFontUrl) + "/Long_Cang/LongCang-Regular.ttf"
            }
          }, {
            displayName: "Ma Sang Zheng",
            fontFace: {
              url: (null === (c = t.serviceConf) || void 0 === c ? void 0 : c
                .textFontUrl) + "/Ma_Shan_Zheng/MaShanZheng-Regular.ttf"
            }
          }], this.setFontFamilies(this.fontFamilies)
        }
        return (0, i.default)(e, [{
          key: "getFontFamilies",
          value: function () {
            return this.fontFamilies
          }
        }, {
          key: "appendFontFaceStyle",
          value: function (e, t, n) {
            Array.isArray(t) || (t = [t]);
            var r = t.map((function (e) {
              return e.format && -1 === s.indexOf(e.format) ? (console
                  .error("[wb] 字体format应该为以下值中的一个: " + s.join(",") +
                    ", 或者不设置format"), 'url("' + e.url + '")') : e.format ?
                'url("' + e.url + '") format("' + e.format + '")' :
                'url("' + e.url + '")'
            })).join(",\n");
            e.appendChild(document.createTextNode(
              '\n@font-face {\n    font-family: "' + n + '";\n    src: ' + r +
              ";\n}\n"))
          }
        }]), e
      }();
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(7)),
      a = u(n(42)),
      i = u(n(103)),
      A = u(n(0)),
      o = u(n(1)),
      s = n(102);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function () {
      function e(t) {
        var n = this;
        (0, A.default)(this, e), this.isBroadcaster = !1, this.aliveMap = new i.default,
          this.aliveSet = new a.default, this.visionChangeCb = function (e, t) {
            if ("vision" === e) {
              var r = n.shouldKeepAlive;
              t && "broadcaster" === t.mode ? n.isBroadcaster = !0 : n.isBroadcaster = !
                1, n.update(r)
            }
          }, this.sendAlive = function () {
            clearTimeout(n.aliveTimer);
            var e = Date.now() + n.app.ntpTimeDiff;
            if (n.aliveMap.has(n.app.account) && !n.isAlive(n.app.account)) return n.app
              .logger.warn("[wb]alive manager not active after: " + (e - n.aliveMap
                .get(n.app.account))), void n.checkAlive();
            n.app.dataHub.broadcastData({
                data: {
                  type: "alive",
                  value: {
                    uid: n.app.account,
                    t: e
                  }
                }
              }, "alive", "alive", !0), n.aliveMap.set(n.app.account, e), n.aliveSet
              .add(n.app.account), n.aliveTimer = setTimeout(n.sendAlive, 7e3)
          }, this.checkAlive = function () {
            if (!n.app.dataHub.isSynchronizing && n.app.isConnected) {
              var e = [],
                t = n.aliveMap.keys(),
                a = !0,
                i = !1,
                A = void 0;
              try {
                for (var o, s = (0, r.default)(t); !(a = (o = s.next()).done); a = !0) {
                  var u = o.value;
                  n.isAlive(u) || (e.push(u), n.aliveMap.delete(u))
                }
              } catch (e) {
                i = !0, A = e
              } finally {
                try {
                  !a && s.return && s.return()
                } finally {
                  if (i) throw A
                }
              }
              e.length > 0 && n.app.emit("aliveManager:offline", e)
            }
            clearTimeout(n.checkTimer), n.checkTimer = setTimeout(n.checkAlive, 7e3)
          }, this.app = t, this.app.isRecordPlayer || this.app.on(
            "event:appState:change", this.visionChangeCb), this.checkAlive(), this
          .visHandlerUnregist = (0, s.registerVisibleChangeHandler)((function () {
            clearTimeout(n.checkTimer), n.checkTimer = setTimeout(n.checkAlive, 7e3)
          }), (function () {
            clearTimeout(n.checkTimer)
          }))
      }
      return (0, o.default)(e, [{
        key: "destroy",
        value: function () {
          this.app.isRecordPlayer || this.app.off("event:appState:change", this
              .visionChangeCb), clearTimeout(this.aliveTimer), clearTimeout(this
              .checkTimer), "function" == typeof this.visHandlerUnregist && this
            .visHandlerUnregist()
        }
      }, {
        key: "update",
        value: function (e) {
          e !== this.shouldKeepAlive && (this.shouldKeepAlive ? (this.aliveMap
            .delete(this.app.account), clearTimeout(this.aliveTimer), this
            .sendAlive()) : clearTimeout(this.aliveTimer))
        }
      }, {
        key: "receiveAlive",
        value: function (e) {
          this.aliveMap.set(e.uid, e.t), this.aliveSet.add(e.uid.toString())
        }
      }, {
        key: "receiveSyncData",
        value: function (e) {
          var t;
          if (this.app.isRecordPlayer) {
            var n = null === (t = this.app.player) || void 0 === t ? void 0 : t
              .lastTime;
            if (n) {
              var a = !0,
                i = !1,
                A = void 0;
              try {
                for (var o, s = (0, r.default)(e); !(a = (o = s.next())
                  .done); a = !0) {
                  var u = o.value;
                  n - u.time < 2e4 && (this.aliveMap.set(u.record.value.uid
                    .toString(), u.time), this.aliveSet.add(u.record.value
                    .uid.toString()))
                }
              } catch (e) {
                i = !0, A = e
              } finally {
                try {
                  !a && s.return && s.return()
                } finally {
                  if (i) throw A
                }
              }
            }
          } else {
            var l = Date.now() + this.app.ntpTimeDiff,
              c = !0,
              d = !1,
              h = void 0;
            try {
              for (var p, f = (0, r.default)(e); !(c = (p = f.next())
                .done); c = !0) {
                var g = p.value;
                l - g.t < 2e4 && (this.aliveMap.set(g.uid.toString(), g.t), this
                  .aliveSet.add(g.uid.toString()))
              }
            } catch (e) {
              d = !0, h = e
            } finally {
              try {
                !c && f.return && f.return()
              } finally {
                if (d) throw h
              }
            }
          }
        }
      }, {
        key: "isAlive",
        value: function (e) {
          var t;
          if (e && !this.aliveSet.has(e)) return !0;
          if (e && this.aliveMap.has(e)) {
            var n = this.aliveMap.get(e);
            if (this.app.isRecordPlayer) {
              var r = null === (t = this.app.player) || void 0 === t ? void 0 :
                t.lastTime;
              if (r && r > n && r - n < 2e4) return !0
            } else {
              var a = Date.now() + this.app.ntpTimeDiff;
              if (Math.abs(a - n) < 2e4) return !0
            }
          }
          return !1
        }
      }, {
        key: "shouldKeepAlive",
        get: function () {
          return this.isBroadcaster
        }
      }]), e
    }();
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = w(n(376)),
      a = w(n(33)),
      i = w(n(20)),
      A = w(n(42)),
      o = w(n(5)),
      s = w(n(380)),
      u = w(n(16)),
      l = w(n(7)),
      c = w(n(0)),
      d = w(n(1)),
      h = w(n(106)),
      p = w(n(384)),
      f = n(53),
      g = n(446);
    n(451);
    var y = n(453),
      v = n(28),
      m = n(14);

    function w(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var B = function (e, t) {
        var n = {};
        for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 &&
          (n[r] = e[r]);
        if (null != e && "function" == typeof h.default) {
          var a = 0;
          for (r = (0, h.default)(e); a < r.length; a++) t.indexOf(r[a]) < 0 && Object
            .prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]])
        }
        return n
      },
      M = (0, f.deviceOS)(),
      C = {
        text: ["typeChange", "divider", "fontFamily", "fontStroke", "fontSize",
          "fontFill", "divider", "textAlign", "divider"
        ],
        link: ["linkArrow", "divider", "linkType", "divider", "lineProp", "divider",
          "addT", "divider", "fontFamily", "fontStroke", "fontSize", "divider"
        ],
        pen: ["lineWidth", "stroke", "divider"],
        image: ["imgCrop", "divider", "resDownload", "divider"],
        shape: ["typeChange", "divider", "lineProp", "fill", "divider", "fontFamily",
          "fontStroke", "fontSize", "fontFill", "divider", "textAlign", "divider"
        ]
      },
      I = function () {
        function e(t) {
          var n = this;
          (0, c.default)(this, e), this.selectedOpIds = [], this.isMouseDown = !1, this
            .isShow = !1, this.actionEmitFromTb = !1, this.delayHide = function () {
              clearTimeout(n.delayTimer), n.delayTimer = setTimeout((function () {
                n.hide()
              }), 100)
            }, this.hide = function () {
              clearTimeout(n.delayTimer), n.isShow = !1, n.floatToolbar.hide()
            }, this.onSnapshotAdd = function (e) {
              if (!(n.actionEmitFromTb && e.uid === n.drawPlugin.account || e.uid === n
                  .drawPlugin.account && "select" === e.data.type)) {
                var t = e.data.type,
                  r = e.data.dependOn || [],
                  a = n.drawPlugin.getSelectedIds();
                if ("scale" === t && a.length && n.syncData(a), "move" === t ||
                  "scale" === t || "rotate" === t)
                  for (var i = 0; i < r.length; i++) - 1 !== a.indexOf(r[i]) && (e.data
                    .inProgress || n.delayShow({
                      delay: 100,
                      isHide: !1
                    }));
                if ("text" === t || "modify" === t || "undo" === t || "redo" === t ||
                  "group" === t) {
                  if ("modify" === t && e.uid === n.drawPlugin.account) {
                    var A = !0,
                      o = !1,
                      s = void 0;
                    try {
                      for (var u, c = (0, l.default)(e.data.attrs.sub); !(A = (u = c
                        .next()).done); A = !0) {
                        var d = u.value,
                          h = !0,
                          p = !1,
                          f = void 0;
                        try {
                          for (var g, y = (0, l.default)(d.attrs); !(h = (g = y.next())
                              .done); h = !0) {
                            var v = g.value;
                            if ("fontSize" === v.k || "fontFamily" === v.k) return
                          }
                        } catch (e) {
                          p = !0, f = e
                        } finally {
                          try {
                            !h && y.return && y.return()
                          } finally {
                            if (p) throw f
                          }
                        }
                      }
                    } catch (e) {
                      o = !0, s = e
                    } finally {
                      try {
                        !A && c.return && c.return()
                      } finally {
                        if (o) throw s
                      }
                    }
                    var m = !0,
                      w = !1,
                      B = void 0;
                    try {
                      for (var M, C = (0, l.default)(e.data.attrs.common); !(m = (M = C
                          .next()).done); m = !0) {
                        var I = M.value;
                        if ("fontSize" === I.k || "fontFamily" === I.k) return;
                        "_reset" === I.k && n.syncData(a)
                      }
                    } catch (e) {
                      w = !0, B = e
                    } finally {
                      try {
                        !m && C.return && C.return()
                      } finally {
                        if (w) throw B
                      }
                    }
                  }
                  if ("undo" !== t && "redo" !== t && "group" !== t || n.syncData(a),
                    "text" === t) return;
                  n.delayShow({
                    isHide: !1,
                    delay: 30,
                    opids: a
                  })
                }
              }
            }, this.delayShow = function (e) {
              if (!n.isMouseDown) {
                var t = null != e ? e : {},
                  r = t.isHide,
                  a = void 0 === r || r,
                  i = t.delay,
                  A = void 0 === i ? 200 : i,
                  o = t.opids,
                  s = void 0 === o ? [] : o;
                clearTimeout(n.delayTimer), a && n.hide(), n.delayTimer = setTimeout(n
                  .updateToolbarPosAndShow, A, s)
              }
            }, this.updateToolbarPosAndShow = function (e) {
              clearTimeout(n.delayTimer);
              var t = e.length ? [].concat((0, u.default)(e)) : n.drawPlugin
                .getSelectedIds();
              if (t.length) {
                if (1 === t.length)
                  if (!n.drawPlugin.opsManager.drawOpsOfPage[t[0]]) return;
                var r = n.drawPlugin.opsManager.selectOp.selectInfo;
                if (!r) return;
                var a = void 0;
                if (r.boundary.isCombined) a = r.boundary;
                else {
                  var i = r.boundary.p1,
                    A = r.boundary.p2,
                    o = r.boundary.p3,
                    s = r.boundary.p4,
                    l = r.rotateIcon ? r.rotateIcon.x - 15 / n.drawPlugin.scale : i[0],
                    c = r.rotateIcon ? r.rotateIcon.x + 15 / n.drawPlugin.scale : i[0],
                    d = r.rotateIcon ? r.rotateIcon.y - 15 / n.drawPlugin.scale : i[1],
                    h = r.rotateIcon ? r.rotateIcon.y + 15 / n.drawPlugin.scale : i[1],
                    p = r.hintPos ? r.hintPos.p1 : i,
                    f = r.hintPos ? r.hintPos.p2 : A,
                    g = r.hintPos ? r.hintPos.p3 : o,
                    y = r.hintPos ? r.hintPos.p4 : s,
                    v = Math.min(i[0], A[0], o[0], s[0], l, c, p[0], f[0], g[0], y[0]),
                    m = Math.max(i[0], A[0], o[0], s[0], l, c, p[0], f[0], g[0], y[0]),
                    w = Math.min(i[1], A[1], o[1], s[1], d, h, p[1], f[1], g[1], y[1]);
                  a = {
                    sx: v,
                    sy: w,
                    w: m - v,
                    h: Math.max(i[1], A[1], o[1], s[1], d, h, p[1], f[1], g[1], y[1]) -
                      w
                  }
                }
                var B = n.drawPlugin.container.containerRect,
                  M = n.getClientBoundRect(a),
                  C = !1;
                (M.x > B.right || M.y > B.bottom || M.x + M.width < B.left || M.y + M
                  .height < B.top) && (C = !0), C || (n.isShow = !0, n.floatToolbar.show(
                  M))
              }
            }, this.syncData = function (e, t) {
              if (e.length) {
                var r = [];
                e.forEach((function (e) {
                  var t = n.getOpData(e);
                  t && r.push(t)
                })), n.selectedOpIds = e, n.setItems(r, t)
              }
            }, this.changeHandler = function (e) {
              var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                r = e.toolName,
                a = e.value,
                i = [];
              if ("selectFilter" !== r) {
                if ("fontSize" === r) {
                  var A = Number(a);
                  a && !(0, s.default)(A) && (A = Math.max(10, A), A = Math.min(300, A), i
                    .push({
                      k: r,
                      v: A
                    }))
                } else if ("linkArrow" === r) i.push({
                  k: "start",
                  v: {
                    aType: 0 === a || 2 === a ? v.IArrowType.None : v.IArrowType.Arrow
                  }
                }), i.push({
                  k: "end",
                  v: {
                    aType: 0 === a || 1 === a ? v.IArrowType.None : v.IArrowType.Arrow
                  }
                });
                else if ("typeChange" === r) i.push({
                  k: "typeChange",
                  v: a
                });
                else if ("textAlign" === r)
                  for (var o in a) i.push({
                    k: o,
                    v: a[o]
                  });
                else "lineProp" === r ? (i.push({
                    k: "stroke",
                    v: a.color
                  }), i.push({
                    k: "lineWidth",
                    v: a.lineWidth
                  })) : -1 !== ["stroke", "fill", "fontStroke", "fontFill"].indexOf(r) ? i
                  .push({
                    k: r,
                    v: a.color
                  }) : i.push({
                    k: r,
                    v: a
                  });
                n.actionEmitFromTb = !0, n.drawPlugin.emit("op:modify:change", n
                  .selectedOpIds, i, t), setTimeout((function () {
                  n.actionEmitFromTb = !1
                }), 0)
              } else {
                var u = "pen" === a ? ["pen", "pen-arrow", "line", "line-arrow"] : [a];
                n.drawPlugin.emit("op:select:filterType", u)
              }
            }, this.clickHandler = function (e) {
              var t, r = e.toolName;
              r && (null === (t = n[r]) || void 0 === t || t.call(n, e), "addT" === r &&
                1 === n.selectedOpIds.length ? n.drawPlugin.emit("op:link:addT", n
                  .selectedOpIds[0]) : "resDownload" === r && 1 === n.selectedOpIds
                .length ? n.drawPlugin.downloadRes(n.selectedOpIds[0]) : "imgCrop" ===
                r && 1 === n.selectedOpIds.length ? n.drawPlugin.emit("op:crop:image", n
                  .selectedOpIds[0]) : "group" === r ? n.drawPlugin.emit("op:group", !0,
                  n.selectedOpIds) : "ungroup" === r && n.drawPlugin.emit("op:group", !
                  1, n.selectedOpIds))
            }, this.contextMenu = function (e) {
              var t, r = {
                delete: function () {
                  n.drawPlugin.emit("op:delete:exec")
                },
                copy: function () {
                  n.drawPlugin.emit("op:duplicate:exec")
                },
                copyToClipboard: function () {
                  n.drawPlugin.copySelectedElesToClipboard()
                },
                bringToFront: function () {
                  n.drawPlugin.emit("op:layer:update", n.selectedOpIds, "top")
                },
                sendToBack: function () {
                  n.drawPlugin.emit("op:layer:update", n.selectedOpIds, "bottom")
                }
              };
              e.optionName && (null === (t = r[e.optionName]) || void 0 === t || t.call(
                r))
            };
          var r = t.drawPlugin,
            a = t.onChange,
            i = t.onClick,
            A = B(t, ["drawPlugin", "onChange", "onClick"]);
          this.drawPlugin = r, this.floatToolbar = new p.default((0, o.default)((0, o
            .default)({
            items: [],
            contextMenu: (0, g.getDefCtxMenu)()
          }, A), {
            onChange: function (e, t) {
              n.changeHandler(e, t), null == a || a(e, t)
            },
            onClick: function (e) {
              n.clickHandler(e), null == i || i(e)
            }
          })), this.register()
        }
        return (0, d.default)(e, [{
          key: "getOpData",
          value: function (e) {
            var t = this.drawPlugin.opsManager;
            if (t.drawOpsOfPage.hasOwnProperty(e)) {
              var n = t.drawOpsOfPage[e].data;
              return n.gid = this.drawPlugin.room.currBoard.currPage.idToGroup
                .get(e), n
            }
            return null
          }
        }, {
          key: "getClientBoundRect",
          value: function (e) {
            var t = this.drawPlugin,
              n = t.camera,
              r = t.container.containerRect,
              a = n.convertWorldPointInContainer(e.sx, e.sy);
            return {
              x: a[0] + (null == r ? void 0 : r.x),
              y: a[1] + (null == r ? void 0 : r.y),
              width: e.w * n.scale,
              height: e.h * n.scale
            }
          }
        }, {
          key: "register",
          value: function () {
            var e = this;
            M.isMobile || (this.drawPlugin.opsManager.hooks.selectChange.tap(
              "ToolbarChange", (function (t, n) {
                e.delayShow(), e.syncData(n)
              })), this.drawPlugin.on("event:textEditor:show", (function () {
              e.syncData(e.selectedOpIds, {
                  editText: !0
                }), e.isShow ? e.updateToolbarPosAndShow(e
                .selectedOpIds) : e.delayShow()
            })), this.drawPlugin.on("event:mousedown", (function () {
              e.isMouseDown = !0, e.delayHide()
            })), this.drawPlugin.on("event:mouseup", (function () {
              e.isMouseDown = !1, clearTimeout(e.delayTimer), e.isShow ||
                e.delayShow()
            })), this.drawPlugin.on("event:camera:transform", (function () {
              e.delayShow()
            })), this.drawPlugin.opsManager.hooks.opAdd.tap("ToolbarOpAdd",
              this.onSnapshotAdd))
          }
        }, {
          key: "setItems",
          value: function (e, t) {
            for (var n = this, o = [], s = [{
                  optionName: "bringToFront",
                  text: (0, m.getMsg)("bringToFront"),
                  hotKeyText: ""
                }, {
                  optionName: "sendToBack",
                  text: (0, m.getMsg)("sendToBack"),
                  hotKeyText: ""
                }, {
                  optionName: "copyToClipboard",
                  text: (0, m.getMsg)("copyAsImg"),
                  hotKeyText: ""
                }, {
                  optionName: "copy",
                  text: (0, m.getMsg)("Duplicate"),
                  hotKeyText: ""
                }, {
                  optionName: "delete",
                  text: (0, m.getMsg)("Delete"),
                  hotKeyText: m.isZh ? "Delete" : ""
                }], l = ["pen", "pen-arrow", "line", "line-arrow"], c = {}, d = !
                1, h = !1, p = !1, f = !!t && t.editText, w = !1, B = !1, M =
                new A.default, I = [], x = 0; x < e.length; x++) {
              var b = -1 !== l.indexOf(e[x].type) ? "pen" : e[x].type;
              if (c[b] = (c[b] || 0) + 1, e[x].gid ? (M.add(e[x].gid), w = !0) :
                B = !0, "audio" !== b && "video" !== b || 1 !== e.length || (s = s
                  .filter((function (e) {
                    return "copyToClipboard" !== e.optionName && "copy" !== e
                      .optionName
                  }))), "link" === b ? (d = !0, e[x].text && (e[x].text.arr || [])
                  .length > 0 && (f = !0)) : h = !0, "shape" === b && e[x].text &&
                (e[x].text.value || "").length > 0 && (f = !0), "text" === b && (
                  p = !0, f = !0), 0 === x) o = (C[b] || []).slice();
              else if (-1 === I.indexOf(b)) {
                I.push(b);
                for (var k = (C[b] || []).slice(), T = o.length - 1; T >= 0; T--)
                  - 1 === k.indexOf(o[T]) && o.splice(T, 1)
              }
            }
            e.length > 1 && ((B = B || M.size >= 2) && o.push("group"), w && o
                .push("ungroup"), (B || w) && o.push("divider")), (0, i.default)(
                c).length > 1 && (o = ["selectFilter", "divider"].concat((0, u
                .default)(o))), 1 !== e.length && (0, y.arrayRemove)(o, [
                "typeChange", "resDownload", "imgCrop", "addT"
              ]), 1 === e.length && "link" === e[0].type && e[0].text.arr
              .length >= 7 && (0, y.arrayRemove)(o, ["addT"]), d && h && (0, y
                .arrayRemove)(o, ["fontSize"]), f || (0, y.arrayRemove)(o, [
                "fontSize", "fontFamily", "textAlign", "fontStroke", "fontFill"
              ]);
            for (var E = o.length - 1; E >= 0; E--)("divider" === o[E] &&
                "divider" === o[E - 1] || 0 === E && "divider" === o[E]) && o
              .splice(E, 1);
            var D = (0, g.getDefToolMap)(),
              N = o.map((function (t) {
                var r, A, o, s, u, l = D[t],
                  h = e[0],
                  f = "text" === h.type ? h.stroke : null === (r = h.text) ||
                  void 0 === r ? void 0 : r.stroke;
                f = f || "rgb(0,0,0)";
                var g = "text" === h.type ? h.fill : null === (A = h.text) ||
                  void 0 === A ? void 0 : A.fill;
                switch (t) {
                  case "selectFilter":
                    l.value = "", l.options = (0, i.default)(c).map((
                      function (e) {
                        return {
                          type: e,
                          count: c[e]
                        }
                      }));
                    break;
                  case "lineWidth":
                    l.value = h.lineWidth || 5;
                    break;
                  case "stroke":
                    l.value = {
                      color: h.stroke
                    }, l.hasNull = !0;
                    break;
                  case "lineProp":
                    l.value = {
                      lineWidth: h.lineWidth || 5,
                      color: h.stroke
                    }, l.hasNull = !0;
                    break;
                  case "fill":
                    l.value = {
                      color: h.fill
                    };
                    break;
                  case "fontSize":
                    l.value = h.fontSize || ((null === (o = h.text) ||
                        void 0 === o ? void 0 : o.fontSize) ? h.text
                      .fontSize : 32), d && (l.max = 88);
                    break;
                  case "fontStroke":
                    l.value = {
                      color: f
                    };
                    break;
                  case "fontFamily":
                    l.value = "object" === (0, a.default)(h.text) ? h.text
                      .fontFamily : h.fontFamily, l.options = n.drawPlugin
                      .getFontFamilies().map((function (e) {
                        return {
                          value: e.fontName || e.displayName,
                          label: e.displayName
                        }
                      }));
                    break;
                  case "fontFill":
                    l.value = {
                      color: g
                    };
                    break;
                  case "textAlign":
                    l.value = {
                      textAlign: h.textAlign || ((null === (s = h.text) ||
                          void 0 === s ? void 0 : s.textAlign) ? h.text
                        .textAlign : "left"),
                      verticalAlign: h.verticalAlign || ((null === (u = h
                          .text) || void 0 === u ? void 0 : u
                        .verticalAlign) ? h.text.verticalAlign : "top")
                    }, l.hasVAlign = !p;
                    break;
                  case "linkType":
                    l.value = h.linkType;
                    break;
                  case "linkArrow":
                    h.start.aType === v.IArrowType.Arrow && h.end.aType === v
                      .IArrowType.Arrow ? l.value = 3 : h.start.aType === v
                      .IArrowType.Arrow ? l.value = 1 : h.end.aType === v
                      .IArrowType.Arrow ? l.value = 2 : l.value = 0;
                    break;
                  case "typeChange":
                    var y = n.drawPlugin.shapeManager.getFloatShapes(),
                      m = "shape" === h.type ? h.shape : h.type;
                    l.value = m, l.shapeIcons = y
                }
                return l
              }));
            this.floatToolbar.setItems((0, r.default)(N)), this.floatToolbar
              .setContextMenuOptions(s)
          }
        }]), e
      }(),
      x = {
        getInstance: function (e) {
          return new I(e).floatToolbar
        }
      };
    t.default = x
  }, function (e, t, n) {
    e.exports = {
      default: n(377),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(378), e.exports = n(8).Object.values
  }, function (e, t, n) {
    var r = n(10),
      a = n(379)(!1);
    r(r.S, "Object", {
      values: function (e) {
        return a(e)
      }
    })
  }, function (e, t, n) {
    var r = n(24),
      a = n(49),
      i = n(41),
      A = n(63).f;
    e.exports = function (e) {
      return function (t) {
        for (var n, o = i(t), s = a(o), u = s.length, l = 0, c = []; u > l;) n = s[
          l++], r && !A.call(o, n) || c.push(e ? [n, o[n]] : o[n]);
        return c
      }
    }
  }, function (e, t, n) {
    e.exports = {
      default: n(381),
      __esModule: !0
    }
  }, function (e, t, n) {
    n(382), e.exports = n(8).Number.isNaN
  }, function (e, t, n) {
    var r = n(10);
    r(r.S, "Number", {
      isNaN: function (e) {
        return e != e
      }
    })
  }, function (e, t, n) {
    n(132), e.exports = n(8).Object.getOwnPropertySymbols
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(5)),
      a = u(n(0)),
      i = u(n(1)),
      A = u(n(106)),
      o = u(n(6)),
      s = u(n(385));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function (e, t) {
        var n = {};
        for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 &&
          (n[r] = e[r]);
        if (null != e && "function" == typeof A.default) {
          var a = 0;
          for (r = (0, A.default)(e); a < r.length; a++) t.indexOf(r[a]) < 0 && Object
            .prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]])
        }
        return n
      },
      c = function () {
        function e(t) {
          (0, a.default)(this, e), this.domid = Math.random() + "", this.ref = o.default
            .createRef(), this._container = null;
          var n = null != t ? t : {},
            i = n.container,
            A = l(n, ["container"]);
          this.floatToolBar = o.default.createElement(s.default, (0, r.default)({}, A, {
            ref: this.ref
          })), this.container = null != i ? i : null
        }
        return (0, i.default)(e, [{
          key: "show",
          value: function (e) {
            var t;
            null === (t = this.toolbar) || void 0 === t || t.show(e)
          }
        }, {
          key: "hide",
          value: function () {
            var e;
            null === (e = this.toolbar) || void 0 === e || e.show(!1)
          }
        }, {
          key: "setItems",
          value: function (e) {
            var t;
            null === (t = this.toolbar) || void 0 === t || t.setItems(e)
          }
        }, {
          key: "setContextMenuOptions",
          value: function (e) {
            var t;
            null === (t = this.toolbar) || void 0 === t || t
              .setContextMenuOptions(e)
          }
        }, {
          key: "addOrSetTool",
          value: function () {}
        }, {
          key: "render",
          value: function () {
            this.container && o.default.render(this.floatToolBar, this.container)
          }
        }, {
          key: "unRender",
          value: function () {
            if (this.container) {
              var e = this.domNode;
              e && o.default.render(null, this.container, e)
            }
          }
        }, {
          key: "toolbar",
          get: function () {
            return this.ref.current
          }
        }, {
          key: "domNode",
          get: function () {
            return this.container ? this.container.querySelector("[data-domid='" +
              this.domid + "']") : null
          }
        }, {
          key: "container",
          get: function () {
            return this._container
          },
          set: function (e) {
            this.container !== e && (this.unRender(), this._container = e, this
              .render())
          }
        }, {
          key: "isShow",
          get: function () {
            var e, t;
            return null !== (t = null === (e = this.toolbar) || void 0 === e ?
              void 0 : e.isShow) && void 0 !== t && t
          }
        }]), e
      }();
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = I(n(5)),
      a = I(n(2)),
      i = I(n(0)),
      A = I(n(1)),
      o = I(n(3)),
      s = I(n(4)),
      u = I(n(106)),
      l = I(n(6)),
      c = n(386),
      d = n(61),
      h = n(397),
      p = n(254),
      f = n(404),
      g = n(409),
      y = n(413),
      v = n(422),
      m = n(428),
      w = n(434),
      B = n(435),
      M = n(438),
      C = n(443);

    function I(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var x = function (e, t) {
        var n = {};
        for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 &&
          (n[r] = e[r]);
        if (null != e && "function" == typeof u.default) {
          var a = 0;
          for (r = (0, u.default)(e); a < r.length; a++) t.indexOf(r[a]) < 0 && Object
            .prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]])
        }
        return n
      },
      b = {
        Click: d.ClickItem,
        Input: h.InputItem,
        Slider: p.SliderItem,
        TextAlign: y.TextAlign,
        LinkType: v.LinkType,
        LinkArrow: m.LinkArrow,
        TypeChange: w.TypeChange,
        LineProp: f.LineProp,
        Divider: C.Divider,
        Select: B.Select,
        SelectFilter: M.SelectFilter
      },
      k = function (e) {
        function t() {
          var e, n, r;
          (0, i.default)(this, t);
          var A = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return A.state = {
            openItem: void 0,
            isShow: null !== (e = A.props.isShow) && void 0 !== e && e,
            items: null !== (n = A.props.items) && void 0 !== n ? n : [],
            contextMenu: null !== (r = A.props.contextMenu) && void 0 !== r ? r : {},
            boundRect: {
              x: 0,
              y: 0,
              width: 0,
              height: 0
            }
          }, A.setOpenItem = function (e) {
            A.setState({
              openItem: e
            })
          }, A
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "initClickItem",
          value: function (e) {
            var t = this,
              n = e.toolType,
              a = e.onClick,
              i = x(e, ["toolType", "onClick"]),
              A = b[n];
            return l.default.createElement(A, (0, r.default)({
              onClick: function (e) {
                var n, r;
                null === (r = (n = t.props).onClick) || void 0 === r || r
                  .call(n, e), null == a || a(e)
              }
            }, i))
          }
        }, {
          key: "initValuedItem",
          value: function (e) {
            var t = this,
              n = e.toolType,
              a = e.onChange,
              i = x(e, ["toolType", "onChange"]),
              A = b[n];
            return l.default.createElement(A, (0, r.default)({
              onChange: function (n, r) {
                var i, A;
                null === (A = (i = t.props).onChange) || void 0 === A || A
                  .call(i, n, r), null == a || a(n, r), "value" in e && (e
                    .value = n.value, t.forceUpdate()), t.setState({
                    openItem: void 0
                  })
              }
            }, i))
          }
        }, {
          key: "initCommonItem",
          value: function (e) {
            var t = this,
              n = e.toolType,
              a = e.onChange,
              i = x(e, ["toolType", "onChange"]),
              A = b[n];
            return l.default.createElement(A, (0, r.default)({
              onChange: function (n, r) {
                var i, A;
                null === (A = (i = t.props).onChange) || void 0 === A || A
                  .call(i, n, r), null == a || a(n), e.value = n.value, t
                  .forceUpdate()
              }
            }, i))
          }
        }, {
          key: "initItems",
          value: function (e) {
            var t = this,
              n = [];
            return e.forEach((function (e) {
              e.openItem = t.state.openItem, e.onToolClick = function (e) {
                  t.setState({
                    openItem: e.toolName === t.state.openItem ? void 0 :
                      e.toolName
                  })
                }, "Click" === e.toolType ? n.push(t.initClickItem(e)) : -
                1 !== ["Input", "Slider", "Select", "SelectFilter"].indexOf(
                  e.toolType) ? n.push(t.initValuedItem(e)) : "Divider" ===
                e.toolType ? n.push(l.default.createElement(C.Divider,
                  null)) : -1 !== ["TextAlign", "LinkType", "LinkArrow",
                  "TypeChange", "LineProp"
                ].indexOf(e.toolType) && n.push(t.initCommonItem(e))
            })), n
          }
        }, {
          key: "render",
          value: function () {
            var e = this.props,
              t = (e.onClick, e.onChange, x(e, ["onClick", "onChange"]));
            return l.default.createElement(c.Toolbar, (0, r.default)({}, t, {
              unrendered: !this.isShow,
              items: this.items,
              contextMenu: this.contextMenu,
              boundRect: this.state.boundRect,
              setOpenItem: this.setOpenItem
            }))
          }
        }, {
          key: "show",
          value: function (e) {
            !1 === e ? this.setState({
              isShow: !1
            }) : this.setState({
              isShow: !0,
              boundRect: e
            })
          }
        }, {
          key: "setItems",
          value: function (e) {
            this.setState({
              items: e,
              openItem: void 0
            })
          }
        }, {
          key: "setContextMenuOptions",
          value: function (e) {
            this.setState({
              contextMenu: (0, r.default)((0, r.default)({}, this.state
                .contextMenu), {
                options: e
              })
            })
          }
        }, {
          key: "items",
          get: function () {
            return this.initItems(this.state.items)
          }
        }, {
          key: "contextMenu",
          get: function () {
            var e = this,
              t = this.state.contextMenu,
              n = t.onClick,
              a = x(t, ["onClick"]);
            return l.default.createElement(g.ContextMenu, (0, r.default)({
              openItem: this.state.openItem,
              onToolClick: function (t) {
                e.setState({
                  openItem: t.toolName === e.state.openItem ? void 0 :
                    t.toolName
                })
              },
              onClick: function (t) {
                var r, a;
                null === (a = (r = e.props).onClick) || void 0 === a || a
                  .call(r, t), null == n || n(t), e.setState({
                    openItem: void 0
                  })
              }
            }, a))
          }
        }, {
          key: "isShow",
          get: function () {
            return this.state.isShow
          }
        }]), t
      }(l.default.Component);
    t.default = k
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Toolbar = void 0;
    var r = h(n(16)),
      a = h(n(5)),
      i = h(n(2)),
      A = h(n(0)),
      o = h(n(1)),
      s = h(n(3)),
      u = h(n(4)),
      l = h(n(26)),
      c = h(n(6)),
      d = n(253);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(387);
    t.Toolbar = function (e) {
      function t() {
        (0, A.default)(this, t);
        var e = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this,
          arguments));
        return e.ref = c.default.createRef(), e.containerRef = c.default.createRef(), e
          .state = (0, a.default)((0, a.default)({}, (0, l.default)(t.prototype
            .__proto__ || (0, i.default)(t.prototype), "state", e)), {
            left: 0,
            top: 0,
            tbAlign: "up"
          }), e.mousedown = function (t) {
            for (var n = t.target; n;) {
              if (n === e.ref.current) return;
              n = n.parentNode
            }
            e.props.setOpenItem(void 0)
          }, e
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "componentDidMount",
        value: function () {
          window.addEventListener("mousedown", this.mousedown, {
            capture: !0
          })
        }
      }, {
        key: "componentWillUnmount",
        value: function () {
          window.removeEventListener("mousedown", this.mousedown, {
            capture: !0
          })
        }
      }, {
        key: "propsFilter",
        value: function () {
          (0, l.default)(t.prototype.__proto__ || (0, i.default)(t.prototype),
            "propsFilter", this).call(this, ["className", "style", "items",
            "contextMenu", "boundRect"
          ])
        }
      }, {
        key: "componentDidUpdate",
        value: function (e) {
          var t = this.props.unrendered,
            n = this.pickedProps.boundRect;
          if ((e.unrendered !== t || e.boundRect !== n) && !t && n) {
            var r = this.ref.current;
            if (r) {
              var a = r.parentElement;
              if (a) {
                var i = a.getBoundingClientRect(),
                  A = r.getBoundingClientRect();
                A.height *= 1.4;
                var o, s, u, l, c, d = {
                    left: n.x,
                    top: n.y,
                    right: n.x + n.width,
                    bottom: n.y + n.height,
                    width: n.width,
                    height: n.height
                  },
                  h = Math.max(d.top, i.top),
                  p = d.left + .5 * (d.width - A.width),
                  f = !1,
                  g = "up";
                if (h - A.height >= i.top ? (h -= A.height, g = "up") : d
                  .bottom + A.height < i.bottom ? (o = d.bottom + .2 * A.height,
                    s = i.bottom + A.height, u = i.top, (l = s) > (c = u) && (
                      c = s, l = u), h = o < l ? l : o > c ? c : o, g = "down"
                    ) : f = !0, f)
                  if (d.right + A.width < i.right) p = d.right;
                  else if (d.left - A.width > i.left) p = d.left - A.width;
                else {
                  p = d.left + .5 * d.width < i.left + .5 * i.width ? i.right -
                    A.width : i.left
                } else i.width < A.width || p < i.left ? p = i.left : p + A
                  .width > i.right && (p = i.right - A.width);
                this.setState({
                  left: p - i.left,
                  top: h - i.top,
                  tbAlign: g
                })
              }
            }
          }
        }
      }, {
        key: "innerStyle",
        get: function () {
          var e = this.state,
            t = e.top;
          return {
            pointerEvents: "all",
            position: "absolute",
            left: e.left + "px",
            top: t + "px"
          }
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.className,
            i = t.style,
            A = t.items,
            o = t.contextMenu;
          A = [].concat((0, r.default)(null != A ? A : [])), o && A.push(o);
          for (var s = [], u = 0, l = (A = A.map((function (t) {
              return c.default.cloneElement(t, {
                tbAlign: e.state.tbAlign
              })
            }))).length - 1; u <= l; u++) s.push(A[u]);
          var d = s.length ? s : c.default.createElement("span", {
            className: "tip"
          }, "工具栏未设置");
          return c.default.createElement("div", {
            className: "yunxin-whiteboard-float",
            style: {
              position: "absolute",
              pointerEvents: "none"
            },
            ref: this.containerRef
          }, c.default.createElement("div", (0, a.default)({
            className: "toolbar" + (n ? " " + n : ""),
            style: (0, a.default)((0, a.default)({}, i), this
              .innerStyle)
          }, this.nativeProps, {
            ref: this.ref
          }), d))
        }
      }]), t
    }(d.FloatComponent)
  }, function (e, t, n) {
    var r = n(388);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n    .yunxin-whiteboard-float .toolbar{\n        position: absolute;\n        display: flex;\n        align-items: center;\n        background-color: white; \n        box-shadow: rgba(5, 0, 50, 0.14) 0px 4px 16px 0;\n        border-radius: 4px; \n        padding: 0 8px;\n        grid-gap: 8px;\n        gap: 8px;\n        height: 50px;\n    }\n    .yunxin-whiteboard-float .toolbar .tip{\n            color: #9d9d9d; font-size: 13px; -webkit-user-select: none; -moz-user-select: none; user-select: none;\n            padding: 2px;\n        }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Hint = void 0;
    var r = u(n(2)),
      a = u(n(0)),
      i = u(n(1)),
      A = u(n(3)),
      o = u(n(4)),
      s = u(n(6));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(390);
    t.Hint = function (e) {
      function t() {
        var e;
        (0, a.default)(this, t);
        var n = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
          arguments));
        return n.state = {
          isShow: null !== (e = n.props.isShow) && void 0 !== e && e,
          showTransClasss: !1
        }, n.transTimeout = null, n
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "componentDidUpdate",
        value: function (e) {
          var t, n = this;
          if (e.isShow !== this.props.isShow) {
            clearTimeout(this.transTimeout);
            var r = null !== (t = this.props.isShow) && void 0 !== t && t;
            r ? this.transTimeout = setTimeout((function () {
              n.setState({
                isShow: r
              }, (function () {
                setTimeout((function () {
                  n.setState({
                    showTransClasss: !0
                  })
                }), 1e3 / 30)
              }))
            }), 500) : (this.setState({
              showTransClasss: !1
            }), this.transTimeout = setTimeout((function () {
              n.setState({
                isShow: r
              })
            }), 500))
          }
        }
      }, {
        key: "render",
        value: function () {
          var e = this.props.hint;
          return this.state.isShow ? s.default.createElement("div", {
            className: "hint arrow-down" + (this.state.showTransClasss ?
              " default-hint-trans" : "")
          }, s.default.createElement("span", {
            className: "default-hint-text"
          }, null != e ? e : "No Hint")) : null
        }
      }]), t
    }(s.default.Component)
  }, function (e, t, n) {
    var r = n(391);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .hint{\n        position: absolute;\n        width: 0;\n        height: 0;\n        left: 50%;\n        bottom: 50%;\n        transform: translate(0, -24px);\n        font-size: 14px;\n        color: white;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: flex-end;\n        opacity: 0;\n        transition: opacity 0.5s;\n    }\n        .yunxin-whiteboard-float .hint .default-hint-text{\n            background-color: rgb(32, 32, 32);\n            padding: 0.5em 1em;\n            border-radius: 0.25em;\n            white-space: nowrap;\n            z-index: 1;\n        }\n    .yunxin-whiteboard-float .arrow-down::after{\n        content: ' ';\n        border-width: 0.5em 0.5em 0;\n        border-style:solid;\n        border-color:rgb(32, 32, 32) transparent transparent ;\n    }\n    .yunxin-whiteboard-float .default-hint-trans{\n        opacity: 1;\n    }",
      ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQ3MzExNjY4ODA1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjcyOTAiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTI1OS42NTUxMTEgNDkwLjE1NDY2N2wtNDQuNjU3Nzc4IDQ0LjYyOTMzM0MxMzIuODM1NTU2IDYxNC4zNTczMzMgMTE3Ljg1OTU1NiA2OTcuNDU3Nzc4IDE3MS42NjIyMjIgNzc1LjA1NDIyMmExNC4xOTM3NzggMTQuMTkzNzc4IDAgMCAwIDE5Ljc5NzMzNCAzLjYyNjY2N2M2LjQ0MjY2Ny00LjUwODQ0NCA4LjA0OTc3OC0xMy4zNjg4ODkgMy41ODQtMTkuODI1Nzc4LTQ1LjQ0LTY1LjUzNi0zMi4wNzExMTEtMTM0LjA4NzExMSAzOS45MjE3NzctMjAzLjgwNDQ0NGw0NC44LTQ0Ljc4NTc3OGExNC4yMDggMTQuMjA4IDAgMSAwLTIwLjExMDIyMi0yMC4xMTAyMjJ6TTIyMC43MTQ2NjcgNzkxLjgzNjQ0NGExNC4yMDggMTQuMjA4IDAgMSAwLTIwLjA5NiAyMC4xMTAyMjNsNi42NDE3NzcgNi42MTMzMzNhMTQuMjIyMjIyIDE0LjIyMjIyMiAwIDAgMCAyMC4wOTYtMjAuMTEwMjIybC02LjY0MTc3Ny02LjYxMzMzNHpNNTc3LjU3ODY2NyA0MjUuNjI4NDQ0bC01MC4yNzU1NTYgNTAuMzA0YTE0LjIwOCAxNC4yMDggMCAxIDAgMjAuMTEwMjIyIDIwLjExMDIyM2w1MC4yNzU1NTYtNTAuMzA0YTE0LjIwOCAxNC4yMDggMCAxIDAtMjAuMTEwMjIyLTIwLjExMDIyM3oiIGZpbGw9IiIgcC1pZD0iNzI5MSI+PC9wYXRoPjxwYXRoIGQ9Ik05NTEuMTUzNzc4IDQzLjYzMzc3OGEyOC41MTU1NTYgMjguNTE1NTU2IDAgMCAwLTM1LjExNDY2NyAxOS42NDA4ODljLTAuMjEzMzMzIDAuNzY4LTIyLjE1ODIyMiA3Ni4wNzQ2NjctODguMTc3Nzc4IDEwOC41NDQtNjEuOTIzNTU2IDMwLjQ3ODIyMi05MS44MzI4ODkgNjcuNTI3MTExLTEwNi4yOTY4ODkgOTcuNjc4MjIyYTI4Mi41OTU1NTYgMjgyLjU5NTU1NiAwIDAgMC0xODQuMTkyLTY3Ljc2ODg4OSAyODMuMDIyMjIyIDI4My4wMjIyMjIgMCAwIDAtMjAxLjQ3MiA4My40NTZMMTM1LjQ1MjQ0NCA0ODUuNjMyYy0xMTEuMTA0IDExMS4xMDQtMTExLjEwNCAyOTEuODY4NDQ0IDAgNDAyLjk1ODIyMmw5LjM1ODIyMyA5LjM1ODIyMmM1My44MTY4ODkgNTMuODMxMTExIDEyNS4zNjg4ODkgODMuNDcwMjIyIDIwMS40ODYyMjIgODMuNDcwMjIzczE0Ny42NTUxMTEtMjkuNjM5MTExIDIwMS40ODYyMjItODMuNDcwMjIzTDc0OC4yMzExMTEgNjk3LjUwMDQ0NGMxMDQuODMyLTEwNC44MzIgMTEwLjYyMDQ0NC0yNzEuNjQ0NDQ0IDE3LjU5Mjg4OS0zODMuNDczNzc3IDIuODcyODg5LTE2LjI5ODY2NyAxNy4xMDkzMzMtNTYuNjc1NTU2IDg3LjE1Mzc3OC05MS4xNTAyMjMgODguNTE5MTExLTQzLjU0ODQ0NCAxMTYuNjY0ODg5LTE0MC4wNDYyMjIgMTE3LjgxNjg4OS0xNDQuMTI4YTI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDAtMTkuNjQwODg5LTM1LjExNDY2NnpNNTA3LjU0ODQ0NCA4NTcuNzI4YTIyNi41MTczMzMgMjI2LjUxNzMzMyAwIDAgMS0xNjEuMjUxNTU1IDY2LjgwMTc3OCAyMjYuNTYgMjI2LjU2IDAgMCAxLTE2MS4yNjU3NzgtNjYuODAxNzc4bC05LjM1ODIyMi05LjM1ODIyMmMtODguOTE3MzMzLTg4LjkxNzMzMy04OC45MTczMzMtMjMzLjYxNDIyMiAwLTMyMi41MzE1NTZMMzI2LjIwMDg4OSAzNzUuMzI0NDQ0YzM1LjI1Njg4OSA2Ni4yMDQ0NDQgMTMzLjY0NjIyMiAyMTkuNzkwMjIyIDMzMi44NDI2NjcgMzMwLjkwODQ0NUw1MDcuNTQ4NDQ0IDg1Ny43Mjh6IG0yMDAuNDE5NTU2LTIwMC40NDhsLTI4LjAwMzU1NiAyOC4wMTc3NzhjLTIwMy45NDY2NjctMTExLjUxNjQ0NC0zMDIuMjUwNjY3LTI3My4wNjY2NjctMzMyLjUyOTc3Ny0zMzEuMjA3MTExbDI4LjY4NjIyMi0yOC42ODYyMjNhMjI2LjU2IDIyNi41NiAwIDAgMSAxNjEuMjM3MzMzLTY2Ljc4NzU1NWM2MC45MTM3NzggMCAxMTguMjAwODg5IDIzLjcyMjY2NyAxNjEuMjY1Nzc4IDY2Ljc4NzU1NWw5LjM0NCA5LjM1ODIyM2M4OC45MzE1NTYgODguOTE3MzMzIDg4LjkzMTU1NiAyMzMuNiAwIDMyMi41MTczMzN6IiBmaWxsPSIiIHAtaWQ9IjcyOTIiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t, n) {
    var r = n(394);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .item{\n        display: flex;\n        align-items: center;\n        height: -moz-fit-content;\n        height: fit-content;\n        width: -moz-fit-content;\n        width: fit-content;\n        grid-column-gap: 2px;\n        -moz-column-gap: 2px;\n             column-gap: 2px;\n        padding: 4px;\n        background-color: transparent;\n    }\n        .yunxin-whiteboard-float .item .text{\n            font-size: 16px;\n            color: rgb(64, 64, 64);\n            transition: color 0.3s;\n        }\n        .yunxin-whiteboard-float .item .icon{\n            display: block;\n            font-size: 18px;\n            -webkit-mask-position: center;\n                    mask-position: center;\n            -webkit-mask-size: contain;\n                    mask-size: contain;\n            -webkit-mask-repeat: no-repeat;\n                    mask-repeat: no-repeat;\n            background-color:rgb(64, 64, 64);\n            transition: background-color 0.3s;\n        }\n@media (any-hover: hover) {\n        .yunxin-whiteboard-float .item:hover{\n            cursor: pointer;\n        }\n            .yunxin-whiteboard-float .item:hover .text{\n                font-size: 16px;\n                color: black;\n                transition: color 0.3s;\n            }\n            .yunxin-whiteboard-float .item:hover .icon{\n                background-color: black;\n            }\n    }\n.yunxin-whiteboard-float .item:active .icon{\n            background-color: black;\n        }\n.yunxin-whiteboard-float .item-disabled{\n        cursor: not-allowed !important;\n        background-color: transparent !important;\n        opacity: 0.5 !important;\n    }\n.yunxin-whiteboard-float .item-disabled >*{\n            cursor: not-allowed !important;\n        }",
      ""
    ])
  }, function (e, t, n) {
    var r = n(396);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .click-item{\n        font-family: inherit;\n        margin: 0;\n        border: none;\n        outline: none;\n    }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.InputItem = void 0;
    var r = g(n(5)),
      a = g(n(2)),
      i = g(n(0)),
      A = g(n(1)),
      o = g(n(3)),
      s = g(n(4)),
      u = g(n(26)),
      l = n(6),
      c = g(l),
      d = n(40),
      h = n(61),
      p = g(n(398)),
      f = g(n(399));

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(400);
    t.InputItem = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.state = (0, r.default)((0, r.default)({}, (0, u.default)(t.prototype
          .__proto__ || (0, a.default)(t.prototype), "state", e)), {
          isFocus: !1
        }), e.ref = (0, l.createRef)(), e.changeHandler = function (t) {
          var n = e.pickedProps,
            r = n.onChange,
            a = n.toolName,
            i = n.type,
            A = n.max,
            o = n.value,
            s = Number(t.target.value);
          "number" === i && ("" !== t.target.value && isNaN(s) || "" !== t.target
            .value && A && s > A ? null == r || r({
              type: "change",
              target: t.target,
              toolName: a,
              value: o || ""
            }) : null == r || r({
              type: "change",
              target: t.target,
              toolName: a,
              value: t.target.value
            }), e.forceUpdate())
        }, e.stepHandler = function (t) {
          var n, r = e.pickedProps.value,
            a = e.ref.current;
          if (a) {
            var i = Number((null !== (n = e.nativeProps.step) && void 0 !== n ? n :
                0) + "") || 1,
              A = Number((null != r ? r : a.value || 0) + "") + t * i;
            A = 1 === t ? Math.floor(A / i) * i : Math.ceil(A / i) * i, a.value = e
              .clampNumVal(A), a.dispatchEvent(new Event("change", {
                bubbles: !0,
                cancelable: !0
              }))
          }
        }, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, u.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["type", "onChange", "min", "max",
            "maxLength"
          ], {
            type: "text",
            icon: void 0,
            value: void 0
          })
        }
      }, {
        key: "clampNumVal",
        value: function (e) {
          var t = this.pickedProps,
            n = t.type,
            r = t.min,
            a = t.max;
          if ("number" !== n) return e;
          if (void 0 === r && void 0 === a) return e;
          if ((r = Number(r + "")) > (a = Number(a + ""))) {
            var i = [a, r];
            r = i[0], a = i[1]
          }
          var A = Number(e + "");
          return A < r ? r : A > a ? a : A
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          return (0, u.default)(t.prototype.__proto__ || (0, a.default)(t
            .prototype), "defaultClassNames", this).concat("input-item")
        }
      }, {
        key: "defaultStyle",
        get: function () {
          return (0, r.default)((0, r.default)({}, (0, u.default)(t.prototype
            .__proto__ || (0, a.default)(t.prototype), "defaultStyle",
            this)), {
            pointerEvents: "none"
          })
        }
      }, {
        key: "inputStyle",
        get: function () {
          return {
            pointerEvents: "all"
          }
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.type,
            a = t.value,
            i = t.disabled;
          if ("" !== a) {
            var A = Number(a);
            isNaN(A) || (a = Math.ceil(A))
          }
          return c.default.createElement("label", (0, r.default)({
              className: this.className,
              style: this.style
            }, this.state.isFocus ? {} : this.hoverProps), this.itemChildren,
            c.default.createElement("input", (0, r.default)({
              type: "text",
              style: this.inputStyle
            }, void 0 !== a ? {
              value: a
            } : {}, {
              disabled: i
            }, this.nativeProps, {
              ref: this.ref,
              onChange: this.changeHandler,
              onInput: this.changeHandler,
              onFocus: function () {
                e.setState({
                  isFocus: !0
                }), e.isHover = !1
              },
              onBlur: function () {
                e.setState({
                  isFocus: !1
                })
              }
            })), "number" === n ? c.default.createElement("div", {
              className: "default-number-input-buttons"
            }, c.default.createElement(h.ClickItem, {
              icon: p.default,
              onClick: function () {
                e.stepHandler(1)
              },
              disabled: i
            }), c.default.createElement(h.ClickItem, {
              icon: f.default,
              onClick: function () {
                e.stepHandler(-1)
              },
              disabled: i
            })) : null)
        }
      }]), t
    }(d.Item)
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQ3NDgxODc5MDUxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIzMzIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTU0MS44NjY2NjcgMjg1Ljg2NjY2N2wzNDUuNiAzNDUuNmMxNy4wNjY2NjcgMTcuMDY2NjY3IDE3LjA2NjY2NyA0Mi42NjY2NjcgMCA1OS43MzMzMzMtOC41MzMzMzMgOC41MzMzMzMtMTkuMiAxMi44LTI5Ljg2NjY2NyAxMi44SDE2OC41MzMzMzNjLTIzLjQ2NjY2NyAwLTQyLjY2NjY2Ny0xOS4yLTQyLjY2NjY2Ni00Mi42NjY2NjcgMC0xMC42NjY2NjcgNC4yNjY2NjctMjEuMzMzMzMzIDEyLjgtMjkuODY2NjY2bDM0My40NjY2NjYtMzQ1LjZjMTcuMDY2NjY3LTE3LjA2NjY2NyA0Mi42NjY2NjctMTcuMDY2NjY3IDU5LjczMzMzNCAweiIgcC1pZD0iMjMzMyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQ3NDgxODY5NTI0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxODgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTQ4Mi4xMzMzMzMgNzM4LjEzMzMzM0wxMzYuNTMzMzMzIDM5Mi41MzMzMzNjLTE3LjA2NjY2Ny0xNy4wNjY2NjctMTcuMDY2NjY3LTQyLjY2NjY2NyAwLTU5LjczMzMzMyA4LjUzMzMzMy04LjUzMzMzMyAxOS4yLTEyLjggMjkuODY2NjY3LTEyLjhoNjg5LjA2NjY2N2MyMy40NjY2NjcgMCA0Mi42NjY2NjcgMTkuMiA0Mi42NjY2NjYgNDIuNjY2NjY3IDAgMTAuNjY2NjY3LTQuMjY2NjY3IDIxLjMzMzMzMy0xMi44IDI5Ljg2NjY2Nkw1NDEuODY2NjY3IDczOC4xMzMzMzNjLTE3LjA2NjY2NyAxNy4wNjY2NjctNDIuNjY2NjY3IDE3LjA2NjY2Ny01OS43MzMzMzQgMHoiIHAtaWQ9IjIxODkiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t, n) {
    var r = n(401);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .input-item input{\n            background-color: transparent;\n            border: none;\n            padding: none;\n            outline: 1px solid rgb(164, 164, 164);\n            height: -moz-fit-content;\n            height: fit-content;\n            font-family: inherit;\n            width: 40px;\n            text-align: center;\n            font-size: 14px;\n            border-radius: 3px;\n        }\n        .yunxin-whiteboard-float .input-item input:focus{\n            border: none;\n            padding: none;\n        }\n        .yunxin-whiteboard-float .input-item input::-webkit-outer-spin-button,\n        .yunxin-whiteboard-float .input-item input::-webkit-inner-spin-button {\n            -webkit-appearance: none;\n            margin: 0;\n        }\n        .yunxin-whiteboard-float .input-item input[type=number]{\n            -webkit-appearance: textfield;\n               -moz-appearance: textfield;\n                    appearance: textfield;\n        }\n        .yunxin-whiteboard-float .input-item .default-number-input-buttons{\n            display: flex;\n            flex-direction: column;\n            margin-left: 4px;\n        }\n        .yunxin-whiteboard-float .input-item .default-number-input-buttons button{\n                pointer-events: all;\n                background-color: transparent;\n                padding: 0;\n            }\n        .yunxin-whiteboard-float .input-item .default-number-input-buttons button .icon{\n                    font-size: 14px;\n                }",
      ""
    ])
  }, function (e, t, n) {
    var r = n(403);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .slider-item input,#yunxin-whiteboard-toolCollection .slider-item input{\n            -webkit-appearance: none;\n            -moz-appearance: none;\n                 appearance: none;\n            border: none;\n            outline: none;\n            padding: none;\n            margin: 0;\n            width: 80px;\n            cursor: pointer;\n        }\n        .yunxin-whiteboard-float .slider-item input[type='range']::-webkit-slider-runnable-track,#yunxin-whiteboard-toolCollection .slider-item input[type='range']::-webkit-slider-runnable-track{\n            background-color: rgb(200, 200, 200);\n            height: 6px;\n            border-radius: 8px;\n        }\n        .yunxin-whiteboard-float .slider-item input[type=range]::-moz-range-track, #yunxin-whiteboard-toolCollection .slider-item input[type=range]::-moz-range-track {\n            background-color: rgb(200, 200, 200);\n            height: 6px;\n            border-radius: 8px;\n        }\n        .yunxin-whiteboard-float .slider-item input[type='range']::-webkit-slider-thumb,#yunxin-whiteboard-toolCollection .slider-item input[type='range']::-webkit-slider-thumb{  \n            -webkit-appearance: none;\n            height: 18px;\n            width: 18px;\n            margin-top: -6px;\n            border-radius: 50%;\n            background: black;\n            border: 1px solid rgb(200, 200, 200);\n            padding: 0;\n            outline: none;\n        }\n        .yunxin-whiteboard-float .slider-item input[type='range']::-moz-range-thumb,#yunxin-whiteboard-toolCollection .slider-item input[type='range']::-moz-range-thumb{\n            height: 16px;\n            width: 16px;\n            border-radius: 50%;\n            background: black;\n            border: 1px solid rgb(200, 200, 200);\n            outline: none;\n            padding: 0;\n        }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.LineProp = void 0;
    var r = B(n(5)),
      a = B(n(2)),
      i = B(n(0)),
      A = B(n(1)),
      o = B(n(3)),
      s = B(n(4)),
      u = B(n(26)),
      l = B(n(6)),
      c = n(40),
      d = n(61),
      h = n(99),
      p = n(62),
      f = n(254),
      g = n(255),
      y = B(n(407)),
      v = B(n(408)),
      m = B(n(256)),
      w = n(14);

    function B(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.LineProp = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.state = (0, r.default)((0, r.default)({}, (0, u.default)(t.prototype
          .__proto__ || (0, a.default)(t.prototype), "state", e)), {
          color: void 0,
          opacity: 1
        }), e.widthChangeHandler = function (t) {
          var n = e.pickedProps,
            a = n.onChange,
            i = n.toolName;
          null == a || a({
            type: t.type,
            target: t.target,
            toolName: i,
            value: (0, r.default)((0, r.default)({}, e.props.value || {}), {
              lineWidth: t.value
            })
          })
        }, e.colorChangeHandler = function (t) {
          var n = e.pickedProps,
            a = n.onChange,
            i = n.toolName,
            A = t.value ? (0, g.mixColorAndOpacity)(t.value, e.state.opacity) : "";
          null == a || a({
            type: t.type,
            target: t.target,
            toolName: i,
            value: (0, r.default)((0, r.default)({}, e.props.value || {}), {
              color: A
            })
          })
        }, e.opacityChangeHandler = function (t, n) {
          var a = e.pickedProps,
            i = a.onChange,
            A = a.toolName;
          if (e.state.color) {
            var o = e.state.color,
              s = (0, g.mixColorAndOpacity)("rgb(" + o.r + ", " + o.g + ", " + o.b +
                ")", t.value);
            null == i || i({
              type: t.type,
              target: t.target,
              toolName: A,
              value: (0, r.default)((0, r.default)({}, e.props.value || {}), {
                color: s
              })
            }, n)
          }
        }, e
      }
      return (0, s.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, u.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "colorStyle", "value",
            "colors", "panelOffset", "opacity", "openItem", "tbAlign"
          ], {
            colorStyle: "background",
            colors: [],
            panelOffset: {
              x: 0,
              y: 0
            },
            tbAlign: "up",
            hasNull: !0,
            hasLineWidth: !1
          })
        }
      }, {
        key: "componentDidMount",
        value: function () {
          this.setInitialState(this.props.value.color)
        }
      }, {
        key: "componentWillReceiveProps",
        value: function (e) {
          this.setInitialState(e.value.color)
        }
      }, {
        key: "setInitialState",
        value: function (e) {
          var t = (0, g.getRGBvalues)(e),
            n = e ? t && "number" == typeof t.a && !isNaN(t.a) ? t.a : 1 : this
            .state.opacity ? this.state.opacity : 1;
          this.setState({
            opacity: n,
            color: t ? {
              r: t.r,
              g: t.g,
              b: t.b
            } : t
          })
        }
      }, {
        key: "renderFontFillIcon",
        value: function () {
          var e = this.props.value.color;
          return l.default.createElement("div", {
            style: {
              width: "24px",
              height: "18px",
              background: "url(" + m.default+") center center no-repeat",
              position: "relative",
              top: -1
            }
          }, e && l.default.createElement("div", {
            style: {
              width: "100%",
              height: 2,
              backgroundColor: e,
              border: "1px solid rgba(0,0,0,.1)",
              position: "relative",
              top: 18
            }
          }))
        }
      }, {
        key: "renderFontStrokeIcon",
        value: function () {
          var e = this.props.value.color;
          return l.default.createElement("div", {
            style: {
              width: "24px",
              height: "18px"
            }
          }, l.default.createElement("span", {
            style: {
              fontSize: 24,
              position: "relative",
              top: -7
            }
          }, "A"), l.default.createElement("div", {
            style: {
              width: "100%",
              height: 2,
              backgroundColor: e || "black",
              border: "1px solid rgba(0,0,0,.1)",
              position: "relative",
              top: -11
            }
          }))
        }
      }, {
        key: "renderStrokeIcon",
        value: function () {
          var e = this.state.color,
            t = e && e.r > 245 && e.g > 245 && e.b > 245 ?
            "rgb(245, 245, 245)" : this.props.value.color;
          return t ? l.default.createElement("div", {
            style: {
              width: "22px",
              height: "22px",
              borderRadius: "50%",
              border: "2px solid " + t
            }
          }) : l.default.createElement("div", {
            style: {
              width: "22px",
              height: "22px",
              borderRadius: "50%",
              opacity: .1,
              border: "2px dashed black"
            }
          })
        }
      }, {
        key: "renderFillIcon",
        value: function () {
          return this.state.color ? l.default.createElement("div", {
            style: {
              width: "24px",
              height: "24px",
              borderRadius: "50%",
              backgroundColor: "" + this.props.value.color,
              border: "1px solid rgba(0,0,0,.1)"
            }
          }) : this.emptyIcon()
        }
      }, {
        key: "emptyIcon",
        value: function () {
          return l.default.createElement("div", {
            style: {
              width: "26px",
              height: "26px",
              borderRadius: "50%",
              background: "url(" + v.default+") center center no-repeat"
            }
          })
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          return (0, u.default)(t.prototype.__proto__ || (0, a.default)(t
            .prototype), "defaultClassNames", this).concat("color-platte")
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.toolName,
            r = t.colors,
            a = t.panelOffset,
            i = this.props,
            A = i.value,
            o = i.min,
            s = i.max,
            u = i.step,
            c = i.hasLineWidth,
            d = i.hasNull,
            v = A.lineWidth,
            m = [];
          return r = r || [], (d ? [""].concat(r) : r).forEach((function (t) {
            var r = (0, g.getRGBvalues)(t),
              a = !r && !e.state.color || r && e.state.color && r.r === e
              .state.color.r && r.b === e.state.color.b && r.g === e.state
              .color.g,
              i = t ? {
                backgroundColor: t
              } : {
                background: "url(" + y.default+") center center no-repeat"
              },
              A = l.default.createElement(h.RadioItem, {
                className: "radio-item color",
                name: n,
                value: t,
                style: i,
                checked: a,
                onChange: e.colorChangeHandler
              }, "");
            m.push(A)
          })), l.default.createElement(p.SubsPanel, {
              style: {
                maxWidth: 144
              },
              className: "panel",
              isShow: this.pickedProps.openItem === n,
              offset: a,
              tbAlign: this.pickedProps.tbAlign
            }, l.default.createElement("div", null, c && l.default
              .createElement(f.SliderItem, {
                className: "slider",
                min: o,
                max: s,
                step: u,
                value: v,
                onChange: this.widthChangeHandler
              }, l.default.createElement("div", {
                className: "tips"
              }, l.default.createElement("span", null, (0, w.getMsg)(
                "Thin")), l.default.createElement("span", null, (0, w
                .getMsg)("Thick"))))), l.default.createElement("div", null, l
              .default.createElement(f.SliderItem, {
                className: "slider",
                min: .1,
                max: 1,
                step: .01,
                value: this.state.opacity,
                onChange: this.opacityChangeHandler
              }, l.default.createElement("div", {
                className: "tips"
              }, l.default.createElement("span", null, (0, w.getMsg)(
                "Transparent")), l.default.createElement("span", null, (0,
                w.getMsg)("Opaque"))))), m.length ? m : l.default
            .createElement("span", null, (0, w.getMsg)("noColor")))
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.disabled,
            a = t.hint,
            i = t.toolName;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
              disabled: n,
              hint: a,
              onClick: function () {
                e.props.onToolClick && e.props.onToolClick({
                  toolName: i
                })
              }
            }, ("stroke" === i || "lineProp" === i) && this
            .renderStrokeIcon(), "fill" === i && this.renderFillIcon(),
            "fontStroke" === i && this.renderFontStrokeIcon(),
            "fontFill" === i && this.renderFontFillIcon()), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    var r = n(406);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .radio-item input{\n            position: absolute;\n            border: none;\n            outline: none;\n            padding: none;\n            margin: 0;\n            -webkit-appearance: none;\n               -moz-appearance: none;\n                    appearance: none;\n            cursor: pointer;\n        }\n        .yunxin-whiteboard-float .radio-item input:checked ~ .icon{\n                background-color: #1890ff;\n            }\n        .yunxin-whiteboard-float .radio-item input:checked ~ .text{\n                color: #1890ff;\n            }",
      ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjUwODcxNjMwMDc3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2ODciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiBmZWVkYmFjay1pY29uZm9udDsgc3JjOiB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmYyP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LnR0Zj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoInRydWV0eXBlIik7IH0KPC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMiAxMjhjLTIxMy4zMzMzMzMgMC0zODQgMTcwLjY2NjY2Ny0zODQgMzg0czE3MC42NjY2NjcgMzg0IDM4NCAzODQgMzg0LTE3MC42NjY2NjcgMzg0LTM4NC0xNzAuNjY2NjY3LTM4NC0zODQtMzg0eiBtMCA0Mi42NjY2NjdjODUuMzMzMzMzIDAgMTY2LjQgMzQuMTMzMzMzIDIyNi4xMzMzMzMgODUuMzMzMzMzTDI1NiA3MzguMTMzMzMzQzIwNC44IDY3OC40IDE3MC42NjY2NjcgNTk3LjMzMzMzMyAxNzAuNjY2NjY3IDUxMmMwLTE4Ny43MzMzMzMgMTUzLjYtMzQxLjMzMzMzMyAzNDEuMzMzMzMzLTM0MS4zMzMzMzN6IG0wIDY4Mi42NjY2NjZjLTg1LjMzMzMzMyAwLTE2Ni40LTM0LjEzMzMzMy0yMjYuMTMzMzMzLTg1LjMzMzMzM0w3NjggMjg1Ljg2NjY2N2M1MS4yIDU5LjczMzMzMyA4NS4zMzMzMzMgMTQwLjggODUuMzMzMzMzIDIyNi4xMzMzMzMgMCAxODcuNzMzMzMzLTE1My42IDM0MS4zMzMzMzMtMzQxLjMzMzMzMyAzNDEuMzMzMzMzeiIgcC1pZD0iMjY4OCIgZmlsbD0iI2JmYmZiZiI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY2MDU1NjIxMDAzMSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNzA2MSIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHBhdGgKICAgICAgICBkPSJNMzYzLjk1MSA2MC42NTZhOCA4IDAgMCAwLTExLjMxNCAwbC0zMy45NDEgMzMuOTRhOCA4IDAgMCAwIDAgMTEuMzE0bDk1Ljg3MyA5NS44NzRMNzUuMTU4IDU0MS4xOTVjLTEyLjQ5NyAxMi40OTctMTIuNDk3IDMyLjc1OCAwIDQ1LjI1NWwzNjIuMDM4IDM2Mi4wMzhjMTIuNDk3IDEyLjQ5NyAzMi43NTggMTIuNDk3IDQ1LjI1NSAwTDg0NC40OSA1ODYuNDVjMTIuNDk3LTEyLjQ5NyAxMi40OTctMzIuNzU4IDAtNDUuMjU1TDM2My45NTEgNjAuNjU1eiBtMTU3LjY5IDI0OC4xOTlsMjU0Ljk2NyAyNTQuOTY3LTAuNzA3IDAuNzA3SDE0My43NDdsLTAuNzA3LTAuNzA3IDMxNi43ODQtMzE2Ljc4NCA2MS44MTIgNjEuODEyYTAuMDEyIDAuMDEyIDAgMCAwIDAuMDA1IDAuMDA1ek05MjggODQ2LjY4N2MwLTQ4LjYzNC01Ny41LTExMi42ODgtNjQtMTI2LjY4OC02IDE0LjUtNjQgODAuMDk0LTY0IDEyNi42ODggMCAzNi4wNjQgMjguNjU0IDY1LjMgNjQgNjUuMyAzNS4zNDYgMCA2NC0yOS4yMzYgNjQtNjUuM3oiCiAgICAgICAgZmlsbD0iIzQwNDA0MCIgcC1pZD0iNzA2MiI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.ContextMenu = void 0;
    var r = f(n(5)),
      a = f(n(2)),
      i = f(n(0)),
      A = f(n(1)),
      o = f(n(3)),
      s = f(n(26)),
      u = f(n(4)),
      l = f(n(6)),
      c = n(40),
      d = n(61),
      h = n(62),
      p = f(n(410));

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(411);
    t.ContextMenu = function (e) {
      function t() {
        (0, i.default)(this, t);
        var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
          arguments));
        return e.clickHandler = function (t) {
          var n = e.pickedProps,
            r = n.onClick,
            a = n.toolName,
            i = t.toolName;
          null == r || r({
            type: t.type,
            target: t.target,
            toolName: a,
            optionName: i
          })
        }, e
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onClick", "options", "openItem",
            "panelOffset", "tbAlign"
          ], {
            icon: p.default,
            options: [],
            panelOffset: {
              x: 0,
              y: 0
            },
            tbAlign: "up"
          })
        }
      }, {
        key: "defaultClassNames",
        get: function () {
          return (0, s.default)(t.prototype.__proto__ || (0, a.default)(t
            .prototype), "defaultClassNames", this).concat("context-menu")
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.options,
            r = t.panelOffset,
            a = [];
          return null == n || n.forEach((function (t) {
            var n = t.text,
              r = t.hotKeyText,
              i = t.optionName,
              A = t.disabled,
              o = l.default.createElement(d.ClickItem, {
                className: "menu-option",
                toolName: i,
                disabled: A,
                onClick: e.clickHandler
              }, l.default.createElement("span", {
                className: "text option-text"
              }, n), r ? l.default.createElement("span", {
                className: "text option-text"
              }, r) : null);
            a.push(o)
          })), l.default.createElement(h.SubsPanel, {
            className: "menu-options-panel",
            isShow: "contextMenu" === this.pickedProps.openItem,
            offset: r,
            tbAlign: this.pickedProps.tbAlign
          }, a.length ? a : l.default.createElement("span", null,
            "Options 未设置"))
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.icon,
            a = t.text,
            i = t.disabled,
            A = t.hint;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
            icon: null != n ? n : p.default,
            text: a,
            disabled: i,
            hint: A,
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: "contextMenu"
              })
            }
          }), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQ3NTc4ODc5NzE0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjU2ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMiAzNDMuMDRjODcuNjQ0MTYgMCAxNTguNzIgNzEuMDQ1MTIgMTU4LjcyIDE1OC43MiAwIDg3LjY0NDE2LTcxLjA3NTg0IDE1OC43Mi0xNTguNzIgMTU4LjcyLTg3LjY0NDE2IDAtMTU4LjcyLTcxLjA3NTg0LTE1OC43Mi0xNTguNzIgMC04Ny42NzQ4OCA3MS4wNzU4NC0xNTguNzIgMTU4LjcyLTE1OC43MnogbTQxNy4yOCA4MS45MmM0Ni42NDgzMiAwIDg0LjQ4IDM3LjgxMTIgODQuNDggODQuNDggMCA0Ni42NDgzMi0zNy44MzE2OCA4NC40OC04NC40OCA4NC40OFM4NDQuOCA1NTYuMDg4MzIgODQ0LjggNTA5LjQ0YzAtNDYuNjY4OCAzNy44MzE2OC04NC40OCA4NC40OC04NC40OHpNMTc5LjIgNTExLjE0NDk2YzAgNDYuNjUzNDQtMzcuODMxNjggODQuNDgtODQuNDggODQuNDhTMTAuMjQgNTU3Ljc5ODQgMTAuMjQgNTExLjE0NDk2YzAtNDYuNjYzNjggMzcuODMxNjgtODQuNDggODQuNDgtODQuNDhTMTc5LjIgNDY0LjQ4NjQgMTc5LjIgNTExLjE0NDk2eiIgcC1pZD0iNTY4MyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t, n) {
    var r = n(412);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .context-menu .menu-options-panel{\n            position: fixed;\n            display: inline-flex;\n            flex-direction: column;\n            padding: 12px 16px;\n            background-color: white;\n            box-shadow: rgba(5, 0, 50, 0.14) 0px 4px 16px 0;\n            left: 0;\n            top: 0;\n            cursor: auto;\n        }\n            .yunxin-whiteboard-float .context-menu .menu-options-panel .menu-option{\n                justify-content: space-between;\n                width: 100%;\n                padding: 0;\n                grid-column-gap: 56px;\n                -moz-column-gap: 56px;\n                     column-gap: 56px;\n                margin: 6px 0;\n            }\n            .yunxin-whiteboard-float .context-menu .menu-options-panel .menu-option .option-text{\n                    font-size: 16px;\n                    white-space: nowrap;\n                }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.TextAlign = void 0;
    var r = f(n(5)),
      a = f(n(2)),
      i = f(n(0)),
      A = f(n(1)),
      o = f(n(3)),
      s = f(n(26)),
      u = f(n(4)),
      l = f(n(6)),
      c = n(40),
      d = n(61),
      h = n(62);
    n(414);
    var p = n(99);

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.TextAlign = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "onShow",
            "panelOffset", "openItem", "tbAlign", "hasVAlign"
          ], {
            panelOffset: {
              x: 0,
              y: 0
            },
            tbAlign: "up",
            hasVAlign: !0
          })
        }
      }, {
        key: "renderAlign",
        value: function () {
          var e = this.props.value.textAlign;
          return l.default.createElement("div", {
            style: {
              width: "26px",
              height: "26px"
            },
            className: "align-" + e
          })
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.panelOffset,
            a = t.toolName,
            i = t.onChange,
            A = this.props.hasVAlign,
            o = [];
          return (A ? ["left", "center", "right", "top", "middle", "bottom"] : [
            "left", "center", "right"
          ]).forEach((function (t) {
            var n = e.props.value.textAlign === t || e.props.value
              .verticalAlign === t,
              A = l.default.createElement(p.RadioItem, {
                className: "radio-item align-" + t + " " + (n ?
                  "selected" : ""),
                name: "textAlignment",
                value: t,
                checked: !1,
                onChange: function (t) {
                  var n = t.value,
                    A = ["left", "center", "right"].indexOf(n) > -1 ?
                    {
                      textAlign: n
                    } : {
                      verticalAlign: n
                    };
                  null == i || i({
                    type: t.type,
                    target: t.target,
                    toolName: a,
                    value: (0, r.default)((0, r.default)({}, e
                      .props.value), A)
                  }), e.forceUpdate()
                }
              }, "");
            o.push(A)
          })), l.default.createElement(h.SubsPanel, {
            style: {
              maxWidth: 144
            },
            className: "panel",
            isShow: this.pickedProps.openItem === a,
            offset: n,
            tbAlign: this.pickedProps.tbAlign
          }, o)
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.disabled,
            a = t.hint,
            i = t.toolName;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
            disabled: n,
            hint: a,
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: i
              })
            }
          }, this.renderAlign()), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    var r = n(415);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    t = e.exports = n(12)(!1);
    var r = n(64),
      a = r(n(416)),
      i = r(n(417)),
      A = r(n(418)),
      o = r(n(419)),
      s = r(n(420)),
      u = r(n(421));
    t.push([e.i,
      ".yunxin-whiteboard-float .align-left, .yunxin-whiteboard-float .align-right, .yunxin-whiteboard-float .align-center, .yunxin-whiteboard-float .align-top, .yunxin-whiteboard-float .align-bottom, .yunxin-whiteboard-float .align-middle {\n        width: 20px;\n        height: 20px;\n    }\n    .yunxin-whiteboard-float .align-left {\n        background: url(" +
      a +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .align-right {\n        background: url(" +
      i +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .align-center {\n        background: url(" +
      A +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .align-top {\n        background: url(" +
      o +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .align-middle {\n        background: url(" +
      s +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .align-bottom {\n        background: url(" +
      u + ") center center no-repeat;\n    }", ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1MDc4NDMyNTIxMSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMjAxNiIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHBhdGgKICAgICAgICBmaWxsPSIjMzMzIgogICAgICAgIGQ9Ik0xMjAgMjMwaDQ5NmM0LjQgMCA4LTMuNiA4LTh2LTU2YzAtNC40LTMuNi04LTgtOEgxMjBjLTQuNCAwLTggMy42LTggOHY1NmMwIDQuNCAzLjYgOCA4IDh6TTEyMCA2NTRoNDk2YzQuNCAwIDgtMy42IDgtOHYtNTZjMC00LjQtMy42LTgtOC04SDEyMGMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOHpNOTA0IDc5NEgxMjBjLTQuNCAwLTggMy42LTggOHY1NmMwIDQuNCAzLjYgOCA4IDhoNzg0YzQuNCAwIDgtMy42IDgtOHYtNTZjMC00LjQtMy42LTgtOC04ek05MDQgMzcwSDEyMGMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg3ODRjNC40IDAgOC0zLjYgOC04di01NmMwLTQuNC0zLjYtOC04LTh6IgogICAgICAgIHAtaWQ9IjIwMTciPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1MDc4NDM0NjM1MiIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMjE2NiIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHBhdGgKICAgICAgICBmaWxsPSIjMzMzIgogICAgICAgIGQ9Ik05MDQgMTU4SDQwOGMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg0OTZjNC40IDAgOC0zLjYgOC04di01NmMwLTQuNC0zLjYtOC04LTh6TTkwNCA1ODJINDA4Yy00LjQgMC04IDMuNi04IDh2NTZjMCA0LjQgMy42IDggOCA4aDQ5NmM0LjQgMCA4LTMuNiA4LTh2LTU2YzAtNC40LTMuNi04LTgtOHpNOTA0IDc5NEgxMjBjLTQuNCAwLTggMy42LTggOHY1NmMwIDQuNCAzLjYgOCA4IDhoNzg0YzQuNCAwIDgtMy42IDgtOHYtNTZjMC00LjQtMy42LTgtOC04ek05MDQgMzcwSDEyMGMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg3ODRjNC40IDAgOC0zLjYgOC04di01NmMwLTQuNC0zLjYtOC04LTh6IgogICAgICAgIHAtaWQ9IjIxNjciPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1MDc4NDM1MjQzOCIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMjMxNiIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHBhdGgKICAgICAgICBmaWxsPSIjMzMzIgogICAgICAgIGQ9Ik0yNjQgMjMwaDQ5NmM0LjQgMCA4LTMuNiA4LTh2LTU2YzAtNC40LTMuNi04LTgtOEgyNjRjLTQuNCAwLTggMy42LTggOHY1NmMwIDQuNCAzLjYgOCA4IDh6TTc2MCA2NTRjNC40IDAgOC0zLjYgOC04di01NmMwLTQuNC0zLjYtOC04LThIMjY0Yy00LjQgMC04IDMuNi04IDh2NTZjMCA0LjQgMy42IDggOCA4aDQ5NnpNOTA0IDc5NEgxMjBjLTQuNCAwLTggMy42LTggOHY1NmMwIDQuNCAzLjYgOCA4IDhoNzg0YzQuNCAwIDgtMy42IDgtOHYtNTZjMC00LjQtMy42LTgtOC04ek05MDQgMzcwSDEyMGMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg3ODRjNC40IDAgOC0zLjYgOC04di01NmMwLTQuNC0zLjYtOC04LTh6IgogICAgICAgIHAtaWQ9IjIzMTciPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjUwNzg4MzA4NjE4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI0NjYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiBmZWVkYmFjay1pY29uZm9udDsgc3JjOiB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmYyP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LnR0Zj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoInRydWV0eXBlIik7IH0KPC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg1OS45IDE2OEgxNjQuMWMtNC41IDAtOC4xIDMuNi04LjEgOHY2MGMwIDQuNCAzLjYgOCA4LjEgOGg2OTUuOGM0LjUgMCA4LjEtMy42IDguMS04di02MGMwLTQuNC0zLjYtOC04LjEtOHpNNTE4LjMgMzU1Yy0zLjItNC4xLTkuNC00LjEtMTIuNiAwbC0xMTIgMTQxLjdjLTQuMSA1LjItMC40IDEyLjkgNi4zIDEyLjloNzMuOVY4NDhjMCA0LjQgMy42IDggOCA4aDYwYzQuNCAwIDgtMy42IDgtOFY1MDkuN0g2MjRjNi43IDAgMTAuNC03LjcgNi4zLTEyLjlMNTE4LjMgMzU1eiIgcC1pZD0iMjQ2NyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjUwNzg4MzIyMTMxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2MTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiBmZWVkYmFjay1pY29uZm9udDsgc3JjOiB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmYyP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LnR0Zj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoInRydWV0eXBlIik7IH0KPC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg1OS45IDQ3NEgxNjQuMWMtNC41IDAtOC4xIDMuNi04LjEgOHY2MGMwIDQuNCAzLjYgOCA4LjEgOGg2OTUuOGM0LjUgMCA4LjEtMy42IDguMS04di02MGMwLTQuNC0zLjYtOC04LjEtOHpNNTA2LjMgMzk5LjNjMi45IDMuNyA4LjUgMy43IDExLjMgMGwxMDAuOC0xMjcuNWMzLjctNC43IDAuNC0xMS43LTUuNy0xMS43SDU1MFYxMDRjMC00LjQtMy42LTgtOC04aC02MGMtNC40IDAtOCAzLjYtOCA4djE1NmgtNjIuOGMtNiAwLTkuNCA3LTUuNyAxMS43bDEwMC44IDEyNy42ek01MTcuNyA2MjQuN2MtMi45LTMuNy04LjUtMy43LTExLjMgMEw0MDUuNiA3NTIuM2MtMy43IDQuNy0wLjQgMTEuNyA1LjcgMTEuN0g0NzR2MTU2YzAgNC40IDMuNiA4IDggOGg2MGM0LjQgMCA4LTMuNiA4LThWNzY0aDYyLjhjNiAwIDkuNC03IDUuNy0xMS43TDUxNy43IDYyNC43eiIgcC1pZD0iMjYxNyI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjUwNzg4MzI4MDIxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3NjYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiBmZWVkYmFjay1pY29uZm9udDsgc3JjOiB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmYyP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZjIiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmP3Q9MTYzMDAzMzc1OTk0NCIpIGZvcm1hdCgid29mZiIpLCB1cmwoIi8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LnR0Zj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoInRydWV0eXBlIik7IH0KPC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg1OS45IDc4MEgxNjQuMWMtNC41IDAtOC4xIDMuNi04LjEgOHY2MGMwIDQuNCAzLjYgOCA4LjEgOGg2OTUuOGM0LjUgMCA4LjEtMy42IDguMS04di02MGMwLTQuNC0zLjYtOC04LjEtOHpNNTA1LjcgNjY5YzMuMiA0LjEgOS40IDQuMSAxMi42IDBsMTEyLTE0MS43YzQuMS01LjIgMC40LTEyLjktNi4zLTEyLjloLTc0LjFWMTc2YzAtNC40LTMuNi04LTgtOGgtNjBjLTQuNCAwLTggMy42LTggOHYzMzguM0g0MDBjLTYuNyAwLTEwLjQgNy43LTYuMyAxMi45bDExMiAxNDEuOHoiIHAtaWQ9IjI3NjciPjwvcGF0aD48L3N2Zz4="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.LinkType = void 0;
    var r = f(n(5)),
      a = f(n(2)),
      i = f(n(0)),
      A = f(n(1)),
      o = f(n(3)),
      s = f(n(26)),
      u = f(n(4)),
      l = f(n(6)),
      c = n(40),
      d = n(61),
      h = n(62);
    n(423);
    var p = n(99);

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.LinkType = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "onShow",
            "panelOffset", "openItem", "value"
          ], {
            panelOffset: {
              x: 0,
              y: 0
            },
            value: 2
          })
        }
      }, {
        key: "renderAlign",
        value: function () {
          var e = this.props.value;
          return l.default.createElement("div", {
            style: {
              width: "26px",
              height: "26px"
            },
            className: "linkType-" + e
          })
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.panelOffset,
            r = t.toolName,
            a = t.onChange,
            i = [];
          return [0, 1, 2].forEach((function (t) {
            var n = e.props.value === t,
              A = l.default.createElement(p.RadioItem, {
                className: "radio-item linkType-" + t + " " + (n ?
                  "selected" : ""),
                name: "textAlignment",
                value: t,
                checked: !1,
                onChange: function (t) {
                  var n = t.value;
                  null == a || a({
                    type: t.type,
                    target: t.target,
                    toolName: r,
                    value: n
                  }), e.forceUpdate()
                }
              }, "");
            i.push(A)
          })), l.default.createElement(h.SubsPanel, {
            style: {
              maxWidth: 144
            },
            className: "panel",
            isShow: this.pickedProps.openItem === r,
            offset: n
          }, i)
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.disabled,
            a = t.hint,
            i = t.toolName;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
            disabled: n,
            hint: a,
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: i
              })
            }
          }, this.renderAlign()), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    var r = n(424);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    t = e.exports = n(12)(!1);
    var r = n(64),
      a = r(n(425)),
      i = r(n(426)),
      A = r(n(427));
    t.push([e.i,
      ".yunxin-whiteboard-float .linkType-0, .yunxin-whiteboard-float .linkType-1, .yunxin-whiteboard-float .linkType-2 {\n        width: 20px;\n        height: 20px;\n    }\n    .yunxin-whiteboard-float .linkType-0 {\n        background: url(" +
      a +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .linkType-1 {\n        background: url(" +
      i +
      ") center center no-repeat;\n    }\n    .yunxin-whiteboard-float .linkType-2 {\n        background: url(" +
      A + ") center center no-repeat;\n    }", ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NDUwMTQ1OTczMyIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODIwNiIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPgogICAgPHBhdGgKICAgICAgICBkPSJNODUgOTU1bDcwIDcwbDg1My04NTNsLTcwIC03MEw4NSA5NTV6IgogICAgICAgIHAtaWQ9IjgyMDciPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NDUwMTM3MjIwOSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQyMyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPgogICAgPHBhdGgKICAgICAgICBzdHJva2U9InJnYmEoMCwwLDAsLjgpIiBzdHJva2Utd2lkdGg9IjExMCIKICAgICAgICBkPSJNNjQgODgwYzgwMCAwIDAgLTgwMCA4MDAtODAwIiAgZmlsbD0ibm9uZSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NDUwMTQ5NDI4MiIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iOTA2MyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPgogICAgPHBhdGgKICAgICAgICBkPSJNNDAwIDgzMHYtNzAwaDUwMHY5MGgtNDEwdjcwMGgtNTAwdi05MHoiCiAgICAgICAgcC1pZD0iOTA2NCI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.LinkArrow = void 0;
    var r = f(n(5)),
      a = f(n(2)),
      i = f(n(0)),
      A = f(n(1)),
      o = f(n(3)),
      s = f(n(26)),
      u = f(n(4)),
      l = f(n(6)),
      c = n(40),
      d = n(61),
      h = n(62);
    n(429);
    var p = n(99);

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.LinkArrow = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "onShow",
            "panelOffset", "openItem", "value"
          ], {
            panelOffset: {
              x: 0,
              y: 0
            }
          })
        }
      }, {
        key: "renderAlign",
        value: function () {
          var e;
          return l.default.createElement("div", {
            style: {
              width: "26px",
              height: "26px"
            },
            className: "linkArrow-" + (null === (e = this.props.value) ||
              void 0 === e ? void 0 : e.toString())
          })
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.panelOffset,
            r = t.toolName,
            a = t.onChange,
            i = [],
            A = this.props.value;
          return [0, 1, 2, 3].forEach((function (t) {
            var n = A === t,
              o = l.default.createElement(p.RadioItem, {
                className: "linkArrow-" + t + " radio-item " + (n ?
                  "selected" : ""),
                name: "textAlignment",
                value: t,
                checked: !1,
                onChange: function (t) {
                  var n = t.value;
                  null == a || a({
                    type: t.type,
                    target: t.target,
                    toolName: r,
                    value: n
                  }), e.forceUpdate()
                }
              }, "");
            i.push(o)
          })), l.default.createElement(h.SubsPanel, {
            className: "panel linkArrow",
            isShow: this.pickedProps.openItem === r,
            offset: n
          }, i)
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.disabled,
            a = t.hint,
            i = t.toolName;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
            disabled: n,
            hint: a,
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: i
              })
            }
          }, this.renderAlign()), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    var r = n(430);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    t = e.exports = n(12)(!1);
    var r = n(64),
      a = r(n(431)),
      i = r(n(432)),
      A = r(n(257)),
      o = r(n(433));
    t.push([e.i,
      ".yunxin-whiteboard-float .linkArrow.panel .radio-item {\n        width: 20px;\n        height: 20px;\n    }\n\n    .yunxin-whiteboard-float .linkArrow-0 {\n        background: url(" +
      a +
      ") center center no-repeat;\n    }\n\n    .yunxin-whiteboard-float .linkArrow-1 {\n        background: url(" +
      i +
      ") center center no-repeat;\n    }\n\n    .yunxin-whiteboard-float .linkArrow-2 {\n        background: url(" +
      A +
      ") center center no-repeat;\n    }\n\n    .yunxin-whiteboard-float .linkArrow-3 {\n        background: url(" +
      o + ") center center no-repeat;\n    }", ""
    ])
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTAwMjIxNTc4MSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQ4NiIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPgogICAgPHBhdGggZD0iTTExMDAgNDc2aC05MDB2MTEwaDkwMHoiIHAtaWQ9Ijg0ODciPgogICAgPC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTAwMjU5MDkxNCIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTIyNDAiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgIDxwYXRoCiAgICAgICAgZD0iTTEwMjQgNDU3djExMGgtNzUwdjExMGwtMjIwLTE2NWwyMjAtMTY1djExMHoiCiAgICAgICAgZmlsbD0iIiBwLWlkPSIxMjI0MSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTAwMjU5MDkxNCIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTIyNDAiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgIDxwYXRoCiAgICAgICAgZD0iTTAgNDkybDE1MC0xNjV2MTEwaDc1MHYtMTEwbDE1MCAxNjVsLTE1MCAxNjV2LTExMGgtNzUwdjExMHoiCiAgICAgICAgZmlsbD0iIiBwLWlkPSIxMjI0MSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.TypeChange = void 0;
    var r = f(n(5)),
      a = f(n(2)),
      i = f(n(0)),
      A = f(n(1)),
      o = f(n(3)),
      s = f(n(26)),
      u = f(n(4)),
      l = f(n(6)),
      c = n(40),
      d = n(61),
      h = n(62),
      p = n(99);

    function f(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.TypeChange = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange", "onShow",
            "panelOffset", "openItem", "value", "shapeIcons"
          ], {
            panelOffset: {
              x: 0,
              y: 0
            },
            shapeIcons: {}
          })
        }
      }, {
        key: "renderIcon",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
            1] : 26,
            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            26,
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] :
            2;
          return l.default.createElement("div", {
            style: {
              width: t,
              height: n,
              background: "url(" + e + ")",
              backgroundSize: "cover",
              transform: "scale(" + r + ")"
            }
          })
        }
      }, {
        key: "options",
        get: function () {
          var e = this.pickedProps,
            t = e.toolName,
            n = e.panelOffset,
            r = e.onChange,
            a = this.props.shapeIcons,
            i = [],
            A = this.props.value;
          for (var o in a) {
            var s = A === o,
              u = l.default.createElement(p.RadioItem, {
                className: "radio-item " + (s ? "selected" : ""),
                value: o,
                checked: !1,
                onChange: function (e) {
                  var n = e.value;
                  null == r || r({
                    type: e.type,
                    target: e.target,
                    toolName: t,
                    value: n
                  })
                }
              }, this.renderIcon(a[o].icon, 20, 20, 2));
            i.push(u)
          }
          return l.default.createElement(h.SubsPanel, {
            style: {
              maxWidth: 132,
              padding: 4
            },
            className: "panel",
            isShow: this.pickedProps.openItem === t,
            offset: n
          }, i)
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.pickedProps,
            n = t.disabled,
            a = t.hint,
            i = t.toolName,
            A = this.props,
            o = A.value,
            s = A.shapeIcons;
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement(d.ClickItem, {
            disabled: n,
            hint: a,
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: i
              })
            }
          }, this.renderIcon(s[o].icon, 24, 24, 2.1)), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Select = void 0;
    var r = h(n(5)),
      a = h(n(2)),
      i = h(n(0)),
      A = h(n(1)),
      o = h(n(3)),
      s = h(n(26)),
      u = h(n(4)),
      l = h(n(6)),
      c = n(40),
      d = n(62);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(436);
    t.Select = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange"])
        }
      }, {
        key: "inputStyle",
        get: function () {
          return {
            position: "absolute",
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            appearance: "none",
            pointerEvents: "all"
          }
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.props,
            n = t.options,
            r = t.toolName,
            a = t.panelOffset;
          return l.default.createElement(d.SubsPanel, {
            className: "panel",
            offset: a,
            isShow: this.props.openItem === r,
            style: {
              padding: "0 0 4px 0"
            }
          }, l.default.createElement("div", {
            className: "select"
          }, n.map((function (t) {
            var n = "fontFamily" === r ? {
              fontFamily: t.value
            } : {};
            return l.default.createElement("div", {
              onClick: function () {
                var n, a;
                null === (a = (n = e.props).onChange) ||
                  void 0 === a || a.call(n, {
                    toolName: r,
                    value: t.value
                  })
              },
              className: "option",
              style: n
            }, t.label)
          }))))
        }
      }, {
        key: "children",
        get: function () {
          var e, t = this,
            n = this.props,
            a = n.value,
            i = n.toolName,
            A = (null === (e = n.options.find((function (e) {
              return e.value === a
            }))) || void 0 === e ? void 0 : e.label) || " ",
            o = "fontFamily" === i ? {
              fontFamily: a
            } : {};
          return l.default.createElement("div", (0, r.default)({
            className: this.className,
            style: this.style
          }, this.hoverProps), l.default.createElement("div", {
            onClick: function () {
              t.props.onToolClick && t.props.onToolClick({
                toolName: i
              })
            },
            style: (0, r.default)({
              width: "100px",
              overflow: "hidden",
              whiteSpace: "nowrap",
              textOverflow: "ellipsis",
              minHeight: "18px",
              lineHeight: "18px",
              textAlign: "center"
            }, o)
          }, A), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t, n) {
    var r = n(437);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .panel .select {\n        max-height: 350px;\n        overflow: auto;\n        \n        /* Works on Chrome/Edge/Safari */\n    }\n        .yunxin-whiteboard-float .panel .select .option {\n            margin: 12px;\n            width: 140px;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            overflow-x: hidden;\n            cursor: pointer;\n        }\n        .yunxin-whiteboard-float .panel .select {\n\n        scrollbar-width: thin;\n        scrollbar-color: black white;\n}\n    .yunxin-whiteboard-float .panel .select::-webkit-scrollbar {\n            width: 12px;\n        }\n    .yunxin-whiteboard-float .panel .select::-webkit-scrollbar-track {\n            background: white;\n        }\n    .yunxin-whiteboard-float .panel .select::-webkit-scrollbar-thumb {\n            background-color: #d9d9de;\n            border-radius: 20px;\n            border: 3px solid white;\n        }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.SelectFilter = void 0;
    var r = M(n(5)),
      a = M(n(2)),
      i = M(n(0)),
      A = M(n(1)),
      o = M(n(3)),
      s = M(n(26)),
      u = M(n(4)),
      l = M(n(6)),
      c = n(40),
      d = n(62),
      h = M(n(439)),
      p = M(n(256)),
      f = M(n(257)),
      g = M(n(149)),
      y = M(n(258)),
      v = M(n(259)),
      m = M(n(440)),
      w = M(n(150));
    n(441);
    var B = n(14);

    function M(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.SelectFilter = function (e) {
      function t() {
        return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
          .default)(t)).apply(this, arguments))
      }
      return (0, u.default)(t, e), (0, A.default)(t, [{
        key: "propsFilter",
        value: function () {
          (0, s.default)(t.prototype.__proto__ || (0, a.default)(t.prototype),
            "propsFilter", this).call(this, ["onChange"])
        }
      }, {
        key: "inputStyle",
        get: function () {
          return {
            position: "absolute",
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            appearance: "none",
            pointerEvents: "all"
          }
        }
      }, {
        key: "options",
        get: function () {
          var e = this,
            t = this.props,
            n = t.options,
            r = t.toolName,
            a = t.panelOffset,
            i = {
              audio: v.default,
              video: m.default,
              pen: p.default,
              text: g.default,
              image: y.default,
              shape: w.default,
              link: f.default
            },
            A = {
              audio: (0, B.getMsg)("Audio"),
              video: (0, B.getMsg)("Video"),
              pen: (0, B.getMsg)("penAndLine"),
              text: (0, B.getMsg)("Text"),
              image: (0, B.getMsg)("Image"),
              shape: (0, B.getMsg)("Shapes"),
              link: (0, B.getMsg)("Link")
            };
          return l.default.createElement(d.SubsPanel, {
            className: "panel",
            offset: a,
            isShow: this.props.openItem === r,
            style: {
              padding: "0 0 4px 0"
            }
          }, l.default.createElement("div", {
            className: "select"
          }, n.map((function (t) {
            return l.default.createElement("div", {
              onClick: function () {
                var n, a;
                null === (a = (n = e.props).onChange) ||
                  void 0 === a || a.call(n, {
                    toolName: r,
                    value: t.type
                  })
              },
              className: "option"
            }, l.default.createElement("div", {
              className: "symbol",
              style: {
                backgroundImage: "url(" + i[t.type] + ")"
              }
            }), l.default.createElement("div", {
              className: "type"
            }, A[t.type]), l.default.createElement("div", {
              className: "count"
            }, t.count))
          }))))
        }
      }, {
        key: "children",
        get: function () {
          var e = this,
            t = this.props.toolName;
          return l.default.createElement("div", (0, r.default)({
            className: this.className + " select-filter",
            style: this.style
          }, this.hoverProps), l.default.createElement("div", {
            onClick: function () {
              e.props.onToolClick && e.props.onToolClick({
                toolName: t
              })
            },
            className: "select-filter-div"
          }, l.default.createElement("div", {
            style: {
              display: "inline-block"
            }
          }, (0, B.getMsg)("Filter")), l.default.createElement("div", {
            className: "symbol",
            style: {
              backgroundImage: "url(" + h.default+")",
              marginLeft: "8px"
            }
          })), this.options)
        }
      }]), t
    }(c.Item)
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPgogICAgPHBhdGggZD0iTTIwMCAzMDBsMzEyIDQwMGwzMTIgLTQwMGgtNTBsLTI2MiAzNTBsLTI2MiAtMzUweiI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBmaWxsPScjNTU1NTU1JyB0PSIxNjIwMjY4NDg1MTU0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iLTMwMCAtMzAwIDE2MjQgMTYyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwMzciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMTI4IDIxMy4zMzMzMzNsNDY5LjMzMzMzMyAwcTUyLjk5MiAwIDkwLjQ5NiAzNy41MDR0MzcuNTA0IDkwLjQ5NmwwIDc3LjY1MzMzMyAyOTguNjY2NjY3LTE2Mi45ODY2NjcgMCA1MTItMjk4LjY2NjY2Ny0xNjIuOTg2NjY3IDAgNzcuNjUzMzMzcTAgNTIuOTkyLTM3LjUwNCA5MC40OTZ0LTkwLjQ5NiAzNy41MDRsLTQ2OS4zMzMzMzMgMHEtNTIuOTkyIDAtOTAuNDk2LTM3LjUwNHQtMzcuNTA0LTkwLjQ5NmwwLTM0MS4zMzMzMzNxMC01Mi45OTIgMzcuNTA0LTkwLjQ5NnQ5MC40OTYtMzcuNTA0ek01OTcuMzMzMzMzIDI5OC42NjY2NjdsLTQ2OS4zMzMzMzMgMHEtMTcuNjY0IDAtMzAuMTY1MzMzIDEyLjUwMTMzM3QtMTIuNTAxMzMzIDMwLjE2NTMzM2wwIDM0MS4zMzMzMzNxMCAxNy42NjQgMTIuNTAxMzMzIDMwLjE2NTMzM3QzMC4xNjUzMzMgMTIuNTAxMzMzbDQ2OS4zMzMzMzMgMHExNy42NjQgMCAzMC4xNjUzMzMtMTIuNTAxMzMzdDEyLjUwMTMzMy0zMC4xNjUzMzNsMC0zNDEuMzMzMzMzcTAtMTcuNjY0LTEyLjUwMTMzMy0zMC4xNjUzMzN0LTMwLjE2NTMzMy0xMi41MDEzMzN6TTkzOC42NjY2NjcgNjI0LjM0MTMzM2wwLTIyNC42ODI2NjctMjA1LjY1MzMzMyAxMTIuMzQxMzMzeiIgcC1pZD0iMjAzOCI+PC9wYXRoPjwvc3ZnPg=="
  }, function (e, t, n) {
    var r = n(442);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .select-filter .select-filter-div {\n            width: 70px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            text-align: center;\n        }\n        .yunxin-whiteboard-float .select-filter .option {\n            display: flex;\n            overflow: hidden;\n        }\n        .yunxin-whiteboard-float .select-filter .option .type {\n                display: inline-block;\n                flex: 1;\n                text-align: center;\n                line-height: 28px;\n            }\n        .yunxin-whiteboard-float .select-filter .option .count {\n                display: inline-block;\n                opacity: 0.3;\n                font-size: 14px;\n                line-height: 28px;\n            }\n        .yunxin-whiteboard-float .select-filter .symbol {\n            display: inline-block;\n            width: 22px;\n            height: 28px;\n            line-height: 28px;\n            vertical-align: middle;\n            background-repeat: no-repeat;\n            background-position: center;\n            background-size: cover;\n            background-color: white;\n        }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.Divider = void 0;
    var r = u(n(2)),
      a = u(n(0)),
      i = u(n(1)),
      A = u(n(3)),
      o = u(n(4)),
      s = u(n(6));

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(444);
    t.Divider = function (e) {
      function t() {
        return (0, a.default)(this, t), (0, A.default)(this, (t.__proto__ || (0, r
          .default)(t)).apply(this, arguments))
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "render",
        value: function () {
          return s.default.createElement("div", {
            className: "divider"
          })
        }
      }]), t
    }(s.default.Component)
  }, function (e, t, n) {
    var r = n(445);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float .divider{\n        width: 1px;\n        height: 100%;\n        border-left: 1px solid rgb(164, 164, 164, 0.15);\n    }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.getDefToolMap = t.getDefCtxMenu = t.DefaultColors = void 0;
    var r = u(n(6)),
      a = u(n(447)),
      i = u(n(448)),
      A = u(n(449)),
      o = u(n(450)),
      s = n(14);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = t.DefaultColors = ["rgb(0,0,0)", "rgb(255,255,255)", "rgb(224,32,32)",
      "rgb(250,100,0)", "rgb(247,181,0)", "rgb(109,212,0)", "rgb(68,215,182)",
      "rgb(50,197,255)", "rgb(0,145,255)", "rgb(98,54,255)", "rgb(182,32,224)",
      "rgb(109,114,120)"
    ];
    t.getDefCtxMenu = function () {
      return {
        toolName: "contextMenu",
        hint: (0, s.getMsg)("moreAction"),
        panelOffset: {
          x: 10,
          y: 10
        },
        options: []
      }
    }, t.getDefToolMap = function () {
      return {
        lineWidth: {
          toolType: "Slider",
          toolName: "lineWidth",
          hint: (0, s.getMsg)("lineWidth"),
          min: 1,
          max: 30,
          step: 1
        },
        stroke: {
          toolType: "LineProp",
          toolName: "stroke",
          hint: (0, s.getMsg)("strokeColor"),
          colors: l,
          panelOffset: {
            x: 12,
            y: 12
          },
          hasNull: !0,
          hasLineWidth: !1
        },
        lineProp: {
          toolType: "LineProp",
          toolName: "lineProp",
          hint: (0, s.getMsg)("lineProp"),
          colors: l,
          panelOffset: {
            x: 12,
            y: 12
          },
          hasNull: !0,
          min: 1,
          max: 30,
          step: 1,
          hasLineWidth: !0
        },
        fontSize: {
          toolType: "Input",
          toolName: "fontSize",
          type: "number",
          hint: (0, s.getMsg)("fontSize"),
          min: 10,
          max: 300,
          step: 8
        },
        selectFilter: {
          toolType: "SelectFilter",
          toolName: "selectFilter",
          hint: (0, s.getMsg)("shapeFilter"),
          panelOffset: {
            x: 12,
            y: 12
          },
          options: []
        },
        fontFamily: {
          toolType: "Select",
          toolName: "fontFamily",
          hint: (0, s.getMsg)("fontFamily"),
          options: [],
          panelOffset: {
            x: 0,
            y: 12
          }
        },
        fontStroke: {
          toolType: "LineProp",
          toolName: "fontStroke",
          hint: (0, s.getMsg)("fontColor"),
          colors: l,
          panelOffset: {
            x: 12,
            y: 12
          },
          hasNull: !1,
          hasLineWidth: !1
        },
        fontFill: {
          toolType: "LineProp",
          toolName: "fontFill",
          hint: (0, s.getMsg)("fontFill"),
          colors: l,
          panelOffset: {
            x: 12,
            y: 12
          },
          hasNull: !0,
          hasLineWidth: !1
        },
        fill: {
          toolType: "LineProp",
          toolName: "fill",
          hint: (0, s.getMsg)("Fill"),
          colors: l,
          panelOffset: {
            x: 12,
            y: 12
          },
          hasNull: !0,
          hasLineWidth: !1
        },
        textAlign: {
          toolType: "TextAlign",
          toolName: "textAlign",
          hint: (0, s.getMsg)("textAlign"),
          panelOffset: {
            x: 12,
            y: 12
          },
          hasVAlign: !0
        },
        linkType: {
          toolType: "LinkType",
          toolName: "linkType",
          hint: (0, s.getMsg)("linkType"),
          panelOffset: {
            x: 12,
            y: 12
          }
        },
        linkArrow: {
          toolType: "LinkArrow",
          toolName: "linkArrow",
          hint: (0, s.getMsg)("linkArrow"),
          panelOffset: {
            x: 12,
            y: 12
          }
        },
        addT: {
          toolType: "Click",
          toolName: "addT",
          hint: (0, s.getMsg)("addT"),
          icon: r.default.createElement("span", {
            style: {
              display: "inline-block",
              width: 30,
              height: 24,
              lineHeight: "24px",
              fontSize: "22px"
            }
          }, "+T")
        },
        group: {
          toolType: "Click",
          toolName: "group",
          hint: (0, s.getMsg)("Group"),
          icon: A.default
        },
        ungroup: {
          toolType: "Click",
          toolName: "ungroup",
          hint: (0, s.getMsg)("Ungroup"),
          icon: o.default
        },
        divider: {
          toolType: "Divider"
        },
        resDownload: {
          toolType: "Click",
          toolName: "resDownload",
          hint: (0, s.getMsg)("resDownload"),
          icon: a.default
        },
        imgCrop: {
          toolType: "Click",
          toolName: "imgCrop",
          hint: (0, s.getMsg)("Crop"),
          icon: i.default
        },
        typeChange: {
          toolType: "TypeChange",
          toolName: "typeChange",
          hint: (0, s.getMsg)("typeChange"),
          shapeIcons: {},
          panelOffset: {
            x: 12,
            y: 12
          }
        }
      }
    }
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1ODc0NjMxMjg1OSIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIxNTAgMTUwIDcyNCA3MjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSIyMjcyIgogICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+CiAgICA8ZGVmcz4KICAgICAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgogICAgICAgICAgICBAZm9udC1mYWNlIHsKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBmZWVkYmFjay1pY29uZm9udDsKICAgICAgICAgICAgICAgIHNyYzogdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmMj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUud29mZj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS50dGY/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ0cnVldHlwZSIpOwogICAgICAgICAgICB9CiAgICAgICAgPC9zdHlsZT4KICAgIDwvZGVmcz4KICAgIDxwYXRoCiAgICAgICAgZD0iTTcwNCAzNDEuMzMzMzMzaDY0YTY0IDY0IDAgMCAxIDY0IDY0djM2Mi42NjY2NjdhNjQgNjQgMCAwIDEtNjQgNjRIMjU2YTY0IDY0IDAgMCAxLTY0LTY0VjQwNS4zMzMzMzNhNjQgNjQgMCAwIDEgNjQtNjRoNjR2NjRoLTY0djM2Mi42NjY2NjdoNTEyVjQwNS4zMzMzMzNoLTY0di02NHogbS0xNTQuNzk0NjY3LTIxMi4yNjY2NjZsMC4wNDI2NjcgMzQ3LjQ1NiA3NC4wMDUzMzMtNzQuMDI2NjY3IDQ1LjIyNjY2NyA0NS4yNDgtMTUwLjgyNjY2NyAxNTAuODQ4LTE1MC44NDgtMTUwLjgyNjY2NyA0NS4yNDgtNDUuMjY5MzMzIDczLjE3MzMzNCA3My4xNzMzMzNWMTI5LjA2NjY2N2g2NHoiCiAgICAgICAgcC1pZD0iMjI3MyI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyBjbGFzcz0icHJlZml4X19pY29uIiB2aWV3Qm94PSIxMDAgMTAwIDgyNCA4MjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxkZWZzPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogZmVlZGJhY2staWNvbmZvbnQ7CiAgICAgICAgICAgICAgICBzcmM6IHVybCgvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmMj90PTE2MzAwMzM3NTk5NDQpIGZvcm1hdCgmcXVvdDsgd29mZjImcXVvdDsgKSwgdXJsKC8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LndvZmY/dD0xNjMwMDMzNzU5OTQ0KSBmb3JtYXQoJnF1b3Q7IHdvZmYmcXVvdDsgKSwgdXJsKC8vYXQuYWxpY2RuLmNvbS90L2ZvbnRfMTAzMTE1OF91Njl3OHloeGR1LnR0Zj90PTE2MzAwMzM3NTk5NDQpIGZvcm1hdCgmcXVvdDsgdHJ1ZXR5cGUmcXVvdDsgKQogICAgICAgICAgICB9CiAgICAgICAgPC9zdHlsZT4KICAgIDwvZGVmcz4KICAgIDxwYXRoCiAgICAgICAgZD0iTTcyNS4zMzMgNjQwaDg1LjMzNFYyOTguNjY3YzAtNDYuOTM0LTM4LjQtODUuMzM0LTg1LjMzNC04NS4zMzRIMzg0djg1LjMzNGgzNDEuMzMzVjY0MHptLTQyNi42NjYgODUuMzMzVjQyLjY2N2gtODUuMzM0djE3MC42NjZINDIuNjY3djg1LjMzNGgxNzAuNjY2djQyNi42NjZjMCA0Ni45MzQgMzguNCA4NS4zMzQgODUuMzM0IDg1LjMzNGg0MjYuNjY2djE3MC42NjZoODUuMzM0VjgxMC42NjdoMTcwLjY2NnYtODUuMzM0SDI5OC42Njd6IiAvPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjU5MDg1NDExMTM0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE3MDE5IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBmb250LWZhY2UgeyBmb250LWZhbWlseTogZmVlZGJhY2staWNvbmZvbnQ7IHNyYzogdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmMj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUud29mZj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS50dGY/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ0cnVldHlwZSIpOyB9Cjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik0xMjggNDIuNjY2NjY3QzgwLjY0IDQyLjY2NjY2NyA0Mi42NjY2NjcgODAuNjQgNDIuNjY2NjY3IDEyOEw0Mi42NjY2NjcgNTk3LjMzMzMzM0M0Mi42NjY2NjcgNjQ0LjY5MzMzMyA4MC42NCA2ODIuNjY2NjY3IDEyOCA2ODIuNjY2NjY3IDE4NC43NDY2NjcgNjgyLjY2NjY2NyAyOTguNjY2NjY3IDY4Mi42NjY2NjcgMjk4LjY2NjY2NyA2ODIuNjY2NjY3IDI5OC42NjY2NjcgNjgyLjY2NjY2NyAyOTguNjY2NjY3IDc5Ni41ODY2NjcgMjk4LjY2NjY2NyA4NTMuMzMzMzMzIDI5OC42NjY2NjcgOTAwLjY5MzMzMyAzMzYuNjQgOTM4LjY2NjY2NyAzODQgOTM4LjY2NjY2N0w4NTMuMzMzMzMzIDkzOC42NjY2NjdDOTAwLjY5MzMzMyA5MzguNjY2NjY3IDkzOC42NjY2NjcgOTAwLjY5MzMzMyA5MzguNjY2NjY3IDg1My4zMzMzMzNMOTM4LjY2NjY2NyAzODRDOTM4LjY2NjY2NyAzMzYuNjQgOTAwLjY5MzMzMyAyOTguNjY2NjY3IDg1My4zMzMzMzMgMjk4LjY2NjY2NyA3OTYuNTg2NjY3IDI5OC42NjY2NjcgNjgyLjY2NjY2NyAyOTguNjY2NjY3IDY4Mi42NjY2NjcgMjk4LjY2NjY2NyA2ODIuNjY2NjY3IDI5OC42NjY2NjcgNjgyLjY2NjY2NyAxODQuNzQ2NjY3IDY4Mi42NjY2NjcgMTI4IDY4Mi42NjY2NjcgODAuNjQgNjQ0LjY5MzMzMyA0Mi42NjY2NjcgNTk3LjMzMzMzMyA0Mi42NjY2NjdMMTI4IDQyLjY2NjY2N00xMjggMTI4IDU5Ny4zMzMzMzMgMTI4QzU5Ny4zMzMzMzMgMTg0Ljc0NjY2NyA1OTcuMzMzMzMzIDI5OC42NjY2NjcgNTk3LjMzMzMzMyAyOTguNjY2NjY3TDM4NCAyOTguNjY2NjY3QzMzNi42NCAyOTguNjY2NjY3IDI5OC42NjY2NjcgMzM2LjY0IDI5OC42NjY2NjcgMzg0TDI5OC42NjY2NjcgNTk3LjMzMzMzM0MyOTguNjY2NjY3IDU5Ny4zMzMzMzMgMTg0Ljc0NjY2NyA1OTcuMzMzMzMzIDEyOCA1OTcuMzMzMzMzTDEyOCAxMjhNMzg0IDM4NCA1OTcuMzMzMzMzIDM4NCA1OTcuMzMzMzMzIDU5Ny4zMzMzMzMgMzg0IDU5Ny4zMzMzMzMgMzg0IDM4NE02ODIuNjY2NjY3IDM4NEM2ODIuNjY2NjY3IDM4NCA3OTYuNTg2NjY3IDM4NCA4NTMuMzMzMzMzIDM4NEw4NTMuMzMzMzMzIDg1My4zMzMzMzMgMzg0IDg1My4zMzMzMzNDMzg0IDc5Ni41ODY2NjcgMzg0IDY4Mi42NjY2NjcgMzg0IDY4Mi42NjY2NjdMNTk3LjMzMzMzMyA2ODIuNjY2NjY3QzY0NC42OTMzMzMgNjgyLjY2NjY2NyA2ODIuNjY2NjY3IDY0NC42OTMzMzMgNjgyLjY2NjY2NyA1OTcuMzMzMzMzTDY4Mi42NjY2NjcgMzg0WiIgcC1pZD0iMTcwMjAiPjwvcGF0aD48L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjU5MDg1MzkxNTUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE2ODc1IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBmb250LWZhY2UgeyBmb250LWZhbWlseTogZmVlZGJhY2staWNvbmZvbnQ7IHNyYzogdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS53b2ZmMj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYyIiksIHVybCgiLy9hdC5hbGljZG4uY29tL3QvZm9udF8xMDMxMTU4X3U2OXc4eWh4ZHUud29mZj90PTE2MzAwMzM3NTk5NDQiKSBmb3JtYXQoIndvZmYiKSwgdXJsKCIvL2F0LmFsaWNkbi5jb20vdC9mb250XzEwMzExNThfdTY5dzh5aHhkdS50dGY/dD0xNjMwMDMzNzU5OTQ0IikgZm9ybWF0KCJ0cnVldHlwZSIpOyB9Cjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik0xMjggNDIuNjY2NjY3QzgwLjY0IDQyLjY2NjY2NyA0Mi42NjY2NjcgODAuNjQgNDIuNjY2NjY3IDEyOEw0Mi42NjY2NjcgMjEzLjMzMzMzMyAxMjggMjEzLjMzMzMzMyAxMjggMTI4IDIxMy4zMzMzMzMgMTI4IDIxMy4zMzMzMzMgNDIuNjY2NjY3IDEyOCA0Mi42NjY2NjdNMjk4LjY2NjY2NyA0Mi42NjY2NjcgMjk4LjY2NjY2NyAxMjggNDI2LjY2NjY2NyAxMjggNDI2LjY2NjY2NyA0Mi42NjY2NjcgMjk4LjY2NjY2NyA0Mi42NjY2NjdNNTEyIDQyLjY2NjY2NyA1MTIgMTI4IDU5Ny4zMzMzMzMgMTI4IDU5Ny4zMzMzMzMgMjEzLjMzMzMzMyA2ODIuNjY2NjY3IDIxMy4zMzMzMzMgNjgyLjY2NjY2NyAxMjhDNjgyLjY2NjY2NyA4MC42NCA2NDQuNjkzMzMzIDQyLjY2NjY2NyA1OTcuMzMzMzMzIDQyLjY2NjY2N0w1MTIgNDIuNjY2NjY3TTQyLjY2NjY2NyAyOTguNjY2NjY3IDQyLjY2NjY2NyA0MjYuNjY2NjY3IDEyOCA0MjYuNjY2NjY3IDEyOCAyOTguNjY2NjY3IDQyLjY2NjY2NyAyOTguNjY2NjY3TTU5Ny4zMzMzMzMgMjk4LjY2NjY2N0M1OTcuMzMzMzMzIDI5OC42NjY2NjcgNTk3LjMzMzMzMyA0OTcuOTIgNTk3LjMzMzMzMyA1OTcuMzMzMzMzIDQ5Ny45MiA1OTcuMzMzMzMzIDI5OC42NjY2NjcgNTk3LjMzMzMzMyAyOTguNjY2NjY3IDU5Ny4zMzMzMzMgMjk4LjY2NjY2NyA1OTcuMzMzMzMzIDI5OC42NjY2NjcgNzY4IDI5OC42NjY2NjcgODUzLjMzMzMzMyAyOTguNjY2NjY3IDkwMC42OTMzMzMgMzM2LjY0IDkzOC42NjY2NjcgMzg0IDkzOC42NjY2NjdMODUzLjMzMzMzMyA5MzguNjY2NjY3QzkwMC42OTMzMzMgOTM4LjY2NjY2NyA5MzguNjY2NjY3IDkwMC42OTMzMzMgOTM4LjY2NjY2NyA4NTMuMzMzMzMzTDkzOC42NjY2NjcgMzg0QzkzOC42NjY2NjcgMzM2LjY0IDkwMC42OTMzMzMgMjk4LjY2NjY2NyA4NTMuMzMzMzMzIDI5OC42NjY2NjcgNzY4IDI5OC42NjY2NjcgNTk3LjMzMzMzMyAyOTguNjY2NjY3IDU5Ny4zMzMzMzMgMjk4LjY2NjY2N002ODIuNjY2NjY3IDM4NCA4NTMuMzMzMzMzIDM4NCA4NTMuMzMzMzMzIDg1My4zMzMzMzMgMzg0IDg1My4zMzMzMzMgMzg0IDY4Mi42NjY2NjcgNTk3LjMzMzMzMyA2ODIuNjY2NjY3QzY0NC42OTMzMzMgNjgyLjY2NjY2NyA2ODIuNjY2NjY3IDY0NC42OTMzMzMgNjgyLjY2NjY2NyA1OTcuMzMzMzMzTDY4Mi42NjY2NjcgMzg0TTQyLjY2NjY2NyA1MTIgNDIuNjY2NjY3IDU5Ny4zMzMzMzNDNDIuNjY2NjY3IDY0NC42OTMzMzMgODAuNjQgNjgyLjY2NjY2NyAxMjggNjgyLjY2NjY2N0wyMTMuMzMzMzMzIDY4Mi42NjY2NjcgMjEzLjMzMzMzMyA1OTcuMzMzMzMzIDEyOCA1OTcuMzMzMzMzIDEyOCA1MTIgNDIuNjY2NjY3IDUxMloiIHAtaWQ9IjE2ODc2Ij48L3BhdGg+PC9zdmc+"
  }, function (e, t, n) {
    var r = n(452);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".yunxin-whiteboard-float {\n    position: absolute;\n    left: 56px;\n    top: 56px;\n    bottom: 56px;\n}\n\n    .yunxin-whiteboard-float .panel {\n        position: fixed;\n        display: inline-flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: center;\n        padding: 12px;\n        background-color: white;\n        box-shadow: rgba(5, 0, 50, 0.14) 0px 4px 16px 0;\n        left: 0;\n        top: 0;\n        max-width: 192px;\n        z-index: 10;\n        cursor: auto;\n    }\n\n    .yunxin-whiteboard-float .panel .selected::after{\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            top: -4px;\n            left: -4px;\n            padding: 3px;\n            border: 1px solid blue;\n        }\n\n    .yunxin-whiteboard-float .panel .slider {\n            display: block;\n            height: 42px;\n        }\n\n    .yunxin-whiteboard-float .panel .slider input{\n                top: 4px;\n                width: 100%;\n            }\n\n    .yunxin-whiteboard-float .panel .slider .tips{\n                position: absolute;\n                left: 0;\n                right: 0;\n                bottom: 4px;\n                display: flex;\n                justify-content: space-between;\n                font-size: 14px;\n            }\n\n    .yunxin-whiteboard-float .panel .radio-item {\n            margin: 8px;\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-background{\n            border: 1px solid rgba(0,0,0,.1);\n            width: 24px;\n            height: 24px;\n            border-radius: 50%;\n            padding: 1px;\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-border{\n            border: 4px solid rgba(0,0,0,.1);\n            width: 24px;\n            height: 24px;\n            border-radius: 50%;\n            padding: 1px;\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-border::before{\n            content: '';\n            position: absolute;\n            width: 16px;\n            height: 16px;\n            border-radius: 50%;\n            left: -1px;\n            top: -1px;\n            border: 1px solid rgba(0,0,0,.1);\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-border::after{\n            content: '';\n            position: absolute;\n            width: 24px;\n            height: 24px;\n            border-radius: 50%;\n            left: -5px;\n            top: -5px;\n            border: 1px solid rgba(0,0,0,.1);\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-icon{\n            display: inline-flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding-top: 0;\n            padding-bottom: 0;\n        }\n\n    .yunxin-whiteboard-float .color-platte .color-style-icon i{\n                font-size: 16px;\n            }\n\n    .yunxin-whiteboard-float .color-platte .color-style-icon .default-icon-color-block{\n                border: 1px solid rgba(0,0,0,.1);\n                background-color: gray;\n                width: 120%;\n                height: 3px;\n            }\n\n    .yunxin-whiteboard-float .color-platte .panel{\n            justify-content: space-between;\n        }\n\n    .yunxin-whiteboard-float .color-platte .panel .opacity{\n                display: block;\n                height: 42px;\n            }\n\n    .yunxin-whiteboard-float .color-platte .panel .opacity input{\n                    top: 4px;\n                    width: 100%;\n                }\n\n    .yunxin-whiteboard-float .color-platte .panel .opacity .tips{\n                    position: absolute;\n                    left: 0;\n                    right: 0;\n                    bottom: 4px;\n                    display: flex;\n                    justify-content: space-between;\n                    font-size: 14px;\n                }\n\n    .yunxin-whiteboard-float .color-platte .panel .color{\n                border: 1px solid rgba(0,0,0,.1);\n                width: 16px;\n                height: 16px;\n                margin: 4px;\n                border-radius: 50%;\n            }\n\n    .yunxin-whiteboard-float .color-platte .panel .radio-item-checked::after{\n                content: '';\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: -4px;\n                left: -4px;\n                padding: 3px;\n                border: 1px solid blue;\n                border-radius: 50%;\n            }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.arrayRemove = void 0;
    var r, a = n(7),
      i = (r = a) && r.__esModule ? r : {
        default: r
      };
    t.arrayRemove = function (e, t) {
      var n = "string" == typeof t ? [t] : t,
        r = !0,
        a = !1,
        A = void 0;
      try {
        for (var o, s = (0, i.default)(n); !(r = (o = s.next()).done); r = !0) {
          var u = o.value,
            l = e.indexOf(u); - 1 !== l && e.splice(l, 1)
        }
      } catch (e) {
        a = !0, A = e
      } finally {
        try {
          !r && s.return && s.return()
        } finally {
          if (a) throw A
        }
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(5)),
      a = A(n(0)),
      i = A(n(1));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
        function e(t) {
          var n = this;
          (0, a.default)(this, e), this.showPopup = function (e) {
            var t = e.x,
              a = e.y,
              i = n.app.container.el,
              A = s(t, a, i);
            n.hidePopup();
            var o = document.createElement("div");
            o.id = "yx-shape-popup", i.appendChild(o), (0, r.default)(o.style, {
              background: "white",
              width: "130px",
              position: "absolute",
              left: A.x + "px",
              top: A.y + "px",
              boxShadow: "0 8px 24px -4px rgba(0,0,0,0.1)",
              padding: "5px",
              display: "flex",
              justifyContent: "space-around",
              flexWrap: "wrap"
            });
            var u = n.app.shapeManager.getPopupShapes(),
              l = function (t) {
                var a = document.createElement("div");
                (0, r.default)(a.style, {
                  width: "40px",
                  height: "40px",
                  display: "inline-block",
                  background: "url(" + u[t].icon + ") center center no-repeat",
                  marginBottom: "2px",
                  cursor: "pointer"
                }), a.onclick = function () {
                  n.hidePopup(), e.onSelect(t)
                }, o.appendChild(a)
              };
            for (var c in u) l(c)
          }, this.isTargetOnPopup = function (e) {
            for (; e;) {
              if (e && "yx-shape-popup" === e.id) return !0;
              e = e.parentNode
            }
            return !1
          }, this.onMouseDown = function (e, t) {
            n.isTargetOnPopup(t) || n.hidePopup()
          }, this.hidePopup = function () {
            var e = n.app.container.el.querySelector("#yx-shape-popup");
            e && e.remove()
          }, this.app = t, t.on("event:camera:transform", this.hidePopup), t.on(
            "event:mousedown", (function (e, t) {
              n.onMouseDown(e, t)
            }))
        }
        return (0, i.default)(e, [{
          key: "destroy",
          value: function () {
            this.app.off("event:camera:transform", this.hidePopup), this
              .hidePopup()
          }
        }]), e
      }(),
      s = function (e, t, n) {
        return t += 10, e = Math.max(e, 0), e = Math.min(e, n.clientWidth - 130), t = Math
          .max(t, 0), {
            x: e,
            y: t = Math.min(t, n.clientHeight - 100)
          }
      };
    t.default = o
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(7)),
      a = g(n(11)),
      i = g(n(21)),
      A = g(n(0)),
      o = g(n(1)),
      s = n(31),
      u = g(n(32)),
      l = g(n(456)),
      c = g(n(259)),
      d = g(n(457)),
      h = n(14),
      p = n(145),
      f = g(n(458));

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = function () {
      function e(t) {
        var n = this;
        (0, A.default)(this, e), this.resourceCache = {}, this.mediaResourceCache = {},
          this.crossOriginResourceCache = {}, this.resourceReadyListeners = {}, this
          .retryCount = {}, this.resourceTimer = {}, this.lastSuccessImgIndex = 0, this
          .fetchResource = function (e) {
            var t = e.urlArr,
              r = e.cb,
              a = e.antiLeechProp,
              A = (t = (t = Array.isArray(t) ? t : [t]).map((function (e) {
                return n.getDownloadUrl(e, "image")
              })))[0],
              o = n.retryCount[A] || 0,
              s = t[(0 === o ? n.lastSuccessImgIndex : o) % t.length],
              u = !n.resourceCache.hasOwnProperty(A);
            (u && (o >= t.length && !n.app.appConfig.resRetryCors ? n.resourceCache[A] =
                new f.default({
                  handleExif: !0
                }) : (n.crossOriginResourceCache[A] = new f.default({
                    handleExif: !0
                  }), n.crossOriginResourceCache[A].setCrossOrigin("anonymous"), n
                  .resourceCache[A] = n.crossOriginResourceCache[A])), "function" ==
              typeof r) && (n.resourceLoaded(A) || -1 === (n.resourceReadyListeners[
              A] || []).indexOf(r) && n.setResourceLoadedCallback({
              urlArr: t,
              sourceType: "",
              cb: r,
              antiLeechProp: a
            }));
            u && (a ? n.app.getAntiLeechInfo ? n.app.getAntiLeechInfo(a, s).then((
              function (e) {
                n.resourceCache[A].setSrc(e.url), n.clearExpireAntiRes(A, "image")
              })).catch((function (e) {
              n.app.logger.error(
                  "[ws] getAntiLeechInfo failed, please check your getAntiLeechInfo function. antiLeechProp: " +
                  (0, i.default)(a) + ", url: " + A), n.app.logger.error(
                  "[ws] getAntiLeechInfo error: " + e), n.resourceCache[A]
                .setSrc(s)
            })) : (n.app.logger.error(
              "[ws] picture has antiLeechInfo, but getAntiLeechInfo function is not provided"
              ), n.resourceCache[A].setSrc(s)) : n.resourceCache[A].setSrc(s))
          }, this.fetchMediaResource = function (e) {
            var t = e.url,
              r = e.sourceType,
              A = e.type,
              o = e.cb,
              s = e.antiLeechProp;
            t = n.getDownloadUrl(t, "url" === A ? "url" : "media");
            var u = a.default.resolve(t);
            t && (s ? n.app.getAntiLeechInfo ? u = n.app.getAntiLeechInfo(s, t).then((
                function (e) {
                  return n.clearExpireAntiRes(t, A), n.tweakMediaStart(e.url, A)
                })).catch((function (e) {
                return n.app.logger.error(
                  "[ws] getAntiLeechInfo failed, please check your getAntiLeechInfo function. antiLeechProp: " +
                  (0, i.default)(s) + ", url: " + t), n.app.logger.error(
                  "[ws] getAntiLeechInfo error: " + e), n.tweakMediaStart(t, A)
              })) : (n.app.logger.error(
                "[ws] picture has antiLeechInfo, but getAntiLeechInfo function is not provided"
                ), u = a.default.resolve(n.tweakMediaStart(t, A))) : u = a.default
              .resolve(n.tweakMediaStart(t, A))), u.then((function (e) {
              console.log("", "[ws] antiLeechUrlPromise antiLeechURL: ", e);
              var a = void 0;
              if ("url" === A) n.mediaResourceCache[t] = document.createElement(
                "iframe"), a = n.mediaResourceCache[t];
              else if (!n.mediaResourceCache.hasOwnProperty(t))
                if (n.mediaResourceCache[t] = document.createElement(A),
                  "audio" === A) {
                  var i = document.createElement("source");
                  a = i, i.setAttribute("type", r), n.mediaResourceCache[t]
                    .appendChild(i)
                } else(a = n.mediaResourceCache[t]).poster = d.default;
              "function" == typeof o && (n.mediaResourceLoaded(t, A) || -1 === (n
                .resourceReadyListeners[t] || []).indexOf(o) && (console.log(
                  "", "[ws] antiLeechUrlPromise setResourceLoadedCallback"), n
                .setResourceLoadedCallback({
                  urlArr: t,
                  sourceType: r,
                  cb: o,
                  mediaType: A,
                  antiLeechProp: s
                })));
              a && (a.src = e)
            }))
          }, this.clearExpireAntiRes = function (e, t) {
            setTimeout((function () {
              n.app.logger.log("[ws] delete resource cache, url : " + e), delete n
                .crossOriginResourceCache[e], delete n.resourceCache[e], delete n
                .retryCount[e], delete n.mediaResourceCache[e], delete n
                .resourceReadyListeners[e]
            }), 1e3 * (n.app.appConfig.nosAntiLeechExpire - 10))
          }, this.setResourceLoadedCallback = function (e) {
            var t = e.urlArr,
              a = e.sourceType,
              i = e.cb,
              A = e.mediaType,
              o = e.antiLeechProp,
              l = (t = (t = Array.isArray(t) ? t : [t]).map((function (e) {
                return n.getDownloadUrl(e, "url" === A ? "url" : A ? "media" :
                  "image")
              })))[0];
            n.resourceReadyListeners[l] = n.resourceReadyListeners[l] || [], n
              .resourceReadyListeners[l].push(i);
            var c = A ? n.mediaResourceCache[l] : n.resourceCache[l],
              d = function (e) {
                var r;
                clearTimeout(n.resourceTimer[l]), c.onerror = null, (r = n.retryCount)[
                  l] || (r[l] = 0);
                var d = c.src,
                  p = c.children;
                p && p[0] && (d = p[0].src), n.app.logger.error("[wb]" + (A ||
                  "image") + "资源 [url: " + d + "] 第" + n.retryCount[l] + "加载失败");
                var f = A ? "video" === A ? u.default.VIDEO_UPLOAD_FAIL : u.default
                  .AUDIO_UPLOAD_FAIL : u.default.PIC_UPLOAD_FAIL,
                  g = n.retryCount[l] < n.app.appConfig.resMaxRetry,
                  y = A ? (0, h.getMsg)("video" === A ? "Video" : "Audio") : (0, h
                    .getMsg)("Image");
                if (n.retryCount[l] > 0) {
                  var v = Math.ceil(n.app.appConfig.resRetryInterval / 1e3);
                  (0, s.showToast)({
                    type: "error",
                    msg: h.isZh ? y + "加载失败 " + (g ? ", " + v + "s后将尝试重新加载(" + (n
                        .retryCount[l] + 1) + "/" + n.app.appConfig.resMaxRetry +
                      ")" : "") : y + " load failed " + (g ? ", " + v +
                      "s later would try to reload: (" + (n.retryCount[l] + 1) +
                      "/" + n.app.appConfig.resMaxRetry + ")" : ""),
                    time: 3,
                    msgType: f
                  })
                }
                var m = n.retryCount[l] > 0 ? n.app.appConfig.resRetryInterval : 100;
                if (setTimeout((function () {
                    delete n.resourceCache[l], delete n.mediaResourceCache[l],
                      delete n.resourceReadyListeners[l], g && (A ? n
                        .fetchMediaResource({
                          url: l,
                          sourceType: a,
                          type: A,
                          cb: i,
                          antiLeechProp: o
                        }) : n.fetchResource({
                          urlArr: t,
                          cb: i,
                          antiLeechProp: o
                        }))
                  }), m), !g) {
                  var w = n.getResourceMetadata(l, A || "image");
                  n.app.emit("event:resource:onload", w)
                }
                n.retryCount[l] += 1
              };
            if (clearTimeout(n.resourceTimer[l]), n.resourceTimer[l] = setTimeout((
                function () {
                  d()
                }), 8e3), "video" == A || "audio" == A) c.onloadedmetadata =
          function () {
              clearTimeout(n.resourceTimer[l]);
              var e = n.resourceReadyListeners[l] || [],
                t = !0,
                a = !1,
                i = void 0;
              try {
                for (var o, s = (0, r.default)(e); !(t = (o = s.next()).done); t = !
                  0) {
                  (0, o.value)(c)
                }
              } catch (e) {
                a = !0, i = e
              } finally {
                try {
                  !t && s.return && s.return()
                } finally {
                  if (a) throw i
                }
              }
              delete n.resourceReadyListeners[l];
              var u = n.getResourceMetadata(l, A);
              n.app.emit("event:resource:onload", u)
            };
            else if ("url" === A) {
              console.log("setResourceLoadedCallback onload url页面加载");
              var p = t.indexOf(l);
              n.lastSuccessImgIndex = -1 === p ? n.lastSuccessImgIndex : p,
                clearTimeout(n.resourceTimer[l]);
              var f = n.resourceReadyListeners[l] || [],
                g = !0,
                y = !1,
                v = void 0;
              try {
                for (var m, w = (0, r.default)(f); !(g = (m = w.next()).done); g = !0) {
                  (0, m.value)(c.getImage())
                }
              } catch (e) {
                y = !0, v = e
              } finally {
                try {
                  !g && w.return && w.return()
                } finally {
                  if (y) throw v
                }
              }
              delete n.resourceReadyListeners[l];
              var B = n.getResourceMetadata(l, "url");
              n.app.emit("event:resource:onload", B)
            } else console.log("setResourceLoadedCallback resource: ", c), c.onload =
              function () {
                console.log("setResourceLoadedCallback onload ");
                var e = t.indexOf(l);
                n.lastSuccessImgIndex = -1 === e ? n.lastSuccessImgIndex : e,
                  clearTimeout(n.resourceTimer[l]);
                var a = n.resourceReadyListeners[l] || [],
                  i = !0,
                  A = !1,
                  o = void 0;
                try {
                  for (var s, u = (0, r.default)(a); !(i = (s = u.next()).done); i = !
                    0) {
                    (0, s.value)(c.getImage())
                  }
                } catch (e) {
                  A = !0, o = e
                } finally {
                  try {
                    !i && u.return && u.return()
                  } finally {
                    if (A) throw o
                  }
                }
                delete n.resourceReadyListeners[l];
                var d = n.getResourceMetadata(l, "image");
                n.app.emit("event:resource:onload", d)
              };
            c.onerror = d
          }, this.resourceLoaded = function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            e = n.getDownloadUrl(e, "image");
            var r = t ? n.crossOriginResourceCache[e] : n.resourceCache[e];
            if (r) {
              var a = r.getImage();
              if (a) return a && a.complete && a.width > 0 && a.height > 0
            }
            return !1
          }, this.getResource = function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            e = n.getDownloadUrl(e, "image");
            var r = t ? n.crossOriginResourceCache[e] : n.resourceCache[e];
            return r.getImage()
          }, this.mediaResourceLoaded = function (e, t) {
            e = n.getDownloadUrl(e, "media");
            var r = n.mediaResourceCache[e];
            return "url" === t && r instanceof HTMLIFrameElement ? !!r :
              r instanceof HTMLMediaElement && (r && r.readyState >= 1)
          }, this.getMediaResource = function (e) {
            return e = n.getDownloadUrl(e, "media"), n.mediaResourceCache[e]
          }, this.app = t, this.resourceCache.imageLoading = new f.default({
            handleExif: !0
          }), this.resourceCache.imageLoading.setSrc(l.default), this.resourceCache
          .audio = new f.default({
            handleExif: !0
          }), this.resourceCache.audio.setSrc(c.default), this.crossOriginResourceCache
          .imageLoading = new f.default({
            handleExif: !0
          }), this.crossOriginResourceCache.imageLoading.setCrossOrigin("anonymous"),
          this.crossOriginResourceCache.imageLoading.setSrc(l.default)
      }
      return (0, o.default)(e, [{
        key: "getDownloadUrl",
        value: function (e, t) {
          var n, r;
          return "url" === t ? e : "image" === t ? (null === (n = this.app
              .serviceConf) || void 0 === n ? void 0 : n.imgDownloadHost) ? (0,
              p.replaceUrlHost)(e, this.app.serviceConf.imgDownloadHost) : e :
            "media" === t ? (null === (r = this.app.serviceConf) || void 0 ===
              r ? void 0 : r.mediaDownloadHost) ? (0, p.replaceUrlHost)(e, this
              .app.serviceConf.mediaDownloadHost) : e : void 0
        }
      }, {
        key: "destroy",
        value: function () {
          this.resourceCache = {}, this.mediaResourceCache = {}, this
            .crossOriginResourceCache = {}, this.resourceReadyListeners = {},
            this.retryCount = {}, this.resourceTimer = {}
        }
      }, {
        key: "tweakMediaStart",
        value: function (e, t) {
          return "audio" === t ? e : e + "#t=0.1"
        }
      }, {
        key: "getResourceMetadata",
        value: function (e, t) {
          var n = this.getDownloadUrl(e, "image" === t ? "image" : "media");
          if ("url" === t) {
            var r = this.mediaResourceCache[n];
            if (r && r.contentWindow && r.contentWindow.document) {
              var a = r.contentWindow || r.contentDocument;
              return {
                type: t,
                url: e,
                loaded: !0,
                width: a.document.body.scrollWidth || a.document.documentElement
                  .scrollWidth,
                height: a.document.body.scrollHeight || a.document
                  .documentElement.scrollHeight
              }
            }
            return {
              type: t,
              url: e,
              loaded: !1,
              width: 0,
              height: 0,
              duration: 0
            }
          }
          if ("image" === t) {
            var i = this.resourceCache[n] || this.crossOriginResourceCache[n],
              A = i && i.getImage();
            return A && A.complete && A.width > 0 && A.height > 0 ? {
              type: t,
              url: e,
              loaded: !0,
              width: A.width,
              height: A.height
            } : {
              type: t,
              url: e,
              loaded: !1,
              width: 0,
              height: 0
            }
          }
          if ("video" === t) {
            var o = this.mediaResourceCache[n];
            return o && o.readyState >= 1 ? {
              type: t,
              url: e,
              loaded: !0,
              width: o.videoWidth,
              height: o.videoHeight,
              duration: o.duration
            } : {
              type: t,
              url: e,
              loaded: !1,
              width: 0,
              height: 0,
              duration: 0
            }
          }
          if ("audio" === t) {
            var s = this.mediaResourceCache[n];
            return s && s.readyState >= 1 ? {
              type: t,
              url: e,
              loaded: !0,
              duration: s.duration
            } : {
              type: t,
              url: e,
              loaded: !1,
              duration: 0
            }
          }
        }
      }]), e
    }();
    t.default = y
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAb1BMVEVPT0/g4OBMTExERERBQUHj4+Pn5+fR0dH///9JSUnp6elAQEDW1taCgoJwcHBSUlJoaGi7u7teXl7GxsacnJypqanc3Nw6OjqhoaFlZWVZWVlycnLv7++WlpaMjIy2traHh4d7e3uvr681NTX19fUTUkkoAAAGsElEQVR4nO2c2ZaqOhCGMRNJmEUQkUHc/f7PeBKQScHeV7pPUt9FLxeLC/i7JipJOQ4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgMwiJBwh9+1n+BYTA6BgGTa1ourgUWNiti8BRl6U5lWzk4CenEGFbZUE4atKDZPSwgjKZt52wURaE4/Ygn/SYdJF+EdmmCsJhuifIAGP3CH/7MT8JLpP3igxOVGDx7Sf9FIicnoPIjq3kHfn2w34GcXTZ3yiikXcrogoJtoyE9myYin80339wIV/iBju4adImSepvpOZDZ3qoxfe1JFQVI81FFW89Igrr5DlDs5vZouB2FUoYba9oVcwjVdre0rWxsMZkUcRKEnYoyq0QKlQ5t1LFZEtB8cJxqC7KdpIKInG6VI9ezQ20aH5T5ofv0iwizSoNleamZNE+LEW24pd/PV6WMdQ113scMqRiWf9eoCKRzKKwzGRRbkoUeRsleesS3iJxy9Bc73FwyKpg/KeLy9va3ZvzFPW9TzzdlxDRVK7jpEpj8kYVbxGUa3Nzj7NwGOKqlNyWb0KF8KfsQw12ngXEpbp0O+3nIHSZDaUwOMzO9JroWiXYDSv4NCefjz7bt3hoohwojfdUwe7oPbIxOqI8INP70t32q+hGQzG6cJuYNdFhpd4OKyQdb2KxBWF2qYkOK93mZ3I3Vm6ssMB51pocqEwvG+4hfJuc50mTPqygF1vAxRRRDP48HnnRRLfeavKkylyjsMB859nQpA8r3tocZucx+ev4waYmQ1hZqoLbx200tVUTHVayaOEloh6dx7fUdwYHOtTzYjG6TvV99M3H/Qj7mihV3KlaQccp8RyNTzzvNFEOlIzVSjQJZX4l+1aTPqw8/Cd/XDG6AznwiyZKg1MvChqTMWiiDGXQADSZFJH3R5syAt95vP9UuaFyvMYuNmvC/GBq6KPYoo/AXU0oXfatRTBqkn/xYT/EjiZUrtc3xNgsoK6ttb1Mn7Yc4LH7SFs7vwGZf3vuQM5lrNlrgT2vmlBavDTa5nDCzE/FL5qoT5zjq3fgZLwrN1+SZ02Ye91o3KPjtAiUmB9O1pqwvNlcC5xb1PJmfjhZaqK/gTffGEWzbJ9+vm8waUJlsrfjAmdTEWtBJp41ke7V2wmfi80W0vyGkjNqwg7bgWRxS28mFjTtneGFVSBx9kMnKWYzuRpsJnMsJS6TWxXJfOu0fm62mZB6bBU5qEs3txKMiHjepCTNbZ0gfJcsHc+bvz9JLC6L6sXcZVHUb7lnafQX1RcO54qOmrsCKMphEz31tzaarMG3ZZEbmqoJivOxSKPNu73COhAvT4Sxk7GeUy7On+xXro4+qnL1Fwd4WGvumdrFp8vwhbMdYhE+Jstjg8zkNCzCdW+AZiV5Hu2BhBeuT6lT1+jxH0qU51199ZFgPQxGIwTGYeHLp66K4ZNiVMnx3FpjfnK6XePjJeyaLM3l0yF1mRptJRoRvZ7Mp9NImNej6DKz4HQ+Evfnk+j7UGrwMdolOMj/cogDSy2YVjAgovvfDPvQe9rM95sRhOP0N1UYvZe2GMmAKlQTtu9BlB3uR4uM5AEixyKXWzNPKJNu7diniAYJHGYuk2yaBqN+MHnQZZxdXrMCYeJc63vq5rqU890ka2LrJ/k5vblgQjwF0WNhrNcDAAAAAAAA+D+w7D/bXMKKcQULY3SZt7yW5h/22wW3+dBkxYn/p+LjZVH8mLva9xso5t1wpI3X+HYa2wLiVNmriePlrn57fOeeQ/SIMUSw8EivCcIe8gYzQoQIz5ZGigi4Dh3iJ8MiS7AjYpdzGdRKExQlnP+0OvKKi7pa2TFYSuH9tEqJhkdIhRQiOu538YnnkqCoqm6XppLIQSE/BHHGbZh5ohEFR4iwlOgw66Gf9CwQLrkkOJUeEcSrEoylq66SmFtwPkWDHH4iVx4jrck5UPaiLpK78h1+74Ig6NoffO39yyEJtcRQcFL9cQ9en47PRXXW10RTeUf+GGDuOzV/XP2xRBOVjm9cn7LQmjS8z8EqF3slDz2iOJ9VHO61wEVliSaO5/NKZ2EdT0re6CR8PlQE00Rbh3fPcMTr/mplxckDjTKDfrCYzjs4483ZE66KseLKs7PnZTwQuFBXz8gfgo0V4GG8C05z4pBMFSI8PanaHgeqUuFcD5glhapUODP/lPWCxyiCUv3BqAtK0v8UIryFw4gcdfV2eb9j1GjQvNa1/RMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4d/kP29xLaKNz9DgAAAAASUVORK5CYII="
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(0)),
      a = A(n(1)),
      i = n(459);

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
      function e(t) {
        (0, r.default)(this, e), this.handleExif = !0
      }
      return (0, a.default)(e, [{
        key: "setSrc",
        value: function (e) {
          var t = this;
          this.url = e, this.handleExif ? (0, i.getStrippedExifImage)(e).then((
            function (e) {
              t.builtInImage = e, t.builtInImage.onerror = t.onerror, e
                .complete ? t.onload() : e.onload = t.onload
            })).catch((function () {
            t.setNaiveImage(e)
          })) : this.setNaiveImage(e)
        }
      }, {
        key: "setNaiveImage",
        value: function (e) {
          this.builtInImage = new Image, this.crossOriginValue && this
            .builtInImage.setAttribute("crossorigin", this.crossOriginValue),
            this.builtInImage.onload = this.onload, this.builtInImage.onerror =
            this.onerror, this.builtInImage.src = e
        }
      }, {
        key: "setCrossOrigin",
        value: function (e) {
          this.crossOriginValue = e
        }
      }, {
        key: "getImage",
        value: function () {
          return this.builtInImage
        }
      }, {
        key: "src",
        get: function () {
          return this.url
        }
      }]), e
    }();
    t.default = o
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = i(n(36)),
      a = i(n(11));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.getStrippedExifImage = function (e) {
      return function (e) {
        var t = e.url;
        return new a.default((function (e, n) {
          var r = new XMLHttpRequest;
          r.responseType = "blob", r.onload = function () {
            200 === r.status ? e(r.response) : n(r)
          }, r.onerror = function (e) {
            n(e)
          }, r.open("GET", t), r.send()
        }))
      }({
        url: e
      }).then((function (e) {
        return a.default.all([(t = {
          blob: e
        }, n = new FileReader, r = t.blob, new a.default((function (e,
        t) {
          n.onload = function (n) {
            var r, a;
            if ("string" == typeof (null === (r = n.target) ||
                void 0 === r ? void 0 : r.result) || !(null === (a =
                n.target) || void 0 === a ? void 0 : a.result))
              return t("getOrientationFromBlob: reader load error");
            var i = new DataView(n.target.result);
            if (65496 != i.getUint16(0, !1)) return e(-2);
            for (var A = i.byteLength, o = 2; o < A;) {
              if (i.getUint16(o + 2, !1) <= 8) return t(-1);
              var s = i.getUint16(o, !1);
              if (o += 2, 65505 == s) {
                if (1165519206 != i.getUint32(o += 2, !1)) return e(
                  -1);
                var u = 18761 == i.getUint16(o += 6, !1);
                o += i.getUint32(o + 4, u);
                var l = i.getUint16(o, u);
                o += 2;
                for (var c = 0; c < l; c++)
                  if (274 == i.getUint16(o + 12 * c, u)) return e(i
                    .getUint16(o + 12 * c + 8, u))
              } else {
                if (65280 != (65280 & s)) break;
                o += i.getUint16(o, !1)
              }
            }
            return e(-1)
          }, n.readAsArrayBuffer(r)
        }))), e]);
        var t, n, r
      })).then((function (e) {
        var t, n, i = (0, r.default)(e, 2),
          A = i[0],
          o = i[1];
        return A < 2 ? a.default.reject("没有 exif 信息。按照正常方式加载图片即可") : (t = {
          blob: o
        }, n = t.blob, new a.default((function (e, t) {
          var r = new FileReader;
          r.onload = function (r) {
            var a, i;
            if ("string" == typeof (null === (a = r.target) ||
                void 0 === a ? void 0 : a.result) || !(null === (i = r
                .target) || void 0 === i ? void 0 : i.result)) return t(
              "getExifStrippedBlobFromBlob: reader load error");
            var A = function (e) {
              var t = new DataView(e),
                n = 0,
                r = 0,
                a = [],
                i = 0;
              if (65496 == t.getUint16(n)) {
                n += 2;
                var A = t.getUint16(n);
                for (n += 2; n < t.byteLength;) {
                  if (65505 == A) a[i] = {
                    recess: r,
                    offset: n - 2
                  }, r = n + t.getUint16(n), i++;
                  else if (65498 == A) break;
                  n += t.getUint16(n), A = t.getUint16(n), n += 2
                }
                if (a.length > 0) {
                  var o = [];
                  return a.forEach((function (t) {
                    o.push(e.slice(t.recess, t.offset))
                  })), o.push(e.slice(r)), new Blob(o, {
                    type: "image/jpeg"
                  })
                }
              }
            }(r.target.result);
            A instanceof Blob ? e(A) : e(n)
          }, r.onerror = function (e) {
            t(e)
          }, r.readAsArrayBuffer(n)
        }))).then((function (e) {
          return function (e) {
            var t = e.blob;
            return new a.default((function (e, n) {
              var r = new FileReader;
              r.onload = function () {
                var t = r.result;
                e(t)
              }, r.onerror = function (e) {
                n(e)
              }, r.readAsDataURL(t)
            }))
          }({
            blob: e
          })
        })).then((function (e) {
          return t = e, n = A, new a.default((function (e, r) {
            var a = new Image;
            a.onload = function () {
              var t = a.width,
                r = a.height,
                i = document.createElement("canvas"),
                A = i.getContext("2d");
              switch (4 < n && n < 9 ? (i.width = r, i.height = t) :
                (i.width = t, i.height = r), n) {
                case 2:
                  A.transform(-1, 0, 0, 1, t, 0);
                  break;
                case 3:
                  A.transform(-1, 0, 0, -1, t, r);
                  break;
                case 4:
                  A.transform(1, 0, 0, -1, 0, r);
                  break;
                case 5:
                  A.transform(0, 1, 1, 0, 0, 0);
                  break;
                case 6:
                  A.transform(0, 1, -1, 0, r, 0);
                  break;
                case 7:
                  A.transform(0, -1, -1, 0, r, t);
                  break;
                case 8:
                  A.transform(0, -1, 1, 0, 0, t)
              }
              A.drawImage(a, 0, 0), e(i.toDataURL())
            }, a.src = t
          }));
          var t, n
        })).then((function (e) {
          return t = e, new a.default((function (e, n) {
            var r = new Image;
            r.onload = function () {
              e(r)
            }, r.onerror = function () {
              n()
            }, r.src = t
          }));
          var t
        }))
      }))
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = g(n(0)),
      a = g(n(1)),
      i = n(28),
      A = g(n(149)),
      o = g(n(150)),
      s = g(n(461)),
      u = g(n(462)),
      l = g(n(463)),
      c = g(n(464)),
      d = g(n(465)),
      h = g(n(466)),
      p = g(n(467)),
      f = n(14);

    function g(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var y = .5522848,
      v = .1,
      m = function () {
        function e(t) {
          (0, r.default)(this, e), this.ShapeDesc = {
            diamond: {
              hint: (0, f.getMsg)("Diamond"),
              icon: p.default,
              path: [{
                per: [-1 / 8, 1 / 8],
                t: "l",
                pos: [
                  [0, .5],
                  [.5, 0]
                ]
              }, {
                per: [1 / 8, 3 / 8],
                t: "l",
                pos: [
                  [.5, 0],
                  [1, .5]
                ]
              }, {
                per: [3 / 8, 5 / 8],
                t: "l",
                pos: [
                  [1, .5],
                  [.5, 1]
                ]
              }, {
                per: [5 / 8, 7 / 8],
                t: "l",
                pos: [
                  [.5, 1],
                  [0, .5]
                ]
              }],
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [.23, .25],
                [.75, .77]
              ]
            },
            "round-rect": {
              hint: (0, f.getMsg)("roundRect"),
              icon: s.default,
              path: function (e, t) {
                var n = e > t ? v * t / e : v,
                  r = e > t ? v : v * e / t;
                return [{
                  per: [.02, .23],
                  t: "l",
                  pos: [
                    [n, 0],
                    [1 - n, 0]
                  ]
                }, {
                  per: [.23, .27],
                  t: "b",
                  pos: [
                    [1 - n, 0],
                    [1 - n + n * y, 0],
                    [1, r - r * y],
                    [1, r]
                  ]
                }, {
                  per: [.27, .48],
                  t: "l",
                  pos: [
                    [1, r],
                    [1, 1 - r]
                  ]
                }, {
                  per: [.48, .52],
                  t: "b",
                  pos: [
                    [1, 1 - r],
                    [1, 1 - r + r * y],
                    [1 - n + n * y, 1],
                    [1 - n, 1]
                  ]
                }, {
                  per: [.52, .73],
                  t: "l",
                  pos: [
                    [1 - n, 1],
                    [n, 1]
                  ]
                }, {
                  per: [.73, .77],
                  t: "b",
                  pos: [
                    [n, 1],
                    [n - n * y, 1],
                    [0, 1 - r + r * y],
                    [0, 1 - r]
                  ]
                }, {
                  per: [.77, .98],
                  t: "l",
                  pos: [
                    [0, 1 - r],
                    [0, r]
                  ]
                }, {
                  per: [.98, .02],
                  t: "b",
                  pos: [
                    [0, r],
                    [0, r - r * y],
                    [n - n * y, 0],
                    [n, 0]
                  ]
                }]
              },
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [v - v / Math.SQRT2, v - v / Math.SQRT2],
                [1 - 2 * (v - v / Math.SQRT2), 1 - 2 * (v - v / Math.SQRT2)]
              ]
            },
            parallelogram: {
              hint: (0, f.getMsg)("Parallelogram"),
              icon: u.default,
              path: [{
                per: [0, .125],
                t: "l",
                pos: [
                  [.2, 0],
                  [.5, 0]
                ]
              }, {
                per: [.125, .25],
                t: "l",
                pos: [
                  [.5, 0],
                  [1, 0]
                ]
              }, {
                per: [.25, .5],
                t: "l",
                pos: [
                  [1, 0],
                  [.8, 1]
                ]
              }, {
                per: [.5, .625],
                t: "l",
                pos: [
                  [.8, 1],
                  [.5, 1]
                ]
              }, {
                per: [.625, .75],
                t: "l",
                pos: [
                  [.5, 1],
                  [0, 1]
                ]
              }, {
                per: [.75, 1],
                t: "l",
                pos: [
                  [0, 1],
                  [.2, 0]
                ]
              }],
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [.2, 0],
                [.8, 1]
              ]
            },
            cloud: {
              hint: (0, f.getMsg)("Cloud"),
              icon: l.default,
              path: [{
                per: [0, .27],
                t: "b",
                pos: [
                  [.273, .157],
                  [.333, -.03],
                  [.718, -.058],
                  [.82, .14]
                ]
              }, {
                per: [.27, .375],
                t: "b",
                pos: [
                  [.82, .14],
                  [1.005, .152],
                  [1.067, .368],
                  [.922, .5]
                ]
              }, {
                per: [.375, .466],
                t: "b",
                pos: [
                  [.922, .5],
                  [1.043, .645],
                  [1.018, .8],
                  [.888, .87]
                ]
              }, {
                per: [.466, .625],
                t: "b",
                pos: [
                  [.888, .87],
                  [.902, 1.008],
                  [.625, 1.053],
                  [.5, .912]
                ]
              }, {
                per: [.625, .739],
                t: "b",
                pos: [
                  [.5, .912],
                  [.35, 1.057],
                  [.145, 1.018],
                  [.145, .823]
                ]
              }, {
                per: [.739, .875],
                t: "b",
                pos: [
                  [.145, .823],
                  [.01, .783],
                  [-.06, .65],
                  [.082, .5]
                ]
              }, {
                per: [.875, 1],
                t: "b",
                pos: [
                  [.082, .5],
                  [-.105, .278],
                  [.092, .098],
                  [.273, .157]
                ]
              }],
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [.15, .16],
                [.89, .88]
              ]
            },
            rect: {
              hint: (0, f.getMsg)("Rect"),
              icon: o.default,
              path: [{
                per: [0, .25],
                t: "l",
                pos: [
                  [0, 0],
                  [1, 0]
                ]
              }, {
                per: [.25, .5],
                t: "l",
                pos: [
                  [1, 0],
                  [1, 1]
                ]
              }, {
                per: [.5, .75],
                t: "l",
                pos: [
                  [1, 1],
                  [0, 1]
                ]
              }, {
                per: [.75, 1],
                t: "l",
                pos: [
                  [0, 1],
                  [0, 0]
                ]
              }],
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [.02, .02],
                [.98, .98]
              ]
            },
            triangle: {
              hint: (0, f.getMsg)("Triangle"),
              icon: h.default,
              path: [{
                per: [0, .125],
                t: "l",
                pos: [
                  [1 / 3, 1 / 3],
                  [.5, 0]
                ]
              }, {
                per: [.125, .25],
                t: "l",
                pos: [
                  [.5, 0],
                  [2 / 3, 1 / 3]
                ]
              }, {
                per: [.25, .5],
                t: "l",
                pos: [
                  [2 / 3, 1 / 3],
                  [1, 1]
                ]
              }, {
                per: [.5, .75],
                t: "l",
                pos: [
                  [1, 1],
                  [0, 1]
                ]
              }, {
                per: [.75, 1],
                t: "l",
                pos: [
                  [0, 1],
                  [1 / 3, 1 / 3]
                ]
              }],
              dir: [{
                per: [0, .125],
                angle: i.DIRECTION.UP
              }, {
                per: [.125, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }],
              textB: [
                [.25, .5],
                [.75, 1]
              ]
            },
            ellipse: {
              hint: (0, f.getMsg)("Ellipse"),
              icon: d.default,
              textB: [
                [.14, .14],
                [.86, .86]
              ],
              path: [{
                t: "b",
                pos: [
                  [0, .5],
                  [0, .2238576],
                  [.2238576, 0],
                  [.5, 0]
                ],
                per: [-1 / 8, 1 / 8]
              }, {
                t: "b",
                pos: [
                  [.5, 0],
                  [.7761424, 0],
                  [1, .2238576],
                  [1, .5]
                ],
                per: [1 / 8, 3 / 8]
              }, {
                t: "b",
                pos: [
                  [1, .5],
                  [1, .7761424],
                  [.7761424, 1],
                  [.5, 1]
                ],
                per: [3 / 8, 5 / 8]
              }, {
                t: "b",
                pos: [
                  [.5, 1],
                  [.2238576, 1],
                  [0, .7761424],
                  [0, .5]
                ],
                per: [5 / 8, 7 / 8]
              }],
              dir: [{
                per: [0, 1 / 4],
                angle: i.DIRECTION.UP
              }, {
                per: [1 / 4, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, 3 / 4],
                angle: i.DIRECTION.DOWN
              }, {
                per: [3 / 4, 1],
                angle: i.DIRECTION.LEFT
              }]
            },
            star: {
              hint: (0, f.getMsg)("Star"),
              icon: c.default,
              textB: [
                [.25, .33],
                [.75, .8]
              ],
              path: [{
                t: "l",
                per: [.125, .225],
                pos: [
                  [.5, 0],
                  [.655, .329]
                ]
              }, {
                t: "l",
                per: [.225, .325],
                pos: [
                  [.655, .329],
                  [1, .382]
                ]
              }, {
                t: "l",
                per: [.325, .425],
                pos: [
                  [1, .382],
                  [.75, .724]
                ]
              }, {
                t: "l",
                per: [.425, .525],
                pos: [
                  [.75, .724],
                  [.809, 1]
                ]
              }, {
                t: "l",
                per: [.525, .625],
                pos: [
                  [.809, 1],
                  [.5, .829]
                ]
              }, {
                t: "l",
                per: [.625, .725],
                pos: [
                  [.5, .829],
                  [.191, 1]
                ]
              }, {
                t: "l",
                per: [.725, .825],
                pos: [
                  [.191, 1],
                  [.25, .724]
                ]
              }, {
                t: "l",
                per: [.825, .925],
                pos: [
                  [.25, .724],
                  [0, .382]
                ]
              }, {
                t: "l",
                per: [-.075, .025],
                pos: [
                  [0, .382],
                  [.345, .329]
                ]
              }, {
                t: "l",
                per: [.025, .125],
                pos: [
                  [.345, .329],
                  [.5, 0]
                ]
              }],
              dir: [{
                per: [0, .25],
                angle: i.DIRECTION.UP
              }, {
                per: [.25, .5],
                angle: i.DIRECTION.RIGHT
              }, {
                per: [.5, .75],
                angle: i.DIRECTION.DOWN
              }, {
                per: [.75, 1],
                angle: i.DIRECTION.LEFT
              }]
            }
          }, this.popupShapes = ["text", "rect", "round-rect", "triangle",
            "parallelogram", "cloud", "ellipse", "star", "diamond"
          ], this.floatShapes = ["text", "rect", "round-rect", "triangle",
            "parallelogram", "cloud", "ellipse", "star", "diamond"
          ], this.tbShapes = ["rect", "round-rect", "triangle", "parallelogram",
            "cloud", "ellipse", "star", "diamond"
          ], this.app = t
        }
        return (0, a.default)(e, [{
          key: "getShapeIcons",
          value: function (e) {
            var t = this,
              n = {};
            return e.forEach((function (e) {
              t.ShapeDesc.hasOwnProperty(e) ? n[e] = {
                icon: t.ShapeDesc[e].icon,
                hint: t.ShapeDesc[e].hint
              } : "text" === e ? n[e] = {
                icon: A.default,
                hint: (0, f.getMsg)("Text")
              } : t.app.logger.error("Shape " + e + " is not found")
            })), n
          }
        }, {
          key: "getPopupShapes",
          value: function () {
            return this.getShapeIcons(this.popupShapes)
          }
        }, {
          key: "getFloatShapes",
          value: function () {
            return this.getShapeIcons(this.floatShapes)
          }
        }, {
          key: "getTbShapes",
          value: function () {
            return this.getShapeIcons(this.tbShapes)
          }
        }, {
          key: "getShapeBoundByTextBound",
          value: function (e, t) {
            var n = (this.ShapeDesc[e] || this.ShapeDesc.rect).textB || [
                [0, 0],
                [1, 1]
              ],
              r = t.w / (n[1][0] - n[0][0]),
              a = t.h / (n[1][1] - n[0][1]);
            return {
              w: r,
              h: a,
              sx: t.sx - r * n[0][0],
              sy: t.sy - a * n[0][1]
            }
          }
        }]), e
      }();
    t.default = m
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMTIiIHk9IjEyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSI0IiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEuNiIvPgo8L3N2Zz4K"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTk2NjM5NzIxMyIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQxMiIgd2lkdGg9IjQwIgogICAgaGVpZ2h0PSI0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHBhdGgKICAgICAgICBkPSJNMzUwIDMwMGg0MDBsLTEwMCA0MDBoLTQwMHoiCiAgICAgICAgc3Ryb2tlLXdpZHRoPSI0MCIgc3Ryb2tlPSIjMDAwMDAwIiBmaWxsPSJub25lIj48L3BhdGg+Cjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTk2NjM5NzIxMyIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQxMiIgd2lkdGg9IjQwIgogICAgaGVpZ2h0PSI0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHBhdGgKICAgICAgICBkPSJNMzYzLjkzIDMzMC4xM0MzOTkuNDcgMjA5LjY3LCA2MTIuNjcgMjIwLjA3LCA2MzMuNDcgMzE1LjQwQzc0NS4yNyAzMDAuNjcsIDc5NS41MyA0MDkuMDAsIDczMS40MCA1MDMuNDdDNzk5LjAwIDU5MS4wMCwgNzM2LjYwIDcyOS42NywgNjUwLjgwIDcwMS45M0M2MjAuNDcgNzcwLjQwLCA1MzIuOTMgNzg2Ljg3LCA0ODcuODcgNzAxLjkzQzQxOC41MyA3ODIuNTMsIDMzMy42MCA3NDIuNjcsIDMxNS40MCA2NjguMTNDMjM1LjY3IDYyOC4yNywgMjE0LjAwIDU0NC4yMCwgMjgxLjYwIDQ3NC4wMEMxOTQuMDcgNDA5Ljg3LCAyOTIuMDAgMjkyLjAwLCAzNjMuOTMgMzMwLjEzIgogICAgICAgIHN0cm9rZS13aWR0aD0iNDAiIHN0cm9rZT0iIzAwMDAwMCIgZmlsbD0ibm9uZSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiPgogICAgPHBhdGgKICAgIGQ9Ik0yMCA5bDMuMjMgNi41NWw3LjIzIDEuMDVsLTUuMjMgNi44MGwxLjIzIDUuNTBsLTYuNDcgLTMuNDBsLTYuNDcgMy40MGwxLjIzIC01LjUwbC01LjIzIC02LjgwbDcuMjMgLTEuMDV6IgogICAgc3Ryb2tlLXdpZHRoPSIxLjYiIHN0cm9rZT0iIzAwMDAwMCIgZmlsbD0ibm9uZSI+PC9wYXRoPgo8L3N2Zz4="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMS44Ii8+Cjwvc3ZnPgo="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTk2NjM5NzIxMyIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQxMiIgd2lkdGg9IjQwIgogICAgaGVpZ2h0PSI0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHBhdGgKICAgICAgICBkPSJNNTAwIDI4MGwtMjIwIDQ0MGw0NDAgMHoiCiAgICAgICAgc3Ryb2tlLXdpZHRoPSI0MCIgc3Ryb2tlPSIjMDAwMDAwIiBmaWxsPSJub25lIj48L3BhdGg+Cjwvc3ZnPg=="
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdD0iMTY1NTk2NjM5NzIxMyIKICAgIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iODQxMiIgd2lkdGg9IjQwIgogICAgaGVpZ2h0PSI0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHBhdGgKICAgICAgICBkPSJNNTAwIDI1MGwtMjUwIDI1MGwyNTAgMjUwbDI1MCAtMjUwbC0yNTAgLTI1MCIKICAgICAgICBzdHJva2Utd2lkdGg9IjQwIiBzdHJva2U9IiMwMDAwMDAiIGZpbGw9Im5vbmUiPjwvcGF0aD4KPC9zdmc+"
  }, function (e, t, n) {
    "use strict";
    n.r(t), n.d(t, "default", (function () {
      return i
    }));
    var r = n(264),
      a = n.n(r);

    function i() {
      return a()(
        '/*!\n * \n *     VERSION: 3.9.15\n *     Git Hash: 0bcc91b00b789cd59996fd99a5b71de5a9298065\n * \n *     Create At: 2025/4/22 15:36:21\n * \n */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=void 0,a=!1;self.onmessage=function(e){switch(e.data.command){case"start":clearInterval(r),r=setInterval((function(){postMessage({message:"tick"})}),e.data.interval),a=!0;break;case"update":clearInterval(r),a&&(r=setInterval((function(){postMessage({message:"tick"})}),e.data.interval));break;case"end":clearInterval(r),a=!1}}}]);',
        "Worker", void 0, void 0)
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(0)),
      a = u(n(1)),
      i = u(n(470)),
      A = u(n(146)),
      o = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(157)),
      s = n(260);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = (new Date).valueOf(),
      c = function () {
        function e(t, n) {
          (0, r.default)(this, e), this.dispatcher = new A.default, this.appInDebug = n,
            this.logger = new i.default("whiteboard-" + t, 864e5), this.wrapLog(), this
            .log(s.SPLITTER)
        }
        return (0, a.default)(e, [{
          key: "getLogTilNow",
          value: function () {
            var e = (new Date).valueOf();
            return this.logger.get({
              start: 0,
              end: e
            }).then((function (e) {
              return e
            }))
          }
        }, {
          key: "deleteLogTilNow",
          value: function () {
            var e = (new Date).valueOf();
            this.logger.delete({
              start: 0,
              end: e
            })
          }
        }, {
          key: "wrapLog",
          value: function () {
            this.log = this.wrapLogByType("log"), this.info = this.wrapLogByType(
                "info"), this.error = this.wrapLogByType("error"), this.warn =
              this.wrapLogByType("warn"), this.debug = this.wrapLogByType("debug")
          }
        }, {
          key: "wrapLogByType",
          value: function (e) {
            var t = this;
            return function () {
              for (var n = arguments.length, r = Array(n), a = 0; a < n; a++) r[
                a] = arguments[a];
              var i = Array.prototype.slice.apply(r);
              i = [t.getLogPrefix()].concat(i);
              var A = t.argsToString.call(t, i, e);
              try {
                t.dispatcher.emit("log", {
                  type: e,
                  msg: A
                }), (t.appInDebug || "error" === e) && console[e].apply(
                  console, i), t.logger.log(e, A)
              } catch (e) {}
            }
          }
        }, {
          key: "argsToString",
          value: function (e, t) {
            var n = "";
            try {
              for (var r = [], a = 0; a < e.length; a++) o.isFunction(e[a]) ? r
                .push(e[a].toString()) : o.isObject(e[a]) || o.isArray(e[a]) ? r
                .push(o.JSONStringify(e[a])) : r.push(e[a]);
              n = r.join(" ")
            } catch (e) {}
            return this.padEnd(t, 5) + " " + n
          }
        }, {
          key: "getLogPrefix",
          value: function () {
            var e = new Date,
              t = e.valueOf() - l,
              n = e.toLocaleString();
            return "+" + this.pad(t / 1e3, 1, 6) + "s " + n
          }
        }, {
          key: "pad",
          value: function (e, t, n) {
            for (var r = e.toFixed(t).toString(); r.length < n;) r = " " + r;
            return r
          }
        }, {
          key: "padEnd",
          value: function (e, t) {
            for (; e.length < t;) e += " ";
            return e
          }
        }]), e
      }();
    t.default = c
  }, function (e, t, n) {
    window,
    e.exports = function (e) {
      var t = {};

      function n(r) {
        if (t[r]) return t[r].exports;
        var a = t[r] = {
          i: r,
          l: !1,
          exports: {}
        };
        return e[r].call(a.exports, a, a.exports, n), a.l = !0, a.exports
      }
      return n.m = e, n.c = t, n.d = function (e, t, r) {
        n.o(e, t) || Object.defineProperty(e, t, {
          enumerable: !0,
          get: r
        })
      }, n.r = function (e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e,
          Symbol.toStringTag, {
            value: "Module"
          }), Object.defineProperty(e, "__esModule", {
          value: !0
        })
      }, n.t = function (e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", {
            enumerable: !0,
            value: e
          }), 2 & t && "string" != typeof e)
          for (var a in e) n.d(r, a, function (t) {
            return e[t]
          }.bind(null, a));
        return r
      }, n.n = function (e) {
        var t = e && e.__esModule ? function () {
          return e.default
        } : function () {
          return e
        };
        return n.d(t, "a", t), t
      }, n.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
      }, n.p = "", n(n.s = 106)
    }([function (e, t, n) {
      "use strict";
      var r = n(3),
        a = n(27).f,
        i = n(74),
        A = n(9),
        o = n(12),
        s = n(14),
        u = n(13),
        l = function (e) {
          var t = function (t, n, r) {
            if (this instanceof e) {
              switch (arguments.length) {
                case 0:
                  return new e;
                case 1:
                  return new e(t);
                case 2:
                  return new e(t, n)
              }
              return new e(t, n, r)
            }
            return e.apply(this, arguments)
          };
          return t.prototype = e.prototype, t
        };
      e.exports = function (e, t) {
        var n, c, d, h, p, f, g, y, v = e.target,
          m = e.global,
          w = e.stat,
          B = e.proto,
          M = m ? r : w ? r[v] : (r[v] || {}).prototype,
          C = m ? A : A[v] || (A[v] = {}),
          I = C.prototype;
        for (d in t) n = !i(m ? d : v + (w ? "." : "#") + d, e.forced) && M && u(M,
            d), p = C[d], n && (f = e.noTargetGet ? (y = a(M, d)) && y.value : M[
          d]), h = n && f ? f : t[d], n && typeof p == typeof h || (g = e.bind &&
            n ? o(h, r) : e.wrap && n ? l(h) : B && "function" == typeof h ? o(
              Function.call, h) : h, (e.sham || h && h.sham || p && p.sham) && s(g,
              "sham", !0), C[d] = g, B && (u(A, c = v + "Prototype") || s(A, c, {}),
              A[c][d] = h, e.real && I && !I[d] && s(I, d, h)))
      }
    }, function (e, t, n) {
      var r = n(10);
      e.exports = function (e) {
        if (!r(e)) throw TypeError(String(e) + " is not an object");
        return e
      }
    }, function (e, t) {
      e.exports = !0
    }, function (e, t, n) {
      (function (t) {
        var n = function (e) {
          return e && e.Math == Math && e
        };
        e.exports = n("object" == typeof globalThis && globalThis) || n("object" ==
          typeof window && window) || n("object" == typeof self && self) || n(
          "object" == typeof t && t) || function () {
          return this
        }() || Function("return this")()
      }).call(this, n(110))
    }, function (e, t, n) {
      var r = n(1),
        a = n(116),
        i = n(29),
        A = n(12),
        o = n(82),
        s = n(117),
        u = function (e, t) {
          this.stopped = e, this.result = t
        };
      e.exports = function (e, t, n) {
        var l, c, d, h, p, f, g, y = n && n.that,
          v = !(!n || !n.AS_ENTRIES),
          m = !(!n || !n.IS_ITERATOR),
          w = !(!n || !n.INTERRUPTED),
          B = A(t, y, 1 + v + w),
          M = function (e) {
            return l && s(l), new u(!0, e)
          },
          C = function (e) {
            return v ? (r(e), w ? B(e[0], e[1], M) : B(e[0], e[1])) : w ? B(e, M) :
              B(e)
          };
        if (m) l = e;
        else {
          if ("function" != typeof (c = o(e))) throw TypeError(
            "Target is not iterable");
          if (a(c)) {
            for (d = 0, h = i(e.length); h > d; d++)
              if ((p = C(e[d])) && p instanceof u) return p;
            return new u(!1)
          }
          l = c.call(e)
        }
        for (f = l.next; !(g = f.call(l)).done;) {
          try {
            p = C(g.value)
          } catch (e) {
            throw s(l), e
          }
          if ("object" == typeof p && p && p instanceof u) return p
        }
        return new u(!1)
      }
    }, function (e, t, n) {
      var r = n(9),
        a = n(13),
        i = n(68),
        A = n(15).f;
      e.exports = function (e) {
        var t = r.Symbol || (r.Symbol = {});
        a(t, e) || A(t, e, {
          value: i.f(e)
        })
      }
    }, function (e, t, n) {
      var r = n(3),
        a = n(53),
        i = n(13),
        A = n(40),
        o = n(58),
        s = n(81),
        u = a("wks"),
        l = r.Symbol,
        c = s ? l : l && l.withoutSetter || A;
      e.exports = function (e) {
        return i(u, e) && (o || "string" == typeof u[e]) || (o && i(l, e) ? u[e] =
          l[e] : u[e] = c("Symbol." + e)), u[e]
      }
    }, function (e, t) {
      e.exports = function (e) {
        try {
          return !!e()
        } catch (e) {
          return !0
        }
      }
    }, function (e, t) {
      e.exports = function (e) {
        if ("function" != typeof e) throw TypeError(String(e) +
          " is not a function");
        return e
      }
    }, function (e, t) {
      e.exports = {}
    }, function (e, t) {
      e.exports = function (e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
      }
    }, function (e, t, n) {
      var r = n(7);
      e.exports = !r((function () {
        return 7 != Object.defineProperty({}, 1, {
          get: function () {
            return 7
          }
        })[1]
      }))
    }, function (e, t, n) {
      var r = n(8);
      e.exports = function (e, t, n) {
        if (r(e), void 0 === t) return e;
        switch (n) {
          case 0:
            return function () {
              return e.call(t)
            };
          case 1:
            return function (n) {
              return e.call(t, n)
            };
          case 2:
            return function (n, r) {
              return e.call(t, n, r)
            };
          case 3:
            return function (n, r, a) {
              return e.call(t, n, r, a)
            }
        }
        return function () {
          return e.apply(t, arguments)
        }
      }
    }, function (e, t, n) {
      var r = n(19),
        a = {}.hasOwnProperty;
      e.exports = Object.hasOwn || function (e, t) {
        return a.call(r(e), t)
      }
    }, function (e, t, n) {
      var r = n(11),
        a = n(15),
        i = n(22);
      e.exports = r ? function (e, t, n) {
        return a.f(e, t, i(1, n))
      } : function (e, t, n) {
        return e[t] = n, e
      }
    }, function (e, t, n) {
      var r = n(11),
        a = n(73),
        i = n(1),
        A = n(37),
        o = Object.defineProperty;
      t.f = r ? o : function (e, t, n) {
        if (i(e), t = A(t, !0), i(n), a) try {
          return o(e, t, n)
        } catch (e) {}
        if ("get" in n || "set" in n) throw TypeError("Accessors not supported");
        return "value" in n && (e[t] = n.value), e
      }
    }, function (e, t, n) {
      var r = n(9),
        a = n(3),
        i = function (e) {
          return "function" == typeof e ? e : void 0
        };
      e.exports = function (e, t) {
        return arguments.length < 2 ? i(r[e]) || i(a[e]) : r[e] && r[e][t] || a[
          e] && a[e][t]
      }
    }, function (e, t, n) {
      var r = n(2),
        a = n(224);
      e.exports = r ? a : function (e) {
        return Map.prototype.entries.call(e)
      }
    }, function (e, t, n) {
      var r = n(72),
        a = n(36);
      e.exports = function (e) {
        return r(a(e))
      }
    }, function (e, t, n) {
      var r = n(36);
      e.exports = function (e) {
        return Object(r(e))
      }
    }, function (e, t, n) {
      var r, a, i, A = n(89),
        o = n(3),
        s = n(10),
        u = n(14),
        l = n(13),
        c = n(54),
        d = n(39),
        h = n(30),
        p = o.WeakMap;
      if (A || c.state) {
        var f = c.state || (c.state = new p),
          g = f.get,
          y = f.has,
          v = f.set;
        r = function (e, t) {
          if (y.call(f, e)) throw new TypeError("Object already initialized");
          return t.facade = e, v.call(f, e, t), t
        }, a = function (e) {
          return g.call(f, e) || {}
        }, i = function (e) {
          return y.call(f, e)
        }
      } else {
        var m = d("state");
        h[m] = !0, r = function (e, t) {
          if (l(e, m)) throw new TypeError("Object already initialized");
          return t.facade = e, u(e, m, t), t
        }, a = function (e) {
          return l(e, m) ? e[m] : {}
        }, i = function (e) {
          return l(e, m)
        }
      }
      e.exports = {
        set: r,
        get: a,
        has: i,
        enforce: function (e) {
          return i(e) ? a(e) : r(e, {})
        },
        getterFor: function (e) {
          return function (t) {
            var n;
            if (!s(t) || (n = a(t)).type !== e) throw TypeError(
              "Incompatible receiver, " + e + " required");
            return n
          }
        }
      }
    }, function (e, t, n) {
      var r = n(9);
      e.exports = function (e) {
        return r[e + "Prototype"]
      }
    }, function (e, t) {
      e.exports = function (e, t) {
        return {
          enumerable: !(1 & e),
          configurable: !(2 & e),
          writable: !(4 & e),
          value: t
        }
      }
    }, function (e, t) {
      e.exports = {}
    }, function (e, t, n) {
      var r = n(59),
        a = n(15).f,
        i = n(14),
        A = n(13),
        o = n(119),
        s = n(6)("toStringTag");
      e.exports = function (e, t, n, u) {
        if (e) {
          var l = n ? e : e.prototype;
          A(l, s) || a(l, s, {
            configurable: !0,
            value: t
          }), u && !r && i(l, "toString", o)
        }
      }
    }, function (e, t, n) {
      var r = n(12),
        a = n(72),
        i = n(19),
        A = n(29),
        o = n(63),
        s = [].push,
        u = function (e) {
          var t = 1 == e,
            n = 2 == e,
            u = 3 == e,
            l = 4 == e,
            c = 6 == e,
            d = 7 == e,
            h = 5 == e || c;
          return function (p, f, g, y) {
            for (var v, m, w = i(p), B = a(w), M = r(f, g, 3), C = A(B.length), I =
                0, x = y || o, b = t ? x(p, C) : n || d ? x(p, 0) : void 0; C >
              I; I++)
              if ((h || I in B) && (m = M(v = B[I], I, w), e))
                if (t) b[I] = m;
                else if (m) switch (e) {
              case 3:
                return !0;
              case 5:
                return v;
              case 6:
                return I;
              case 2:
                s.call(b, v)
            } else switch (e) {
              case 4:
                return !1;
              case 7:
                s.call(b, v)
            }
            return c ? -1 : u || l ? l : b
          }
        };
      e.exports = {
        forEach: u(0),
        map: u(1),
        filter: u(2),
        some: u(3),
        every: u(4),
        find: u(5),
        findIndex: u(6),
        filterOut: u(7)
      }
    }, function (e, t, n) {
      e.exports = n(107)
    }, function (e, t, n) {
      var r = n(11),
        a = n(71),
        i = n(22),
        A = n(18),
        o = n(37),
        s = n(13),
        u = n(73),
        l = Object.getOwnPropertyDescriptor;
      t.f = r ? l : function (e, t) {
        if (e = A(e), t = o(t, !0), u) try {
          return l(e, t)
        } catch (e) {}
        if (s(e, t)) return i(!a.f.call(e, t), e[t])
      }
    }, function (e, t) {
      var n = {}.toString;
      e.exports = function (e) {
        return n.call(e).slice(8, -1)
      }
    }, function (e, t, n) {
      var r = n(42),
        a = Math.min;
      e.exports = function (e) {
        return e > 0 ? a(r(e), 9007199254740991) : 0
      }
    }, function (e, t) {
      e.exports = {}
    }, function (e, t, n) {
      var r = n(14);
      e.exports = function (e, t, n, a) {
        a && a.enumerable ? e[t] = n : r(e, t, n)
      }
    }, function (e, t, n) {
      var r = n(1),
        a = n(8),
        i = n(6)("species");
      e.exports = function (e, t) {
        var n, A = r(e).constructor;
        return void 0 === A || null == (n = r(A)[i]) ? t : a(n)
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(8),
        a = function (e) {
          var t, n;
          this.promise = new e((function (e, r) {
            if (void 0 !== t || void 0 !== n) throw TypeError(
              "Bad Promise constructor");
            t = e, n = r
          })), this.resolve = r(t), this.reject = r(n)
        };
      e.exports.f = function (e) {
        return new a(e)
      }
    }, function (e, t, n) {
      n(128);
      var r = n(129),
        a = n(3),
        i = n(45),
        A = n(14),
        o = n(23),
        s = n(6)("toStringTag");
      for (var u in r) {
        var l = a[u],
          c = l && l.prototype;
        c && i(c) !== s && A(c, s, u), o[u] = o.Array
      }
    }, function (e, t) {
      e.exports = function (e) {
        return e && e.__esModule ? e : {
          default: e
        }
      }, e.exports.default = e.exports, e.exports.__esModule = !0
    }, function (e, t) {
      e.exports = function (e) {
        if (null == e) throw TypeError("Can't call method on " + e);
        return e
      }
    }, function (e, t, n) {
      var r = n(10);
      e.exports = function (e, t) {
        if (!r(e)) return e;
        var n, a;
        if (t && "function" == typeof (n = e.toString) && !r(a = n.call(e)))
        return a;
        if ("function" == typeof (n = e.valueOf) && !r(a = n.call(e))) return a;
        if (!t && "function" == typeof (n = e.toString) && !r(a = n.call(e)))
        return a;
        throw TypeError("Can't convert object to primitive value")
      }
    }, function (e, t, n) {
      e.exports = n(111)
    }, function (e, t, n) {
      var r = n(53),
        a = n(40),
        i = r("keys");
      e.exports = function (e) {
        return i[e] || (i[e] = a(e))
      }
    }, function (e, t) {
      var n = 0,
        r = Math.random();
      e.exports = function (e) {
        return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++n + r)
          .toString(36)
      }
    }, function (e, t, n) {
      var r, a = n(1),
        i = n(76),
        A = n(57),
        o = n(30),
        s = n(80),
        u = n(51),
        l = n(39)("IE_PROTO"),
        c = function () {},
        d = function (e) {
          return "<script>" + e + "<\/script>"
        },
        h = function () {
          try {
            r = document.domain && new ActiveXObject("htmlfile")
          } catch (e) {}
          var e, t;
          h = r ? function (e) {
            e.write(d("")), e.close();
            var t = e.parentWindow.Object;
            return e = null, t
          }(r) : ((t = u("iframe")).style.display = "none", s.appendChild(t), t
            .src = String("javascript:"), (e = t.contentWindow.document).open(), e
            .write(d("document.F=Object")), e.close(), e.F);
          for (var n = A.length; n--;) delete h.prototype[A[n]];
          return h()
        };
      o[l] = !0, e.exports = Object.create || function (e, t) {
        var n;
        return null !== e ? (c.prototype = a(e), n = new c, c.prototype = null, n[
          l] = e) : n = h(), void 0 === t ? n : i(n, t)
      }
    }, function (e, t) {
      var n = Math.ceil,
        r = Math.floor;
      e.exports = function (e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? r : n)(e)
      }
    }, function (e, t, n) {
      var r, a, i = n(3),
        A = n(44),
        o = i.process,
        s = o && o.versions,
        u = s && s.v8;
      u ? a = (r = u.split("."))[0] < 4 ? 1 : r[0] + r[1] : A && (!(r = A.match(
        /Edge\/(\d+)/)) || r[1] >= 74) && (r = A.match(/Chrome\/(\d+)/)) && (a = r[
        1]), e.exports = a && +a
    }, function (e, t, n) {
      var r = n(16);
      e.exports = r("navigator", "userAgent") || ""
    }, function (e, t, n) {
      var r = n(59),
        a = n(28),
        i = n(6)("toStringTag"),
        A = "Arguments" == a(function () {
          return arguments
        }());
      e.exports = r ? a : function (e) {
        var t, n, r;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" ==
          typeof (n = function (e, t) {
            try {
              return e[t]
            } catch (e) {}
          }(t = Object(e), i)) ? n : A ? a(t) : "Object" == (r = a(t)) &&
          "function" == typeof t.callee ? "Arguments" : r
      }
    }, function (e, t) {}, function (e, t, n) {
      var r = n(31);
      e.exports = function (e, t, n) {
        for (var a in t) n && n.unsafe && e[a] ? e[a] = t[a] : r(e, a, t[a], n);
        return e
      }
    }, function (e, t) {
      e.exports = function (e, t, n) {
        if (!(e instanceof t)) throw TypeError("Incorrect " + (n ? n + " " : "") +
          "invocation");
        return e
      }
    }, function (e, t) {
      e.exports = function (e) {
        try {
          return {
            error: !1,
            value: e()
          }
        } catch (e) {
          return {
            error: !0,
            value: e
          }
        }
      }
    }, function (e, t, n) {
      var r = n(30),
        a = n(10),
        i = n(13),
        A = n(15).f,
        o = n(40),
        s = n(217),
        u = o("meta"),
        l = 0,
        c = Object.isExtensible || function () {
          return !0
        },
        d = function (e) {
          A(e, u, {
            value: {
              objectID: "O" + ++l,
              weakData: {}
            }
          })
        },
        h = e.exports = {
          REQUIRED: !1,
          fastKey: function (e, t) {
            if (!a(e)) return "symbol" == typeof e ? e : ("string" == typeof e ?
              "S" : "P") + e;
            if (!i(e, u)) {
              if (!c(e)) return "F";
              if (!t) return "E";
              d(e)
            }
            return e[u].objectID
          },
          getWeakData: function (e, t) {
            if (!i(e, u)) {
              if (!c(e)) return !0;
              if (!t) return !1;
              d(e)
            }
            return e[u].weakData
          },
          onFreeze: function (e) {
            return s && h.REQUIRED && c(e) && !i(e, u) && d(e), e
          }
        };
      r[u] = !0
    }, function (e, t, n) {
      var r = n(3),
        a = n(10),
        i = r.document,
        A = a(i) && a(i.createElement);
      e.exports = function (e) {
        return A ? i.createElement(e) : {}
      }
    }, function (e, t, n) {
      var r = n(13),
        a = n(19),
        i = n(39),
        A = n(114),
        o = i("IE_PROTO"),
        s = Object.prototype;
      e.exports = A ? Object.getPrototypeOf : function (e) {
        return e = a(e), r(e, o) ? e[o] : "function" == typeof e.constructor &&
          e instanceof e.constructor ? e.constructor.prototype :
          e instanceof Object ? s : null
      }
    }, function (e, t, n) {
      var r = n(2),
        a = n(54);
      (e.exports = function (e, t) {
        return a[e] || (a[e] = void 0 !== t ? t : {})
      })("versions", []).push({
        version: "3.13.1",
        mode: r ? "pure" : "global",
        copyright: "© 2021 Denis Pushkarev (zloirock.ru)"
      })
    }, function (e, t, n) {
      var r = n(3),
        a = n(113),
        i = r["__core-js_shared__"] || a("__core-js_shared__", {});
      e.exports = i
    }, function (e, t, n) {
      var r = n(1),
        a = n(115);
      e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function () {
        var e, t = !1,
          n = {};
        try {
          (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set)
          .call(n, []), t = n instanceof Array
        } catch (e) {}
        return function (n, i) {
          return r(n), a(i), t ? e.call(n, i) : n.__proto__ = i, n
        }
      }() : void 0)
    }, function (e, t, n) {
      var r = n(77),
        a = n(57);
      e.exports = Object.keys || function (e) {
        return r(e, a)
      }
    }, function (e, t) {
      e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf",
        "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"
      ]
    }, function (e, t, n) {
      var r = n(43),
        a = n(7);
      e.exports = !!Object.getOwnPropertySymbols && !a((function () {
        var e = Symbol();
        return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham &&
          r && r < 41
      }))
    }, function (e, t, n) {
      var r = {};
      r[n(6)("toStringTag")] = "z", e.exports = "[object z]" === String(r)
    }, function (e, t, n) {
      var r = n(28),
        a = n(3);
      e.exports = "process" == r(a.process)
    }, function (e, t, n) {
      "use strict";
      var r = n(126).charAt,
        a = n(20),
        i = n(62),
        A = a.set,
        o = a.getterFor("String Iterator");
      i(String, "String", (function (e) {
        A(this, {
          type: "String Iterator",
          string: String(e),
          index: 0
        })
      }), (function () {
        var e, t = o(this),
          n = t.string,
          a = t.index;
        return a >= n.length ? {
          value: void 0,
          done: !0
        } : (e = r(n, a), t.index += e.length, {
          value: e,
          done: !1
        })
      }))
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(127),
        i = n(52),
        A = n(55),
        o = n(24),
        s = n(14),
        u = n(31),
        l = n(6),
        c = n(2),
        d = n(23),
        h = n(92),
        p = h.IteratorPrototype,
        f = h.BUGGY_SAFARI_ITERATORS,
        g = l("iterator"),
        y = function () {
          return this
        };
      e.exports = function (e, t, n, l, h, v, m) {
        a(n, t, l);
        var w, B, M, C = function (e) {
            if (e === h && T) return T;
            if (!f && e in b) return b[e];
            switch (e) {
              case "keys":
              case "values":
              case "entries":
                return function () {
                  return new n(this, e)
                }
            }
            return function () {
              return new n(this)
            }
          },
          I = t + " Iterator",
          x = !1,
          b = e.prototype,
          k = b[g] || b["@@iterator"] || h && b[h],
          T = !f && k || C(h),
          E = "Array" == t && b.entries || k;
        if (E && (w = i(E.call(new e)), p !== Object.prototype && w.next && (c || i(
              w) === p || (A ? A(w, p) : "function" != typeof w[g] && s(w, g, y)),
            o(w, I, !0, !0), c && (d[I] = y))), "values" == h && k && "values" !== k
          .name && (x = !0, T = function () {
            return k.call(this)
          }), c && !m || b[g] === T || s(b, g, T), d[t] = T, h)
          if (B = {
              values: C("values"),
              keys: v ? T : C("keys"),
              entries: C("entries")
            }, m)
            for (M in B)(f || x || !(M in b)) && u(b, M, B[M]);
          else r({
            target: t,
            proto: !0,
            forced: f || x
          }, B);
        return B
      }
    }, function (e, t, n) {
      var r = n(10),
        a = n(64),
        i = n(6)("species");
      e.exports = function (e, t) {
        var n;
        return a(e) && ("function" != typeof (n = e.constructor) || n !== Array && !
          a(n.prototype) ? r(n) && null === (n = n[i]) && (n = void 0) : n =
          void 0), new(void 0 === n ? Array : n)(0 === t ? 0 : t)
      }
    }, function (e, t, n) {
      var r = n(28);
      e.exports = Array.isArray || function (e) {
        return "Array" == r(e)
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(37),
        a = n(15),
        i = n(22);
      e.exports = function (e, t, n) {
        var A = r(t);
        A in e ? a.f(e, A, i(0, n)) : e[A] = n
      }
    }, function (e, t, n) {
      var r = n(7),
        a = n(6),
        i = n(43),
        A = a("species");
      e.exports = function (e) {
        return i >= 51 || !r((function () {
          var t = [];
          return (t.constructor = {})[A] = function () {
            return {
              foo: 1
            }
          }, 1 !== t[e](Boolean).foo
        }))
      }
    }, function (e, t, n) {
      var r = n(77),
        a = n(57).concat("length", "prototype");
      t.f = Object.getOwnPropertyNames || function (e) {
        return r(e, a)
      }
    }, function (e, t, n) {
      var r = n(6);
      t.f = r
    }, function (e, t, n) {
      "use strict";
      var r = n(7);
      e.exports = function (e, t) {
        var n = [][e];
        return !!n && r((function () {
          n.call(null, t || function () {
            throw 1
          }, 1)
        }))
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(1);
      e.exports = function (e, t) {
        var n, a = r(this),
          i = arguments.length > 2 ? arguments[2] : void 0;
        if ("function" != typeof t && "function" != typeof i) throw TypeError(
          "At least one callback required");
        return a.has(e) ? (n = a.get(e), "function" == typeof t && (n = t(n), a.set(
          e, n))) : "function" == typeof i && (n = i(), a.set(e, n)), n
      }
    }, function (e, t, n) {
      "use strict";
      var r = {}.propertyIsEnumerable,
        a = Object.getOwnPropertyDescriptor,
        i = a && !r.call({
          1: 2
        }, 1);
      t.f = i ? function (e) {
        var t = a(this, e);
        return !!t && t.enumerable
      } : r
    }, function (e, t, n) {
      var r = n(7),
        a = n(28),
        i = "".split;
      e.exports = r((function () {
        return !Object("z").propertyIsEnumerable(0)
      })) ? function (e) {
        return "String" == a(e) ? i.call(e, "") : Object(e)
      } : Object
    }, function (e, t, n) {
      var r = n(11),
        a = n(7),
        i = n(51);
      e.exports = !r && !a((function () {
        return 7 != Object.defineProperty(i("div"), "a", {
          get: function () {
            return 7
          }
        }).a
      }))
    }, function (e, t, n) {
      var r = n(7),
        a = /#|\.prototype\./,
        i = function (e, t) {
          var n = o[A(e)];
          return n == u || n != s && ("function" == typeof t ? r(t) : !!t)
        },
        A = i.normalize = function (e) {
          return String(e).replace(a, ".").toLowerCase()
        },
        o = i.data = {},
        s = i.NATIVE = "N",
        u = i.POLYFILL = "P";
      e.exports = i
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(52),
        i = n(55),
        A = n(41),
        o = n(14),
        s = n(22),
        u = n(4),
        l = function (e, t) {
          var n = this;
          if (!(n instanceof l)) return new l(e, t);
          i && (n = i(new Error(void 0), a(n))), void 0 !== t && o(n, "message",
            String(t));
          var r = [];
          return u(e, r.push, {
            that: r
          }), o(n, "errors", r), n
        };
      l.prototype = A(Error.prototype, {
        constructor: s(5, l),
        message: s(5, ""),
        name: s(5, "AggregateError")
      }), r({
        global: !0
      }, {
        AggregateError: l
      })
    }, function (e, t, n) {
      var r = n(11),
        a = n(15),
        i = n(1),
        A = n(56);
      e.exports = r ? Object.defineProperties : function (e, t) {
        i(e);
        for (var n, r = A(t), o = r.length, s = 0; o > s;) a.f(e, n = r[s++], t[n]);
        return e
      }
    }, function (e, t, n) {
      var r = n(13),
        a = n(18),
        i = n(78).indexOf,
        A = n(30);
      e.exports = function (e, t) {
        var n, o = a(e),
          s = 0,
          u = [];
        for (n in o) !r(A, n) && r(o, n) && u.push(n);
        for (; t.length > s;) r(o, n = t[s++]) && (~i(u, n) || u.push(n));
        return u
      }
    }, function (e, t, n) {
      var r = n(18),
        a = n(29),
        i = n(79),
        A = function (e) {
          return function (t, n, A) {
            var o, s = r(t),
              u = a(s.length),
              l = i(A, u);
            if (e && n != n) {
              for (; u > l;)
                if ((o = s[l++]) != o) return !0
            } else
              for (; u > l; l++)
                if ((e || l in s) && s[l] === n) return e || l || 0;
            return !e && -1
          }
        };
      e.exports = {
        includes: A(!0),
        indexOf: A(!1)
      }
    }, function (e, t, n) {
      var r = n(42),
        a = Math.max,
        i = Math.min;
      e.exports = function (e, t) {
        var n = r(e);
        return n < 0 ? a(n + t, 0) : i(n, t)
      }
    }, function (e, t, n) {
      var r = n(16);
      e.exports = r("document", "documentElement")
    }, function (e, t, n) {
      var r = n(58);
      e.exports = r && !Symbol.sham && "symbol" == typeof Symbol.iterator
    }, function (e, t, n) {
      var r = n(45),
        a = n(23),
        i = n(6)("iterator");
      e.exports = function (e) {
        if (null != e) return e[i] || e["@@iterator"] || a[r(e)]
      }
    }, function (e, t, n) {
      var r = n(3);
      e.exports = r.Promise
    }, function (e, t, n) {
      "use strict";
      var r = n(16),
        a = n(15),
        i = n(6),
        A = n(11),
        o = i("species");
      e.exports = function (e) {
        var t = r(e),
          n = a.f;
        A && t && !t[o] && n(t, o, {
          configurable: !0,
          get: function () {
            return this
          }
        })
      }
    }, function (e, t, n) {
      var r = n(54),
        a = Function.toString;
      "function" != typeof r.inspectSource && (r.inspectSource = function (e) {
        return a.call(e)
      }), e.exports = r.inspectSource
    }, function (e, t, n) {
      var r, a, i, A = n(3),
        o = n(7),
        s = n(12),
        u = n(80),
        l = n(51),
        c = n(87),
        d = n(60),
        h = A.location,
        p = A.setImmediate,
        f = A.clearImmediate,
        g = A.process,
        y = A.MessageChannel,
        v = A.Dispatch,
        m = 0,
        w = {},
        B = function (e) {
          if (w.hasOwnProperty(e)) {
            var t = w[e];
            delete w[e], t()
          }
        },
        M = function (e) {
          return function () {
            B(e)
          }
        },
        C = function (e) {
          B(e.data)
        },
        I = function (e) {
          A.postMessage(e + "", h.protocol + "//" + h.host)
        };
      p && f || (p = function (e) {
          for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
          return w[++m] = function () {
            ("function" == typeof e ? e : Function(e)).apply(void 0, t)
          }, r(m), m
        }, f = function (e) {
          delete w[e]
        }, d ? r = function (e) {
          g.nextTick(M(e))
        } : v && v.now ? r = function (e) {
          v.now(M(e))
        } : y && !c ? (i = (a = new y).port2, a.port1.onmessage = C, r = s(i
          .postMessage, i, 1)) : A.addEventListener && "function" ==
        typeof postMessage && !A.importScripts && h && "file:" !== h.protocol && !o(
          I) ? (r = I, A.addEventListener("message", C, !1)) : r =
        "onreadystatechange" in l("script") ? function (e) {
          u.appendChild(l("script")).onreadystatechange = function () {
            u.removeChild(this), B(e)
          }
        } : function (e) {
          setTimeout(M(e), 0)
        }), e.exports = {
        set: p,
        clear: f
      }
    }, function (e, t, n) {
      var r = n(44);
      e.exports = /(?:iphone|ipod|ipad).*applewebkit/i.test(r)
    }, function (e, t, n) {
      var r = n(1),
        a = n(10),
        i = n(33);
      e.exports = function (e, t) {
        if (r(e), a(t) && t.constructor === e) return t;
        var n = i.f(e);
        return (0, n.resolve)(t), n.promise
      }
    }, function (e, t, n) {
      var r = n(3),
        a = n(85),
        i = r.WeakMap;
      e.exports = "function" == typeof i && /native code/.test(a(i))
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(8),
        i = n(33),
        A = n(49),
        o = n(4);
      r({
        target: "Promise",
        stat: !0
      }, {
        allSettled: function (e) {
          var t = this,
            n = i.f(t),
            r = n.resolve,
            s = n.reject,
            u = A((function () {
              var n = a(t.resolve),
                i = [],
                A = 0,
                s = 1;
              o(e, (function (e) {
                var a = A++,
                  o = !1;
                i.push(void 0), s++, n.call(t, e).then((function (e) {
                  o || (o = !0, i[a] = {
                    status: "fulfilled",
                    value: e
                  }, --s || r(i))
                }), (function (e) {
                  o || (o = !0, i[a] = {
                    status: "rejected",
                    reason: e
                  }, --s || r(i))
                }))
              })), --s || r(i)
            }));
          return u.error && s(u.value), n.promise
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(8),
        i = n(16),
        A = n(33),
        o = n(49),
        s = n(4);
      r({
        target: "Promise",
        stat: !0
      }, {
        any: function (e) {
          var t = this,
            n = A.f(t),
            r = n.resolve,
            u = n.reject,
            l = o((function () {
              var n = a(t.resolve),
                A = [],
                o = 0,
                l = 1,
                c = !1;
              s(e, (function (e) {
                var a = o++,
                  s = !1;
                A.push(void 0), l++, n.call(t, e).then((function (e) {
                  s || c || (c = !0, r(e))
                }), (function (e) {
                  s || c || (s = !0, A[a] = e, --l || u(new(i(
                    "AggregateError"))(A,
                    "No one promise resolved")))
                }))
              })), --l || u(new(i("AggregateError"))(A,
                "No one promise resolved"))
            }));
          return l.error && u(l.value), n.promise
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r, a, i, A = n(7),
        o = n(52),
        s = n(14),
        u = n(13),
        l = n(6),
        c = n(2),
        d = l("iterator"),
        h = !1;
      [].keys && ("next" in (i = [].keys()) ? (a = o(o(i))) !== Object.prototype && (
        r = a) : h = !0);
      var p = null == r || A((function () {
        var e = {};
        return r[d].call(e) !== e
      }));
      p && (r = {}), c && !p || u(r, d) || s(r, d, (function () {
        return this
      })), e.exports = {
        IteratorPrototype: r,
        BUGGY_SAFARI_ITERATORS: h
      }
    }, function (e, t) {
      e.exports = function () {}
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(7),
        i = n(64),
        A = n(10),
        o = n(19),
        s = n(29),
        u = n(65),
        l = n(63),
        c = n(66),
        d = n(6),
        h = n(43),
        p = d("isConcatSpreadable"),
        f = h >= 51 || !a((function () {
          var e = [];
          return e[p] = !1, e.concat()[0] !== e
        })),
        g = c("concat"),
        y = function (e) {
          if (!A(e)) return !1;
          var t = e[p];
          return void 0 !== t ? !!t : i(e)
        };
      r({
        target: "Array",
        proto: !0,
        forced: !f || !g
      }, {
        concat: function (e) {
          var t, n, r, a, i, A = o(this),
            c = l(A, 0),
            d = 0;
          for (t = -1, r = arguments.length; t < r; t++)
            if (y(i = -1 === t ? A : arguments[t])) {
              if (d + (a = s(i.length)) > 9007199254740991) throw TypeError(
                "Maximum allowed index exceeded");
              for (n = 0; n < a; n++, d++) n in i && u(c, d, i[n])
            } else {
              if (d >= 9007199254740991) throw TypeError(
                "Maximum allowed index exceeded");
              u(c, d++, i)
            } return c.length = d, c
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(3),
        i = n(16),
        A = n(2),
        o = n(11),
        s = n(58),
        u = n(81),
        l = n(7),
        c = n(13),
        d = n(64),
        h = n(10),
        p = n(1),
        f = n(19),
        g = n(18),
        y = n(37),
        v = n(22),
        m = n(41),
        w = n(56),
        B = n(67),
        M = n(147),
        C = n(96),
        I = n(27),
        x = n(15),
        b = n(71),
        k = n(14),
        T = n(31),
        E = n(53),
        D = n(39),
        N = n(30),
        P = n(40),
        Q = n(6),
        O = n(68),
        _ = n(5),
        S = n(24),
        U = n(20),
        F = n(25).forEach,
        L = D("hidden"),
        j = Q("toPrimitive"),
        z = U.set,
        R = U.getterFor("Symbol"),
        H = Object.prototype,
        Y = a.Symbol,
        W = i("JSON", "stringify"),
        K = I.f,
        G = x.f,
        V = M.f,
        Z = b.f,
        X = E("symbols"),
        J = E("op-symbols"),
        q = E("string-to-symbol-registry"),
        $ = E("symbol-to-string-registry"),
        ee = E("wks"),
        te = a.QObject,
        ne = !te || !te.prototype || !te.prototype.findChild,
        re = o && l((function () {
          return 7 != m(G({}, "a", {
            get: function () {
              return G(this, "a", {
                value: 7
              }).a
            }
          })).a
        })) ? function (e, t, n) {
          var r = K(H, t);
          r && delete H[t], G(e, t, n), r && e !== H && G(H, t, r)
        } : G,
        ae = function (e, t) {
          var n = X[e] = m(Y.prototype);
          return z(n, {
            type: "Symbol",
            tag: e,
            description: t
          }), o || (n.description = t), n
        },
        ie = u ? function (e) {
          return "symbol" == typeof e
        } : function (e) {
          return Object(e) instanceof Y
        },
        Ae = function (e, t, n) {
          e === H && Ae(J, t, n), p(e);
          var r = y(t, !0);
          return p(n), c(X, r) ? (n.enumerable ? (c(e, L) && e[L][r] && (e[L][r] = !
            1), n = m(n, {
              enumerable: v(0, !1)
            })) : (c(e, L) || G(e, L, v(1, {})), e[L][r] = !0), re(e, r, n)) : G(e,
            r, n)
        },
        oe = function (e, t) {
          p(e);
          var n = g(t),
            r = w(n).concat(ce(n));
          return F(r, (function (t) {
            o && !se.call(n, t) || Ae(e, t, n[t])
          })), e
        },
        se = function (e) {
          var t = y(e, !0),
            n = Z.call(this, t);
          return !(this === H && c(X, t) && !c(J, t)) && (!(n || !c(this, t) || !c(X,
            t) || c(this, L) && this[L][t]) || n)
        },
        ue = function (e, t) {
          var n = g(e),
            r = y(t, !0);
          if (n !== H || !c(X, r) || c(J, r)) {
            var a = K(n, r);
            return !a || !c(X, r) || c(n, L) && n[L][r] || (a.enumerable = !0), a
          }
        },
        le = function (e) {
          var t = V(g(e)),
            n = [];
          return F(t, (function (e) {
            c(X, e) || c(N, e) || n.push(e)
          })), n
        },
        ce = function (e) {
          var t = e === H,
            n = V(t ? J : g(e)),
            r = [];
          return F(n, (function (e) {
            !c(X, e) || t && !c(H, e) || r.push(X[e])
          })), r
        };
      s || (T((Y = function () {
            if (this instanceof Y) throw TypeError("Symbol is not a constructor");
            var e = arguments.length && void 0 !== arguments[0] ? String(
                arguments[0]) : void 0,
              t = P(e),
              n = function (e) {
                this === H && n.call(J, e), c(this, L) && c(this[L], t) && (this[
                  L][t] = !1), re(this, t, v(1, e))
              };
            return o && ne && re(H, t, {
              configurable: !0,
              set: n
            }), ae(t, e)
          }).prototype, "toString", (function () {
            return R(this).tag
          })), T(Y, "withoutSetter", (function (e) {
            return ae(P(e), e)
          })), b.f = se, x.f = Ae, I.f = ue, B.f = M.f = le, C.f = ce, O.f =
          function (e) {
            return ae(Q(e), e)
          }, o && (G(Y.prototype, "description", {
            configurable: !0,
            get: function () {
              return R(this).description
            }
          }), A || T(H, "propertyIsEnumerable", se, {
            unsafe: !0
          }))), r({
          global: !0,
          wrap: !0,
          forced: !s,
          sham: !s
        }, {
          Symbol: Y
        }), F(w(ee), (function (e) {
          _(e)
        })), r({
          target: "Symbol",
          stat: !0,
          forced: !s
        }, {
          for: function (e) {
            var t = String(e);
            if (c(q, t)) return q[t];
            var n = Y(t);
            return q[t] = n, $[n] = t, n
          },
          keyFor: function (e) {
            if (!ie(e)) throw TypeError(e + " is not a symbol");
            if (c($, e)) return $[e]
          },
          useSetter: function () {
            ne = !0
          },
          useSimple: function () {
            ne = !1
          }
        }), r({
          target: "Object",
          stat: !0,
          forced: !s,
          sham: !o
        }, {
          create: function (e, t) {
            return void 0 === t ? m(e) : oe(m(e), t)
          },
          defineProperty: Ae,
          defineProperties: oe,
          getOwnPropertyDescriptor: ue
        }), r({
          target: "Object",
          stat: !0,
          forced: !s
        }, {
          getOwnPropertyNames: le,
          getOwnPropertySymbols: ce
        }), r({
          target: "Object",
          stat: !0,
          forced: l((function () {
            C.f(1)
          }))
        }, {
          getOwnPropertySymbols: function (e) {
            return C.f(f(e))
          }
        }), W && r({
          target: "JSON",
          stat: !0,
          forced: !s || l((function () {
            var e = Y();
            return "[null]" != W([e]) || "{}" != W({
              a: e
            }) || "{}" != W(Object(e))
          }))
        }, {
          stringify: function (e, t, n) {
            for (var r, a = [e], i = 1; arguments.length > i;) a.push(arguments[
              i++]);
            if (r = t, (h(t) || void 0 !== e) && !ie(e)) return d(t) || (t =
              function (e, t) {
                if ("function" == typeof r && (t = r.call(this, e, t)), !ie(
                  t)) return t
              }), a[1] = t, W.apply(null, a)
          }
        }), Y.prototype[j] || k(Y.prototype, j, Y.prototype.valueOf), S(Y, "Symbol"),
        N[L] = !0
    }, function (e, t) {
      t.f = Object.getOwnPropertySymbols
    }, function (e, t, n) {
      n(5)("iterator")
    }, function (e, t, n) {
      e.exports = n(174)
    }, function (e, t, n) {
      e.exports = n(182)
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(3),
        i = n(50),
        A = n(7),
        o = n(14),
        s = n(4),
        u = n(48),
        l = n(10),
        c = n(24),
        d = n(15).f,
        h = n(25).forEach,
        p = n(11),
        f = n(20),
        g = f.set,
        y = f.getterFor;
      e.exports = function (e, t, n) {
        var f, v = -1 !== e.indexOf("Map"),
          m = -1 !== e.indexOf("Weak"),
          w = v ? "set" : "add",
          B = a[e],
          M = B && B.prototype,
          C = {};
        if (p && "function" == typeof B && (m || M.forEach && !A((function () {
            (new B).entries().next()
          })))) {
          f = t((function (t, n) {
            g(u(t, f, e), {
              type: e,
              collection: new B
            }), null != n && s(n, t[w], {
              that: t,
              AS_ENTRIES: v
            })
          }));
          var I = y(e);
          h(["add", "clear", "delete", "forEach", "get", "has", "set", "keys",
            "values", "entries"
          ], (function (e) {
            var t = "add" == e || "set" == e;
            !(e in M) || m && "clear" == e || o(f.prototype, e, (function (n,
              r) {
              var a = I(this).collection;
              if (!t && m && !l(n)) return "get" == e && void 0;
              var i = a[e](0 === n ? 0 : n, r);
              return t ? this : i
            }))
          })), m || d(f.prototype, "size", {
            configurable: !0,
            get: function () {
              return I(this).collection.size
            }
          })
        } else f = n.getConstructor(t, e, v, w), i.REQUIRED = !0;
        return c(f, e, !1, !0), C[e] = f, r({
          global: !0,
          forced: !0
        }, C), m || n.setStrong(f, e, v), f
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(8),
        a = n(12),
        i = n(4);
      e.exports = function (e) {
        var t, n, A, o, s = arguments.length,
          u = s > 1 ? arguments[1] : void 0;
        return r(this), (t = void 0 !== u) && r(u), null == e ? new this : (n = [],
          t ? (A = 0, o = a(u, s > 2 ? arguments[2] : void 0, 2), i(e, (function (
            e) {
            n.push(o(e, A++))
          }))) : i(e, n.push, {
            that: n
          }), new this(n))
      }
    }, function (e, t, n) {
      "use strict";
      e.exports = function () {
        for (var e = arguments.length, t = new Array(e); e--;) t[e] = arguments[e];
        return new this(t)
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(1),
        a = n(8);
      e.exports = function () {
        for (var e, t = r(this), n = a(t.delete), i = !0, A = 0, o = arguments
            .length; A < o; A++) e = n.call(t, arguments[A]), i = i && e;
        return !!i
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(1);
      e.exports = function (e, t) {
        var n = r(this),
          a = n.has(e) && "update" in t ? t.update(n.get(e), e, n) : t.insert(e, n);
        return n.set(e, a), a
      }
    }, function (e, t, n) {
      e.exports = n(241)
    }, function (e, t, n) {
      "use strict";
      var r = n(35),
        a = r(n(26)),
        i = r(n(38)),
        A = r(n(134)),
        o = r(n(139));
      (0, a.default)(t, "__esModule", {
        value: !0
      });
      var s = function (e) {
          return e && e.__esModule ? e : {
            default: e
          }
        }(n(143)),
        u = function () {
          function e(e, t, n) {
            if (void 0 === t && (t = 864e5), this.name = e, this.expire = t, this
              .onError = n, this.logQueue = [], this.addTimer = -1, this.onError =
              n || function () {}, "undefined" == typeof indexedDB || "undefined" ==
              typeof IDBKeyRange || "undefined" == typeof Proxy) return this.onError(
              "not support indexeddb or Proxy"), this.get = function () {
              return i.default.resolve([])
            }, this.delete = function () {
              return i.default.resolve()
            }, void(this.log = function () {});
            this.db = new s.default(e, t)
          }
          return e.prototype.get = function (e) {
            return this.db.getLogs(e)
          }, e.prototype.delete = function (e) {
            return this.db.deleteLogs(e)
          }, e.prototype.log = function (e, t, n) {
            var r, a = this,
              i = {
                time: +new Date,
                level: e,
                type: n,
                logStr: t
              };
            this.logQueue.push(i), clearTimeout(this.addTimer), this.logQueue
              .length > 3e3 ? this.db.save((0, A.default)(r = this.logQueue).call(r,
                0)) : this.addTimer = (0, o.default)((function () {
                var e;
                a.db.save((0, A.default)(e = a.logQueue).call(e, 0))
              }), 2e3)
          }, e
        }();
      t.default = u
    }, function (e, t, n) {
      var r = n(108);
      e.exports = r
    }, function (e, t, n) {
      n(109);
      var r = n(9).Object,
        a = e.exports = function (e, t, n) {
          return r.defineProperty(e, t, n)
        };
      r.defineProperty.sham && (a.sham = !0)
    }, function (e, t, n) {
      var r = n(0),
        a = n(11);
      r({
        target: "Object",
        stat: !0,
        forced: !a,
        sham: !a
      }, {
        defineProperty: n(15).f
      })
    }, function (e, t) {
      var n;
      n = function () {
        return this
      }();
      try {
        n = n || new Function("return this")()
      } catch (e) {
        "object" == typeof window && (n = window)
      }
      e.exports = n
    }, function (e, t, n) {
      var r = n(112);
      n(130), n(131), n(132), n(133), e.exports = r
    }, function (e, t, n) {
      n(75), n(46), n(118), n(90), n(91), n(125), n(61), n(34);
      var r = n(9);
      e.exports = r.Promise
    }, function (e, t, n) {
      var r = n(3),
        a = n(14);
      e.exports = function (e, t) {
        try {
          a(r, e, t)
        } catch (n) {
          r[e] = t
        }
        return t
      }
    }, function (e, t, n) {
      var r = n(7);
      e.exports = !r((function () {
        function e() {}
        return e.prototype.constructor = null, Object.getPrototypeOf(new e) !==
          e.prototype
      }))
    }, function (e, t, n) {
      var r = n(10);
      e.exports = function (e) {
        if (!r(e) && null !== e) throw TypeError("Can't set " + String(e) +
          " as a prototype");
        return e
      }
    }, function (e, t, n) {
      var r = n(6),
        a = n(23),
        i = r("iterator"),
        A = Array.prototype;
      e.exports = function (e) {
        return void 0 !== e && (a.Array === e || A[i] === e)
      }
    }, function (e, t, n) {
      var r = n(1);
      e.exports = function (e) {
        var t = e.return;
        if (void 0 !== t) return r(t.call(e)).value
      }
    }, function (e, t, n) {
      "use strict";
      var r, a, i, A, o = n(0),
        s = n(2),
        u = n(3),
        l = n(16),
        c = n(83),
        d = n(31),
        h = n(47),
        p = n(55),
        f = n(24),
        g = n(84),
        y = n(10),
        v = n(8),
        m = n(48),
        w = n(85),
        B = n(4),
        M = n(120),
        C = n(32),
        I = n(86).set,
        x = n(121),
        b = n(88),
        k = n(123),
        T = n(33),
        E = n(49),
        D = n(20),
        N = n(74),
        P = n(6),
        Q = n(124),
        O = n(60),
        _ = n(43),
        S = P("species"),
        U = "Promise",
        F = D.get,
        L = D.set,
        j = D.getterFor(U),
        z = c && c.prototype,
        R = c,
        H = z,
        Y = u.TypeError,
        W = u.document,
        K = u.process,
        G = T.f,
        V = G,
        Z = !!(W && W.createEvent && u.dispatchEvent),
        X = "function" == typeof PromiseRejectionEvent,
        J = !1,
        q = N(U, (function () {
          var e = w(R) !== String(R);
          if (!e && 66 === _) return !0;
          if (s && !H.finally) return !0;
          if (_ >= 51 && /native code/.test(R)) return !1;
          var t = new R((function (e) {
              e(1)
            })),
            n = function (e) {
              e((function () {}), (function () {}))
            };
          return (t.constructor = {})[S] = n, !(J = t.then((
          function () {})) instanceof n) || !e && Q && !X
        })),
        $ = q || !M((function (e) {
          R.all(e).catch((function () {}))
        })),
        ee = function (e) {
          var t;
          return !(!y(e) || "function" != typeof (t = e.then)) && t
        },
        te = function (e, t) {
          if (!e.notified) {
            e.notified = !0;
            var n = e.reactions;
            x((function () {
              for (var r = e.value, a = 1 == e.state, i = 0; n.length > i;) {
                var A, o, s, u = n[i++],
                  l = a ? u.ok : u.fail,
                  c = u.resolve,
                  d = u.reject,
                  h = u.domain;
                try {
                  l ? (a || (2 === e.rejection && ie(e), e.rejection = 1), !
                    0 === l ? A = r : (h && h.enter(), A = l(r), h && (h
                    .exit(), s = !0)), A === u.promise ? d(Y(
                      "Promise-chain cycle")) : (o = ee(A)) ? o.call(A, c,
                    d) : c(A)) : d(r)
                } catch (e) {
                  h && !s && h.exit(), d(e)
                }
              }
              e.reactions = [], e.notified = !1, t && !e.rejection && re(e)
            }))
          }
        },
        ne = function (e, t, n) {
          var r, a;
          Z ? ((r = W.createEvent("Event")).promise = t, r.reason = n, r.initEvent(e,
            !1, !0), u.dispatchEvent(r)) : r = {
            promise: t,
            reason: n
          }, !X && (a = u["on" + e]) ? a(r) : "unhandledrejection" === e && k(
            "Unhandled promise rejection", n)
        },
        re = function (e) {
          I.call(u, (function () {
            var t, n = e.facade,
              r = e.value;
            if (ae(e) && (t = E((function () {
                O ? K.emit("unhandledRejection", r, n) : ne(
                  "unhandledrejection", n, r)
              })), e.rejection = O || ae(e) ? 2 : 1, t.error)) throw t.value
          }))
        },
        ae = function (e) {
          return 1 !== e.rejection && !e.parent
        },
        ie = function (e) {
          I.call(u, (function () {
            var t = e.facade;
            O ? K.emit("rejectionHandled", t) : ne("rejectionhandled", t, e
              .value)
          }))
        },
        Ae = function (e, t, n) {
          return function (r) {
            e(t, r, n)
          }
        },
        oe = function (e, t, n) {
          e.done || (e.done = !0, n && (e = n), e.value = t, e.state = 2, te(e, !0))
        },
        se = function (e, t, n) {
          if (!e.done) {
            e.done = !0, n && (e = n);
            try {
              if (e.facade === t) throw Y("Promise can't be resolved itself");
              var r = ee(t);
              r ? x((function () {
                var n = {
                  done: !1
                };
                try {
                  r.call(t, Ae(se, n, e), Ae(oe, n, e))
                } catch (t) {
                  oe(n, t, e)
                }
              })) : (e.value = t, e.state = 1, te(e, !1))
            } catch (t) {
              oe({
                done: !1
              }, t, e)
            }
          }
        };
      if (q && (H = (R = function (e) {
          m(this, R, U), v(e), r.call(this);
          var t = F(this);
          try {
            e(Ae(se, t), Ae(oe, t))
          } catch (e) {
            oe(t, e)
          }
        }).prototype, (r = function (e) {
          L(this, {
            type: U,
            done: !1,
            notified: !1,
            parent: !1,
            reactions: [],
            rejection: !1,
            state: 0,
            value: void 0
          })
        }).prototype = h(H, {
          then: function (e, t) {
            var n = j(this),
              r = G(C(this, R));
            return r.ok = "function" != typeof e || e, r.fail = "function" ==
              typeof t && t, r.domain = O ? K.domain : void 0, n.parent = !0, n
              .reactions.push(r), 0 != n.state && te(n, !1), r.promise
          },
          catch: function (e) {
            return this.then(void 0, e)
          }
        }), a = function () {
          var e = new r,
            t = F(e);
          this.promise = e, this.resolve = Ae(se, t), this.reject = Ae(oe, t)
        }, T.f = G = function (e) {
          return e === R || e === i ? new a(e) : V(e)
        }, !s && "function" == typeof c && z !== Object.prototype)) {
        A = z.then, J || (d(z, "then", (function (e, t) {
          var n = this;
          return new R((function (e, t) {
            A.call(n, e, t)
          })).then(e, t)
        }), {
          unsafe: !0
        }), d(z, "catch", H.catch, {
          unsafe: !0
        }));
        try {
          delete z.constructor
        } catch (e) {}
        p && p(z, H)
      }
      o({
        global: !0,
        wrap: !0,
        forced: q
      }, {
        Promise: R
      }), f(R, U, !1, !0), g(U), i = l(U), o({
        target: U,
        stat: !0,
        forced: q
      }, {
        reject: function (e) {
          var t = G(this);
          return t.reject.call(void 0, e), t.promise
        }
      }), o({
        target: U,
        stat: !0,
        forced: s || q
      }, {
        resolve: function (e) {
          return b(s && this === i ? R : this, e)
        }
      }), o({
        target: U,
        stat: !0,
        forced: $
      }, {
        all: function (e) {
          var t = this,
            n = G(t),
            r = n.resolve,
            a = n.reject,
            i = E((function () {
              var n = v(t.resolve),
                i = [],
                A = 0,
                o = 1;
              B(e, (function (e) {
                var s = A++,
                  u = !1;
                i.push(void 0), o++, n.call(t, e).then((function (e) {
                  u || (u = !0, i[s] = e, --o || r(i))
                }), a)
              })), --o || r(i)
            }));
          return i.error && a(i.value), n.promise
        },
        race: function (e) {
          var t = this,
            n = G(t),
            r = n.reject,
            a = E((function () {
              var a = v(t.resolve);
              B(e, (function (e) {
                a.call(t, e).then(n.resolve, r)
              }))
            }));
          return a.error && r(a.value), n.promise
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(59),
        a = n(45);
      e.exports = r ? {}.toString : function () {
        return "[object " + a(this) + "]"
      }
    }, function (e, t, n) {
      var r = n(6)("iterator"),
        a = !1;
      try {
        var i = 0,
          A = {
            next: function () {
              return {
                done: !!i++
              }
            },
            return: function () {
              a = !0
            }
          };
        A[r] = function () {
          return this
        }, Array.from(A, (function () {
          throw 2
        }))
      } catch (e) {}
      e.exports = function (e, t) {
        if (!t && !a) return !1;
        var n = !1;
        try {
          var i = {};
          i[r] = function () {
            return {
              next: function () {
                return {
                  done: n = !0
                }
              }
            }
          }, e(i)
        } catch (e) {}
        return n
      }
    }, function (e, t, n) {
      var r, a, i, A, o, s, u, l, c = n(3),
        d = n(27).f,
        h = n(86).set,
        p = n(87),
        f = n(122),
        g = n(60),
        y = c.MutationObserver || c.WebKitMutationObserver,
        v = c.document,
        m = c.process,
        w = c.Promise,
        B = d(c, "queueMicrotask"),
        M = B && B.value;
      M || (r = function () {
        var e, t;
        for (g && (e = m.domain) && e.exit(); a;) {
          t = a.fn, a = a.next;
          try {
            t()
          } catch (e) {
            throw a ? A() : i = void 0, e
          }
        }
        i = void 0, e && e.enter()
      }, p || g || f || !y || !v ? w && w.resolve ? ((u = w.resolve(void 0))
        .constructor = w, l = u.then, A = function () {
          l.call(u, r)
        }) : A = g ? function () {
        m.nextTick(r)
      } : function () {
        h.call(c, r)
      } : (o = !0, s = v.createTextNode(""), new y(r).observe(s, {
        characterData: !0
      }), A = function () {
        s.data = o = !o
      })), e.exports = M || function (e) {
        var t = {
          fn: e,
          next: void 0
        };
        i && (i.next = t), a || (a = t, A()), i = t
      }
    }, function (e, t, n) {
      var r = n(44);
      e.exports = /web0s(?!.*chrome)/i.test(r)
    }, function (e, t, n) {
      var r = n(3);
      e.exports = function (e, t) {
        var n = r.console;
        n && n.error && (1 === arguments.length ? n.error(e) : n.error(e, t))
      }
    }, function (e, t) {
      e.exports = "object" == typeof window
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(83),
        A = n(7),
        o = n(16),
        s = n(32),
        u = n(88),
        l = n(31);
      if (r({
          target: "Promise",
          proto: !0,
          real: !0,
          forced: !!i && A((function () {
            i.prototype.finally.call({
              then: function () {}
            }, (function () {}))
          }))
        }, {
          finally: function (e) {
            var t = s(this, o("Promise")),
              n = "function" == typeof e;
            return this.then(n ? function (n) {
              return u(t, e()).then((function () {
                return n
              }))
            } : e, n ? function (n) {
              return u(t, e()).then((function () {
                throw n
              }))
            } : e)
          }
        }), !a && "function" == typeof i) {
        var c = o("Promise").prototype.finally;
        i.prototype.finally !== c && l(i.prototype, "finally", c, {
          unsafe: !0
        })
      }
    }, function (e, t, n) {
      var r = n(42),
        a = n(36),
        i = function (e) {
          return function (t, n) {
            var i, A, o = String(a(t)),
              s = r(n),
              u = o.length;
            return s < 0 || s >= u ? e ? "" : void 0 : (i = o.charCodeAt(s)) <
              55296 || i > 56319 || s + 1 === u || (A = o.charCodeAt(s + 1)) <
              56320 || A > 57343 ? e ? o.charAt(s) : i : e ? o.slice(s, s + 2) : A -
              56320 + (i - 55296 << 10) + 65536
          }
        };
      e.exports = {
        codeAt: i(!1),
        charAt: i(!0)
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(92).IteratorPrototype,
        a = n(41),
        i = n(22),
        A = n(24),
        o = n(23),
        s = function () {
          return this
        };
      e.exports = function (e, t, n) {
        var u = t + " Iterator";
        return e.prototype = a(r, {
          next: i(1, n)
        }), A(e, u, !1, !0), o[u] = s, e
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(18),
        a = n(93),
        i = n(23),
        A = n(20),
        o = n(62),
        s = A.set,
        u = A.getterFor("Array Iterator");
      e.exports = o(Array, "Array", (function (e, t) {
        s(this, {
          type: "Array Iterator",
          target: r(e),
          index: 0,
          kind: t
        })
      }), (function () {
        var e = u(this),
          t = e.target,
          n = e.kind,
          r = e.index++;
        return !t || r >= t.length ? (e.target = void 0, {
          value: void 0,
          done: !0
        }) : "keys" == n ? {
          value: r,
          done: !1
        } : "values" == n ? {
          value: t[r],
          done: !1
        } : {
          value: [r, t[r]],
          done: !1
        }
      }), "values"), i.Arguments = i.Array, a("keys"), a("values"), a("entries")
    }, function (e, t) {
      e.exports = {
        CSSRuleList: 0,
        CSSStyleDeclaration: 0,
        CSSValueList: 0,
        ClientRectList: 0,
        DOMRectList: 0,
        DOMStringList: 0,
        DOMTokenList: 1,
        DataTransferItemList: 0,
        FileList: 0,
        HTMLAllCollection: 0,
        HTMLCollection: 0,
        HTMLFormElement: 0,
        HTMLSelectElement: 0,
        MediaList: 0,
        MimeTypeArray: 0,
        NamedNodeMap: 0,
        NodeList: 1,
        PaintRequestList: 0,
        Plugin: 0,
        PluginArray: 0,
        SVGLengthList: 0,
        SVGNumberList: 0,
        SVGPathSegList: 0,
        SVGPointList: 0,
        SVGStringList: 0,
        SVGTransformList: 0,
        SourceBufferList: 0,
        StyleSheetList: 0,
        TextTrackCueList: 0,
        TextTrackList: 0,
        TouchList: 0
      }
    }, function (e, t, n) {
      n(75)
    }, function (e, t, n) {
      n(90)
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(33),
        i = n(49);
      r({
        target: "Promise",
        stat: !0
      }, {
        try: function (e) {
          var t = a.f(this),
            n = i(e);
          return (n.error ? t.reject : t.resolve)(n.value), t.promise
        }
      })
    }, function (e, t, n) {
      n(91)
    }, function (e, t, n) {
      e.exports = n(135)
    }, function (e, t, n) {
      var r = n(136);
      e.exports = r
    }, function (e, t, n) {
      var r = n(137),
        a = Array.prototype;
      e.exports = function (e) {
        var t = e.splice;
        return e === a || e instanceof Array && t === a.splice ? r : t
      }
    }, function (e, t, n) {
      n(138);
      var r = n(21);
      e.exports = r("Array").splice
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(79),
        i = n(42),
        A = n(29),
        o = n(19),
        s = n(63),
        u = n(65),
        l = n(66)("splice"),
        c = Math.max,
        d = Math.min;
      r({
        target: "Array",
        proto: !0,
        forced: !l
      }, {
        splice: function (e, t) {
          var n, r, l, h, p, f, g = o(this),
            y = A(g.length),
            v = a(e, y),
            m = arguments.length;
          if (0 === m ? n = r = 0 : 1 === m ? (n = 0, r = y - v) : (n = m - 2,
              r = d(c(i(t), 0), y - v)), y + n - r > 9007199254740991)
          throw TypeError("Maximum allowed length exceeded");
          for (l = s(g, r), h = 0; h < r; h++)(p = v + h) in g && u(l, h, g[p]);
          if (l.length = r, n < r) {
            for (h = v; h < y - r; h++) f = h + n, (p = h + r) in g ? g[f] = g[
              p] : delete g[f];
            for (h = y; h > y - r + n; h--) delete g[h - 1]
          } else if (n > r)
            for (h = y - r; h > v; h--) f = h + n - 1, (p = h + r - 1) in g ? g[
              f] = g[p] : delete g[f];
          for (h = 0; h < n; h++) g[h + v] = arguments[h + 2];
          return g.length = y - r + n, l
        }
      })
    }, function (e, t, n) {
      e.exports = n(140)
    }, function (e, t, n) {
      var r = n(141);
      e.exports = r
    }, function (e, t, n) {
      n(142);
      var r = n(9);
      e.exports = r.setTimeout
    }, function (e, t, n) {
      var r = n(0),
        a = n(3),
        i = n(44),
        A = [].slice,
        o = function (e) {
          return function (t, n) {
            var r = arguments.length > 2,
              a = r ? A.call(arguments, 2) : void 0;
            return e(r ? function () {
              ("function" == typeof t ? t : Function(t)).apply(this, a)
            } : t, n)
          }
        };
      r({
        global: !0,
        bind: !0,
        forced: /MSIE .\./.test(i)
      }, {
        setTimeout: o(a.setTimeout),
        setInterval: o(a.setInterval)
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(35),
        a = r(n(38)),
        i = r(n(144)),
        A = r(n(171)),
        o = r(n(26)),
        s = r(n(98)),
        u = r(n(178)),
        l = r(n(99)),
        c = function (e, t, n, r) {
          return new(n || (n = a.default))((function (a, i) {
            function A(e) {
              try {
                s(r.next(e))
              } catch (e) {
                i(e)
              }
            }

            function o(e) {
              try {
                s(r.throw(e))
              } catch (e) {
                i(e)
              }
            }

            function s(e) {
              var t;
              e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
                function (e) {
                  e(t)
                }))).then(A, o)
            }
            s((r = r.apply(e, t || [])).next())
          }))
        },
        d = function (e, t) {
          var n, r, a, o, s = {
            label: 0,
            sent: function () {
              if (1 & a[0]) throw a[1];
              return a[1]
            },
            trys: [],
            ops: []
          };
          return o = {
            next: u(0),
            throw: u(1),
            return: u(2)
          }, "function" == typeof i.default && (o[A.default] = function () {
            return this
          }), o;

          function u(i) {
            return function (A) {
              return function (i) {
                if (n) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (n = 1, r && (a = 2 & i[0] ? r.return : i[0] ? r.throw || (
                      (a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(
                      r, i[1])).done) return a;
                  switch (r = 0, a && (i = [2 & i[0], a.value]), i[0]) {
                    case 0:
                    case 1:
                      a = i;
                      break;
                    case 4:
                      return s.label++, {
                        value: i[1],
                        done: !1
                      };
                    case 5:
                      s.label++, r = i[1], i = [0];
                      continue;
                    case 7:
                      i = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!((a = (a = s.trys).length > 0 && a[a.length - 1]) ||
                          6 !== i[0] && 2 !== i[0])) {
                        s = 0;
                        continue
                      }
                      if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) {
                        s.label = i[1];
                        break
                      }
                      if (6 === i[0] && s.label < a[1]) {
                        s.label = a[1], a = i;
                        break
                      }
                      if (a && s.label < a[2]) {
                        s.label = a[2], s.ops.push(i);
                        break
                      }
                      a[2] && s.ops.pop(), s.trys.pop();
                      continue
                  }
                  i = t.call(e, s)
                } catch (e) {
                  i = [6, e], r = 0
                } finally {
                  n = a = 0
                }
                if (5 & i[0]) throw i[1];
                return {
                  value: i[0] ? i[1] : void 0,
                  done: !0
                }
              }([i, A])
            }
          }
        };
      (0, o.default)(t, "__esModule", {
        value: !0
      });
      var h = n(188),
        p = function () {
          function e(e, t) {
            void 0 === t && (t = 86400), this.name = e, this.expire = t, this
              .dbVersion = 2, this.name = e, this.expire = t, this.dbPromise = this
              .initDB()
          }
          return e.prototype.initDB = function () {
            return h.openDB(this.name, this.dbVersion, {
              upgrade: function (e, t, n, r) {
                if (1 === t) try {
                  e.deleteObjectStore("log_detail")
                } catch (e) {}
                e.createObjectStore("log_detail", {
                  keyPath: "id",
                  autoIncrement: !0
                }).createIndex("time", "time")
              }
            })
          }, e.prototype.getLogs = function (e) {
            return c(this, void 0, void 0, (function () {
              var t, n, r, i, A, o, u, l;
              return d(this, (function (c) {
                switch (c.label) {
                  case 0:
                    return t = [], [4, this.dbPromise];
                  case 1:
                    return n = c.sent(), r = h.unwrap(n).transaction(
                      "log_detail", "readonly").objectStore(
                      "log_detail"), i = function (e) {
                      var t = e.end,
                        n = e.start,
                        r = e.type,
                        a = e.level,
                        i = IDBKeyRange.bound(n || 0, t || +new Date),
                        A = function (e) {
                          return !0
                        },
                        o = 0;
                      switch (r && (o += 2), a && (o += 1), o) {
                        case 1:
                          A = function (e) {
                            return e.level === a
                          };
                          break;
                        case 2:
                          A = function (e) {
                            return e.type === r
                          };
                          break;
                        case 3:
                          A = function (e) {
                            return e.type === r && e.level === a
                          }
                      }
                      return {
                        indexName: "time",
                        filter: A,
                        keyRange: i
                      }
                    }(e), A = i.indexName, o = i.keyRange, u = (0, s
                      .default)(i), l = r.index(A).openCursor(o), [2,
                      new a.default((function (e, n) {
                        l.onsuccess = function (n) {
                          var r = n.target.result;
                          r ? (u(r.value) && t.push(r.value), r
                            .continue()) : e(t)
                        }, l.onerror = function (e) {
                          n(e)
                        }
                      }))
                    ]
                }
              }))
            }))
          }, e.prototype.deleteLogs = function (e) {
            return c(this, void 0, void 0, (function () {
              var t, n, r, i, A;
              return d(this, (function (o) {
                switch (o.label) {
                  case 0:
                    return [4, this.dbPromise];
                  case 1:
                    return t = o.sent(), n = h.unwrap(t).transaction(
                        "log_detail", "readwrite").objectStore(
                        "log_detail"), r = e.start, i = e.end, A = n
                      .index("time").openKeyCursor(IDBKeyRange.bound(r,
                        i)), [2, new a.default((function (e, t) {
                        A.onsuccess = function () {
                          var t = A.result;
                          t ? (n.delete(t.primaryKey), t
                            .continue()) : e(null)
                        }, A.onerror = function (e) {
                          t(e)
                        }
                      }))]
                }
              }))
            }))
          }, e.prototype.save = function (e) {
            return c(this, void 0, void 0, (function () {
              var t, n;
              return d(this, (function (r) {
                switch (r.label) {
                  case 0:
                    return [4, this.dbPromise];
                  case 1:
                    return t = r.sent(), n = [], [2, this.deleteLogs({
                      start: 0,
                      end: (0, u.default)() - this.expire
                    }).then((function () {
                      var r = t.transaction("log_detail",
                        "readwrite").objectStore("log_detail");
                      return (0, l.default)(e).call(e, (
                        function (e) {
                          n.push(r.put(e))
                        })), a.default.all(n)
                    }))]
                }
              }))
            }))
          }, e
        }();
      t.default = p
    }, function (e, t, n) {
      e.exports = n(145)
    }, function (e, t, n) {
      var r = n(146);
      n(164), n(165), n(166), n(167), n(168), n(169), n(170), e.exports = r
    }, function (e, t, n) {
      n(94), n(46), n(95), n(148), n(149), n(150), n(151), n(97), n(152), n(153), n(
        154), n(155), n(156), n(157), n(158), n(159), n(160), n(161), n(162), n(163);
      var r = n(9);
      e.exports = r.Symbol
    }, function (e, t, n) {
      var r = n(18),
        a = n(67).f,
        i = {}.toString,
        A = "object" == typeof window && window && Object.getOwnPropertyNames ? Object
        .getOwnPropertyNames(window) : [];
      e.exports.f = function (e) {
        return A && "[object Window]" == i.call(e) ? function (e) {
          try {
            return a(e)
          } catch (e) {
            return A.slice()
          }
        }(e) : a(r(e))
      }
    }, function (e, t, n) {
      n(5)("asyncIterator")
    }, function (e, t) {}, function (e, t, n) {
      n(5)("hasInstance")
    }, function (e, t, n) {
      n(5)("isConcatSpreadable")
    }, function (e, t, n) {
      n(5)("match")
    }, function (e, t, n) {
      n(5)("matchAll")
    }, function (e, t, n) {
      n(5)("replace")
    }, function (e, t, n) {
      n(5)("search")
    }, function (e, t, n) {
      n(5)("species")
    }, function (e, t, n) {
      n(5)("split")
    }, function (e, t, n) {
      n(5)("toPrimitive")
    }, function (e, t, n) {
      n(5)("toStringTag")
    }, function (e, t, n) {
      n(5)("unscopables")
    }, function (e, t, n) {
      var r = n(3);
      n(24)(r.JSON, "JSON", !0)
    }, function (e, t) {}, function (e, t) {}, function (e, t, n) {
      n(5)("asyncDispose")
    }, function (e, t, n) {
      n(5)("dispose")
    }, function (e, t, n) {
      n(5)("matcher")
    }, function (e, t, n) {
      n(5)("metadata")
    }, function (e, t, n) {
      n(5)("observable")
    }, function (e, t, n) {
      n(5)("patternMatch")
    }, function (e, t, n) {
      n(5)("replaceAll")
    }, function (e, t, n) {
      e.exports = n(172)
    }, function (e, t, n) {
      var r = n(173);
      e.exports = r
    }, function (e, t, n) {
      n(97), n(61), n(34);
      var r = n(68);
      e.exports = r.f("iterator")
    }, function (e, t, n) {
      var r = n(175);
      e.exports = r
    }, function (e, t, n) {
      var r = n(176),
        a = Array.prototype;
      e.exports = function (e) {
        var t = e.filter;
        return e === a || e instanceof Array && t === a.filter ? r : t
      }
    }, function (e, t, n) {
      n(177);
      var r = n(21);
      e.exports = r("Array").filter
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(25).filter;
      r({
        target: "Array",
        proto: !0,
        forced: !n(66)("filter")
      }, {
        filter: function (e) {
          return a(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
      })
    }, function (e, t, n) {
      e.exports = n(179)
    }, function (e, t, n) {
      var r = n(180);
      e.exports = r
    }, function (e, t, n) {
      n(181);
      var r = n(9);
      e.exports = r.Date.now
    }, function (e, t, n) {
      n(0)({
        target: "Date",
        stat: !0
      }, {
        now: function () {
          return (new Date).getTime()
        }
      })
    }, function (e, t, n) {
      var r = n(183);
      e.exports = r
    }, function (e, t, n) {
      n(34);
      var r = n(184),
        a = n(45),
        i = Array.prototype,
        A = {
          DOMTokenList: !0,
          NodeList: !0
        };
      e.exports = function (e) {
        var t = e.forEach;
        return e === i || e instanceof Array && t === i.forEach || A.hasOwnProperty(
          a(e)) ? r : t
      }
    }, function (e, t, n) {
      var r = n(185);
      e.exports = r
    }, function (e, t, n) {
      n(186);
      var r = n(21);
      e.exports = r("Array").forEach
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(187);
      r({
        target: "Array",
        proto: !0,
        forced: [].forEach != a
      }, {
        forEach: a
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(25).forEach,
        a = n(69)("forEach");
      e.exports = a ? [].forEach : function (e) {
        return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(189),
        a = n(193),
        i = n(98),
        A = n(196),
        o = n(99),
        s = n(200),
        u = n(205),
        l = n(26),
        c = n(35);
      l(t, "__esModule", {
        value: !0
      }), t.deleteDB = function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
          n = t.blocked,
          r = indexedDB.deleteDatabase(e);
        return n && r.addEventListener("blocked", (function () {
          return n()
        })), (0, y.w)(r).then((function () {}))
      }, t.openDB = function (e, t) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          r = n.blocked,
          a = n.upgrade,
          i = n.blocking,
          A = n.terminated,
          o = indexedDB.open(e, t),
          s = (0, y.w)(o);
        return a && o.addEventListener("upgradeneeded", (function (e) {
          a((0, y.w)(o.result), e.oldVersion, e.newVersion, (0, y.w)(o
            .transaction))
        })), r && o.addEventListener("blocked", (function () {
          return r()
        })), s.then((function (e) {
          A && e.addEventListener("close", (function () {
            return A()
          })), i && e.addEventListener("versionchange", (function () {
            return i()
          }))
        })).catch((function () {})), s
      }, l(t, "unwrap", {
        enumerable: !0,
        get: function () {
          return y.u
        }
      }), l(t, "wrap", {
        enumerable: !0,
        get: function () {
          return y.w
        }
      });
      var d = c(n(209)),
        h = c(n(211)),
        p = c(n(212)),
        f = c(n(213)),
        g = c(n(105)),
        y = n(250);

      function v(e, t) {
        var n = r(e);
        if (a) {
          var o = a(e);
          t && (o = i(o).call(o, (function (t) {
            return A(e, t).enumerable
          }))), n.push.apply(n, o)
        }
        return n
      }

      function m(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n, r = null != arguments[t] ? arguments[t] : {};
          if (t % 2) o(n = v(Object(r), !0)).call(n, (function (t) {
            (0, h.default)(e, t, r[t])
          }));
          else if (s) u(e, s(r));
          else {
            var a;
            o(a = v(Object(r))).call(a, (function (t) {
              l(e, t, A(r, t))
            }))
          }
        }
        return e
      }
      var w = ["get", "getKey", "getAll", "getAllKeys", "count"],
        B = ["put", "add", "delete", "clear"],
        M = new f.default;

      function C(e, t) {
        if (e instanceof IDBDatabase && !(t in e) && "string" == typeof t) {
          if (M.get(t)) return M.get(t);
          var n = t.replace(/FromIndex$/, ""),
            r = t !== n,
            a = (0, g.default)(B).call(B, n);
          if (n in (r ? IDBIndex : IDBObjectStore).prototype && (a || (0, g.default)(
              w).call(w, n))) {
            var i = function () {
              var e = (0, p.default)(d.default.mark((function e(t) {
                var i, A, o, s, u, l, c, h = arguments;
                return d.default.wrap((function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      for (A = this.transaction(t, a ? "readwrite" :
                          "readonly"), o = A.store, s = h.length,
                        u = new Array(s > 1 ? s - 1 : 0), l = 1; l <
                        s; l++) u[l - 1] = h[l];
                      return r && (o = o.index(u.shift())), e.next =
                        6, (i = o)[n].apply(i, u);
                    case 6:
                      if (c = e.sent, !a) {
                        e.next = 10;
                        break
                      }
                      return e.next = 10, A.done;
                    case 10:
                      return e.abrupt("return", c);
                    case 11:
                    case "end":
                      return e.stop()
                  }
                }), e, this)
              })));
              return function (t) {
                return e.apply(this, arguments)
              }
            }();
            return M.set(t, i), i
          }
        }
      }(0, y.r)((function (e) {
        return m(m({}, e), {}, {
          get: function (t, n, r) {
            return C(t, n) || e.get(t, n, r)
          },
          has: function (t, n) {
            return !!C(t, n) || e.has(t, n)
          }
        })
      }))
    }, function (e, t, n) {
      e.exports = n(190)
    }, function (e, t, n) {
      var r = n(191);
      e.exports = r
    }, function (e, t, n) {
      n(192);
      var r = n(9);
      e.exports = r.Object.keys
    }, function (e, t, n) {
      var r = n(0),
        a = n(19),
        i = n(56);
      r({
        target: "Object",
        stat: !0,
        forced: n(7)((function () {
          i(1)
        }))
      }, {
        keys: function (e) {
          return i(a(e))
        }
      })
    }, function (e, t, n) {
      e.exports = n(194)
    }, function (e, t, n) {
      var r = n(195);
      e.exports = r
    }, function (e, t, n) {
      n(95);
      var r = n(9);
      e.exports = r.Object.getOwnPropertySymbols
    }, function (e, t, n) {
      e.exports = n(197)
    }, function (e, t, n) {
      var r = n(198);
      e.exports = r
    }, function (e, t, n) {
      n(199);
      var r = n(9).Object,
        a = e.exports = function (e, t) {
          return r.getOwnPropertyDescriptor(e, t)
        };
      r.getOwnPropertyDescriptor.sham && (a.sham = !0)
    }, function (e, t, n) {
      var r = n(0),
        a = n(7),
        i = n(18),
        A = n(27).f,
        o = n(11),
        s = a((function () {
          A(1)
        }));
      r({
        target: "Object",
        stat: !0,
        forced: !o || s,
        sham: !o
      }, {
        getOwnPropertyDescriptor: function (e, t) {
          return A(i(e), t)
        }
      })
    }, function (e, t, n) {
      e.exports = n(201)
    }, function (e, t, n) {
      var r = n(202);
      e.exports = r
    }, function (e, t, n) {
      n(203);
      var r = n(9);
      e.exports = r.Object.getOwnPropertyDescriptors
    }, function (e, t, n) {
      var r = n(0),
        a = n(11),
        i = n(204),
        A = n(18),
        o = n(27),
        s = n(65);
      r({
        target: "Object",
        stat: !0,
        sham: !a
      }, {
        getOwnPropertyDescriptors: function (e) {
          for (var t, n, r = A(e), a = o.f, u = i(r), l = {}, c = 0; u.length >
            c;) void 0 !== (n = a(r, t = u[c++])) && s(l, t, n);
          return l
        }
      })
    }, function (e, t, n) {
      var r = n(16),
        a = n(67),
        i = n(96),
        A = n(1);
      e.exports = r("Reflect", "ownKeys") || function (e) {
        var t = a.f(A(e)),
          n = i.f;
        return n ? t.concat(n(e)) : t
      }
    }, function (e, t, n) {
      e.exports = n(206)
    }, function (e, t, n) {
      var r = n(207);
      e.exports = r
    }, function (e, t, n) {
      n(208);
      var r = n(9).Object,
        a = e.exports = function (e, t) {
          return r.defineProperties(e, t)
        };
      r.defineProperties.sham && (a.sham = !0)
    }, function (e, t, n) {
      var r = n(0),
        a = n(11);
      r({
        target: "Object",
        stat: !0,
        forced: !a,
        sham: !a
      }, {
        defineProperties: n(76)
      })
    }, function (e, t, n) {
      e.exports = n(210)
    }, function (e, t, n) {
      var r = function (e) {
        "use strict";
        var t = Object.prototype,
          n = t.hasOwnProperty,
          r = "function" == typeof Symbol ? Symbol : {},
          a = r.iterator || "@@iterator",
          i = r.asyncIterator || "@@asyncIterator",
          A = r.toStringTag || "@@toStringTag";

        function o(e, t, n) {
          return Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
          }), e[t]
        }
        try {
          o({}, "")
        } catch (e) {
          o = function (e, t, n) {
            return e[t] = n
          }
        }

        function s(e, t, n, r) {
          var a = t && t.prototype instanceof c ? t : c,
            i = Object.create(a.prototype),
            A = new C(r || []);
          return i._invoke = function (e, t, n) {
            var r = "suspendedStart";
            return function (a, i) {
              if ("executing" === r) throw new Error(
                "Generator is already running");
              if ("completed" === r) {
                if ("throw" === a) throw i;
                return {
                  value: void 0,
                  done: !0
                }
              }
              for (n.method = a, n.arg = i;;) {
                var A = n.delegate;
                if (A) {
                  var o = w(A, n);
                  if (o) {
                    if (o === l) continue;
                    return o
                  }
                }
                if ("next" === n.method) n.sent = n._sent = n.arg;
                else if ("throw" === n.method) {
                  if ("suspendedStart" === r) throw r = "completed", n.arg;
                  n.dispatchException(n.arg)
                } else "return" === n.method && n.abrupt("return", n.arg);
                r = "executing";
                var s = u(e, t, n);
                if ("normal" === s.type) {
                  if (r = n.done ? "completed" : "suspendedYield", s.arg === l)
                    continue;
                  return {
                    value: s.arg,
                    done: n.done
                  }
                }
                "throw" === s.type && (r = "completed", n.method = "throw", n
                  .arg = s.arg)
              }
            }
          }(e, n, A), i
        }

        function u(e, t, n) {
          try {
            return {
              type: "normal",
              arg: e.call(t, n)
            }
          } catch (e) {
            return {
              type: "throw",
              arg: e
            }
          }
        }
        e.wrap = s;
        var l = {};

        function c() {}

        function d() {}

        function h() {}
        var p = {};
        p[a] = function () {
          return this
        };
        var f = Object.getPrototypeOf,
          g = f && f(f(I([])));
        g && g !== t && n.call(g, a) && (p = g);
        var y = h.prototype = c.prototype = Object.create(p);

        function v(e) {
          ["next", "throw", "return"].forEach((function (t) {
            o(e, t, (function (e) {
              return this._invoke(t, e)
            }))
          }))
        }

        function m(e, t) {
          var r;
          this._invoke = function (a, i) {
            function A() {
              return new t((function (r, A) {
                ! function r(a, i, A, o) {
                  var s = u(e[a], e, i);
                  if ("throw" !== s.type) {
                    var l = s.arg,
                      c = l.value;
                    return c && "object" == typeof c && n.call(c,
                      "__await") ? t.resolve(c.__await).then((function (e) {
                        r("next", e, A, o)
                      }), (function (e) {
                        r("throw", e, A, o)
                      })) : t.resolve(c).then((function (e) {
                        l.value = e, A(l)
                      }), (function (e) {
                        return r("throw", e, A, o)
                      }))
                  }
                  o(s.arg)
                }(a, i, r, A)
              }))
            }
            return r = r ? r.then(A, A) : A()
          }
        }

        function w(e, t) {
          var n = e.iterator[t.method];
          if (void 0 === n) {
            if (t.delegate = null, "throw" === t.method) {
              if (e.iterator.return && (t.method = "return", t.arg = void 0, w(e,
                  t), "throw" === t.method)) return l;
              t.method = "throw", t.arg = new TypeError(
                "The iterator does not provide a 'throw' method")
            }
            return l
          }
          var r = u(n, e.iterator, t.arg);
          if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t
            .delegate = null, l;
          var a = r.arg;
          return a ? a.done ? (t[e.resultName] = a.value, t.next = e.nextLoc,
            "return" !== t.method && (t.method = "next", t.arg = void 0), t
            .delegate = null, l) : a : (t.method = "throw", t.arg = new TypeError(
            "iterator result is not an object"), t.delegate = null, l)
        }

        function B(e) {
          var t = {
            tryLoc: e[0]
          };
          1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t
            .afterLoc = e[3]), this.tryEntries.push(t)
        }

        function M(e) {
          var t = e.completion || {};
          t.type = "normal", delete t.arg, e.completion = t
        }

        function C(e) {
          this.tryEntries = [{
            tryLoc: "root"
          }], e.forEach(B, this), this.reset(!0)
        }

        function I(e) {
          if (e) {
            var t = e[a];
            if (t) return t.call(e);
            if ("function" == typeof e.next) return e;
            if (!isNaN(e.length)) {
              var r = -1,
                i = function t() {
                  for (; ++r < e.length;)
                    if (n.call(e, r)) return t.value = e[r], t.done = !1, t;
                  return t.value = void 0, t.done = !0, t
                };
              return i.next = i
            }
          }
          return {
            next: x
          }
        }

        function x() {
          return {
            value: void 0,
            done: !0
          }
        }
        return d.prototype = y.constructor = h, h.constructor = d, d.displayName =
          o(h, A, "GeneratorFunction"), e.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return !!t && (t === d || "GeneratorFunction" === (t.displayName || t
              .name))
          }, e.mark = function (e) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e
                .__proto__ = h, o(e, A, "GeneratorFunction")), e.prototype = Object
              .create(y), e
          }, e.awrap = function (e) {
            return {
              __await: e
            }
          }, v(m.prototype), m.prototype[i] = function () {
            return this
          }, e.AsyncIterator = m, e.async = function (t, n, r, a, i) {
            void 0 === i && (i = Promise);
            var A = new m(s(t, n, r, a), i);
            return e.isGeneratorFunction(n) ? A : A.next().then((function (e) {
              return e.done ? e.value : A.next()
            }))
          }, v(y), o(y, A, "Generator"), y[a] = function () {
            return this
          }, y.toString = function () {
            return "[object Generator]"
          }, e.keys = function (e) {
            var t = [];
            for (var n in e) t.push(n);
            return t.reverse(),
              function n() {
                for (; t.length;) {
                  var r = t.pop();
                  if (r in e) return n.value = r, n.done = !1, n
                }
                return n.done = !0, n
              }
          }, e.values = I, C.prototype = {
            constructor: C,
            reset: function (e) {
              if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0,
                this.done = !1, this.delegate = null, this.method = "next", this
                .arg = void 0, this.tryEntries.forEach(M), !e)
                for (var t in this) "t" === t.charAt(0) && n.call(this, t) && !
                  isNaN(+t.slice(1)) && (this[t] = void 0)
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0].completion;
              if ("throw" === e.type) throw e.arg;
              return this.rval
            },
            dispatchException: function (e) {
              if (this.done) throw e;
              var t = this;

              function r(n, r) {
                return A.type = "throw", A.arg = e, t.next = n, r && (t.method =
                  "next", t.arg = void 0), !!r
              }
              for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                var i = this.tryEntries[a],
                  A = i.completion;
                if ("root" === i.tryLoc) return r("end");
                if (i.tryLoc <= this.prev) {
                  var o = n.call(i, "catchLoc"),
                    s = n.call(i, "finallyLoc");
                  if (o && s) {
                    if (this.prev < i.catchLoc) return r(i.catchLoc, !0);
                    if (this.prev < i.finallyLoc) return r(i.finallyLoc)
                  } else if (o) {
                    if (this.prev < i.catchLoc) return r(i.catchLoc, !0)
                  } else {
                    if (!s) throw new Error(
                      "try statement without catch or finally");
                    if (this.prev < i.finallyLoc) return r(i.finallyLoc)
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                var a = this.tryEntries[r];
                if (a.tryLoc <= this.prev && n.call(a, "finallyLoc") && this
                  .prev < a.finallyLoc) {
                  var i = a;
                  break
                }
              }
              i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i
                .finallyLoc && (i = null);
              var A = i ? i.completion : {};
              return A.type = e, A.arg = t, i ? (this.method = "next", this.next =
                i.finallyLoc, l) : this.complete(A)
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return "break" === e.type || "continue" === e.type ? this.next = e
                .arg : "return" === e.type ? (this.rval = this.arg = e.arg, this
                  .method = "return", this.next = "end") : "normal" === e.type &&
                t && (this.next = t), l
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e) return this.complete(n.completion, n
                  .afterLoc), M(n), l
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.tryLoc === e) {
                  var r = n.completion;
                  if ("throw" === r.type) {
                    var a = r.arg;
                    M(n)
                  }
                  return a
                }
              }
              throw new Error("illegal catch attempt")
            },
            delegateYield: function (e, t, n) {
              return this.delegate = {
                iterator: I(e),
                resultName: t,
                nextLoc: n
              }, "next" === this.method && (this.arg = void 0), l
            }
          }, e
      }(e.exports);
      try {
        regeneratorRuntime = r
      } catch (e) {
        Function("r", "regeneratorRuntime = r")(r)
      }
    }, function (e, t, n) {
      var r = n(26);
      e.exports = function (e, t, n) {
        return t in e ? r(e, t, {
          value: n,
          enumerable: !0,
          configurable: !0,
          writable: !0
        }) : e[t] = n, e
      }, e.exports.default = e.exports, e.exports.__esModule = !0
    }, function (e, t, n) {
      var r = n(38);

      function a(e, t, n, a, i, A, o) {
        try {
          var s = e[A](o),
            u = s.value
        } catch (e) {
          return void n(e)
        }
        s.done ? t(u) : r.resolve(u).then(a, i)
      }
      e.exports = function (e) {
        return function () {
          var t = this,
            n = arguments;
          return new r((function (r, i) {
            var A = e.apply(t, n);

            function o(e) {
              a(A, r, i, o, s, "next", e)
            }

            function s(e) {
              a(A, r, i, o, s, "throw", e)
            }
            o(void 0)
          }))
        }
      }, e.exports.default = e.exports, e.exports.__esModule = !0
    }, function (e, t, n) {
      e.exports = n(214)
    }, function (e, t, n) {
      var r = n(215);
      n(219), n(220), n(221), n(222), n(223), n(225), n(226), n(227), n(228), n(229),
        n(231), n(232), n(233), n(234), n(235), n(236), n(237), n(238), n(239), n(
        240), e.exports = r
    }, function (e, t, n) {
      n(216), n(46), n(61), n(34);
      var r = n(9);
      e.exports = r.Map
    }, function (e, t, n) {
      "use strict";
      var r = n(100),
        a = n(218);
      e.exports = r("Map", (function (e) {
        return function () {
          return e(this, arguments.length ? arguments[0] : void 0)
        }
      }), a)
    }, function (e, t, n) {
      var r = n(7);
      e.exports = !r((function () {
        return Object.isExtensible(Object.preventExtensions({}))
      }))
    }, function (e, t, n) {
      "use strict";
      var r = n(15).f,
        a = n(41),
        i = n(47),
        A = n(12),
        o = n(48),
        s = n(4),
        u = n(62),
        l = n(84),
        c = n(11),
        d = n(50).fastKey,
        h = n(20),
        p = h.set,
        f = h.getterFor;
      e.exports = {
        getConstructor: function (e, t, n, u) {
          var l = e((function (e, r) {
              o(e, l, t), p(e, {
                type: t,
                index: a(null),
                first: void 0,
                last: void 0,
                size: 0
              }), c || (e.size = 0), null != r && s(r, e[u], {
                that: e,
                AS_ENTRIES: n
              })
            })),
            h = f(t),
            g = function (e, t, n) {
              var r, a, i = h(e),
                A = y(e, t);
              return A ? A.value = n : (i.last = A = {
                  index: a = d(t, !0),
                  key: t,
                  value: n,
                  previous: r = i.last,
                  next: void 0,
                  removed: !1
                }, i.first || (i.first = A), r && (r.next = A), c ? i.size++ : e
                .size++, "F" !== a && (i.index[a] = A)), e
            },
            y = function (e, t) {
              var n, r = h(e),
                a = d(t);
              if ("F" !== a) return r.index[a];
              for (n = r.first; n; n = n.next)
                if (n.key == t) return n
            };
          return i(l.prototype, {
            clear: function () {
              for (var e = h(this), t = e.index, n = e.first; n;) n
                .removed = !0, n.previous && (n.previous = n.previous.next =
                  void 0), delete t[n.index], n = n.next;
              e.first = e.last = void 0, c ? e.size = 0 : this.size = 0
            },
            delete: function (e) {
              var t = h(this),
                n = y(this, e);
              if (n) {
                var r = n.next,
                  a = n.previous;
                delete t.index[n.index], n.removed = !0, a && (a.next = r),
                  r && (r.previous = a), t.first == n && (t.first = r), t
                  .last == n && (t.last = a), c ? t.size-- : this.size--
              }
              return !!n
            },
            forEach: function (e) {
              for (var t, n = h(this), r = A(e, arguments.length > 1 ?
                  arguments[1] : void 0, 3); t = t ? t.next : n.first;)
                for (r(t.value, t.key, this); t && t.removed;) t = t
                  .previous
            },
            has: function (e) {
              return !!y(this, e)
            }
          }), i(l.prototype, n ? {
            get: function (e) {
              var t = y(this, e);
              return t && t.value
            },
            set: function (e, t) {
              return g(this, 0 === e ? 0 : e, t)
            }
          } : {
            add: function (e) {
              return g(this, e = 0 === e ? 0 : e, e)
            }
          }), c && r(l.prototype, "size", {
            get: function () {
              return h(this).size
            }
          }), l
        },
        setStrong: function (e, t, n) {
          var r = t + " Iterator",
            a = f(t),
            i = f(r);
          u(e, t, (function (e, t) {
            p(this, {
              type: r,
              target: e,
              state: a(e),
              kind: t,
              last: void 0
            })
          }), (function () {
            for (var e = i(this), t = e.kind, n = e.last; n && n.removed;)
              n = n.previous;
            return e.target && (e.last = n = n ? n.next : e.state.first) ?
              "keys" == t ? {
                value: n.key,
                done: !1
              } : "values" == t ? {
                value: n.value,
                done: !1
              } : {
                value: [n.key, n.value],
                done: !1
              } : (e.target = void 0, {
                value: void 0,
                done: !0
              })
          }), n ? "entries" : "values", !n, !0), l(t)
        }
      }
    }, function (e, t, n) {
      n(0)({
        target: "Map",
        stat: !0
      }, {
        from: n(101)
      })
    }, function (e, t, n) {
      n(0)({
        target: "Map",
        stat: !0
      }, {
        of: n(102)
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(103);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        deleteAll: function () {
          return i.apply(this, arguments)
        }
      })
    }, function (e, t, n) {
      "use strict";
      n(0)({
        target: "Map",
        proto: !0,
        real: !0,
        forced: n(2)
      }, {
        emplace: n(104)
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(12),
        o = n(17),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        every: function (e) {
          var t = i(this),
            n = o(t),
            r = A(e, arguments.length > 1 ? arguments[1] : void 0, 3);
          return !s(n, (function (e, n, a) {
            if (!r(n, e, t)) return a()
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).stopped
        }
      })
    }, function (e, t, n) {
      var r = n(1),
        a = n(82);
      e.exports = function (e) {
        var t = a(e);
        if ("function" != typeof t) throw TypeError(String(e) + " is not iterable");
        return r(t.call(e))
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(16),
        A = n(1),
        o = n(8),
        s = n(12),
        u = n(32),
        l = n(17),
        c = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        filter: function (e) {
          var t = A(this),
            n = l(t),
            r = s(e, arguments.length > 1 ? arguments[1] : void 0, 3),
            a = new(u(t, i("Map"))),
            d = o(a.set);
          return c(n, (function (e, n) {
            r(n, e, t) && d.call(a, e, n)
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0
          }), a
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(12),
        o = n(17),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        find: function (e) {
          var t = i(this),
            n = o(t),
            r = A(e, arguments.length > 1 ? arguments[1] : void 0, 3);
          return s(n, (function (e, n, a) {
            if (r(n, e, t)) return a(n)
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).result
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(12),
        o = n(17),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        findKey: function (e) {
          var t = i(this),
            n = o(t),
            r = A(e, arguments.length > 1 ? arguments[1] : void 0, 3);
          return s(n, (function (e, n, a) {
            if (r(n, e, t)) return a(e)
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).result
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(4),
        i = n(8);
      r({
        target: "Map",
        stat: !0
      }, {
        groupBy: function (e, t) {
          var n = new this;
          i(t);
          var r = i(n.has),
            A = i(n.get),
            o = i(n.set);
          return a(e, (function (e) {
            var a = t(e);
            r.call(n, a) ? A.call(n, a).push(e) : o.call(n, a, [e])
          })), n
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(17),
        o = n(230),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        includes: function (e) {
          return s(A(i(this)), (function (t, n, r) {
            if (o(n, e)) return r()
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).stopped
        }
      })
    }, function (e, t) {
      e.exports = function (e, t) {
        return e === t || e != e && t != t
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(4),
        i = n(8);
      r({
        target: "Map",
        stat: !0
      }, {
        keyBy: function (e, t) {
          var n = new this;
          i(t);
          var r = i(n.set);
          return a(e, (function (e) {
            r.call(n, t(e), e)
          })), n
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(17),
        o = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        keyOf: function (e) {
          return o(A(i(this)), (function (t, n, r) {
            if (n === e) return r(t)
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).result
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(16),
        A = n(1),
        o = n(8),
        s = n(12),
        u = n(32),
        l = n(17),
        c = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        mapKeys: function (e) {
          var t = A(this),
            n = l(t),
            r = s(e, arguments.length > 1 ? arguments[1] : void 0, 3),
            a = new(u(t, i("Map"))),
            d = o(a.set);
          return c(n, (function (e, n) {
            d.call(a, r(n, e, t), n)
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0
          }), a
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(16),
        A = n(1),
        o = n(8),
        s = n(12),
        u = n(32),
        l = n(17),
        c = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        mapValues: function (e) {
          var t = A(this),
            n = l(t),
            r = s(e, arguments.length > 1 ? arguments[1] : void 0, 3),
            a = new(u(t, i("Map"))),
            d = o(a.set);
          return c(n, (function (e, n) {
            d.call(a, e, r(n, e, t))
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0
          }), a
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(8),
        o = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        merge: function (e) {
          for (var t = i(this), n = A(t.set), r = 0; r < arguments.length;) o(
            arguments[r++], n, {
              that: t,
              AS_ENTRIES: !0
            });
          return t
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(8),
        o = n(17),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        reduce: function (e) {
          var t = i(this),
            n = o(t),
            r = arguments.length < 2,
            a = r ? void 0 : arguments[1];
          if (A(e), s(n, (function (n, i) {
              r ? (r = !1, a = i) : a = e(a, i, n, t)
            }), {
              AS_ENTRIES: !0,
              IS_ITERATOR: !0
            }), r) throw TypeError("Reduce of empty map with no initial value");
          return a
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(12),
        o = n(17),
        s = n(4);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        some: function (e) {
          var t = i(this),
            n = o(t),
            r = A(e, arguments.length > 1 ? arguments[1] : void 0, 3);
          return s(n, (function (e, n, a) {
            if (r(n, e, t)) return a()
          }), {
            AS_ENTRIES: !0,
            IS_ITERATOR: !0,
            INTERRUPTED: !0
          }).stopped
        }
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(1),
        A = n(8);
      r({
        target: "Map",
        proto: !0,
        real: !0,
        forced: a
      }, {
        update: function (e, t) {
          var n = i(this),
            r = arguments.length;
          A(t);
          var a = n.has(e);
          if (!a && r < 3) throw TypeError("Updating absent value");
          var o = a ? n.get(e) : A(r > 2 ? arguments[2] : void 0)(e, n);
          return n.set(e, t(o, e, n)), n
        }
      })
    }, function (e, t, n) {
      "use strict";
      n(0)({
        target: "Map",
        proto: !0,
        real: !0,
        forced: n(2)
      }, {
        upsert: n(70)
      })
    }, function (e, t, n) {
      "use strict";
      n(0)({
        target: "Map",
        proto: !0,
        real: !0,
        forced: n(2)
      }, {
        updateOrInsert: n(70)
      })
    }, function (e, t, n) {
      var r = n(242);
      e.exports = r
    }, function (e, t, n) {
      var r = n(243),
        a = n(245),
        i = Array.prototype,
        A = String.prototype;
      e.exports = function (e) {
        var t = e.includes;
        return e === i || e instanceof Array && t === i.includes ? r : "string" ==
          typeof e || e === A || e instanceof String && t === A.includes ? a : t
      }
    }, function (e, t, n) {
      n(244);
      var r = n(21);
      e.exports = r("Array").includes
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(78).includes,
        i = n(93);
      r({
        target: "Array",
        proto: !0
      }, {
        includes: function (e) {
          return a(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
      }), i("includes")
    }, function (e, t, n) {
      n(246);
      var r = n(21);
      e.exports = r("String").includes
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(247),
        i = n(36);
      r({
        target: "String",
        proto: !0,
        forced: !n(249)("includes")
      }, {
        includes: function (e) {
          return !!~String(i(this)).indexOf(a(e), arguments.length > 1 ?
            arguments[1] : void 0)
        }
      })
    }, function (e, t, n) {
      var r = n(248);
      e.exports = function (e) {
        if (r(e)) throw TypeError("The method doesn't accept regular expressions");
        return e
      }
    }, function (e, t, n) {
      var r = n(10),
        a = n(28),
        i = n(6)("match");
      e.exports = function (e) {
        var t;
        return r(e) && (void 0 !== (t = e[i]) ? !!t : "RegExp" == a(e))
      }
    }, function (e, t, n) {
      var r = n(6)("match");
      e.exports = function (e) {
        var t = /./;
        try {
          "/./" [e](t)
        } catch (n) {
          try {
            return t[r] = !1, "/./" [e](t)
          } catch (e) {}
        }
        return !1
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(26),
        a = n(35);
      r(t, "__esModule", {
        value: !0
      }), t.r = function (e) {
        m = e(m)
      }, t.w = B, t.u = t.i = t.a = void 0;
      var i, A, o = a(n(251)),
        s = a(n(256)),
        u = a(n(38)),
        l = a(n(266)),
        c = a(n(270)),
        d = a(n(105)),
        h = function (e, t) {
          return (0, o.default)(t).call(t, (function (t) {
            return e instanceof t
          }))
        };
      t.i = h;
      var p = new s.default,
        f = new s.default,
        g = new s.default,
        y = new s.default,
        v = new s.default;
      t.a = v;
      var m = {
        get: function (e, t, n) {
          if (e instanceof IDBTransaction) {
            if ("done" === t) return f.get(e);
            if ("objectStoreNames" === t) return e.objectStoreNames || g.get(e);
            if ("store" === t) return n.objectStoreNames[1] ? void 0 : n
              .objectStore(n.objectStoreNames[0])
          }
          return B(e[t])
        },
        set: function (e, t, n) {
          return e[t] = n, !0
        },
        has: function (e, t) {
          return e instanceof IDBTransaction && ("done" === t || "store" === t) ||
            t in e
        }
      };

      function w(e) {
        return "function" == typeof e ? function (e) {
          var t;
          return e !== IDBDatabase.prototype.transaction || "objectStoreNames" in
            IDBTransaction.prototype ? (0, d.default)(t = A || (A = [IDBCursor
              .prototype.advance, IDBCursor.prototype.continue, IDBCursor
              .prototype.continuePrimaryKey
            ])).call(t, e) ? function () {
              for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[
                r] = arguments[r];
              return e.apply(M(this), n), B(p.get(this))
            } : function () {
              for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[
                r] = arguments[r];
              return B(e.apply(M(this), n))
            } : function (t) {
              for (var n, r = arguments.length, a = new Array(r > 1 ? r - 1 : 0),
                  i = 1; i < r; i++) a[i - 1] = arguments[i];
              var A = e.call.apply(e, (0, l.default)(n = [M(this), t]).call(n, a));
              return g.set(A, (0, c.default)(t) ? (0, c.default)(t).call(t) : [t]),
                B(A)
            }
        }(e) : (e instanceof IDBTransaction && function (e) {
          if (!f.has(e)) {
            var t = new u.default((function (t, n) {
              var r = function () {
                  e.removeEventListener("complete", a), e
                    .removeEventListener("error", i), e.removeEventListener(
                      "abort", i)
                },
                a = function () {
                  t(), r()
                },
                i = function () {
                  n(e.error || new DOMException("AbortError",
                    "AbortError")), r()
                };
              e.addEventListener("complete", a), e.addEventListener("error",
                i), e.addEventListener("abort", i)
            }));
            f.set(e, t)
          }
        }(e), h(e, i || (i = [IDBDatabase, IDBObjectStore, IDBIndex, IDBCursor,
          IDBTransaction
        ])) ? new Proxy(e, m) : e)
      }

      function B(e) {
        if (e instanceof IDBRequest) return t = e, (n = new u.default((function (e,
        n) {
          var r = function () {
              t.removeEventListener("success", a), t.removeEventListener(
                "error", i)
            },
            a = function () {
              e(B(t.result)), r()
            },
            i = function () {
              n(t.error), r()
            };
          t.addEventListener("success", a), t.addEventListener("error", i)
        }))).then((function (e) {
          e instanceof IDBCursor && p.set(e, t)
        })).catch((function () {})), v.set(n, t), n;
        var t, n;
        if (y.has(e)) return y.get(e);
        var r = w(e);
        return r !== e && (y.set(e, r), v.set(r, e)), r
      }
      var M = function (e) {
        return v.get(e)
      };
      t.u = M
    }, function (e, t, n) {
      e.exports = n(252)
    }, function (e, t, n) {
      var r = n(253);
      e.exports = r
    }, function (e, t, n) {
      var r = n(254),
        a = Array.prototype;
      e.exports = function (e) {
        var t = e.some;
        return e === a || e instanceof Array && t === a.some ? r : t
      }
    }, function (e, t, n) {
      n(255);
      var r = n(21);
      e.exports = r("Array").some
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(25).some;
      r({
        target: "Array",
        proto: !0,
        forced: !n(69)("some")
      }, {
        some: function (e) {
          return a(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
      })
    }, function (e, t, n) {
      e.exports = n(257)
    }, function (e, t, n) {
      var r = n(258);
      n(261), n(262), n(263), n(264), n(265), e.exports = r
    }, function (e, t, n) {
      n(46), n(259), n(34);
      var r = n(9);
      e.exports = r.WeakMap
    }, function (e, t, n) {
      "use strict";
      var r, a = n(3),
        i = n(47),
        A = n(50),
        o = n(100),
        s = n(260),
        u = n(10),
        l = n(20).enforce,
        c = n(89),
        d = !a.ActiveXObject && "ActiveXObject" in a,
        h = Object.isExtensible,
        p = function (e) {
          return function () {
            return e(this, arguments.length ? arguments[0] : void 0)
          }
        },
        f = e.exports = o("WeakMap", p, s);
      if (c && d) {
        r = s.getConstructor(p, "WeakMap", !0), A.REQUIRED = !0;
        var g = f.prototype,
          y = g.delete,
          v = g.has,
          m = g.get,
          w = g.set;
        i(g, {
          delete: function (e) {
            if (u(e) && !h(e)) {
              var t = l(this);
              return t.frozen || (t.frozen = new r), y.call(this, e) || t.frozen
                .delete(e)
            }
            return y.call(this, e)
          },
          has: function (e) {
            if (u(e) && !h(e)) {
              var t = l(this);
              return t.frozen || (t.frozen = new r), v.call(this, e) || t.frozen
                .has(e)
            }
            return v.call(this, e)
          },
          get: function (e) {
            if (u(e) && !h(e)) {
              var t = l(this);
              return t.frozen || (t.frozen = new r), v.call(this, e) ? m.call(
                this, e) : t.frozen.get(e)
            }
            return m.call(this, e)
          },
          set: function (e, t) {
            if (u(e) && !h(e)) {
              var n = l(this);
              n.frozen || (n.frozen = new r), v.call(this, e) ? w.call(this, e,
                t) : n.frozen.set(e, t)
            } else w.call(this, e, t);
            return this
          }
        })
      }
    }, function (e, t, n) {
      "use strict";
      var r = n(47),
        a = n(50).getWeakData,
        i = n(1),
        A = n(10),
        o = n(48),
        s = n(4),
        u = n(25),
        l = n(13),
        c = n(20),
        d = c.set,
        h = c.getterFor,
        p = u.find,
        f = u.findIndex,
        g = 0,
        y = function (e) {
          return e.frozen || (e.frozen = new v)
        },
        v = function () {
          this.entries = []
        },
        m = function (e, t) {
          return p(e.entries, (function (e) {
            return e[0] === t
          }))
        };
      v.prototype = {
        get: function (e) {
          var t = m(this, e);
          if (t) return t[1]
        },
        has: function (e) {
          return !!m(this, e)
        },
        set: function (e, t) {
          var n = m(this, e);
          n ? n[1] = t : this.entries.push([e, t])
        },
        delete: function (e) {
          var t = f(this.entries, (function (t) {
            return t[0] === e
          }));
          return ~t && this.entries.splice(t, 1), !!~t
        }
      }, e.exports = {
        getConstructor: function (e, t, n, u) {
          var c = e((function (e, r) {
              o(e, c, t), d(e, {
                type: t,
                id: g++,
                frozen: void 0
              }), null != r && s(r, e[u], {
                that: e,
                AS_ENTRIES: n
              })
            })),
            p = h(t),
            f = function (e, t, n) {
              var r = p(e),
                A = a(i(t), !0);
              return !0 === A ? y(r).set(t, n) : A[r.id] = n, e
            };
          return r(c.prototype, {
            delete: function (e) {
              var t = p(this);
              if (!A(e)) return !1;
              var n = a(e);
              return !0 === n ? y(t).delete(e) : n && l(n, t.id) &&
                delete n[t.id]
            },
            has: function (e) {
              var t = p(this);
              if (!A(e)) return !1;
              var n = a(e);
              return !0 === n ? y(t).has(e) : n && l(n, t.id)
            }
          }), r(c.prototype, n ? {
            get: function (e) {
              var t = p(this);
              if (A(e)) {
                var n = a(e);
                return !0 === n ? y(t).get(e) : n ? n[t.id] : void 0
              }
            },
            set: function (e, t) {
              return f(this, e, t)
            }
          } : {
            add: function (e) {
              return f(this, e, !0)
            }
          }), c
        }
      }
    }, function (e, t, n) {
      "use strict";
      n(0)({
        target: "WeakMap",
        proto: !0,
        real: !0,
        forced: n(2)
      }, {
        emplace: n(104)
      })
    }, function (e, t, n) {
      n(0)({
        target: "WeakMap",
        stat: !0
      }, {
        from: n(101)
      })
    }, function (e, t, n) {
      n(0)({
        target: "WeakMap",
        stat: !0
      }, {
        of: n(102)
      })
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(2),
        i = n(103);
      r({
        target: "WeakMap",
        proto: !0,
        real: !0,
        forced: a
      }, {
        deleteAll: function () {
          return i.apply(this, arguments)
        }
      })
    }, function (e, t, n) {
      "use strict";
      n(0)({
        target: "WeakMap",
        proto: !0,
        real: !0,
        forced: n(2)
      }, {
        upsert: n(70)
      })
    }, function (e, t, n) {
      e.exports = n(267)
    }, function (e, t, n) {
      var r = n(268);
      e.exports = r
    }, function (e, t, n) {
      var r = n(269),
        a = Array.prototype;
      e.exports = function (e) {
        var t = e.concat;
        return e === a || e instanceof Array && t === a.concat ? r : t
      }
    }, function (e, t, n) {
      n(94);
      var r = n(21);
      e.exports = r("Array").concat
    }, function (e, t, n) {
      e.exports = n(271)
    }, function (e, t, n) {
      var r = n(272);
      e.exports = r
    }, function (e, t, n) {
      var r = n(273),
        a = Array.prototype;
      e.exports = function (e) {
        var t = e.sort;
        return e === a || e instanceof Array && t === a.sort ? r : t
      }
    }, function (e, t, n) {
      n(274);
      var r = n(21);
      e.exports = r("Array").sort
    }, function (e, t, n) {
      "use strict";
      var r = n(0),
        a = n(8),
        i = n(19),
        A = n(7),
        o = n(69),
        s = [],
        u = s.sort,
        l = A((function () {
          s.sort(void 0)
        })),
        c = A((function () {
          s.sort(null)
        })),
        d = o("sort");
      r({
        target: "Array",
        proto: !0,
        forced: l || !c || !d
      }, {
        sort: function (e) {
          return void 0 === e ? u.call(i(this)) : u.call(i(this), a(e))
        }
      })
    }]).default
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.getTime = t.fetchBlob = t.getID = t.RECORD_FILE = void 0;
    var r = i(n(25)),
      a = i(n(11));

    function i(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.parseUrl = function (e) {
      var t = o.exec(e || "");
      if (t) return {
        uid: t[1],
        cid: t[2],
        timestamp: parseInt(t[3]),
        chunk: parseInt(t[4]),
        type: t[6],
        url: e
      };
      var n = e.lastIndexOf(".");
      return {
        url: e,
        type: e.slice(n + 1)
      }
    }, t.ab2str = function (e) {
      return A(this, void 0, void 0, r.default.mark((function t() {
        return r.default.wrap((function (t) {
          for (;;) switch (t.prev = t.next) {
            case 0:
              if (!s) {
                t.next = 4;
                break
              }
              return t.abrupt("return", s.decode(e));
            case 4:
              return t.next = 6, new a.default((function (t, n) {
                var r = new FileReader;
                r.onload = function () {
                  t(r.result)
                }, r.onerror = n, r.readAsText(new Blob([
                  new Uint8Array(e)
                ]))
              }));
            case 6:
              return t.abrupt("return", t.sent);
            case 7:
            case "end":
              return t.stop()
          }
        }), t, this)
      })))
    };
    var A = function (e, t, n, r) {
        return new(n || (n = a.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      o = t.RECORD_FILE = /(\d+)-(\d+)-(\d+)-(\d+)(-mixed)?\.(mp4|aac|flv|gz)$/i;
    t.getID = function () {
      return ~~(1e4 * Math.random())
    };
    var s = void 0;
    "function" == typeof window.TextEncoder && (s = new window.TextDecoder("utf-8"));
    t.fetchBlob = function (e) {
      return new a.default((function (t, n) {
        var r = new XMLHttpRequest;
        r.open("GET", e), r.responseType = "blob", r.onload = function () {
          t(r.response)
        }, r.onerror = n, r.send()
      }))
    };
    var u = function (e) {
      return e < 10 ? "0" + e : "" + e
    };
    t.getTime = function (e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
        n = (e = ~~(e / 1e3)) % 60,
        r = (e = ~~((e -= n) / 60)) % 60,
        a = ~~(e / 60);
      return 0 === a && !1 === t ? [u(r) + ":" + u(n), a] : [a + ":" + u(r) + ":" + u(
        n), a
      ]
    }
  }, , , , , , , , , function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(25)),
      a = c(n(2)),
      i = c(n(0)),
      A = c(n(1)),
      o = c(n(3)),
      s = c(n(4)),
      u = c(n(11)),
      l = c(n(48));

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      h = function (e) {
        function t() {
          return (0, i.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, a
            .default)(t)).apply(this, arguments))
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "playUtilBtwTimeAndReady",
          value: function (e) {
            return d(this, void 0, void 0, r.default.mark((function e() {
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return e.next = 2, this.showTrack();
                  case 2:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "isWaiting",
          value: function (e) {
            return e < this.offsetBegin || this.offsetEnd, !1
          }
        }, {
          key: "setViewer",
          value: function (e) {}
        }, {
          key: "setPlaySpeed",
          value: function (e) {}
        }, {
          key: "showTrack",
          value: function () {
            return d(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return this.state = "beforeshow", e.next = 3,
                      new u.default((function (e) {
                        t.emit("visibleChange", "show", t
                          .params, (function (n) {
                            t.showTrackCb(n), e()
                          }))
                      }));
                  case 3:
                    this.state = "playing", setTimeout((
                    function () {
                      t.emit("showTrack")
                    }));
                  case 5:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "hideTrack",
          value: function () {
            return d(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return this.state = "beforefinish", e.next =
                      3, new u.default((function (e) {
                        t.emit("visibleChange", "hide", t
                          .params, (function () {
                            t.hideTrackCb(), e()
                          }))
                      }));
                  case 3:
                    setTimeout((function () {
                      t.emit("hideTrack")
                    })), this.state = "finished";
                  case 5:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "destroy",
          value: function () {
            return d(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return e.next = 2, this._awaitTrackHandler();
                  case 2:
                    if ("playing" !== this.state) {
                      e.next = 5;
                      break
                    }
                    return e.next = 5, this.hideTrack();
                  case 5:
                    this.eventNames().forEach((function (e) {
                      return t.off(e)
                    }));
                  case 6:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "update",
          value: function (e) {
            return d(this, void 0, void 0, r.default.mark((function t() {
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    return t.next = 2, this.seekTo(e, !0, !1);
                  case 2:
                    this.play();
                  case 3:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "seekTo",
          value: function (e, t) {
            var n = !(arguments.length > 2 && void 0 !== arguments[2]) ||
              arguments[2];
            return d(this, void 0, void 0, r.default.mark((function a() {
              return r.default.wrap((function (r) {
                for (;;) switch (r.prev = r.next) {
                  case 0:
                    if ("init" !== this.state && "error" !== this
                      .state) {
                      r.next = 2;
                      break
                    }
                    return r.abrupt("return");
                  case 2:
                    return r.next = 4, this._awaitTrackHandler();
                  case 4:
                    if (!(e < this.offsetBegin)) {
                      r.next = 11;
                      break
                    }
                    if ("playing" !== this.state) {
                      r.next = 8;
                      break
                    }
                    return r.next = 8, this.hideTrack();
                  case 8:
                    this.state = "ready", r.next = 22;
                    break;
                  case 11:
                    if (!(e > this.offsetEnd)) {
                      r.next = 18;
                      break
                    }
                    if ("playing" !== this.state) {
                      r.next = 15;
                      break
                    }
                    return r.next = 15, this.hideTrack();
                  case 15:
                    this.state = "finished", r.next = 22;
                    break;
                  case 18:
                    if ("ready" !== this.state && "finished" !==
                      this.state) {
                      r.next = 21;
                      break
                    }
                    return r.next = 21, this.showTrack();
                  case 21:
                    this.state = "playing";
                  case 22:
                    return r.next = 24, this.doSetTrack(e, t, n);
                  case 24:
                  case "end":
                    return r.stop()
                }
              }), a, this)
            })))
          }
        }, {
          key: "_awaitTrackHandler",
          value: function () {
            return d(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    if ("beforeshow" !== this.state) {
                      e.next = 4;
                      break
                    }
                    return e.next = 3, new u.default((function (
                    e) {
                      t.once("showTrack", e)
                    }));
                  case 3:
                    this.state = "playing";
                  case 4:
                    if ("beforefinish" !== this.state) {
                      e.next = 8;
                      break
                    }
                    return e.next = 7, new u.default((function (
                    e) {
                      t.once("hideTrack", e)
                    }));
                  case 7:
                    this.state = "finished";
                  case 8:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "duration",
          get: function () {
            return this.offsetEnd - this.offsetBegin
          }
        }]), t
      }(l.default);
    t.default = h
  }, function (e, t, n) {
    e.exports = function (e) {
      function t(e) {
        let n, a, i, A = null;

        function o(...e) {
          if (!o.enabled) return;
          const r = o,
            a = Number(new Date),
            i = a - (n || a);
          r.diff = i, r.prev = n, r.curr = a, n = a, e[0] = t.coerce(e[0]), "string" !=
            typeof e[0] && e.unshift("%O");
          let A = 0;
          e[0] = e[0].replace(/%([a-zA-Z%])/g, (n, a) => {
            if ("%%" === n) return "%";
            A++;
            const i = t.formatters[a];
            if ("function" == typeof i) {
              const t = e[A];
              n = i.call(r, t), e.splice(A, 1), A--
            }
            return n
          }), t.formatArgs.call(r, e);
          (r.log || t.log).apply(r, e)
        }
        return o.namespace = e, o.useColors = t.useColors(), o.color = t.selectColor(e),
          o.extend = r, o.destroy = t.destroy, Object.defineProperty(o, "enabled", {
            enumerable: !0,
            configurable: !1,
            get: () => null !== A ? A : (a !== t.namespaces && (a = t.namespaces, i =
              t.enabled(e)), i),
            set: e => {
              A = e
            }
          }), "function" == typeof t.init && t.init(o), o
      }

      function r(e, n) {
        const r = t(this.namespace + (void 0 === n ? ":" : n) + e);
        return r.log = this.log, r
      }

      function a(e) {
        return e.toString().substring(2, e.toString().length - 2).replace(/\.\*\?$/,
          "*")
      }
      return t.debug = t, t.default = t, t.coerce = function (e) {
        if (e instanceof Error) return e.stack || e.message;
        return e
      }, t.disable = function () {
        const e = [...t.names.map(a), ...t.skips.map(a).map(e => "-" + e)].join(",");
        return t.enable(""), e
      }, t.enable = function (e) {
        let n;
        t.save(e), t.namespaces = e, t.names = [], t.skips = [];
        const r = ("string" == typeof e ? e : "").split(/[\s,]+/),
          a = r.length;
        for (n = 0; n < a; n++) r[n] && ("-" === (e = r[n].replace(/\*/g, ".*?"))[0] ?
          t.skips.push(new RegExp("^" + e.slice(1) + "$")) : t.names.push(
            new RegExp("^" + e + "$")))
      }, t.enabled = function (e) {
        if ("*" === e[e.length - 1]) return !0;
        let n, r;
        for (n = 0, r = t.skips.length; n < r; n++)
          if (t.skips[n].test(e)) return !1;
        for (n = 0, r = t.names.length; n < r; n++)
          if (t.names[n].test(e)) return !0;
        return !1
      }, t.humanize = n(520), t.destroy = function () {
        console.warn(
          "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
          )
      }, Object.keys(e).forEach(n => {
        t[n] = e[n]
      }), t.names = [], t.skips = [], t.formatters = {}, t.selectColor = function (
      e) {
        let n = 0;
        for (let t = 0; t < e.length; t++) n = (n << 5) - n + e.charCodeAt(t), n |= 0;
        return t.colors[Math.abs(n) % t.colors.length]
      }, t.enable(t.load()), t
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.UserManager = void 0;
    var r = d(n(16)),
      a = d(n(103)),
      i = d(n(2)),
      A = d(n(0)),
      o = d(n(1)),
      s = d(n(3)),
      u = d(n(4)),
      l = d(n(530)),
      c = n(48);

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    t.UserManager = function (e) {
      function t(e) {
        var n = e.account,
          r = e.maxUserHistory;
        (0, A.default)(this, t);
        var o = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return o.userKeys = [], o.userMap = new a.default, o.onUndo = function (e) {
          o.emit("undo", e)
        }, o.onRedo = function (e) {
          o.emit("redo", e)
        }, o.account = n, o.maxUserHistory = "number" == typeof r ? r : 10, o
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "getUser",
        value: function (e) {
          return this.userMap.get(e)
        }
      }, {
        key: "addUser",
        value: function (e) {
          if (this.userMap.has(e)) return this.userMap.get(e);
          var t = new l.default(e, this.maxUserHistory);
          return t.on("undo", this.onUndo), t.on("redo", this.onRedo), this
            .userMap.set(e, t), t
        }
      }, {
        key: "hasUser",
        value: function (e) {
          return this.userMap.has(e)
        }
      }, {
        key: "remove",
        value: function (e) {
          this.userMap.has(e) && this.userMap.get(e).removeAllListeners();
          return this.userMap.delete(e)
        }
      }, {
        key: "removeOtherUsers",
        value: function () {
          var e = this;
          this.others.forEach((function (t) {
            t.removeAllListeners(), e.userMap.delete(t.account)
          }))
        }
      }, {
        key: "destroy",
        value: function () {
          this.all.forEach((function (e) {
            return e.removeAllListeners()
          })), this.userMap.clear()
        }
      }, {
        key: "toSnapshot",
        value: function (e) {
          return this.all.map((function (t) {
            return {
              account: t.account,
              recycle: t.recycle.map((function (t) {
                return t.toSnapshot(e)
              })),
              calibrate: t.getCalibrateAction().toString()
            }
          }))
        }
      }, {
        key: "myself",
        get: function () {
          return this.userMap.get(this.account)
        }
      }, {
        key: "others",
        get: function () {
          var e = this,
            t = [];
          return this.userMap.forEach((function (n, r) {
            r === e.account || t.push(n)
          })), t
        }
      }, {
        key: "uids",
        get: function () {
          return [].concat((0, r.default)(this.userMap.keys()))
        }
      }, {
        key: "all",
        get: function () {
          return [].concat((0, r.default)(this.userMap.values()))
        }
      }]), t
    }(c.EventEmitter)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.isStandardCursor = function (e) {}, t.isStandardMode = function (e) {
      if ("string" != typeof e) return [!1, "模式必须是字符串"];
      if ("" === (e = e.trim())) return [!1, "模式不能为空！"];
      if ("player" === e) return [!0];
      if (!~e.indexOf(":")) return [!1, "模式格式不正确！没有找到分割符-> ："];
      e.split(":");
      return [!0]
    }, t.isValidTool = function (e) {
      if ("string" != typeof e) return !1;
      switch (e) {
        case "fill":
        case "flag":
        case "free":
        case "line":
        case "rect":
        case "circle":
        case "roundRect":
        case "solidRect":
        case "solidRoundRect":
        case "solidCircle":
        case "text":
        case "ellipse":
        case "solidEllipse":
        case "erase":
          return !0;
        default:
          return !1
      }
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(25)),
      a = p(n(7)),
      i = p(n(2)),
      A = p(n(0)),
      o = p(n(1)),
      s = p(n(3)),
      u = p(n(4)),
      l = p(n(11)),
      c = p(n(480)),
      d = n(160),
      h = n(471);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e, t, n, r) {
        return new(n || (n = l.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      g = function (e) {
        function t(e, n) {
          (0, A.default)(this, t);
          var r = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
          r.params = e, r.viewerArr = [], r.urlArray = [], r.type = "gz", r.offsetBegin =
            0, r.offsetEnd = 0;
          var o = void 0;
          if (Array.isArray(e)) {
            r.originalParams = e.slice(), r.urlArray = e.map((function (e) {
              return e.url
            })), o = e[0].timestamp;
            var u = !0,
              l = !1,
              c = void 0;
            try {
              for (var d, h = (0, a.default)(e); !(u = (d = h.next()).done); u = !0) {
                var p = d.value;
                o = Math.min(o, p.timestamp)
              }
            } catch (e) {
              l = !0, c = e
            } finally {
              try {
                !u && h.return && h.return()
              } finally {
                if (l) throw c
              }
            }
          } else r.originalParams = [e], o = e.timestamp, r.url = e.url;
          return r.timestamp = o, r.opt = n, r.state = "init", r.nextRecordIndex = 0, r
            .viewer = "unknown", r
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "fetchData",
          value: function () {
            return f(this, void 0, void 0, r.default.mark((function e() {
              var t, n;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return console.log("init wb track "), t =
                      void 0, e.prev = 2, e.next = 5, (0, h
                        .fetchBlob)(this.url);
                  case 5:
                    t = e.sent, e.next = 11;
                    break;
                  case 8:
                    return e.prev = 8, e.t0 = e.catch(2), e
                      .abrupt("return", ["error", []]);
                  case 11:
                    return e.next = 13, this.getRawRecordFromBlob(
                      t);
                  case 13:
                    return (n = e.sent).length && (this
                      .offsetEnd = Math.max(this.offsetBegin +
                        n[n.length - 1].time + 1e3, this
                        .offsetEnd)), e.abrupt("return", [
                      "ready", n
                    ]);
                  case 16:
                  case "end":
                    return e.stop()
                }
              }), e, this, [
                [2, 8]
              ])
            })))
          }
        }, {
          key: "fetchMultiData",
          value: function () {
            return f(this, void 0, void 0, r.default.mark((function e() {
              var t, n, a, i, A = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    t = [], e.prev = 1, n = 0;
                  case 3:
                    if (!(n < this.urlArray.length)) {
                      e.next = 10;
                      break
                    }
                    return e.next = 6, (0, h.fetchBlob)(this
                      .urlArray[n]);
                  case 6:
                    t[n] = e.sent;
                  case 7:
                    n++, e.next = 3;
                    break;
                  case 10:
                    e.next = 15;
                    break;
                  case 12:
                    return e.prev = 12, e.t0 = e.catch(1), e
                      .abrupt("return", ["error", []]);
                  case 15:
                    return e.next = 17, l.default.all(t.map((
                      function (e, t) {
                        return f(A, void 0, void 0, r
                          .default.mark((function n() {
                            var a, i, A, o;
                            return r.default.wrap((
                              function (n) {
                                for (;;) switch (n
                                  .prev = n.next
                                  ) {
                                  case 0:
                                    return n
                                      .next = 2,
                                      this
                                      .getRawRecordFromBlob(
                                        e);
                                  case 2:
                                    return a = n
                                      .sent, i =
                                      this
                                      .originalParams[
                                        t], A =
                                      i
                                      .timestamp -
                                      this
                                      .timestamp,
                                      o = 0, a
                                      .length &&
                                      (o = a[a
                                          .length -
                                          1]
                                        .time,
                                        this
                                        .offsetEnd =
                                        Math
                                        .max(A +
                                          o +
                                          1e3 +
                                          this
                                          .offsetBegin,
                                          this
                                          .offsetEnd
                                          )),
                                      A > 0 && a
                                      .forEach((
                                        function (
                                          e) {
                                          e.time =
                                            e
                                            .time +
                                            A
                                        })), n
                                      .abrupt(
                                        "return", {
                                          cid: i
                                            .cid,
                                          beginAt: A +
                                            this
                                            .offsetBegin,
                                          endAt: A +
                                            this
                                            .offsetBegin +
                                            o,
                                          records: a
                                        });
                                  case 9:
                                  case "end":
                                    return n
                                      .stop()
                                }
                              }), n, this)
                          })))
                      })));
                  case 17:
                    if (a = e.sent, i = this
                      .mergeRawDataByChannel(a), !this
                      .isChannelOverlapping(i)) {
                      e.next = 21;
                      break
                    }
                    return e.abrupt("return", ["error", []]);
                  case 21:
                    return e.abrupt("return", ["ready", i]);
                  case 22:
                  case "end":
                    return e.stop()
                }
              }), e, this, [
                [1, 12]
              ])
            })))
          }
        }, {
          key: "getRawRecordFromBlob",
          value: function (e) {
            return f(this, void 0, void 0, r.default.mark((function t() {
              var n, a = this;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    return t.next = 2, new l.default((function (
                    t) {
                      var n = [],
                        i = new FileReader;
                      i.readAsBinaryString(e), i.onload =
                        function () {
                          return f(a, void 0, void 0, r
                            .default.mark((function e() {
                              var a, A, o, s, u, l, c,
                                p, f, g;
                              return r.default.wrap((
                                function (e) {
                                  for (;;)
                                    switch (e
                                      .prev = e
                                      .next) {
                                      case 0:
                                        a = d.pako
                                          .ungzip(
                                            i
                                            .result
                                            ), A =
                                          new DataView(
                                            a
                                            .buffer
                                            ), o =
                                          A
                                          .byteLength,
                                          s = 0;
                                      case 4:
                                        if (!(s <
                                            o)) {
                                          e.next =
                                            17;
                                          break
                                        }
                                        return u =
                                          A
                                          .getInt32(
                                            s, !0
                                            ), l =
                                          A
                                          .getInt32(
                                            s + 4,
                                            !0),
                                          c = u -
                                          8, p =
                                          s + 8,
                                          f = a
                                          .slice(
                                            p, p +
                                            c), e
                                          .next =
                                          12, (0,
                                            h
                                            .ab2str
                                            )(f);
                                      case 12:
                                        g = e
                                          .sent, n
                                          .push({
                                            time: l,
                                            str: g
                                          }), s +=
                                          u, e
                                          .next =
                                          4;
                                        break;
                                      case 17:
                                        A = null,
                                          t(n);
                                      case 19:
                                      case "end":
                                        return e
                                          .stop()
                                    }
                                }), e, this)
                            })))
                        }
                    }));
                  case 2:
                    return n = t.sent, t.abrupt("return", n);
                  case 4:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "mergeRawDataByChannel",
          value: function (e) {
            for (var t = {}, n = 0; n < e.length; n++) {
              var r = e[n];
              if (t.hasOwnProperty(r.cid)) {
                var a = t[r.cid];
                t[r.cid] = {
                  cid: r.cid,
                  beginAt: Math.min(a.beginAt, r.beginAt),
                  endAt: Math.max(a.endAt, r.endAt),
                  records: a.records.concat(r.records)
                }
              } else t[r.cid] = r
            }
            var i = [];
            for (var A in t) t[A].records = t[A].records.sort((function (e, t) {
              return e.time - t.time
            })), i.push(t[A]);
            return i
          }
        }, {
          key: "isChannelOverlapping",
          value: function (e) {
            for (var t = e.sort((function (e, t) {
                return e.beginAt - t.beginAt
              })), n = 0; n < t.length - 1; n++) {
              var r = t[n],
                a = t[n + 1];
              if (r.endAt > a.beginAt) return console.error("[wb]\nchannel:" + r
                .cid + "与channel:" + a.cid + "之间的时间存在重叠区域，\nchannel:" + r
                .cid + "的开始结束时间为: " + this.formatTimeOffset(r.beginAt) + "-" +
                this.formatTimeOffset(r.endAt) + ",\nchannel:" + a.cid +
                "的开始结束时间为: " + this.formatTimeOffset(a.beginAt) + "-" + this
                .formatTimeOffset(a.endAt) + "\n        "), !0
            }
            return !1
          }
        }, {
          key: "formatTimeOffset",
          value: function (e) {
            return new Date(e + this.timestamp).toLocaleString()
          }
        }, {
          key: "hideTrackCb",
          value: function () {}
        }, {
          key: "pause",
          value: function () {}
        }, {
          key: "play",
          value: function () {}
        }]), t
      }(c.default);
    t.default = g
  }, , , , , , , , , , , , , , , , , , , , , , function (e, t, n) {
    e.exports = n(507)
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = y(n(25)),
      a = y(n(2)),
      i = y(n(0)),
      A = y(n(1)),
      o = y(n(3)),
      s = y(n(4)),
      u = y(n(11)),
      l = y(n(48)),
      c = y(n(508)),
      d = n(510),
      h = y(n(515)),
      p = y(n(516)),
      f = y(n(533)),
      g = n(471);

    function y(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var v = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      m = function (e) {
        function t() {
          (0, i.default)(this, t);
          var e = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this,
            arguments));
          return e.speed = 1, e.init = function (t) {
            var n = [],
              r = [];
            t.videoTracks.forEach((function (e) {
              n.push(new h.default(e))
            })), t.whiteboardTracks.forEach((function (e) {
              "1.0" === t.version || "2.0" === t.version ? (e.hasOwnProperty(
                "account") || (e.account = (Date.now() + 1e4 * Math.random())
                .toString()), n.push(new p.default(e, {
                version: t.version
              }))) : r.push(e)
            }));
            var a = void 0;
            if (r.length > 0) {
              var i = new f.default(r, {
                version: t.version
              });
              n.push(i), a = i.drawManager
            }
            e.timeline = new c.default(n), e.timeline.on("tick", e._handleTick), e
              .timeline.on("pause", (function () {
                return e.emit("pause")
              })), e.timeline.on("play", (function () {
                return e.emit("play")
              })), e.timeline.on("finished", (function () {
                e.emit("finished")
              })), e.timeline.on("visibleChange", (function (t, n, r) {
                e._visibleChangeCallHandler(t, n, r), e.emit("visibleChange", t, n)
              }));
            var A = e;
            return new u.default((function (t, n) {
              e.timeline.once("ready", (function (n) {
                e.originalStartTime = n.beginTimeStamp, e.originalEndTime =
                  n.endTimeStamp, t({
                    player: A,
                    params: n,
                    drawPlugin: a
                  })
              })), e.timeline.once("error", (function (e) {
                n(e)
              }))
            }))
          }, e._visibleChangeCallHandler = function (e, t, n) {
            "show" === e ? n(t.container) : n()
          }, e._handleTick = function (t) {
            e.lastTickRealTime = e.convertUiTimeToRealTime(t), e.emit("tick", t)
          }, e
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "bindControlContainer",
          value: function (e) {
            "function" == typeof this.unmount && this.unmount(), this.unmount = (
              0, d.mount)(e, this)
          }
        }, {
          key: "getDuration",
          value: function () {
            return this.originalStartTime && this.originalEndTime ? this
              .startTime && this.endTime ? Math.max(0, this.endTime - this
                .startTime) : this.startTime ? Math.max(0, this.originalEndTime -
                this.startTime) : this.endTime ? Math.max(0, this.endTime - this
                .originalStartTime) : Math.max(0, this.originalEndTime - this
                .originalStartTime) : 0
          }
        }, {
          key: "getTimeOffset",
          value: function () {
            return this.startTime && this.originalStartTime ? this.startTime -
              this.originalStartTime : 0
          }
        }, {
          key: "getLastUiTime",
          value: function () {
            return this.lastTickRealTime ? this.convertRealTimeToUiTime(this
              .lastTickRealTime) : 0
          }
        }, {
          key: "convertUiTimeToRealTime",
          value: function (e) {
            if (this.startTime) return e + this.startTime;
            if (this.originalStartTime) return e + this.originalStartTime;
            throw new Error(
              "convert ui time to real time, start time is unavailable")
          }
        }, {
          key: "convertRealTimeToUiTime",
          value: function (e) {
            var t = void 0;
            if (e)
              if (this.startTime) t = e - this.startTime;
              else {
                if (!this.originalStartTime) throw new Error(
                  "convert real time to ui time, start time is unavailable");
                t = e - this.originalStartTime
              }
            else t = 0;
            return Math.min(Math.max(t, 0), this.getDuration())
          }
        }, {
          key: "_isTimeRangeValid",
          value: function (e, t) {
            var n = this.originalStartTime,
              r = this.originalEndTime;
            return e = Number(e), isNaN(e) || 0 === e || (n = e), t = Number(t),
              isNaN(t) || 0 === t || (r = t), !(r - n < 100) || (console.error(
                "设置timeRange:\n起始时间:" + n + ", " + new Date(n)
              .toLocaleString() + "\n终止时间: " + r + ", " + new Date(r)
                .toLocaleString() + "\n时间间隔小于100ms, 或者起始时间晚于终止时间，这次设置无效"), !1)
          }
        }, {
          key: "setTimeRange",
          value: function (e, t) {
            var n;
            if (this._isTimeRangeValid(e, t)) {
              e = Number(e), isNaN(e) || 0 === e || (this.startTime = e), t =
                Number(t), isNaN(t) || 0 === t || (this.endTime = t);
              var r = this.convertRealTimeToUiTime(this.lastTickRealTime);
              return r = Math.max(0, r), null === (n = this.timeline) ||
                void 0 === n || n.adjustTimeRange(this.getTimeOffset(), this
                  .getDuration()), this.seekTo(r), this.getDuration() > 36e6 &&
                console.warn("设置后录像时长超过10小时，请仔细检查的参数是否正确"), this.emit(
                  "durationChange", this.getDuration())
            }
          }
        }, {
          key: "setPlaySpeed",
          value: function (e) {
            var t = Number(e);
            if (isNaN(t)) throw new Error("播放速度必须是数字, 目前是: " + e);
            if (t <= .1 || t >= 100) throw new Error("播放速度不能大于100，或者小于0.1");
            this.timeline && (this.timeline.setPlaySpeed(t), this.speed = t, this
              .emit("speedChange", t))
          }
        }, {
          key: "setViewer",
          value: function (e) {
            this.timeline && this.timeline.setViewer(e)
          }
        }, {
          key: "play",
          value: function () {
            if (this.timeline) return this.timeline.play()
          }
        }, {
          key: "pause",
          value: function () {
            if (this.timeline) return this.timeline.pause()
          }
        }, {
          key: "seekTo",
          value: function (e) {
            return v(this, void 0, void 0, r.default.mark((function t() {
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (e = Number(e), isNaN(e) && console.error(
                        "[wb]seekTo参数无效", e), e = Math.max(e, 0),
                      !this.timeline) {
                      t.next = 7;
                      break
                    }
                    return this._handleTick(e), t.next = 7, this
                      .timeline.seekTo(e);
                  case 7:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "destroy",
          value: function () {
            return v(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    if (!this.timeline) {
                      e.next = 3;
                      break
                    }
                    return e.next = 3, this.timeline.destroy();
                  case 3:
                    "function" == typeof this.unmount && (this
                        .unmount(), this.unmount = void 0),
                      delete this.timeline, this.eventNames()
                      .forEach((function (e) {
                        return t.off(e)
                      }));
                  case 6:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }], [{
          key: "getInstance",
          value: function (e) {
            var n = e.whiteboardParams.urlArr.map((function (t) {
                var n = (0, g.parseUrl)(t);
                if (n && e.whiteboardParams.timestamp && (n.timestamp = e
                    .whiteboardParams.timestamp), !n.timestamp)
                throw new Error("replay--\x3e 无法获取白板录像文件的开始时间, 请仔细检查你的参数");
                if (!e.whiteboardParams.container) throw new Error(
                  "replay--\x3e 白板容器不可用，请仔细检查你的参数");
                return n.container = e.whiteboardParams.container, n
                  .drawPluginParams = e.whiteboardParams.drawPluginParams, n
                  .getAntiLeechInfo = e.whiteboardParams.getAntiLeechInfo, n
              })).filter((function (e) {
                return e
              })),
              r = void 0;
            return r = e.videoParams ? e.videoParams.map((function (e, t) {
              var n = (0, g.parseUrl)(e.url);
              if (n && e.timestamp && (n.timestamp = e.timestamp), !n
                .timestamp) throw new Error("[wb]replay--\x3e 无法获取第" + (t +
                1) + "个视频录像的开始时间, 请仔细检查你的参数");
              return e.container || console.error("[wb]replay--\x3e 第" + (
                  t + 1) + "个录像文件的容器为空，请仔细检查你的参数"), n.container = e
                .container, n
            })) : [], console.log("replay--\x3e 录像回放参数为", n, r, e.version), (
              new t).init({
              whiteboardTracks: n,
              videoTracks: r,
              version: e.version || "3.0"
            })
          }
        }]), t
      }(l.default);
    t.default = m
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = h(n(25)),
      a = h(n(2)),
      i = h(n(0)),
      A = h(n(1)),
      o = h(n(3)),
      s = h(n(4)),
      u = h(n(11)),
      l = h(n(48)),
      c = n(509),
      d = h(c);

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      f = function (e) {
        function t(e) {
          (0, i.default)(this, t);
          var n = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
          return n.tracks = e, n.ticker = new d.default, n.timeOffset = 0, n
            .endTimeStamp = 0, n.state = "pause", n.busy = !1, n
            .handleTrackVisibleChange = function (e, t, r) {
              n.emit("visibleChange", e, t, r)
            }, n.update = function (e) {
              return p(n, void 0, void 0, r.default.mark((function t() {
                var n = this;
                return r.default.wrap((function (t) {
                  for (;;) switch (t.prev = t.next) {
                    case 0:
                      return "play" !== this.state && console.error(
                          "[wb]update应该处于play状态下才调用"), t.next = 3, u
                        .default.all(this.tracks.map((function (t) {
                          return t.update(e + n.timeOffset)
                        })));
                    case 3:
                      e >= this.endTimeStamp && setTimeout((function () {
                        n._doPause(), n.state = "finished", n.emit(
                          "finished")
                      }));
                    case 4:
                    case "end":
                      return t.stop()
                  }
                }), t, this)
              })))
            }, n.initTrack(e), n.bindTickerEvents(), n
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "adjustTimeRange",
          value: function (e, t) {
            this.timeOffset = e, this.endTimeStamp = t
          }
        }, {
          key: "initTrack",
          value: function (e) {
            var t = this;
            this.tracks = e.slice();
            var n = g(e),
              r = v(e, n);
            console.log("init every track"), u.default.all(r).then((function (r) {
              console.log("every track inited");
              var a = t.tracks.filter((function (e, t) {
                return "error" === r[t]
              }));
              t.tracks = t.tracks.filter((function (e, t) {
                  return "ready" === r[t]
                })), a.length > 0 && t.emit("error", "bad track"), t
                .endTimeStamp = y(e), t.bindTrackEvents(), console.log(
                  "timeline ready");
              var i = [];
              t.tracks.forEach((function (e) {
                Array.isArray(e.viewerArr) && e.viewerArr.forEach((
                  function (e) {
                    -1 === i.indexOf(e) && i.push(e)
                  }))
              })), 0 === i.length && i.push("unknown"), t.emit("ready", {
                beginTimeStamp: n,
                endTimeStamp: t.endTimeStamp + n,
                duration: t.endTimeStamp,
                viewerArr: i
              })
            }))
          }
        }, {
          key: "bindTrackEvents",
          value: function () {
            var e = this;
            this.tracks.forEach((function (t) {
              t.on("visibleChange", e.handleTrackVisibleChange), t.on(
                "waitingToPlay", (function () {
                  return e.handleTrackWaitingToPlay()
                })), t.on("canplay", (function () {
                return e.handleTrackCanPlay()
              }))
            }))
          }
        }, {
          key: "bindTickerEvents",
          value: function () {
            var e = this;
            this.ticker.on("tick", (function (t) {
              e.emit("tick", t), e.update(t)
            })), this.ticker.on("pause", (function () {
              e.emit("pause")
            })), this.ticker.on("play", (function () {
              e.emit("play")
            }))
          }
        }, {
          key: "handleTrackWaitingToPlay",
          value: function () {
            "play" === this.state && this.hasTrackWaiting() && (this.state =
              "waitingToPlay", this._doPause())
          }
        }, {
          key: "handleTrackCanPlay",
          value: function () {
            "waitingToPlay" !== this.state || this.hasTrackWaiting() || (this
              .state = "play", this._doPlay())
          }
        }, {
          key: "hasTrackWaiting",
          value: function () {
            var e = this;
            return void 0 !== this.tracks.find((function (t) {
              return t.isWaiting(e.ticker.currTimeStamp)
            }))
          }
        }, {
          key: "pause",
          value: function () {
            this.busy ? console.warn("busy pause") : ("play" === this.state &&
              this._doPause(), "finished" !== this.state && (this.state =
                "pause"))
          }
        }, {
          key: "play",
          value: function () {
            this.busy ? console.warn("busy play") : "finished" !== this.state ?
              this.hasTrackWaiting() ? this.state = "waitingToPlay" : (this
                .state = "play", this._doPlay()) : (this.state = "play", this
                .seekTo(0))
          }
        }, {
          key: "setPlaySpeed",
          value: function (e) {
            this.ticker.rate = e, this.tracks.forEach((function (t) {
              t.setPlaySpeed(e)
            }))
          }
        }, {
          key: "setViewer",
          value: function (e) {
            this.tracks.forEach((function (t) {
              return t.setViewer(e)
            }))
          }
        }, {
          key: "seekTo",
          value: function (e) {
            return p(this, void 0, void 0, r.default.mark((function t() {
              var n = this;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!this.busy) {
                      t.next = 2;
                      break
                    }
                    return t.abrupt("return");
                  case 2:
                    if (e = Math.min(Math.max(e, 0), this
                        .endTimeStamp), !(this.ticker
                        .currTimeStamp < e && e < this.ticker
                        .currTimeStamp + 2 * c.DEFAULT_INTERVAL
                        )) {
                      t.next = 5;
                      break
                    }
                    return t.abrupt("return");
                  case 5:
                    if (!(e < this.ticker.currTimeStamp)) {
                      t.next = 20;
                      break
                    }
                    return "finished" === this.state && (this
                        .state = "pause"), this.busy = !0, this
                      .ticker.setCurrentTime(e), t.prev = 9, t
                      .next = 12, u.default.all(this.tracks.map((
                        function (t) {
                          return t.seekTo(e + n.timeOffset, !
                            1)
                        })));
                  case 12:
                    t.next = 17;
                    break;
                  case 14:
                    t.prev = 14, t.t0 = t.catch(9), console.error(
                      t.t0);
                  case 17:
                    this.busy = !1, t.next = 31;
                    break;
                  case 20:
                    return this.busy = !0, this.ticker
                      .setCurrentTime(e), t.prev = 22, t.next =
                      25, u.default.all(this.tracks.map((
                        function (t) {
                          return t.seekTo(e + n.timeOffset, !
                            0)
                        })));
                  case 25:
                    t.next = 30;
                    break;
                  case 27:
                    t.prev = 27, t.t1 = t.catch(22), console
                      .error(t.t1);
                  case 30:
                    this.busy = !1;
                  case 31:
                    "play" === this.state ? this._doPlay() : this
                      ._doPause();
                  case 32:
                  case "end":
                    return t.stop()
                }
              }), t, this, [
                [9, 14],
                [22, 27]
              ])
            })))
          }
        }, {
          key: "_doPause",
          value: function () {
            this.ticker.pause(), this.tracks.forEach((function (e) {
              return e.pause()
            }))
          }
        }, {
          key: "_doPlay",
          value: function () {
            this.ticker.play(), this.tracks.forEach((function (e) {
              return e.play()
            }))
          }
        }, {
          key: "destroy",
          value: function () {
            return p(this, void 0, void 0, r.default.mark((function e() {
              var t = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return this.ticker.destory(), e.next = 3, u
                      .default.all(this.tracks.map((function (e) {
                        return e.destroy()
                      })));
                  case 3:
                    this.eventNames().forEach((function (e) {
                      return t.off(e)
                    }));
                  case 4:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }]), t
      }(l.default);
    t.default = f;
    var g = function (e) {
        var t = Number.POSITIVE_INFINITY;
        return e.forEach((function (e) {
          t > e.timestamp && (t = e.timestamp)
        })), t
      },
      y = function (e) {
        var t = Number.NEGATIVE_INFINITY;
        return e.forEach((function (e) {
          t < e.offsetEnd && (t = e.offsetEnd)
        })), t
      },
      v = function (e, t) {
        var n = /iphone/i.test(navigator.userAgent),
          r = u.default.resolve("got lucky ~");
        return e.map((function (e) {
          if (e.offsetBegin = e.timestamp - t, n && ("mp4" === e.type || "flv" === e
              .type || "aac" === e.type)) {
            var a = e.init(r);
            return r = a, a
          }
          return e.init()
        }))
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.DEFAULT_INTERVAL = void 0;
    var r = u(n(2)),
      a = u(n(0)),
      i = u(n(1)),
      A = u(n(3)),
      o = u(n(4)),
      s = n(48);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = t.DEFAULT_INTERVAL = 10,
      c = function (e) {
        function t() {
          (0, a.default)(this, t);
          var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).apply(this,
            arguments));
          return e.state = "pause", e.currTimeStamp = 0, e.lastRealTime = void 0, e.rate =
            1, e.microTask = function () {
              "play" === e.state && e.tick()
            }, e
        }
        return (0, o.default)(t, e), (0, i.default)(t, [{
          key: "destory",
          value: function () {
            var e = this;
            this.pause(), this.eventNames().forEach((function (t) {
              return e.off(t)
            }))
          }
        }, {
          key: "tick",
          value: function () {
            var e = Date.now();
            if (void 0 !== this.lastRealTime) {
              var t = (e - this.lastRealTime) * this.rate;
              this.currTimeStamp = this.currTimeStamp + t, this.lastRealTime = e,
                this.emit("tick", this.currTimeStamp)
            } else this.lastRealTime = e
          }
        }, {
          key: "pause",
          value: function () {
            this.timer && window.clearInterval(this.timer), this.timer = void 0,
              this.lastRealTime = void 0, this.state = "pause", this.emit("pause")
          }
        }, {
          key: "play",
          value: function () {
            this.timer || (this.timer = setInterval(this.microTask, l)), this
              .state = "play", this.emit("play")
          }
        }, {
          key: "setCurrentTime",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : 0;
            this.currTimeStamp = e, this.lastRealTime = void 0
          }
        }]), t
      }(s.EventEmitter);
    t.default = c
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(36)),
      a = p(n(2)),
      i = p(n(0)),
      A = p(n(1)),
      o = p(n(3)),
      s = p(n(4));
    t.mount = function (e, t) {
      if (!e) throw new Error("RecordPlayer mount传入的容器不能为空");
      if (!t) throw new Error("请传入录制回放实例");
      var n = (0, u.render)(l.default.createElement(g, {
        player: t
      }), e);
      return function () {
        (0, u.render)(l.default.createElement(y, null), e, n)
      }
    };
    var u = n(6),
      l = p(u),
      c = n(471),
      d = p(n(511)),
      h = p(n(512));

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    n(513);
    var f = /iphone|android/i.test(navigator.userAgent),
      g = function (e) {
        function t(e) {
          (0, i.default)(this, t);
          var n = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
          n.toolUIEl = (0, u.createRef)(), n.onMouseMove = function (e) {
            var t = n.getCurrentXAndTime(e),
              a = t.currentX,
              i = t.currentTime,
              A = (0, c.getTime)(i),
              o = (0, r.default)(A, 1)[0];
            n.setState({
              labelLeft: a,
              labelText: o
            })
          }, n.pauseOrPlay = function (e) {
            var t = n.state.paused;
            t ? n.props.player.play() : n.props.player.pause(), n.setState({
              paused: !t
            })
          }, n.onMouseDown = function (e) {
            "slider" === e.target.getAttribute("role") && (n.setState({
              showLabel: !0,
              drag: !0
            }), n.onMouseMove(e))
          }, n.onMouseUp = function (e) {
            n.state.drag && n.seekTo(e), n.hidePosition(e)
          }, n.handleClickSpeed = function (e) {
            n.setState({
              speedOptionShow: !n.state.speedOptionShow
            })
          }, n.handleClickSpeedOption = function (e, t) {
            e.stopPropagation(), n.setState({
              speedOptionShow: !1
            }), n.props.player.setPlaySpeed(t)
          }, n.showPosition = function (e) {
            n.setState({
              showLabel: !0
            }), n.onMouseMove(e)
          }, n.hidePosition = function (e) {
            n.setState({
              showLabel: !1
            })
          }, n.seekTo = function (e) {
            var t = n.getCurrentXAndTime(e),
              r = t.currentX,
              a = t.currentTime;
            n.props.player.seekTo(a);
            var i = {
              labelLeft: r,
              time: a,
              drag: !1
            };
            f && (i.showLabel = !1), n.setState(i)
          }, n.getCurrentXAndTime = function (e) {
            var t = 0,
              r = n.toolUIEl.current.getBoundingClientRect().left;
            t = e.type.search(/mouse|click/) > -1 ? e.clientX - r : e.touches[0]
              .clientX - r;
            var a = n.toolUIEl.current.offsetWidth;
            return t < 0 && (t = 0), t > a && (t = a), {
              currentX: t,
              currentTime: n.state.duration * (t / a)
            }
          }, n.renderTimeline = function (e) {
            var t = n.state,
              r = t.showLabel,
              a = t.labelLeft,
              i = t.labelText,
              A = t.drag;
            return l.default.createElement("div", {
              ref: n.toolUIEl,
              className: "player-timeline",
              onClick: n.seekTo,
              onMouseEnter: n.showPosition,
              onMouseLeave: n.hidePosition,
              onMouseDown: n.onMouseDown,
              onMouseMove: n.onMouseMove,
              onTouchStart: n.onMouseDown,
              onTouchMove: n.onMouseMove,
              onTouchEnd: n.onMouseUp,
              role: "timeline"
            }, l.default.createElement("span", {
              role: "currentLabel",
              className: "player-timeline-label",
              style: {
                display: r ? "inline-block" : "none",
                left: a + "px"
              }
            }, i), l.default.createElement("span", {
              role: "label-background",
              className: "player-timeline-bg",
              style: {
                display: r ? "inline-block" : "none",
                height: 20,
                left: a + "px"
              }
            }), l.default.createElement("div", {
              role: "blue-line",
              className: "player-timeline-blueline",
              style: {
                width: e + "%"
              }
            }), l.default.createElement("div", {
              role: "slider",
              className: "player-timeline-slider",
              style: {
                left: A ? a + "px" : e + "%",
                backgroundClip: A ? "border-box" : "content-box"
              }
            }))
          }, n.renderPlayOrPause = function () {
            var e = n.state.paused;
            return l.default.createElement("div", {
              className: "player-play-icon-wrapper",
              role: "icon",
              onClick: n.pauseOrPlay
            }, l.default.createElement("span", {
              className: "player-play-icon",
              style: {
                backgroundImage: "url(" + (e ? h.default : d.default) + ")"
              }
            }))
          };
          var A = e.player;
          return n.state = {
            time: A.getLastUiTime(),
            duration: A.getDuration(),
            showLabel: !1,
            labelLeft: 0,
            labelText: "",
            paused: "pause" === A.timeline.ticker.state,
            currSpeed: A.speed,
            speedOptionShow: !1,
            drag: !1
          }, A.on("tick", (function (e) {
            n.setState({
              time: e
            })
          })), A.on("play", (function () {
            n.setState({
              paused: !1
            })
          })), A.on("pause", (function () {
            n.setState({
              paused: !0
            })
          })), A.on("speedChange", (function (e) {
            n.setState({
              currSpeed: e
            })
          })), A.on("durationChange", (function (e) {
            n.setState({
              duration: e
            })
          })), n
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "renderSpeed",
          value: function () {
            var e = this,
              t = 1 === this.state.currSpeed ? "倍数" : this.state.currSpeed + "x";
            return l.default.createElement("div", {
              className: "player-speed",
              onClick: this.handleClickSpeed
            }, l.default.createElement("div", {
              className: "player-speed-text"
            }, t), this.state.speedOptionShow && l.default.createElement(
              "div", {
                className: "player-speed-options"
              }, [2, 1.5, 1.25, 1, .75, .5].map((function (t) {
                return l.default.createElement("div", {
                  className: "option",
                  key: t,
                  onClick: function (n) {
                    return e.handleClickSpeedOption(n, t)
                  }
                }, t, "x")
              }))))
          }
        }, {
          key: "render",
          value: function (e, t) {
            var n = t.time,
              a = t.duration,
              i = 0;
            i = n >= a ? 100 : n <= 0 ? 0 : n / a * 100;
            var A = void 0;
            if (n > a) {
              var o = (0, c.getTime)(a),
                s = (0, r.default)(o, 1)[0];
              A = s + "/" + s
            } else {
              var u = (0, c.getTime)(a),
                d = (0, r.default)(u, 2),
                h = d[0],
                p = d[1],
                f = (0, c.getTime)(n, p > 0);
              A = (0, r.default)(f, 1)[0] + "/" + h
            }
            return l.default.createElement("div", {
                className: "player-container"
              }, this.renderPlayOrPause(), this.renderTimeline(i), this
              .renderSpeed(), l.default.createElement("div", {
                role: "duration",
                className: "player-duration"
              }, A))
          }
        }]), t
      }(l.default.Component);
    t.default = g;
    var y = function () {
      return null
    }
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+"
  }, function (e, t) {
    e.exports =
      "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+"
  }, function (e, t, n) {
    var r = n(514);
    "string" == typeof r && (r = [
      [e.i, r, ""]
    ]);
    var a = {
      hmr: !0,
      transform: void 0,
      insertInto: void 0
    };
    n(13)(r, a);
    r.locals && (e.exports = r.locals)
  }, function (e, t, n) {
    (e.exports = n(12)(!1)).push([e.i,
      ".player-container {\n    display: block;\n    position: relative;\n    height: 30px;\n    background: rgba(113, 113, 113, 0.23);\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    display: flex;\n}\n\n    .player-container .player-play-icon-wrapper {\n        cursor: pointer;\n        position: relative;\n        width: 20px;\n        height: 20px;\n        padding: 5px;\n    }\n\n    .player-container .player-play-icon-wrapper .player-play-icon {\n            display:inline-block;\n            height:inherit;\n            width:inherit;\n            background-size:cover;\n        }\n\n    .player-container .player-speed {\n        padding: 5px;\n        height: 20px;\n        font-size: 14px;\n        font-family: sans-serif;\n        cursor: pointer;\n    }\n\n    .player-container .player-speed .player-speed-text {\n            text-align: center;\n        }\n\n    .player-container .player-speed .player-speed-options {\n            position: absolute;\n            bottom: 27px;\n            background: rgba(0,0,0,.8);\n            padding: 0 10px;\n            color: white;\n            text-align: center;\n        }\n\n    .player-container .player-speed .player-speed-options .option {\n                margin: 10px 0;\n            }\n\n    .player-container .player-duration {\n        height:20px;\n        font-size:14px;\n        font-family:sans-serif;\n        padding: 5px;\n    }\n\n    .player-container .player-timeline {\n        flex: 1;\n        height: 6px;\n        cursor: pointer;\n        background: rgba(0,0,0,0.12);\n        margin: 12px 5px;\n        position: relative;\n    }\n\n    .player-container .player-timeline-label {\n        position: absolute;\n        height: 20px;\n        background: white;\n        border-radius: 3px;\n        bottom: 10px;\n        padding: 4px 6px;\n        transform: translateX(-50%);\n    }\n\n    .player-container .player-timeline-bg {\n        position: absolute;\n        height: 20px;\n        background: 'white';\n        width: 2px;\n        bottom: -5px;\n        pointer-events: none;\n    }\n\n    .player-container .player-timeline-blueline {\n        position: absolute;\n        background: rgba(24, 121, 226, 0.7);\n        height: inherit;\n        pointer-events: none;\n    }\n\n    .player-container .player-timeline-slider {\n        position: absolute;\n        top: -5px;\n        bottom: -5px;\n        background: white;\n        box-sizing: content-box;\n        padding:0 4px;\n        width: 4px;\n        transform:translateX(-6px);\n    }",
      ""
    ])
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = c(n(25)),
      a = c(n(2)),
      i = c(n(0)),
      A = c(n(1)),
      o = c(n(3)),
      s = c(n(4)),
      u = c(n(11)),
      l = c(n(480));

    function c(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var d = function (e, t, n, r) {
        return new(n || (n = u.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      h = function (e) {
        function t(e) {
          (0, i.default)(this, t);
          var n = (0, o.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
          n.params = e, n.offsetBegin = 0, n.offsetEnd = 0, n.waitingForData = !0;
          var r = e.type,
            A = e.url,
            s = e.timestamp;
          return n.type = r, n.timestamp = s, n.url = A, n.state = "init", n.videoRef =
            document.createElement("video"), n.videoRef.oncanplay = function () {
              n.waitingForData = !1, n.emit("canplay")
            }, n.videoRef.onwaiting = function () {
              n.waitingForData = !0, n.emit("waitingToPlay")
            }, n
        }
        return (0, s.default)(t, e), (0, A.default)(t, [{
          key: "init",
          value: function (e) {
            return d(this, void 0, void 0, r.default.mark((function t() {
              var n, a = this;
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    if (!e) {
                      t.next = 3;
                      break
                    }
                    return t.next = 3, e;
                  case 3:
                    return console.log("init video track"), t
                      .next = 6, new u.default((function (e) {
                        var t = a.videoRef;
                        t.src = a.url, p(t), t.preload =
                          "metadata", t.onloadeddata =
                          function (n) {
                            var r = t.duration;
                            r != r ? r = Number
                              .NEGATIVE_INFINITY : r *= 1e3, a
                              .offsetEnd = a.offsetBegin + r,
                              t.pause(), a.state = "ready",
                              console.log("init video ready"),
                              e("ready")
                          }, t.onerror = function (t) {
                            console.error(t), e("error")
                          }
                      }));
                  case 6:
                    return n = t.sent, t.abrupt("return", n);
                  case 8:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "doSetTrack",
          value: function (e, t, n) {
            return d(this, void 0, void 0, r.default.mark((function t() {
              return r.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    n && this.setVideoTime(e);
                  case 1:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "showTrackCb",
          value: function (e) {
            e && (g(e) || e.appendChild(this.videoRef))
          }
        }, {
          key: "hideTrackCb",
          value: function () {
            this.videoRef && this.videoRef.pause()
          }
        }, {
          key: "setPlaySpeed",
          value: function (e) {
            this.videoRef && (this.videoRef.playbackRate = e)
          }
        }, {
          key: "pause",
          value: function () {
            this.videoRef && this.videoRef.pause()
          }
        }, {
          key: "play",
          value: function () {
            this.videoRef && "playing" === this.state ? this.videoRef.play() :
              this.videoRef.pause()
          }
        }, {
          key: "setVideoTime",
          value: function (e) {
            this.videoRef.currentTime = (e - this.offsetBegin) / 1e3
          }
        }, {
          key: "isWaiting",
          value: function (e) {
            return !(e < this.offsetBegin || e > this.offsetEnd) && this
              .waitingForData
          }
        }]), t
      }(l.default);
    t.default = h;
    var p = function (e) {
        e.setAttribute("data-x-4wb", "true"), e.setAttribute("playsinline",
          "playsinline"), e.setAttribute("webkit-playsinline", "webkit-playsinline")
      },
      f = function (e) {
        return "true" === e.getAttribute("data-x-4wb")
      },
      g = function (e) {
        if (e.children.length > 0)
          for (var t = 0, n = e.children.length; t < n; t++) {
            var r = e.children[t];
            if ("video" === r.tagName.toLowerCase() && f(r)) return !0
          }
        return !1
      }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = v(n(25)),
      a = v(n(36)),
      i = v(n(2)),
      A = v(n(0)),
      o = v(n(1)),
      s = v(n(3)),
      u = v(n(4)),
      l = v(n(7)),
      c = v(n(131)),
      d = v(n(11)),
      h = v(n(517)),
      p = n(152),
      f = n(151),
      g = v(n(524)),
      y = v(n(484));

    function v(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var m = function (e, t, n, r) {
        return new(n || (n = d.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      w = function (e) {
        if (!c.default.asyncIterator) throw new TypeError(
          "Symbol.asyncIterator is not defined.");
        var t, n = e[c.default.asyncIterator];
        return n ? n.call(e) : (e = "function" == typeof __values ? __values(e) : (0, l
          .default)(e), t = {}, r("next"), r("throw"), r("return"), t[c.default
          .asyncIterator] = function () {
          return this
        }, t);

        function r(n) {
          t[n] = e[n] && function (t) {
            return new d.default((function (r, a) {
              (function (e, t, n, r) {
                d.default.resolve(r).then((function (t) {
                  e({
                    value: t,
                    done: n
                  })
                }), t)
              })(r, a, (t = e[n](t)).done, t.value)
            }))
          }
        }
      },
      B = function (e) {
        function t(e, n) {
          (0, A.default)(this, t);
          var r = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e,
            n));
          return r.params = e, r.drawManager = null, r.records = [], r
        }
        return (0, u.default)(t, e), (0, o.default)(t, [{
          key: "init",
          value: function () {
            return m(this, void 0, void 0, r.default.mark((function e() {
              var t, n, i, A, o, s = this;
              return r.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return e.next = 2, this.fetchData();
                  case 2:
                    if (t = e.sent, n = (0, a.default)(t, 2), i =
                      n[0], A = n[1], console.log("init ", i, A),
                      "error" !== i) {
                      e.next = 12;
                      break
                    }
                    return this.state = "error", e.abrupt(
                      "return", "error");
                  case 12:
                    return o = [], this.isCompatible && (o.push(
                        new h.default(10,
                          '16:{"mode"¦"draw"，"tool"¦"flag"，"size"¦1，"color"¦"#000000"，"fontsize"¦24};',
                          !1)), o.push(new h.default(20,
                        '16:{"color"¦"#000"};16:{"size"¦1};',
                        !1)), o.push(new h.default(30,
                        '16:{"ownerCanvasHeight"¦1000，"ownerCanvasWidth"¦1300};',
                        !1))), A.forEach((function (e) {
                        o.push(new h.default(e.time, e.str, s
                          .isCompatible))
                      })), this.isCompatible && o.length && M(o),
                      this.records = o, this.state = "ready", e
                      .abrupt("return", "ready");
                  case 19:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "doSetTrack",
          value: function (e, t, n) {
            return m(this, void 0, void 0, r.default.mark((function a() {
              var i, A, o, s, u, l;
              return r.default.wrap((function (r) {
                for (;;) switch (r.prev = r.next) {
                  case 0:
                    if (0 === (i = t ? this.nextRecordIndex :
                      0) && console.warn("seek back", e, n, i), !
                      this.records.length || !this.drawManager) {
                      r.next = 14;
                      break
                    }
                    if (A = !1, o = C(this.records, e, this
                        .offsetBegin, i), s = this.records.slice(
                        i, o), this.nextRecordIndex = o, n && (u =
                        I(s), s = u.recordsToExecute, A = u
                        .needSkipFirstCleanFrame), s.length && (
                        0 === i && (l = this.params.account, this
                          .drawManager.clear(l), this.drawManager
                          .clearImage(), this.drawManager
                          .clearHtmlFile(), this.drawManager
                          .resetState()), x(s, A, this
                          .drawManager, this.params.account)),
                      this.nextRecordIndex !== this.records.length
                      ) {
                      r.next = 12;
                      break
                    }
                    return r.next = 12, this.hideTrack();
                  case 12:
                    r.next = 16;
                    break;
                  case 14:
                    return r.next = 16, this.hideTrack();
                  case 16:
                  case "end":
                    return r.stop()
                }
              }), a, this)
            })))
          }
        }, {
          key: "showTrackCb",
          value: function (e) {
            e && !this.drawManager && (this.drawManager = new g.default(e))
          }
        }, {
          key: "isCompatible",
          get: function () {
            return "1.0" === this.opt.version
          }
        }]), t
      }(y.default);

    function M(e) {
      if (!e) return [];
      if (0 === e.length) return e;
      for (var t = void 0, n = "flag", r = 0, a = e.length; r < a; r++)
        for (var i = e[r].actions, A = 0; A < i.length;) {
          var o = i[A];
          switch (o.TYPE) {
            case f.WActions.CALIBRATE:
              var s = o.color;
              if (s) {
                if (s === t) {
                  i.splice(A, 1);
                  continue
                }
                t = s
              }
              A++;
              continue;
            case f.WActions.START:
              "flag" === n && (n = "free", console.log("deleted"), i.splice(A, 0, new p
                .CalibrateAction({
                  tool: "free"
                })), ++A), ++A;
              continue;
            case f.WActions.LASER_PEN:
              "free" === n && (n = "flag", console.log("insert flage"), i.splice(A, 0,
                new p.CalibrateAction({
                  tool: "flag"
                })), ++A), ++A;
              continue;
            case f.WActions.LASER_PEN_END:
              ++A;
            default:
              ++A
          }
        }
      e.forEach((function (e) {
        return e.updateIndex()
      }))
    }

    function C(e, t, n) {
      for (var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, a =
          r; a < e.length; a++) {
        var i = e[a];
        if (i.time + n > t) return a
      }
      return a
    }

    function I(e) {
      for (var t = !1, n = e.length; n--;) {
        if (e[n].isClearFrame) break
      }
      if (-1 !== n) {
        for (var r = 0; r < n; r++) {
          var a = e[r];
          e[r] = a.toStateRelatedRecord()
        }
        t = !0, e = e.filter((function (e) {
          return 0 !== e.actions.length
        }))
      }
      return {
        needSkipFirstCleanFrame: t,
        recordsToExecute: e
      }
    }

    function x(e, t, n, a) {
      var i, A, o, s;
      return m(this, void 0, void 0, r.default.mark((function u() {
        var l, c, d;
        return r.default.wrap((function (r) {
          for (;;) switch (r.prev = r.next) {
            case 0:
              r.prev = 0, r.prev = 1, i = w(e);
            case 3:
              return r.next = 5, i.next();
            case 5:
              if ((A = r.sent).done) {
                r.next = 19;
                break
              }
              if (!(l = A.value).isClearFrame || !t) {
                r.next = 15;
                break
              }
              return c = l.actions, d = l.clearIndex, r.next = 12, n
                .executeActions(a, c.slice(d[0]));
            case 12:
              t = !1, r.next = 17;
              break;
            case 15:
              return r.next = 17, n.executeActions(a, l.actions);
            case 17:
              r.next = 3;
              break;
            case 19:
              r.next = 24;
              break;
            case 21:
              r.prev = 21, r.t0 = r.catch(1), o = {
                error: r.t0
              };
            case 24:
              if (r.prev = 24, r.prev = 25, !A || A.done || !(s = i
                  .return)) {
                r.next = 29;
                break
              }
              return r.next = 29, s.call(i);
            case 29:
              if (r.prev = 29, !o) {
                r.next = 32;
                break
              }
              throw o.error;
            case 32:
              return r.finish(29);
            case 33:
              return r.finish(24);
            case 34:
              r.next = 39;
              break;
            case 36:
              r.prev = 36, r.t1 = r.catch(0), console.error(r.t1);
            case 39:
            case "end":
              return r.stop()
          }
        }), u, this, [
          [0, 36],
          [1, 21, 24, 34],
          [25, , 29, 33]
        ])
      })))
    }
    t.default = B
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(0)),
      a = u(n(1)),
      i = n(151),
      A = s(n(518)),
      o = s(n(269));

    function s(e) {
      if (e && e.__esModule) return e;
      var t = {};
      if (null != e)
        for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
      return t.default = e, t
    }

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function () {
      function e(t, n, a) {
        (0, r.default)(this, e), this.time = t, this.isCompatible = a, "string" ==
          typeof n ? (this.data = n, this.actions = a ? A.unpackBulk(n) : o.unpackBulk(
            n)) : (this.data = "", this.actions = n), this.clearIndex = [], this
          .isClearFrame = !1, this.updateIndex()
      }
      return (0, a.default)(e, [{
        key: "updateIndex",
        value: function () {
          this.clearIndex = this.actions.reduce((function (e, t, n) {
            return t.TYPE === i.WActions.CLEAR && e.push(n), e
          }), []), this.isClearFrame = 0 !== this.clearIndex.length
        }
      }, {
        key: "getStateRelatedActions",
        value: function () {
          return this.actions.filter((function (e) {
            return i.StateRelatedActions.indexOf(e.TYPE) > -1
          }))
        }
      }, {
        key: "toStateRelatedRecord",
        value: function () {
          return new e(this.time, this.getStateRelatedActions(), this
            .isCompatible)
        }
      }]), e
    }();
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    }), t.packBulk = function (e) {
      var t = e.map((function (e) {
        return o(e)
      })).join(";") + ";";
      return i.default.m.syncmanager("packBulk anyAction", t), t
    }, t.pack = o, t.unpackBulk = function (e) {
      var t = [];
      return e.split(";").forEach((function (e) {
        var n = s(e);
        if (n)
          if (Array.isArray(n))
            for (; n.length;) {
              var r = n.shift();
              r && t.push(r)
            } else t.push(n)
      })), t
    }, t.unpack = s, t.formatColor = u, t.hex2rgb = l;
    var r, a = n(104),
      i = (r = a) && r.__esModule ? r : {
        default: r
      },
      A = n(152);

    function o(e, t) {
      return i.default.m.syncmanager("pack anyAction", e), console.assert(void 0 !== e
        .action, "ooops"), e.action.toString()
    }

    function s(e) {
      if (e) {
        var t = e.indexOf(":");
        i.default.m.syncmanager("unpack command ", e);
        var n = void 0,
          r = void 0; - 1 == t ? (n = +e, r = "") : (n = +e.slice(0, t), r = e.slice(t +
          1, e.length));
        var a = r.length > 1 ? r.split(",") : [];
        switch (i.default.command("unpack", e), n) {
          case 1:
            var o = [new A.StartAction(+a[0], +a[1])];
            return a[2] && o.unshift(new A.CalibrateAction({
              color: u(a[2])
            })), o;
          case 2:
            var s = [new A.MoveAction(+a[0], +a[1])];
            return a[2] && s.unshift(new A.CalibrateAction({
              color: u(a[2])
            })), s;
          case 3:
            var l = [new A.EndAction(+a[0], +a[1])];
            return a[2] && l.unshift(new A.CalibrateAction({
              color: u(a[2])
            })), l;
          case 12:
            return new A.LaserPenAction(+a[0], +a[1]);
          case 13:
            return new A.LaserPenEndAction;
          case 4:
            return new A.RevokeAction;
          case 5:
            return new A.SerialAction;
          case 6:
            return new A.ClearAction;
          case 7:
            return new A.ClearAckAction;
          case 8:
            return new A.SyncRequestAction;
          case 9:
            return void console.warn("收到了同步指令，未做兼容，请联系云信技术支持");
          case 10:
            return new A.SyncPrepareAction;
          case 11:
            return new A.SyncPrepareAckAction;
          case 14:
            return new A.FileAction({
              docId: a[0],
              currentPage: +a[1],
              pageCount: +a[2],
              type: "0" == a[2] ? "clear" : "img"
            });
          default:
        }
      }
    }

    function u(e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 16;
      if (!e) return -1;
      var n = "";
      return 16 === t ? (e = +e) < 0 ? (n = l(e), console.log("hex2rgb", e, n), n) : ((n =
          e.toString(16)).length < 3 && (n = ("000" + n).slice(-3)), n.length > 3 && n
        .length < 6 && (n = ("000" + n).slice(-6)), n = "#" + n) : 10 === t ? (n = e
        .replace(/#/gi, ""), n = parseInt("0x" + n), isNaN(n) ? -1 : n) : void 0
    }

    function l(e) {
      var t = e >> 16 & 255,
        n = e >> 8 & 255,
        r = 255 & e;
      return t = t.toString(16), n = n.toString(16), r = r.toString(16), console.log(
          "rgb", t, n, r), "#" + ("0" + t).slice(-2) + ("0" + n).slice(-2) + ("0" + r)
        .slice(-2)
    }
  }, function (e, t, n) {
    (function (r) {
      t.formatArgs = function (t) {
        if (t[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ?
            " %c" : " ") + t[0] + (this.useColors ? "%c " : " ") + "+" + e.exports
          .humanize(this.diff), !this.useColors) return;
        const n = "color: " + this.color;
        t.splice(1, 0, n, "color: inherit");
        let r = 0,
          a = 0;
        t[0].replace(/%[a-zA-Z%]/g, e => {
          "%%" !== e && (r++, "%c" === e && (a = r))
        }), t.splice(a, 0, n)
      }, t.save = function (e) {
        try {
          e ? t.storage.setItem("debug", e) : t.storage.removeItem("debug")
        } catch (e) {}
      }, t.load = function () {
        let e;
        try {
          e = t.storage.getItem("debug")
        } catch (e) {}!e && void 0 !== r && "env" in r && (e = r.env.DEBUG);
        return e
      }, t.useColors = function () {
        if ("undefined" != typeof window && window.process && ("renderer" === window
            .process.type || window.process.__nwjs)) return !0;
        if ("undefined" != typeof navigator && navigator.userAgent && navigator
          .userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) return !1;
        return "undefined" != typeof document && document.documentElement && document
          .documentElement.style && document.documentElement.style.WebkitAppearance ||
          "undefined" != typeof window && window.console && (window.console.firebug ||
            window.console.exception && window.console.table) || "undefined" !=
          typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase()
          .match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" !=
          typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase()
          .match(/applewebkit\/(\d+)/)
      }, t.storage = function () {
        try {
          return localStorage
        } catch (e) {}
      }(), t.destroy = (() => {
        let e = !1;
        return () => {
          e || (e = !0, console.warn(
            "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
            ))
        }
      })(), t.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC",
        "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99",
        "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC",
        "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99",
        "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00",
        "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33",
        "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300",
        "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633",
        "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066",
        "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399",
        "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00",
        "#FFCC33"
      ], t.log = console.debug || console.log || (() => {}), e.exports = n(481)(t);
      const {
        formatters: a
      } = e.exports;
      a.j = function (e) {
        try {
          return JSON.stringify(e)
        } catch (e) {
          return "[UnexpectedJSONParseError]: " + e.message
        }
      }
    }).call(this, n(154))
  }, function (e, t) {
    var n = 1e3,
      r = 6e4,
      a = 60 * r,
      i = 24 * a;

    function A(e, t, n, r) {
      var a = t >= 1.5 * n;
      return Math.round(e / n) + " " + r + (a ? "s" : "")
    }
    e.exports = function (e, t) {
      t = t || {};
      var o = typeof e;
      if ("string" === o && e.length > 0) return function (e) {
        if ((e = String(e)).length > 100) return;
        var t =
          /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i
          .exec(e);
        if (!t) return;
        var A = parseFloat(t[1]);
        switch ((t[2] || "ms").toLowerCase()) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return 315576e5 * A;
          case "weeks":
          case "week":
          case "w":
            return 6048e5 * A;
          case "days":
          case "day":
          case "d":
            return A * i;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return A * a;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return A * r;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return A * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return A;
          default:
            return
        }
      }(e);
      if ("number" === o && isFinite(e)) return t.long ? function (e) {
        var t = Math.abs(e);
        if (t >= i) return A(e, t, i, "day");
        if (t >= a) return A(e, t, a, "hour");
        if (t >= r) return A(e, t, r, "minute");
        if (t >= n) return A(e, t, n, "second");
        return e + " ms"
      }(e) : function (e) {
        var t = Math.abs(e);
        if (t >= i) return Math.round(e / i) + "d";
        if (t >= a) return Math.round(e / a) + "h";
        if (t >= r) return Math.round(e / r) + "m";
        if (t >= n) return Math.round(e / n) + "s";
        return e + "ms"
      }(e);
      throw new Error("val is not a non-empty string or a valid number. val=" + JSON
        .stringify(e))
    }
  }, function (e, t, n) {
    (function (r) {
      const a = n(522),
        i = n(265);
      t.init = function (e) {
        e.inspectOpts = {};
        const n = Object.keys(t.inspectOpts);
        for (let r = 0; r < n.length; r++) e.inspectOpts[n[r]] = t.inspectOpts[n[r]]
      }, t.log = function (...e) {
        return r.stderr.write(i.format(...e) + "\n")
      }, t.formatArgs = function (n) {
        const {
          namespace: r,
          useColors: a
        } = this;
        if (a) {
          const t = this.color,
            a = "[3" + (t < 8 ? t : "8;5;" + t),
            i = `  ${a};1m${r} [0m`;
          n[0] = i + n[0].split("\n").join("\n" + i), n.push(a + "m+" + e.exports
            .humanize(this.diff) + "[0m")
        } else n[0] = function () {
          if (t.inspectOpts.hideDate) return "";
          return (new Date).toISOString() + " "
        }() + r + " " + n[0]
      }, t.save = function (e) {
        e ? r.env.DEBUG = e : delete r.env.DEBUG
      }, t.load = function () {
        return r.env.DEBUG
      }, t.useColors = function () {
        return "colors" in t.inspectOpts ? Boolean(t.inspectOpts.colors) : a.isatty(r
          .stderr.fd)
      }, t.destroy = i.deprecate(() => {},
        "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
        ), t.colors = [6, 2, 3, 4, 5, 1];
      try {
        const e = n(523);
        e && (e.stderr || e).level >= 2 && (t.colors = [20, 21, 26, 27, 32, 33, 38, 39,
          40, 41, 42, 43, 44, 45, 56, 57, 62, 63, 68, 69, 74, 75, 76, 77, 78, 79,
          80, 81, 92, 93, 98, 99, 112, 113, 128, 129, 134, 135, 148, 149, 160, 161,
          162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 178, 179, 184,
          185, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209,
          214, 215, 220, 221
        ])
      } catch (e) {}
      t.inspectOpts = Object.keys(r.env).filter(e => /^debug_/i.test(e)).reduce((e,
        t) => {
          const n = t.substring(6).toLowerCase().replace(/_([a-z])/g, (e, t) => t
            .toUpperCase());
          let a = r.env[t];
          return a = !!/^(yes|on|true|enabled)$/i.test(a) || !
            /^(no|off|false|disabled)$/i.test(a) && ("null" === a ? null : Number(a)),
            e[n] = a, e
        }, {}), e.exports = n(481)(t);
      const {
        formatters: A
      } = e.exports;
      A.o = function (e) {
        return this.inspectOpts.colors = this.useColors, i.inspect(e, this
          .inspectOpts).split("\n").map(e => e.trim()).join(" ")
      }, A.O = function (e) {
        return this.inspectOpts.colors = this.useColors, i.inspect(e, this
          .inspectOpts)
      }
    }).call(this, n(154))
  }, function (e, t) {
    t.isatty = function () {
      return !1
    }, t.ReadStream = function () {
      throw new Error("tty.ReadStream is not implemented")
    }, t.WriteStream = function () {
      throw new Error("tty.ReadStream is not implemented")
    }
  }, function (e, t, n) {
    "use strict";
    e.exports = {
      stdout: !1,
      stderr: !1
    }
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = E(n(25)),
      a = E(n(21)),
      i = E(n(36)),
      A = E(n(5)),
      o = E(n(2)),
      s = E(n(0)),
      u = E(n(1)),
      l = E(n(3)),
      c = E(n(4)),
      d = E(n(7)),
      h = E(n(131)),
      p = E(n(11)),
      f = E(n(268)),
      g = E(n(48)),
      y = E(n(159)),
      v = E(n(104)),
      m = E(n(525)),
      w = E(n(526)),
      B = n(152),
      M = T(n(269)),
      C = E(n(527)),
      I = n(151),
      x = E(n(261)),
      b = n(160),
      k = T(b);

    function T(e) {
      if (e && e.__esModule) return e;
      var t = {};
      if (null != e)
        for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
      return t.default = e, t
    }

    function E(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var D = function (e, t, n, r) {
        return new(n || (n = p.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      N = function (e) {
        if (!h.default.asyncIterator) throw new TypeError(
          "Symbol.asyncIterator is not defined.");
        var t, n = e[h.default.asyncIterator];
        return n ? n.call(e) : (e = "function" == typeof __values ? __values(e) : (0, d
          .default)(e), t = {}, r("next"), r("throw"), r("return"), t[h.default
          .asyncIterator] = function () {
          return this
        }, t);

        function r(n) {
          t[n] = e[n] && function (t) {
            return new p.default((function (r, a) {
              (function (e, t, n, r) {
                p.default.resolve(r).then((function (t) {
                  e({
                    value: t,
                    done: n
                  })
                }), t)
              })(r, a, (t = e[n](t)).done, t.value)
            }))
          }
        }
      },
      P = function (e) {
        return this instanceof P ? (this.v = e, this) : new P(e)
      },
      Q = function (e, t, n) {
        if (!h.default.asyncIterator) throw new TypeError(
          "Symbol.asyncIterator is not defined.");
        var r, a = n.apply(e, t || []),
          i = [];
        return r = {}, A("next"), A("throw"), A("return"), r[h.default.asyncIterator] =
          function () {
            return this
          }, r;

        function A(e) {
          a[e] && (r[e] = function (t) {
            return new p.default((function (n, r) {
              i.push([e, t, n, r]) > 1 || o(e, t)
            }))
          })
        }

        function o(e, t) {
          try {
            (n = a[e](t)).value instanceof P ? p.default.resolve(n.value.v).then(s, u) :
              l(i[0][2], n)
          } catch (e) {
            l(i[0][3], e)
          }
          var n
        }

        function s(e) {
          o("next", e)
        }

        function u(e) {
          o("throw", e)
        }

        function l(e, t) {
          e(t), i.shift(), i.length && o(i[0][0], i[0][1])
        }
      },
      O = ((0, f.default)("data"), function (e) {
        return (0, b.getKiloBytes)(e).toFixed(2) + "KB"
      }),
      _ = function (e) {
        var t = e.length,
          n = y.default.ungzip(e, {
            to: "string"
          });
        return console.debug("GZIP数据大小:" + O(t) + ",原始数据大小：" + O(n) + "，压缩比率为 " + (100 *
          t / n.length).toFixed(2) + "%"), n
      },
      S = function (e) {
        function t(e) {
          var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          (0, s.default)(this, t);
          var r = (0, l.default)(this, (t.__proto__ || (0, o.default)(t)).call(this));
          return r.afterInit = function () {
              r.state = "inited", r.syncManager.send({
                toAccount: 0,
                actions: [{
                  action: new B.VersionAction({
                    ver: 1,
                    account: r.account,
                    gzip: !0
                  })
                }]
              }), r.emit("inited")
            }, r.afterSync = function (e) {
              r.syncState = "done", r.flushInCommingQueue(), r.emit("afterSync", e)
            }, r.readyToSyncData = function () {
              "owner" === r.identity && (r.syncState = "begin", r.syncBegin()),
                "normal" === r.identity && (r.syncState = "waiting", r.syncRequest(r
                  .ownerAccount))
            }, r.onIframeMessage = function (e) {
              v.default.h5("onIframeMessage", e.data);
              var t = e.data || {};
              if ("to_yunxin_wb" === t.identity) {
                var n = r.syncManager.fileData;
                if (n) {
                  var a = (0, A.default)({}, n),
                    i = t.page,
                    o = t.anim,
                    s = t.trigger,
                    u = (t.time, [i, o, s, t.isBack ? "1" : "0", "0"].join("&"));
                  if (console.warn("onIframeMessage"), console.warn(u, a.h5Cmd), 0 ===
                    parseInt(i)) return;
                  a.h5Cmd === u && console.warn("the same cmd"), a.currentPage != i && r
                    .drawAdapter.clear(), a.currentPage = parseInt(i), a.h5Cmd = u, v
                    .default.h5("onIframeMessage->emit action", e.data), r.drawAdapter
                    .worker.emitAction({
                      account: r.account,
                      action: new B.FileAction(a)
                    })
                }
              }
            }, r.simulator = new m.default(r), r.container = e, r.opt = n, r.account = n
            .account, r.nim = n.nim, r.identity = n.identity, r.ownerAccount = n
            .ownerAccount, r.connector = n.whiteboard, r.incommingQueue = [], r
            .actionProcessing = !1, console.log("init wb adapter"), r.syncManager = new w
            .default(r.account), r.syncManager.on("flush", (function (e) {
              r.connector && r.connector.sendData && r.connector.sendData(e)
            })), r.fileMap = {}, r.eventHub = x.default, r.state = "created", r
            .syncState = "inited", r.drawAdapter = new C.default(e, r.opt), r.drawAdapter
            .on("inited", r.afterInit), r.drawAdapter.on("action", (function (e) {
              console.log("syncState", r.syncState), "waiting" !== r.syncState && r
                .syncManager.broadcastAction(e)
            })), r.drawAdapter.on("instantAction", (function (e) {
              console.warn("instant action", r.syncState), "waiting" !== r
                .syncState && setTimeout((function () {
                  r.syncManager.send({
                    toAccount: 0,
                    actions: [e]
                  }, 1)
                }))
            })), r.connectorStatus = "off", r.connector && (r.connector.on("data", (
              function (e) {
                r.execute(e)
              })), r.connector.on("joinChannel", (function (e) {
              console.log("join channel ", e), e.account === r.opt.ownerAccount &&
                "waiting" === r.syncState && (r.syncState = "done", r
                  .flushInCommingQueue())
            }))), r.timmer = setInterval((function () {}), 100), r
        }
        return (0, c.default)(t, e), (0, u.default)(t, [{
          key: "execute",
          value: function (e) {
            var t = e.account,
              n = e.data;
            if (t && n && t !== this.account) {
              var r = void 0,
                a = void 0,
                A = void 0,
                o = !1;
              if ("number" == typeof n && (n = "" + n), "GZIP" === n.substr(0,
                4)) {
                var s = n.substr(5, 150),
                  u = w.default.GZIP_TESTER_1.exec(s);
                if (!u) return void console.error("未匹配到GZIP压缩格式", n);
                s = "";
                var l = (0, i.default)(u, 4),
                  c = l[0],
                  d = l[1],
                  h = l[2],
                  p = l[3];
                a = d, A = "gzip";
                var f = n.substr(5 + c.length);
                if ("1" === h) n = _(f), r = M.unpackBulk(n);
                else {
                  var g = this.incommingQueue.find((function (e) {
                    return e.id === d
                  }));
                  if (!g) {
                    var y = new Array(+h);
                    return y[+p] = f, g = {
                      account: t,
                      type: A,
                      id: a,
                      total: +h,
                      curLen: 1,
                      data: y,
                      result: [new B.SerialAction]
                    }, void this.incommingQueue.push(g)
                  }
                  if (g.curLen++, g.data[+p] = f, g.total !== g.curLen) return;
                  var m = _(g.data.join(""));
                  r = M.unpackBulk(m), g.result = r, o = !0
                }
              } else r = M.unpackBulk(n), a = "" + Date.now() + Math.random(), A =
                "text";
              var C = o ? this.incommingQueue.findIndex((function (e) {
                  return e.id === a
                })) : -1,
                x = r.findIndex((function (e) {
                  return e.TYPE === I.WActions.SYNC || e.TYPE === I.WActions
                    .SYNC_PREPARE
                }));
              if (x > -1) {
                var b = r[x];
                b.TYPE === I.WActions.SYNC ? this.handleSyncAction(b) : this
                  .executeActions(t, r)
              } else "waiting" === this.syncState || this.actionProcessing ? o ||
                this.incommingQueue.push({
                  account: t,
                  type: A,
                  id: a,
                  total: 1,
                  curLen: 1,
                  data: [],
                  result: r
                }) : 0 == this.incommingQueue.length ? (v.default.m.worker(
                  "execute:", t, r), this.executeActions(t, r)) : 0 === C ? this
                .flushInCommingQueue() : o || this.incommingQueue.push({
                  account: t,
                  type: A,
                  id: a,
                  total: 1,
                  curLen: 1,
                  data: [],
                  result: r
                })
            }
          }
        }, {
          key: "executeActions",
          value: function (e, t) {
            var n, o, s, u;
            return D(this, void 0, void 0, r.default.mark((function l() {
              var c, d, h, p, f, g, y, m, w, M, C;
              return r.default.wrap((function (r) {
                for (;;) switch (r.prev = r.next) {
                  case 0:
                    c = this.drawAdapter, r.prev = 1, n = N(t);
                  case 3:
                    return r.next = 5, n.next();
                  case 5:
                    if ((o = r.sent).done) {
                      r.next = 69;
                      break
                    }
                    d = o.value, r.t0 = d.TYPE, r.next = r.t0 ===
                      I.WActions.REVOKE || r.t0 === I.WActions
                      .REDO || r.t0 === I.WActions.CALIBRATE || r
                      .t0 === I.WActions.TEXT || r.t0 === I
                      .WActions.START || r.t0 === I.WActions
                      .MOVE || r.t0 === I.WActions.END || r.t0 ===
                      I.WActions.LASER_PEN || r.t0 === I.WActions
                      .LASER_PEN_END ? 11 : r.t0 === I.WActions
                      .SERIAL ? 13 : r.t0 === I.WActions.CLEAR ?
                      15 : r.t0 === I.WActions.CLEAR_ACK ? 19 : r
                      .t0 === I.WActions.SYNC_REQUEST ? 21 : r
                      .t0 === I.WActions.SYNC ? 25 : r.t0 === I
                      .WActions.SYNC_PREPARE ? 30 : r.t0 === I
                      .WActions.SYNC_PREPARE_ACK ? 33 : r.t0 === I
                      .WActions.FILE ? 35 : r.t0 === I.WActions
                      .VERSION ? 64 : 66;
                    break;
                  case 11:
                    return c.act(e, d), r.abrupt("break", 67);
                  case 13:
                    return console.log("serial:", d), r.abrupt(
                      "break", 67);
                  case 15:
                    return this.syncManager.clear(), this
                      .syncManager.makeClearAck(e), c.clear(d
                        .accounts, e, {
                          force: this.ownerAccount === e,
                          quiet: !0
                        }), r.abrupt("break", 67);
                  case 19:
                    return c.act(e, d), r.abrupt("break", 67);
                  case 21:
                    return console.warn(
                        "recive sync request from ", e), h = this
                      .drawAdapter.worker.getSnapshot(), this
                      .syncManager.syncTo(e, h), r.abrupt("break",
                        67);
                  case 25:
                    return console.warn("recive sync from ", e),
                      p = d, r.next = 29, this.handleSyncAction(
                      p);
                  case 29:
                    return r.abrupt("break", 67);
                  case 30:
                    return console.warn(
                        "recive sync prepare from ", e), this
                      .syncResponse(e), r.abrupt("break", 67);
                  case 33:
                    return console.warn(
                        "recive sync prepare ack from ", e), r
                      .abrupt("break", 67);
                  case 35:
                    if (d.TYPE !== I.WActions.FILE) {
                      r.next = 64;
                      break
                    }
                    if (f = d.file, v.default.h5(
                        "recive h5 FileAction", f), g = this
                      .syncManager.fileData, y = g && (0, A
                        .default)({}, g), (0, a.default)(g) !== (
                        0, a.default)(f)) {
                      r.next = 42;
                      break
                    }
                    return r.abrupt("return", console.warn(
                      "same file data"));
                  case 42:
                    if ("img" !== f.type) {
                      r.next = 62;
                      break
                    }
                    if (!y) {
                      r.next = 50;
                      break
                    }
                    "h5" === y.type && this.clearHtmlFile(), f
                      .docId && f.docId == y.docId && (y
                        .currentPage = parseInt("" + (f
                          .currentPage || 1)), y.url = y.urlStr
                        .replace("{index}", "" + f.currentPage),
                        this.image(y, e)), m = B.FileAction
                      .immuteUpdate(y, f), w = (0, i.default)(m,
                        1), M = w[0], this.syncManager
                      .setFileData(M), r.next = 60;
                    break;
                  case 50:
                    if (C = void 0, !this.opt.handleFile) {
                      r.next = 57;
                      break
                    }
                    return r.next = 54, this.opt.handleFile(f
                      .type, f);
                  case 54:
                    C = r.sent, r.next = 58;
                    break;
                  case 57:
                    C = f;
                  case 58:
                    this.syncManager.setFileData(C), this.image(f,
                      e);
                  case 60:
                    r.next = 63;
                    break;
                  case 62:
                    "h5" === f.type ? (v.default.h5(
                        "current file", y), y ? ("img" == y
                        .type && this.clearImage(e), f.docId &&
                        f.docId == y.docId ? (v.default.h5(
                            "current file h5 cmd is ", y.h5Cmd),
                          v.default.h5("file h5 cmd is ", f
                            .h5Cmd), y.h5Cmd !== f.h5Cmd && this
                          .pagedHtmlFile(f.h5Cmd.split("&"))) :
                        (this.syncManager.setFileData(f), this
                          .setHtmlFile(f, e), f.h5Cmd &&
                          setTimeout(this.pagedHtmlFile.bind(
                            this, f.h5Cmd.split("&")), 3e3))) :
                      (this.syncManager.setFileData(f), this
                        .setHtmlFile(f, e), f.h5Cmd &&
                        setTimeout(this.pagedHtmlFile.bind(this,
                          f.h5Cmd.split("&")), 3e3))) : (v
                      .default.h5("delete file", y), this
                      .syncManager.setFileData(void 0), y && (
                        "img" === y.type ? this.clearImage(e) :
                        "h5" === y.type && this.clearHtmlFile())
                      );
                  case 63:
                    return r.abrupt("break", 67);
                  case 64:
                    if (d.TYPE !== I.WActions.VERSION) {
                      r.next = 66;
                      break
                    }
                    return r.abrupt("break", 67);
                  case 66:
                    d.TYPE;
                  case 67:
                    r.next = 3;
                    break;
                  case 69:
                    r.next = 74;
                    break;
                  case 71:
                    r.prev = 71, r.t1 = r.catch(1), s = {
                      error: r.t1
                    };
                  case 74:
                    if (r.prev = 74, r.prev = 75, !o || o.done ||
                      !(u = n.return)) {
                      r.next = 79;
                      break
                    }
                    return r.next = 79, u.call(n);
                  case 79:
                    if (r.prev = 79, !s) {
                      r.next = 82;
                      break
                    }
                    throw s.error;
                  case 82:
                    return r.finish(79);
                  case 83:
                    return r.finish(74);
                  case 84:
                  case "end":
                    return r.stop()
                }
              }), l, this, [
                [1, 71, 74, 84],
                [75, , 79, 83]
              ])
            })))
          }
        }, {
          key: "flushInCommingQueue",
          value: function () {
            var e, t;
            return D(this, void 0, void 0, r.default.mark((function n() {
              var a, i, A, o, s, u, l;
              return r.default.wrap((function (n) {
                for (;;) switch (n.prev = n.next) {
                  case 0:
                    if ("waiting" !== this.syncState) {
                      n.next = 2;
                      break
                    }
                    return n.abrupt("return");
                  case 2:
                    a = this.incommingQueue.length;
                  case 3:
                    if (!a) {
                      n.next = 63;
                      break
                    }
                    this.actionProcessing = !0, i = this
                      .incommingQueue.slice(), A = 0, o = !1, n
                      .prev = 8, n.prev = 9, e = void 0, s = N(i);
                  case 11:
                    return n.next = 13, s.next();
                  case 13:
                    if ((u = n.sent).done) {
                      n.next = 33;
                      break
                    }
                    l = u.value, n.t0 = l.type, n.next =
                      "text" === n.t0 || "gzip" === n.t0 ? 19 :
                      "function" === n.t0 ? 29 : 30;
                    break;
                  case 19:
                    if (l.total !== l.curLen) {
                      n.next = 26;
                      break
                    }
                    if (A++, l.dirty) {
                      n.next = 24;
                      break
                    }
                    return n.next = 24, this.executeActions(l
                      .account, l.result);
                  case 24:
                    n.next = 28;
                    break;
                  case 26:
                    throw o = !0, new Error(
                      "message need waiting!");
                  case 28:
                  case 29:
                    return n.abrupt("break", 31);
                  case 30:
                    l.type;
                  case 31:
                    n.next = 11;
                    break;
                  case 33:
                    n.next = 38;
                    break;
                  case 35:
                    n.prev = 35, n.t1 = n.catch(9), e = {
                      error: n.t1
                    };
                  case 38:
                    if (n.prev = 38, n.prev = 39, !u || u.done ||
                      !(t = s.return)) {
                      n.next = 43;
                      break
                    }
                    return n.next = 43, t.call(s);
                  case 43:
                    if (n.prev = 43, !e) {
                      n.next = 46;
                      break
                    }
                    throw e.error;
                  case 46:
                    return n.finish(43);
                  case 47:
                    return n.finish(38);
                  case 48:
                    n.next = 53;
                    break;
                  case 50:
                    n.prev = 50, n.t2 = n.catch(8), console.error(
                      n.t2);
                  case 53:
                    return n.prev = 53, this.incommingQueue = this
                      .incommingQueue.slice(A, this.incommingQueue
                        .length), n.finish(53);
                  case 56:
                    if (!o) {
                      n.next = 60;
                      break
                    }
                    return n.abrupt("break", 63);
                  case 60:
                    a = this.incommingQueue.length;
                  case 61:
                    n.next = 3;
                    break;
                  case 63:
                    this.actionProcessing = !1;
                  case 64:
                  case "end":
                    return n.stop()
                }
              }), n, this, [
                [8, 50, 53, 56],
                [9, 35, 38, 48],
                [39, , 43, 47]
              ])
            })))
          }
        }, {
          key: "destroy",
          value: function () {
            this.drawAdapter && this.drawAdapter.destroy(), this.syncManager &&
              this.syncManager.destroy(), this.eventHub.removeAllListeners(), this
              .removeAllListeners()
          }
        }, {
          key: "enableDraw",
          value: function (e) {
            "inited" === this.state ? this.drawAdapter && this.drawAdapter
              .enableDraw(e) : console.warn("inited")
          }
        }, {
          key: "handleSyncAction",
          value: function (e) {
            var t, n, a, i, A, o;
            return D(this, void 0, void 0, r.default.mark((function s() {
              var u, l, c, d, h, p, f, g, y, v, m, w, C, I, x, k, T, E, D,
                O, _, S, U, F, L, j = this;
              return r.default.wrap((function (s) {
                for (;;) switch (s.prev = s.next) {
                  case 0:
                    console.log(e), u = void 0, l = void 0, c = e
                      .sync, d = c.shapes, h = c.users, p = c
                      .transhShapes, f = c.file, g = c
                      .canvasRatio, y = c.canvasHeight, c
                      .canvasWidth, v = c.ownerWidth, c
                      .ownerHeight, m = d.slice(), w =
                    function () {
                        return Q(this, arguments, r.default.mark((
                          function e() {
                            return r.default.wrap((
                              function (e) {
                                for (;;) switch (e
                                  .prev = e.next) {
                                  case 0:
                                    if (!m.length) {
                                      e.next = 7;
                                      break
                                    }
                                    return e.next = 3,
                                      P(m.shift());
                                  case 3:
                                    return e.next = 5,
                                      e.sent;
                                  case 5:
                                    e.next = 0;
                                    break;
                                  case 7:
                                  case "end":
                                    return e.stop()
                                }
                              }), e, this)
                          })))
                      }, (C = this.drawAdapter.worker.container)
                      .canvasRatio = g, C.resize(), C
                      .updateCanvasPropSize(v, y), I = Date.now(),
                      x = this.drawAdapter.worker.localUser
                      .getCalibrateAction(), k = this
                      .actionProcessing, this.actionProcessing = !
                      0, f && this.executeActions(this
                        .ownerAccount, [new B.FileAction(f)]), s
                      .prev = 15, T = N(w());
                  case 17:
                    return s.next = 19, T.next();
                  case 19:
                    if ((E = s.sent).done) {
                      s.next = 39;
                      break
                    }
                    if (D = E.value) {
                      s.next = 24;
                      break
                    }
                    return s.abrupt("continue", 37);
                  case 24:
                    return s.prev = 24, s.next = 27, this
                      .drawAdapter.worker.restoreShape(D, !1);
                  case 27:
                    s.next = 32;
                    break;
                  case 29:
                    s.prev = 29, s.t0 = s.catch(24), console
                      .error(s.t0);
                  case 32:
                    if (!(Date.now() - I > 200)) {
                      s.next = 37;
                      break
                    }
                    return s.next = 36, (0, b.sleep)(30);
                  case 36:
                    I = Date.now();
                  case 37:
                    s.next = 17;
                    break;
                  case 39:
                    s.next = 44;
                    break;
                  case 41:
                    s.prev = 41, s.t1 = s.catch(15), t = {
                      error: s.t1
                    };
                  case 44:
                    if (s.prev = 44, s.prev = 45, !E || E.done ||
                      !(n = T.return)) {
                      s.next = 49;
                      break
                    }
                    return s.next = 49, n.call(T);
                  case 49:
                    if (s.prev = 49, !t) {
                      s.next = 52;
                      break
                    }
                    throw t.error;
                  case 52:
                    return s.finish(49);
                  case 53:
                    return s.finish(44);
                  case 54:
                    this.drawAdapter.worker.container
                    .fullRender(), s.prev = 55, O = N(h);
                  case 57:
                    return s.next = 59, O.next();
                  case 59:
                    if ((_ = s.sent).done) {
                      s.next = 102;
                      break
                    }
                    if (!(S = _.value).recycle || !S.recycle
                      .length) {
                      s.next = 100;
                      break
                    }
                    s.prev = 63, A = void 0, U = N(S.recycle);
                  case 65:
                    return s.next = 67, U.next();
                  case 67:
                    if ((F = s.sent).done) {
                      s.next = 85;
                      break
                    }
                    return L = F.value, s.prev = 70, s.next = 73,
                      this.drawAdapter.worker.restoreShape(L, !0);
                  case 73:
                    s.next = 78;
                    break;
                  case 75:
                    s.prev = 75, s.t2 = s.catch(70), console
                      .error(s.t2);
                  case 78:
                    if (!(Date.now() - I > 200)) {
                      s.next = 83;
                      break
                    }
                    return s.next = 82, (0, b.sleep)(30);
                  case 82:
                    I = Date.now();
                  case 83:
                    s.next = 65;
                    break;
                  case 85:
                    s.next = 90;
                    break;
                  case 87:
                    s.prev = 87, s.t3 = s.catch(63), A = {
                      error: s.t3
                    };
                  case 90:
                    if (s.prev = 90, s.prev = 91, !F || F.done ||
                      !(o = U.return)) {
                      s.next = 95;
                      break
                    }
                    return s.next = 95, o.call(U);
                  case 95:
                    if (s.prev = 95, !A) {
                      s.next = 98;
                      break
                    }
                    throw A.error;
                  case 98:
                    return s.finish(95);
                  case 99:
                    return s.finish(90);
                  case 100:
                    s.next = 57;
                    break;
                  case 102:
                    s.next = 107;
                    break;
                  case 104:
                    s.prev = 104, s.t4 = s.catch(55), a = {
                      error: s.t4
                    };
                  case 107:
                    if (s.prev = 107, s.prev = 108, !_ || _
                      .done || !(i = O.return)) {
                      s.next = 112;
                      break
                    }
                    return s.next = 112, i.call(O);
                  case 112:
                    if (s.prev = 112, !a) {
                      s.next = 115;
                      break
                    }
                    throw a.error;
                  case 115:
                    return s.finish(112);
                  case 116:
                    return s.finish(107);
                  case 117:
                    this.drawAdapter.worker.users.all.forEach((
                        function (e) {
                          e.guessMyUndoCount(), e
                          .emitUserShape()
                        })), l = h.map((function (e) {
                        var t = e.account,
                          n = e.calibrate,
                          r = M.unpack(n.toString()),
                          a = t !== j.drawAdapter.worker
                          .account;
                        return a && r && j.drawAdapter.act(t,
                          r), !a && r && (x = r), {
                          account: t,
                          calibrate: r
                        }
                      })), this.drawAdapter.act(this.account, x),
                      this.declareCalibrate(x), u = {
                        users: l,
                        shapes: d,
                        transhShapes: p
                      }, this.actionProcessing = k, this
                      .afterSync(u);
                  case 124:
                  case "end":
                    return s.stop()
                }
              }), s, this, [
                [15, 41, 44, 54],
                [24, 29],
                [45, , 49, 53],
                [55, 104, 107, 117],
                [63, 87, 90, 100],
                [70, 75],
                [91, , 95, 99],
                [108, , 112, 116]
              ])
            })))
          }
        }, {
          key: "setSize",
          value: function (e, t) {
            this.syncManager.pushQueue(0, {
              action: new B.CalibrateAction({
                size: e
              })
            }), this.drawAdapter.setSize(e, t)
          }
        }, {
          key: "setFontsize",
          value: function (e, t) {
            this.drawAdapter.setFontsize(e, t)
          }
        }, {
          key: "setColor",
          value: function (e, t) {
            this.drawAdapter.setColor(e, t)
          }
        }, {
          key: "undo",
          value: function () {
            return this.drawAdapter.undo()
          }
        }, {
          key: "redo",
          value: function () {
            return this.drawAdapter.redo()
          }
        }, {
          key: "clear",
          value: function (e, t, n) {
            this.drawAdapter.clear(e, t, n)
          }
        }, {
          key: "image",
          value: function (e, t) {
            this.drawAdapter.image(e, t)
          }
        }, {
          key: "clearImage",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : this.account;
            this.clear(), this.drawAdapter.clearImage(e)
          }
        }, {
          key: "setHtmlFile",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account;
            v.default.h5("setHtmlFile", e);
            var n = this.drawAdapter.worker.container,
              r = n.paddingLeft,
              a = n.paddingTop,
              i = n.canvasHeight,
              A = n.canvasWidth;
            if (this.iframe) console.warn("已经有iframe了");
            else {
              var o = document.createElement("iframe");
              o.src = e.url, o.scrolling = "no", o.name = "nimHtmlFile", o
                .frameBorder = "0", o.style.position = "absolute", o.style.top =
                a + "px", o.style.left = r + "px", o.style.zIndex = "1", o.style
                .width = A + "px", o.style.height = i + "px", o.width = "" + A, o
                .height = "" + i, this.container.insertBefore(o, this.container
                  .children[0]), this.drawAdapter.worker.container.displayCanvas
                .style.backgroundColor = "transparent", this.iframe = o, window
                .addEventListener("message", this.onIframeMessage, !1), this
                .drawAdapter.worker.emitAction({
                  account: t,
                  action: new B.FileAction(e)
                }), this.syncManager.setFileData(e)
            }
          }
        }, {
          key: "pagedHtmlFile",
          value: function (e) {
            v.default.h5("pagedHtmlFile", e);
            var t = this.iframe;
            if (t) {
              try {
                if (!t.contentWindow || t.contentDocument && "complete" !== t
                  .contentDocument.readyState) return void setTimeout(this
                  .pagedHtmlFile.bind(this, e), 800)
              } catch (e) {
                return console.error(e), !1
              }
              var n = {
                identity: "from_yunxin_wb",
                page: parseInt(e[0]),
                anim: parseInt(e[1]),
                trigger: parseInt(e[2]),
                isBack: "1" == e[3],
                time: 0
              };
              t.currentPage = parseInt(n.page);
              var r = [n.page, n.anim, n.trigger, n.isBack, n.time].join("&");
              console.warn("toPage"), console.warn(r, this.syncManager.fileData &&
                  this.syncManager.fileData.h5Cmd), v.default.h5("toHtmlPage", n),
                t.contentWindow.postMessage(n, "*")
            }
          }
        }, {
          key: "toPageHtmlFile",
          value: function (e, t, n) {
            var r = this.iframe;
            if (v.default.h5("toPageHtmlFile", e, t, n), r) {
              try {
                if (!r.contentWindow || r.contentDocument && "complete" !== r
                  .contentDocument.readyState) return !1
              } catch (e) {
                return !1
              }
              var a = void 0;
              switch (e) {
                case "leftEnd":
                  a = {
                    page: 0,
                    anim: -1,
                    trigger: -1,
                    isBack: !1
                  };
                  break;
                case "left":
                  a = {
                    page: t - 1,
                    anim: -1,
                    trigger: -1,
                    isBack: !1
                  };
                  break;
                case "up":
                  a = {
                    which: 37
                  };
                  break;
                case "down":
                  a = {
                    which: 39
                  };
                  break;
                case "right":
                  a = {
                    page: t,
                    anim: -1,
                    trigger: -1,
                    isBack: !1
                  };
                  break;
                case "rightEnd":
                  a = {
                    page: n - 1,
                    anim: -1,
                    trigger: -1,
                    isBack: !1
                  };
                  break;
                default:
                  console.warn("")
              }
              return void 0 !== a && (a.identity = "from_yunxin_wb", v.default.h5(
                "current file h5 cmd is ", this.syncManager.fileData && this
                .syncManager.fileData.h5Cmd), v.default.h5(
                "toPageHtmlFile->post", a), r.contentWindow.postMessage(a,
                "*"), r.currentPage = parseInt(a.page), r.pageNum = n), !0
            }
          }
        }, {
          key: "clearHtmlFile",
          value: function () {
            this.clear(), v.default.h5("clearHtmlFile"), !this.iframe || !this
              .container || this.iframe && this.iframe.parentNode !== this
              .container || (this.syncManager.setFileData(void 0), window
                .removeEventListener("message", this.onIframeMessage, !1), this
                .container.removeChild(this.iframe), this.drawAdapter.worker
                .container.displayCanvas.style.backgroundColor = "#ffffff")
          }
        }, {
          key: "_image",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account;
            console.log("_image", e);
            var n = e.docId,
              r = e.currentPage;
            if (n && r - 0 != 0) {
              var a = this.nim,
                i = this.fileMap[n];
              if (i || a)
                if (console.log("file!!!", i), i) i.prefix, i.type, i.transType;
                else {
                  var A = this;
                  a ? a.getFile({
                    docId: n,
                    success: function (r) {
                      A.fileMap[n] = r, A._image(e, t)
                    },
                    error: function (e) {
                      console.error("getFile error", e)
                    }
                  }) : console.warn("缺少nim实例，无法拉取文件")
                }
            } else this.clearImage(t)
          }
        }, {
          key: "setContainer",
          value: function (e, t) {
            this.drawAdapter.setContainer(e, t)
          }
        }, {
          key: "removeUser",
          value: function (e) {
            e && this.drawAdapter.removeUser(e)
          }
        }, {
          key: "resize",
          value: function () {
            this.drawAdapter.resize()
          }
        }, {
          key: "useTool",
          value: function (e, t) {
            this.drawAdapter.useTool(e, t)
          }
        }, {
          key: "syncBegin",
          value: function () {
            v.default.m.worker("owner sync begin"), this.syncManager.clear(), this
              .syncManager.makeSyncPrepare(), this.clear(), this.clearImage(),
              this.syncState = "done", this.declareCalibrate(), this.afterSync()
          }
        }, {
          key: "syncRequest",
          value: function (e) {
            this.syncState = "waiting", v.default.m.worker("sync request->", e),
              this.syncManager.makeSyncRequest(e)
          }
        }, {
          key: "syncResponse",
          value: function (e) {
            v.default.m.worker("sync response->", e), this.clear(void 0, e, {
                force: !0
              }), this.clearHtmlFile(), this.clearImage(e), this.syncManager
              .clear(), this.syncManager.makeSyncPrepareAck(e), this
              .declareCalibrate()
          }
        }, {
          key: "declareCalibrate",
          value: function (e) {
            if (!e) {
              var t = this.drawAdapter.worker.getSelfCalibrate();
              t && (e = t)
            }
            e ? (v.default.m.worker("sync response calibrate->", e), this
              .syncManager.send({
                toAccount: 0,
                actions: [{
                  action: e
                }]
              })) : console.warn("no self calibrate action")
          }
        }, {
          key: "changeRoleToPlayer",
          value: function () {
            return 0 === this.role || (this.enableDraw(!0), this.role = 0), p
              .default.resolve({
                role: "player"
              })
          }
        }, {
          key: "changeRoleToAudience",
          value: function () {
            var e = this;
            return 1 === this.role ? p.default.resolve({
              role: "audience"
            }) : (this.enableDraw(!1), new p.default((function (t, n) {
              setTimeout((function () {
                e.role = 1, t({
                  role: "audience"
                })
              }), 1e3)
            })))
          }
        }, {
          key: "resetState",
          value: function () {
            this.syncManager.clear();
            var e = this.drawAdapter.worker,
              t = e.users,
              n = (e.container, e.shapes);
            t.all.forEach((function (e) {
                e.clearShapes()
              })), n.clear(), this.drawAdapter.worker.updateCursor(), t
              .removeOtherUsers()
          }
        }]), t
      }(g.default);
    t.default = S, S.util = k
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = A(n(0)),
      a = A(n(1)),
      i = A(n(270));

    function A(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var o = function () {
      function e(t) {
        (0, r.default)(this, e), this.app = t
      }
      return (0, a.default)(e, [{
        key: "freeDraw",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : 10,
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            3e-4;
          this.app.useTool("free", this.app.account);
          for (var n = 0; n < e; n++) {
            var r = Math.random(),
              a = Math.random(),
              A = Math.random() * t,
              o = Math.random() * t;
            this.app.drawAdapter.worker.mousedown(new i.default(r, a), this.app
                .account), this.app.drawAdapter.worker.mousemove(new i.default(
                r + A, a + o), this.app.account), this.app.drawAdapter.worker
              .mouseup(new i.default(r + A, a + o), this.app.account)
          }
        }
      }, {
        key: "rectDraw",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : 10,
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            3e-4;
          this.app.useTool("rect", this.app.account);
          for (var n = 0; n < e; n++) {
            var r = Math.random(),
              a = Math.random(),
              A = Math.random() * t,
              o = Math.random() * t;
            this.app.drawAdapter.worker.mousedown(new i.default(r, a), this.app
                .account), this.app.drawAdapter.worker.mousemove(new i.default(
                r + A, a + o), this.app.account), this.app.drawAdapter.worker
              .mouseup(new i.default(r + A, a + o), this.app.account)
          }
        }
      }]), e
    }();
    t.default = o
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = v(n(20)),
      a = v(n(21)),
      i = v(n(2)),
      A = v(n(0)),
      o = v(n(1)),
      s = v(n(3)),
      u = v(n(4)),
      l = n(151),
      c = n(152),
      d = v(n(104)),
      h = v(n(48)),
      p = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(269)),
      f = n(160),
      g = v(n(159)),
      y = v(n(261));

    function v(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    window.pako = g.default;
    var m = function (e) {
      function t(e) {
        (0, A.default)(this, t);
        var n = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return n.broadcastAction = function (e) {
            var t = e.action;
            if (t.TYPE === l.WActions.FILE) {
              var r = t.file;
              console.log(r);
              n.fileData && r.docId && (r.docId, n.fileData.docId);
              if (n.fileData && (0, a.default)(r) === (0, a.default)(n.fileData))
            return;
              "clear" === r.type ? n.setFileData(void 0) : n.setFileData(r)
            }
            n.pushQueue(0, e)
          }, n.account = e, n.dataQue = {}, n.lastDataMap = {}, n.shadowUsers = {}, n
          .doNotSendBefore = Date.now(), n.startLoop(), n
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "pushQueue",
        value: function (e, t) {
          if (d.default.m.syncmanager("pushQueue", e, t), void 0 === t.action) {
            var n = new Error("ss");
            console.log(n.stack)
          }
          this.dataQue[e] = this.dataQue[e] || [], this.dataQue[e].push(t)
        }
      }, {
        key: "send",
        value: function (e, t) {
          var n = this,
            r = e.toAccount,
            a = e.actions;
          if (a && !(a.length < 1)) {
            var i = p.packBulk(a.filter((function (e) {
              return !!e
            })));
            if (console.log("send", i), i.length > 10 && "" + r != "0") {
              this.gzipStr(i).forEach((function (e, a) {
                n.flush({
                  toAccount: r,
                  data: e
                }, a, t)
              }))
            } else {
              var A = {
                toAccount: r,
                data: i
              };
              this.flush(A, 0, t), d.default.m.syncmanager("sendRaw:\n", A)
            }
          }
        }
      }, {
        key: "flush",
        value: function (e) {
          var t = this,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
            0,
            r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] :
            200;
          setTimeout((function () {
            t.emit("flush", e)
          }), r * n)
        }
      }, {
        key: "makeClearAck",
        value: function (e) {
          this.send({
            toAccount: e,
            actions: [{
              action: new c.ClearAckAction
            }]
          })
        }
      }, {
        key: "makeSyncPrepare",
        value: function () {
          this.send({
            toAccount: 0,
            actions: [{
              action: new c.SyncPrepareAction
            }]
          })
        }
      }, {
        key: "makeSyncPrepareAck",
        value: function (e) {
          this.send({
            toAccount: 0,
            actions: [{
              action: new c.SyncPrepareAckAction
            }]
          })
        }
      }, {
        key: "gzipStr",
        value: function (e) {
          var t = !(arguments.length > 1 && void 0 !== arguments[1]) ||
            arguments[1];
          console.log("gzip stirng:", e);
          var n = g.default.gzip(e, {
            to: "string"
          });
          console.log("gzip stirng:", g.default.gzip(e));
          var r = (0, f.getKiloBytes)(n),
            a = [];
          if (r > 49)
            for (var i = n.length, A = 0; A < i;) a.push(n.substr(A, 25088)),
              A += 25088;
          else a.push(n);
          if (t) {
            var o = 1,
              s = a,
              u = s.length,
              l = Date.now() + "." + Math.floor(1e3 * Math.random()) + Math
              .floor(1e3 * Math.random()) + Math.floor(1e3 * Math.random());
            a = a.map((function (e, t) {
              return "GZIP:" + o + "|" + l + "|" + u + "|" + t +
                "|=||=|" + e
            }))
          }
          return a
        }
      }, {
        key: "makeSyncRequest",
        value: function (e) {
          this.send({
            toAccount: e,
            actions: [{
              action: new c.SyncRequestAction
            }]
          })
        }
      }, {
        key: "syncTo",
        value: function (e, t) {
          this.fileData && (t.file = this.fileData);
          var n = new c.SyncAction(t);
          this.send({
            toAccount: e,
            actions: [{
              action: n
            }]
          })
        }
      }, {
        key: "clear",
        value: function () {
          console.warn("clear sync manager"), this.dataQue = {}
        }
      }, {
        key: "delayMS",
        value: function (e) {
          this.doNotSendBefore = Date.now() + e
        }
      }, {
        key: "startLoop",
        value: function () {
          var e = this;
          this.timer = setInterval((function () {
            if (!(Date.now() < e.doNotSendBefore)) {
              var t = e.dataQue;
              (0, r.default)(t).forEach((function (n) {
                !t[n] || t[n].length < 1 || e.send && (e.send({
                  toAccount: n,
                  actions: t[n]
                }), t[n].length = 0)
              }))
            }
          }), 100)
        }
      }, {
        key: "destroy",
        value: function () {
          this.timer && clearInterval(this.timer), this.timer = void 0, this
            .dataQue = {}
        }
      }, {
        key: "setFileData",
        value: function (e) {
          this.fileData = e, y.default.emit("globalFile", this.fileData)
        }
      }]), t
    }(h.default);
    t.default = m, m.GZIP_TESTER_1 = /1\|([\d.]+)\|(\d+)\|(\d+)\|=\|\|=\|/
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(2)),
      a = p(n(0)),
      i = p(n(1)),
      A = p(n(3)),
      o = p(n(4)),
      s = p(n(528)),
      u = p(n(48)),
      l = n(160),
      c = p(n(268)),
      d = p(n(104)),
      h = n(483);

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }(0, c.default)("AdapterDraw");
    var f = function (e) {
      function t(e, n) {
        (0, a.default)(this, t);
        var i = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).call(this));
        return i.onInited = function () {
            i.emit("inited")
          }, i.worker = new s.default(e, n), i.worker.on("action", i.onAction.bind(i)),
          i.worker.on("instantAction", i.onInstantAction.bind(i)), i.worker.on("inited",
            i.onInited), i
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "act",
        value: function (e, t) {
          if (t) {
            var n = {
              account: e,
              action: t
            };
            d.default.m.adapter("act->", t, e), this.worker.act(n)
          }
        }
      }, {
        key: "onAction",
        value: function (e) {
          e.account === this.worker.account && this.worker.isEnable && (d
            .default.m.adapter("onAction", e), e && this.emit("action", e))
        }
      }, {
        key: "onInstantAction",
        value: function (e) {
          d.default.m.adapter("onInstantAction", e), e && this.emit(
            "instantAction", e)
        }
      }, {
        key: "enableDraw",
        value: function (e) {
          return this.worker.enableDraw(e)
        }
      }, {
        key: "destroy",
        value: function () {
          this.worker.destroy(), this.removeAllListeners()
        }
      }, {
        key: "useTool",
        value: function (e, t) {
          d.default.m.adapter(e, t), (0, h.isValidTool)(e) ? this.worker
            .useTool(e, t) : console.warn("画笔工具不正确!->", e)
        }
      }, {
        key: "resize",
        value: function () {
          return this.worker.resize()
        }
      }, {
        key: "removeUser",
        value: function (e) {
          return this.worker.removeUser(e)
        }
      }, {
        key: "setContainer",
        value: function (e, t) {
          return this.worker.setContainer(e, t)
        }
      }, {
        key: "image",
        value: function (e, t) {
          return this.worker.image(e, t)
        }
      }, {
        key: "clearImage",
        value: function (e) {
          return this.worker.clearImage(e)
        }
      }, {
        key: "undo",
        value: function (e) {
          return this.worker.undo(e)
        }
      }, {
        key: "redo",
        value: function (e) {
          return this.worker.redo(e)
        }
      }, {
        key: "clear",
        value: function (e, t, n) {
          return this.worker.clear(e, t, n)
        }
      }, {
        key: "setColor",
        value: function (e, t) {
          e && ((0, l.formatColor)(e, 10) === l.formatColor.INVALID ? console
            .error("whiteboard::setColor:设置颜色失败:不合法的色值") : (console.log(
              "adapterDraw::setColor", e), this.worker.setColor(e, t)))
        }
      }, {
        key: "setSize",
        value: function (e, t) {
          e && (/^[\d]+$/.test("" + e) ? (console.log("adapterDraw::setSize",
            e), this.worker.setSize(e, t)) : console.error(
            "whiteboard::setSize:设置画笔粗细失败:不合法的数值:", e))
        }
      }, {
        key: "setFontsize",
        value: function (e, t) {
          e && (/^[\d]+$/.test("" + e) ? (console.log(
              "adapterDraw::setFontsize", e), this.worker.setFontsize(e, t)) :
            console.error("whiteboard::setFontsize:设置文字大小失败:不合法的数值:", e))
        }
      }]), t
    }(u.default);
    t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = E(n(25)),
      a = E(n(36)),
      i = E(n(7)),
      A = E(n(20)),
      o = E(n(2)),
      s = E(n(0)),
      u = E(n(1)),
      l = E(n(3)),
      c = E(n(4)),
      d = E(n(11)),
      h = E(n(48)),
      p = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(262)),
      f = n(270),
      g = E(f),
      y = E(n(529)),
      v = E(n(104)),
      m = n(482),
      w = E(n(531)),
      B = n(532),
      M = E(B),
      C = n(151),
      I = n(483),
      x = n(152),
      b = n(269),
      k = n(160),
      T = E(n(261));

    function E(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var D = function (e, t, n, r) {
        return new(n || (n = d.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      N =
      "data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAAANACwAAAAAEAAQAAAEPbDJSau9OOvNew0AEHDA8wCkiW6g6AXHMU4LgizUYRgEZdsUggFAQCgUP+AERggcFYHaDaMgEBQchBNhiQAAIfkECQAADQAsAAAAABAAEAAABDuwyUmrvTYAEDAFzwN4EyiSksaRyHF06GEYBNoQ82EHBwHbCIUCYRMKiwSCYoFALDCIwLDZBFJtTKclAgAh+QQJAAANACwAAAAAEAAQAAAEPrDJGQAIM2vwHtAUcVTdBzaHYRCKip2EepxacBAvjSgKQmc83m+iILCGEkSgh5wsEIhFEwqdUpvPaHPLnUQAACH5BAkAAA0ALAAAAAAQABAAAAQ+sMkZyAkz62MM0ROiKAjRXQCATeOIHEQAPA+QKQShZHOdIQFSRqaSLBCIBQiERC41TcQzc0xOr9isdsvtPiMAIfkECQAADQAsAAAAABAAEAAABD2wyYmUQjNra/VcCLIoBKEExBFkYRtcBGAQbJsdhnFkoMimGI8wAACshBnA4wFAJpdNp4RolFqv2Kx2q4kAACH5BAkAAA0ALAAAAAAQABAAAAQ9sMm5EFoza2u1b5ylKMjXVFdAjGamrEo7IWMpz8QR3A0BGATewWA48BA5mykAAOxugMcDwItOeUwnb9uKAAAh+QQJAAANACwAAAAAEAAQAAAEO7DJSau92C6EVp4c90khMjZbd5KKYo4B0Z4KIZ9I4H7IQQSng8FwwAQAgJgBQMAAHo+kD3h5Rk/HpCUCACH5BAkAAA0ALAAAAAAQABAAAAQ8sMlJq7046827nwuCLJwoliYXjlIAAAGFKApCAc8DULQSTzgd4kCYEQgKigt2MBgOC5rtQnAeOAHilBIBADs=",
      P = function (e) {
        function t(e, n) {
          (0, s.default)(this, t);
          var r, a = (0, l.default)(this, (t.__proto__ || (0, o.default)(t)).call(this));
          if (a.handleInputDomBlur = function () {
              console.log("blur");
              var e = a.container.inputDom,
                t = a.account;
              if (a.localUser) {
                var n = e.getAttribute("data-point");
                if (n) {
                  var r = a.container,
                    i = r.ownerCanvasHeight,
                    A = r.ownerCanvasWidth,
                    o = g.default.fromString(n);
                  e.style.display = "none";
                  var s = (e.value || "").trim();
                  if (e.value = "", i && A && s) {
                    var u = new x.TextAction(o.x, o.y, s);
                    a.renderText(u, t), a.emitAction({
                      account: t,
                      action: u
                    })
                  }
                }
              }
            }, a.dispatcher = function (e) {
              if ("keydown" !== e.type && "keyup" !== e.type && e.preventDefault(), e = e
                .originalEvent ? e.originalEvent : e, a.container.displayCtx) {
                var t = a.container.displayCtx.canvas.getBoundingClientRect(),
                  n = void 0,
                  r = void 0;
                e.touches && 1 === e.touches.length ? (n = e.touches[0].clientX, r = e
                    .touches[0].clientY) : e.changedTouches && 1 === e.changedTouches
                  .length ? (n = e.changedTouches[0].clientX, r = e.changedTouches[0]
                    .clientY) : (n = e.clientX, r = e.clientY);
                var i = e,
                  A = i.ctrlKey,
                  o = i.shiftKey,
                  s = i.altKey,
                  u = i.which;
                n || 0 === n || (n = 0), r || 0 === r || (r = 0);
                var l = Math.round(n - t.left),
                  c = Math.round(r - t.top),
                  d = a.container,
                  h = d.ownerCanvasHeight,
                  p = d.ownerCanvasWidth,
                  f = d.canvasWidth,
                  y = d.canvasHeight;
                if (h && p && f && y) {
                  var v = new g.default(+(l / f).toFixed(4), +(c / y).toFixed(4)),
                    m = e.type;
                  "touchstart" === m && (m = "mousedown"), "touchmove" === m && (m =
                      "mousemove"), "touchend" === m && (m = "mouseup"), 2 !== u && 3 !==
                    u && a[m](v, a.account, {
                      ctrlKey: A,
                      shiftKey: o,
                      altKey: s,
                      which: u
                    })
                }
              }
            }, void 0 === n) throw new Error("Option is Undefined!");
          return a.state = "created", a.opt = n, a.account = n.account || 0, a.users =
            new m.UserManager(n), a.shapes = new w.default, a.shapes.wrap(a.users), a
            .container = new M.default(e, n), a.container.on("init-canvas", (function () {
              v.default.m.worker("init-canvas event");
              var e = a.addUser(a.account);
              a.localUser = e, a.state = "inited", a.afterInit()
            })), a.container.on("ownerCanavasUpdate", (r = void 0, function (e, t) {
              console.log("ownerCanavasUpdate timmer"), clearTimeout(r), r =
                setTimeout((function () {
                  console.log("ownerCanavasUpdate timmer"), a.emit(
                    "instantAction", {
                      account: a.account,
                      action: new x.CalibrateAction({
                        ownerCanvasHeight: t,
                        ownerCanvasWidth: e
                      })
                    })
                }), 200)
            })), a.container.wrap(a.shapes, a.users), a.container.inputDom
            .addEventListener("blur", a.handleInputDomBlur), a.isEnable = !1, a
        }
        return (0, c.default)(t, e), (0, u.default)(t, [{
          key: "setContainer",
          value: function (e, t) {
            v.default.m.worker("setContainer"), this.container.setContainer(e, t)
          }
        }, {
          key: "isDrawEnable",
          value: function () {
            return this.isEnable
          }
        }, {
          key: "enableDraw",
          value: function (e) {
            if (v.default.m.worker("enableDraw", e), this.isEnable = !!e, T
              .default.emit("canDraw", this.isEnable), this.switchEventListener(!!
                e), this.localUser) {
              var t = this.localUser.tool;
              if (e) {
                var n = void 0;
                n = "flag" === t ? "flag" : "crosshair", this.setCursor(n)
              } else /flag/.test(this.localUser.tool) && (this.clearFlag(), this
                .emitAction({
                  account: this.account,
                  action: new x.LaserPenEndAction
                })), this.setCursor("not-allowed")
            }
          }
        }, {
          key: "updateCursor",
          value: function () {
            if (this.localUser) {
              var e = this.localUser.tool;
              if (this.isEnable) {
                var t = void 0;
                t = "flag" === e ? "flag" : "crosshair", this.setCursor(t)
              } else /flag/.test(this.localUser.tool) && (this.clearFlag(), this
                .emitAction({
                  account: this.account,
                  action: new x.LaserPenEndAction
                })), this.setCursor("not-allowed")
            }
          }
        }, {
          key: "switchEventListener",
          value: function (e) {
            var t = this,
              n = e ? "add" : "remove",
              r = [this.container.maskCanvas],
              a = this.dispatcher;
            r.forEach((function (e) {
              ["mouseleave", "mousedown", "mousemove", "touchmove",
                "touchstart"
              ].forEach((function (t) {
                e[n + "EventListener"](t, a)
              }))
            })), ["mouseup", "touchend"].forEach((function (e) {
              var r = n + "EventListener";
              t.container.container[r](e, a)
            })), ["keydown", "keyup"].forEach((function (e) {
              var t = n + "EventListener";
              document.documentElement[t](e, a)
            }))
          }
        }, {
          key: "setCursor",
          value: function () {
            var e = this,
              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] :
              "not-allowed";
            v.default.m.worker("setCursor", t);
            var n = [this.container.maskCanvas];
            t = /(flag|crosshair|not-allowed)/.test(t) ? t : "crosshair", this
              .cursor = t || this.cursor, "flag" === this.cursor && (this.cursor =
                "none"), n.forEach((function (t) {
                t.style.cursor = e.cursor
              }))
          }
        }, {
          key: "afterInit",
          value: function () {
            this.emit("inited")
          }
        }, {
          key: "emitAction",
          value: function (e) {
            this.emit("action", e)
          }
        }, {
          key: "useTool",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account;
            if (v.default.m.worker("use tool:", e, t), "created" != this.state) {
              var n = (0, I.isValidTool)(e);
              if (n) {
                var r = this.getUser(t);
                if (!e) return r.tool;
                if (r || (r = this.addUser(t)), v.default.m.worker("use tool:",
                  r), r.tool !== e) {
                  var a = {
                    tool: e
                  };
                  r.update(a), "flag" === e ? r.ctx.canvas.style.visibility =
                    "visible" : this.clearFlag(t), v.default.m.worker(
                      "useTool check account", t), t === this.account && (
                      "text" !== r.tool && (this.container.inputDom.style
                        .display = "none"), this.setCursor(r.tool), v.default.m
                      .worker("useTool check account", t), this
                      .dispatchCalibrateAction(a))
                }
              } else console.error("useTool 参数不正确！", e)
            } else console.warn("未初始化容器，请在inited事件后调整当前模式")
          }
        }, {
          key: "clearFlag",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : this.account,
              t = this.getUser(e);
            t && (t.flagPos = new g.default(3, 3).toString(), this.renderFlag(),
              this.emitAction({
                account: e,
                action: new x.LaserPenEndAction
              }))
          }
        }, {
          key: "setSize",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = this.getUser(t);
            if (v.default.m.worker("setSize", e, t, n), "created" != this.state) {
              if (n || (n = this.addUser(t)), !e) return n.size;
              if ("number" != typeof + e) throw new Error("Type Error: size");
              var r = {
                size: +e
              };
              n.update(r), this.dispatchCalibrateAction(r)
            } else console.warn("未初始化容器，请在inited事件后调整当前模式")
          }
        }, {
          key: "getSelfCalibrate",
          value: function () {
            return this.localUser ? this.localUser.getCalibrateAction() : null
          }
        }, {
          key: "setColor",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = this.getUser(t);
            if ("created" != this.state) {
              if (n || (n = this.addUser(t)), !e) return n.color;
              var r = {
                color: e.toLowerCase()
              };
              this.dispatchCalibrateAction(r), n.update(r)
            } else console.warn("未初始化容器，请在inited事件后调整当前模式")
          }
        }, {
          key: "setFontsize",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = this.getUser(t);
            if (v.default.m.worker("set font size", e, t, n), "created" != this
              .state) {
              if (n || (n = this.addUser(t)), !e) return n.fontsize;
              if ("number" != typeof + e) throw new Error("Type Error: fontsize");
              var r = {
                fontsize: +e
              };
              n.update(r), this.dispatchCalibrateAction(r), this.container
                .inputDom.style.fontSize = e + "px"
            } else console.warn("未初始化容器，请在inited事件后调整当前模式")
          }
        }, {
          key: "keydown",
          value: function (e, t, n) {
            var r = this.users.getUser(t);
            r || (r = this.addUser(t));
            var a = n.ctrlKey,
              i = n.shiftKey,
              A = n.altKey,
              o = n.which;
            if ([16, 17, 18].indexOf(o) > -1) {
              var s = r.keyDown,
                u = {
                  keyDown: {
                    ctrlKey: a,
                    altKey: A,
                    shiftKey: i,
                    which: null === s ? -1 : s.which
                  }
                };
              r.update(u), this.dispatchCalibrateAction(u), this._afterKeyChange(
                r, t, n)
            }
          }
        }, {
          key: "keyup",
          value: function (e, t, n) {
            var r = n.ctrlKey,
              a = n.shiftKey,
              i = n.altKey,
              A = n.which,
              o = this.users.getUser(t);
            if (o || (o = this.addUser(t)), [16, 17, 18].indexOf(A) > -1) {
              var s = o.keyDown,
                u = null === s ? -1 : s.which;
              A === u && (u = -1);
              var l = {
                keyDown: {
                  altKey: i,
                  shiftKey: a,
                  ctrlKey: r,
                  which: A
                }
              };
              o.update(l), this.dispatchCalibrateAction(l), this._afterKeyChange(
                o, t, n)
            }
          }
        }, {
          key: "_afterKeyChange",
          value: function (e, t, n) {
            e.isMouseDown && "flag" !== e.tool && "free" !== e.tool && "erase" !==
              e.tool && this.mousemove(e.end, t, n)
          }
        }, {
          key: "mousedown",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = void 0,
              r = this.getUser(t),
              a = r.mode,
              i = r.tool,
              A = r.color,
              o = r.size,
              s = r.fontsize,
              u = (r.keyDown, r.ctx),
              l = this.container.displayCtx;
            if ((!r.isFlag || i && "flag" !== i) && "text" !== i && ("erase" !==
                i || 0 !== this.shapes.visibles.length)) {
              r.whenMouseDown(g.default.clone(e));
              var c = r.end;
              r.isMouseDown && (v.default.mouse("user.isMouseDown->true"), this
                  .mouseup(c, t)), "free" === i || "erase" === i ? (u.canvas.style
                  .visibility = "hidden", u.beginPath()) : u.canvas.style
                .visibility = "visible", v.default.m.worker("switch mode = ", a,
                  i), this.lastStateAccount = r.account, (0, B.applyState)(u, r),
                (0, B.applyState)(l, r);
              var d = this.container,
                h = d.ownerCanvasHeight,
                p = d.ownerCanvasWidth,
                f = void 0;
              switch (h && p && (f = new x.StartAction(e.x, e.y)), a) {
                case "draw":
                  switch (r.isMouseDown = !0, v.default.log("user is mouseDown", r
                    .isMouseDown, r), n = new y.default({
                    user: r,
                    mode: a,
                    tool: i,
                    size: o,
                    color: A,
                    fontsize: s,
                    start: g.default.clone(e),
                    actions: f,
                    keyDown: r.keyDown
                  }), r.pushShape(n), this.shapes.push(n), i) {
                    case "circle":
                    case "ellipse":
                    case "line":
                    case "rect":
                    case "roundRect":
                    case "solidCircle":
                    case "solidEllipse":
                    case "solidRoundRect":
                    case "solidRect":
                    case "erase":
                    case "free":
                    case "flag":
                      break;
                    case "fill":
                      this.lastStateAccount = r.account, (0, B.applyState)(n.ctx,
                          r), (0, B.applyState)(l, r), n.draw(l), r
                        .isMouseDown = !1;
                      break;
                    default:
                  }
              }
              v.default.m.worker("emit on mousedown"), p && h && this.emitAction({
                account: t,
                action: f
              })
            }
          }
        }, {
          key: "mousemove",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = arguments[2],
              r = this.getUser(t);
            if (v.default.mouse("mousemove", r, !r.isMouseDown && !r.isFlag), r
              .isFlag || r.isMouseDown) {
              r.whenMouseMove(g.default.clone(e));
              var a = r.mode,
                i = r.tool,
                o = r.keyDown,
                s = r.end;
              if ("erase" !== i || 0 !== this.shapes.visibles.length) {
                var u = r.ctx,
                  l = this.container.displayCtx;
                v.default.mouse("mousemove", e, r);
                var c = r.activeShape,
                  d = new x.MoveAction(e.x, e.y);
                switch (n && (0, A.default)(o).some((function (e) {
                  return n[e] !== o[e]
                })) && r.update({
                  keyDown: n
                }), "flag" !== i && this.shiftKeyTool(r, c, (function (e) {
                  i = e
                })), r.account !== this.lastStateAccount && "flag" !== i && (
                  this.lastStateAccount = r.account, (0, B.applyState)(u, r), (
                    0, B.applyState)(l, r)), a) {
                  case "draw":
                    switch (i) {
                      case "flag":
                        r.flagPos = g.default.clone(e).toString(), this
                          .renderFlag();
                        break;
                      case "erase":
                      case "free":
                        c && (c.updateCorner(s), c.actions.push(d), c.freeMove(u),
                          c.freeMove(l));
                        break;
                      case "line":
                        p.clearCtx(u), c.updateCorner(s), c.draw(u);
                        break;
                      case "rect":
                      case "solidRect":
                        c && (p.clearCtx(u), c.updateCorner(s), c.draw(u));
                        break;
                      case "roundRect":
                      case "solidRoundRect":
                        p.clearCtx(u), c && (c.updateCorner(s), c.draw(u));
                        break;
                      case "circle":
                      case "solidCircle":
                        p.clearCtx(u), c && (c.updateCorner(s), c.draw(u));
                        break;
                      case "ellipse":
                      case "solidEllipse":
                        p.clearCtx(u), c && (c.updateCorner(s), c.draw(u));
                        break;
                      case "fill":
                      case "text":
                        d = null;
                        break;
                      default:
                    }
                }
                d && this.emitAction({
                  account: t,
                  action: d
                })
              }
            } else console.log("pre return when mouse down is false")
          }
        }, {
          key: "shiftKeyTool",
          value: function (e, t, n) {
            if (e.keyDown.shiftKey) {
              var r = e.tool;
              "ellipse" === r ? (r = "circle", t && (t.tool = r), n(r)) :
                "circle" === r && (r = "ellipse", t && (t.tool = r), n(r))
            } else t && t.tool !== e.tool && (t.tool = e.tool)
          }
        }, {
          key: "mouseup",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = this.getUser(t);
            e.text;
            console.warn("mouse up"), v.default.m.worker("mouse up", t);
            var r = n.mode,
              a = n.tool,
              i = n.color,
              A = (n.size, n.fontsize),
              o = (n.start, n.oldMid),
              s = n.end;
            if ("erase" !== a || 0 !== this.shapes.visibles.length) {
              var u = g.default.middle(s, e);
              o.clone(), s.clone();
              if (o.copy(u), s.copy(e), n.oldMid = o.clone(), n.end = s.clone(), n
                .isFlag) return this.clearFlag(), void this.emitAction({
                account: t,
                action: new x.LaserPenEndAction
              });
              if (n.isMouseDown || "text" === a) {
                n.isMouseDown = !1, console.warn("turn use mouse down to false", n
                  .isMouseDown, n.account);
                var l = n.ctx,
                  c = this.container.displayCtx,
                  d = n.activeShape,
                  h = d && d.ctx;
                if ("text" !== a) {
                  if (d && h) {
                    var f = !0;
                    l.canvas.style.visibility = "visible", d.updateCorner(s);
                    var y = new x.EndAction(s.x, s.y);
                    switch ("flag" !== a && (this.shiftKeyTool(n, d, (function (
                    e) {
                      a = e
                    })), this.lastStateAccount = n.account, (0, B.applyState)(
                      l, n), (0, B.applyState)(c, n)), r) {
                      case "draw":
                        switch (a) {
                          case "erase":
                          case "free":
                            d.expandCorner(), d.freeEnd(l), d.freeEnd(c);
                            break;
                          case "line":
                            p.clearCtx(l), d.draw(l);
                            break;
                          case "rect":
                          case "solidRect":
                            p.clearCtx(l), d.draw(l);
                            break;
                          case "roundRect":
                          case "solidRoundRect":
                            p.clearCtx(l), d.draw(l);
                            break;
                          case "circle":
                          case "solidCircle":
                            p.clearCtx(l), d.draw(l);
                            break;
                          case "ellipse":
                          case "solidEllipse":
                            p.clearCtx(l), d.draw(l);
                            break;
                          case "flag":
                          case "fill":
                            y = null, f = !1;
                            break;
                          default:
                        }
                        f && this.moveUserShapeToDisplay(n)
                    }
                    d.keyDown = n.keyDown, y && (d.actions.push(y), this
                      .emitAction({
                        account: t,
                        action: y
                      }))
                  }
                } else {
                  var m = this.getCanvasCoord(s),
                    w = this.container,
                    M = w.canvasWidth,
                    C = w.canvasHeight,
                    I = w.inputDom,
                    b = I.style,
                    k = b.display;
                  if (m.x < 0 || m.x > M || m.y < 0 || m.y > C) return;
                  if ("none" === k) {
                    var T = M - m.x - 10;
                    m.y;
                    b.width = 10 * A > T ? (T > 0 ? T : 0) + "px" : T + "px", b
                      .padding = "1px 0", b.verticalAlign = "top", b.lineHeight =
                      A + "px", b.top = m.y + this.container.paddingTop + "px", b
                      .left = m.x + this.container.paddingLeft + "px", b
                      .fontSize = A + "px", b.display = "block", b.color = i, I
                      .setAttribute("data-point", s.toString()), I.focus(), n.end
                      .copy(s)
                  } else I.blur()
                }
              }
            }
          }
        }, {
          key: "mouseleave",
          value: function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[
              1] : this.account,
              n = arguments[2];
            if (console.log("mouse leave"), t === this.account) {
              var r = this.getUser(t);
              switch (r.tool) {
                case "flag":
                  this.clearFlag(t), this.emitAction({
                    account: t,
                    action: new x.LaserPenEndAction
                  });
                  break;
                case "text":
                  break;
                default:
                  this.mouseup(e, t, n)
              }
            }
          }
        }, {
          key: "renderText",
          value: function (e, t) {
            var n, r;
            r = e;
            var a = new g.default(e.x, e.y),
              i = this.getOwnerCoord(a);
            if ((n = (e.text || "").trim()) && t) {
              var A = this.getUser(t);
              A || (A = this.addUser(t));
              var o = A,
                s = o.tool,
                u = o.mode,
                l = o.size,
                c = o.color,
                d = o.fontsize,
                h = this.container.displayCtx,
                f = new y.default({
                  user: A,
                  mode: u,
                  tool: s,
                  size: l,
                  color: c,
                  fontsize: d,
                  start: g.default.clone(a),
                  actions: r,
                  keyDown: A.keyDown
                });
              this.shapes.push(f), A.pushShape(f);
              var v = A.ctx;
              this.lastStateAccount = A.account, (0, B.applyState)(v, A), (0, B
                .applyState)(h, A), p.text(v, i, n, d, !0, c);
              var m = A.activeShape.corner;
              m[0].x = i.x - l, m[0].y = i.y - 20, m[1].x = i.x + d * n.length, m[
                1].y = i.y + d + 20, this.moveUserShapeToDisplay(A)
            }
          }
        }, {
          key: "clearTransparentPix",
          value: function (e) {
            for (var t = e.length, n = e, r = 0; r < t; r += 4) {
              n[3 + r] < 243 && (n[0 + r] = 0, n[1 + r] = 0, n[2 + r] = 0, n[3 +
                r] = 0)
            }
          }
        }, {
          key: "moveUserShapeToDisplay",
          value: function (e, t) {
            var n = e.activeShape,
              r = e.ctx,
              a = this.container.displayCtx;
            if (n && a) {
              var i = n.tool,
                A = n.ctx,
                o = (n.color, n.corner);
              v.default.log("corner", o);
              var s = Math.ceil(o[1].x - o[0].x),
                u = Math.ceil(o[1].y - o[0].y);
              if (0 === s || 0 === u) return v.default.m.worker(
                "mouseup shape is zero size"), void console.error(
                "mouseup shape is zero size");
              v.default.m.worker("mouseup going to anti shape", e.account);
              var l = r.getImageData(o[0].x, o[0].y, s, u);
              "erase" === i && v.default.image(r.canvas.toDataURL(), "erase"),
                this.opt.clearTransparentPix && (-1 === ["text"].indexOf(i) ||
                t) && this.clearTransparentPix(l.data), A.canvas.width = s, A
                .canvas.height = u, p.setpixelated(A), p.setLineStyle(A), A
                .putImageData(l, 0, 0), a.imageSmoothingEnabled = !1, "free" !==
                i && a.drawImage(A.canvas, Math.round(o[0].x), Math.round(o[0]
                .y)), p.clearCtx(r)
            } else console.error("activeShape is ", n, "displayCtx is ", a)
          }
        }, {
          key: "renderFlag",
          value: function () {
            var e = this,
              t = this.container.maskCtx;
            if (t) {
              p.clearCtx(t);
              var n = this.container,
                r = n.ownerCanvasWidth,
                a = n.ownerCanvasHeight;
              this.users.all.forEach((function (n) {
                var i = n.mode,
                  A = n.tool,
                  o = (n.color, n.flagPos);
                if ("draw" == i && "flag" === A && r && a) {
                  var s = g.default.fromString(o),
                    u = e.getOwnerCoord(s);
                  console.log("render flag", s, o, n.account), p.circle(t,
                    u, 5, !1, "#ff0000"), p.circle(t, u, 4, !0, "#ff0000")
                }
              }))
            }
          }
        }, {
          key: "getCanvasCoord",
          value: function (e) {
            var t = this.container,
              n = t.canvasHeight,
              r = t.canvasWidth;
            return n && r ? new f.Coord(e.x * r, e.y * n) : new f.Coord(0, 0)
          }
        }, {
          key: "getOwnerCoord",
          value: function (e) {
            var t = this.container,
              n = t.ownerCanvasHeight,
              r = t.ownerCanvasWidth;
            return n && r ? new f.Coord(e.x * r, e.y * n) : new f.Coord(0, 0)
          }
        }, {
          key: "undo",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : this.account,
              t = this.getUser(e);
            if (t && 0 !== t.shapes.length) {
              var n = t.undo();
              return this.emitAction({
                account: e,
                action: new x.RevokeAction
              }), n
            }
          }
        }, {
          key: "redo",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : this.account,
              t = this.getUser(e);
            if (t && 0 !== t.recycle.length) {
              var n = t.redo();
              return this.emitAction({
                account: e,
                action: new x.RedoAction
              }), n
            }
          }
        }, {
          key: "image",
          value: function (e) {
            var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
              this.account,
              r = e.url,
              a = void 0 === r ? "" : r,
              i = e.docId,
              A = void 0 === i ? "" : i,
              o = e.currentPage,
              s = void 0 === o ? 0 : o,
              u = e.pageCount,
              l = void 0 === u ? 0 : u,
              c = e.type,
              d = void 0 === c ? "clear" : c,
              h = e.urlStr,
              p = void 0 === h ? "" : h,
              f = e.h5Cmd,
              g = void 0 === f ? "" : f;
            if (a) {
              if (this.container && this.container.displayCtx) {
                var y = this.container.displayCtx.canvas,
                  v = new Image,
                  m = void 0 === this.opt.backgroundUrl ? N : this.opt
                  .backgroundUrl;
                v.onload = function () {
                    t.container.container.classList.remove("canvas-loading"), y
                      .style.backgroundSize = "contain", y.style.backgroundImage =
                      "url(" + a + ")"
                  }, this.container.container.classList.add("canvas-loading"), y
                  .style.backgroundSize = "auto", y.style.backgroundImage =
                  "url(" + m + ")", v.src = a
              }
              this.emitAction({
                account: n,
                action: new x.FileAction({
                  url: a,
                  docId: A,
                  currentPage: s,
                  pageCount: l,
                  type: d,
                  urlStr: p,
                  h5Cmd: g
                })
              })
            }
          }
        }, {
          key: "clearImage",
          value: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
              0] : this.account;
            this.container.displayCtx && (this.container.displayCtx.canvas.style
              .backgroundImage = ""), this.emitAction({
              account: e,
              action: new x.FileAction({
                docId: "",
                type: "clear"
              })
            })
          }
        }, {
          key: "clear",
          value: function (e) {
            var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] :
              this.account,
              r = arguments[2],
              a = r && r.force,
              A = r && r.quiet;
            if (this.container.displayCtx) {
              p.clearCtx(this.container.displayCtx);
              var o = !0,
                s = !1,
                u = void 0;
              try {
                for (var l, c = (0, i.default)(this.users.all); !(o = (l = c
                  .next()).done); o = !0) {
                  var d = l.value;
                  d.isMouseDown && !a ? (v.default.m.worker(
                      "user.isMouseDown = true"), this.container.displayCtx
                    .drawImage(d.ctx.canvas, 0, 0)) : d.ctx && p.clearCtx(d.ctx)
                }
              } catch (e) {
                s = !0, u = e
              } finally {
                try {
                  !o && c.return && c.return()
                } finally {
                  if (s) throw u
                }
              }
            }
            var h = void 0;
            if (e && (Array.isArray(e) || (e = [e]), 0 != e.length && (h = e)), h)
              h.forEach((function (e) {
                var n = t.getUser(e);
                n && (n.shapes.forEach((function (e) {
                  t.shapes.remove(e)
                })), n.clearShapes())
              })), this.container.displayCtx && this.container.fullRender();
            else {
              this.shapes.clear();
              var f = !0,
                g = !1,
                y = void 0;
              try {
                for (var m, w = (0, i.default)(this.users.all); !(f = (m = w
                  .next()).done); f = !0) {
                  var B = m.value;
                  B.clearShapes()
                }
              } catch (e) {
                g = !0, y = e
              } finally {
                try {
                  !f && w.return && w.return()
                } finally {
                  if (g) throw y
                }
              }
            }
            A || this.emitAction({
              account: n,
              action: new x.ClearAction(h)
            })
          }
        }, {
          key: "act",
          value: function (e) {
            v.default.m.worker("act->", e);
            var t = e.account;
            e.action;
            t && !this.users.hasUser(t) && this.addUser(t);
            var n = e.action;
            switch (n.TYPE) {
              case C.WActions.START:
                this.mousedown(n, t);
                break;
              case C.WActions.MOVE:
              case C.WActions.LASER_PEN:
                this.mousemove(n, t);
                break;
              case C.WActions.TEXT:
                this.renderText(n, t);
                break;
              case C.WActions.END:
                this.mouseup(n, t);
                break;
              case C.WActions.LASER_PEN_END:
                this.clearFlag(t);
                break;
              case C.WActions.REDO:
                this.redo(t);
                break;
              case C.WActions.REVOKE:
                this.undo(t);
                break;
              case C.WActions.CLEAR:
                break;
              case C.WActions.CALIBRATE:
                this.calibrate(t, n);
                break;
              case C.WActions.SYNC_PREPARE_ACK:
              case C.WActions.SERIAL:
                break;
              case C.WActions.CLEAR_ACK:
                this.clear(t, t, {
                  quiet: !0,
                  force: !0
                });
                break;
              case C.WActions.SYNC_REQUEST:
              case C.WActions.FILE:
              case C.WActions.SYNC:
              case C.WActions.SYNC_PREPARE:
              case C.WActions.VERSION:
                break;
              default:
            }
          }
        }, {
          key: "resize",
          value: function () {
            this.container.resize()
          }
        }, {
          key: "dispatchCalibrateAction",
          value: function (e) {
            this.emit("action", {
              account: this.account,
              action: new x.CalibrateAction(e)
            })
          }
        }, {
          key: "calibrate",
          value: function (e, t) {
            if (e) {
              var n = t.ownerCanvasHeight,
                r = t.ownerCanvasWidth;
              n && r && (console.warn("update owner canvas"), this.container
                .canvasRatio = r / n, this.container.resize(), this.container
                .updateCanvasPropSize(r, n));
              var a = x.CalibrateAction.USER_PROPS.reduce((function (e, n) {
                  return n in t && (e[n] = t[n]), e
                }), {}),
                i = this.getUser(e);
              i && i.update(a)
            }
          }
        }, {
          key: "addUser",
          value: function (e) {
            if (v.default.m.worker("addUser", e), this.users.hasUser(e))
            return this.getUser(e);
            var t = this.users.addUser(e);
            return this.container.addUser(this.account, t), this.users.all.sort((
              function (e, t) {
                return e.account > t.account ? 1 : -1
              })).forEach((function (e, t) {
              e.ctx.canvas.style.zIndex = "" + (10 + t)
            })), v.default.m.worker("create User ->", t), t
          }
        }, {
          key: "getUser",
          value: function (e) {
            return e == this.account && this.localUser ? this.localUser : this
              .users.getUser(e)
          }
        }, {
          key: "removeUser",
          value: function (e) {
            e && (this.clearFlag(e), this._removeUser(e))
          }
        }, {
          key: "_removeUser",
          value: function (e) {
            var t = this.getUser(e);
            if (t) {
              try {
                this.container.container.removeChild(t.ctx.canvas)
              } catch (e) {}
              this.users.remove(e)
            }
          }
        }, {
          key: "destroy",
          value: function () {
            var e = this;
            this.container.inputDom.removeEventListener("blur", this
                .handleInputDomBlur), this.users.destroy(), this
              .switchEventListener(!1), this.users.uids.map((function (t) {
                e._removeUser(t)
              })), this.shapes.destroy(), this.container.destroy(), this
              .removeAllListeners()
          }
        }, {
          key: "getSnapshot",
          value: function () {
            var e = this.shapes,
              t = e.transh,
              n = e.visibles,
              r = this.container,
              a = r.canvasWidth,
              i = r.canvasHeight,
              A = r.ownerCanvasHeight,
              o = r.ownerCanvasWidth,
              s = {
                width: a,
                height: i
              };
            return {
              users: this.users.toSnapshot(s),
              ownerWidth: o,
              ownerHeight: A,
              canvasWidth: a,
              canvasHeight: i,
              canvasRatio: a / (0 === i ? 1e-6 : i),
              transhShapes: t.map((function (e) {
                return e.toSnapshot(s)
              })),
              shapes: n.map((function (e) {
                return e.toSnapshot(s)
              }))
            }
          }
        }, {
          key: "restoreShape",
          value: function (e, t) {
            return D(this, void 0, void 0, r.default.mark((function n() {
              var i, A, o, s, u, l, c, h, v, m, w, M, C, I, x, T, E, D, N,
                P, Q, O, _, S, U, F, L, j, z, R, H, Y, W, K, G, V, Z, X,
                J, q, $, ee, te, ne, re, ae, ie, Ae, oe, se, ue, le, ce,
                de, he, pe, fe, ge, ye, ve, me, we, Be, Me, Ce, Ie, xe,
                be, ke, Te, Ee, De, Ne, Pe, Qe, Oe, _e, Se, Ue, Fe, Le,
                je, ze, Re, He = this;
              return r.default.wrap((function (n) {
                for (;;) switch (n.prev = n.next) {
                  case 0:
                    i = e.id, A = e.start, o = e.user, s = e
                      .color, u = e.fontsize, l = e.size, c = e
                      .mode, h = e.actions, v = e.optimized, m = e
                      .imageData, w = e.corner, M = e.keyDown, C =
                      e.tool, I = (0, b.unpackBulk)(h), x = I
                      .length, (T = this.users.getUser(o)) || (T =
                        this.addUser(o)), E = this.container, D =
                      E.ownerCanvasWidth, N = E.ownerCanvasHeight,
                      (P = new y.default({
                        user: T,
                        mode: c,
                        tool: C,
                        size: l,
                        color: s,
                        fontsize: u,
                        start: g.default.fromString(A),
                        actions: I,
                        keyDown: M
                      })).id = i, P.optimized = v, Q = w.map((
                        function (e) {
                          return g.default.fromString(e)
                            .toCoord(D, N)
                        })), O = (0, a.default)(Q, 2), _ = O[0],
                      S = O[1], U = _, F = f.Coord.areaSize(_, S),
                      L = F.width, j = F.height, z = P.ctx, p
                      .setCanvasPropSize(z, {
                        width: L,
                        height: j
                      }), P.corner = [_, S], (0, B.applyState)(
                      z, {
                        ctx: z,
                        color: s,
                        size: l,
                        tool: C
                      }), console.assert(z.lineWidth === l,
                        "shape line width is not the same", l, z
                        .lineWidth), t ? T.recycle.push(P) : (T
                        .shapes.push(P), this.shapes.push(P)), R =
                      function (e) {
                        var t = I[0],
                          n = I[x - 1],
                          r = He.getOwnerCoord(t),
                          a = He.getOwnerCoord(n);
                        return e ? [r.minus(e), a.minus(e)] : [r,
                          a
                        ]
                      }, H = !0, n.t0 = C, n.next = "free" === n
                      .t0 || "erase" === n.t0 ? 24 : "line" === n
                      .t0 ? 26 : "circle" === n.t0 ||
                      "solidCircle" === n.t0 ? 29 : "ellipse" ===
                      n.t0 || "solidEllipse" === n.t0 ? 33 :
                      "rect" === n.t0 || "solidRect" === n.t0 ?
                      37 : "roundRect" === n.t0 ||
                      "solidRoundRect" === n.t0 ? 44 : "text" ===
                      n.t0 ? 52 : "fill" === n.t0 ? 58 :
                      "flag" === n.t0 ? 64 : 66;
                    break;
                  case 24:
                    if (x >= 2)
                      if (Y = R(U), W = (0, a.default)(Y, 2), K =
                        W[0], G = W[1], V = K.clone(), Z = K
                        .clone(), X = K.clone(), 2 === x) p.line(
                        z, V, X, s);
                      else {
                        for (J = 1, q = x - 1; J < q; J++) $ =
                          this.getOwnerCoord(I[J]).minus(U), ee =
                          f.Coord.middle(X, $), te = Z.clone(),
                          ne = X.clone(), Z.copy(ee), X.copy($), p
                          .free(z, te, ne, ee, s, l);
                        re = f.Coord.middle(X, G), ae = Z.clone(),
                          X.clone(), p.free(z, ae, re, G, s, l)
                      } return n.abrupt("break", 69);
                  case 26:
                    return ie = R(U), Ae = (0, a.default)(ie, 2),
                      oe = Ae[0], se = Ae[1], p.line(z, oe, se,
                      s), n.abrupt("break", 69);
                  case 29:
                    return ue = R(U), le = (0, a.default)(ue, 2),
                      ce = le[0], de = le[1], he = y.default
                      .calculateRadius(C, ce, de), pe = he.radius,
                      p.circle(z, ce, pe, "solidCircle" === C, s),
                      n.abrupt("break", 69);
                  case 33:
                    return fe = R(U), ge = (0, a.default)(fe, 2),
                      ye = ge[0], ve = ge[1], me = y.default
                      .calculateRadius(C, ye, ve), me.radius, we =
                      me.xRadius, Be = me.yRadius, p.ellipse(z,
                        ye, we, Be, "solidEllipse" === C, s), n
                      .abrupt("break", 69);
                  case 37:
                    return Me = R(U), Ce = (0, a.default)(Me, 2),
                      Ie = Ce[0], xe = Ce[1], be = xe.x - Ie.x,
                      ke = xe.y - Ie.y, Te = Math.min(Math.abs(
                        be), Math.abs(ke)), M.shiftKey && (be = (
                        0, k.sign)(be) * Te, ke = (0, k.sign)(
                        ke) * Te), p.rect(z, Ie, be, ke,
                        "solidRect" === C, s), n.abrupt("break",
                        69);
                  case 44:
                    return Ee = R(U), De = (0, a.default)(Ee, 2),
                      Ne = De[0], Pe = De[1], Qe = Pe.x - Ne.x,
                      Oe = Pe.y - Ne.y, _e = Math.min(Math.abs(
                        Qe), Math.abs(Oe)), M.shiftKey && (Qe = (
                        0, k.sign)(Qe) * _e, Oe = (0, k.sign)(
                        Oe) * _e), Se = _e < l ? 2 : .1 * _e, p
                      .roundRect(z, Ne, Qe, Oe, Se,
                        "solidRoundRect" === C, s), n.abrupt(
                        "break", 69);
                  case 52:
                    return Ue = I[0], Fe = Ue.text, Le = this
                      .getOwnerCoord(Ue).minus(U), p.text(z, Le,
                        Fe, u, !0, s), H = !1, n.abrupt("break",
                        69);
                  case 58:
                    return je = Math.abs(_.x - S.x), ze = Math
                      .abs(_.y - S.y), n.next = 62, new d.default(
                        (function (e) {
                          var t = new Image;
                          t.src = m, t.onerror = function () {
                            return e()
                          }, t.onload = function () {
                            console.log("fill"), z.drawImage(
                              t, 0, 0, je, ze), e()
                          }
                        }));
                  case 62:
                  case 64:
                    return H = !1, n.abrupt("break", 69);
                  case 66:
                    H = !1, C, console.warn("尝试恢复未知的图形");
                  case 69:
                    if (this.opt.clearTransparentPix && H) try {
                      Re = z.getImageData(0, 0, L, j), this
                        .clearTransparentPix(Re.data), z
                        .putImageData(Re, L, j)
                    } catch (e) {
                      console.error(e)
                    }
                    case 70: case "end": return n.stop()
                }
              }), n, this)
            })))
          }
        }, {
          key: "mesure",
          value: function (e) {
            var t = this;
            document.getElementById("worker-mesure-anim") || document.head
              .insertAdjacentHTML("beforeend",
                "<style>@keyframes xxx-xxx{from{background:red;}to{background:green}}</style>"
                ), Array.isArray(e) || (e = [e]), e.forEach((function (e) {
                t.container.container.insertAdjacentHTML("afterbegin",
                  '<div style="z-index:2222;display:inline-block;position:absolute;background:red;top:' +
                  e.x + "px;left:" + e.y +
                  'px;width:2px;height:2px;animation:xxx-xxx 1s infinite"></div>'
                  )
              }))
          }
        }]), t
      }(h.default);
    t.default = P
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = u(n(36)),
      a = u(n(0)),
      i = u(n(1)),
      A = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(262)),
      o = u(n(104)),
      s = n(160);

    function u(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var l = function () {
      function e(t) {
        var n = t.user,
          r = t.mode,
          i = t.tool,
          o = t.size,
          s = t.color,
          u = t.start,
          l = t.actions,
          c = t.fontsize,
          d = t.keyDown;
        (0, a.default)(this, e);
        var h = performance && performance.timing && performance.timing
          .navigationStart + performance.now();
        this.id = h || Date.now(), this.user = n, this.visible = !0, this.ctx = document
          .createElement("canvas").getContext("2d");
        var p = this.ctx.canvas,
          f = n.ctx.canvas;
        p.style.width = f.style.width, p.style.height = f.style.height, this.ctx
          .lineWidth = n.ctx.lineWidth, this.coordWidth = f.width, this.coordHeight = f
          .height, A.setCanvasPropSize(this.ctx, {
            width: this.coordWidth,
            height: this.coordHeight
          }), this.tool = i, this.mode = r, this.color = s, this.size = o, this
          .fontsize = c, Array.isArray(l) ? this.actions = l : void 0 === l ? (console
            .warn("action undefined! create a shape"), this.actions = []) : this
          .actions = [l], this.keyDown = d, this.start = u.toCoord(this.coordWidth, this
            .coordHeight), this.corner = [this.start.clone(), this.start.clone()], this
          .transform = [], this.path = [], this.zIndex = 1, this.detail = e
          .calculateRadius(this.tool, this.start, this.start)
      }
      return (0, i.default)(e, [{
        key: "updateCorner",
        value: function (t) {
          var n = this.getCoord(t),
            a = this.start,
            i = this.size,
            A = (0, r.default)(this.corner, 2),
            o = A[0],
            s = A[1],
            u = e.calculateRadius(this.tool, a, n);
          this.detail = u;
          var l = u.xRadius,
            c = u.yRadius,
            d = u.radius;
          u.width, u.height;
          switch (this.tool) {
            case "solidCircle":
            case "circle":
              o.x = a.x - d - i, o.y = a.y - d - i, s.x = a.x + d + i, s.y = a
                .y + d + i;
              break;
            case "ellipse":
            case "solidEllipse":
              o.x = a.x - l - i, o.y = a.y - c - i, s.x = a.x + l + i, s.y = a
                .y + c + i;
              break;
            case "rect":
            case "roundRect":
            case "solidRect":
            case "solidRoundRect":
            case "line":
              o.copy(a.clone().topLeft(n)), s.copy(a.clone().bottomRight(n));
              break;
            case "text":
            case "free":
            case "erase":
              o.topLeft(n), s.bottomRight(n);
              break;
            case "flag":
            case "fill":
              break;
            default:
              this.tool
          }
          return "fill" !== this.tool && "text" !== this.tool && "free" !== this
            .tool && "erase" !== this.tool && (o.x -= i, o.y -= i, s.x += i, s
              .y += i), u
        }
      }, {
        key: "expandCorner",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : this.size,
            t = (0, r.default)(this.corner, 2),
            n = t[0],
            a = t[1];
          n.x -= e, n.y -= e, a.x += e, a.y += e
        }
      }, {
        key: "destroy",
        value: function () {
          o.default.shape("shape delete ctx", this.user, this.ctx, this.actions)
        }
      }, {
        key: "toSnapshot",
        value: function (e) {
          var t = e.width,
            n = e.height,
            r = this.id,
            a = this.mode,
            i = this.tool,
            A = this.size,
            o = this.fontsize,
            s = this.color,
            u = this.start,
            l = this.actions,
            c = this.keyDown;
          return "fill" === i ? {
            id: r,
            user: this.user.account,
            mode: a,
            tool: i,
            size: A,
            fontsize: o,
            color: s,
            start: u.toPoint(t, n).toString(),
            optimized: !0,
            imageData: this.ctx.canvas.toDataURL(),
            keyDown: c,
            corner: this.corner.map((function (e) {
              return e.toPoint(t, n).toString()
            })),
            actions: l.filter((function (e) {
              return e
            })).map((function (e) {
              return e.toString()
            })).join(";") + ";"
          } : {
            id: r,
            user: this.user.account,
            mode: a,
            tool: i,
            size: A,
            fontsize: o,
            color: s,
            start: u.toPoint(t, n).toString(),
            optimized: !1,
            imageData: "",
            corner: this.corner.map((function (e) {
              return e.toPoint(t, n).toString()
            })),
            keyDown: c,
            actions: l.filter((function (e) {
              return e
            })).map((function (e) {
              return e.toString()
            })).join(";") + ";"
          }
        }
      }, {
        key: "draw",
        value: function (e) {
          var t = this.user.end.toCoord(this.coordWidth, this.coordHeight);
          switch (this.tool) {
            case "fill":
              A.fill(e, t, this.color, this);
              break;
            case "erase":
            case "free":
              A.free(e, this.getCoord(this.user.prevOldMid), this.getCoord(this
                  .user.prevEnd), this.getCoord(this.user.oldMid), this.color,
                this.size);
              break;
            case "line":
              A.line(e, this.getCoord(this.user.start), this.getCoord(this.user
                .end), this.color);
              break;
            case "rect":
            case "solidRect":
              var n = this.getCoord(this.user.end),
                r = this.getCoord(this.user.start),
                a = n.x - r.x,
                i = n.y - r.y,
                o = Math.min(Math.abs(a), Math.abs(i));
              this.user.keyDown.shiftKey && (a = (0, s.sign)(a) * o, i = (0, s
                .sign)(i) * o), A.rect(e, r, a, i, "solidRect" === this.tool,
                this.color);
              break;
            case "roundRect":
            case "solidRoundRect":
              var u = this.getCoord(this.user.end),
                l = this.getCoord(this.user.start),
                c = u.x - l.x,
                d = u.y - l.y,
                h = Math.min(Math.abs(c), Math.abs(d)),
                p = h < this.size ? 2 : .1 * h;
              this.user.keyDown.shiftKey && (c = (0, s.sign)(c) * h, d = (0, s
                .sign)(d) * h), A.roundRect(e, l, c, d, p,
                "solidRoundRect" === this.tool, this.color);
              break;
            case "circle":
            case "solidCircle":
              var f = this.detail.radius,
                g = this.getCoord(this.user.start);
              A.circle(e, g, f, "solidCircle" === this.tool, this.color);
              break;
            case "ellipse":
            case "solidEllipse":
              var y = this.getCoord(this.user.start),
                v = this.detail,
                m = v.xRadius,
                w = v.yRadius;
              A.ellipse(e, y, m, w, "solidEllipse" === this.tool, this.color)
          }
        }
      }, {
        key: "freeMove",
        value: function (e) {
          A.free(e, this.getCoord(this.user.prevOldMid), this.getCoord(this.user
              .prevEnd), this.getCoord(this.user.oldMid), this.color, this
            .size)
        }
      }, {
        key: "freeEnd",
        value: function (e) {
          A.free(e, this.getCoord(this.user.prevOldMid), this.getCoord(this.user
            .oldMid), this.getCoord(this.user.end), this.color, this.size)
        }
      }, {
        key: "getCoord",
        value: function (e) {
          return e.toCoord(this.coordWidth, this.coordHeight)
        }
      }], [{
        key: "calculateRadius",
        value: function (e, t, n) {
          var r = Math.abs(n.x - t.x),
            a = Math.abs(n.y - t.y),
            i = void 0,
            A = void 0,
            o = void 0;
          switch (e) {
            case "circle":
            case "solidCircle":
            case "ellipse":
            case "solidEllipse":
              i = (A = r) > (o = a) ? A : o
          }
          return {
            xRadius: A,
            yRadius: o,
            radius: i,
            width: r,
            height: a
          }
        }
      }]), e
    }();
    t.default = l
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = p(n(2)),
      a = p(n(0)),
      i = p(n(1)),
      A = p(n(3)),
      o = p(n(4)),
      s = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(262)),
      u = p(n(270)),
      l = n(48),
      c = p(n(104)),
      d = n(152),
      h = p(n(261));

    function p(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var f = function (e) {
      function t(e, n) {
        (0, a.default)(this, t);
        var i = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).call(this));
        return i.undoCount = 0, i.account = e, i.ctx = document.createElement("canvas")
          .getContext("2d"), i.ctx.canvas.className = "wb_-_-" + e, s.setpixelated(i
            .ctx), s.setLineStyle(i.ctx), i.shapes = [], i.recycle = [], i.mode =
          "draw", i.tool = "flag", i.flagPos = new u.default(99999, 99999).toString(), i
          .size = 4, i.color = "#000000", i.fontsize = 24, i.isMouseDown = !1, i.start =
          new u.default(0, 0), i.oldMid = new u.default(0, 0), i.prevOldMid = new u
          .default(0, 0), i.end = new u.default(0, 0), i.prevEnd = new u.default(0, 0),
          i.keyDown = {
            altKey: !1,
            ctrlKey: !1,
            shiftKey: !1,
            which: -1
          }, h.default.emit("userUpdate", i.account, {
            tool: i.tool,
            size: i.size,
            color: i.color,
            fontsize: i.fontsize,
            mode: i.mode,
            keyDown: i.keyDown
          }), i.maxUserHistory = n, i._resetCalibrate = i.getCalibrateAction(), i
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "update",
        value: function (e) {
          var n = this;
          t.PROPS.forEach((function (t) {
            t in e && (n[t] = e[t])
          })), this.emit("update", this.account, e), h.default.emit(
            "userUpdate", this.account, e), c.default.user("update user ",
            this, "with ", e)
        }
      }, {
        key: "pushShape",
        value: function (e) {
          return this.recycle.length && (this.recycle.forEach((function (e) {
            return e.destroy()
          })), this.recycle.length = 0), this.undoCount = 0, this.shapes.push(
            e), this.configActiveShape(), this.emitUserShape(), e
        }
      }, {
        key: "configActiveShape",
        value: function () {
          console.log("config active shape "), this.activeShape = this.shapes[
            this.shapes.length - 1]
        }
      }, {
        key: "undo",
        value: function () {
          if (this.undoCount >= this.maxUserHistory) return console.warn(
            "reach maxUserHistory! abort undo"), this.shapes.length;
          this.undoCount++;
          var e = this.shapes.pop();
          return e && (this.recycle.push(e), this.configActiveShape(), c.default
            .log("undo:", this), this.emit("undo", this), this.emitUserShape()
            ), this.shapes.length
        }
      }, {
        key: "redo",
        value: function () {
          if (0 === this.undoCount) return this.recycle.length;
          this.undoCount--;
          var e = this.recycle.pop();
          return e && (this.shapes.push(e), this.configActiveShape(), this.emit(
            "redo", this), this.emitUserShape()), this.recycle.length
        }
      }, {
        key: "getCalibrateAction",
        value: function () {
          var e = this.mode,
            t = this.tool,
            n = this.size,
            r = this.color,
            a = this.fontsize,
            i = this.isMouseDown,
            A = this.keyDown,
            o = this.flagPos;
          return new d.CalibrateAction({
            mode: e,
            tool: t,
            size: n,
            color: r,
            fontsize: a,
            isMouseDown: i,
            flagPos: o,
            keyDown: A
          })
        }
      }, {
        key: "clearShapes",
        value: function () {
          c.default.user("user reset:", this), this.shapes.forEach((function (
            e) {
              return e.destroy()
            })), this.shapes = [], this.recycle = [], this.undoCount = 0, this
            .emitUserShape()
        }
      }, {
        key: "emitUserShape",
        value: function () {
          var e = this.undoCount,
            t = (this.recycle.length, this.shapes.length),
            n = this.maxUserHistory - e;
          t < n && (n = t), h.default.emit("userShapes", this.account, n, this
            .recycle.length)
        }
      }, {
        key: "guessMyUndoCount",
        value: function () {
          this.undoCount = this.recycle.length
        }
      }, {
        key: "whenMouseDown",
        value: function (e) {
          this.prevOldMid = e.clone(), this.prevEnd = e.clone(), this.start = e
            .clone(), this.oldMid = e.clone(), this.end = e.clone()
        }
      }, {
        key: "whenMouseMove",
        value: function (e) {
          this.prevOldMid = this.oldMid.clone(), this.prevEnd = this.end
          .clone(), this.oldMid = u.default.middle(this.end, e), this.end = e
            .clone()
        }
      }, {
        key: "whenMouseUp",
        value: function (e) {
          this.prevOldMid = this.oldMid.clone(), this.prevEnd = this.end
          .clone(), this.oldMid = u.default.middle(this.end, e), this.end = e
            .clone()
        }
      }, {
        key: "reset",
        value: function () {
          this.update(this._resetCalibrate), h.default.emit("userUpdate", this
            .account, this._resetCalibrate)
        }
      }, {
        key: "destroy",
        value: function () {
          (this.shapes.length || this.recycle.length) && this.clearShapes(), c
            .default.user("delete user ctx:", this)
        }
      }, {
        key: "isFlag",
        get: function () {
          return "flag" === this.tool
        }
      }]), t
    }(l.EventEmitter);
    f.PROPS = ["mode", "tool", "size", "color", "fontsize", "isMouseDown", "flagPos",
      "keyDown"
    ], t.default = f
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = d(n(2)),
      a = d(n(0)),
      i = d(n(1)),
      A = d(n(3)),
      o = d(n(4)),
      s = n(48),
      u = n(482),
      l = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(262)),
      c = d(n(261));

    function d(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var h = function (e) {
      function t() {
        (0, a.default)(this, t);
        var e = (0, A.default)(this, (t.__proto__ || (0, r.default)(t)).call(this));
        return e.onUndo = function (t) {
          var n = t.recycle[t.recycle.length - 1];
          e.remove(n), e.emit("undo", t)
        }, e.onRedo = function (t) {
          var n = t.shapes[t.shapes.length - 1];
          e.push(n), e.emit("redo", t)
        }, e.visibles = [], e.transh = [], e
      }
      return (0, o.default)(t, e), (0, i.default)(t, [{
        key: "push",
        value: function (e) {
          this.visibles.push(e), this.visibles.sort((function (e, t) {
            return e.id - t.id
          })), c.default.emit("globalShapes", this.visibles.length)
        }
      }, {
        key: "remove",
        value: function (e) {
          var t = this.visibles.indexOf(e);
          ~t && (this.visibles.splice(t, 1), c.default.emit("globalShapes", this
            .visibles.length))
        }
      }, {
        key: "wrap",
        value: function (e) {
          e instanceof u.UserManager && (this.clearListener(), this
            ._usernameger = e, this._usernameger.on("undo", this.onUndo), this
            ._usernameger.on("redo", this.onRedo))
        }
      }, {
        key: "clear",
        value: function () {
          this.visibles.forEach((function (e) {
            e.destroy()
          })), this.visibles.length = 0, c.default.emit("globalShapes", this
            .visibles.length)
        }
      }, {
        key: "destroy",
        value: function () {
          this.clearListener()
        }
      }, {
        key: "clearListener",
        value: function () {
          this._usernameger && (this._usernameger.removeAllListeners(),
            delete this._usernameger)
        }
      }, {
        key: "resizeCanvas",
        value: function (e) {
          var t = e.widthScale,
            n = e.heightScale;
          this.visibles.forEach((function (e) {
            var r = e.ctx.canvas,
              a = r.width,
              i = r.height,
              A = a * t,
              o = i * n;
            l.setCanvasPropSize(e.ctx, {
                height: o,
                width: A
              }), e.corner[0].x *= t, e.corner[0].y *= n, e.corner[1].x *=
              t, e.corner[1].y *= n
          }))
        }
      }]), t
    }(s.EventEmitter);
    t.default = h
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = h(n(5)),
      a = h(n(7)),
      i = h(n(2)),
      A = h(n(0)),
      o = h(n(1)),
      s = h(n(3)),
      u = h(n(4));
    t.applyState = f;
    var l = n(48),
      c = function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
      }(n(262)),
      d = h(n(104));

    function h(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var p = function (e) {
      function t(e, n) {
        (0, A.default)(this, t);
        var r = (0, s.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
        return r.paddingTop = 0, r.paddingLeft = 0, r.canvasRatio = null, r.onResize =
          function () {
            r.container && (r.onResize.waiting || (r.onResize.waiting = !0, setTimeout((
              function () {
                r.onResize.waiting = !1, r.resize()
              }), 300)))
          }, r.resize = function () {
            var e = parseInt("" + r.container.clientWidth);
            if (isNaN(e) || e <= 0) throw new Error("白板宽度应是大于0的数字");
            var t = parseInt("" + r.container.clientHeight);
            if (isNaN(t) || t <= 0) throw new Error("白板高度应是大于0的数字");
            if (0 !== e && 0 !== t && (r.containerWidth = e, r.containerHeight = t,
                null === r.canvasRatio ? r.calcCanvasLayout(e / t) : r
                .calcCanvasLayout(), r.updateCanvasStyleSize({
                  paddingLeft: r.paddingLeft,
                  paddingTop: r.paddingTop,
                  canvasWidth: r.canvasWidth,
                  canvasHeight: r.canvasHeight
                }), console.log("resize"), r.opt && "owner" === r.opt.identity)) {
              r.canvasWidth && r.canvasHeight, r.emit("ownerCanavasUpdate", r
                .canvasWidth, r.canvasHeight);
              r.containerHeight, r.containerWidth, r.ownerCanvasHeight, r
                .ownerCanvasWidth;
              r.updateCanvasPropSize(r.canvasWidth, r.canvasHeight)
            }
          }, r.onUndo = function () {
            if (r.displayCtx && r.shapes && r.users) {
              r.fullRender();
              var e = !0,
                t = !1,
                n = void 0;
              try {
                for (var i, A = (0, a.default)(r.users.all); !(e = (i = A.next())
                  .done); e = !0) {
                  var o = i.value;
                  o.isMouseDown && r.displayCtx.drawImage(o.ctx.canvas, 0, 0)
                }
              } catch (e) {
                t = !0, n = e
              } finally {
                try {
                  !e && A.return && A.return()
                } finally {
                  if (t) throw n
                }
              }
            }
          }, r.onRedo = function () {
            if (r.displayCtx && r.shapes && r.users) {
              r.fullRender();
              var e = !0,
                t = !1,
                n = void 0;
              try {
                for (var i, A = (0, a.default)(r.users.all); !(e = (i = A.next())
                  .done); e = !0) {
                  var o = i.value;
                  o.isMouseDown && r.displayCtx.drawImage(o.ctx.canvas, 0, 0)
                }
              } catch (e) {
                t = !0, n = e
              } finally {
                try {
                  !e && A.return && A.return()
                } finally {
                  if (t) throw n
                }
              }
            }
          }, r.inputDom = function () {
            var e = document.createElement("input");
            e.type = "text", e.autofocus = !0, e.className = "wb-canvas__input";
            var t = e.style;
            return t.position = "absolute", t.display = "none", t.padding = "0px", t
              .zIndex = "999", e
          }(), r.opt = n, r.inited = !1, e ? (r.setContainer(e, n, !0), r) : (0, s
            .default)(r)
      }
      return (0, u.default)(t, e), (0, o.default)(t, [{
        key: "wrap",
        value: function (e, t) {
          this.clearListener(), this.shapes = e, this.users = t, this.shapes.on(
            "undo", this.onUndo), this.shapes.on("redo", this.onRedo)
        }
      }, {
        key: "clearListener",
        value: function () {
          this.shapes && this.shapes.removeAllListeners()
        }
      }, {
        key: "setContainer",
        value: function (e, t, n) {
          if (d.default.m.containermanager("setContainer", e, t), !(
              e instanceof HTMLElement)) throw new Error("画板容器不是HTMLElement实例");
          this.container && (this.container.removeEventListener("resize", this
              .onResize), this.container.remove()), this.container = e, e.style
            .position = "relative", t || (t = this.opt ? this.opt : {}), this
            .containerHeight = e.clientHeight, this.containerWidth = e
            .clientWidth, console.warn("canvas height!", t, this.canvasRatio),
            null === this.canvasRatio && (t.height && t.width ? (this
                .canvasHeight = t.height, this.canvasWidth = t.width, this
                .updateCanvasPropSize(this.canvasWidth, this.canvasHeight), this
                .canvasRatio = this.canvasWidth / this.canvasHeight) : this
              .canvasRatio = this.containerWidth / this.containerHeight);
          var a = this.canvasRatio;
          null === a && (a = this.containerWidth / this.containerHeight),
            "number" == typeof a && this.calcCanvasLayout(a), this.opt = (0, r
              .default)(this.opt, t), this.inited || this.initEssential(), this
            .updateCanvasStyleSize({
              paddingLeft: this.paddingLeft,
              paddingTop: this.paddingTop,
              canvasWidth: this.canvasWidth,
              canvasHeight: this.canvasHeight
            }), n && "owner" === this.opt.identity && this.updateCanvasPropSize(
              this.canvasWidth, this.canvasHeight), d.default.m
            .containermanager("setContainer/appendChild", this.displayCanvas,
              this.inputDom), e.appendChild(this.displayCanvas), e.appendChild(
              this.maskCanvas), e.appendChild(this.inputDom), this
            .adjustSize = !1, window.addEventListener("resize", this.onResize),
            window.addEventListener("orientationchange", this.onResize, !1)
        }
      }, {
        key: "calcCanvasLayout",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[
            0] : this.canvasRatio,
            t = this.containerWidth / this.containerHeight;
          t > e ? (this.canvasHeight = Math.floor(this.containerHeight || 0),
            this.canvasWidth = Math.floor(this.canvasHeight * e)) : (this
            .canvasWidth = Math.floor(this.containerWidth || 0), this
            .canvasHeight = Math.floor(this.canvasWidth / e));
          var n = this.containerHeight - this.canvasHeight,
            r = this.containerWidth - this.canvasWidth;
          this.paddingTop = Math.floor(n / 2), this.paddingLeft = Math.floor(r /
            2)
        }
      }, {
        key: "initEssential",
        value: function () {
          var e = this;
          if ("number" != typeof this.containerWidth) throw new Error(
            "画板宽度不是数字");
          if ("number" != typeof this.containerHeight) throw new Error(
            "画板高度不是数字");
          var t = document.createElement("canvas");
          this.displayCtx = t.getContext("2d"), c.setLineStyle(this.displayCtx),
            t.setAttribute("data-id", "displayCanvas");
          var n = ("\n    position: relative;\n    top: " + this.paddingTop +
            "px;\n    left: " + this.paddingLeft +
            "px;\n    box-sizing: content-box;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-color: #ffffff;\n    background-size: contain;\n    z-index: 2;\n    "
            ).trim().replace("\n", "");
          t.style.cssText = n, this.displayCanvas = t;
          var r = document.createElement("canvas");
          this.maskCtx = r.getContext("2d"), c.setpixelated(this.maskCtx), c
            .setLineStyle(this.maskCtx), this.maskCtx.lineWidth = 1, r
            .setAttribute("data-id", "maskCanvas");
          var a = ("\n    position: absolute;\n    top: " + this.paddingTop +
            ";\n    left: " + this.paddingLeft +
            ";\n    box-sizing: content-box;\n    transform: translate3d(0,0,0);\n    z-index: 500;\n    "
            ).trim().replace("\n", "");
          r.style.cssText = a, this.maskCanvas = r, this.inited = !0, d.default
            .m.containermanager("initCanvas"), setTimeout((function () {
              e.emit("init-canvas"), e.opt && "owner" === e.opt.identity &&
                e.emit("ownerCanavasUpdate", e.canvasWidth, e.canvasHeight)
            }))
        }
      }, {
        key: "updateCanvasStyleSize",
        value: function (e) {
          var t = e.canvasWidth,
            n = e.canvasHeight;
          if (this.maskCtx && this.maskCanvas && (c.setCavansStyleSize(this
              .maskCtx, t, n), c.applyCanvasLayout(this.maskCanvas, e)), this
            .displayCtx && this.displayCanvas && (c.setCavansStyleSize(this
                .displayCtx, e.canvasWidth, e.canvasHeight), c
              .applyCanvasLayout(this.displayCanvas, e)), this.users) {
            var r = !0,
              i = !1,
              A = void 0;
            try {
              for (var o, s = (0, a.default)(this.users.all); !(r = (o = s
                .next()).done); r = !0) {
                var u = o.value;
                c.setCavansStyleSize(u.ctx, t, n), c.applyCanvasLayout(u.ctx
                  .canvas, e)
              }
            } catch (e) {
              i = !0, A = e
            } finally {
              try {
                !r && s.return && s.return()
              } finally {
                if (i) throw A
              }
            }
          }
        }
      }, {
        key: "updateCanvasPropSize",
        value: function (e, t) {
          var n = this.ownerCanvasHeight,
            r = this.ownerCanvasWidth;
          this.ownerCanvasWidth = e || 300, this.ownerCanvasHeight = t || 300;
          var i = {
            width: this.ownerCanvasWidth,
            height: this.ownerCanvasHeight
          };
          if (this.maskCtx && c.setCanvasPropSize(this.maskCtx, i), this
            .displayCtx && c.setCanvasPropSize(this.displayCtx, i), this.users
            ) {
            var A = !0,
              o = !1,
              s = void 0;
            try {
              for (var u, l = (0, a.default)(this.users.all); !(A = (u = l
                .next()).done); A = !0) {
                var d = u.value;
                c.setCanvasPropSize(d.ctx, {
                  width: e,
                  height: t
                })
              }
            } catch (e) {
              o = !0, s = e
            } finally {
              try {
                !A && l.return && l.return()
              } finally {
                if (o) throw s
              }
            }
          }
          this.shapes && this.shapes.resizeCanvas({
            widthScale: e / r,
            heightScale: t / n
          }), this.fullRender()
        }
      }, {
        key: "addUser",
        value: function (e, t) {
          var n = t.ctx.canvas,
            r = t.account;
          this.displayCanvas;
          n.style.position = "absolute", n.style.boxSizing = "content-box", n
            .style.top = this.paddingTop + "px", n.style.left = this
            .paddingLeft + "px", n.style.width = this.canvasWidth + "px", n
            .style.height = this.canvasHeight + "px", n.width = this
            .ownerCanvasWidth, n.height = this.ownerCanvasHeight, d.default.m
            .containermanager("addUser", r, t), n.style.cursor = r === e ?
            "not-allowed" : "crosshair", this.container.appendChild(n), c
            .setpixelated(t.ctx), c.setLineStyle(t.ctx)
        }
      }, {
        key: "destroy",
        value: function () {
          this.container.removeChild(this.maskCanvas), this.container
            .removeChild(this.displayCtx.canvas), this.removeAllListeners(),
            window.removeEventListener("resize", this.onResize), window
            .removeEventListener("orientationchange", this.onResize, !1)
        }
      }, {
        key: "fullRender",
        value: function () {
          if (this.displayCtx) {
            this.displayCtx.canvas;
            c.clearCtx(this.displayCtx), this.displayCtx.getImageData(0, 0, 1,
              1)
          }
          if (this.shapes && this.displayCtx) {
            var e = this.displayCtx,
              t = this.shapes.visibles;
            e.save(), d.default.log("displayCtx");
            for (var n = 0, r = t.length; n < r; n++) {
              var a = t[n];
              console.assert(void 0 !== a.ctx, "shape ctx is ubdefined", a);
              var i = a.ctx && (0 === a.ctx.canvas.width || 0 === a.ctx.canvas
                .height);
              d.default.m.containermanager("render shape:", a, "skip", i), i ||
                (f(e, a), "erase" === a.tool && console.log(e
                  .globalCompositeOperation), e.drawImage(a.ctx.canvas, a
                  .corner[0].x, a.corner[0].y))
            }
            e.restore()
          } else d.default.m.containermanager("no render", this.shapes, this
            .displayCtx)
        }
      }]), t
    }(l.EventEmitter);

    function f(e, t) {
      var n = t.ctx,
        r = t.size,
        a = t.color,
        i = t.tool;
      void 0 !== e ? (e.lineWidth = r, e.strokeStyle = a, e.fillStyle = a, "erase" ===
        i && e !== n ? "destination-out" !== e.globalCompositeOperation && (e
          .globalCompositeOperation = "destination-out") : e.globalCompositeOperation =
        "source-over") : console.warn("applyState上下文为空!")
    }
    t.default = p
  }, function (e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
      value: !0
    });
    var r = B(n(155)),
      a = B(n(25)),
      i = B(n(75)),
      A = B(n(7)),
      o = B(n(42)),
      s = B(n(36)),
      u = B(n(5)),
      l = B(n(2)),
      c = B(n(0)),
      d = B(n(1)),
      h = B(n(3)),
      p = B(n(26)),
      f = B(n(4)),
      g = B(n(11)),
      y = B(n(484)),
      v = n(272),
      m = B(n(48)),
      w = B(n(469));

    function B(e) {
      return e && e.__esModule ? e : {
        default: e
      }
    }
    var M = function (e, t, n, r) {
        return new(n || (n = g.default))((function (a, i) {
          function A(e) {
            try {
              s(r.next(e))
            } catch (e) {
              i(e)
            }
          }

          function o(e) {
            try {
              s(r.throw(e))
            } catch (e) {
              i(e)
            }
          }

          function s(e) {
            var t;
            e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((
              function (e) {
                e(t)
              }))).then(A, o)
          }
          s((r = r.apply(e, t || [])).next())
        }))
      },
      C = function (e) {
        function t(e, n) {
          (0, c.default)(this, t);
          var r = (0, h.default)(this, (t.__proto__ || (0, l.default)(t)).call(this, e,
            n));
          r.records = [], r.connector = new I, Array.isArray(e) && (r.params = e[0]);
          var a = r.params.container,
            i = r.params.drawPluginParams || {};
          return r.drawManager = new v.App((0, u.default)((0, u.default)({
            account: r.viewer,
            uid: 123,
            container: a,
            connector: r.connector,
            isRecordPlayer: !0,
            platform: "web"
          }, i), {
            appkey: "",
            nim: {},
            logger: new w.default(r.viewer, !0),
            isG1: !0,
            getAntiLeechInfo: r.params.getAntiLeechInfo
          })), r.drawManager.setTool("pan"), window.drawPlugin = r.drawManager, r
        }
        return (0, f.default)(t, e), (0, d.default)(t, [{
          key: "init",
          value: function () {
            return M(this, void 0, void 0, a.default.mark((function e() {
              var t, n, r, l, c;
              return a.default.wrap((function (e) {
                for (;;) switch (e.prev = e.next) {
                  case 0:
                    return e.next = 2, this.fetchMultiData();
                  case 2:
                    if (t = e.sent, n = (0, s.default)(t, 2), r =
                      n[0], l = n[1], "error" !== r) {
                      e.next = 11;
                      break
                    }
                    return this.state = "error", e.abrupt(
                      "return", "error");
                  case 11:
                    return this.records = l.map((function (e) {
                        return (0, u.default)((0, u.default)
                        ({}, e), {
                          records: e.records.map((
                            function (e) {
                              return {
                                record: JSON.parse(e
                                  .str),
                                time: e.time
                              }
                            }))
                        })
                      })), c = new o.default, this.records
                      .forEach((function (e) {
                        e.records.forEach((function (e) {
                          if ("snapshot" === e.record
                            .type) {
                            var t = e.record.value.data;
                            if (t.recordTime = e.time, t
                              .transDocData && t
                              .transDocData.v)
                              for (var n in t
                                  .transDocData.v) t
                                .transDocData.v[n].t = e
                                .time
                          }
                          if ("snapshotArr" === e.record
                            .type && Array.isArray(e
                              .record.value) && e.record
                            .value.length > 0) {
                            var r = !0,
                              a = !1,
                              i = void 0;
                            try {
                              for (var o, s = (0, A
                                  .default)(e.record
                                  .value); !(r = (o = s
                                  .next()).done); r = !
                                0) {
                                var u = o.value.data;
                                if (u.recordTime = e
                                  .time, u
                                  .transDocData && u
                                  .transDocData.v)
                                  for (var l in u
                                      .transDocData.v) u
                                    .transDocData.v[l]
                                    .t = e.time
                              }
                            } catch (e) {
                              a = !0, i = e
                            } finally {
                              try {
                                !r && s.return && s
                                  .return()
                              } finally {
                                if (a) throw i
                              }
                            }
                          }
                          "snapshot" === e.record
                            .type && e.record.value
                            .uid && c.add(e.record.value
                              .uid), "snapshotArr" === e
                            .record.type && Array
                            .isArray(e.record.value) &&
                            e.record.value.length > 0 &&
                            e.record.value[0].uid && c
                            .add(e.record.value[0].uid)
                        }))
                      })), console.log(this.records[0].records
                        .map((function (e) {
                          return e.record.value
                        }))), this.viewerArr = (0, i.default)(c),
                      this.viewerArr.length > 0 && this.setViewer(
                        this.viewerArr[0]), this.state = "ready",
                      e.abrupt("return", "ready");
                  case 19:
                  case "end":
                    return e.stop()
                }
              }), e, this)
            })))
          }
        }, {
          key: "setViewer",
          value: function (e) {
            var t;
            this.viewer = e, null === (t = this.drawManager) || void 0 === t || t
              .setViewer(e)
          }
        }, {
          key: "doSetTrack",
          value: function (e, t, n) {
            return M(this, void 0, void 0, a.default.mark((function t() {
              return a.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    this._seekTo(e);
                  case 1:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "play",
          value: function () {
            var e;
            null === (e = this.drawManager) || void 0 === e || e.play()
          }
        }, {
          key: "pause",
          value: function () {
            var e;
            null === (e = this.drawManager) || void 0 === e || e.pause()
          }
        }, {
          key: "setPlaySpeed",
          value: function (e) {
            var t;
            null === (t = this.drawManager) || void 0 === t || t.setPlaySpeed(e)
          }
        }, {
          key: "destroy",
          value: function () {
            var e, n = this,
              i = (0, r.default)(null, {
                destroy: {
                  get: function () {
                    return (0, p.default)(t.prototype.__proto__ || (0, l
                      .default)(t.prototype), "destroy", n)
                  }
                }
              });
            return M(this, void 0, void 0, a.default.mark((function t() {
              return a.default.wrap((function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    return t.next = 2, i.destroy.call(this);
                  case 2:
                    null === (e = this.drawManager) || void 0 ===
                      e || e.destroy();
                  case 3:
                  case "end":
                    return t.stop()
                }
              }), t, this)
            })))
          }
        }, {
          key: "_seekTo",
          value: function (e) {
            for (var t = void 0, n = 0; n < this.records.length - 1; n++)
              if (e < this.records[n + 1].beginAt) {
                t = this.records[n];
                break
              } void 0 === t && (t = this.records[this.records.length - 1]), t
              .cid !== this.currCid && this.drawManager.addRecordData(t.records),
              this.currCid = t.cid, this.drawManager.seekTo(e - t.beginAt)
          }
        }, {
          key: "showTrackCb",
          value: function (e) {}
        }]), t
      }(y.default);
    t.default = C;
    var I = function (e) {
      function t() {
        return (0, c.default)(this, t), (0, h.default)(this, (t.__proto__ || (0, l
          .default)(t)).apply(this, arguments))
      }
      return (0, f.default)(t, e), (0, d.default)(t, [{
        key: "sendData",
        value: function () {}
      }, {
        key: "broadcastData",
        value: function () {}
      }, {
        key: "sendSyncRequest",
        value: function () {}
      }]), t
    }(m.default)
  }]).default
}));
